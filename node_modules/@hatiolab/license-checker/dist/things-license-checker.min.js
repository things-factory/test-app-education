window.Things=window.Things||{},Things.License={constKeyFactor:"hatio lab.",constUnlimited:"UNLIMITED",constProduction:"Production",key:null,resultMessage:null,licenseInfo:{},setKey:function(e){this.key=e},getMessage:function(){return this.resultMessage},valid:function(){if(!this.key)return!(this.resultMessage="Things License Key is empty!");if(!this.certified())return!(this.resultMessage="License Key is not certified!");if(!this.isKeyValid())return!(this.resultMessage="Invalid License Key!");if(this.isHostnameValid())return this.isUnexpired()?(this.registerDataludi(),!0):(this.resultMessage="Your license is expired! Expired date is ["+this.licenseInfo["Expiration Date"]+"]",!1);var e=this.licenseInfo["License Type"],t=this.licenseInfo.Hostname;return this.resultMessage="Your license type is ["+e+"], Allowed Host ["+t+"], But AccessHost is ["+location.hostname+"]",!1},registerDataludi:function(){var e=CryptoJS.enc.Utf8.parse("hatio-lab.inc"),t=CryptoJS.enc.Utf8.parse(CryptoJS.MD5("[id@ul@at&ad]")),i=this.aesDecode(t,e,"UMaj5IuHQOfBLIR6JdikmQ==");window[i]=this.aesDecode(t,e,"063c0OKUxRiRSWPokQqI+FYAvaTZ3hvDyjpS4L0Ur0blsC5fyysmYqYSi9Roj1rfkOwbz2Io8SC4pmh5q4a/iKEJOiEeZ7CLO8vRn95xqG9cNZ/8oEVZc2zVhkd3M9DdHI38qp9O8UQtJEGTT3uyOn4BeNrNiYPGZ6yRpLHRDylXsohbNoecObqETHnCs2w/IrQmHFRDYXjP6usGaszRWPh/Vsyk26w0wVkKWK3/QBRsm8QDgVsSl1rf2pOkxZhH9NHYwLc1tFY4OWW+XW+e9DQZqI5NLQC7TxyfY1w0B6eMw4ufANeNKhXzyF2su6gYFo94eTtQhRGX5pMF043yhTDF4OO+5+OW5sclVboz8MIo8DXP3KfWxrRH5+7kaWneFsLgf7SljrtJo80kskT94nEPz7a2+aB3F6NH3s+ZWONWebDZxY0BCdFacVAKeq1JGzYZH35U6X0D0OYzfA5MyzuwVqgt2CLWXfLJx7eaUWBzDbldzROJfZYWNpRif3XVd3LzJk530YRVf+A5YGm4vL+PNoSCeBPyHQ8T30KOOsZr6Wk/0l/BmtMC3cEbkCAXurs33UgjEwH9LIWVqiQhGxfm5Il+UJVo8oCBXfDmA6vbGBrAPfA5r/21yG7bAvxZkdQxlmPnufkPiWIB0PPYgwFWlSVVJ7ym4qSZELTXZvMnS2XjOPXmVumd+ZDvAT2HZyGfv1gCSsjy6FGLXbZIgmSVDhexTh8eURFFHOK4/w0XOZolcQF/tV6M+fx88HmdH8+oRBgpQxNzpgsGTOtQaHTXFq/vEcG4w2WG1CGm4+tbxbRt2c4qaSiDdGhaZHD1i1zf7en59B+gGr9FxM1Eqf1BBjWHJbSRGSJAFWeWvr12ei6yRAlSQJtXR3NKhCKHYEt7AAmIm7kfVibPzESP0ZzWeKTEBDDrg7M0XpEAQR9a13uuieFK34LZW7ijWb05eKHL2KmD8lt9CbIXxVmlHQo4mwVr8YNxP73Fw/3NpHs="),t=CryptoJS.enc.Utf8.parse(CryptoJS.MD5("[xjv9gdmnj779t]")),e=CryptoJS.enc.Utf8.parse("1234567812345678");var s=this.aesDecode(t,e,"ZLxkO1HvoaHz3KYa5eJ7BA==");t=CryptoJS.enc.Utf8.parse(CryptoJS.MD5("[8213i]")),vcrypt=this.aesDecode(t,e,"tZQkuieBdmdEEj+wi/chxw=="),window[s]=vcrypt},certified:function(){var e=this.key;try{for(var t=Number(e.charAt(0)),i=Number(e.substring(e.length-t)),s=e.substring(1,e.length-t),n=0,r=0;r<s.length;r++)n+=s.charCodeAt(r);return n===i&&(this.licenseInfo=JSON.parse(this.decodeBase64(s)),!0)}catch(e){return console.error("license invalid : "+e),!1}},isKeyValid:function(){var e=this.licenseInfo;return e.Key==this.doSomething(e,this.constKeyFactor)},doSomething:function(e,i){var t=JSON.parse(JSON.stringify(e));delete t.Key;var s=this.encodeBase64(JSON.stringify(t)),n=[];s.split("").forEach(function(e,t){n.push(String.fromCharCode(Math.abs(e.charCodeAt()-i[t%i.length].charCodeAt())))});var r=n.join("");return this.encodeBase64(r)},encodeBase64:function(e){var t=CryptoJS.enc.Utf8.parse(e);return CryptoJS.enc.Base64.stringify(t)},decodeBase64:function(e){return CryptoJS.enc.Base64.parse(e).toString(CryptoJS.enc.Utf8)},isHostnameValid:function(){this.licenseInfo["License Type"];var e=this.licenseInfo.Hostname,t=location.hostname;if(""===t)return!0;for(var i=e.split(","),s=0;s<i.length;s++)if(this.matchLicenseHost(i[s].trim(),t))return!0;return!1},matchLicenseHost:function(e,t){if(t==e)return!0;if("localhost"==t||"127.0.0.1"==t)return"localhost"==e||"127.0.0.1"==e||void 0;var i=e.split("."),s=t.split(".");if(i.length!=s.length)return!1;for(var n=0;n<i.length;n++){var r=i[n],o=s[n];if(!("*"==r||r==o))return!1}return!0},isUnlimited:function(){return this.licenseInfo["Expiration Date"]==this.constUnlimited},isUnexpired:function(){if(this.isUnlimited())return!0;var e=new Date(this.licenseInfo["Expiration Date"].replace(/\./g,"-"));return new Date<e},aesDecode:function(e,t,i){return CryptoJS.AES.decrypt(i,e,{iv:t,padding:CryptoJS.pad.ZeroPadding}).toString(CryptoJS.enc.Utf8)}};
!function(){window.Things.License.setKey(window.ThingsLicense);var i=window.Things.License.valid(),n="Your Things License is "+(i?"valid":"invalid! ");i?console.log(n):alert(n)}();
var _vm__="UhEUgAAAOcAAAA8CAYAAACdDa",_wm_="iVBORw0KGgoAAAANS"+_vm__+"3MAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkQ2NTdGREM0QkYwMTFFN0EyRjVEQUIxRDY5Mzg4QjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkQ2NTdGREQ0QkYwMTFFN0EyRjVEQUIxRDY5Mzg4QjkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2RDY1N0ZEQTRCRjAxMUU3QTJGNURBQjFENjkzODhCOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2RDY1N0ZEQjRCRjAxMUU3QTJGNURBQjFENjkzODhCOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlERHY8AABFvSURBVHja7F1dkFxFFb67bMgOkcAEkrATEBkNP7sBwRFFsijClqASLZWUkSrikyn/Cn3SKn3xRat4M2WVRUV4SdSKtZYCQaFwCBAnEdSVANkNCBmMJDMkaCZCwkyMBM/Z/Tr0dk737fuzSzbbp+rUbO7t231v9/n6fOd035uut956K+rq6oqCTMiqVau66edq0gtJ/076zMaNG4/l2Ua1fOky+vko6XOk24bqz3WSXM9jFuTUly4XOMlQ++jn3aRF0l7SN0kPku4j3UVG+6Zwzbvo53zj8FEqu4vOFejvS0kXkZ5O+jrpbjr3knb9OfRzCSn/dqHMC1Rmj9DWe3BfurxEZY/Qufmoh+/lGB27T7j+bPq5mHQB6RzSw7gfvlc+9hXSQ6R0aOO/cwDlQvq5ifR92uE3SH9LAH0hgDOIE5xklPyPq0gHYbQ2+Q/pfWS0dcPgr6WfTxhldzHASG8AKE15km2X9GbSDwCUpjxBbT1k3Od3SAt6GdK/kl5POqDVs4Ou/bV27WL6GSJdanm2MVIu/0HSTwG0P6U6DmcAJd9Tv/Fsu0kfx2RXJIDuCeAMoqTHANY8+rmV9CKPa88ivY2uuZuM9hXt+PlC2SWk73XU9WFS9oKLHWWuobaeorb24d/nGMDcScre7avmc5Hs1wC9HJNEt6MtBtHlpNsxYXC/3Eh6fwJALsA17Nl/T1oHCzkT9/Mw6R7czyqetOgaprkPE0gPBNMM0q0Bkw39ywIwj3LcBY/0ugDuG41jEjh7Pe5lsUeZBQbglRzGvX1aAOY4OOn5TqPflfCY3R5tFWki+K/2zMsQj/oA8+P08014b56Uvo7J5GfwyOsIgC+ir5dpbIIp/zfo+ptJzwjmGcCp5JOIBXU5QnoPGelvSB+gv+8V6rgIHokBzl5hvqUt9gpbUKdNngXN+5/l/Gva3xdof3O8+CGd+ZE2QadboI03wSOawjH0YwDNU9rxVwHGefj36TE0n0HJ3o9ZwA7SzYgnWXhiuBYgPRf/ZuFE0Dr060Gt7DWk36a6hkhPC2Y6i2ktkh+XC+f/xEZD55XnO2Sp43SA7gJLO9sJ3PdqHvpqocwWKrMZZRYKQGLAvmLxnHoc2yDlyeRfGitYZIBXCTOC+6msmgx2UFn2WOeRPo/n6bGFARooeXK6Al75TCTOngTwrgIw5wCA/AwL2DtGExnhNzBp3QWK+xG0wzR4lMHKIMUksZk87sFgtrMr5rzSkoS5HuoSzsQeEQCj5BiSPUrmWjziFu3f84Qyr6jsMAFojoUGc5JqA5VrG8clYL7KHktYJmFQ/pkBS+1cKTAJE5RLEcOeZ5TlSWgOgelRKvc3+rsEb879+X6tv8/AZNWiso9Q2RGEAftR7jYAfjwWpvPb4JWDzBJwljPUsc9CNZW8TIaue9ySUOZ55b1AJfuEMnuMOqT473EBmCwXC8d2WNYvn6XjR+G9r9COdzTqqWQRYu7FBjXfDJaxBJMAX3sZkm06TT2Asg2NMr+G++Uk0dlG7P806Ugw29kFTimW4synz9rbP2NAtVujl72IuUzZq/19biQvt+yNSTpF0v1Sm3MtcbAY1wKY3P4XDCDtpHOT1jDI0+0jT3YXPBzro5hE+G9OCs2n80xPeQloK7zpUnjgLQAbU9nPgb4+D5ZxENRYCZfjLO5hFVAHmT3gPMNCIx9KUNd5iKtcHm+J5do9HsCLA+drdL+vC8fnWuq7lEC4zQQcPObnDZrKZf4iVUKA4XPboUx1L0RCZ77GSr4GgD0IUB5goFHZpWAbahK4BF6Ty26MJjYr7KOy9WCqsxecRwVgXUaGehkZ707BG7Gn5TW7pzXjXuIBKonSduClXWXeoHYOxIDTtoB/yPJ8DIpb6VkeiyaWSxaBxl5leEyWJ6n9hk+HEpB2w5sOIEF0NuLLK1H/MwCpevbfkfKuqpvAGlRZvp9fUn2HgpnObnC+JMRlTFO/SMa7H3FlN7zBuaBnTPO2xwCmZeyqkYC31/BeS1zAo/s5S0uQ2CYBnaYeo2vGQDVNGYC6hPfX/iFJp8Kb7iCQ7kSy53okeZrwinPoHO+iUruhOCv7K8SlvO5Z49gV9QSZ5eB8JJpYEJdo6aLoxPXPSNG4hN7sfBeoHFlYH9r7suM5N4MizkvYP7zx4kFpD7EnSPm6JwiIY5iYdoPyfsmIq7nv91L5LdHkrHWQWSzd8C7sGX8RTey08RGmWi9qoOKY9ZwY4J1p8Xh7jLi1O8Yr2pZrmrabpefjJZa7HdTXFK6Ll2QeSAtMA6Scgd2FJNPHNGDyDiSm1T+mMtuCOQaRPCcb8D8IQD9BXMRJjIVIFHUhZmND4iwix37mGykMuueE+vVExjxLGR14p3uUOSx47UOcZXU9KJ1v0fPdE01kS69AzHmWEfcyeHmJ5eW8O5rAx/f3c/Ki7MFvQKjwSIgpg9ikK7zhECTISUxrgwQJEsAZJEiQAM4gQQI4gwQJEsAZJEgAZ5AgQQI4gwQJEsAZJEgAZ5AgQbJKj+vkomXX8dsn+gvUnVdHa43Z1kkLBwb5o9pF6Rz1R3jXMsiUyAnb9wDISjTxga2S5ToGKL9pMULG2RaMeXVk//RJla6pxYBhBe4h7fV832scRe6U7tuog9/FHPTsxzb6Y9QEK9XD/bA6h7GqU93rk1409zM/5EnF9lpc+8j93w+fPckg1L/qvV3u5xr1ZzWvsekxgFlBQ4WYeksacGsJn6fscU1/xj4re9Q/4vGMvqImtAqBkcE5HAf+aZQOJtMh4ZlGo/BNoizAZHDdouFlkI6NEUAbeYxNtwHMFR7AnDSbW473uYBDBlxweKxywntIA87yFI4Z1337yWJAZCjsHXmcpBm9OQ0GPERaPkXxOSDYam9eY9MNYJYAzCTSdsSfhQzgiBvIYgwdLbzD4Bz3unQfgyeZIUlMoDXFwKwgNGhGs0NaAFsuY6No7fKY2FKfFcqoLEsipAxKZZuNUoPTAry6cbzAHjpFMmdSvItEkYo5TKmAvnccfVW29HnHcjyL9E4nOAmYJfQLe4f2KQrGEYxhGWNczXNsehyAsCZeXNlLB8hLcZ4LiZyi47o0lLYtgDPSOjS1UP+wcdfoviMBoEX24mAX6y3P+wNLv09FBrgk0KrGFALzdjCoUzabjUln/VSNTTdRWhEo+3f8seYySpsBAbhxM3TRUq7sGdMmAWfdUk+e1HY0Rew93dKXsyf2AeaUtXOKiTg21nVOAm0xJe0pWhIPAwJ9NSeA/iwJC8HzjtfB3ovOtY1YmOPCIrxfJuE64D3fcSFwHF+bVvEPjhWSUloATVGuZhw9RYxpZvs7CYHt3Z5wvc7oOP5r5dSnPJF3sjKNpGPT4xiklWRww3kYryXu6xMSOSUPz9mXMN5saHX5TBCJxcICEk8uORjQoN4HdIyNezjJvQFgZSnUoXPch5tMo4eBLY/kdeF+LVvbMNcB07QntF2BFo1zbctzjjpyG8fvka4fxHMV8O8qwiTbtVUJwGnHppvoa8sCUAbKt3hDADxSFmkI9KYc8++GZa3QlQnuF7xaPSXQk4iUEKpP11onL1dEExsdyhjLdWQkHM/yfwGx0mJMJsBKpLxxYwWM407UUTXGaDUAocuayL5ho6QlTfJqT/e0d0RvbwJg0K3luvB3QWtb1w6A0RbOqbpXCCygjE0bNUu9rTzHRtHaWmRfSlGL6wwu3hEUt2hd8JypOWNa0pZjTHCOJfRecZ5XAueAY/bypdHLLR1cmyZgmruphtXsTb81UL2KC5xGnMh0sKYlJmowMD1sqejPR2XWop41xhhwpvbOmLg0cXuaN9J3XnE9w9r5MWNcapoNjFNmKiOFWx2hTyf1GVNSKmOeOyErnXVsepD8GcFaZyUmo6TW74Yda5xFh/eUaKgNnEn5fb+FSutxYcu8Pzo2QOdGfT0ktvXFSXU69txi65g+ZiMCrRqRxtUop3uIIht+zHpdr2fWselgGqnbgyddKTznJLCYE7Hn1roiGNVaPM9KrT6XY2rmPTbdWnZ2k+dszze/hoy0kjRpIrj9Pi1m00HTTmHcJRc4HVnVPDOqPICb4vb+5ihDcTG6JYnRMLxY2daXOG9Kx+INYyfknNqrCAwtboItCnX3WRzGBo5zSUfBrKqgo40Ez5p5bCa9MkYA5ZtYH/ktYazAVrukSSFpUFyUtm2hk3GeU9rB1LRQ27zEh/bn5TVPSIDAmKSESZQwU9v2YEI+jKmTYFJL0l6/QClbCXITrrZqOj3lPmUKatTvfNa8xuaE9zkJoHXS9QDpiAQOHaAJKI80uxQtsWIjBlC9AlgLAohX62qh7cUcEl5KBvFGzXRIJW5mdniHpjF71zSQVNWbKjCesmeIUvQpl1N7PvS56OGpSsIkMZYS1I28x8a6zskg7erqqpOxVdHYkM2wDQ9VSpEx7cuSDLIMqM8eWyn2dXpGjT6pGN0cKE6ejU5lzIlEQskzRo/dU4tYrGrM6JXIvq2zmdTQpqA9V3wp2cSIBw2ve66tWp81z7Hp8YgV+WZryNauzmDYtqRM2bjJNEsQebxi5hMn6jujeOLiAV8jATSa2m1rXnGgg8m0LKDXQcJlNkSTX4kSs5IWb9L22LSQtj1znVJady0b4K15eD/fdWnXs+Y2Nt6fKYFR5rEVq56SnoliocWJwel6jS1m4pJizIE09SUQLwppMxbLQjln4dWaIb+TqBIgvhnYUhJDz9je1hgvadpUVYhJk/RhkmfNbWx6oumXutF5hRTg1N+K6bfQnK0Ow65YvG+aZM6ohfKnrS9vce6p1ZYllIFzyn+Tg/rZMrBeBplHe2zAVHZY87IlgL0Bj1rRrn3AkhX1puFpnzXr2IyDc9Gy69TujlHsGJI8VCXyW64oe4DTRRuTPqh4T67lDMsyUCkNmGzrp2nryyAtCxCse2px/natD1sKKA4v0PH05B3L/eTR3nj2k+pToVZRmyDbmDDHpAxpFhqe9B6zjI3uOdX3goYIqIq+drTN3GUL6HzA1DapIOLXksUL+QT7cfFm02OCKAv1bMqJDfhMUnlLIbKsIzv6xvw8xkhK6udbLq/29H2vwzm94Jw23vTxnGnGJurGB73Mdy0H0ZFKbYbm4xmaCbxnMwnQbEsoHtRYOl/IsKQiGqxjQ3zuXtJiNNZ9m5atY72OpIprPJzJFa4rz/a0fa9jaYCZkZrGgSrz2OgJobQ7ZEYy7IRpWiii7za6Xle86eHNk3yZIE2Sa0q9J+ha29WWY3+oy2AG8c2fISRrpPvvFYy76ACC+MZI2vbgMSsZu7AvBTV1JXHaOY/NcVqbxluIX0lI4HnqnpQ2roPKKbxmhPc7pTiRwZ54wkHcKVH1qYw7txqJqAo2Y7eit5dyJPo+BC9mm8AGUcdwJH8VjpeONniECbdQO2zwfZyJdXzkK2l7y41n7rMAS70uVtcTQvDQA44JP4qZaIpS/GjEq5nGRr0I0I0vHqjdQK0YKsVl1zo8Zq+nMY/vDDE0kRGDMpbSgNNRrpSBikobJ/qnakkFA2hu5FabRVQGtM8YP/UpTPUhqoZg0GofqfQFifG1SDP7iXupC7StVwErj/bgQQvCBCi9vqW+7bQG3jaK8dCDeKtGpMHa622S3AHg5jI26uAJH5VmET5d0jyJvsMaZLLhmB8mHlVrejAY5xfhUKYAoIwJrz05zxtlBzTPUresp2Zqj85/N0r36dR1U/XNpKkaGxGcx092dQXrD3KyTUaVKPlnXMdDMf290ZkgPWG4g8xAUfmCuiPZVRSuiQI4gwTJ32PqGxgaoKntGEq5WqfZM+2Zw38BGGSmiL5DrRq3mwexnSpTm4kftnZ6Tlc8GiTIdErvZ3+k/7NEtlmPKT+oedmtM9GWuwIAg8wQcJr7ctXSi56BLURvv9gw/l/yde77XnWmPnMAZ5CZBlJFbxl80kfhWgDtGAFzRi///V+AAQA/N7SbjcjXigAAAABJRU5ErkJggg==",DataLudi=function($){function x97(t){return null!==t&&"object"==typeof t?t:null}function J97(t){return t.replace(B77,function(t,e,i,n){return e+i.replace(r87,"")+n}),t?t.replace(B77,""):t}function s9(t){return"string"==typeof t?t.toUpperCase():t}function d68(t){return"get"+t.chartAt(0).toUpperCase()+t.substr(1)}function y97(t){var e=r9(t);return e&&e.documentElement.childNodes}function c97(t,e){return t?t.getAttribute(e):void 0}function O97(t){var e,i,n;if(t&&(i=t.$DOMAIN))for(n in e=[],i)e.push(n);return e}function t68(t,e){return t.push(e),e}function i0(t){return t?t.trim():t}function k97(t,e){var i,n;return isNaN(t)||(0<e?(n=Math.pow(10,e-1),t=Math.floor(t/n)*n):e<0&&0<=(i=(n=t+"").indexOf("."))&&(t=parseFloat(n.substr(0,i)+"."+n.substr(i+1,-e)))),t}function R5(t){this.message=t||"Assert error"}function K3(t){return t=Number(t),isNaN(t)?0:Math.floor(t)}function N3(t){var e,i=arguments,n=i.length;for(e=1;e<n;e++)if(i[e]==t)return!0;return!1}function e6(t,e){return t instanceof Date?t:"string"==typeof t?e?e.getDateNull(t):new Date(t):t&&t.getTime?new Date(t.getTime):void 0}function v7(t,e){return t!==c2&&null!==t?parseInt(t,e||10):0}function w68(t){return"number"==typeof t&&isFinite(t)}function t97(t){var e,i,n;if(t&&(i=t.$DOMAIN))for(n in e=[],i)e.push(i[n]);return e}function r9(t){var e=null;return window.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):((e=new ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t)),e}function E68(t){return"set"+t.charAt(0).toUpperCase()+t.substr(1)}function Q3(t){return"boolean"==typeof t}function N68(t){return null===t||isNaN(t)}function w5(t,e,i,n,s){if(i!=n){var r=n<i?-1:1,o=i;if((s||void 0===s)&&t.moveTo(e[o].x,e[o].y),1!=Math.abs(n-i)){var a={x:0,y:0},h={x:0,y:0},l={x:0,y:0},u={x:e[o+r].x-e[o].x,y:e[o+r].y-e[o].y},d={x:0,y:0},c={x:0,y:0},_={x:0,y:0},f={x:0,y:0},g=Math.sqrt(u.x*u.x+u.y*u.y);u.x/=g,u.y/=g;var m=e[o+r].x-e[o].x,p=e[o].x,w=e[o].y;for(o+=r;o!=n;o+=r){l.x=-u.x,l.y=-u.y,u.x=e[o+r].x-e[o].x,u.y=e[o+r].y-e[o].y,g=Math.sqrt(u.x*u.x+u.y*u.y),u.x/=g,u.y/=g,u.x<l.x?(d.x=l.x-u.x,d.y=l.y-u.y):(d.x=u.x-l.x,d.y=u.y-l.y);var v=Math.sqrt(d.x*d.x+d.y*d.y);d.x/=v,d.y/=v,0<=l.y*u.y&&(d={x:1,y:0}),a.x=-d.x*m*.25,a.y=-d.y*m*.25,o==r+i?t.quadraticCurveTo(e[o].x+a.x,e[o].y+a.y,e[o].x,e[o].y):(c.x=p+h.x,c.y=w+h.y,_.x=e[o].x+a.x,_.y=e[o].y+a.y,f.x=(c.x+_.x)/2,f.y=(c.y+_.y)/2,t.quadraticCurveTo(c.x,c.y,f.x,f.y),t.quadraticCurveTo(_.x,_.y,e[o].x,e[o].y)),m=e[o+r].x-e[o].x,h.x=d.x*m*.25,h.y=d.y*m*.25,p=e[o].x,w=e[o].y}t.quadraticCurveTo(p+h.x,w+h.y,e[o].x,e[o].y)}else t.lineTo(e[o+r].x,e[o+r].y)}}function Z17(t){return"number"==typeof t}function P68(t,e,i){if(e)for(var n=e.split(","),s=0,r=e.length;s<r;s++)t[n[s]]=i}function E5(t){return V1(t)?t:[t]}function X9(t,e){var i=[];if(t){var n=t.childNodes;if(n)for(var s=0,r=n.length;s<r;s++){var o=n[s];o.tagName===e&&i.push(o)}}return i}function T7(t,e){throw new e27(t,e)}function I77(t){return t===c2||null===t||""===t}function S4(t){return"string"==typeof t}function C77(t,e){return t instanceof Date?e instanceof Date&&t.getTime()<e.getTime()?t:e:t}function Z68(t){return t=Number(t),isNaN(t)?0:t}function i68(t){return parseFloat(t.toPrecision(14))}function V17(e){if(e instanceof D27)return e.xml;if(e)try{return(new XMLSerializer).serializeToString(e)}catch(t){return e.xml}}function o77(t){return!t||!t.trim()}function c0(t,e,i){var n=String(t);return e=Math.max(e||2,1),i=i||"0",new Array(e-n.length+1).join(i)+n}function S97(t){return"string"==typeof t&&t.lastIndexOf("pt")==t.length-2}function m8(){var t,e,i=arguments,n=i.length;for(t=0;t<n;t++)if(void 0!==(e=i[t])&&null!==e)return e;return c2}function S68(t){return"string"==typeof t?t.length:0}function D8(t){return t.charAt(0).toUpperCase()+t.substr(1)}function v97(t){return t?t.replace(u87,""):t}function a17(t,e){return null==t?e:t}function q17(t,e){this.message=t,this.tokenPos=e}function Q8(t){return V1(t)?t:s87(t)?[t]:null}function v17(t,e){var i=null;try{(i=new ActiveXObject("Microsoft.XMLDOM")).async=!1,i.loadXML(t)}catch(e){if(i)throw e;i=(new DOMParser).parseFromString(t,"text/xml")}return i&&e&&d4&&(i=new D27(i)),i}function a4(t,e,i){e=Math.max(e||2,1),i=i||0;var n=t.toString(16);return new Array(e-n.toString(16).length+1).join(i)+n}function v68(t){var e,i=new t.constructor;for(e in t)i[e]=t[e];return i}function G77(t,e,i){t.setAttribute(e,i)}function P5(t,e,i,n,s){var r=t.createElement(i);return n&&r.setAttribute(n,s),e.appendChild(r),r}function B68(t){var e,i,n=0;if(t&&(i=t.$DOMAIN))for(e in i)n++;return n}function n3(t,e){if(!e||!t.$DOMAIN.hasOwnProperty(e))throw"Invalid "+t.$ENUM+" value: "+("string"==typeof e?'"'+e+'"':e);return e}function h97(t){return t?t.replace(g87,""):t}function X97(t,e){var i,n,s,r;if(null==t&&null==e)return!0;if(!V1(t)||!V1(e))return!1;if(i=t.length,e.length!=i)return!1;for(r=0;r<i;r++)if(n=t[r],s=e[r],n instanceof Date&&s instanceof Date){if(n.getTime()!=s.getTime())return!1}else if(t[r]!=e[r])return!1;return!0}function A87(t){return"string"==typeof t?t.toLowerCase():t}function b87(t){if(isNaN(t))return!1;var e=parseFloat(t);return(0|e)===e}function Z5(t,e,i,n){var s="";i=Math.min(i,t.length);for(var r=e;r<i;r++)s+=n;return t.substr(0,e)+s+t.substr(i)}function Q87(t){var e,i,n,s=t.length/2,r=t[0],o=t[1],a=r,h=o;for(e=1;e<s;e++)i=t[2*e],n=t[2*e+1],r=Math.min(r,i),o=Math.min(o,n),a=Math.max(a,i),h=Math.max(h,n);return{x:r,y:o,width:a-r,height:h-o}}function T68(t,e){return t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date)}function I4(t){return null!==t&&"object"==typeof t}function p87(t){for(var e=t.length-1;0<e;e--)t[e]===t[e-1]&&t.splice(e,1)}function A2(t,e,i){if(e){var n,s,r,o=e.$DOMAIN={};for(n in e)"string"==typeof(s=e[n])&&(o[s]=n);if(e.$ENUM=t,i)for(r in i)e[r]=i[r];return Object.freeze?Object.freeze(e):e}}function b4(t){return"function"==typeof t}function C87(t){return t&&t.firstChild?t.firstChild.nodeValue:void 0}function j0(t){return V1(t)?t:null}function b5(t,e,i){return t&&e?i?t.toLowerCase()==e.toLowerCase():t==e:!t&&!e}function f68(t){return t!==c2&&null!==t?parseFloat(t):0}function g17(t,e,i){return void 0===i||0==+i?Math[t](e):(e=+e,i=+i,isNaN(e)||"number"!=typeof i||i%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math[t](+(e[0]+"e"+(e[1]?+e[1]-i:-i)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+i:i))))}function u68(t){var e,i,n;for(e=i=0;n=t.charCodeAt(i++);e+=n>>11?3:n>>7?2:1);return e}function k77(t){var e,i,n,s,r,o,a;for(t=t||{},e=1,i=arguments.length;e<i;e++)if(n=arguments[e])for(s in n){if(r=n[s],V1(r)){for(o=[],a=0;a<r.length;a++)o.push(k77(r[a]));r=o}else I4(r)&&(r=k77({},r));t[s]=r}return t}function G87(t,e){if(t===e)return!0;if(null==t||null==e)return!1;var i=t.length;if(i!=e.length)return!1;for(var n=0;n<i;++n)if(t[n]!==e[n])return!1;return!0}function r68(t){return Math.floor(Math.random()*t)}function i5(t){return"[object Date]"===N77.call(t)}function p4(t){return"function"==typeof t?t:null}function d77(t){return t instanceof Date?t:null}function E7(t){return"number"==typeof t?isNaN(t)?"":String(t):null!=t?String(t):""}function R4(t){var e,i,n,s;for(t=t||{},e=1,i=arguments.length;e<i;e++)if(n=arguments[e])for(s in n)t[s]=n[s];return t}function Z3(t){return/\s/.test(t)}function Y77(t,e){return t instanceof Date?e instanceof Date?t.getTime()>e.getTime()?t:e:t:e}function a5(t){for(var e=t[0].x,i=t[0].y,n=e,s=i,r=1,o=t.length;r<o;r++){var a=t[r];e=Math.min(e,a.x),i=Math.min(i,a.y),n=Math.max(n,a.y),s=Math.max(s,a.y)}return{x:e,y:i,width:n-e,height:s-i}}function h68(t,e){return Math.floor(Math.random()*(e-t))+t}function $$_getProxy(t){if(V1(t)){var e,i,n=[];for(e=0,i=t.length;e<i;e++)n.push($$_getProxy(t[e]));return n}return"function"==typeof t.proxy?t.proxy():t}function X68(){for(var t={},e=0,i=arguments.length;e<i;e+=2)t[arguments[2*e]]=arguments[2*e+1];return t}function a0(t){return t!==c2&&null!==t}function A58(t,e){return t&&e&&e.$ENUM&&e.$DOMAIN.hasOwnProperty(t)}function m27(t){if(null==t)return!0;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function v5(t){return t%4==0&&t%100!=0||t%400==0}function R87(t){return t.charAt(0).toLowerCase()+t.substr(1)}function K87(t,e){return $_temp_size.width=t,$_temp_size.height=e,$_temp_size}function m58(t,e){if(t&&e){var i,n,s=e.split("."),r=t;for(i=0,n=s.length;r&&i<n;i++)r=r[s[i]];return r}return null}function D58(t){return t&&t.$ENUM}function l8(t,e){var i=t.getDate();return t.setDate(1),t.setMonth(t.getMonth()+e),t.setDate(Math.min(i,$$_month_days[v5(t.getYear())?1:0][t.getMonth()])),t}var Q2=function(t,e){return t instanceof e?t:null},n7=function(t,e,i){this.name="DataLudi.ValidationError",this.level=t,this.message=e,this.column=i},L97=function(t){I7=($_debug=t)?function(t){throw t instanceof Error?t:new Error(t)}:g6,q77=t?function(t,e){if(!t)throw new Error("Failed: ["+t+"] "+e)}:g6,v77=x8=t?function(t,e){if(!t)throw new R5(e)}:g6},H97=function(){V3&&V3.apply(C3,arguments)},G97=function(t,e,i,n){var s=new H47(i,t,n).gridView();return s.setViewId(t),e&&s.setColumns(e),s},$$_addBrightness=function(t,e,i,n){var s=t._r,r=t._g,o=t._b,a=Number(e);return isNaN(a)||1==a||(s=B1(Math.max(0,Math.min(255,s*a))),r=B1(Math.max(0,Math.min(255,r*a))),o=B1(Math.max(0,Math.min(255,o*a))),255==s&&t._r<255&&(s=B1((255+t._r)/2)),255==r&&t._g<255&&(r=B1((255+t._g)/2)),255==o&&t._b<255&&(o=B1((255+t._b)/2))),i?"rgba("+s+","+r+","+o+","+t._a+")":((n=n||new m2)._r=s,n._g=r,n._b=o,n)},K17=function(t){if(this.fillMode=n4.SET,this.fillPos=0,this.count=-1,this.rootArray=!0,this.rows="",this.childRows="rows",this.start=0,this.delimiter=",",this.quoted=!1,this.trim=!1,this.parentId=0,this.treeField=-1,this.useTreeField=!1,this.needSorting=!1,this.callback=null,t){for(var e in t.hasOwnProperty("append")&&(this.fillMode=n4.APPEND),t.hasOwnProperty("fillMode")&&(this.fillMode=t.fillMode),t.hasOwnProperty("fillPos")&&(this.fillPos=t.fillPos),t.hasOwnProperty("count")&&(this.count=t.count),t.hasOwnProperty("rootArray")&&(this.rootArray=t.rootArray),t.hasOwnProperty("rows")&&(this.rows=t.rows),t.hasOwnProperty("childRows")&&(this.rows=t.childRows),t.hasOwnProperty("start")&&(this.start=t.start),t.hasOwnProperty("delimiter")&&(this.delimiter=t.delimiter),t.hasOwnProperty("quoted")&&(this.quoted=t.quoted),t)void 0!==t[e]&&(this[e]=t[e]);this.parentId=t.parentId,this.treeField=t.treeField,this.useTreeField=t.useTreeField,this.needSorting=t.needSorting,this.callback=p4(t.callback)}},J0=function(t,e){0==arguments.length?this.x=this.y=0:(this.x=t,this.y=e)},M97=function(n){var r={},s={};this.addRenderers=function(t){if(t){var e=t;V1(e)||(e=[t]);for(var i=0,n=e.length;i<n;i++){var s=e[i];s&&s.hasOwnProperty("id")&&s.id&&(r[s.id]=R4({},s))}}},this.removeRenderers=function(t){if(e3(t))for(var e=t.length;e--;)delete r[t[e]],delete s[t[e]];else t&&(delete r[t],delete s[t])},this.getRenderer=function(t){var e=r[t];if(e){var i=Q2(s[t],t7);return i||(i=n.createRenderer(e))&&(s[t]=i),i}return null}},W97=function(t){var s={};this.addEditors=function(t){var e,i,n;if(t)for(V1(t)||(t=[t]),e=0,i=t.length;e<i;e++)(n=t[e])&&n.hasOwnProperty("id")&&n.id&&(s[n.id]=R4({},n))},this.removeEditors=function(t){if(e3(t))for(var e=t.length;e--;)delete s[t[e]];else t&&delete s[t]},this.getEditor=function(t){return s[t]}},Z1=function(t,e,i){this._color=new m2(t),this._width=void 0!==e?Math.max(0,parseInt(e)):1,i&&(this._dash=i)},T9=function(){},U68=function(t){throw new Error(t)},$_getLastColumn=function(t){for(var e=t.visibleCount()-1;0<=e;e--){var i=t.getVisibleItem(e);if(i instanceof t2)return i;if(i instanceof O1&&(i=$_getLastColumn(i))instanceof t2)return i}return null},J4=function(){function r(t){var e=u.nextNoSpace();return!e&&t&&T7(X1._default.untermintatedExpression+u.source(),u.tokenLoc()),e}function i(){var t,e,i,n=new B18;return n.leftExpr=o(),k1.IS_CHECK[t=u.tokenId()]?(r(!0),(e=o())._prepareValue(),(i=Q2(e._getLiteral(),h5))?n=new s7(n,t,i):T7(X1._default.invalidIsOperand+": "+u.tokenId(),u.tokenLoc())):k1.IS_SET[t]?((n=new v18(n.leftExpr)).operator=u.tokenId(),r(!0),n.listNode=function(){var t=new q18;for(l(k1.RoundOpen);;){if(u.tokenId()==k1.RoundClose){r();break}var e=o();t._exprs.push(e),i=k1.Comma,n=k1.RoundClose,void 0,s=u.tokenId(),i!=s&&n!=s&&T7(X1._default.notExpectedTokenKind+" ["+i+", "+n+"]: "+u.tokenId(),u.tokenLoc()),r()}var i,n,s;return t}()):k1.IS_COMPARISON[t]&&(n.operator=u.tokenId(),r(!0),n.rightExpr=o()),n}function n(){var t,e=i();return(t=new T18).leftExpr=e,k1.IS_LOGICAL[u.tokenId()]&&(t.operator=u.tokenId(),r(!0),t.rightExpr=n()),t}function o(){var t,e=new a18;for(e.addTerm(h());k1.IS_ADDITIVE[t=u.tokenId()];)e.addOperator(t),r(!0),e.addTerm(h());return e}function s(){var t=u.token();if(r(),u.tokenId()!=k1.BracketOpen)return new p07(t);r();var e=n();return l(k1.BracketClose),new d18(t,e)}function t(){var t=u.token();return r(),new k18(t)}function a(){var t=e[u.tokenId()];if(t)return t();T7(X1._default.unknownToken+": "+u.tokenId(),u.tokenLoc())}function h(){var t,e=new S18;for(e.addFactor(a());k1.IS_MULTIPLICATIVE[t=u.tokenId()];)e.addOperator(t),r(!0),e.addFactor(a());return e}function l(t){t!=u.tokenId()&&T7(X1._default.notExpectedTokenKind+" ["+t+"]: "+u.tokenId(),u.tokenLoc()),r()}var u=new z87,e=[];e[k1.StringLiteral]=function(){var t=u.token();return r(),new U18(t)},e[k1.RoundOpen]=function(){r();var t=n();return l(k1.RoundClose),t},e[k1.Identifier]=s,e[k1.IntegerLiteral]=function(){var t=u.token();return r(),new j18(t)},e[k1.FloatLiteral]=function(){var t=u.token();return r(),new O18(t)},e[k1.Minus]=function(){return r(),new K18(a())},e[k1.Plus]=function(){return r(),new N18(a())},e[k1.Not]=function(){return r(),new P18(a())},e[k1.Defined]=function(){return r(),new m07},e[k1.Null]=function(){return r(),new Q07},e[k1.Empty]=function(){return r(),new D07},e[k1.NaN]=function(){return r(),new F07},e[k1.True]=t,e[k1.False]=t,e[k1.ToBool]=function(){return r(),new Z18(a())},e[k1.ToNum]=function(){return r(),new n07(a())},e[k1.ToNumz]=function(){return r(),new n07(a(),!0)},e[k1.ToInt]=function(){return r(),new l07(a())},e[k1.ToIntz]=function(){return r(),new l07(a(),!0)},e[k1.ToDate]=function(){return r(),new i18(a())},e[k1.ToStr]=function(){return r(),new V18(a())},e[k1.Length]=function(){return r(),new Y18(a())},e[k1.Rand]=function(){return r(),new t18(a())},e[k1.Srand]=function(){return r(),new R18(a())},e[k1.ToLower]=function(){return r(),new w18(a())},e[k1.ToUpper]=function(){return r(),new E18(a())},this.parse=function(t){if(!t)return null;u.init(t),r();var e=n();if(!u.isEnd()){var i=s();i&&T7("Invalid token: "+i._literal),T7(X1._default.untermintatedExpression+": "+t,u.tokenLoc())}return e&&e._prepareValue(),e},this.evaluate=function(t,e){return this.parse(t).evaluate(e)}},f9=function(t){return 26<=t?(t-=26,String.fromCharCode(Y1(t/26)+65)+String.fromCharCode(Y1(t%26)+65)):String.fromCharCode(t+65)},y0=function(){$_logging&&V3&&V3.apply(C3,arguments)},E3=function(t){alert(t)},j97=function(t){t!=$$$_MAX_PRECISION&&($$$_MAX_PRECISION=t,W7.clean())},D77=function(t){var e,i,n=[],s=String(t),r=s3;if(s){var o=null,a=!1,h=!1;0<(i=(e=s.split($$_FONT_REG)).length)&&e[0]&&(o=e[0]),1<i&&e[1]&&(r=Number(e[1]));for(var l=2;l<i;l++)if(s=e[l])switch(s){case"bold":a=!0;break;case"italic":h=!0}h&&n.push("italic"),a&&n.push("bold"),n.push(r+"px"),o&&n.push(o)}return{font:s=n.join(" "),size:r}},$_collectValueColumns=function(t,e,i){for(var n=i?t.visibleCount():t.count(),s=0;s<n;s++){var r=i?t.getVisibleItem(s):t.getItem(s);r instanceof t2?e.push(r):r instanceof O1&&$_collectValueColumns(r,e,i)}},Y68=function(t,e){return g17("floor",t,e)},$$_drawCheckMark=function(t,e,i,n){var s=i.x+(i.width-n)/2,r=i.y+(i.height-n)/2-n/6+1,o=n/10,a=[s+0*o,r+6.573*o,s+4.3915*o,r+10*o,s+10.1*o,r+3*o,s+8.205*o,r+2*o,s+3.684*o,r+6.9425*o,s+1.2*o,r+5*o];t.drawPolygonArray(e,null,a)},m2=function(t,e){"string"==typeof t?m2._parse(t,this,e,!1,!1):t instanceof m2?(this._r=t._r,this._g=t._g,this._b=t._b,this._a=t._a):isNaN(t)?(this._r=this._g=this._b=0,this._a=e?NaN:1):(this._a=(t>>>24)/255,this._r=(16711680&t)>>16,this._g=(65280&t)>>8,this._b=255&t)},U97=function(t){if("string"==typeof t){var e=t.trim().split(",");if(0<e.length){var i=e[0];if(i&&(t=m2.createFrom(i))){var n={color:t,horz:1,vert:1,blur:1};return 1<e.length&&(t=parseInt(e[1]),isNaN(t)||(n.horz=t),2<e.length&&(t=parseInt(e[2]),isNaN(t)||(n.vert=t)),3<e.length&&(t=parseInt(e[3]),isNaN(t)||(n.blur=t))),n}}}else if(t&&t.color instanceof m2)return t;return null},F77=function(t){switch(t){case v1.FAR:return"bottom";case v1.NEAR:return"top";default:return"middle"}},R68=function(t){var e=new h18,i=s0&&s0.toolwm;try{e.src=$$_image64+(i||_wmv),e.onload=function(){(e.width<30||e.height<20)&&(e.src=$$_image64+_wm_)}}catch(t){e.src=$$_image64+_wm_}var n=new D4(t);return n._doDraw=function(t){t.aL(e,this.width()-e.width-20,this.height()-e.height-50,e.width,e.height)},n._doDrawHtml=function(t){this._dom.appendChild(e),e.style.position="absolute",e.style.left=this.width()-e.width-20+"px",e.style.top=this.height()-e.height-50+"px"},n},p77=function(){},$$_drawRightArrow=function(t,e,i,n){var s=e.x+(e.width-i)/2,r=e.y+(e.height-i)/2,o=i/9,a=[s+1.75*o,r+1*o,s+5.25*o,r+4.5*o,s+1.75*o,r+8*o,s+2.75*o,r+9*o,s+7.25*o,r+4.5*o,s+2.75*o,r+0*o];t.drawPolygonArray(n,null,a)},$_collectDataColumnsOf=function(t,e,i,n){for(var s=n?t.visibleCount():t.count(),r=0;r<s;r++){var o=n?t.getVisibleItem(r):t.getItem(r);o instanceof L2&&0<=o.dataIndex()?i.push(o):o instanceof O1&&$_collectDataColumnsOf(o,e,i,n)}},Y97=function(t){"tap"in t&&($_TAP_THRESHOLD=t.tap),"doubleTap"in t&&($_DOUBLE_TAP_THRESHOLD=t.doubleTap),"longTap"in t&&($_LONG_TAP_THRESHOLD=t.longTap),"swipe"in t&&($_SWIPE_THRESHOLD=t.swipe)},$$_compareTextValue=function(t,e,i,n){if(t instanceof RegExp)return t.test(e);if(t===e)return!0;var s=null==t?"":String(t),r=null==t?"":String(e);return s?!!r&&(i||(s=s.toLowerCase(),r=r.toLowerCase()),n?0<=r.indexOf(s):s==r):!r},$_NULL_FUNC=function(){},R97=function(t,e){var i=new H4;return t&&i.setFields(t,e),i},B7=function(t){var e=null,n=0,s=new F18;this.format=function(){return e},this.setFormat=function(t){t!=e&&function(t){if(t){var e=t.toLowerCase();0==(n=Math.max(0,B7.FORMATS.indexOf(e)))&&s.setFormat(t)}}(e=t)},this.amText=function(){return s.amText()},this.setAmText=function(t){s.setAmText(t)},this.pmText=function(){return s.pmText()},this.setPmText=function(t){s.setPmText(t)},this.baseYear=function(){return s.baseYear()},this.setBaseYear=function(t){s.setBaseYear(t)},this.zoneDelta=function(){return s.zoneDelta()},this.setZoneDelta=function(t){s.setZoneDelta(t)},this.toDate=function(t){if(null==t||""===t)return null;var e=t;if(!(e instanceof Date)){var i=String(t);if(i)switch(n){case 0:e=s.parse(i);break;case 1:e=p77.parse(i);break;case 2:default:e=new Date(i)}e&&isNaN(e.getTime())&&(e=null)}return e},this.setFormat(t)},h9=function(t){this.defaultValue=t},X1=function(t){this.lang=t,this.year="",this.months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.shortMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.weekDays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.shortWeekDays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.thousandSep=",",this.decimalSep=".",this.dateSep="/",this.timeSep=":",this.am="AM",this.pm="PM",this.halfs=["1st Half","2nd Half"],this.quarters=["Q1","Q2","Q3","Q4"],this.dateFormat="M/d/yyyy HH:mm:ss",this.shortDateFormat="M/d/yyyy",this.minuteFormat="M/d/yyyy HH:mm",this.hourFormat="M/d/yyyy HH",this.monthFormat="M/yyyy",this.yearFormat="yyyy",this.untermintatedExpression="Untermintated expression",this.invalidToken="Invalid token",this.untermintatedString="Untermintated string",this.unknownOperator="Unknown operator",this.notExpectedTokenKind="Token is not a expected kind",this.invalidIsOperand="is operator's operand must be defined, null or empty",this.unknownToken="Unknown token",this.invalidIdentifierToken="Token is not a valid Identifier",this.invalidIdentifierKey="Invalid identifier key",this.invalidIdentifierIndexer="Invalid identifier indexer",this.invalidDateTimeFormat="Invalid datetime format",this.invalidDateTimeText="Invalid date Text: ",this.invalidDateTimeOutputFormat="Invalid datetime output format: ",this.invalidDateTimeFormat2="Invalid datetime format - 'H' and 'a' can not coexists",this.invalidDateTimeFormat3="Invalid datetime format - If there is 'h' then 'a' must be exists",this.invalidDateTimeInputFormat="Invalid datetime input format: ",this.invalidColorText="Invalid color text",this.invalidLinearGradientText="Invalid linear gradient text",this.invalidRadialGradientText="Invalid radial gradient text",this.valueIsRequired="Value is required",this.notImplemeted="Not Yet implemented",this.progressCancel="Cancel"},P3=function(){this.name="DataLudi.ClientEditingError",this.message=P3.message},U4=function(t){return new h9(t)},P17=function(){var l=0;this.createTicks=function(t,e,i){var n,s=[],r=function(t,e,i){if(t==e)return 1;i=Math.max(1,i),t<=-1&&(t=Math.floor(t)),1<=e&&(e=Math.ceil(e));var n,s,r,o=e-t,a=o/i;for(l=Math.floor(Math.log(a)*Math.LOG10E),n=Math.pow(10,l),s=0,r=k47.length;s<r;s++)if(o/(a=n*k47[s])<=i){2.5==k47[s]&&l--;break}return a}(t,e,i),o=-Math.min(0,l),a=B1(t/r)*r,h=h87(e/r)*r;if(a<0&&0<h){for(n=0,s.push(n);n<h;)n+=r,s.push(n),n=o?Number(n.toFixed(o)):n;for((n/=2)>h&&(s[s.length-1]=n),n=0;a<n;)n-=r,s.unshift(n),n=o?Number(n.toFixed(o)):n;(n/=2)<a&&(s[0]=n)}else if(a!=h){for(n=a;n<h;)s.push(n),n+=r,n=o?Number(n.toFixed(o)):n;s.push(n)}else 0<h?s.push(0,h):a<0?s.push(a,0):s.push(0,1);return this.interval=r,this.magnitude=l,s}},p3=function(t,e,i){this.key=t,this.callback=e,this.case=i,this.get=function(t){return 1<t?this.toPass:0<t?this.toUpper:t<0?this.toLower:this}},w97=function(t,e){var i=new Blob([t],{type:"text/plain"});u6(i,e)},E97=function(t,e,i){"string"==typeof t&&(X1.setLocale(t,e),E2.setLocale(t,i))},K97=function(t,e,i){var n,s,r,o,a=typeof t;if("string"!==a)return"number"===a?(o=new m2(t,!0).forceAlpha(i),new Z1(o,r)):t;if(t){if(n=t.trim().split(","),r=parseInt(n[1]),(isNaN(r)||r<1)&&(r=e),2<n.length&&(s=n[2]))switch(s=s.trim()){case"dotted":return new Z1(n[0],r,[2,1]);case"dashed":return new Z1(n[0],r,[4,3]);default:return new Z1(n[0],r)}return o=new m2(t,!0).forceAlpha(i),new Z1(o,r)}return null},n77=function(){$_debug&&$_logging&&V3&&V3.apply(C3,arguments)},V0=function(t,e,i,n){var s=window.dataGridEventListeners;return s||(window.dataGridEventListeners=s=[]),s.push({target:t,event:e,listener:i,useCapture:n}),f2.addEventListener(e,i,n)},l77=function(t){this.caseSensitive=!1,this.partialMatch=!1,t&&R4(this,t)},N97=function(t,e,i){t instanceof H4?new f47(t).load("csv",e,i):new V8(t).load("csv",e,i)},z3=function(t){var R=function(t){var e,i,n,s,r,o,a=[];if(e=i0(t)){for(s=e.length,r=0;r<s;){if(i=e.charAt(r),0<=$$_DATE_SEPARATORS.indexOf(i))a.push(i),r++;else{for(n=r++;r<s&&e.charAt(r)==i;)r++;if(i=e.substring(n,r),$$_DATE_TOKENS.indexOf(i)<0)throw new Error(X1._default.invalidDateTimeInputFormat+": "+t);a.push("A"==i?"a":i)}if(r<s&&Z3(i=e.charAt(r)))for(a.push(" ");r<s&&Z3(e.charAt(r));)r++}for(o=[],s=a.length,r=n=0;r<s;r++)"a"==(i=a[r])||$$_DATE_TOKENS.indexOf(i)<0?(1<n&&o.push("E"),o.push(i),n=0):(1==n&&o.splice(o.length-2,0,"L"),o.push(i),n++);a=o}return a},s=function(t){if(t=i0(t)){var e=R(t),i=0<=e.indexOf("a");if(i&&0<=e.indexOf("H"))throw X1._default.invalidDateTimeFormat2+": "+t;if(0<=e.indexOf("h")&&!i)throw X1._default.invalidDateTimeFormat3+": "+t}},e=null,y=null,x=null,E=null,b=2e3,S=!1;this.formatString=function(){return e},this.setFormatString=function(t){t!=e&&function(t){if(y=null,x="am",E="pm",S=!(b=2e3),t){var e=t.split(";");if(y=e[0]?e[0]:_defaultFormat,s(y),1<e.length&&(S=!!e[1]&&"1"==e[1]),2<e.length&&e[2]){var i=e[2].split(",");i[0]&&(x=i[0]),i[1]&&(E=i[1])}if(3<e.length){var n=Y1(e[3]);isNaN(n)||(b=n)}}}(e=t)},this.format=function(){return y},this.getDate=function(t,e){var i=i5(e)?e:null,n=null;if(t=i0(t)){for(var s,r,o,a=!1,h=!1,l=R(y),u=function(t,e,i){var n,s=[],r=["am","pm","AM","PM","Am","Pm","aM","pM"];if(e&&r.push(e),i&&r.push(i),n=i0(t))for(var o,a,h=n.length,l=0;l<h;){if(o=n.charAt(l),0<=g77.indexOf(o))s.push(o),l++;else if(o.charCodeAt(0)>=$$_ZERO_CHAR&&o.charCodeAt(0)<=$$_NINE_CHAR){for(a=l++;l<h&&n.charCodeAt(l)>=$$_ZERO_CHAR&&n.charCodeAt(l)<=$$_NINE_CHAR;)l++;o=n.substring(a,l),s.push(o)}else{for(var u=-1,d=0;d<r.length;d++)if(n.indexOf(r[d],l)==l){u=d;break}if(u<0)throw new Error(X1._default.invalidDateTimeText+": "+n);s.push(r[d]),l+=r[d].length}if(l<h&&Z3(o=n.charAt(l)))for(s.push(" ");l<h&&Z3(n.charAt(l));)l++}return s}(t,x,E),d=(0<=l.indexOf("a")||l.indexOf("A"),l.length),c=u.length,_=0,f=1,g=(n=1,0),m=0,p=0,w=0,v=0,C=0,I=0;C<d&&I<c;){switch(r=l[C],o=u[I],r.charAt(0)){case"L":for(s=String(o),C++;C<d&&"E"!=(t=l[C]);){switch(o=s?Y1(s.substr(0,t.length)):-1,s=s.substr(t.length),t.charAt(0)){case"Y":case"y":_=Math.max(0,o);break;case"M":f=0<=o?o:1;break;case"D":case"d":n=0<=o?o:1;break;case"H":case"h":g=Math.max(0,o);break;case"m":m=Math.max(0,o);break;case"s":p=Math.max(0,o)}C++}break;case"Y":case"y":h=!0,_=Y1(o);break;case"M":h=!0,f=Y1(o);break;case"D":case"d":h=!0,n=Y1(o);break;case"H":case"h":a=!0,g=Y1(o);break;case"m":a=!0,m=Y1(o);break;case"s":a=!0,p=Y1(o);break;case"a":(t=String(o))&&(t=t.toLowerCase(),x&&t==x.toLowerCase()||"am"==t?w=12:(E&&t==E.toLowerCase()||"pm"==t)&&(v=12))}C++,I++}if(_<100&&0<=_&&(_+=b),h){if(_<0||9999<_)return null;if(f<1||12<f)return null;if(n<1||31<n)return null;if(2==f){if(29<n)return null;if(29==n&&(_%4!=0||_%100==0)&&_%400!=0)return null}}else S&&o&&(_=i.getFullYear(),f=i.getMonth()+1,n=i.getDate());if(a){if(g<0||24<g)return null;if((0<w||0<v)&&12<g)return null;if(m<0||59<m)return null;if(p<0||59<p)return null;0<w?g%=12:0<v&&(g=g%12+12)}else S&&i5(i)&&(g=i.getHours(),m=i.getMinutes(),p=i.getSeconds());n=new Date(_,f-1,n,g,m,p)}return n},this.getDateNull=function(t){try{return this.getDate(t)}catch(t){}return null},this.getText=function(t){var e=t;e instanceof Date||(e=new Date(t));for(var i,n=R(y),s=0<=n.indexOf("a")||0<=n.indexOf("A"),r="",o=0,a=n.length;o<a;o++){var h=n[o],l=h.length;switch(h.charAt(0)){case"L":break;case"Y":case"y":r+=2<l?e.getFullYear():c0(e.getFullYear()%100);break;case"M":r+=1<l?c0(e.getMonth()+1):e.getMonth()+1;break;case"D":case"d":r+=1<l?c0(e.getDate()):e.getDate();break;case"H":r+=1<l?c0(e.getHours()):e.getHours();break;case"h":s?(0==(i=e.getHours())?i=12:12<i&&(i-=12),r+=1<l?c0(i):i):r+=1<l?c0(e.getHours()):e.getHours();break;case"m":r+=1<l?c0(e.getMinutes()):e.getMinutes();break;case"s":r+=1<l?c0(e.getSeconds()):e.getSeconds();break;case"A":case"a":e.getHours()<12?r+=x:r+=E;break;default:r+=h}}return r},this.setFormatString(t)},P97=function(){var a,h,u,d,c,_=function(t,e,i,n){var s,r,o,a,h,l;do{o=B1(((s=t)+(r=e))/2),a=u.getItem(o).dataIndex(),h=u.getItem(o).dataRow();do{if(i){for(;s<=r&&(0==(l=c(d,h,u.getItem(s).dataRow()))&&n&&(l=a-u.getItem(s).dataIndex()),!(l<=0));)s++;for(;s<=r&&(0==(l=c(d,h,u.getItem(r).dataRow()))&&n&&(l=a-u.getItem(r).dataIndex()),!(0<=l));)r--}else{for(;s<=r&&(0==(l=c(d,h,u.getItem(s).dataRow()))&&n&&(l=a-u.getItem(s).dataIndex()),!(0<=l));)s++;for(;s<=r&&(0==(l=c(d,h,u.getItem(r).dataRow()))&&n&&(l=a-u.getItem(r).dataIndex()),!(l<=0));)r--}s<=r&&(s!=r&&u._exchangeItems(s,r),s++,r--)}while(s<=r);t<r&&_(t,r,i,n),t=s}while(t<e)};this.run=function(t,e,i,n,s,r,o){a=t.provider(),h=a.dataSource(),u=t,d=e,c=h.$_getComparer(h.getField(e).dataType(),n),_(s,r,i==M4.ASCENDING,o)}},i17=function(t){var e=(t.originalEvent||t).clipboardData;return e?e.getData("text/plain"):window.clipboardData.getData("text")},h4=function(t,e){var i,n,s=typeof t;if("string"!==s)return"number"===s?new Z1(t,1):t;if(0==t.indexOf("p("))return new A9(t,e);if(t){if(2<(i=t.trim().split(",")).length&&(n=i[2]))switch(n=n.trim()){case"dotted":return new Z1(i[0],i[1],[2,1]);case"dashed":return new Z1(i[0],i[1],[4,3]);default:return new Z1(i[0],i[1])}return new Z1(i[0],i[1])}return null},V4=function(t,e){this._size=t,this._fixed=e},u6=function(t,e){if(d4||0<navigator.appVersion.toString().indexOf(".NET"))window.navigator.msSaveBlob(t,e);else{var i=document.createElement("a");document.body.appendChild(i);var n=URL.createObjectURL(t);i.href=n,i.download=e,i.click(),document.body.removeChild(i)}},Z97=function(t,e,i,n){var s=new C97(i,t,n).gridView();return s.setViewId(t),s&&s.setColumns(e),s},$$_cellIndex_getLeft=function(t,e){if(!t||!e)return null;var i=O1.getLeft(e);if(i)return i;for(var n=t.layoutManager(),s=(e.group()?e.root().displayIndex():e.displayIndex())-1;0<=s;s--){if((i=n.getColumn(s))instanceof t2)return i;if(i instanceof O1&&(i=i.last()))return i}return null},A8=function(t){t.$$_ignored=!0},$_getLeftColumn=function(t,e){for(var i=e;0<=i;i--){var n=t.getVisibleItem(i);if(n instanceof t2)return n;if(n instanceof O1&&(n=n.last())instanceof t2)return n}return null},b8=function(t,e){var a=function(t){return{literal:t,evaluate:function(t,e){return t.literal}}},i=function(t){if(l.splice(0,l.length),t)for(var e,i,n,s,r=t.length,o=0;o<r;)if(0<=(e=t.indexOf($$_SEP_HEAD,o))&&(0<=(i=t.indexOf($$_SEP_TAIL,e+2))?(o<e&&(n=t.substring(o,e),s=a(n),l.push(s)),(n=t.substring(e+2,i).trim())&&(s=h(n),l.push(s)),o=i+1):e=-1),e<0){n=t.substr(o,r),s=a(n),l.push(s);break}},h=function(t){return{ident:t,idKey:-1,evaluate:function(t,e){return t.idKey<0&&(t.idKey=e.isIdentifier(t.ident)),e.evaluateIdentifier(t.idKey)}}},n=null,s=e,l=[];this.source=function(){return n},this.setSource=function(t){t!=n&&i(n=t)},this.evaluate=function(t){try{var e,i,n="";for(e=0,i=l.length;e<i;e++)n+=l[e].evaluate(l[e],t)||"";return n}catch(t){if(!s)throw t}return null},i(t)},V68=function(t){throw new Error("Method is not exists: "+t)},S17=function(){this.left=new g1,this.right=new g1,this.top=new g1,this.bottom=new g1},$_getRightColumn=function(t,e){for(var i=e,n=t.visibleCount();i<n;i++){var s=t.getVisibleItem(i);if(s instanceof t2)return s;if(s instanceof O1&&(s=s.first())instanceof t2)return s}return null},a68=function(t,e){return g17("ceil",t,e)},$_parseCSV=function(t,e){var i=[];if(t&&0<t.length){var n,s,r=0,o=-1,a=-1,h=!1,l=!1,u=t.length,d=null;for(n=0;n<u;n++)(s=t.charAt(n))==e?h||(n-r<=0?d="":a==n-1&&o==r?(d=t.substring(o+1,a),l&&(d=d.replace('""','"'))):d=t.substring(r,n),i.push(d),h=l=!1,r=n+1):'"'==s&&(h?a<0?(a=n,h=!1):a==n-1&&(h=l=!0,a=-1):(o=n,a=-1,h=!0));r<u&&(a==u-1&&o==r?(d=t.substring(o+1,a),l&&(d=d.replace('""','"'))):d=t.substring(r,u),i.push(d))}return i},x77=function(t,e,i){try{t.apply(e,M6.call(arguments,2))}catch(t){if(t instanceof q0)return!1;throw t}return!0},$$_cellIndex_getNext=function(t,e){if(!t||!e)return null;var i=O1.getNext(e);if(i)return i;for(var n=t.layoutManager(),s=(e.group()?e.root().displayIndex():e.displayIndex())+1,r=n.columnCount();s<r;s++){if((i=n.getColumn(s))instanceof t2)return i;if(i instanceof O1&&(i=i.first()))return i}return null},K5=function(){this.id=void 0,this.name="Tahoma",this.size=10,this.color="ff000000",this.bold=!1,this.italic=!1,this.scheme=void 0},l7=function(t){var e=function(t){if(t){var e,i,n,s,r=t.split(/[;\:]/),o=!0;for(n=(e=r[0])?e.split(","):null,1<r.length&&(s=(e=r[1])?e.split(","):null),2<r.length&&"0"==(e=I27(r[2]))&&(o=!1),a={},h=o,i=0;i<n.length;i++)e=n[i],a[o?e:e.toLowerCase()]=!1;for(i=0;i<s.length;i++)e=s[i],a[o?e:e.toLowerCase()]=!0;l=s&&0<s.length?s[0]:"true",u=n&&0<n.length?n[0]:"false"}else(a={}).true=!0,a.false=!1,l="true",u="false"},i=t,a=null,h=!0,l=null,u=null;this.format=function(){return i},this.setFormat=function(t){t!=i&&e(i=t)},this.toBool=function(t){if(a&&t){var e=h?String(t):String(t).toLowerCase();if(e in a)return a[e]}return Boolean(t)},this.toBoolEx=function(t){var e=h?String(t):String(t).toLowerCase();return a&&e in a?a[e]:!!e||void 0},this.toBoolStrict=function(t){if(a){var e=h?String(t):String(t).toLowerCase();if(e in a)return a[e]}},this.toText=function(t){return t?l:u},e(i)},P4=function(t){return"url("+$$_rootContext+$$_assets+t+")"},$$_drawRightTriangle=function(t,e,i,n){var s=e.x+(e.width-i)/2,r=e.y+(e.height-i)/2,o=i/9,a=[s+7*o,r+1*o,s+7*o,r+7*o,s+1*o,r+7*o];t.drawPolygonArray(n,null,a)},T97=function(t,e,i){t instanceof H4?new f47(t).load("json",e,i):new V8(t).load("json",e,i)},$$_drawPlusBox=function(t,e,i,n){var s=x3(e.x+(e.width-i)/2),r=x3(e.y+(e.height-i)/2),o=x3(i/9),a=[s+0*o,r+0*o,s+0*o,r+9*o,s+9*o,r+9*o,s+9*o,r+0*o],h=[s+4*o,r+2*o,s+4*o,r+4*o,s+2*o,r+4*o,s+2*o,r+5*o,s+4*o,r+5*o,s+4*o,r+7*o,s+5*o,r+7*o,s+5*o,r+5*o,s+7*o,r+5*o,s+7*o,r+4*o,s+5*o,r+4*o,s+5*o,r+2*o];t.drawHoledPolygonArray(n,null,a,h)},X4=function(t,e){var i=typeof t;return"string"===i?t?"#"==t.charAt(0)?new U1(t):0==t.indexOf("linear")?new T3(t):0==t.indexOf("p(")?new A9(t,e):0==t.indexOf("radial")?new X5(t):0==t.indexOf("glass")?new O8(t):new U1(t):null:"number"===i?new U1(t):t},N5=function(t,e,i){setTimeout(t,e,i)},$$_setMobile=function(t){$$_mobile=t},B17=function(){this.index=void 0,this.width=10,this.style=null,this.serialize=function(t,e){e.setAttribute("min",this.index),e.setAttribute("max",this.index),e.setAttribute("width",this.width),this.style&&e.setAttribute("style",this.style.id)}},g6=function(){},f97=function(t,e,i){throw new n7(t,e,i)},H77=function(t,e,i,n){return f2.removeEventListener(e,i,n)},q68=function(t,e){var i=t;return S4(t)&&(t=t.trim())&&(i=t.split(",")),V1(i)&&0<i.length?new D28(i,e):null},M7=function(t){var u=function(t){return t<10?"0"+t:String(t)},i=function(t,e){if(t){for(var i,n,s,r=t.trim(),o=r.length,a=[],h=0;h<o;){if(i=r.charAt(h),0<=$$_DT_DATE_SEPARATORS.indexOf(i))a.push(i),h++;else{for(n=h++;h<o&&r.charAt(h)==i;)h++;if(i=r.substring(n,h),$$_DT_DATE_TOKENS.indexOf(i)<0&&((s=i.charCodeAt(0))>=r77&&s<=n18||h77<=s&&s<=l18))throw new Error(X1._default.invalidDateTimeOutputFormat+": "+t);if("'"===i||'"'===i){for(var l=h;h<o&&r.charAt(h)!=i;)h++;if(o<=h)throw new Error(X1._default.invalidDateTimeOutputFormat+": "+t);e.push(r.substring(l,h++)),i="'"}a.push(i)}if(h<o&&Z3(i=r.charAt(h)))for(a.push(i);h<o&&Z3(r.charAt(h));)h++}return a}return null},n=null,d=null,c=null,s=null;this.format=function(){return n},this.formatString=function(){return s},this.setFormatString=function(t){var e;(t=t||M7.$_DefaultFormat)!=s&&(d=[],d=null,"string"==typeof(e=t)&&(e=e.trim())&&(d=i(n=e,c=[])),s=t)},this.getText=function(t){if(!d)return"";var e=t;e instanceof Date||(e=new Date(t));for(var i,n=X1._default,s=0,r="",o=0,a=d.length;o<a;o++){var h=d[o],l=h.length;switch(h.charCodeAt(0)){case I18:r+=2<l?e.getFullYear():u(e.getFullYear()%100);break;case C18:r+=3<l?n.months[e.getMonth()]:2<l?n.shortMonths[e.getMonth()]:1<l?u(e.getMonth()+1):e.getMonth()+1;break;case e18:r+=3<l?n.weekDays[e.getDay()]:2<l?n.shortWeekDays[e.getDay()]:1<l?u(e.getDate()):e.getDate();break;case x18:r+=1<l?u(e.getHours()):e.getHours();break;case L18:0==(i=e.getHours())?i=12:12<i&&(i-=12),r+=1<l?u(i):i;break;case o18:r+=1<l?u(e.getMinutes()):e.getMinutes();break;case G18:r+=1<l?u(e.getSeconds()):e.getSeconds();break;case H18:r+=e.getMilliseconds().toString().substr(0,l);break;case h77:case r77:case M18:case W18:e.getHours()<12?r+=n.am:r+=n.pm;break;case J18:r+=c[s++];break;default:r+=h}}return r},this.setFormatString(t||M7.$_DefaultFormat)},$$_get_obj=function(t,e){for(var i=t,n=0,s=e.length-1;n<s;n++){var r=e[n],o=i[r];o===c2&&(o=i[r]={}),i=o}return i},M77=function(t,e){w4?new $SP(t).applyToCss(e):e.background=t},g1=function(t,e,i,n){null==t?this.x=this.y=this.width=this.height=0:(this.x=t,this.y=e,this.width=i,this.height=n)},W77=function(t,e){if(!S67){var i=s0[C8+"var"];if(i){var n=s0[C8+"val"];if(n&&n==f5[i])return!0}}var s,r,o,a,h=e.split(".");for(s=t.length;s--;){if(t[s]==$$_fileloc)return!0;if(e){if(e==t[s])return!0;for(a=t[s].split("."),o=!0,r=Math.min(h.length,a.length);r--;)if("*"!=a[r]&&h[r]!=a[r]){o=!1;break}if(o)return!0}}},T17=function(t,e){return new m5(t,e)},F8=function(t,e){this.name="DataLudi.CommmandLockError",this.message="A command is already running",this.command=t,this.ret=e},g97=function(t){if(!(t instanceof q0))throw t},$$_htmlrep=function(t){return $$_htmlmap[t]},S0=function(t,e){this._size=t,this._fixed=e},J2=function(t,e){0==arguments.length?this.width=this.height=0:(this.width=t,this.height=e)},r97=function(t){(t=E7(t))&&(t=String(t).trim()),t&&t.lastIndexOf("/")!=t.length-1&&(t+="/"),$$_rootContext=t},l3=function(){$_debug&&V3&&V3.apply(C3,arguments)},s17=function(t){X1.setLanguage(t),E2.setLanguage(t)},m87=function(){var i=[],n={};this.addListener=function(t){t&&i.indexOf(t)<0&&i.push(t)},this.removeListener=function(t){var e=i.indexOf(t);0<=e&&i.splice(e,1)},this.getImage=function(t){if(t){var e=n[t];if(e)return e;(e=new Image).owner=this,e.url=t,(n[t]=e).onload=function(){this.owner._fireLoaded(this.url),delete e.onload}.bind(e),e.src=t}return null},this._fireLoaded=function(t){for(var e=0;e<i.length;e++)i[e].onImageLoaded(t)}},y77=function(t){this.allFields=!0,this.caseSensitive=!1,this.partialMatch=!1,t&&R4(this,t)},f17=function(t){return $_checkSize||((e=document.createElement("input")).type="checkbox",e.style.padding="0px",e.style.margin="0px",document.body.appendChild(e),$_checkSize=e.getBoundingClientRect2(),document.body.removeChild(e)),$_checkSize;var e},D87=function(){return w77},c77=function(t){throw t instanceof Error?t:new Error(t.message||t)},F87=function(t,e,i){t instanceof H4?new f47(t).load("xml",e,i):new V8(t).load("xml",e,i)},z87=function(){function e(){G=k1.Star,U++}function i(){G=k1.RoundClose,U++}function n(){"="==F.charAt(U+1)?(G=k1.NotEqual,U+=2):(G=k1.Not,U++)}function s(){if(U<H){var t=F.charCodeAt(U);return X=U,t<256?M[t]():E(),!0}return!1}function r(){G=k1.Mod,U++}function o(){"|"==F.charAt(U+1)?(G=k1.Or,U+=2):T7(X1._default.invalidToken+" at orOp",D())}function a(){"."==F.charAt(U+1)?(G=k1.DotDot,U+=2):(G=k1.Point,U++)}function h(){G=k1.Slash,U++}function l(){G=k1.Comma,U++}function u(){G=k1.BracketClose,U++}function d(){"="==F.charAt(U+1)?(G=k1.LowerEqual,U+=2):(G=k1.Lower,U++)}function c(){G=k1.StringLiteral;do{var t=F.charCodeAt(U);B[t]&&T7(X1._default.untermintatedString,D()),U++}while(U<H&&F.charCodeAt(U)!=N);U++}function _(){G=k1.CRLF,10==F.charCodeAt(U+1)?U+=2:U++,z++,Y=U}function f(){for(var t=U;t<H&&!k[F.charCodeAt(t)];)t++;for(var e=t;t<H&&k[F.charCodeAt(t)];)t++;return e<t?(W=t,F.substr(e,t-e).toLowerCase()):null}function g(){for(G=k1.Space,U++;U<H&&V[F.charCodeAt(U)];)U++}function m(){"&"==F.charAt(U+1)?(G=k1.And,U+=2):T7(X1._default.invalidToken+" at andOp",D())}function p(){"="==F.charAt(U+1)?(G=k1.Equal,U+=2):T7(X1._default.invalidToken+" at equalOp",D())}function w(){G=k1.Plus,U++}function v(){G=k1.CRLF,z++,Y=++U}function C(){for(G=k1.IntegerLiteral,U++;U<H&&A[F.charCodeAt(U)];)U++}function I(){"="==F.charAt(U+1)?(G=k1.GreaterEqual,U+=2):(G=k1.Greater,U++)}function R(){for(G=k1.IntegerLiteral,U++;U<H&&$[F.charCodeAt(U)];){if("."==F.charAt(U)){if("."==F.charAt(U+1))break;G=k1.FloatLiteral}U++}}function y(){G=k1.Symbol,U++}function x(){G=k1.StringLiteral;do{var t=F.charCodeAt(U);B[t]&&T7(X1._default.untermintatedString,D()),U++}while(U<H&&F.charCodeAt(U)!=O);U++}function E(){for(var t=U;U<H&&(k[F.charCodeAt(U)]||255<F.charCodeAt(U));)U++;var e=F.substr(t,U-t).toLowerCase();if(P.hasOwnProperty(e))switch(G=P[e]){case k1.Not:if(e=f())switch(e){case"in":G=k1.NotIn,U=W;break;case"like":G=k1.NotLike,U=W;break;case"ilike":G=k1.NotILike,U=W;break;case"match":G=k1.NotMatch,U=W;break;case"imatch":G=k1.NotIMatch,U=W}break;case k1.Is:"not"==(e=f())&&(G=k1.IsNot,U=W)}else G=k1.Identifier}function b(){G=k1.Minus,U++}function S(){G=k1.RoundOpen,U++}function T(){G=k1.BracketOpen,U++}var t,D=function(){var t,e={x:X-Y,y:z};try{t=F.substr(X,U-X)}catch(t){}return t&&(e.expr=t.substr(0,20)),e},k=[],A=[],$=[],V=[],L=[],B=[],O=0,N=0,P={};for(t="0".charCodeAt(0);t<="9".charCodeAt(0);t++)k[t]=!0;for(t="a".charCodeAt(0);t<="z".charCodeAt(0);t++)k[t]=!0;for(t="A".charCodeAt(0);t<="Z".charCodeAt(0);t++)k[t]=!0;for(k["_".charCodeAt(0)]=!0,t="0".charCodeAt(0);t<="9".charCodeAt(0);t++)A[t]=!0;for(t="a".charCodeAt(0);t<="f".charCodeAt(0);t++)A[t]=!0;for(t="A".charCodeAt(0);t<="F".charCodeAt(0);t++)A[t]=!0;for(t="0".charCodeAt(0);t<="9".charCodeAt(0);t++)$[t]=!0;for($[".".charCodeAt(0)]=$["e".charCodeAt(0)]=$["E".charCodeAt(0)]=!0,t=1;t<=9;t++)V[t]=!0;for(t=11;t<=12;t++)V[t]=!0;for(t=14;t<=32;t++)V[t]=!0;L[0]=L[10]=L[13]=!0,B[0]=!0,O='"'.charCodeAt(0),N="'".charCodeAt(0),(P={}).str=k1.ToStr,P.num=k1.ToNum,P.int=k1.ToInt,P.numz=k1.ToNumz,P.intz=k1.ToIntz,P.date=k1.ToDate,P.bool=k1.ToBool,P.not=k1.Not,P.len=k1.Length,P.and=k1.And,P.in=k1.In,P.mod=k1.Mod,P.or=k1.Or,P.div=k1.Div,P.shl=k1.Shl,P.shr=k1.Shr,P.is=k1.Is,P.like=k1.Like,P.ilike=k1.ILike,P.match=k1.Match,P.imatch=k1.IMatch,P.defined=k1.Defined,P.null=k1.Null,P.empty=k1.Empty,P.nan=k1.NaN,P.true=k1.True,P.false=k1.False,P.rand=k1.Rand,P.srand=k1.Srand,P.lower=k1.ToLower,P.upper=k1.ToUpper;var M=null,F=null,H=0,G=0,U=0,W=0,z=0,Y=0,X=0;this.source=function(){return F},this.tokenId=function(){return G},this.tokenLoc=D,this.tokenLen=function(){return U-X},this.token=function(){return F.substr(X,this.tokenLen())},this.isSpace=function(){return G==k1.Space},this.init=function(t){H=(F=t).length,G=U=X=Y=z=0},this.isEnd=function(){return H<=U},this.nextId=function(t){for(;s(),U<H&&G!=t;);},this.nextNoSpace=function(){do{if(s()&&!this.isSpace())return!0}while(U<H);return!1},this.isFirstInLine=function(){if(0==X)return!0;var t,e=X;for(e--;0<e&&V[F.charCodeAt(e)];)e--;return 0==e||10==(t=F.charCodeAt(e))||13==t},function(){var t;for(M=[],t=1;t<=255;t++)M[t]=y;for(t=1;t<=32;t++)M[t]=g;for(M[10]=v,M[13]=_,M["$".charCodeAt(0)]=C,M[O]=x,M[N]=c,t=0;t<=9;t++)M["0".charCodeAt(0)+t]=R;for(t="A".charCodeAt(0);t<="Z".charCodeAt();t++)M[t]=E;for(t="a".charCodeAt(0);t<="z".charCodeAt();t++)M[t]=E;M["_".charCodeAt(0)]=E,M["(".charCodeAt(0)]=S,M[")".charCodeAt(0)]=i,M["*".charCodeAt(0)]=e,M["+".charCodeAt(0)]=w,M[",".charCodeAt(0)]=l,M["-".charCodeAt(0)]=b,M[".".charCodeAt(0)]=a,M["/".charCodeAt(0)]=h,M["%".charCodeAt(0)]=r,M["!".charCodeAt(0)]=n,M["=".charCodeAt(0)]=p,M["&".charCodeAt(0)]=m,M["|".charCodeAt(0)]=o,M["<".charCodeAt(0)]=d,M[">".charCodeAt(0)]=I,M["[".charCodeAt(0)]=T,M["]".charCodeAt(0)]=u}()},$$_cellIndex_getRight=function(t,e){if(!t||!e)return null;var i=O1.getRight(e);if(i)return i;for(var n=t.layoutManager(),s=(e.group()?e.root().displayIndex():e.displayIndex())+1,r=n.columnCount();s<r;s++){if((i=n.getColumn(s))instanceof t2)return i;if(i instanceof O1&&(i=i.first()))return i}return null},O0=function(t){alert(t)},x6=function(){this._values={},this._keys={}},r6=function(t){if($_debug)throw t},$_getPrevColumn=function(t,e){for(var i=e;0<=i;i--){var n=t.getVisibleItem(i);if(n instanceof t2)return n;if(n instanceof O1&&(n=n.last())instanceof t2)return n}return null},h6=function(i,n){var t=function(t,e){this.name=i,this.message=t,"string"==typeof n&&((this[n]=e)&&(this.message+="\r\n"+JSON.stringify(e)))};return(t.prototype=new Error).constructor=t},$$_createTokenArray=function(){for(var t=[],e=0;e<arguments.length;e++)t[arguments[e]]=!0;return t},I87=function(t){throw new q0(t)},A5=function(){this.name="DataLudi.DataSetPendingError",this.message=A5.message},U1=function(t){this._color=new m2(t)},$_collectDataColumns=function(t,e,i){for(var n=i?t.visibleCount():t.count(),s=0;s<n;s++){var r=i?t.getVisibleItem(s):t.getItem(s);r instanceof L2?e.push(r):r instanceof O1&&$_collectDataColumns(r,e,i)}},O77=function(t){var f=function(t,e,i,n,s){var r,o,a,h,l,u=t.footer(),d=t instanceof n5,c=g.expandedAdornments(),_=g.collapsedAdornments();if(n&&t instanceof j2&&t._setExpanded(!0),g.mergeMode()){for(!d&&X2.isHeader(c)&&e.push(t),r=0,o=t.count();r<o;r++)if((a=t.getItem(r))instanceof j2)if(h=a,i&&a.level()<s||h.expanded())f(h,e,i,n,s);else switch(_){case X2.BOTH:e.push(h),h.footer&&(l=h.footer())&&e.push(l);break;case X2.FOOTER:(l=h.footer())&&e.push(h.footer());break;case X2.HEADER:default:e.push(h)}else a!=u&&e.push(a);!d&&u&&X2.isFooter(c)&&e.push(u)}else{for(!d&&X2.isHeader(c)&&e.push(t),r=0,o=t.count();r<o;r++)if((a=t.getItem(r))instanceof j2)if(h=a,i&&a.level()<s||h.expanded())f(h,e,i,n,s);else switch(_){case X2.HEADER:e.push(h);break;case X2.BOTH:default:e.push(h),(l=h.footer())&&e.push(l)}else a instanceof m7||e.push(a);!d&&u&&X2.isFooter(c)&&e.push(u)}},o=function(t,e){var i,n,s,r;if(0<=(n=t.index()))return n;if(e&&t.collapsed())return(r=t.footer())&&0<=(n=r.index())?n:-1;for(i=0,cnt=t.count();i<cnt;i++){if(0<=(n=(s=t.getItem(i)).index()))return n;if((r=Q2(s,j2))&&0<=(n=o(r,!0)))return n}return-1},g=t,a=0,h=[],l=[];this.provider=function(){return g},this.count=function(){return h.length},this.fixedCount=function(){return a},this.getItems=function(){return h.slice()},this.getItem=function(t){return h[t]},this.getCheckedItem=function(t){return 0<=t&&t<h.length?h[t]:null},this.visitAll=function(t){for(var e=0,i=h.length;e<i;e++)t(h[e])},this.clear=function(){h.splice(0,h.length)},this.expand=function(t,e,i,n){return function(t,e,i,n){var s,r,o;if(t instanceof n5)s=a;else if(g.mergeMode()){switch(g.collapsedAdornments()){case X2.BOTH:s=t.index(),h.splice(s,2);break;case X2.FOOTER:(o=t.footer())&&(s=o.index(),h.splice(s,1));break;case X2.HEADER:default:s=t.index(),h.splice(s,1)}i&&(t._index=-1)}else s=t.index(),h.splice(s,1),g.collapsedAdornments()!=X2.HEADER&&h.splice(s,1);for(l.splice(0,l.length),f(t,l,e,i,0<n?t.level()+n:1e6),r=0,cnt=l.length;r<cnt;r++)h.splice(s+r,0,l[r])}(t,e,i=!(2<arguments.length)||i,n=3<arguments.length?n:0),!0},this.collapse=function(t,e){var i,n,s;if(t instanceof n5){if(e){for(i=t.count();i--;)(n=t.getChild(i))instanceof j2&&this.collapse(n,!0);return!0}return!1}if(t instanceof j2&&t._setExpanded(!1),g.mergeMode()){for(0<=(i=t.index())?(h.splice(i,1),t._index=-1):i=o(t);i<h.length&&(n=h[i]).isDescendantOf(t);)h.splice(i,1),n._index=-1,e&&n instanceof j2&&n._setExpanded(!1);switch(g.collapsedAdornments()){case X2.BOTH:t._index=i,h.splice(i,0,t),(s=t.footer())&&(s._index=i+1,h.splice(i+1,0,s));break;case X2.FOOTER:(s=t.footer())&&(s._index=i,h.splice(i,0,s));break;case X2.HEADER:default:t._index=i,h.splice(i,0,t)}}else switch(i=t.index(),g.collapsedAdornments()){case X2.HEADER:for(i++;i<h.length&&h[i].level()>t.level();)n=h[i],h.splice(i,1),n._index=-1,e&&n instanceof j2&&n._setExpanded(!1);break;case X2.BOTH:default:for(s=t.footer(),i++;i<h.length&&h[i].level()>t.level()&&(!s||h[i]!=s);)n=h[i],h.splice(i,1),n._index=-1,e&&n instanceof j2&&n._setExpanded(!1);(i>=h.length||h[i]!=s)&&(n=i<h.length<h.length?h[i]:null,s&&h.splice(i,0,s),n&&(n._index=-1,e&&n instanceof j2&&n._setExpanded(!1)))}return!0},this.getNext=function(t){return null!=t&&t.visible()&&t.index()<this.count()-1?h[t.index()+1]:null},this.getPrior=function(t){return null!=t&&t.visible()&&0<t.index()?h[t.index()-1]:null},this.getNextData=function(t){var e,i;if(null!=t&&t.visible()&&(e=t.index())<(i=this.count())-1)for(;++e<i;)if(h[e]instanceof v4)return h[e];return null},this._clearAndInit=function(t,e){if(this.clear(),t){a=Math.min(e,t.rowCount());for(var i=0;i<a;i++)h.push(t.getItem(i))}else a=0},this._resetIndices=function(t){for(var e=t=0<arguments.length?t:0,i=h.length;e<i;e++)h[e]._index=e},this._rearrangeGroup=function(t){var e,i,n,s=t.index()+1,r=t._children;if(t.expanded()&&0<r.length){for(e=0;e<r.length-1;e++)i=r[e],(h[s+e]=i)._index=s+e;n=g.collapsedAdornments(),(i=r[e])instanceof m7&&n!=X2.BOTH&&n!=X2.FOOTER||((h[s+e]=i)._index=s+e)}},this._removeItem=function(t){h.splice(t.index(),1)},this._addItem=function(t){var e,i,n=h[t.parent().index()];for(e=n.index()+1;e<h.length;e++)if((i=h[e]).parent()!=n||i.dataIndex()<0)return void h.splice(e,0,t);h.push(t)}},b0=function(t){this.field=t,this.count=0,this.sum=NaN,this.max=NaN,this.min=NaN,this.avg=NaN,this.vars=NaN},$$_drawTriangleRight=function(t,e,i,n){var s=e.x+(e.width-i)/2,r=e.y+(e.height-i)/2,o=i/9,a=[s+2*o,r+1*o,s+7*o,r+4.5*o,s+2*o,r+8*o];t.drawPolygonArray(n,null,a)},s68=function(){var c=null,_=[],f=[];this._render=function(){for(var t=0,e=_.length;t<e;t++)_[t].apply(c,f[t])},this.clear=function(t){c=t,_=[],f=[]},this.clipRect=function(t){_.push(c.clipBounds),f.push([t.x,t.y,t.width,t.height])},this.clipRectEx=function(t){_.push(c.clipBoundsEx),f.push([t.x,t.y,t.width,t.height])},this.setAlpha=function(t){_.push(c.setAlpha),f.push([t])},this.drawBounds=function(t,e,i,n,s,r){_.push(c.drawBounds),f.push([t,e,i,n,s,r])},this.drawBoundsI=function(t,e,i,n,s,r){_.push(c.drawBoundsI),f.push([t,e,i,n,s,r])},this.drawRect=function(t,e,i){_.push(c.drawBounds),f.push([t,e,i.x,i.y,i.width,i.height])},this.drawRectI=function(t,e,i){_.push(c.drawBoundsI),f.push([t,e,i.x,i.y,i.width,i.height])},this.drawRoundRectI=function(t,e,i,n,s,r,o,a){_.push(c.drawRoundRectI),f.push([t,e,i.clone(),n,s,r,o,a])},this.drawRoundRectIWith=function(t,e,i,n,s){_.push(c.drawRoundRectIWith),f.push([t,e,i.clone(),n,s])},this.drawCircle=function(t,e,i,n,s){_.push(c.drawCircle),f.push([t,e,i,n,s])},this.drawEllipse=function(t,e,i,n,s,r){_.push(c.drawEllipse),f.push([t,e,i,n,s,r])},this.drawCircleRect=function(t,e,i){_.push(c.drawCircleRect),f.push([t,e,i.clone()])},this.drawTriangle=function(t,e,i){_.push(c.drawTriangle),f.push([t,e,i.clone()])},this.drawDiamond=function(t,e,i){_.push(c.drawDiamond),f.push([t,e,i.clone()])},this.drawArcSector=function(t,e,i,n,s,r,o,a,h,l){_.push(c.drawArcSector),f.push([t,e,i,n,s,r,o,a,h,l])},this.drawArcSector2=function(t,e,i,n,s,r,o,a,h,l,u,d){_.push(c.drawArcSector2),f.push([t,e,i,n,s,r,o,a,h,l,u,d])},this.drawLine=function(t,e,i,n,s){_.push(c.drawLine),f.push([t,e,i,n,s])},this.drawLineI=function(t,e,i,n,s){_.push(c.drawLineI),f.push([t,e,i,n,s])},this.drawHorzLine=function(t,e,i,n){_.push(c.drawHorzLine),f.push([t,e,i,n])},this.drawHorzLineI=function(t,e,i,n){_.push(c.drawHorzLineI),f.push([t,e,i,n])},this.drawVertLine=function(t,e,i,n){_.push(c.drawVertLine),f.push([t,e,i,n])},this.drawVertLineI=function(t,e,i,n){_.push(c.drawVertLineI),f.push([t,e,i,n])},this.drawLines=function(t,e){_.push(c.drawLines),f.push([t,e])},this.drawLinesI=function(t,e){_.push(c.drawLinesI),f.push([t,e])},this.drawCurve=function(t,e){_.push(c.drawCurve),f.push([t,e])},this.drawPolygon=function(t,e,i){_.push(c.drawPolygon),f.push([t,e,i])},this.drawPolygonArray=function(t,e,i){_.push(c.drawPolygonArray),f.push([t,e,i])},this.drawText=function(t,e,i,n,s,r,o){_.push(c.drawText),f.push([t,e,i,n,s,r,o])},this.drawTextBounds=function(t,e,i,n,s,r,o,a,h){_.push(c.drawTextBounds),f.push([t,e,i,n,s,r,o,a,h])},this.drawTextRect=function(t,e,i,n,s,r){_.push(c.drawTextBounds),f.push([t,e,i,n.x,n.y,n.width,n.height,s,r])},this.drawTextRectA=function(t,e,i,n,s){_.push(c.drawTextBoundsA),f.push([t,e,i,n.x,n.y,n.width,n.height,s])},this.drawImage=function(t,e,i,n,s,r,o,a,h){_.push(c.drawImage),f.push([t,e,i,n,s,r,o,a,h])},this.getTextWidth=function(t,e){return _graphics.gtTextWidth(t,e)}},q4=function(){return(new Date).getTime()-E77},$_collectColumns=function(t,e,i){for(var n=i?t.visibleCount():t.count(),s=0;s<n;s++){var r=i?t.getVisibleItem(s):t.getItem(s);r instanceof O1?$_collectColumns(r,e,i):e.push(r)}},$_getUpperColumn=function(t,e){for(var i=e;0<=i;i--){var n=t.getVisibleItem(i);if(n instanceof t2)return n;if(n instanceof O1&&(n=n.last())instanceof t2)return n}return null},$$_xl_equal_border=function(t,e){return!t==!e||t&&e&&t._color.toColorHex()==e._color.toColorHex()},$$_drawDownArrow=function(t,e,i,n){var s=e.x+(e.width-i)/2,r=e.y+(e.height-i)/2,o=i/9,a=[s+0*o,r+2.75*o,s+4.5*o,r+7.25*o,s+9*o,r+2.75*o,s+8*o,r+1.75*o,s+4.5*o,r+5.25*o,s+1*o,r+1.75*o];t.drawPolygonArray(n,null,a)},t4=function(){this.id=void 0,this.horzAlign=t4.ALIGN_NEAR,this.vertAlign=t4.VALIGN_CENTER,this.wrapText=!1,this.formatId=0,this.font=null,this.fill=null,this.border=null,this.xfId=0,this.$ref=0},$$_expand_object=function(t){var e=[];for(var i in t)0<=i.indexOf(".")&&e.push(i);if(0<e.length){var n={};for(var i in t)n[i]=t[i];t=n;for(var s=e.length;s--;){var r=(i=e[s]).split(".");r[0]&&((n=$$_get_obj(t,r))[r[r.length-1]]=t[i])}}return t},m0=function(m){return"function"==typeof m?m:"string"==typeof m?eval("({func:function () {"+m+"}})").func:null},L87=function(){s17($_language)},H87=function(t){var a=function(t,e,i,n){var s,r,o;for(s=0,r=t.count();s<r;s++)(o=t.getItem(s))&&(e.push(o),o instanceof Z2&&(i&&o.level()<n||o.expanded())&&a(o,e,i,n))},i=t,h=0,l=[],u=[];this.provider=function(){return i},this.count=function(){return l.length},this.fixedCount=function(){return h},this.getItem=function(t){return l[t]},this.setItem=function(t,e){l[t]=e},this.indexOf=function(t){return l.indexOf(t)},this.clear=function(){l.length=0},this.expand=function(t,e,i){i=0<arguments.length?i:0,t&&function(t,e,i){var n,s,r,o=u;if(r=t instanceof u47?h:t.index()+1,i=Math.max(0,i),o.length=0,a(t,o,e,0<i?t.level()+i:1e6),e){for(n=r,s=l.length;n<s&&!(l[n].level()<=t.level());n++);l.splice(r,n-r)}for(n=0,s=o.length;n<s;n++)l.splice(r+n,0,o[n])}(t,e,i)},this.collapse=function(t){if(t)for(var e=t.index()+1;e<l.length&&l[e].level()>t.level();){if(l[e]==t.footer()){l[e]._index=-1,l.splice(e,1);break}l[e]._index=-1,l.splice(e,1)}},this.getNext=function(t){return t&&t.visible()&&t.index()<this.count()-1?l[t.index()+1]:null},this.getPrior=function(t){return t&&t.visible()&&0<t.index()?l[t.index()-1]:null},this.getNextData=function(t){var e,i;if(t&&t.visible()&&(e=t.index())<(i=this.count())-1)for(;++e<i;)if(0<=l[e].dataIndex())return l[e];return null},this.insert=function(t,e){l.splice(e,0,t)},this.remove=function(t){var e=l.indexOf(t);if(0<=e&&(l.splice(e,1),t.expanded()))for(;e<l.length&&t.isDescendant(l[e]);)l.splice(e,1)},this._clearAndInit=function(t){var e;for(this.clear(),h=Math.min(t,i.rowCount()),0<i._maxItemCount&&(h=Math.min(t,i._maxItemCount)),e=0;e<h;e++)l.push(i.getItem(e))}},r17=function(t){this._tag=t,this._nodes=null,this._attrs=null},G2=function(t){t.preventDefault?(t.preventDefault(),t.stopImmediatePropagation&&t.stopImmediatePropagation()):t.returnValue=!1},U77=function(t){$_logging=t},h17=function(t,e){this.$enum=t,this.defaultValue=e},$_getFirstColumn=function(t){for(var e=t.visibleCount(),i=0;i<e;i++){var n=t.getVisibleItem(i);if(n instanceof t2)return n;if(n instanceof O1&&(n=$_getFirstColumn(n))instanceof t2)return n}return null},z8=function(t,e){var i=t,n=e,s=[],r=[],o=[],a={};this.name=function(){return i},this.count=function(){return s.length},this.addListener=function(t){t&&r.indexOf(t)<0&&r.push(t)},this.removeListener=function(t){var e=r.indexOf(t);0<=e&&_listener.splice(e,1)},this.getUrl=function(t){return s[t]},this.addUrl=function(t){t&&s.indexOf(t)<0&&(s.push(t),a[t]=s.length-1)},this.addUrls=function(t){if(t)for(var e=0;e<t.length;e++)this.addUrl(t[e])},this.getImage=function(t){if("string"==typeof t){var e=a[t];void 0!==e&&(t=e)}if(0<=t&&t<s.length){var i=o[t];if(i)return i;(i=new Image).index=t,i.owner=this,(o[t]=i).onload=function(){this.owner._fireLoaded(this.index)}.bind(i),i.src=n+s[t]}return null},this._fireLoaded=function(t){for(var e=0;e<r.length;e++)r[e].onImageListImageLoaded(this,t)}},L6=function(t,e){var i=new p3(t,e,0);return i.toPass=new p3(t,e,9),i.toUpper=new p3(t,e,1),i.toLower=new p3(t,e,-1),i},M87=function(t){t!=$$$_MAX_DIGITS&&($$$_MAX_DIGITS=t,W7.clean())},W87=function(t){$_TEXT_OFF=t},J87=function(t,e){var i=new x4;return t&&i.setFields(t,e),i},V5=function(){this.id=void 0,this.patternType="none",this.color=void 0,this.gradient=void 0,this.color2=void 0,this.degree="90",this.tint=0,this.serialize=function(t,e){var i;if("linear"==this.gradient){var n=t.createElement("gradientFill");e.appendChild(n),n.setAttribute("degree",this.degree);var s=t.createElement("stop");n.appendChild(s),s.setAttribute("position","0"),i=t.createElement("color"),s.appendChild(i),i.setAttribute("rgb",this.color),i.setAttribute("tint",this.tint),s=t.createElement("stop"),n.appendChild(s),s.setAttribute("position","1"),i=t.createElement("color"),s.appendChild(i),i.setAttribute("rgb",this.color2),i.setAttribute("tint",this.tint)}else{var r=t.createElement("patternFill");e.appendChild(r),r.setAttribute("patternType",this.patternType),"none"!=this.patternType&&(i=t.createElement("fgColor"),r.appendChild(i),i.setAttribute("rgb",this.color),i.setAttribute("tint",this.tint))}}},I3=function(t){var k=t;!("imageSmoothingEnabled"in k)&&(k.webkitImageSmoothingEnabled=!0),k.mozImageSmoothingEnabled=!0,k.oImageSmoothingEnabled=!0,k.imageSmoothingEnabled=!0,k.setLineDash=k.setLineDash||function(){},this.LINES_REG=new RegExp("\\n|\\r\\n?"),this.$_ctx=function(){return k},this.save=function(){return k.save(),this},this.restore=function(){return k.restore(),this},this.setCompositionOp=function(t){return k.globalCompositeOperation=t,this},this.translate=function(t,e){return k.translate(t,e),this},this.scale=function(t,e){return k.scale(t,e),this},this.rotate=function(t){return k.rotate(t),this},this.rotateAt=function(t,e,i){return k.translate(e,i),k.rotate(t),k.translate(-e,-i),this},this.clear=function(t,e,i,n){return k.clearRect(t,e,i,n),this},this.clip=function(){return k.clip(),this},this.clipRect=function(t){return k.beginPath(),k.rect(t.x,t.y,t.width,t.height),k.clip(),this},this.clipRectEx=function(t){return k.beginPath(),k.rect(t.x,t.y,t.width+1,t.height+1),k.clip(),this},this.clipBounds=function(t,e,i,n){return k.beginPath(),k.rect(t,e,i,n),k.clip(),this},this.clipBoundsEx=function(t,e,i,n){return k.beginPath(),k.rect(t,e,i+1,n+1),k.clip(),this},this.clipRoundRect=function(t,e,i,n,s,r){var o=t.x,a=t.y,h=t.right()+(r||0),l=t.bottom()+(r||0);return k.beginPath(),k.moveTo(o+e,a),k.lineTo(h-i,a),k.quadraticCurveTo(h,a,h,a+i),k.lineTo(h,l-s),k.quadraticCurveTo(h,l,h-s,l),k.lineTo(o+s,l),k.quadraticCurveTo(o,l,o,l-s),k.lineTo(o,a+e),k.quadraticCurveTo(o,a,o+e,a),k.clip(),this},this.containsPoint=function(t,e){return k.isPointInPath(t,e)},this.setAlpha=function(t){return k.globalAlpha=t,this},this.setFill=function(t){return k.fillStyle=t,this},this.setStroke=function(t,e,i){return k.strokeStyle=t,k.lineWidth=e,k.setLineDash(i||[]),this},this.setShadow=function(t,e,i){return k.shadowColor=t,k.shadowBlur=e,k.shadowOffsetX=k.shadowOffsetY=i,this},this.$_applyShadow=function(t){return k.shadowColor=t.color.value(),k.shadowOffsetX=t.horz,k.shadowOffsetY=t.vert,k.shadowBlur=t.blur,this},this.applyShadow=function(t){return t&&this.$_applyShadow(t),this},this.clearShadow=function(){return k.shadowColor="transparent",this},this.createLinearGradient=function(t,e,i,n){return k.createLinearGradient(t,e,i,n)},this.createRadialGradient=function(t,e,i,n){var s=i/2,r=n/2,o=Math.min(s,r);return k.createRadialGradient(s,r,0,s,r,o)},this.setCompositeOp=function(t){var e=k.globalCompositeOperation;return k.globalCompositeOperation=t,e},this.getValue=function(t,e){var i=k.getImageData(t,e,1,1).data;return i[3]*(1<<24)+(i[0]<<16)+(i[1]<<8)+i[2]},this.getColor=function(t,e){var i=k.getImageData(t,e,1,1).data;return new m2(i[3]*(1<<24)+(i[0]<<16)+(i[1]<<8)+i[2])},this.drawBounds=function(t,e,i,n,s,r){return k.beginPath(),k.rect(i,n,s,r),t&&(t.applyTo(this,i,n,s,r),k.fill()),e&&(e.applyTo(this),k.stroke()),this},this.drawBoundsI=function(t,e,i,n,s,r){var o=e&&e.applyTo(this);if(t||o){var a=o?e.width()%2/2:0;return i+=a,n+=a,k.beginPath(),k.rect(i,n,s,r),t&&t.applyTo(this,i,n,s,r)&&k.fill(),o&&k.stroke(),this}},this.drawRect=function(t,e,i){return k.beginPath(),k.rect(i.x,i.y,i.width,i.height),t&&(t.applyTo(this,i.x,i.y,i.width,i.height),k.fill()),e&&(e.applyTo(this),k.stroke()),this},this.fillAndClear=function(){return k.fill(),k.shadowColor="transparent",this},this.drawRectI=function(t,e,i){var n=e&&e.applyTo(this);if(t||n){var s=n?e.width()%2/2:0,r=i.x+s,o=i.y+s;return k.beginPath(),k.rect(r,o,i.width,i.height),t&&t.applyTo(this,r,o,i.width,i.height)&&this.fillAndClear(),n&&k.stroke(),this}},this.drawRoundRectI=function(t,e,i,n,s,r,o,a){var h=e&&e.applyTo(this);if(t||h){var l=h?e.width()%2/2:0,u=i.x+l,d=i.y+l,c=i.right()+l+(a||0),_=i.bottom()+l+(a||0);return k.beginPath(),k.moveTo(u+n,d),k.lineTo(c-s,d),k.quadraticCurveTo(c,d,c,d+s),k.lineTo(c,_-o),k.quadraticCurveTo(c,_,c-o,_),k.lineTo(u+o,_),k.quadraticCurveTo(u,_,u,_-o),k.lineTo(u,d+n),k.quadraticCurveTo(u,d,u+n,d),k.closePath(),t&&t.applyTo(this,u,d,i.width,i.height)&&this.fillAndClear(),h&&k.stroke(),this}},this.drawRoundRectIWith=function(t,e,i,n,s){return this.drawRoundRectI(t,e,i,n.topLeft,n.topRight,n.bottomLeft,n.bottomRight,s),this},this.drawRangedBounds=function(t,e,i,n,s,o,a,h){if(k.beginPath(),k.rect(r.x,r.y,r.width,r.height),t instanceof m2||(color=t._color),e instanceof m2||(color=e._color),t&&e){var l;switch(h){case 90:l=k.createLinearGradient(n,s,n,s+a);break;case 45:l=k.createLinearGradient(n,s,n+o,s+a);break;case 0:default:l=k.createLinearGradient(n,s,n+o,s)}l.addColorStop(0,t.value()),l.addColorStop(1,e.value()),k.fillStyle=l,k.fill()}i&&(i.applyTo(this),k.stroke())},this.drawCircle=function(t,e,i,n,s){var r=e&&e.applyTo(this);if(t||r)return k.beginPath(),k.arc(i,n,s,0,2*Math.PI),t&&t.applyTo(this,i-s,n-s,2*s,2*s)&&k.fill(),r&&k.stroke(),k.closePath(),this},this.drawCircleBounds=function(t,e,i,n,s,r){var o=e&&e.applyTo(this);if(t||o){var a=i+s/2,h=n+r/2,l=Math.min(s,r)/2;return k.beginPath(),k.arc(a,h,l,0,2*Math.PI),t&&t.applyTo(this,i-l,n-l,2*l,2*l)&&k.fill(),o&&k.stroke(),k.closePath(),this}},this.drawCircleRect=function(t,e,i){return this.drawCircleBounds(t,e,i.x,i.y,i.width,i.height),this},this.drawEllipse=function(t,e,i,n,s,r){var o=e&&e.applyTo(this);if(t||o){var a=s/2*.5522848,h=r/2*.5522848,l=i+s,u=n+r,d=i+s/2,c=n+r/2;return k.beginPath(),k.moveTo(i,c),k.bezierCurveTo(i,c-h,d-a,n,d,n),k.bezierCurveTo(d+a,n,l,c-h,l,c),k.bezierCurveTo(l,c+h,d+a,u,d,u),k.bezierCurveTo(d-a,u,i,c+h,i,c),k.closePath(),t&&t.applyTo(this,i,n,s,r)&&k.fill(),o&&k.stroke(),this}},this.drawTriangle=function(t,e,i){var n=e&&e.applyTo(this);if(t||n){var s=i.x+i.width/2;return k.beginPath(),k.moveTo(s,i.y),k.lineTo(i.right(),i.bottom()),k.lineTo(i.x,i.bottom()),k.closePath(),t&&t.applyTo(this,i.x,i.y,i.width,i.height)&&k.fill(),n&&k.stroke(),this}},this.drawDiamond=function(t,e,i){var n=e&&e.applyTo(this);if(t||n){var s=i.x+i.width/2,r=i.y+i.height/2;return k.beginPath(),k.moveTo(s,i.y),k.lineTo(i.right(),r),k.lineTo(s,i.bottom()),k.lineTo(i.x,r),k.closePath(),t&&t.applyTo(this,i.x,i.y,i.width,i.height)&&k.fill(),n&&k.stroke(),this}},this.drawCross=function(t,e,i){var n=e&&e.applyTo(this);if(t||n){var s=i.x+i.width/2,r=i.y+i.height/2,o=Math.max(1.5,i.width/5),a=Math.max(1.5,i.height/5);return k.beginPath(),k.moveTo(s-o,i.y),k.lineTo(s+o,i.y),k.lineTo(s+o,r-a),k.lineTo(i.right(),r-a),k.lineTo(i.right(),r+a),k.lineTo(s+o,r+a),k.lineTo(s+o,i.bottom()),k.lineTo(s-o,i.bottom()),k.lineTo(s-o,r+a),k.lineTo(i.x,r+a),k.lineTo(i.x,r-a),k.lineTo(s-o,r-a),k.closePath(),t&&t.applyTo(this,i.x,i.y,i.width,i.height)&&k.fill(),n&&k.stroke(),this}},this.drawDounut=function(t,e,i,n,s,r){var o=e&&e.applyTo(this);if(t||o)return k.beginPath(),0<s&&k.arc(i,n,s,0,2*Math.PI,!0),r<s&&k.arc(i,n,s-r,0,2*Math.PI,!1),k.closePath(),t&&t.applyTo(this,i-s,n-s,2*s,2*s)&&k.fill(),o&&k.stroke(),this},this.drawArcSector=function(t,e,i,n,s,r,o,a,h,l){var u=e&&e.applyTo(this);if(t||u)return o+=3*Math.PI/2+h,k.beginPath(),k.moveTo(i,n),0<s&&k.arc(i,n,s,o,o+a),k.lineTo(i,n),t&&t.applyTo(this,i-s,n-r,2*s,2*r)&&k.fill(),u&&k.stroke(),this},this.drawArcSector2=function(t,e,i,n,s,r,o,a,h,l,u,d){var c=e&&e.applyTo(this);if(t||c)return h+=3*Math.PI/2+u,k.beginPath(),0<s&&k.arc(i,n,s,h,h+l),0<o&&k.arc(i,n,o,h+l,h,!0),k.closePath(),t&&t.applyTo(this,i-o,n-a,2*o,2*a)&&k.fill(),c&&k.stroke(),this},this.drawLine=function(t,e,i,n,s){return t&&t.applyTo(this)&&(k.beginPath(),k.moveTo(e,i),k.lineTo(n,s),k.stroke()),this},this.drawLineI=function(t,e,i,n,s){if(t&&t.applyTo(this)){var r=t.width()%2/2;k.beginPath(),e==n?(k.moveTo(e+r,i),k.lineTo(n+r,s)):i==s&&(k.moveTo(e,i+r),k.lineTo(n,s+r)),k.stroke()}return this},this.drawHorzLine=function(t,e,i,n){return t&&t.applyTo(this)&&(k.beginPath(),k.moveTo(e,n),k.lineTo(i,n),k.stroke()),this},this.drawHorzLineI=function(t,e,i,n){return t&&t.applyTo(this)&&(n+=t.width()%2/2,k.beginPath(),k.moveTo(e,n),k.lineTo(i,n),k.stroke()),this},this.drawHLine=function(t,e,i,n){return t&&t.applyTo(this)&&(k.beginPath(),k.moveTo(i,e),k.lineTo(n,e),k.stroke()),this},this.drawHLineI=function(t,e,i,n){return t&&t.applyTo(this)&&(e+=t.width()%2/2,k.beginPath(),k.moveTo(i,e),k.lineTo(n,e),k.stroke()),this},this.drawVertLine=function(t,e,i,n){return t&&t.applyTo(this)&&(k.beginPath(),k.moveTo(n,e),k.lineTo(n,i),k.stroke()),this},this.drawVertLineI=function(t,e,i,n){return t&&t.applyTo(this)&&(n+=t.width()%2/2,k.beginPath(),k.moveTo(n,e),k.lineTo(n,i),k.stroke()),this},this.drawVLine=function(t,e,i,n){return t&&t.applyTo(this)&&(k.beginPath(),k.moveTo(e,i),k.lineTo(e,n),k.stroke()),this},this.drawVLineI=function(t,e,i,n){return t&&t.applyTo(this)&&(e+=t.width()%2/2,k.beginPath(),k.moveTo(e,i),k.lineTo(e,n),k.stroke()),this},this.drawLines=function(t,e){if(t&&t.applyTo(this)){var i,n=!1;if(V1(e)&&2<=e.length){for(k.beginPath(),k.moveTo(e[0].x,e[0].y),i=1;i<e.length;i++)k.lineTo(e[i].x,e[i].y);n=!0}else if(5<=arguments.length){for(k.beginPath(),k.moveTo(e,arguments[2]),i=3;i<arguments.length-1;i+=2)k.lineTo(arguments[i],arguments[i+1]);n=!0}n&&k.stroke()}return this},this.drawLinesI=function(t,e){if(t&&t.applyTo(this)){var i,n,s,r=t.width()%2/2;if(rendered=!1,e3(e)&&2<=e.length){for(k.beginPath(),k.moveTo(e[0].x+r,e[0].y+r),i=1;i<e.length;i++)k.lineTo(e[i].x,e[i].y);rendered=!0}else if(5<=arguments.length){for(s=[],i=1,n=arguments.length;i<n;i++)s[i]=arguments[i]+r;for(k.beginPath(),k.moveTo(s[1],s[2]),i=3;i<n-1;i+=2)k.lineTo(s[i],s[i+1]);rendered=!0}rendered&&k.stroke()}return this},this.drawLinesArray=function(t,e){if(t&&e&&4<=e.length&&t.applyTo(this)){k.beginPath(),k.moveTo(e[0],e[1]);for(var i=1;i<e.length/2;i++)k.lineTo(e[2*i],e[2*i+1]);k.stroke()}return this},this.drawLinesArrayI=function(t,e){if(t&&e&&4<=e.length&&t.applyTo(this)){var i,n=t.width()%2/2;for(k.beginPath(),k.moveTo(e[0],e[1]),i=1;i<e.length/2;i++)k.lineTo(e[2*i]+n,e[2*i+1]+n);k.stroke()}return this},this.drawSegments=function(t,e,n,s){if(2<s&&t&&t.applyTo(this)){var r=n;if(e.length>=n+2){for(s=Math.min(n+s,e.length),k.beginPath(),k.moveTo(e[r].x,e[r].y),i=r+1;i<s;i++)k.lineTo(e[i].x,e[i].y);k.stroke()}}return this},this.drawQuadratic=function(t,e,i,n,s,r,o){return t&&t.applyTo(this)&&(k.beginPath(),k.moveTo(e,i),k.quadraticCurveTo(n,s,r,o),k.stroke()),this},this.drawCurve=function(t,e){return t&&t.applyTo(this)&&(k.beginPath(),w5(k,e,0,e.length-1),k.stroke()),this},this.drawPolygon=function(t,e,i){var n,s,r,o;if(i&&1<(s=i.length)){if(r=e&&e.applyTo(this),!t&&!r)return;for(k.beginPath(),k.moveTo(i[0].x,i[0].y),n=1;n<s;n++)k.lineTo(i[n].x,i[n].y);k.closePath(),t&&(o=a5(i),t.applyTo(this,o.x,o.y,o.width,o.height)&&k.fill()),r&&k.stroke()}return this},this.drawPolygonArray=function(t,e,i){var n,s,r;if(i&&2<(s=i.length)){var o=e&&e.applyTo(this);if(!t&&!o)return;for(k.beginPath(),k.moveTo(i[0],i[1]),s/=2,n=1;n<s;n++)k.lineTo(i[2*n],i[2*n+1]);k.closePath(),t&&(r=Q87(i),t.applyTo(this,r.x,r.y,r.width,r.height)&&k.fill()),o&&k.stroke()}return this},this.drawHoledPolygonArray=function(t,e,i,n){var s=k.globalCompositeOperation;return this.drawPolygonArray(t,e,i),k.globalCompositeOperation="destination-out",this.drawPolygonArray(U1.BLACK,null,n),k.globalCompositeOperation=s,this},this.drawRange=function(t,e,i,n){if(i&&1<i.length&&n&&1<n.length){var s=e&&e.applyTo(this);if(!t&&!s)return;k.beginPath(),k.moveTo(i[0].x,i[0].y);for(var r=1,o=i.length;r<o;r++)k.lineTo(i[r].x,i[r].y);for(r=n.length-1;0<=r;r--)k.lineTo(n[r].x,n[r].y);if(k.closePath(),t){var a=a5(i.concat(n));t.applyTo(this,a.x,a.y,a.width,a.height)&&k.fill()}s&&k.stroke()}return this},this.drawCurvedRange=function(t,e,i,n){if(i&&1<i.length&&n&&1<n.length){var s=e&&e.applyTo(this);if(!t&&!s)return;k.beginPath(),w5(k,i,0,i.length-1,!0);var r=n[n.length-1];if(k.lineTo(r.x,r.y),w5(k,n,n.length-1,0,!1),r=i[0],k.lineTo(r.x,r.y),t){var o=a5(i.concat(n));t.applyTo(this,o.x,o.y,o.width,o.height)&&k.fill()}s&&k.stroke()}return this},this.drawCurvedStraightRange=function(t,e,i,n){if(i&&1<i.length&&n&&1<n.length){var s=e&&e.applyTo(this);if(!t&&!s)return;k.beginPath(),w5(k,i,0,i.length-1,!0);var r=n[n.length-1];k.lineTo(r.x,r.y);for(var o=n.length-2;0<=o;o--)k.lineTo(n[o].x,n[o].y);if(r=i[0],k.lineTo(r.x,r.y),t){var a=a5(i.concat(n));t.applyTo(this,a.x,a.y,a.width,a.height)&&k.fill()}s&&k.stroke()}return this},this.drawStraightCurvedRange=function(t,e,i,n){if(i&&1<i.length&&n&&1<n.length){var s=e&&e.applyTo(this);if(!t&&!s)return;k.beginPath();for(var r=0;r<i.length;r++)k.lineTo(i[r].x,i[r].y);var o=n[n.length-1];if(k.lineTo(o.x,o.y),w5(k,n,n.length-1,0,!1),o=i[0],k.lineTo(o.x,o.y),t){var a=a5(i.concat(n));t.applyTo(this,a.x,a.y,a.width,a.height)&&k.fill()}s&&k.stroke()}return this},this.drawText=function(t,e,i,n,s,r,o){return i&&e&&e.applyTo(this)&&(k.beginPath(),k.font=t?t.font:C7,k.textAlign=r==T2.CENTER?"center":r==T2.RIGHT?"end":"start",k.textBaseline=o||"top",k.fillText(i,n,s)),this},this.drawTextSh=function(t,e,i,n,s,r,o,a){return n&&e&&(i&&this.$_applyShadow(i),this.drawText(t,e,n,s,r,o,a)),this},this.drawTextRect=function(t,e,i,n,s,r){return this.drawTextBounds(t,e,i,n.x,n.y,n.width,n.height,s,r),this},this.drawTextBounds=function(t,e,i,n,s,r,o,a,h){if(i&&e&&e.applyTo(this)){var l=s3;k.beginPath(),t?(k.font=t.font,l=t.size):k.font=C7;var u="start";if(a===T2.CENTER?(n+=r/2,u="center"):a===T2.RIGHT&&(n+=r,u="end"),o!=l)switch(h){case"top":break;case"bottom":s=s+o-l;break;case"middle":default:s+=(o-l+$_TEXT_OFF)/2}if(s+=l/2,k.textAlign=u,k.textBaseline="middle",k.fillText(i,n,s),t){var d=-1e3;switch(t.deco){case"underline":d=Y1(s+l/2+1)+.5;break;case"line-through":d=Y1(s+1)+.5;break;case"overline":d=Y1(s-l/2)-1.5}-1e3<d&&(k.beginPath(),this.setStroke((t.line||e._color).value(),1),r=Y1(k.measureText(i).width),a===T2.CENTER?n-=Y1(r/2):a===T2.RIGHT&&(n-=r),k.moveTo(n,d),k.lineTo(n+r,d),k.stroke())}}return this},this.drawTextRectSh=function(t,e,i,n,s,r,o){return n&&e&&(i&&this.$_applyShadow(i),this.drawTextBounds(t,e,n,s.x,s.y,s.width,s.height,r,o)),this},this.drawTextBoundsSh=function(t,e,i,n,s,r,o,a,h,l){return n&&e&&(i&&this.$_applyShadow(i),this.drawTextBounds(t,e,n,s,r,o,a,h,l)),this},this.getTextRect=function(t,e,i,n,s,r,o,a,h){if(h?h.width=h.height=0:h=new g1,e){var l=s3;switch(t?(k.font=t.font,l=t.size):k.font=C7,h.width=k.measureText(e).width,h.height=l,h.x=i,h.y=n,o===T2.CENTER?h.x+=(s-h.width)/2:o===T2.RIGHT&&(h.x+=s-h.width),a){case"top":break;case"bottom":h.y=h.bottom()-l;break;case"middle":default:h.y+=(r-l)/2}}return h},this.drawTextRectExplicitSh=function(t,e,i,n,s,r,o){return n&&e&&(i&&this.$_applyShadow(i),this.drawTextBoundsExplicit(t,e,n,s.x,s.y,s.width,s.height,r,o)),this},this.drawTextRectExplicit=function(t,e,i,n,s,r){return this.drawTextBoundsExplicit(t,e,i,n.x,n.y,n.width,n.height,s,r),this},this.drawTextBoundsExplicit=function(t,e,i,n,s,r,o,a,h){if(i&&e){var l=r*o;if(!(isNaN(l)||l<=0)){var u="string"==typeof i?i.split(/\n|\r\n?/):i;if(!(u.length<=1)){if(e.applyTo(this)){var d=s3;k.beginPath(),t?(k.font=t.font,d=t.size):k.font=C7;var c=d+1;k.textBaseline="middle";var _,f,g,m,p=c*u.length,w=Math.min(u.length,Math.ceil(o/c));if("top"==h||o<=p);else switch(h){case"bottom":s=s+o-p;break;case"middle":default:s+=(o-p)/2}for(_=0;_<w;_++)if(f="start",a===T2.CENTER?(g=n+r/2,f="center"):a===T2.RIGHT?(g=n+r,f="end"):g=n,m=s+c*_,m+=d/2,k.textAlign=f,k.fillText(u[_],g,m),t){var v=-1e3;switch(t.deco){case"underline":v=Y1(m+d/2+1)+.5;break;case"line-through":v=Y1(m+1)+.5;break;case"overline":v=Y1(m-d/2)-.5}-1e3<v&&(g=n,k.beginPath(),this.setStroke((t.line||e._color).value(),1),r=Y1(k.measureText(u[_]).width),a===T2.CENTER?g-=Y1(r/2):a===T2.RIGHT&&(g-=r),k.moveTo(g,v),k.lineTo(g+r,v),k.stroke())}}return this}this.drawTextBounds(t,e,u[0],n,s,r,o,a,h)}}},this.getExplicitTextRect=function(t,e,i,n,s,r,o,a,h){if(h?h.width=h.height=0:h=new g1(i,n,0,0),!e)return h;var l="string"==typeof e?e.split(this.LINES_REG):e;if(1==l.length)return this.getTextRect(t,l[0],i,n,s,r,o,a,h);var u=s3;t?(k.font=t.font,u=t.size):k.font=C7;var d=u+1;k.textBaseline="middle";var c,_,f,g,m=d*l.length,p=Math.min(l.length,Math.ceil(r/d));if("top"==a||r<=m);else switch(a){case"bottom":n=n+r-m;break;case"middle":default:n+=(r-m)/2}for(h.y=n,h.height=d*p,c=0;c<p;c++)_=l[c],g=k.measureText(_).width,f=o===T2.CENTER?i+(s-g)/2:o===T2.RIGHT?i+s-g:i,0==h.width?(h.x=f,h.width=g):(h.setLeft(Math.min(h.x,f)),h.setRight(Math.max(h.right(),f+g)));return h},this.drawTextRectWrapSh=function(t,e,i,n,s,r,o){return n&&e&&(i&&this.$_applyShadow(i),this.drawTextBoundsWrap(t,e,n,s.x,s.y,s.width,s.height,r,o)),this},this.drawTextRectWrap=function(t,e,i,n,s,r){return this.drawTextBoundsWrap(t,e,i,n.x,n.y,n.width,n.height,s,r),this},this.drawTextBoundsWrap=function(t,e,i,n,s,r,o,a,h){if(i&&e){var l=r*o;if(!(isNaN(l)||l<=0)){var u=s3;t?(k.font=t.font,u=t.size):k.font=C7;var d="string"==typeof i?i.split(this.LINES_REG):i;if(!(d.length<=1&&k.measureText(d[0]).width<=r)){if(e.applyTo(this)){var c,_,f,g,m,p,w,v,C,I,R,y,x=u+1,E=Math.min(d.length,Math.ceil(o/x)),b=[],S=0,T=!0;for(c=0;c<E&&S<=o;c++){for(m=0,v="",g=d[c].split(/(\s+)/),_=0;_<g.length&&S<=o;){if(p=g[_],T&&(T=!1,(p=p.trim())||((C=k.measureText(p).width)>r?b.push(p):(v=p,m=C),p=g[++_])),m+(C=k.measureText(p).width)<=r)v+=p,m+=C;else if(p=p.trim())if(v&&(b.push(v),v=""),r<C)for(;p&&S<=o;){for(f=2;f<=p.length;f++)if(w=p.substr(0,f),k.measureText(w).width>r){b.push(p.substr(0,f-1)),p=p.substr(f-1);break}if(!p||1==p.length||k.measureText(p).width<=r){b.push(p);break}}else v=p,m=0;_++}v&&b.push(v)}if(y=Math.min(b.length,Math.ceil(o/x)),S=b.length*x,k.beginPath(),k.textBaseline="middle","top"==h||o<=S);else switch(h){case"bottom":s=s+o-S;break;case"middle":default:s+=(o-S)/2}for(c=0;c<y;c++)if(I="start",m=n,a===T2.CENTER?(m+=r/2,I="center"):a===T2.RIGHT&&(m=n+r,I="end"),R=s+x*c,R+=u/2,k.textAlign=I,k.fillText(b[c],m,R),t){var D=-1e3;switch(t.deco){case"underline":D=Y1(R+u/2+1)+.5;break;case"line-through":D=Y1(R+1)+.5;break;case"overline":D=Y1(R-u/2)-.5}-1e3<D&&(m=n,k.beginPath(),this.setStroke((t.line||e._color).value(),1),r=Y1(k.measureText(b[c]).width),a===T2.CENTER?m-=Y1(r/2):a===T2.RIGHT&&(m-=r),k.moveTo(m,D),k.lineTo(m+r,D),k.stroke())}}return this}this.drawTextBounds(t,e,d[0],n,s,r,o,a,h)}}},this.getWrapTextRect=function(t,e,i,n,s,r,o,a,h){if(h?h.width=h.height=0:h=new g1(i,n,0,0),!e)return h;var l=s3;t?(k.font=t.font,l=t.size):k.font=C7;var u="string"==typeof e?e.split(/\n|\r\n?/):e;if(1==u.length&&k.measureText(u[0]).width<=s)return this.getTextRect(t,u[0],i,n,s,r,o,a,h);var d,c,_,f,g,m,p,w,v,C,I=l+1,R=Math.min(u.length,Math.ceil(r/I)),y=[],x=0,E=!0;for(d=0;d<R&&x<=r;d++){for(g=0,w="",f=u[d].split(/(\s+)/),c=0;c<f.length&&x<=r;){if(m=f[c],E&&(E=!1,(m=m.trim())||((v=k.measureText(m).width)>s?(x+=I,y.push(m)):(w=m,g=v),m=f[++c])),g+(v=k.measureText(m).width)<=s)w+=m,g+=v;else if(m=m.trim())if(w&&(y.push(w),x+=I,w=""),s<v)for(;m&&x<=r;){for(_=2;_<=m.length;_++)if(p=m.substr(0,_),(v=k.measureText(p).width)>s){y.push(m.substr(0,_-1)),x+=I,m=m.substr(_-1);break}if(!m||1==m.length||(v=k.measureText(m).width)<=s){y.push(m),x+=I;break}}else w=m,g=0;c++}w&&(y.push(w),x+=I)}if(C=Math.min(y.length,Math.ceil(r/I)),x=y.length*I,"top"==a||r<=x);else switch(a){case"bottom":n=n+r-x;break;case"middle":default:n+=(r-x)/2}for(h.y=n,h.height=x,d=0;d<C;d++){var b=k.measureText(y[d]).width;g=o===T2.CENTER?i+(s-b)/2:o===T2.RIGHT?i+s-b:i,0==h.width?(h.x=g,h.width=b):(h.setLeft(Math.min(h.x,g)),h.setRight(Math.max(h.right(),g+b)))}return h},this.drawTextRectA=function(t,e,i,n,s){return this.drawTextBoundsA(t,e,i,n.x,n.y,n.width,n.height,s),this},this.drawTextBoundsA=function(t,e,i,n,s,r,o,a){return e&&e.applyTo(this)&&(k.beginPath(),k.save(),k.translate(n+r/2,s+o/2),k.rotate(a),k.font=t?t.font:C7,k.textAlign="center",k.textBaseline="middle",k.fillText(i,0,0),k.restore()),this},this.drawTextRectASh=function(t,e,i,n,s,r){return i&&this.$_applyShadow(i),this.drawTextBoundsA(t,e,n,s.x,s.y,s.width,s.height,r),this},this.getTextWidth=function(t,e){return e?(k.font=t?t.font:C7,k.measureText(e).width):0},this.getLinesWidth=function(t,e){k.font=t?t.font:C7;var i=e.split(/\n|\r\n?/),n=i.length;if(n<=1)return k.measureText(e).width;for(var s=k.measureText(i[0]).width,r=1;r<n;r++)s=Math.max(k.measureText(i[0]).width);return s},this.drawImage=function(t,e,i,n,s,r,o,a,h){try{k.drawImage.apply(k,arguments)}catch(t){}},this.drawImageAlpha=function(t,e,i,n,s,r,o,a,h,l){(arguments=M6.call(arguments,1))[0]=t;var u=k.globalAlpha;try{k.globalAlpha=e,k.drawImage.apply(k,arguments)}catch(t){}finally{k.globalAlpha=u}return this},this.drawImageI=function(t,e,i,n,s,r,o,a,h){e=Math.floor(e),i=Math.floor(i);try{k.drawImage.apply(k,arguments)}catch(t){}return this},this.drawImageAlphaI=function(t,e,i,n,s,r,o,a,h,l){(arguments=M6.call(arguments,1))[0]=t,e=Math.floor(e),i=Math.floor(i);var u=k.globalAlpha;try{k.globalAlpha=e,k.drawImage.apply(k,arguments)}catch(t){}finally{k.globalAlpha=u}return this},this.aL=function(t,e,i,n,s,r,o,a,h){try{k.drawImage.apply(k,arguments)}catch(t){}return this}},S5=function(t,e){this.width=t,this.height=e},E2=function(t){this.lang=t,this.dataFieldIndexOutOfBounds="Data field index is out of bounds.",this.valueIndexOutOfBounds="Value index is out of bounds.",this.emptyGridMessage="You can set a message displaying here with DisplayOptions.emptyGridMessage property.",this.emptyDataMessage="No data is loaded.",this.invalidDerivedFieldType="DerivedField object   .",this.deleteRowsConfirm="Are you sure you want to delete the selected row(s)?",this.sortingToast="Sorting...",this.filteringToast="Filtering...",this.groupingToast="Grouping...",this.completeEditing="Please complete the editing first.",this.invalidInputFormat="Input format is not invalid.",this.minLengthRequired="The input should be at least ${length} characters.",this.invalidCode128Char="Invalid code128 charactor.",this.invalidcode39Char="Invalid code39 charactor.",this.columnFilterExists="Column filter already exists: ",this.exporting="Exporting..."},y87=function(t,e){var i,n=typeof t;return"string"===n?t?"#"==t.charAt(0)?(i=new m2(t,!0).forceAlpha(e),new U1(i)):0==t.indexOf("linear")?new T3(t):0==t.indexOf("p(")?new A9(t,scope):0==t.indexOf("radial")?new X5(t):0==t.indexOf("glass")?new O8(t):(i=new m2(t,!0).forceAlpha(e),new U1(i)):null:"number"===n?(i=new m2(t,!0).forceAlpha(e),new U1(i)):t},K7=function(){this.$_hash=String(++K7.$_hash)},i3=function(t,e){this.name="DataLudi.EmptyCommandError",this.message="Empty command",this.command=t,this.ret=e},c87=function(t,e){if(e)if(t){if(t._canvas){var i=t._canvas.getBoundingClientRect();return e.x=e.pageX-i.left,e.y=e.pageY-i.top,e}alert("no canvas")}else alert("no container");else alert("no touch")},O87=function(){throw new Error("Not supported Function.caller")},u1=function(t,e){return new h17(t,e)},j87=function(t,e){(new P57).export(t,e)},y4=function(){var t=y4.caller;throw new Error(X1._default.notImplemeted+(t?": "+t.$owner.$name+"::"+t.$name:""))},n8=function(t,e,i){var n='<form name="tempForm" action="'+t+'" method="post"><input type="hidden" name="fileName" value = "'+e+'"/><input type="hidden" name="data" value = "'+i+'"/><input id="ok" type="submit"/></form>',s=document.createElement("div");s.innerHTML=n,document.body.appendChild(s),document.getElementById("ok").click(),document.body.removeChild(s)},t77=function(t){switch(t){case v1.FAR:return"right";case v1.NEAR:return"left";default:return"center"}},b27=function(t,e,i){this.level=0,this.startIndex=t,this.endIndex=e,this.value=i,this.children=[]},$_getLowerColumn=function(t,e){for(var i=e,n=t.visibleCount();i<n;i++){var s=t.getVisibleItem(i);if(s instanceof t2)return s;if(s instanceof O1&&(s=s.first())instanceof t2)return s}return null},$$_cellIndex_getPrev=function(t,e){if(!t||!e)return null;var i=O1.getPrev(e);if(i)return i;for(var n=t.layoutManager(),s=(e.group()?e.root().displayIndex():e.displayIndex())-1;0<=s;s++){if((i=n.getColumn(s))instanceof t2)return i;if(i instanceof O1&&(i=i.last()))return i}return null},B2=function(t){throw new o4(E2._default.dataFieldIndexOutOfBounds+": "+t)},I1=function(t,e,i,n,s){if(null!==e&&"function"!=typeof e)throw"Base class is not a function";var r,o,a,h,l,u,d,c,_,f,g,m=function(){arguments[0]!==C27&&(this.$inited=!1,this.init&&this.init.apply(this,arguments),this.$inited=!0)},p=m.prototype=e?new e(C27):new K7(C27);if($$clscnt++,(p.constructor=m).Base=p.$base=e?e.prototype:K7.prototype,p.$name=t,i){for(o in r={},i)(a=i[o])===E1?p[o]=void 0:"function"==typeof a?(a.$name=o,(a.$owner=p)[o]=a):r[o]=a;for(o in g=m.$attrs={},r)f=g[o]={$enum:void 0},a=r[o],h=!1,d="set"+(t=D8(l=o)),_=o+"PropChanged",c=null,p[u=o+"_"]===T9?(c=p[l]=null,delete p[u]):p.hasOwnProperty(u)?(c=p[u],delete p[u]):a&&a.get?(c=a.get,h=!0):p.hasOwnProperty(l)||(c=new Function("return this._"+o+";")),c&&c!==T9&&(c.$name=l,(c.$owner=p)[gg=l]=c),c=null,a&&a.set?(c=a.set,h=!0):p[d]===T9?c=p[d]=null:p.hasOwnProperty(d)||a&&a.hasOwnProperty("set")||(c=a instanceof h17?function(i,n,s){return function(t){var e;return n3(i.$enum,t),p[s]&&(e=p[s].call(this))!=t&&(this["_"+n]=t,this.$inited&&(this[_]?this[_].call(this,n,e,t):this.propertyChanged(n,e,t))),this}}(a,o,l):a instanceof h9?function(i,n){return function(t){var e;return t=parseInt(t),!isNaN(t)&&p[n]&&(e=p[n].call(this))!=t&&(this["_"+i]=t,this.$inited&&(this[_]?this[_].call(this,i,e,t):this.propertyChanged(i,e,t))),this}}(o,l):function(i,n){return function(t){var e;return p[n]&&(e=p[n].call(this))!=t&&(this["_"+i]=t,this.$inited&&(this[_]?this[_].call(this,i,e,t):this.propertyChanged(i,e,t))),this}}(o,l)),c&&(c.$name=d,(c.$owner=p)[ss=d]=c),a instanceof h17?(f.$enum=a.$enum,a=a.defaultValue):a instanceof h9?a=a.defaultValue:a&&a.hasOwnProperty("value")&&(a=a.value,h=!1),h?f.noinit=h:(f.field="_"+o,f.value=a),f.getter=p[l]?l:null,f.setter=p[d]?d:null}if(n)for(o in n)m[o]=n[o];return"function"==typeof s&&s.call(m,m,n),m},d87=function(t){(t=E7(t))&&(t=String(t).trim()),t&&t.lastIndexOf("/")!=t.length-1&&(t+="/"),$$_assets=t},b58=function(t,e){var i=t;return S4(t)&&(t=t.trim())&&(i=t.split(",")),V1(i)&&0<i.length?new Q28(i,e):null},Y87=function(s){var t=document.createElement("div");window.$_kji_upload=function(){var t,e,i,n=document.getElementById("dl_kji_file");length=n.files.length;try{0<length&&(t=n.files[0],(e=new FileReader).onload=function(t){s&&s(t.target.result)},e.onerror=function(t){s?s(void 0,evet):alert("File load error: "+t)},e.readAsText(t))}finally{(i=document.getElementById("dl_kji_div"))&&document.body.removeChild(i)}};try{t.id="dl_kji_div",t.innerHTML='<input id="dl_kji_file" type="file" style="display: none" onchange="$_kji_upload();">',document.body.appendChild(t),document.getElementById("dl_kji_file").click()}catch(s){document.body.removeChild(t)}},m5=function(t,e){this.key=t,this.localeKey=e,this.get=function(t){return this},this.value=function(){return X1._default[this.localeKey]||t}},$$_drawMinusBox=function(t,e,i,n){var s=x3(e.x+(e.width-i)/2),r=x3(e.y+(e.height-i)/2),o=x3(i/9),a=[s+0*o,r+0*o,s+0*o,r+9*o,s+9*o,r+9*o,s+9*o,r+0*o],h=[s+2*o,r+4*o,s+2*o,r+5*o,s+7*o,r+5*o,s+7*o,r+4*o];t.drawHoledPolygonArray(n,null,a,h)},$_getNextColumn=function(t,e){for(var i=e,n=t.visibleCount();i<n;i++){var s=t.getVisibleItem(i);if(s instanceof t2)return s;if(s instanceof O1&&(s=s.first())instanceof t2)return s}return null},D27=function(t){for(var e=t.documentElement,i=this._root=new r17(e.tagName),n=e.attributes,s=0,r=n.length;s<r;s++)i.setAttribute(n[s].name,n[s].value)},q5=function(){return{width:f2.innerWidth||u2.documentElement.clientWidth||u2.body.clientWidth,height:f2.innerHeight||u2.documentElement.clientHeight||u2.body.clientHeight}},w87=function(t){this.column=t,this.dataColumn=Q2(t,L2),this.colIndex=0,this.colSpan=0,this.rowIndex=0,this.rowSpan=0,this.width=0,this.tag=void 0,this.data=void 0},$$_drawItriangle=function(t,e,i,n){var s=e.x+(e.width-i)/2,r=e.y+(e.height-i)/2,o=i/9,a=[s+1*o,r+2*o,s+8*o,r+2*o,s+4.5*o,r+7*o];t.drawPolygonArray(n,null,a)},N87=function(t,e){return g17("round",t,e)},D0=function(){if(null==$$_mobile){var t=!1;(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))&&(t=!0),t||(e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)),$$_mobile=t}var e;return!!$$_mobile},P87=function(t){for(var e=window.dataGridEventListeners,i=e.length-1;0<=i;i--){var n=e[i];n.target===t&&(f2.removeEventListener(n.event,n.listener,n.useCapture),e.splice(i,1))}},I8=function(t,e){f2.clipboardData?f2.clipboardData.setData("Text",e):t.clipboardData.setData("text/plain",e)},Q27=function(t){I4(t)?(this.label=E7(t.label),this.width=t.hasOwnProperty("width")?t.width:1,this.paddingNear=t.hasOwnProperty("paddingNear")?t.paddingNear:0,this.paddingFar=t.hasOwnProperty("paddingFar")?t.paddingFar:0):(this.label=E7(t),this.width=1,this.paddingNear=0,this.paddingFar=0),this.index=-1},Z87=function(t,e){return new P1(t,e)},H6=function(){this.id=void 0,this.left=void 0,this.right=void 0,this.top=void 0,this.bottom=void 0},f2=$||window,u2=$&&$.document||document,w77="1.4.1.16080",$$_rootContext="",$$_assets="assets/",mK,$J;Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},s=function(){return i.apply(this instanceof n?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,s.prototype=new n,s}),String.prototype.trim||($J=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,String.prototype.trim=function(){return this.replace($J,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i;if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),s=n.length>>>0;if(0===s)return-1;var r=+e||0;if(Math.abs(r)===1/0&&(r=0),s<=r)return-1;for(i=Math.max(0<=r?r:s-Math.abs(r),0);i<s;){if(i in n&&n[i]===t)return i;i++}return-1}),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(null==this)throw new TypeError;var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var n=[],s=2<=arguments.length?arguments[1]:void 0,r=0;r<i;r++)if(r in e){var o=e[r];t.call(s,o,r,e)&&n.push(o)}return n}),mK=0,window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var i=(new Date).getTime(),n=Math.max(0,16-(i-mK)),s=window.setTimeout(function(){t(i+n)},n);return mK=i+n,s});var c2,$_language=(window.navigator.language||window.navigator.userLanguage||"").substr(0,2),$_debug=!1,$_testing=!1,$_logging=!1,$_evl=window.addEventListener,C3=window.console,V3=C3&&"function"==typeof C3.log?Function.prototype.bind.call(C3.log,C3):void 0,S3=C3,S87=864e5,E77=(new Date).getTime(),K77=new Date(E77-3*S87),Q58=(new Date).getTimezoneOffset(),N77=Object.prototype.toString,F58=Math.PI,a87=2*Math.PI,P77=180/Math.PI,Q0=Math.pow(2,53)-1,p58=-Q0,q87="",$_autoinc=0,$_temp_size={width:0,height:0},$_csvreg=/,(?=(?:[^"]*"[^"]*")*(?![^"]*"))/,$_colonreg=/;(?=(?:[^"]*"[^"]*")*(?![^"]*"))/,$_linereg=/\r\n|\r|\n/,$_currencyreg=/[^\d.\-\+]/g,$_linebrreg=/(?:\r\n|\r|\n)/g,$_linebr="<br>",$$_loc=window.location,$$_htmlreg=/[<>]/g,$$_htmlmap={"<":"&lt;",">":"&gt;"},$$_image64="data:image/png;base64,",C8="tool",o8=window.location,B4=0<=navigator.platform.toUpperCase().indexOf("MAC"),a77=!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),q3=0<=navigator.userAgent.indexOf("Firefox")||"undefined"!=typeof InstallTrigger,o3=!!window.chrome&&!a77,l27=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString()||!o3&&!a77&&void 0!==window.webkitAudioContext,d4=!!document.documentMode||/Edge/i.test(navigator.userAgent),e8=function(){for(var t=3,e=document.createElement("div"),i=e.getElementsByTagName("i");e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",i[0];);return 4<t?t:void 0}(),c4=void 0!==e8&&e8<=9,D5=void 0!==e8&&e8<=8,w4=!1,G6=-1!==navigator.appVersion.indexOf("MSIE 10"),f5=window,V2=document,I7=g6,q77=g6,x8=g6,v77=x8,L8=y0,O4=f5.devicePixelRatio||(f5.matchMedia&&f5.matchMedia("(min-resolution: 2dppx),(-webkit-min-device-pixel-ratio: 1.5),(-moz-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5)").matches?2:1)||1;O4=isNaN(O4)?1:Math.max(1,Math.floor(O4));var n58=(vK=!1,function(t){vK||(vK=!0,alert(t))}),F0=q4,s87=a0,f87=I4,l58=b4,I58=p4,V1="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===N77.call(t)},e3=V1,C58=j0,o58=c0,$$_week_days=["","","","","","",""],$$_month_days=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]],x58=Q8,I27=i0,u87=/^\s+/,g87=/\s+$/,B77=/(\s+)(.*)(\s+)$/,r87=/\s+/g,B1=Math.floor,Y1=Math.floor,x3=Math.round,h87=Math.ceil,T77=Math.abs,M6=Array.prototype.slice,q0=h6("DataLudi.AbortError"),vK;R5.prototype=new Error,R5.prototype.constructor=R5;var E1={data:"ludi"},L3=new h9(0),C27={};K7.$_hash=0,K7.isProperty=function(t,e){for(var i,n=t;n;){if((i=n.$attrs)&&e in i)return!0;n=n.prototype.$base&&n.prototype.$base.constructor}return!1},K7.getPropertyNames=function(t){for(var e,i,n=[],s=t;s;){if(e=s.$attrs)for(i in e)n.indexOf(i)<0&&n.push(i);s=s.prototype.$base&&s.prototype.$base.constructor}return n},K7.getPropertyDefaults=function(t){for(var e,i,n,s={},r=t;r;){if(e=r.$attrs)for(i in e)s.hasOwnProperty(i)||(n=e[i],s[i]=n.value);r=r.prototype.$base&&r.prototype.$base.constructor}return s},$_getAllAttrs=function(t){var e,i,n,s=t.$attrs2={};if(t.Base)for(i in n=(e=t.Base.constructor).$attrs2||$_getAllAttrs(e))s[i]=n[i];for(i in n=t.$attrs)s[i]=n[i];return s};var $$clscnt=0,$$_locproto=window.location.protocol,C4=K7.prototype;C4.constructor=K7,C4.init=function(t){!t&&(this.$_hash=String(++K7.$_hash));var e,i,n=this.constructor.$attrs2||$_getAllAttrs(this.constructor);for(e in n)(i=n[e]).noinit||(v=i.value,"function"==typeof v&&(v=v.call(this)),this[i.field]=v)},C4._super=function(){var t,e=this._super.caller;if(e){if(t=e.$owner.$base[e.$name])return t.apply(this,arguments)}else O87()},C4._callbase=function(t){this.constructor.prototype.$base[t].apply(this,M6.call(arguments,1))},C4.className=function(){return this.constructor.prototype.$name},C4.baseClass=function(){return this.constructor.prototype.$base},C4.baseClassName=function(){var t=this.constructor.prototype.$base;return t&&t.$name},C4.clone=function(t){var e,i,n=this.constructor,s=new n(t),r=n.$attrs2;for(i in r)s[(e=r[i]).field]=this[e.field];return s},C4.assign=function(t){if(t===this)return this;var e,i,n,s,r,o,a=this.constructor.$attrs2;if(t instanceof K7)for(i in e=t.constructor.$attrs2)(n=a[i])&&(r=n.setter)&&(attr=e[i],(s=attr.getter)&&(o=t[s].call(t),this[r].call(this,o)));else if(I4(t))for(i in t)(n=a[i])&&(r=n.setter)&&this[r].call(this,t[i]);else this.assignSimple(t);return this},C4.assignSimple=function(t){},C4.assignProps=function(t,e){var i,n,s,r,o,a,h,l,u,d;if(t&&t!==this&&e)if(i=this.constructor.$attrs2,t instanceof K7)for(n=t.constructor.$attrs2,s=0,r=e.length;s<r;s++)(h=n[o=e[s]])&&(u=h.getter)&&(a=i[o])&&(l=a.setter)&&(d=t[u].call(t),this[l].call(this,d));else for(s=0,r=e.length;s<r;s++)o=e[s],t.hasOwnProperty(o)&&(a=i[o])&&(l=a.setter)&&this[l].call(this,t[o])},C4.propertyChanged=function(t,e,i){},C4.getAttribute=function(t,e){if(t){var i,n,s,r=t.split("."),o=this,a=null;for(n=0,s=r.length;n<s&&(i=r[n],a=o.constructor.$attrs2[i]);n++)n<s-1&&(o=o[a.getter]());return{target:o,prop:i,attr:a}}},C4.getProperty=function(t,e){if(t){var i,n,s,r,o=t.split("."),a=this,h=null;for(i=0,n=o.length;i<n&&(s=o[i],h=a.constructor.$attrs2[s]);i++)i<n-1&&(a=a[h.getter]());if(h&&h.getter)return r=a[h.getter](),e&&r&&r.proxy?r.proxy():r}},C4.getProperties=function(t,e){if(t&&0<t.length){var i,n,s,r={};for(i=0,n=t.length;i<n;i++)r[s=t[i]]=this.getProperty(s,e);return t}return null},C4.setProperty=function(t,e,i){if(t){var n,s,r,o=t.split("."),a=this;for(attr=null,n=0,s=o.length;n<s&&(r=o[n],attr=a.constructor.$attrs2[r],attr);n++)n<s-1&&(a=a[attr.getter]());if(attr&&attr.setter)a[attr.setter](e);else if(i)throw"Invalid property: "+t}return this},C4.setProperties=function(t,e){var i,n,s;if(V1(t))for(i=0,n=t.length;i<n;i+=2)this.setProperty(t[i],t[i+1],e);else if(t)for(s in t)this.setProperty(s,t[s],e);return this},C4.toggle=function(t){return this.setProperty(t,!this.getProperty(t))},C4._initProps=function(t){var e,i;if(t)for(e in t)i="_"+e,this.hasOwnProperty(i)&&(this[i]=t[e])},C4.proxy=function(){var t,e,i,n=this.constructor.$attrs2,s={};for(t in n)(e=n[t]).getter&&e.setter&&((i=this[e.getter]())&&i.noProxy||(i&&(i=$$_getProxy(i)),s[t]=i));return s},C4.as=function(t){return this instanceof t?this:null};var a2=I1(null,null,{init:function(t){this._super(t),this._listeners=[]},findListener:function(t){for(var e=this._listeners,i=e.length;i--;)if(t(e[i]))return e[i];return null},addListener:function(t){return t&&this._listeners.indexOf(t)<0&&this._listeners.push(t),this},removeListener:function(t){var e;return t&&0<=(e=this._listeners.indexOf(t))&&this._listeners.splice(e,1),this},containsListener:function(t){return 0<=this._listeners.indexOf(t)},fireEvent:function(t){var e,i,n,s,r=M6.call(arguments,0),o=this._listeners;for(r[0]=this,e=0,i=o.length;e<i;e++)(s=(n=o[e])[t])&&s.apply(n,r)},fireConfirmEvent:function(t){var e,i,n,s,r,o=M6.call(arguments,0);for(i=(o[e=0]=this)._listeners.length;e<i;e++)if((s=(n=this._listeners[e])[t])&&"boolean"==typeof(r=s.apply(n,o))&&!r)return!1;return!0},fireMessageEvent:function(t){var e,i,n,s,r,o=M6.call(arguments,0);for(i=(o[e=0]=this)._listeners.length;e<i;e++)if((s=(n=this._listeners[e])[t])&&"string"==typeof(r=s.apply(n,o))&&r)return r;return null}}),L58=a2.prototype;X1.$_callbacks=[],X1.addCallback=function(t){var e=X1.$_callbacks;"function"==typeof t&&e.indexOf(t)<0&&(e.push(t),t(X1._currLang))},X1.$_runCallbacks=function(){for(var t=X1.$_callbacks,e=t.length;e--;)t[e](X1._currLang)},X1.getLocale=function(t){return X1[t]||X1.en},X1.setLanguage=function(t){(t=t||$_lanugage||"en")!=X1._currLang&&(X1._currLang=t,X1._default=X1.getLocale(t),X1.$_runCallbacks())},X1.setLocale=function(t,e){t&&I4(e)&&(X1[t]=R4(new X1(t),e),X1[t]===X1._default&&X1.$_runCallbacks())},X1.en=R4(new X1("en"),{}),X1.ko=X1.kr=R4(new X1("ko"),{year:"",months:["1","2","3","4","5","6","7","8","9","10","11","12"],shortMonths:["1","2","3","4","5","6","7","8","9","10","11","12"],weekDays:["","","","","","",""],shortWeekDays:["","","","","","",""],thousandSep:",",decimalSep:".",dateSep:"/",timeSep:":",am:"",pm:"",halfs:["",""],quarters:["1","2","3","4"],dateFormat:"yyyy-MM-dd HH:mm:ss",shortDateFormat:"yyyy-MM-dd",minuteFormat:"yyyy-MM-dd HH:mm",hourFormat:"yyyy-MM-dd HH",monthFormat:"yyyy-MM",yearFormat:"yyyy",untermintatedExpression:"  ",invalidToken:" token ",untermintatedString:"  ",unknownOperator:"   ",notExpectedTokenKind:"   ",invalidIsOperand:"is   defined, null, empty   ",unknownToken:"   ",invalidIdentifierToken:"  ",invalidIdentifierKey:"  ",invalidIdentifierIndexer:"  ",invalidDateTimeFormat:"  ",invalidDateTimeText:"  ",invalidDateTimeOutputFormat:"   ",invalidDateTimeFormat2:"   - 'H' 'a'    ",invalidDateTimeFormat3:"   - 'h'  'a'   ",invalidDateTimeInputFormat:"   ",invalidColorText:" color ",invalidLinearGradientText:" linear gradient ",invalidRadialGradientText:" radial gradient ",valueIsRequired:"  ",notImplemeted:"  "}),X1._default=X1.getLocale($_language),X1._currLang=$_language;var z4=A2("SummaryMode",{NONE:"none",AGGREGATE:"aggregate",STATISTICAL:"statistical"}),Z4=A2("DateTimeScale",{SECOND:-3,MINUTE:-2,HOUR:-1,DATE:1,WEEK:2,MONTH:3,QUARTER:4,HALF:5,YEAR:6}),H8=A2("TextCase",{NORMAL:"normal",UPPER:"upper",LOWER:"lower"});x6.prototype={constructor:x6,containsKey:function(t){return t&&this._values.hasOwnProperty(t.$_hash)},isEmpty:function(){for(var t in this._values)return!1;return!0},set:function(t,e){if(!t||!t.$_hash)throw"Invalid key";return this._values[t.$_hash]=e,this._keys[t.$_hash]=t,this},unset:function(t){return!(!t||!this._values.hasOwnProperty(t.$_hash)||(delete this._values[t.$_hash],delete this._keys[t.$_hash],0))},clear:function(){return this._values={},this._keys={},this},get:function(t){return t?this._values[t.$_hash]:void 0},keys:function(){var t=[];for(var e in this._values)t.push(this._keys[e]);return t},values:function(){var t=[];for(var e in this._values)t.push(this._values[e]);return t},each:function(t){if(b4(t))for(var e in this._values)t(this._keys[e],this._values[e])},checkTrue:function(t){if(b4(t)){for(var e in this._values)if(t(this._keys[e],this._values[e]))return!0;return!1}},checkFalse:function(t){if(b4(t)){for(var e in this._values)if(!t(null,this._keys[e],this._values[e]))return!0;return!1}}};var $$_mobile=void 0,$$_DEF_NUM_SYMBOLS=["K","M","G","T","P","E","Z","Y"],$$_NULL_NUM_SYMBOLS=["","","","","","","",""],m18=I1("NumberScales",null,{init:function(t){this._super(),this._symbols=$$_DEF_NUM_SYMBOLS,this.$_symbols=void 0,this.setSymbols(t)},setSymbols:function(t){var e,i;if(t!==this.$_symbols)if(this.$_symbols=t,this._symbols=[],null!==t)for(S4(t)?b5(i=t,"default",!0)?this._symbols=$$_DEF_NUM_SYMBOLS:i&&(this._symbols=i.split(",")):V1(t)&&(this._symbols=t.slice()),e=this._symbols.length;e<$$_DEF_NUM_SYMBOLS.length;e++)this._symbols.push($$_DEF_NUM_SYMBOLS[e]);else this._symbols=$$_NULL_NUM_SYMBOLS;return this},getScaledText:function(t,e,i){var n=Y1(Math.log(Math.abs(t))*Math.LOG10E);return e<=n?(n=B1(n/e),t/=Math.pow(10,n*e),i&&(t=i.format(t)),t+this._symbols[n-1]):String(t)},getText:function(t,e){return this.getScaledText(t,3,e)}},null,function(t){t.Default=new t(3)});i3.prototype=new Error,i3.prototype.constructor=i3,F8.prototype=new Error,F8.prototype.constructor=F8;var g5=I1("EditCommand",null,{init:function(){this._super()},undo:function(t){},postUndo:function(t){},redo:function(t,e){},postRedo:function(t){},execute:function(t){return this.redo(!1,t)},postRun:function(t){},rollbackUndo:function(){},rollbackRedo:function(){},dispose:function(){},set:function(t,e){t&&(this.$_user=this.$_user||{},this.$_user[t]=e)},get:function(t){return this.$_user&&this.$_user[t]},unset:function(t){this.$_user&&delete this.$_user[t]},_setReady:function(){this.ready=!0},throwEmpty:function(t){if(this.undoable)throw new i3(this,t);return t},throwPaused:function(t,e){throw new CommandPausedError(this,t,e)}}),Q5=I1("EditCommandGroup",g5,{init:function(t){this._super(),this._items=[]},count:function(){return this._items.length},add:function(t){if(t){var e,i,n=t instanceof Q5?t.$_collectItems():[t],s=n.length;for(e=0;e<s;e++)if(i=n[e],this._immediately){var r={};try{i.execute(r),this._setReady(),i.postRun(r),this._items.push(i)}catch(t){if(t instanceof i3)return t.ret;if(!i.ready)throw err}}else this._items.push(i)}return this},dispose:function(){for(var t=this._items.length;t--;)this._items[t].dispose()},undo:function(){var t,e,i,n=this._items.length;this._completed=!1;try{for(t=n;t--;)i=!1,e={},this._items[t].undo(e),i=!0,this._items[t].postUndo(e);this._completed=!0}catch(e){throw i&&(this._completed=!0,this._all=0==t,this._all||this.$_shrink(t+1)),e}},redo:function(t){var e,i,n,s=this._items.length;this._completed=!1;try{for(e=0;e<s;e++)n=!1,i={},this._items[e].redo(t,i),n=!0,this._items[e].postRedo(i);this._completed=!0}catch(t){throw n&&(this._completed=!0,this._all,this._all||this.$_shrink(e+1)),t}},execute:function(){var t,e,i,n,s,r,o=0,a=[];this._completed=!1;try{for(t=0,e=this._items.length;t<e;t++){i=this._items[t],r=!1,s={};try{i.execute(s),r=!0,i.postRun(s),o++}catch(e){if(!(e instanceof i3))throw i.ready?r&&(this.$_shrink(t+1),this._completed=!0):(this.$_shrink(t),this._completed=0<o),e;a.push(t)}finally{i.ready&&this._setReady()}}this._completed=!0}finally{for(n=a.length;n--;)t=a[n],this._items[t].dispose(),this._items.splice(t,1)}if(o<1)throw new i3(0)},$_collectItems:function(){return function t(e,i){var n,s,r=e._items,o=r.length;for(n=0;n<o;n++)(s=r[n])instanceof Q5?t(e,i):i.push(s);return i}(this,[])},$_shrink:function(t){0<=t&&t<this._items.length&&this._items.splice(t,this._items.length)}}),s77=I1("EditCommandStack",null,{init:function(t){this._super(),this._owner=t,this._commands=[],this._current=-1,this._status=0},length:function(){return this._commands.length},undoing:function(){return 2==this._status},redoing:function(){return 3==this._status},canUndo:function(){return this._status<=0&&0<=this._current},canRedo:function(){return this._status<=0&&this._commands.length>this._current+1},undo:function(){if(0<this._status)throw new CommandLockError;if(this.canUndo()){var t,e={},i=this._commands[this._current];this._status=this._owner._onStack=2;try{try{i.undo(e)}catch(e){if(i.rollbackUndo())throw e.source||e;if(!(i instanceof Q5&&i._completed))throw this._shrink(this._current),e.source||e;if(!i._all)throw this._shrink(this._current+1),this._current++,e.source||e;t=e}if(t)throw t.source||t;i.postUndo(e)}finally{this._current=Math.max(this._current-1,-1),this._status=this._owner._onStack=0,this._stateChanged()}}return this},redo:function(){if(0<this._status)throw new CommandLockError;if(this.canRedo()){var t,e={},i=this._current+1,n=this._commands[i];this._status=this._owner._onStack=3;try{try{n.redo(!0,e)}catch(e){if(n.rollbackRedo())throw e.source||e;if(!(n instanceof Q5&&n._completed))throw this._shrink(i),i=Math.max(-1,i-1),e.source||e;if(!n._all)throw this._shrink(this._current+2),e.source||e;t=e}if(t)throw t.source||t;n.postRedo(e)}finally{this._current=i,this._status=this._owner._onStack=0,this._stateChanged()}}return this},execute:function(t){if(t instanceof g5){if(1<this._status)throw new F8;if(1==this._status)return;var e,i,n={};this._status=1,t.ready=!1;try{e=t.execute(n)}catch(e){if(e instanceof i3)return e.ret;if(!t.ready)throw e;if(!(t instanceof Q5&&t._completed))throw this._shrink(this._current),e.source||e;i=e}finally{this._status=0}this._commands[++this._current]=t,this._shrink(this._current+1);try{if(i)throw i.source||i;t.postRun(n)}finally{this._stateChanged()}return e}},flush:function(){var t=this._commands.length;if(0<t){for(;t--;)this._commands[t].dispose();this._commands=[],this._current=-1,this._stateChanged()}},_currCmd:function(){return this._commands[this._current]},_stateChanged:function(){this._owner&&this._owner.onEditCommandStackChanged(this,this.canUndo(),this.canRedo())},_shrink:function(t){if(0<=t&&t<this._commands.length){for(i=this._commands.length-1;i>=t;i--)this._commands[i].dispose();this._commands.length=t,this._stateChanged()}}}),W8=r17.prototype;Object.defineProperty(W8,"textContent",{get:function(){return this._value},set:function(t){this._value=t}}),W8.appendChild=function(t){this._nodes=this._nodes||[],this._nodes.push(t)},W8.setAttribute=function(t,e){this._attrs=this._attrs||{},this._attrs[t]=e},W8.serialize=function(){var t,e,i,n,s=this._attrs,r=this._nodes,o="<"+this._tag;if(s)for(t in s)o+=" "+t+'="'+(e=s[t])+'"';if(o+=">",r)for(i=0,n=r.length;i<n;i++)o+=r[i].serialize();return void 0!==(e=this._value)&&(o+="string"==typeof e&&e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e),o+"</"+this._tag+">"};var o27=D27.prototype;Object.defineProperty(o27,"documentElement",{get:function(){return this._root}}),Object.defineProperty(o27,"xml",{get:function(){return this._root.serialize()}}),o27.createElement=function(t){return new r17(t)};var $$$_TF_DUMMY_PATTERN=/(.*)/,$$$_TF_DUMMY_FORMAT="$1",f77=I1("TextFormatter",null,{init:function(t){this._super(),this.$_parse(t)},format:function(t){return t&&t.replace(this._pattern,this._format)},$_parse:function(t){if(t){var e=t.trim().split($_colonreg);if(1<e.length){var i=e[0].trim(),n=e[1].trim();if(i&&n&&('"'==i.charAt(0)&&(i=i.substr(1,i.length-2)),i&&('"'==n.charAt(0)&&(n=i.substr(1,n.length-2)),n)))return this._pattern=new RegExp(i,e[2]||""),void(this._format=n)}}this._pattern=$$$_TF_DUMMY_PATTERN,this._format=$$$_TF_DUMMY_FORMAT}}),$$$_SEP="$&,",$$$_MAX_PRECISION=14,$$$_MAX_DIGITS=14,W7=I1("DecimalFormatter",null,{init:function(t){this._super(),this._minDigits=0,this._maxDigits=0,this._trim=!1,this._minInts=0,this._maxInts=0,this._groupPos=0,this._reg=null,this._parse(t),0<this._maxDigits&&0<$$$_MAX_PRECISION?this._format=W7.prototype.format:this.format=W7.prototype.formatInt},format:function(t){var e,i,n=Number(t);if(isNaN(n))return"";if(0<$$$_MAX_PRECISION&&(n=parseFloat(n.toPrecision($$$_MAX_PRECISION))),e=this._reg?n.toFixed(this._maxDigits).replace(this._reg,$$$_SEP):n.toFixed(this._maxDigits),this._trim)for(i=e.length-1;0<=i;i--)if("0"!=e.charAt(i)){e=e.substring(0,i+1);break}return e},formatInt:function(t){var e=Number(t);return isNaN(e)?"":this._reg?e.toFixed(0).replace(this._reg,$$$_SEP):e.toFixed(0)},_parse:function(t){if(t&&(t=t.trim()),t){var e,i,n,s=t.length,r=t.indexOf(".");if(0<=r){for(e=r+1;e<s&&"0"==t.charAt(e);e++)this._minDigits++,this._maxDigits++;for(;e<s&&"#"==t.charAt(e);e++)this._maxDigits++;0<$$$_MAX_DIGITS&&(this._maxDigits=Math.min($$$_MAX_DIGITS,this._maxDigits)),t=t.substr(0,r)}if(t&&(s=t.length,","==t.charAt(s-1)&&(this._groupPos=3,t=t.substr(0,s-1))),t)for(n=!0,e=(s=t.length)-1;0<=e;e--)if("0"==(i=t.charAt(e))&&n)this._minInts++,this._maxInts++;else if(0==this._groupPos&&","==i)this._groupPos=s-e-1;else{if("#"!=i)break;n=!1}0<this._groupPos?this._reg=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+"+(0<this._maxDigits?"\\.":"$")+")","g"):this._reg=null,this._trim=this._maxDigits>this._minDigits}}});$$_DecimalFormatter_cache={},W7.clean=function(){$$_DecimalFormatter_cache={}},W7.getFormatter=function(t){if(t){var e=$$_DecimalFormatter_cache[t];return e||($$_DecimalFormatter_cache[t]=e=new W7(t)),e}return null},W7.formatNumber=function(t,e){try{if(t)return W7.getFormatter(t).format(e)}catch(t){}return String(e)};var v3=I1("BooleanFormatter",null,{init:function(t){this._super(),this._format=t,this._nullText="",this._trueText="true",this._falseText="false",this._parse()},format:null,setFormat:function(t){t!=this._format&&(this._format=t,this._parse())},formatValue:function(t){return void 0===t?this._nullText:t?this._trueText:this._falseText},_parse:function(){if(this._falseText=this._trueText=null,this._format){var t=this._format.split(/[;\:]/);this._falseText=t[0],0<t.length&&(this._trueText=t[1]),1<t.length&&(this._nullText=t[2])}}});$$_BooleanFormatter_cache={},v3.getFormatter=function(t){if(t){var e=$$_BooleanFormatter_cache[t];return e||($$_BooleanFormatter_cache[t]=e=new v3(t)),e}return null},l7.$_DefaultFormat="false,f,0:true,t,1:0",l7.Default=new l7(l7.$_DefaultFormat),$$_BooleanConverter_cache={},$$_BooleanConverter_cache[l7.$_DefaultFormat]=l7.Default,l7.getConverter=function(t){if(t){var e=$$_BooleanConverter_cache[t];return e||($$_BooleanConverter_cache[t]=e=new l7(t)),e}return null};var g77="./-: ",F18=I1("DateTimeParser",null,{init:function(t){this._super(),this._baseYear=0,this._patterns=[],this.setFormat(t)},format:null,baseYear:2e3,zoneDelta:0,amText:null,pmText:null,setFormat:function(t){t!=this._format&&(t||this.$_throwInvalidFormat(""),this.$_parseFormat(t),this._format=t)},setBaseYear:function(t){isNaN(t)&&(t=2e3),t!=this._baseYear&&(this._baseYear=t)},setAmText:function(t){t!=this._amText&&(this._amText=t)},setPmText:function(t){t!=this._pmText&&(this._pmText=t)},parse:function(t){try{var e,i=0,n=1,s=1,r=0,o=0,a=0,h=0,l=0,u=0,d=this._patterns.length,c=0,_=t.length;for(e=0;e<d&&c<_;e++){var f=this._patterns[e],g=f.c,m=f.len;switch(g){case"y":i=Y1(t.substr(c,m));break;case"M":n=Y1(t.substr(c,m));break;case"d":s=Y1(t.substr(c,m));break;case"a":var p;if((p=this._amText||X1._default.am)&&t.indexOf(p,c)==c)l=12,m=p.length;else{if(!(p=this._pmText||Local._default.pm)||t.indexOf(p,c)!=c)return null;u=12,m=p.length}break;case"H":case"h":r=Y1(t.substr(c,m));break;case"m":o=Y1(t.substr(c,m));break;case"s":a=Y1(t.substr(c,m));break;case"S":h=Y1(t.substr(c,m));break;case".":case"/":case"-":case":":case" ":if(g77.indexOf(t.charAt(c))<0)return null;break;default:return null}c+=m}}catch(t){return null}return i<100&&(i+=this._baseYear),0<l?12==r&&(r=0):0<u&&r<12&&(r+=12),new Date(i,n-1,s,r,o+this._zoneDelta,a,h)},$_parseFormat:function(t){var e,i,n,s=t,r=s.length,o=0;for(this._patterns=[];o<r;)if(e=o,Z3(i=s.charAt(o))){for(o++;o<r&&Z3(s.charAt(o));)o++;this._patterns.push({c:" ",p:e,len:o-e})}else{switch(n=0,i){case"y":4!=(n=this.$_getPattern(s,o,i))&&2!=n&&this.$_throwInvalidFormat(s);break;case"M":case"d":case"H":case"h":case"m":case"s":2!=(n=this.$_getPattern(s,o,i))&&this.$_throwInvalidFormat(s);break;case"S":3!=(n=this.$_getPattern(s,o,i))&&this.$_throwInvalidFormat(s);break;case"a":case".":case"/":case"-":case":":1!=(n=this.$_getPattern(s,o,i))&&this.$_throwInvalidFormat(s);break;default:this.$_throwInvalidFormat(s)}0<n&&(this._patterns.push({c:i,p:o,len:n}),o+=n)}},$_throwInvalidFormat:function(t){throw new Error(X1._default.invalidDateTimeFormat+": "+t)},$_getPattern:function(t,e,i){for(var n=t.length,s=1;++e<n&&t.charAt(e)==i;)s++;return s}}),$$_DT_DATE_TOKENS=["yy","yyyy","M","MM","MMM","MMMM","d","dd","ddd","dddd","a","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","tt","TT","'",'"'],$$_DT_DATE_SEPARATORS=[".","/","-",":"],H58="0".charCodeAt(0),G58="9".charCodeAt(0),n18="Z".charCodeAt(0),l18="z".charCodeAt(0),r77="A".charCodeAt(0),h77="a".charCodeAt(0),M58="Y".charCodeAt(0),I18="y".charCodeAt(0),C18="M".charCodeAt(0),o18="m".charCodeAt(0),W58="D".charCodeAt(0),e18="d".charCodeAt(0),x18="H".charCodeAt(0),L18="h".charCodeAt(0),H18="S".charCodeAt(0),G18="s".charCodeAt(0),M18="t".charCodeAt(0),W18="T".charCodeAt(0),J18="'".charCodeAt(0);X1.addCallback(function(t){var e=M7;e.$_DefaultFormat=X1._default.shortDateFormat,e.Default=new e(e.$_DefaultFormat),e.Month=new e(X1._default.monthFormat),e.Year=new e(X1._default.yearFormat),e.Second=new e(X1._default.secondFormat),e.Minute=new e(X1._default.minuteFormat),e.Hour=new e(X1._default.minuteFormat),e.Writers={},e.Writers[Z4.YEAR]=e.Year,e.Writers[Z4.HALF]=e.Month,e.Writers[Z4.QUARTER]=e.Month,e.Writers[Z4.MONTH]=e.Month,e.Writers[Z4.WEEK]=e.Default,e.Writers[Z4.DATE]=e.Default,e.Writers[Z4.HOUR]=e.Hour,e.Writers[Z4.MINUTE]=e.Minute,e.Writers[Z4.SECOND]=e.Second}),$$_DateTimeWriter_cache={},$$_DateTimeWriter_cache[M7.$_DefaultFormat]=M7.Default,M7.getWriter=function(t){if("string"!=typeof t)return null;var e=$$_DateTimeWriter_cache,i=e[t];return i||(e[t]=i=new M7(t)),i};var $$_DATE_TOKENS=["yy","yyyy","M","MM","d","dd","a","A","H","HH","h","hh","m","mm","s","ss"],$$_DATE_SEPARATORS=[".","/","-",":"],$$_ZERO_CHAR="0".charCodeAt(0),$$_NINE_CHAR="9".charCodeAt(0);z3.$_DefaultFormat="yyyy/MM/dd",z3.Default=new z3(z3.$_DefaultFormat);var $$_zoneOffset=60*(new Date).getTimezoneOffset()*1e3;p77.parse=function(t,e){var i=null;try{var n,s,r,o,a=t.indexOf("T"),h=t.substring(0,a),l=t.substring(a+1),u=h.split("-"),d=u.length,c=Y1(u[0]),_=1<d?Y1(u[1]):1,f=2<d?Y1(u[2]):1;-1!=l.indexOf("Z")?(n=1,r=s=0,l=l.replace("Z","")):-1!=l.indexOf("+")?(n=1,o=l.substring(l.indexOf("+")+1,l.length),s=Number(o.substring(0,o.indexOf(":"))),r=Number(o.substring(o.indexOf(":")+1,o.length)),l=l.substring(0,l.indexOf("+"))):-1!=l.indexOf("-")?(n=-1,o=l.substring(l.indexOf("-")+1,l.length),s=Number(o.substring(0,o.indexOf(":"))),r=Number(o.substring(o.indexOf(":")+1,o.length)),l=l.substring(0,l.indexOf("-"))):n=0;var g=l.split(":"),m=0<(d=g?g.length:0)?Y1(g[0]):0,p=1<d?Y1(g[1]):0,w=2<d?String(g[2]).split("."):null,v=w&&0<w.length?Y1(w[0]):0,C=w&&1<w.length?1e3*parseFloat("0."+w[1]):0,I=Date.UTC(c,_-1,f,m,p,v,C);if(i=new Date(I-(n?(36e5*s+6e4*r)*n:-$$_zoneOffset)),e&&isNaN(i.getTime()))throw new Error(X1._default.invalidDateTimeText+": "+t)}catch(i){if(e){var R=X1._default.invalidDateTimeText+": "+t;throw 0!=i.toString().indexOf(X1._default.invalidDateTimeText)&&(R+="\nError: "+i.toString()),new Error(R)}}return i};var e27=h6("DataLudi.ExpressionSyntaxError","tokenPos"),o4=h6("DataLudi.ExpressionEvaluationError"),k1={Unknown:0,Add:1,Slash:2,Star:3,Minus:4,Plus:5,Identifier:10,And:11,Not:13,Div:14,Mod:15,Shl:16,Shr:17,Or:18,ToStr:20,ToNum:21,ToDate:22,ToBool:23,Length:24,Is:26,IsNot:27,BraceClose:30,BraceOpen:31,Comma:32,CRLF:33,Null:34,Defined:35,Empty:36,NaN:37,True:38,False:39,Equal:40,Greater:41,GreaterEqual:42,Lower:43,LowerEqual:44,NotEqual:45,Like:46,NotLike:47,ILike:48,NotILike:49,Match:50,NotMatch:51,IMatch:52,NotIMatch:53,In:54,NotIn:55,Rand:56,Srand:57,ToUpper:58,ToLower:59,String:60,StringLiteral:61,Ascii:62,FloatLiteral:63,IntegerLiteral:64,Point:65,RoundOpen:66,RoundClose:67,DotDot:68,BracketOpen:69,BracketClose:70,Space:71,ToInt:72,ToNumz:73,ToIntz:74,Symbol:80};k1.IS_CHECK=$$_createTokenArray(k1.Is,k1.IsNot),k1.IS_SET=$$_createTokenArray(k1.In,k1.NotIn),k1.IS_COMPARISON=$$_createTokenArray(k1.Equal,k1.NotEqual,k1.Like,k1.NotLike,k1.ILike,k1.NotILike,k1.Match,k1.NotMatch,k1.IMatch,k1.NotIMatch,k1.Greater,k1.GreaterEqual,k1.Lower,k1.LowerEqual),k1.IS_LOGICAL=$$_createTokenArray(k1.And,k1.Or),k1.IS_ADDITIVE=$$_createTokenArray(k1.Minus,k1.Plus),k1.IS_MULTIPLICATIVE=$$_createTokenArray(k1.Star,k1.Slash,k1.Div,k1.Mod,k1.Shl,k1.Shr);var J7=I1("ExpressionNode",null,{init:function(){this._super()},_asLiteral:function(){return null},evaluate:function(){y4()},toString:function(){return String(this)}}),y8=I1("EmptyExpressionNode",J7,{init:function(){this._super()},_asLiteral:function(){return null},evaluate:function(){},toString:function(){return""}},null,function(t){t.Default=new t}),h5=I1("DefinedNode",J7,{init:function(){this._super()}}),m07=I1("DefinedNode",h5,{init:function(){this._super()},value:function(){return c2},_asLiteral:function(){return this},evaluate:function(t){return c2},toString:function(){return"defined"}}),D07=I1("EmptyNode",h5,{init:function(){this._super()},value:function(){return c2},_asLiteral:function(){return this},evaluate:function(t){return c2},toString:function(){return"empty"}}),Q07=I1("NullNode",h5,{init:function(){this._super()},value:function(){return null},_asLiteral:function(){return this},evaluate:function(t){return null},toString:function(){return"null"}}),F07=I1("NanNode",h5,{init:function(){this._super()},value:function(){return NaN},_asLiteral:function(){return this},evaluate:function(t){return NaN},toString:function(){return"NaN"}}),s7=I1("CheckNode",J7,{init:function(t,e,i){this._super(),this.leftExpr=t,this.operator=e,this._isNot=e==k1.IsNot,this._value=-1,i instanceof m07?this._value=s7.DEFINED:i instanceof Q07?this._value=s7.NULL:i instanceof D07?this._value=s7.EMPTY:i instanceof F07&&(this._value=s7.NAN)},isIdentifier:function(t){return this.leftExpr.isIdentifier(t)},_prepareValue:function(){this.leftExpr._prepareValue(),this._literal=this.leftExpr._getLiteral()},_getLiteral:function(){return null},evaluate:function(t){var e,i=this._literal?this._literal.value():this.leftExpr.evaluate(t);switch(this._value){case s7.DEFINED:e=void 0!==i;break;case s7.NULL:e=null==i;break;case s7.EMPTY:e=null==i||0==String(i).length;break;case s7.NAN:e=null===i||isNaN(i);break;default:return}return this._isNot?!e:e},toString:function(){var t="<<ERROR>>";switch(this._value){case s7.DEFINED:t="defined";break;case s7.NULL:t="null";break;case s7.EMPTY:t="empty";break;case s7.NAN:t="NaN"}return"("+(this._isNot?"is not ":"is ")+t+")"}},{DEFINED:0,NULL:1,EMPTY:2,NAN:3}),O18=I1("FloatLiteralNode",J7,{init:function(t){this._super(),this._value=Number(t)},value:function(){return this._value},_asLiteral:function(){return this},evaluate:function(t){return this._value},toString:function(){return String(this._value)}}),j18=I1("IntegerLiteralNode",J7,{init:function(t){this._super(),this._value=parseInt(t)},value:function(){return this._value},_asLiteral:function(){return this},evaluate:function(t){return this._value},toString:function(){return String(this._value)}}),k18=I1("BooleanLiteralNode",J7,{init:function(t){this._super(),this._value="true"==t},value:function(){return this._value},_asLiteral:function(){return this},evaluate:function(t){return this._value},toString:function(){return String(this._value)}}),U18=I1("StringLiteralNode",J7,{init:function(t){this._super(),this._value=t.substr(1,t.length-2)},value:function(){return this._value},_asLiteral:function(){return this},evaluate:function(t){return this._value},toString:function(){return this._value}}),p07=I1("IdentifierNode",J7,{init:function(t){this._super(),this._literal=t,this._idKey=-830710},identifier:function(){return this._literal},evaluate:function(t){return-830710==this._idKey&&(this._idKey=t.isIdentifier(this._literal)),t.evaluateIdentifier(this._idKey)},toString:function(){return this._literal}}),d18=I1("IndexerNode",J7,{init:function(t,e){this._super(),this._ident=t,this._indexer=e,this._idKey=-1490313,this._intIndex=NaN,this._strIndex=null},_prepareValue:function(){var t=null,e=this._indexer._asLiteral();if(e||(t=this._indexer._prepareValue&&this._indexer)&&(t._prepareValue(),e=t._getLiteral()),e){var i=e.value();"string"==typeof i?this._strIndex=i:this._intIndex=parseInt(i)}},_getLiteral:function(){return null},evaluate:function(t){if(-1490313==this._idKey&&(this._idKey=t.isIdentifier(this._ident)),this._strIndex)return t.evaluateIndexerS(this._idKey,this._strIndex);if(isNaN(this._intIndex)){var e=this._indexer.evaluate(t);return"string"==typeof e?t.evaluateIndexerS(this._idKey,e):t.evaluateIndexerI(this._idKey,e)}return t.evaluateIndexerI(this._idKey,this._intIndex)},toString:function(){return this._ident+"["+this._indexer.toString()+"]"}}),f7=I1("UnaryNode",J7,{init:function(t){this._super(),this._factor=t,this._literal=null},_prepareValue:function(){this._literal=this._factor._asLiteral(),!this._literal&&this._factor._prepareValue&&(this._factor._prepareValue(),this._literal=this._factor._getLiteral())},_getLiteral:function(){return null}}),Y18=I1("LenNode",f7,{init:function(t){this._super(t)},evaluate:function(t){var e=this._literal?this._literal.value():this._factor.evaluate(t);return e?e.length:0},toString:function(){return"(len "+this._factor+")"}}),t18=I1("RandNode",f7,{init:function(t){this._super(t)},evaluate:function(t){var e=parseInt(this._literal?this._literal.value():this._factor.evaluate(t));return isNaN(e)||e<=0?0:Math.floor(Math.random()*e)},toString:function(){return"(rand "+this._factor+")"}}),$$_chars=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],R18=I1("SrandNode",f7,{init:function(t){this._super(t)},evaluate:function(t){var e=parseInt(this._literal?this._literal.value():this._factor.evaluate(t));if(isNaN(e)||e<=0)return"";for(var i="",n=$$_chars.length,s=0;s<e;s++)i+=$$_chars[Math.floor(Math.random()*n)];return i},toString:function(){return"(srand "+this._factor+")"}}),w18=I1("LowerNode",f7,{init:function(t){this._super(t)},evaluate:function(t){var e=this._literal?this._literal.value():this._factor.evaluate(t);return"string"==typeof e?e.toLowerCase():e},toString:function(){return"(lower "+this._factor+")"}}),E18=I1("UpperNode",f7,{init:function(t){this._super(t)},evaluate:function(t){var e=this._literal?this._literal.value():this._factor.evaluate(t);return"string"==typeof e?e.toUpperCase():e},toString:function(){return"(upper "+this._factor+")"}}),K18=I1("MinusNode",f7,{init:function(t){this._super(t)},evaluate:function(t){return-(this._literal?this._literal.value():this._factor.evaluate(t))},toString:function(){return"-"+this._factor}}),N18=I1("PlusNode",f7,{init:function(t){this._super(t)},evaluate:function(t){return this._literal?this._literal.value():this._factor.evaluate(t)},toString:function(){return"+"+this._factor}}),P18=I1("NotNode",f7,{init:function(t){this._super(t)},evaluate:function(t){return!(this._literal?this._literal.value():this._factor.evaluate(t))},toString:function(){return"(!"+this._factor+")"}}),Z18=I1("ToBoolNode",f7,{init:function(t){this._super(t)},evaluate:function(t){var e=this._literal?this._literal.value():this._factor.evaluate(t);return Boolean(e)},toString:function(){return"(bool "+this._factor+")"}}),n07=I1("ToNumberNode",f7,{init:function(t,e){this._super(t),this._zero=e},evaluate:function(t){var e=this._literal?this._literal.value():this._factor.evaluate(t);return e=Number(e),this._zero&&isNaN(e)?0:e},toString:function(){return(this.zero?"(numz ":"(num ")+this._factor+")"}}),l07=I1("ToIntegerNode",f7,{init:function(t,e){this._super(t),this._zero=e},evaluate:function(t){var e=this._literal?this._literal.value():this._factor.evaluate(t);return e=Number(e),this._zero&&isNaN(e)?0:Math.floor(e)},toString:function(){return(this.zero?"(intz ":"(int ")+this._factor+")"}}),i18=I1("ToDateNode",f7,{init:function(t){this._super(t)},evaluate:function(t){var e=this._literal?this._literal.value():this._factor.evaluate(t);return new Date(e)},toString:function(){return"(date "+this._factor+")"}}),V18=I1("ToStringNode",f7,{init:function(t){this._super(t)},evaluate:function(t){var e=this._literal?this._literal.value():this._factor.evaluate(t);return String(e)},toString:function(){return"(str "+this._factor+")"}}),S18=I1("TermNode",J7,{init:function(){this._super(),this._factors=[],this._operators=[],this._literal=null},addFactor:function(t){this._factors.push(t)},addOperator:function(t){this._operators.push(t)},isIdentifier:function(t){return 1==this._factors.length&&this._factors[0]instanceof p07&&this._factors[0].identifier()==t},_prepareValue:function(){for(var t,e=0,i=this._factors.length;e<i;e++)(t=this._factors[e])._prepareValue&&t._prepareValue();0==this._operators.length&&(t=this._factors[0],this._literal=t._asLiteral(),!this._literal&&t._prepareValue&&(this._literal=t._getLiteral()))},_getLiteral:function(){return this._literal},evaluate:function(t){if(this._literal)return this._literal.value();for(var e=this._factors.length,i=this._factors[0].evaluate(t),n=1;n<e;n++){var s=this._factors[n].evaluate(t);switch(this._operators[n-1]){case k1.Star:i*=s;break;case k1.Slash:i/=s;break;case k1.Div:i=Y1(Y1(i)/Y1(s));break;case k1.Mod:i%=s;break;case k1.Shl:i<<=s;break;case k1.Shr:i>>=s}}return i},toString:function(){var t,e="";if(this._literal)e=this._literal.toString();else if(1==(t=this._factors.length))e=this._factors[0].toString();else{e="("+this._factors[0].toString();for(var i=1;i<t;i++){switch(this._operators[i-1]){case k1.Star:e+=" * ";break;case k1.Slash:case k1.Div:e+=" / ";break;case k1.Mod:e+=" mod ";break;case k1.Shl:e+=" shl ";break;case k1.Shr:e+=" shr "}e+=this._factors[i].toString()}e+=")"}return e}}),a18=I1("SimpleExpressionNode",J7,{init:function(){this._super(),this._terms=[],this._operators=[],this._literal=null},addTerm:function(t){this._terms.push(t)},addOperator:function(t){this._operators.push(t)},isIdentifier:function(t){return 1==this._terms.length&&this._terms[0].isIdentifier(t)},_prepareValue:function(){for(var t=0,e=this._terms.length;t<e;t++)this._terms[t]._prepareValue();0==this._operators.length&&(this._literal=this._terms[0]._getLiteral())},_getLiteral:function(){return this._literal},evaluate:function(t){if(this._literal)return this._literal.value();for(var e=this._terms.length,i=this._terms[0].evaluate(t),n=1;n<e;n++){var s=this._terms[n].evaluate(t);switch(this._operators[n-1]){case k1.Minus:i-=s;break;case k1.Plus:i+=s}}return i},toString:function(){var t,e="";if(this._literal)e=this._literal.toString();else if(1==(t=this._terms.length))e=this._terms[0].toString();else{e="("+this._terms[0].toString();for(var i=1;i<t;i++){switch(this._operators[i-1]){case k1.Minus:e+=" - ";break;case k1.Plus:e+=" + ";break;default:e+=" <<ERROR>> "}e+=this._terms[i].toString()}e+=")"}return e}}),q18=I1("ListNode",J7,{init:function(){this._super(),this._exprs=[]},evaluateIn:function(t,e){for(var i=this._exprs,n=0;n<i.length;n++)if(e==i[n].evaluate(t))return!0;return!1},_prepareValue:function(){for(var t=this._exprs.length;t--;)this._exprs[t]._prepareValue()},toString:function(){for(var t=this._exprs,e=t.length-1,i="(",n=0;n<e;n++)i+=t[n].toString()+", ";return 0==e&&(i+=t[e].toString()),i+")"}}),v18=I1("SetNode",J7,{init:function(t){this._super(),this.leftExpr=t,this.listNode=null,this.operator=k1.Unknown,this._literal=null},isIdentifier:function(t){return!this.listNode&&this.leftExpr.isIdentifier(t)},_prepareValue:function(){this.leftExpr._prepareValue(),this.listNode?this.listNode._prepareValue():this._literal=this.leftExpr._getLiteral()},_getLiteral:function(){return this._literal},evaluate:function(t){if(this._literal)return this._literal.value();var e=this.leftExpr.evaluate(t);return this.listNode&&(e=this.operator==k1.NotIn?!this.listNode.evaluateIn(t,e):this.listNode.evaluateIn(t,e)),e},toString:function(){return this._literal?this._literal.toString():this.listNode?"("+this.leftExpr.toString()+" in "+this.listNode.toString()+")":this.leftExpr.toString()}}),B18=I1("ComparisonNode",J7,{init:function(){this._super(),this.leftExpr=null,this.rightExpr=null,this.operator=k1.Unknown,this._literal=null},isIdentifier:function(t){return!this.rightExpr&&this.leftExpr.isIdentifier(t)},evaluate:function(t){if(this._literal)return this._literal.value();if(!this.rightExpr)return this.leftExpr.evaluate(t);var e=this.leftExpr.evaluate(t),i=this.rightExpr.evaluate(t);switch(this.operator){case k1.Equal:return e instanceof Date&&i instanceof Date?e.getTime()==i.getTime():e==i;case k1.NotEqual:return e instanceof Date&&i instanceof Date?e.getTime()!=i.getTime():e!=i;case k1.Greater:return i<e;case k1.GreaterEqual:return i<=e;case k1.Lower:return e<i;case k1.LowerEqual:return e<=i;case k1.Like:return this._calcLike(e,i,!1);case k1.NotLike:return!this._calcLike(e,i,!1);case k1.ILike:return this._calcLike(e,i,!0);case k1.NotILike:return!this._calcLike(e,i,!0);case k1.Match:return this._calcMatch(e,i,!1);case k1.NotMatch:return!this._calcMatch(e,i,!1);case k1.IMatch:return this._calcMatch(e,i,!0);case k1.NotIMatch:return!this._calcMatch(e,i,!0);default:throw new o4(X1.unknownOperator+": "+this.operator)}},toString:function(){var t="";if(this._literal)t=this._literal.toString();else if(this.rightExpr){var e,i=this.leftExpr.toString(),n=this.rightExpr.toString();switch(this.operator){case k1.Equal:e="==";break;case k1.NotEqual:e="!=";break;case k1.Greater:e=">";break;case k1.GreaterEqual:e=">=";break;case k1.Lower:e="<";break;case k1.LowerEqual:e="<=";break;case k1.Like:e="like";break;case k1.NotLike:e="not like";break;case k1.ILike:e="ilike";break;case k1.NotILike:e="not ilike";break;case k1.Match:e="match";break;case k1.NotMatch:e="not match";break;case k1.IMatch:e="imatch";break;case k1.NotIMatch:e="not imatch";break;default:e="<<ERROR>>"}t="("+i+" "+e+" "+n+")"}else t=this.leftExpr.toString();return t},_prepareValue:function(){this.leftExpr._prepareValue(),this.rightExpr?this.rightExpr._prepareValue():this._literal=this.leftExpr._getLiteral()},_getLiteral:function(){return this._literal},_calcLike:function(t,e,i){var n=String(t),s=String(e);if(n&&s){i&&(n=n.toLowerCase(),s=s.toLowerCase());var r=s.length;if(1<r){var o="%"==s.charAt(0),a="%"==s.charAt(r-1);return o&&a?(s=s.substr(1,r-2),0<=n.indexOf(s,0)):o?(s=s.substr(1,r-1),r=n.length,n.lastIndexOf(s,r-1)==r-1):a?(s=s.substr(0,r-1),0==n.indexOf(s,0)):n==s}return"%"!=s&&n==s}return!1},_calcMatch:function(t,e,i){return new RegExp(e,"m"+(i?"i":"")).test(t)}}),T18=I1("LogicalNode",J7,{init:function(){this._super(),this.leftExpr=null,this.rightExpr=null,this.operator=k1.Unknown,this._literal=null},evaluate:function(t){if(this._literal)return this._literal.value();if(!this.rightExpr)return this.leftExpr.evaluate(t);var e=this.leftExpr.evaluate(t),i=this.rightExpr.evaluate(t);switch(this.operator){case k1.And:return e&&i;case k1.Or:return e||i;default:throw new o4(X1.unknownOperator+": "+this.operator)}},toString:function(){var t="";if(this._literal)t=this._literal.toString();else if(this.rightExpr){var e,i=this.leftExpr.toString(),n=this.rightExpr.toString();switch(this.operator){case k1.And:e=" and ";break;case k1.Or:e=" or ";break;default:e="<<ERROR>>"}t="("+i+" "+e+" "+n+")"}else t=this.leftExpr.toString();return t},isIdentifier:function(t){return!this.rightExpr&&this.leftExpr.isIdentifier(t)},_prepareValue:function(){this.leftExpr._prepareValue(),this.rightExpr?this.rightExpr._prepareValue():this._literal=this.leftExpr._getLiteral()},_getLiteral:function(){return this._literal}});J4.Default=new J4;var e4=I1("ExpressionRuntime",null,{init:function(){this._super()},scope:function(){return null},isIdentifier:function(t){throw new e27(X1._default.invalidIdentifierToken+": "+t)},evaluateIdentifier:function(t){throw new o4(X1._default.invalidIdentifierKey+": "+t)},evaluateIndexerI:function(t,e){throw new o4(X1._default.invalidIdentifierIndexer+": "+t)},evaluateIndexerS:function(t,e){throw new o4(X1._default.invalidIdentifierIndexer+": "+t)}}),$$_XML_HEAD='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n',s18=I1("ExcelStrings",null,{init:function(t){this._super(),this._workbook=t,this._nextId=0,this._count=0,this._stringMap={},this._strings=[]},count:function(){return this._count},uniqueCount:function(){return this._nextId},add:function(t){this._count++;var e=this._stringMap[t];return void 0===e&&(e=this._nextId++,this._stringMap[t]=e,this._strings[e]=t),e},getIndex:function(t){return this._stringMap[t]},createPart:function(){var t,e,i,n='<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"></sst>',s=v17(n,!0),r=s.documentElement,o=this._strings,a=o.length,h=new Array(a);for(r.setAttribute("count",this._count),r.setAttribute("uniqueCount",this._nextId),t=0;t<a;t++)h[t]=e=s.createElement("si"),(i=s.createElement("t")).textContent=o[t],e.appendChild(i);for(t=0;t<a;t++)r.appendChild(h[t]);return n=V17(s),$$_XML_HEAD+n},createPart2:function(){var t,e=$$_XML_HEAD,i=this._strings,n=i.length;for(e+='<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"',e+=' count="'+this._count+'" ',e+=' uniqueCount="'+this._nextId+'">',t=0;t<n;t++)e+="<si>",e+="<t>"+i[t]+"</t>",e+="</si>";return e+"</sst>"}});K5.prototype.serialize=function(t,e){P5(t,e,"sz","val",this.size||10),P5(t,e,"name","val",this.name||"Calibri"),P5(t,e,"color","rgb",this.color||"ff000000"),P5(t,e,"b","val",this.bold?"true":"false"),P5(t,e,"i","val",this.italic?"true":"false")},K5.equals=function(t,e){return t.name==e.name&&t.size==e.size&&t.color==e.color&&t.bold==e.bold&&t.italic==e.italic&&t.scheme==e.scheme},V5.equals=function(t,e){return t.patternType==e.patternType&&t.color==e.color&&t.gradient==e.gradient&&t.color2==e.color2&&t.degree==e.degree&&t.tint==e.tint},H6.prototype.serialize=function(t,e){this.serializeBorder(t,e,"left"),this.serializeBorder(t,e,"right"),this.serializeBorder(t,e,"top"),this.serializeBorder(t,e,"bottom")},H6.prototype.serializeBorder=function(t,e,i){var n=t.createElement(i);if(e.appendChild(n),i=this[i]){n.setAttribute("style","thin");var s=t.createElement("color");n.appendChild(s),s.setAttribute("rgb",i._color.toColorHex())}},H6.equals=function(t,e){return $$_xl_equal_border(t.left,e.left)&&$$_xl_equal_border(t.right,e.right)&&$$_xl_equal_border(t.top,e.top)&&$$_xl_equal_border(t.bottom,e.bottom)},t4.ALIGN_NEAR="left",t4.ALIGN_CENTER="centerContinuous",t4.ALIGN_FAR="right",t4.VALIGN_NEAR="top",t4.VALIGN_CENTER="center",t4.VALIGN_FAR="bottom",t4.prototype.clone=function(){var t=new t4;for(var e in this)this.hasOwnProperty(e)&&(t[e]=this[e]);return t},t4.prototype.serialize=function(t,e){e.setAttribute("borderId",this.border?this.border.id:"0"),e.setAttribute("fillId",this.fill?this.fill.id:"0"),e.setAttribute("fontId",this.font?this.font.id:"0"),e.setAttribute("numFmtId",this.formatId),e.setAttribute("xfId","0");var i=t.createElement("alignment");e.appendChild(i),i.setAttribute("horizontal",this.horzAlign),i.setAttribute("vertical",this.vertAlign),this.wrapText&&i.setAttribute("wrapText","1")},t4.equals=function(t,e){return t.horzAlign==e.horzAlign&&t.vertAlign==e.vertAlign&&t.wrapText==e.wrapText&&t.formatId==e.formatId&&(!t.font&&!e.font||t.font&&e.font&&t.font.id==e.font.id)&&(!t.fill&&!e.fill||t.fill&&e.fill&&t.fill.id==e.fill.id)&&(!t.border&&!e.border||t.border&&e.border&&t.border.id==e.border.id)&&t.xfId==e.xfId};var $$_EXCEL_NUMFMT_START=200,f18=I1("ExcelStyles",null,{init:function(t){this._super(),this._book=t,this._fonts=[],this._fills=[],this._borders=[],this._numFormats=[],this._pivot=0,this._xfs=[],this._dynxfs=[],this._cached=!0;var e=new V5;this._fills.push(e,e);var i=new H6;this._borders.push(i);var n=new t4;this._xfs.push(n)},setPivot:function(){this._pivot=0<this._xfs.length?this._xfs.length-1:0},addFont:function(t){if(t){var e=this._fonts;if(this._cached)for(var i=e.length;i--;)if(K5.equals(e[i],t))return e[i];e.push(t),t.id=e.length-1}return t},addFill:function(t){if(t){var e=this._fills;if(this._cached)for(var i=e.length-1;1<i;i--)if(V5.equals(e[i],t))return e[i];e.push(t),t.id=e.length-1}return t},addBorder:function(t){if(t){var e=this._borders;if(this._cached)for(var i=e.length-1;0<i;i--)if(H6.equals(e[i],t))return e[i];e.push(t),t.id=e.length-1}return t},addNumberFormat:function(t){var e=this._numFormats.indexOf(t);return e<0&&(this._numFormats.push(t),e=this._numFormats.length-1),$$_EXCEL_NUMFMT_START+e},add:function(t){if(t){var e=this._xfs;if(this._cached)for(var i=e.length-1;i>this._pivot;i--)if(t4.equals(e[i],t))return e[i].$ref++,e[i];e.push(t),t.id=e.length-1}return t},createPart:function(){var t='<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"></styleSheet>',e=v17(t,!0),i=e.documentElement;if(0<this._numFormats.length){var n=e.createElement("numFmts");i.appendChild(n),this.$_createNumberFormats(e,n)}var s=e.createElement("fonts");i.appendChild(s),this.$_createFonts(e,s);var r=e.createElement("fills");i.appendChild(r),this.$_createFills(e,r);var o=e.createElement("borders");i.appendChild(o),this.$_createBorders(e,o);var a=e.createElement("cellStyleXfs");i.appendChild(a),this.$_createDefXfs(e,a);var h=e.createElement("cellXfs");return i.appendChild(h),this.$_createXfs(e,h),t=V17(e),$$_XML_HEAD+t},$_createNumberFormats:function(t,e){for(var i=0,n=this._numFormats.length;i<n;i++){var s=t.createElement("numFmt");G77(s,"formatCode",this._numFormats[i]),G77(s,"numFmtId",$$_EXCEL_NUMFMT_START+i),e.appendChild(s)}},$_createFonts:function(t,e){if(this._fonts.length<1){var i=new K5;this._fonts.push(i)}for(var n=0,s=this._fonts.length;n<s;n++){var r=t.createElement("font");this._fonts[n].serialize(t,r),e.appendChild(r)}e.setAttribute("count",this._fonts.length)},$_createFills:function(t,e){if(this._fills.length<1){var i=new V5;this._fills.push(i)}for(var n=0,s=this._fills.length;n<s;n++){var r=t.createElement("fill");this._fills[n].serialize(t,r),e.appendChild(r)}e.setAttribute("count",this._fills.length)},$_createBorders:function(t,e){if(this._borders.length<1){var i=new H6;this._borders.push(i)}for(var n=0,s=this._borders.length;n<s;n++){var r=t.createElement("border");this._borders[n].serialize(t,r),e.appendChild(r)}e.setAttribute("count",this._borders.length)},$_createDefXfs:function(t,e){var i=t.createElement("xf");e.appendChild(i),i.setAttribute("borderId",0),i.setAttribute("fillId",0),i.setAttribute("fontId",0),i.setAttribute("numFmtId",0),e.setAttribute("count",1)},$_createXfs:function(t,e){if(this._xfs.length<1){var i=new t4;this._xfs.push(i)}for(var n=0,s=this._xfs.length;n<s;n++){var r=this._xfs[n],o=t.createElement("xf");r.serialize(t,o),e.appendChild(o)}e.setAttribute("count",this._xfs.length)}}),u18=I1("ExcelSheet",null,{init:function(t){this._super(),this._book=t,this._legacy=t._legacy,this._columns=null,this._doc=null,this._viewRoot=null,this._dataRoot=null,this._mergeRoot=null,this._rows=[],this._mergeCount=0,this._outlineLevel=0,this.$_preparePart()},colCount:function(){return this._columns.length},rowCount:function(){return this._rows.length},setColumns:function(t){this._columns=t},addRow:function(t){var e=this._rows[t];return e||((e=this._doc.createElement("row")).setAttribute("r",t+1),this._rows[t]=e),e},setRowLevel:function(t,e){if(0<=e){var i=this._rows[t];i&&(!this._legacy&&i.setAttribute("outlineLevel",e),this._outlineLevel=Math.max(e,this._outlineLevel))}},addBlank:function(t,e,i){var n=this.addRow(t),s=this._doc.createElement("c");s.setAttribute("r",f9(e)+(t+1)),i&&s.setAttribute("s",i.id),n.appendChild(s)},addMerge:function(t,e,i,n){var s=f9(e)+(t+1)+":"+f9(e+n-1)+(t+i),r=this._doc.createElement("mergeCell");r.setAttribute("ref",s),this._mergeRoot.appendChild(r),this._mergeCount++},$_addCell:function(t,e,i,n,s){var r=this.addRow(t),o=this._doc.createElement("c");o.setAttribute("r",f9(e)+(t+1)),o.setAttribute("t",i),s&&o.setAttribute("s",s.id),r.appendChild(o);var a=this._doc.createElement("v");a.textContent=n,o.appendChild(a)},addText:function(t,e,i,n,s,r){var o=null!=i?i:"";o=this._book.addString(o),this.$_addCell(t,e,"s",o,n)},addNumber:function(t,e,i,n,s,r){var o=isNaN(i)?"":String(i);this.$_addCell(t,e,"n",o,n)},addBool:function(t,e,i,n,s,r){this.$_addCell(t,e,"b",i?1:0,n)},addDate:function(t,e,i,n,s,r){if(i){var o=this.$_dateToStr(i);this.$_addCell(t,e,"n",o,n)}else this.$_addCell(t,e,"s","",n)},createPart:function(){var t,e,i=this._doc,n=i.documentElement,s=this._dataRoot;if(!this._legacy&&0<this._outlineLevel){var r=i.createElement("sheetFormatPtr");n.appendChild(r),r.setAttribute("outlineLevelRow",this._outlineLevel)}if(this._columns){var o=i.createElement("cols");n.appendChild(o),this.$_createCols(i,o)}for(e=this._rows,t=0;t<e.length;t++)s.appendChild(e[t]);n.appendChild(this._dataRoot),0<this._mergeCount&&(n.appendChild(this._mergeRoot),this._mergeRoot.setAttribute("count",this._mergeCount));var a=V17(i);return $$_XML_HEAD+a},$_preparePart:function(){var t=this._doc=v17('<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"></worksheet>',!0),e=t.createElement("sheetViews"),i=this._viewRoot=t.createElement("sheetView"),n=t.createElement("sheetPr"),s=t.createElement("outlinePr");s.setAttribute("summaryBelow","false"),n.appendChild(s),e.appendChild(i),i.setAttribute("workbookViewId","0"),i.setAttribute("tabSelected","1"),i.setAttribute("showOutlineSymbols","true"),t.documentElement.appendChild(n),t.documentElement.appendChild(e),this._dataRoot=t.createElement("sheetData"),this._mergeRoot=t.createElement("mergeCells")},$_createCols:function(t,e){for(var i=this._columns,n=0,s=i.length;n<s;n++){var r=i[n],o=t.createElement("col");r.serialize(t,o),e.appendChild(o)}},$_dateToStr:function(t){return(25569+(t.getTime()-60*t.getTimezoneOffset()*1e3)/864e5).toString().substr(0,20)}}),g18=I1("ExcelWorkbook",null,{init:function(t){this._super(),this._legacy=t,this._parts={},this._sst=new s18(this),this._styles=new f18(this),this._sheet=new u18(this),this.$_preapreTemplateParts()},parts:function(){return this._parts},sheet:function(){return this._sheet},addString:function(t){return this._sst.add(t)},addNumberFormat:function(t){return this._styles.addNumberFormat(t)},addFill:function(t){return this._styles.addFill(t)},addBorder:function(t){return this._styles.addBorder(t)},addFont:function(t){return this._styles.addFont(t)},setCachedStyle:function(t){this._styles._cached=t},setStylePivot:function(){this._styles.setPivot()},addStyle:function(t){return this._styles.add(t)},createParts:function(){var t=this._parts;return t["xl/sharedStrings.xml"]=this._sst.createPart(),t["xl/styles.xml"]=this._styles.createPart(),t["xl/worksheets/sheet1.xml"]=this._sheet.createPart(),t},$_preapreTemplateParts:function(){var t=this._parts;t["[Content_Types].xml"]=$$_XML_HEAD+'<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Default Extension="xml" ContentType="application/xml"/><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml"/><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/></Types>',t["_rels/.rels"]=$$_XML_HEAD+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/></Relationships>',t["docProps/app.xml"]=$$_XML_HEAD+'<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"><Application>DataLudi DUI</Application><AppVersion>1.0</AppVersion></Properties>',t["docProps/core.xml"]=$$_XML_HEAD+'<coreProperties xmlns="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dcterms:created xsi:type="dcterms:W3CDTF">2014-12-25T03:06:34Z</dcterms:created><dc:creator>DataLudi</dc:creator></coreProperties>',t["xl/workbook.xml"]=$$_XML_HEAD+'<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><workbookPr date1904="false"/><bookViews><workbookView activeTab="0"/></bookViews><sheets><sheet name="Sheet1" r:id="rId3" sheetId="1"/></sheets></workbook>',t["xl/_rels/workbook.xml.rels"]=$$_XML_HEAD+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/></Relationships>'}}),$$_SCROLL_SIZE=17,w1=I1("Dom",null,{init:function(t){this._super(),this._element=t},x:function(){return this._element.offsetLeft},y:function(){return this._element.offsetTop},size:function(){return w1.getSize(this._element)},element:function(){return this._element},attached:function(){return!!this._element.parentNode},detach:function(){if(this._element.parentNode)return this._element.parentNode.removeChild(this._element),!0},clearChildren:function(){w1.clearChildren(this._element)},addChild:function(t){w1.addChild(this._element,t)},setStyles:function(t,e){w1.setStyles(this._element,t,e)},getBounds:function(){return w1.getBounds(this._element)},getOffset:function(){return w1.getOffset(this._element)},move:function(t,e){w1.move(this._element,t,e)},disableSelection:function(){w1.disableSelection(this._element)},isAncestorOf:function(t){for(var e=t.parentElement;e;)if(e==this._element)return!0;return!1}},{createElement:function(t,e,i){var n,s=document.createElement(t);if(e&&w1.setStyles(s,e),i)for(n in i)s[n]=i[n];return s},setStyles:function(t,e,i){var n,s;if(e)for(n in s=t.style,e)s[n]=e[n];if(i)for(n in i)t.setAttribute(n,i[n])},addWindowListener:function(t,e){"function"==typeof V0?V0(this,t,e):f2.addEventListener(t,e)},removeWindowListener:function(t,e){"function"==typeof H77?H77(this,t,e):f2.removeEventListener(t,e)},getSize:function(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}},setSize:function(t,e,i){var n=t.style;n.width=e+"px",n.height=i+"px"},getBounds:function(t){var e=t.getBoundingClientRect();return e.cx=t.offsetLeft,e.cy=t.offsetTop,e},setBounds:function(t,e,i,n,s){var r=t.style;r.left=e+"px",r.top=i+"px",r.width=n+"px",r.height=s+"px"},getScrolled:function(){var t=document.body,e=document.documentElement;return{sx:window.pageXOffset||e.scrollLeft||t.scrollLeft,sy:window.pageYOffset||e.scrollTop||t.scrollTop}},getOffset:function(t){var e=t.getBoundingClientRect(),i=document.body,n=document.documentElement,s=window.pageYOffset||n.scrollTop||i.scrollTop,r=window.pageXOffset||n.scrollLeft||i.scrollLeft,o=n.clientTop||i.clientTop||0,a=n.clientLeft||i.clientLeft||0,h=e.left+r-a,l=e.top+s-o;return{x:Math.round(h),y:Math.round(l)}},move:function(t,e,i){t.style.left=e+"px",t.style.top=i+"px"},disableSelection:function(t){t.style["-moz-user-select"]="-moz-none",t.style["-khtml-user-select"]="none",t.style["-webkit-user-select"]="none",t.style["-o-user-select"]="none",t.style["-ms-user-select"]="none",t.style["user-select"]="none"},addChild:function(t,e){return!(!t||!e||e.parentNode===t||(t.appendChild(e),0))},removeChild:function(t,e){return!(!t||!e||e.parentNode!==t||(t.removeChild(e),0))},clearChildren:function(t){for(var e=t;e.lastChild;)e.removeChild(e.lastChild)},visitChildren:function(t,e){var i,n;if(e)for(i=t.childNodes,n=0;n<i.length;n++)if(!1===e(t,i[n]))return},getChildIndex:function(t){if(t){var e=t.parentNode;if(e)for(var i=e.childNodes,n=0;n<i.length;n++)if(i[n]===t)return n}return-1},getRadioGroupValue:function(t){var e=document.getElementsByName(t);if(e)for(var i=e.length;i--;)if(e[i].checked)return e[i].value},htmlEncode:function(t){return document.createElement("a").appendChild(document.createTextNode(t)).parentNode.innerHTML},getClipRect:function(t){return"rect("+t.y+"px,"+(t.x+t.width)+"px,"+(t.y+t.height)+"px,"+t.x+"px)"},createSimpleSpan:function(t){var e=document.createElement("span");return e.style.position="absolute",e.style.display="inline-block",t.appendChild(e),e},renderText:function(t,e,i,n,s,r){var o=t.style;i&&null!=n&&(n=String(n))&&(t.innerHTML=n,o.display="inline-block",o.textDecoration=e?(o.font=e.font,e.deco):(o.font=C7,"none"),o.color=i.css(),o.lineHeight=1.1,o.whiteSpace="nowrap",o.left=s+"px",o.top=r+"px",D5||(c4?o.msTransform="none":(o.transform="none",o.WebkitTransform="none")))},renderTextRect:function(t,e,i,n,s,r,o,a){w1.renderTextBounds(t,e,i,n,s.x,s.y,s.width,s.height,r,o,a)},renderTextBounds:function(t,e,i,n,s,r,o,a,h,l,u){var d,c;if(i&&null!=n&&(n=String(n)))switch(1.1,d=t.style,d.width=o+"px",e?(d.font=e.font,d.textDecoration=e.deco):d.font=C7,d.color=i.css(),"explicit"==u?(d.whiteSpace="nowrap",d.wordWrap="",c=!0):"normal"==u?(d.whiteSpace="normal",d.wordWrap="break-word",c=!0):(d.whiteSpace="nowrap",d.wordWrap=""),d.lineHeight=1.1,n=n.replace($$_htmlreg,$$_htmlrep),c&&(n=n.replace($_linebrreg,$_linebr)),t.innerHTML=n,d.left=s+"px",d.textAlign=h,l){case N7.TOP:d.top=r+"px",D5||(c4?d.msTransform="none":(d.transform="none",d.WebkitTransform="none"));break;case N7.BOTTOM:d.top=r+a+"px",D5||(c4?d.msTransform="translateY(-100%)":(d.transform="translateY(-100%)",d.WebkitTransform="translateY(-100%)"));break;case N7.MIDDLE:default:d.top=Math.round(r+a/1.1/2)+"px",D5||(c4?d.msTransform="translateY(-50%)":(d.transform="translateY(-50%)",d.WebkitTransform="translateY(-50%)"))}},getTextWidth:function(t,e){var i,n,s=0;return e&&(n=(i=document.createElement("div")).style,i.innerHTML=e,n.position="absolute",n.whiteSpace="nowrap",n.visibility="hidden",n.font=t?t.font:C7,document.body.appendChild(i),s=i.offsetWidth,document.body.removeChild(i)),s},getTextWidth2:function(t,e,i){var n,s=0;return i&&(n=t.style,t.textContent=i,n.display="inline",n.maxWidth="",n.font=e?e.font:C7,n.textDecoration="none",n.whiteSpace="nowrap",n.wordWrap="",n.textAlign="left",s=t.offsetWidth),s},calcTextBounds:function(t,e,i,n,s,r,o,a,h,l,u){var d,c;if((u=u||new g1).x=n,u.y=s,i){switch(1.1,(d=t.style).display="inline-block",d.maxWidth=r+"px",e?(d.font=e.font,d.textDecoration=e.deco):d.font=C7,d.lineHeight=1.1,"explicit"==l?(d.whiteSpace="nowrap",c=!(d.wordWrap="")):"normal"==l?(d.whiteSpace="normal",d.wordWrap="break-word",c=!0):(d.whiteSpace="nowrap",d.wordWrap=""),i=i.replace($$_htmlreg,$$_htmlrep),c&&(i=i.replace($_linebrreg,$_linebr)),t.innerHTML=i,d.textAlign=a,d.maxWidth="",u.width=t.offsetWidth,u.height=t.offsetHeight,a){case T2.LEFT:break;case T2.CENTER:u.x=Y1(n+(r-u.width)/2);break;case T2.RIGHT:u.x=n+r-u.width}switch(h){case N7.TOP:break;case N7.BOTTOM:u.y=s+o-u.height;break;case N7.MIDDLE:default:u.y=Math.round(s+(o-u.height/1.1)/2)}}return u},isAncestorOf:function(t,e){for(var i=e.parentElement;i;){if(i==t)return!0;i=i.parentElement}return!1}}),nZ;!function(){var t,e=document.createElement("div"),i=!1;try{t=e.getBoundingClientRect()}catch(t){i=!0}i||isNaN(t.width)?Element.prototype.getBoundingClientRect2=function(){var t=Element.prototype.getBoundingClientRect.call(this);return{left:t.left,right:t.right,width:t.right-t.left,top:t.top,bottom:t.bottom,height:t.bottom-t.top}}:Element.prototype.getBoundingClientRect2=Element.prototype.getBoundingClientRect;try{e.style.background="rgba(0, 0, 0, 1)"}catch(t){w4=!0}}(),Object.defineProperty&&Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(Element.prototype,"textContent")&&!Object.getOwnPropertyDescriptor(Element.prototype,"textContent").get&&(nZ=Object.getOwnPropertyDescriptor(Element.prototype,"innerText"),Object.defineProperty(Element.prototype,"textContent",{get:function(){return nZ.get.call(this)},set:function(t){return nZ.set.call(this,t)}}));var $_checkSize=void 0,$$_DOM={},$_validated=0,$_toolValidated=0,h18=Image,$_mobileEnabled=!0,L27=I1("UIContainer",a2,{init:function(t,e,i){if(this._super(),t=!!t,this.$_dom=t?$$_DOM:null,this.$_rich=!t,!e)throw"container is null!";if(this._containerDiv=e instanceof HTMLElement?e:document.getElementById(e),!this._containerDiv)throw"Invalid grid container element: "+e;this._popupOwner=Q2(i,HTMLElement),this._canvas=this._container=document.createElement("div"),this._containerDiv.appendChild(this._container);var n=this._container.style;if(n.position="relative",n.boxSizing="border-box",n.width="100%",n.height="100%",n.borderStyle="none",n.borderWidth="0px",n.overflow="hidden",this._width=this._container.clientWidth,this._height=this._container.clientHeight,this._updateRequested=!1,this._layoutNeeded=!1,this._invalidated=!1,this._nextLayoutNeeded=!1,this._nextInvalidated=!1,this._defaultTool=new F5(this),this._activeTool=this._defaultTool,this._domMouse=!1,this._captured=!1,this._focusing=!1,this._focusingTarget=null,this._hovered=null,this._currentX=0,this._currentY=0,this._rendered=0,this._defaultCursor=U0.AUTO,this._drawing=!1,this._offsetX=0,this._offsetY=0,this._clicked=0,this._clicket=0,this._children=[],this._rootElement=this._createRootElement(this.$_dom),this._feedbackRoot=this._createFeedbackRoot(this.$_dom),this._containerRender=this._render.bind(this),this.$_dom){var s=this.$_textMeasurer=document.createElement("span");s.style.poistion="absolute",s.style.visibility="hidden",s.style.whiteSpace="nowrap",s.style.margin=s.style.padding=0,this._container.appendChild(s),this._svgPool=document.createElementNS(P2,"svg"),this._svgPool.style.pointerEvents="none",this._svgDefs=document.createElementNS(P2,"defs"),this._svgPool.appendChild(this._svgDefs),this._container.appendChild(this._svgPool),this.$_getLinearGradient=function(t){var e=document,i=(this._svgPool,this._svgDefs),n="lg"+t.$_hash,s=e.getElementById(n);if(!s){(s=e.createElementNS(P2,"linearGradient")).setAttribute("id",n),90==t._angle&&(s.setAttributeNS(null,"x1","0%"),s.setAttributeNS(null,"y1","0%"),s.setAttributeNS(null,"x2","0%"),s.setAttributeNS(null,"y2","100%"));var r=e.createElementNS(P2,"stop");r.setAttributeNS(null,"offset","0%"),r.setAttributeNS(null,"style","stop-color:"+t._colors[0].value()),s.appendChild(r);var o=e.createElementNS(P2,"stop");o.setAttributeNS(null,"offset","100%"),o.setAttributeNS(null,"style","stop-color:"+t._colors[1].value()),s.appendChild(o),i.appendChild(s)}return"url(#"+n+")"}}},_registerEventHandlers:function(t){t.style.cursor=this._defaultCursor,"function"==typeof V0?(V0(this,"resize",this._resizeHandler.bind(this),!1),t.addEventListener("keydown",this._keyDownHandler.bind(this),!1),t.addEventListener("keyup",this._keyUpHandler.bind(this),!1),t.addEventListener("click",this._clickHandler.bind(this),!1),t.addEventListener("dblclick",this._dblclickHandler.bind(this),!1),t.addEventListener("mousedown",this._mouseDownHandler.bind(this),!1),V0(this,"mousemove",this._mouseMoveHandler.bind(this),!1),V0(this,"mouseup",this._mouseUpHandler.bind(this),!1),t.addEventListener("mouseenter",this._mouseEnterHandler.bind(this),!1),t.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this),!1),t.addEventListener("mouseover",this._mouseOverHandler.bind(this),!1),q3?t.addEventListener("DOMMouseScroll",this._mouseScrollHandler.bind(this),!1):t.addEventListener("mousewheel",this._mouseWheelHandler.bind(this),!1),t.addEventListener("focus",this._focusHandler.bind(this),!1),t.addEventListener("blur",this._blurHandler.bind(this),!1),$_mobileEnabled&&(t.addEventListener("touchstart",this._touchStartHandler.bind(this),!1),t.addEventListener("touchmove",this._touchMoveHandler.bind(this),!1),t.addEventListener("touchend",this._touchEndHandler.bind(this),!1),t.addEventListener("touchcancel",this._touchCancelHandler.bind(this),!1),t.addEventListener("touchleave",this._touchLeaveHandler.bind(this),!1)),V0(this,"focus",this._focusHandlerFireFox.bind(this),!0),V0(this,"focusin",this._focusinHandler.bind(this),!0)):f2.addEventListener?(f2.addEventListener("resize",this._resizeHandler.bind(this),!1),t.addEventListener("keydown",this._keyDownHandler.bind(this),!1),t.addEventListener("keyup",this._keyUpHandler.bind(this),!1),t.addEventListener("click",this._clickHandler.bind(this),!1),t.addEventListener("dblclick",this._dblclickHandler.bind(this),!1),t.addEventListener("mousedown",this._mouseDownHandler.bind(this),!1),f2.addEventListener("mousemove",this._mouseMoveHandler.bind(this),!1),f2.addEventListener("mouseup",this._mouseUpHandler.bind(this),!1),t.addEventListener("mouseenter",this._mouseEnterHandler.bind(this),!1),t.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this),!1),t.addEventListener("mouseover",this._mouseOverHandler.bind(this),!1),q3?t.addEventListener("DOMMouseScroll",this._mouseScrollHandler.bind(this),!1):t.addEventListener("mousewheel",this._mouseWheelHandler.bind(this),!1),t.addEventListener("focus",this._focusHandler.bind(this),!1),t.addEventListener("blur",this._blurHandler.bind(this),!1),$_mobileEnabled&&(t.addEventListener("touchstart",this._touchStartHandler.bind(this),!1),t.addEventListener("touchmove",this._touchMoveHandler.bind(this),!1),t.addEventListener("touchend",this._touchEndHandler.bind(this),!1),t.addEventListener("touchcancel",this._touchCancelHandler.bind(this),!1),t.addEventListener("touchleave",this._touchLeaveHandler.bind(this),!1)),f2.addEventListener("focus",this._focusHandlerFireFox.bind(this),!0),f2.addEventListener("focusin",this._focusinHandler.bind(this),!0)):(f2.attachEvent("onresize",this._resizeHandler.bind(this),!1),t.attachEvent("onkeydown",this._keyDownHandler.bind(this),!1),t.attachEvent("onkeyup",this._keyUpHandler.bind(this),!1),t.attachEvent("onclick",this._clickHandler.bind(this),!1),t.attachEvent("ondblclick",this._dblclickHandler.bind(this),!1),t.attachEvent("onmousedown",this._mouseDownHandler.bind(this),!1),f2.attachEvent("onmousemove",this._mouseMoveHandler.bind(this),!1),f2.attachEvent("onmouseup",this._mouseUpHandler.bind(this),!1),t.attachEvent("onmouseenter",this._mouseEnterHandler.bind(this),!1),t.attachEvent("onmouseleave",this._mouseLeaveHandler.bind(this),!1),t.attachEvent("onmouseover",this._mouseOverHandler.bind(this),!1),q3?t.attachEvent("onDOMMouseScroll",this._mouseScrollHandler.bind(this),!1):t.attachEvent("onmousewheel",this._mouseWheelHandler.bind(this),!1),t.attachEvent("onfocus",this._focusHandler.bind(this),!1),t.attachEvent("onblur",this._blurHandler.bind(this),!1),$_mobileEnabled&&(t.attachEvent("ontouchstart",this._touchStartHandler.bind(this),!1),t.attachEvent("ontouchmove",this._touchMoveHandler.bind(this),!1),t.attachEvent("ontouchend",this._touchEndHandler.bind(this),!1),t.attachEvent("ontouchcancel",this._touchCancelHandler.bind(this),!1),t.attachEvent("ontouchleave",this._touchLeaveHandler.bind(this),!1)))},containerElement:function(){return this._container},visible:function(){return"hidden"!=this._container.style.visibility},isVisible:function(){return this.visible()},setVisible:function(t){this._container.style.visibility=t?"visible":"hidden"},width:function(){return this._width},height:function(){return this._height},defaultTool:function(){return this._defaultTool},setDefaultTool:function(t){var e=this._defaultTool;return t!==e&&(this._defaultTool=t,this._activeTool===e&&this.setActiveTool(t)),this},activeTool:function(){return this._activeTool},setActiveTool:function(t){return t!==this._activeTool&&(this._activeTool&&this._activeTool.deactivate(),this._activeTool=t,this._activeTool&&this._activeTool.activate()),this},mouseX:function(){return this._currentX},mouseY:function(){return this._currentY},popupMenuManager:function(){return this._popupMenuManager},contextMenu:function(){return this._contextMenu},setContextMenu:function(t){t!=this._contextMenu&&(this._contextMenu=t instanceof E4?t:t?new E4("gridContextMenu",this,t):null)},addChild:function(t){return t&&this._children.indexOf(t)<0&&(this._children.push(t),t.attached(this)),t},removeChild:function(t){var e;t&&0<=(e=this._children.indexOf(t))&&(this._children.splice(e,1),t.detached())},addElement:function(t,e){return this._rootElement.addElement(t,e)},removeElement:function(t){this._rootElement.removeElement(t)},addFeedback:function(t,e){this._feedbackRoot.addElement(t,e)},removeFeedback:function(t){this._feedbackRoot.removeElement(t)},findElementAt:function(t,e,i){return this._feedbackRoot.findChildAt(t-this._rootElement._x,e-this._rootElement._y,i)||this._rootElement.findChildAt(t-this._rootElement._x,e-this._rootElement._y,i)},setFocus:function(){this._setFocusAndScroll(this._canvas)},updateNow:function(){this._render(q4())},invalidateLayout:function(){this._drawing?this._nextLayoutNeeded=!0:this._layoutNeeded=!0,this.invalidate(!0)},invalidate:function(t){this._updateRequested&&this._invalidated||!t&&this._drawing||(window&&window.requestAnimationFrame(this._containerRender),this._updateRequested=!0,this._drawing?this._nextInvalidated=!0:this._invalidated=!0)},setDefaultCursor:function(t){this._defaultCursor=t||U0.AUTO},setCursor:function(t){this._canvas.style.cursor=t||this._defaultCursor},restoreCursor:function(t){this._canvas.style.cursor=this._defaultCursor},_setDomMouse:function(t){return this._domMouse=t},_createChildren:function(t){},_layoutChildren:function(t){},_createRootElement:function(t){return null},_createFeedbackRoot:function(t){return null},_render:function(t){this._updateRequested=!1,this.resetSize(),this._offsetX=this._canvas.offsetLeft,this._offsetY=this._canvas.offsetTop;for(var e=this._canvas.offsetParent;e;)this._offsetX+=e.offsetLeft,this._offsetY+=e.offsetTop,e=e.offsetParent;this._drawing=!0;try{this.$_dom?this.$$_renderHtml_in(t,null,0,0):this.$$_render(t,null,0,0)}finally{this._drawing=!1,this._invalidated=this._nextInvalidated,this._layoutNeeded=this._nextLayoutNeeded,this._nextInvalidated=this._nextLayoutNeeded=!1}},$$_render:function(t,e,i,n){},$$_renderHtml_in:function(t,e,i,n){var s=V2.createDocumentFragment();s.appendChild(this._rootElement._dom);try{this.$$_renderHtml(t,null,0,0)}finally{this._container.appendChild(s),this._rootElement.drawHtml()}},$$_renderHtml:function(t,e,i,n){},_setFocusAndScroll:function(t){if(t)if(this._focusing)t!=this._focusingTarget&&(t.setFocus?t.setFocus():t.focus());else{this._focusing=!0,this._focusingTarget=t;try{var e=f2.pageXOffset,i=f2.pageYOffset;t.setFocus?t.setFocus():t.focus(),f2.pageXOffset==e&&f2.pageYOffset==i||f2.scrollTo(e,i)}finally{this._focusing=!1,this._focusingTarget=null}}},checkClicked:function(t,e){if($_debug){var i=this._width-t,n=this._height-e,s=F0();if(i<3&&n<3)if(s<this._clicket+300){if(3==++this._clicked&&(O0(this),$_debug))throw this}else this._clicked=0;this._clicket=s}},toOffset:function(t){var e=this._canvas.getBoundingClientRect();return t.mouseX=t.clientX-e.left,t.mouseY=t.clientY-e.top,t},toScreen:function(t){return t.x+=this._offsetX,t.y+=this._offsetY,t},_resizeHandler:function(t){},_keyDownHandler:function(t){t.$$_ignored||t.defaultPrevented||!this._activeTool||(B4&&t.metaKey||!B4&&t.ctrlKey,this._activeTool.keyDown(t.keyCode,t.ctrlKey,t.shiftKey,t.altKey)&&G2(t))},_keyUpHandler:function(t){t.$$_ignored||t.defaultPrevented||!this._activeTool||(B4&&t.metaKey||!B4&&t.ctrlKey,this._activeTool.keyUp(t.keyCode,t.ctrlKey,t.shiftKey,t.altKey)&&G2(t))},_clickHandler:function(t){t.$$_ignored||(this.checkClicked(t.clientX-this._offsetX,t.clientY-this._offsetY),this._activeTool&&this._activeTool.click(this.toOffset(t)))},_dblclickHandler:function(t){t.$$_ignored||(this.checkClicked(t.clientX-this._offsetX,t.clientY-this._offsetY),this._activeTool&&this._activeTool.dblclick(this.toOffset(t)))},$$_isIE:function(t){return(G6||c4||this._domMouse)&&this._container.contains(t.target)},_mouseDownHandler:function(t){t.$$_ignored||(t.target===this._canvas||this.$$_isIE(t))&&(this._canvas.setAttribute("tabindex","0"),this._captured=!0,this.checkClicked(t.clientX-this._offsetX,t.clientY-this._offsetY),this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._activeTool&&this._activeTool.mouseDown(t),!d4||this._activeTool&&!this._activeTool.isEditing()||G2(t))},_mouseMoveHandler:function(t){if(!t.$$_ignored){if(!this._captured&&t.target!==this._canvas&&!this.$$_isIE(t))return this._hovered&&(this._hovered.setHovered(!1),this._hovered=null),void(this._activeTool&&this._activeTool.mouseOutside());this.toOffset(t);var e=t.mouseX,i=t.mouseY;if(!(e==this._currentX&&i==this._currentY||(this._currentX=e,this._currentY=i,this._activeTool&&this._activeTool.isDragging()))){var n=this.findElementAt(e,i,!0);null!=n&&!n.canHover()||n==this._hovered||(this._hovered&&this._hovered.setHovered(!1),this._hovered=n,this._hovered&&this._hovered._mouseEnabled&&this._hovered.setHovered(!0))}this._activeTool&&this._activeTool.mouseMove(t)}},_mouseUpHandler:function(t){t.$$_ignored||(this._captured||t.target===this._canvas||this.$$_isIE(t))&&(this._captured=!1,this._activeTool&&this._activeTool.mouseUp(this.toOffset(t)))},_mouseEnterHandler:function(t){t.$$_ignored||this._activeTool&&this._activeTool.mouseEnter(this.toOffset(t))},_mouseLeaveHandler:function(t){t.$$_ignored||(this._hovered&&this._hovered.setHovered(!1),this._activeTool&&this._activeTool.mouseLeave(this.toOffset(t)))},_mouseOverHandler:function(t){t.$$_ignored||this._activeTool&&this._activeTool.mouseLeave(this.toOffset(t))},_mouseWheelHandler:function(t){if(!t.$$_ignored)return!(!this._activeTool||!this._activeTool.mouseWheel(this.toOffset(t))||(G2(t),0))},_mouseScrollHandler:function(t){t.$$_ignored||this._activeTool&&(t.wheelDelta=-t.detail,this._activeTool.mouseWheel(this.toOffset(t))&&G2(t))},_focusHandler:function(t){},_blurHandler:function(t){},_focusinHandler:function(t){t.target===this._canvas&&this._activeTool&&this._activeTool.setFocus()},_focusHandlerFireFox:function(t){t.target===this._canvas&&this._activeTool&&this._activeTool.setFocus()},_focusoutHandler:function(t){},_touchStartHandler:function(t){if(1<t.touches.length||1<t.changedTouches.length||1<t.targetTouches.length){if(this._activeTool)try{this._activeTool.touchCancel(t)}catch(t){}}else if(this._activeTool)if(this._activeTool.touchStart(t))t.preventDefault();else try{this._activeTool.touchCancel(t)}catch(t){}},_touchMoveHandler:function(t){if(1<t.touches.length||1<t.changedTouches.length||1<t.targetTouches.length){if(this._activeTool)try{this._activeTool.touchCancel(t)}catch(t){}}else if(this._activeTool)if(this._activeTool.touchMove(t))t.preventDefault();else try{this._activeTool.touchCancel(t)}catch(t){}},_touchEndHandler:function(t){this._activeTool&&this._activeTool.touchEnd(t)},_touchCancelHandler:function(t){this._activeTool&&this._activeTool.touchCancel(t)},_touchLeaveHandler:function(t){this._activeTool&&this._activeTool.touchEnd(t)},onMenuItemClick:function(t){this.onContextMenuItemClicked&&this.onContextMenuItemClicked(this,t),this.fireEvent(L27.CONTEXT_MENU_ITEM_CLICKED,t)}});L27.CONTEXT_MENU_ITEM_CLICKED="onUIContainerContextMenuItemClicked";var C07=I1("EditMask",null,{init:function(t){this._super(),this._items=[],this._values=[],this._source=[],this.setFormat(t)},format:null,placeHolder:"_",passwoardChar:"*",setFormat:function(t){return t!=this._format&&(this._format=t,this.$_parse(t)),this},length:function(){return this._items.length},valueLength:function(){return this._values.length},getItem:function(t){return this._items[t]},getValue:function(t){return this._values[t]},isLiteral:function(t){var e=this._items[t];return S4(e)||e instanceof m5},getLiteral:function(t){var e=this._items[t];return S4(e)?e:e instanceof m5?e.value():null},isValid:function(t,e){var i=this._items[t].callback;return!i||i(e)},isValidValue:function(t,e){var i=this._values[t].callback;return!i||i(e)},checkValid:function(t){var e,i,n=this._items,s=n.length;for(e=0;e<s;e++)if((i=n[e].callback)&&!i(t[e]||" "))return!1;return!0},getValuePos:function(t){for(var e=this._items,i=Math.min(e.length,t),n=0,s=0;s<i;)this.isLiteral(s++)||n++;return n},getValueRange:function(t,e){var i,n,s=this._items.length;for(this._values.length,i=n=0;i<s&&i<t;)this.isLiteral(i++)||n++;for(t=n;i<s&&i<e;)this.isLiteral(i++)||n++;return{p1:t,p2:e=n}},getItemPos:function(t){var e,i,n=this._items,s=n.length;for(e=i=0;e<s;){for(;!(n[e]instanceof p3);)e++;if(i==t)break;e++,i++}return e},getTemplate:function(t,e){var i,n,s=this._items,r="";for(t=0<arguments.length?t:0,n=1<arguments.length?Math.min(t+e,s.length):s.length;t<n;t++)r+=(i=s[t])instanceof p3?this.$_getHolder(t):i instanceof m5?i.value():i;return r},strip:function(t){var e,i=this._items,n=Math.min(i.length,t.length),s="";for(e=0;e<n;e++)this.isLiteral(e)||(s+=t.charAt(e));return s},mask:function(t){var e,i,n,s,r,o,a=this._items,h=t.length,l=a.length,u="";for(i=e=0;e<l;e++)if(o="",(n=a[e])instanceof p3){switch(s=this.$_getHolder(e),r=i<h&&" "!=(o=t.charAt(i))&&this.isValidValue(i,o)?o:s,n.case){case 9:u+=e<h&&"*"==o||o!=s&&o==r?"*":r;break;case 1:u+=r.toUpperCase();break;case-1:u+=r.toLowerCase();break;default:u+=r}i++}else u+=n instanceof m5?n.value():n;return u},clearSource:function(t,e){e=1<arguments.length?e:t+1;for(var i=t;i<e;i++)this._source[i]=void 0},initSource:function(t,e){var i,n=t?t.split(""):[],s=this._values.length-n.length;if(e)for(i=0;i<s;i++)n.splice(0,0,"");this._source=n},setSource:function(t,e){this._source[t]=e},getText:function(t,e,i,n){var s,r,o,a=this._items,h="";for(o=this.getValueRange(e,e).p1,i=Math.min(i,t.length),s=e;s<i;s++)(r=t.charAt(s))!=this.$_getHolder(s)||this.isLiteral(s)?9==a[s].case?h+=this._source[o]:h+=r:h+=" ",this.isLiteral(s)||o++;return n?h.trim():h},unmask:function(t,e,i,n,s,r){var o,a,h,l,u=this._items,d=Math.min(u.length,t?t.length:0),c="";for(l=o=0;o<d;o++)a=u[o],h=t[o],c+=a instanceof p3?9==a.case?this._source[l]:this.isValid(o,h)?h:" ":a instanceof m5?e?a.value():"":i?h:"",this.isLiteral(o)||l++;return n&&(c=v97(c)),s&&(c=h97(c)),r&&(c=J97(c)),c},$_parse:function(t){var e,i,n,s,r=!1,o=0,a=C07.KEYS,h=t?t.length:0,l=this._items,u=this._values;for(l.length=u.length=0,e=0;e<h;e++)if(i=t.charAt(e),r)"\\"==i?r=!1:l.push(i);else switch(i){case"\\":r=!0;break;case"{":o=9;break;case"}":o=0;break;case">":o=0<o?0:1;break;case"<":o=o<0?0:-1;break;default:for(n in s=null,a)if(i==n){s=a[n].get(o);break}l.push(s||i),s instanceof p3&&u.push(s)}},$_getHolder:function(t){return this._placeHolder}},{DIGIT:L6("0",function(t){return"0"<=t&&t<="9"}),DIGIT_SPACE:L6("9",function(t){return"0"<=t&&t<="9"||" "==t}),DIGIT_SIGN:L6("#",function(t){return"0"<=t&&t<="9"||"-"==t||"+"==t||" "==t}),LETTER:L6("L",function(t){return"A"<=t&&t<="Z"||"a"<=t&&t<="z"}),LETTER_SPACE:L6("?",function(t){return"A"<=t&&t<="Z"||"a"<=t&&t<="z"||" "==t}),LETTER_DIGIT:L6("A",function(t){return"A"<=t&&t<="Z"||"a"<=t&&t<="z"||"0"<=t&&t<="9"}),LETTER_DISIT_SPACE:L6("a",function(t){return"A"<=t&&t<="Z"||"a"<=t&&t<="z"||"0"<=t&&t<="9"||" "==t}),DECIMAL_SEP:T17(".","decimalSep"),DATE_SEP:T17("/","dateSep"),TIME_SEP:T17(":","timeSep")},function(t,e){var i=t.KEYS={};for(var n in e)key=e[n],i[key.key]=key}),o07=I1("MaskEditor",a2,{init:function(t,i){if(this._super(),this._editor=t,this._mask=null,!i){var n=this;t.onkeydown=function(t){if(229==t.keyCode||197==t.keyCode)return G2(e),!1;switch(t.keyCode){case i1.DELETE:return n._doDelete(),G2(t),!1;case i1.BACK:return n._doBack(),G2(t),!1}return!0},t.onkeypress=function(t){if(n._doChar(t.key,t.which||t.keyCode))return G2(t),!0},t.oncopy=function(t){n._doCopy(t),G2(t)},t.oncut=function(t){n._doCut(t),G2(t)},t.onpaste=function(t){n._doPaste(t),G2(t)}}},format:null,insertMode:!0,includeSeparators:!0,includeLiterals:!1,stripBegin:!1,stripEnd:!1,stripInner:!1,fitToSeparators:!0,trimWhenCopy:!0,changeCallback:null,setFormat:function(t){if((t=!t||t.trim())!=this._format){this._format=t;var e=this._mask=t?new C07(t):null;this._editor.value=e?e.getTemplate():"",this._editor.maxLength=e?e.length():-1}},setIncludeSeparators:function(t){t!=this._includeSeparators&&(this._includeSeparators=t)},setFitToSeparators:function(t){t!=this._fitToSeparators&&(this._fitToSeparators=t)},editor:function(){return this._editor},checkValid:function(){if(this._mask){var t=this.getText(this._editor.value);return this._mask.checkValid(t)}return!0},initValue:function(t,e){this._mask&&(this._mask.initSource(t,e),t=this.seiveText(t,e),t=this._mask.mask(t),this._editor.value=t)},seiveText:function(t,e){if(this._mask){var i,n,s,r=this._mask,o=t?t.length:0,a=r._values.length,h="";if(e){for(i=o-1,n=a-1;0<=i&&0<=n;i--)s=t.charAt(i),r.isValidValue(n,s)&&(h=s+h,n--);for(i=0;i<a-o;i++)h=" "+h}else for(n=i=0;i<o&&n<a;i++)s=t.charAt(i),r.isValidValue(n,s)&&(h+=s,n++);return h}return t},unmaskText:function(t){return this._mask?(t=0<arguments.length?t:this._editor.value,this._mask.unmask(t,this._includeSeparators,this._includeLiterals,this._stripBegin,this._stripEnd,this._stripInner)):t},getText:function(t){return this._mask?(t=0<arguments.length?t:this._editor.value,this._mask.getText(t,0,Q0)):t},_changed:function(){this._changeCallback&&this._changeCallback(this)},_setValue:function(t,e){t!=this._editor.value&&(this._editor.value=t,!e&&this._changeCallback&&this._changeCallback(this))},_doDelete:function(){var t,e,i=this.$_getSelLength(),n=this._editor,s=this._mask,r=this.$_getCaretPos();if(s&&!(r>=s.length()&&i<1))return t=s.strip(n.value),rng=s.getValueRange(n.selectionStart,n.selectionEnd),this._insertMode?0<i?rng.p2>rng.p1&&(t=t.substr(0,rng.p1)+t.substr(rng.p2),s.clearSource(rng.p1,rng.p2),e=t):s.isLiteral(r)||(t=t.substr(0,rng.p1)+t.substr(rng.p1+1),s.clearSource(rng.p1),e=t):(0<i?(t=Z5(t,rng.p1,rng.p2," "),s.clearSource(rng.p1,rng.p2),r+=i-1,e=t):s.isLiteral(r)||(t=Z5(t,rng.p1,rng.p1+1," "),s.clearSource(rng.p1),e=t),r++),void 0!==e&&this._setValue(s.mask(e)),this.$_moveCaret(r),!0},_doBack:function(){var t,e,i,n=this._editor,s=this._mask,r=this.$_getCaretPos();if(s&&!(r<=0&&this.$_getSelLength()<1))return t=s.strip(n.value),rng=s.getValueRange(n.selectionStart,n.selectionEnd),this._insertMode?0<this.$_getSelLength()?rng.p2>rng.p1&&(t=t.substr(0,rng.p1)+t.substr(rng.p2),s.clearSource(rng.p1,rng.p2),e=t,r=s.getItemPos(rng.p1)):s.isLiteral(r-1)?r--:(i=rng.p1-1,t=t.substr(0,i)+t.substr(i+1),s.clearSource(i),e=t,r=s.getItemPos(i)):0<this.$_getSelLength()?rng.p2>rng.p1&&(t=Z5(t,rng.p1,rng.p2," "),s.clearSource(rng.p1,rng.p2),e=t,r=s.getItemPos(rng.p1)):s.isLiteral(r-1)?r--:(t=Z5(t,i=rng.p1-1,i+1," "),s.clearSource(i),e=t,r=s.getItemPos(i)),void 0!==e&&this._setValue(s.mask(e)),this.$_moveCaret(r),!0},_doChar:function(t,e,i){var n,s,r,o,a=this._mask,h=this._editor,l=h.value;if(a&&!(e<" ".charCodeAt(0)&&e!=i1.SPACE))return l=a.strip(l),r=h.selectionStart,o=h.selectionEnd,(n=a.getValueRange(r,o)).p1>=a.valueLength()||!a.isValidValue(n.p1,t)||(a.clearSource(n.p1,n.p2),a.setSource(n.p1,t),l=(l=this._insertMode?l.substr(0,n.p1)+t+l.substr(n.p2):(l=Z5(l,n.p1,n.p2," ")).substr(0,n.p1)+t+l.substr(n.p1+1)).substr(0,a.valueLength()),s=n.p1+1,this._setValue(a.mask(l),i),s=a.getItemPos(s),this.$_moveCaret(s),!0)},_doCopy:function(t){if(this._mask&&0<this.$_getSelLength()){var e=this._editor,i=this._mask.getText(e.value,e.selectionStart,e.selectionEnd,this._trimWhenCopy);return I8(t,i),!0}},_doCut:function(t){if(this._mask&&0<this.$_getSelLength()){var e=this._editor,i=this._mask.getText(e.value,e.selectionStart,e.selectionEnd,this._trimWhenCopy);return I8(t,i),this._doDelete(),!0}},_doPaste:function(t){this._editor;var e,i=i17(t);if(this._mask&&0<i.length){for(e=0;e<i.length;e++)this._doChar(i.charAt(e),void 0,!0);return this._changed(),!0}},$_getSelLength:function(){return this._editor.selectionEnd-this._editor.selectionStart},$_getCaretPos:function(){return this._editor.selectionStart},$_moveCaret:function(t){t=this._editor.value?Math.min(this._editor.value.length,t):0,this._editor.setSelectionRange(t,t,"none")}},{HANDLED:{}}),c8=I1("PopupMenuItem",null,{init:function(t,e){this._super(),this._parent=t,this._children=null,e&&this.assign(e)},visible:!0,enabled:!0,label:null,type:null,group:null,checked:!1,tag:void 0,children:null,callback:null,displayCallback:null,enabledCallback:null,checkedCallback:null,labelCallback:null,parent:function(){return this._parent},setChildren:function(t){},isSeparator:function(){return"-"==this._label},setCallback:function(t){t!==this._callback&&(this._callback=m0(t))},setEnabledCallback:function(t){t!==this._enabledCallback&&(this._enabledCallback=m0(t))},setDisplayCallback:function(t){t!==this._displayCallback&&(this._displayCallback=m0(t))},setCheckedCallback:function(t){t!==this._checkedCallback&&(this._checkedCallback=m0(t))},setLabelCallback:function(t){t!==this._labelCallback&&(this._labelCallback=m0(t))},getVisible:function(t){var e=this._displayCallback;return e?e(this,t):this._visible},getEnabled:function(t){var e=this._enabledCallback;return e?e(this,t):this._enabled},getData:function(){return{label:this._label,checked:this._checked,enabled:this._enabled,tag:this._tag}},click:function(t){"check"==this._type&&(this._checked=!this._checked),this._parent._itemClicked(this,t)}}),E4=I1("PopupMenu",a2,{init:function(t,e,i){this._super(),this._name=t,this._parent=e,this._items=this._load(i)},visible:!0,displayCallback:null,enabledCallback:null,checkedCallback:null,childrenCallback:null,labelCallback:null,enabled:!0,name:null,label:null,tag:null,setDisplayCallback:function(t){t!==this._displayCallback&&(this._displayCallback=m0(t))},setEnabledCallback:function(t){t!==this._enabledCallback&&(this._enabledCallback=m0(t))},setCheckedCallback:function(t){t!==this._checkedCallback&&(this._checkedCallback=m0(t))},setChildrenCallback:function(t){t!==this._childrenCallback&&(this._childrenCallback=m0(t))},setLabelCallback:function(t){t!==this._labelCallback&&(this._labelCallback=m0(t))},manager:function(){for(var t=this._parent;t;){if(t.popupMenuManager&&t.popupMenuManager()instanceof J6)return t.popupMenuManager();if(t instanceof J6)return t;t=t._parent}return null},items:function(){return this._items},count:function(){return this._items?this._items.length:0},getVisible:function(t){var e=this._displayCallback;return e?e(this.proxy(),t):this._visible},getEnabled:function(t){var e=this._enabledCallback;return e?e(this,t):this._enabled},getItems:function(){var t=this._childrenCallback;return t?this._load(t(this.proxy()))||[]:this.items()},getItem:function(t){return this._items[t]},getItemsByLabel:function(t){return this.$_getItemsByProp("label",t)},getItemsByTag:function(t){return this.$_getItemsByProp("tag",t)},getItemsByGroup:function(t){return this.$_getItemsByProp("group",t)},isDescendant:function(t){for(var e=t;e;){if(e==this)return!0;e=e._parent}return!1},_load:function(t){var e,i,n,s,r=[];if(t)for(t=E5(t),e=0;e<t.length;e++)(i=t[e])&&(i.childrenCallback||V1(i.children)&&0<i.children.length?((n=new E4(null,this,i.children))._label=i.label,n._tag=i.tag,n.setCallback&&i.callback&&n.setCallback(i.callback),i.displayCallback&&n.setDisplayCallback(i.displayCallback),i.enabledCallback&&n.setEnabledCallback(i.enabledCallback),i.childrenCallback&&n.setChildrenCallback(i.childrenCallback),i.checkedCallback&&n.setCheckedCallback(i.checkedCallback),i.labelCallback&&n.setLabelCallback(i.labelCallback),r.push(n)):(i.action?s=this.$_createActionMenu(i):I77(i.label)||(s=new c8(this,i)),s&&r.push(s)));return r},_itemClicked:function(t,e){var i,n,s;if(!t.isSeparator()){if(t.parent()==this&&"radio"==t.type()&&(i=t.group())){for(n=0;n<this._items.length;n++)(s=this._items[n])instanceof c8&&"radio"==s.type()&&s.group()==i&&s.setChecked(!1);t.setChecked(!0)}t._callback?t._callback(t.proxy(),e):this._parent instanceof J6?this._parent._doMenuItemClick(t.proxy(),e):this._parent.onMenuItemClick?this._parent.onMenuItemClick(t.proxy(),e):this._parent._itemClicked(t,e)}},$_createActionMenu:function(t){var i,e,n,s,r,o,a,h=t.action,l=t.target||this.manager().actionTarget();if(h&&l&&(i=l.getAttribute(h))){if(e=i.attr.$enum,n=i.attr.value,e){for(o in r=[],e.$DOMAIN)(s={}).label=D8(o),s.type="radio",s.group=e.$ENUM,s.checked=o==n,s.tag=o,s.callback=function(t,e){i.target.setProperty(i.prop,t.tag)},r.push(s);for(s=new E4(null,this,r),a=r.length;a--;)r[a]._parent=s}else"boolean"==typeof n&&((s=new c8(this))._type="check",s._checked=i.target.getProperty(i.prop),s._callback=function(t,e){i.target.setProperty(i.prop,!i.target.getProperty(i.prop))});return s&&(s._label=t.label||function(t){var e,i=h.split(".");for(e=0;e<i.length;e++)i[e]=D8(i[e]);return i.slice(0,i.length-1).join(".")+" "+i[i.length-1]}()),s}return null},$_getItemsByProp:function(t,e){var i,n=null;for(i=0;i<this._items.length;i++)this._items[i].getProperty(t)==e&&(n=n||[]).push(this._items[i]);return n}});E4.CLICKED="onPopupMenuClicked";var A7=I1("PopupMenuView",a2,{init:function(t){this._super(),this._container=t,this._containerElement=null,this._parentView=null,this._dom=new w1(this._element=this._createElement()),this._element.addEventListener("contextmenu",function(t){t.preventDefault()}),this._element.class="$dl_popupmenu",this._currDiv=null,this._menu=null,this._childView=null,this._showing=!1,this._timer=void 0,this.$_downhandler=null},minWidth:0,maxWidth:0,dropDownCount:8,manager:function(){return this._menu.manager()},menu:function(){return this._menu},show:function(t,e,i,n,s,r){if(!this._showing){this._showing=!0;try{this._containerElement=t,this._parentView=e,this._menu=i,this.$_show(t,this._menu,n,s,r)}finally{this._showing=!1}}},$_show:function(t,e,i,n,s){var r=this._element;if(r){var o,a,h,l,u,d,c,_,f=r.style;this._menu=e,f.position="absolute",f.float="none",f.minWidth="60px",f.overflow="hidden",f.zIndex=3e3,f.background="rgb(247, 247, 247)",f.border="1px solid rgb(150, 150, 150)",f.boxShadow="rgba(0, 0, 0, 0.5) 2px 2px 2px",f.fontFamily="Tahoma",f.fontStyle="normal",f.fontVariant="normal",f.fontWeight="normal",f.fontSize="10pt",f.padding="4px 0px",f.margin="0px",this._dom.clearChildren(),A7.$_buildItems(this,this._element,e),w1.disableSelection(r),u2.documentElement.appendChild(r),o=q5(),a=w1.getBounds(u2.documentElement),h=w1.getBounds(t),l=o.width,u=o.height,d=this._dom.getBounds(),c=window.pageXOffset||u2.documentElement.scrollLeft,_=window.pageYOffset||u2.documentElement.scrollTop,document.documentElement.scrollWidth>document.documentElement.clientWidth&&(u-=18),document.documentElement.scrollHeight>document.documentElement.clientHeight&&(l-=18),this._parentView||(i+=h.left-a.left,n+=h.top-a.top),n+d.height>=u+_-3&&(n=n-(d.height-23)-3)<0&&(n=Math.max(0,u-d.height-3)),i+d.width>=l+c-3?i=Math.max(0,l-d.width-3):void 0!==s&&d.width<s&&(i+=s-d.width),this._dom.move(Math.max(0,i),Math.max(0,n)),this.$_downhandler=f2.onmousedown,this.$_keyhandler=f2.onkeydown,f2.onmousedown=function(t){for(var e=t.target;e;){if(e==this._element||e.menuItem)return;e=e.parentNode}this.manager().close()}.bind(this)}},hide:function(t){if(this._targetView=null,f2.onkeydown=this.$_keyhandler,this.$_keyhandler=null,f2.onmousedown=this.$_downhandler,this.$_downhandler=null,t&&this._parentView)this._parentView.hide(!0);else{this.$_hideChildView();var e=this._element;e&&e.parentNode&&u2.documentElement.removeChild(e)}},_createElement:function(){var t=u2.createElement("div");return t.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),t},_showChild:function(t){var e,i,n,s;this==this.manager()._showingView&&(this._childView&&this._childView._menu===t.menuItem||this._currDiv!==t||(this.$_hideChildView(),e=t.menuItem,i=this._element.getBoundingClientRect(),n=this._element.offsetLeft+i.width-4,s=this._element.offsetTop+t.offsetTop,this._childView=A7._borrowView(),this._childView.show(this._containerElement,this,e,n,s)))},$_hideChildView:function(){this.manager()._showingView=null,this._childView&&(this._childView.$_hideChildView(),this._childView._element&&u2.documentElement.removeChild(this._childView._element),A7._returnView(this._childView),this._childView=null)},$_setSelected:function(t,e){if(t){var i=t.menuItem.$_enabled;e?i&&w1.setStyles(t,{background:"#555",color:"#fff"}):w1.setStyles(t,{background:"",color:i?"#111":"#aaa"})}}},{$_menuId:0,$_views:[],_borrowView:function(){var t=A7.$_views.pop();return t||(t=new A7),t},_returnView:function(t){if(t._children)for(var e=0;e<t._children.length;e++)A7.returnView(t[e]);A7.$_views.push(t)},$_getIcon:function(t,e){return P4("menu_"+t+(e?"_hover":"")+".png")},$_buildItems:function(r,t,e){var i,n,s,o,a,h,l,u,d,c=r._targetView,_=e.getItems(),f=0;for(r.$_divs=[],i=0,n=_.length;i<n;i++)if((s=_[i]).getVisible(c)){if(s.$_enabled=s.getEnabled(c),(o=u2.createElement("div")).$_idx=f,r.$_divs.push(o),o.menuView=r,o.menuItem=s,w1.setStyles(o,{position:"relative",float:"none",width:"100%",paddingTop:"2px",paddingBottom:"2px",cursor:"default"}),s instanceof c8&&s.isSeparator())a=u2.createElement("hr"),w1.setStyles(a,{height:"1px",border:"0px",margin:"2px",color:"#777",backgroundColor:"#777"}),o.appendChild(a),o.onmouseover=function(t){o.menuView&&o.menuView._childView&&o.menuView.$_hideChildView()};else if(o.style.color=s.$_enabled?"#111":"#aaa",o.style.whiteSpace="pre",o.onclick=function(t){var e=t.currentTarget,i=e.menuItem;i instanceof E4?i.$_enabled&&this._showChild(e):i?(this.hide(!0),i.$_enabled&&i.click(c)):this.$_hideChildView()}.bind(r),o.onmousedown=function(t){t.stopImmediatePropagation(),t.preventDefault&&t.preventDefault()},o.onmouseover=function(t){var e=this._currDiv,i=this._currDiv=t.currentTarget,n=i.menuItem,s=n.$_enabled;this.$_setSelected(e,!1),this.$_setSelected(i,!0),n.checked&&n.checked()?i.$_check.style.backgroundImage=A7.$_getIcon(n.group()?"radio":"check",s):n instanceof E4&&i.$_arrow&&(i.$_arrow.style.backgroundImage=A7.$_getIcon("expander",s)),n instanceof E4&&s?(r.manager()._showingView=i.menuView,this.timer=setTimeout(function(){i.menuView._showChild(i)},200)):i.menuView&&i.menuView._childView&&i.menuView.$_hideChildView()}.bind(r),o.onmouseout=function(t){var e=t.currentTarget,i=e.menuItem;this.$_setSelected(e,!1),i.checked&&i.checked()?e.$_check.style.backgroundImage=A7.$_getIcon(i.group()?"radio":"check"):i instanceof E4&&e.$_arrow&&(e.$_arrow.style.backgroundImage=A7.$_getIcon("expander"))}.bind(r),h=u2.createElement("span"),w1.setStyles(h,{display:"inline-block",width:"20px",minHeight:"7px",verticalAlign:"middle"}),h.innerHTML="",((u=s._checkedCallback)?u(s.proxy(),c):s.checked&&s.checked())&&w1.setStyles(h,{backgroundImage:A7.$_getIcon(s.group()?"radio":"check"),backgroundRepeat:"no-repeat",backgroundPosition:"center center"}),h.tabIndex=-1,w1.disableSelection(h),o.appendChild(h),o.$_check=h,void 0===(d=(u=s._labelCallback)?u(s.proxy(),c):void 0)&&(d=s.label()),(l=u2.createElement("span")).id="$popupMenu_item_"+A7.$_menuId++,l.style.fontFamily="Tahoma",l.style.fontStyle="normal",l.style.fontVariant="normal",l.style.fontWeight="normal",l.style.fontSize="10pt",l.style.paddingRight="24px",l.innerHTML=d,l.tabIndex=-1,w1.disableSelection(l),o.appendChild(l),s instanceof E4&&s.$_enabled){var g=u2.createElement("span");w1.setStyles(g,{position:"absolute",right:"0px",width:"24px",height:"17px",backgroundImage:A7.$_getIcon("expander"),backgroundRepeat:"no-repeat",backgroundPosition:"center center"}),h.style.verticalAlign="middle",g.innerHTML=" ",g.tabIndex=-1,w1.disableSelection(g),o.appendChild(g),o.$_arrow=g}w1.disableSelection(o),t.appendChild(o),f++}r.$_cnt=f}}),J6=I1("PopupMenuManager",a2,{init:function(t,e){this._super(),this._container=t,this._actionTarget=e,this._menus={},this._mainView=null,this._showingView=null,this.$_keyhandler=null},actionTarget:null,showing:function(){if(this._mainView){var t=this._mainView._element;return u2.documentElement.contains(t)}},getMenu:function(t){if(t)return this._menus[t]},addMenu:function(t,e,i){if(o77(t))return null;var n=this._menus[t];return n&&!i||(n=e instanceof E4?(n._parent=this,e):new E4(t,this,e),this._menus[t]=n),n},removeMenu:function(t){t&&delete this._menus[t]},clearMenus:function(){this._menus={}},show:function(t,e,i,n,s){if(!this._mainView&&(t=this.$_getMenu(t))){var r=e.boundsByContainer();i=isNaN(i)?0:i,n=isNaN(n)?0:n,this._mainView=A7._borrowView(),this._mainView._targetView=e,this._mainView.show(this._container._container,null,t,r.x+i,r.bottom()+n,r.width)}this._mainView&&(s&&(this._cancelCallback=s),this.$_addKeyHandler())},showAt:function(t,e,i,n,s){this._mainView||(t=this.$_getMenu(t))&&(this._mainView=A7._borrowView(),this._mainView._targetView=this._container&&this._container.findElementAt(e,i,!0),this._mainView.show(this._container._container,null,t,e,i,n)),this._mainView&&(s&&(this._cancelCallback=s),this.$_addKeyHandler())},showContext:function(t,e,i){t&&!this._mainView&&(this._mainView=A7._borrowView(),this._mainView._targetView=this._container&&this._container.findElementAt(e,i,!0),this._mainView.show(this._container._container,null,t,e,i,0)),this._mainView&&this.$_addKeyHandler()},close:function(){if(this._mainView)return this.$_removeKeyHandler(),this._mainView._targetView=null,this._mainView.hide(),A7._returnView(this._mainView),!(this._mainView=null)},$_getMenu:function(t){return"string"==typeof t?this.getMenu(t):t instanceof E4?t:new E4(null,this,t)},_doMenuItemClick:function(t){this.fireEvent(J6.MENU_ITEM_CLICKED,t)},$_findActiveView:function(){for(var t=this._mainView._childView;t;)return t._childView&&(t=t._childView),t},$_isEnabledItem:function(t){if(t){var e=t.menuItem;return e&&e.$_enabled&&(!e.isSeparator||!e.isSeparator())}},$_isPopupMenu:function(t){return t&&t.menuItem&&t.menuItem.$_enabled&&t.menuItem instanceof E4},$_findNextItem:function(t){var e=t._currDiv,i=e?e.$_idx:-1,n=t.$_cnt;for(i=Math.max(0,i+1);i<n;){if(e=t.$_divs[i],this.$_isEnabledItem(e))return e;i++}return e=t.$_divs[0],this.$_isEnabledItem(e)?e:t._currDiv},$_findPrevItem:function(t){for(var e=t._currDiv,i=e?e.$_idx:0,n=t.$_cnt;0<=--i;)if(e=t.$_divs[i],this.$_isEnabledItem(e))return e;return e=t.$_divs[n-1],this.$_isEnabledItem(e)?e:t._currDiv},$_addKeyHandler:function(){f2.onkeydown=function(t){var e,i=t.keyCode,n=this.$_findActiveView()||this._mainView,s=this._mainView._targetView,r=n._currDiv;if(0<n.$_cnt){switch(i){case i1.ESC:this.close(),this._cancelCallback&&this._cancelCallback();break;case i1.ENTER:r&&(this.close(),r.menuItem.click(s));break;case i1.DOWN:e=this.$_findNextItem(n);break;case i1.UP:e=this.$_findPrevItem(n);break;case i1.RIGHT:this.$_isPopupMenu(r)&&this.$_isEnabled(r)&&(this._showingView=n)._showChild(r,!0);break;case i1.LEFT:r&&n._parentView&&n._parentView.$_hideChildView()}return e&&e!=r&&(n.$_setSelected(r,!1),n._currDiv=e,n.$_setSelected(e,!0)),G2(t),!0}}.bind(this)},$_removeKeyHandler:function(){f2.onkeydown=null}});J6.MENU_ITEM_CLICKED="onPopupMenuManagerMenuItemClicked";var X18=I1("Progress",a2,{init:function(){this._super(),this._view=new e07,this._runner=null,this._next=0,this._completed=!1,this._timer=void 0},min:0,max:100,step:1,execute:function(t){t&&(this._runner=t,this._next=this._min,t.container instanceof HTMLElement&&(this._view.setProperties(this._min,this._max,this._min),this._view.show(t.container)),this.$_runNext())},$_runNext:function(){if(this._next<this._max){var t=this._runner.run(this._next);if(this._next+=this._step,this._view.setPosition(this._next,t),S3&&y0("P R O G R E S S : "+this._min+" > "+this._next+" > "+this._max),this._next<this._max)return void setTimeout(function(){this.$_runNext()}.bind(this),0)}!this.$_completed&&this.$_complete()},$_complete:function(){try{this._runner.complete&&this._runner.complete()}finally{S3&&y0("P R O G R E S S : completed : "+ +this._min+" > "+this._next+" > "+this._max),this.$_completed=!0,this._view.close()}}}),e07=I1("ProgressView",null,{init:function(){this._super(),this._container=null,this._dom=new w1(this.$_createElement()),this._mask=new w1(this.$_createMask()),this._canceler=void 0,this._min=0,this._max=0,this._pos=0},title:"Load Data",message:"...",position:function(){return this._pos},setPosition:function(t,e){(t=Math.max(this._min,Math.min(this._max,t)))!=this._pos&&(this._pos=t,this._message=e,this.$_refreshView())},visible:function(){return this._dom.attached()},setProperties:function(t,e,i,n,s){this._min=t,this._max=Math.max(t,e),this._max==this._min&&(this._max=this._min+1),this._pos=Math.max(this._min,Math.min(this._max,i)),this._message=n,s&&this.$_refreshView()},show:function(t,e,i,n){var s,r,o=this._dom,a=o.element(),h=a.$_cancel;this._container=t,this._canceler=p4(n),e&&this.$_setTitle(e),h.style.display=this._canceler?"block":"none",h.style.color="#400",i&&t.appendChild(this._mask.element()),t.appendChild(a),s=t.getBoundingClientRect(),r=o.size(),o.move((s.width-r.width)/2,(s.height-r.height)/3)},close:function(){this._dom.detach(),this._mask.detach()&&this._container instanceof W27&&this._container.setFocus()},$_createElement:function(){var t=w1.createElement("div",{position:"absolute",zIndex:3001,minWidth:"250px",padding:"4px 10px 12px 8px",backgroundColor:"rgba(245, 250, 255, 0.92)",border:"1px solid #113",borderRadius:"4px",fontFamily:"Trebuchet MS, Helvetica, sans-serif",color:"#111"});return t.appendChild(t.$_title=this.$_createTitle()),t.appendChild(t.$_bar=this.$_createBar()),t.appendChild(t.$_msg=this.$_createMsg()),t.appendChild(t.$_cancel=this.$_createCancel()),t},$_createMask:function(){return w1.createElement("div",{position:"absolute",zIndex:3e3,backgroundColor:"rgba(0, 0, 0, 0.05)",border:"none",width:"100%",height:"100%"})},$_createTitle:function(){var t=w1.createElement("div",{width:"100%",minHeight:"15px",marginBottom:"10px"}),e=w1.createElement("span",{color:"#321",fontSize:"15px"});return e.innerHTML=this._title,t.appendChild(t.$_span=e),t},$_createBar:function(){var t=w1.createElement("div",{width:"100%",height:"9px",background:"#ddd",border:"1px solid #555"}),e=w1.createElement("div",{height:"100%",width:"0px",background:"#fff",borderRight:"none"});return t.appendChild(e),t.$_led=e,t},$_createMsg:function(){var t=w1.createElement("div",{width:"100%",textAlign:"center"}),e=w1.createElement("span",{fontSize:"13px",color:"#000"});return t.appendChild(t.$_span=e),e.innerHTML=this._message,t},$_createCancel:function(){var t=w1.createElement("div",{float:"right",textAlign:"right",fontSize:"13px",fontWeight:"bold",fontStyle:"italic",textDecoration:"underline",color:"#400"});return t.innerHTML=X1._default.progressCancel||"Cancel",t.style.cursor="pointer",t.onmouseover=function(t){t.target.style.color="#d00"},t.onmouseout=function(t){t.target.style.color="#400"},t.onclick=function(){this._canceler&&!0===this._canceler()&&this.close()}.bind(this),t},$_refreshView:function(){var t=this._dom.element(),e=t.$_bar,i=e.$_led;t.$_msg.$_span.innerHTML=w1.htmlEncode(this._message),i.style.borderRight=this._pos>this._min&&this._pos<this._max?"1px solid #555":"none";var n=w1.getSize(e);i.style.width=Math.min(n.width-1,Y1(n.width*(this._pos-this._min)/(this._max-this._min)))+"px"},$_setMessage:function(t){this._dom.element().$_msg.$_span.innerHTML=w1.htmlEncode(this._message)},$_setTitle:function(t){var e=this._dom.element().$_title.$_span;this.setTitle(t),e.innerHTML=w1.htmlEncode(this._title)}}),x07=I1("ProgressManager",null,{init:function(t){this._super(),this._container=t,this._title=null,this._view=null},show:function(t,e,i,n){this._view||(this._view=new e07),this._view.show(t||this._container,a17(e,"Load data"),i,n)},close:function(){this._view&&this._view.close()},setProperties:function(t,e,i,n){n=n||x07.getMessage(t,e,i),this._view&&this._view.setProperties(t,e,i,n,!0)}},{getMessage:function(t,e,i){var n=W7.getFormatter("#,##0"),s="";return t<e&&(s+=n.format(i)+" / "+n.format(e)+" ("+parseInt(100*(i-t)/(e-t))+"%)"),s}}),T2=A2("TextAlign",{LEFT:"left",CENTER:"center",RIGHT:"right"}),N7=A2("TextLayout",{TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"});g1.prototype={constructor:g1,clone:function(){return new g1(this.x,this.y,this.width,this.height)},getInner:function(){return new g1(0,0,this.width,this.height)},equals:function(t){return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},toString:function(){return"{x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+"}"},left:function(){return this.x},setLeft:function(t){var e=t-this.x;return this.x+=e,this.width-=e,this},leftBy:function(t){return this.x+=t,this.width-=t,this},right:function(){return this.x+this.width},setRight:function(t){var e=t-(this.x+this.width);return this.width+=e,this},rightBy:function(t){return this.width+=t,this},top:function(){return this.y},setTop:function(t){var e=t-this.y;return this.y+=e,this.height-=e,this},topBy:function(t){return this.y+=t,this.height-=t,this},bottom:function(){return this.y+this.height},setBottom:function(t){var e=t-(this.y+this.height);return this.height+=e,this},bottomBy:function(t){return this.height+=t,this},setSize:function(t,e){this.width=t,this.height=e},shrink:function(t,e){return this.width-=t,this.height-=e,this},expand:function(t,e){return this.width+=t,this.height+=e,this},contains:function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},isEmpty:function(){return this.width<=0||this.height<=0},setEmpty:function(){return this.width=this.height=0,this},set:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},setBy:function(t,e,i,n){return this.x+=t,this.y+=e,this.width+=i,this.height+=n,this},copy:function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},copyHorz:function(t){return this.x=t.x,this.width=t.width,this},copyVert:function(t){return this.y=t.y,this.height=t.height,this},inflate:function(t,e,i,n){return e=1<arguments.length?e:0,i=2<arguments.length?i:t,n=3<arguments.length?n:e,t&&this.setLeft(this.x-t),e&&this.setTop(this.y-e),i&&this.setRight(this.right()+i),n&&this.setBottom(this.bottom()+n),this},offset:function(t,e){return this.x+=t,this.y+=e,this},round:function(){var t=this.clone();return t.x>>>=0,t.y>>>=0,t.width>>>=0,t.height>>>=0,t},union:function(t){var e=this.clone();return e.setLeft(Math.min(this.x,t.x)),e.setRight(Math.max(this.right(),t.right())),e.setTop(Math.min(this.y,t.y)),e.setBottom(Math.max(this.bottom(),t.bottom())),e},normalize:function(){return this.width<0&&(this.x-=this.width,this.width*=-1),this.height<0&&(this.y-=this.height,this.height*=-1),this}},J2.EMPTY=new J2,J2.empty=function(){return new J2},J2.create=function(t,e){return new J2(t,e)},J2.prototype={constructor:J2,clone:function(){return new J2(this.width,this.height)},equals:function(t){return t===this||t&&this.width===t.width&&this.height===t.height},toString:function(){return"{width: "+this.width+", height: "+this.height+"}"},isEmpty:function(){return 0===this.width||0===this.height},setEmpty:function(){return this.width=this.height=0,this},set:function(t,e){return this.width=t,this.height=e,this},round:function(){var t=this.clone();return t.width>>>=0,t.height>>>=0,t}},J0.EMPTY=new J0,J0.empty=function(){return new J0},J0.create=function(t,e){return new J0(t,e)},J0.prototype={constructor:J2,clone:function(){return new J0(this.x,this.y)},equals:function(t){return t===this||t&&this.width===t.width&&this.height===t.height},toString:function(){return"{x: "+this.x+", y: "+this.y+"}"},isEmpty:function(){return 0===this.x||0===this.y},setEmpty:function(){return this.x=this.y=0,this},set:function(t,e){return this.x=t,this.y=e,this},round:function(){var t=this.clone();return t.x>>>=0,t.y>>>=0,t}},S17.prototype={constructor:S17,clear:function(){this.left.setEmpty(),this.right.setEmpty(),this.top.setEmpty(),this.bottom.setEmpty()},setLeft:function(t,e,i,n){this.left.set(t,e,i,n)},setRight:function(t,e,i,n){this.right.set(t,e,i,n)},setTop:function(t,e,i,n){this.top.set(t,e,i,n)},setBottom:function(t,e,i,n){this.bottom.set(t,e,i,n)}},S0.prototype={constructor:S0,clone:function(){return new S0(this._size,this._fixed)},getSize:function(t){return this._fixed?this._size:t*this._size}},S0.Empty=new S0(0,!1),S0.createFrom=function(t){var e=0,i=!1;if(t){var n=String(t).trim(),s=n.length;0<s&&(2<s&&n.lastIndexOf("px")==s-2&&(i=!0,n=n.substr(0,s-3)),n&&(e=parseFloat(n)))}return new S0(e,i)},S0.equals=function(t,e){return t instanceof S0&&e instanceof S0&&t._size===e.size&&t._precentage===e._precentage},V4.prototype={constructor:V4,clone:function(){return new V4(this._size,this._fixed)},size:function(){return this._size},getSize:function(t,e){return this._fixed?this._size:t*this._size/(e||100)}},V4.Empty=new V4(0,!0),V4.createFrom=function(t){if(void 0===t)return t;if("number"==typeof t)return new V4(t,!0);if(t){var e=String(t).trim(),i=e.length;if(0<i){var n=0,s=!0;return 1<i&&e.lastIndexOf("%")==i-1&&(s=!1,e=e.substr(0,i-1).trim()),e&&(n=parseFloat(e)),new V4(n,s)}}return null},V4.equals=function(t,e){return t instanceof V4&&e instanceof V4&&t._size===e.size&&t._fixed===e._fixed},V4.getFixed=function(t){return t instanceof V4&&t._fixed?t._size:0},V4.getFixedI=function(t){return t instanceof V4&&t._fixed?Y1(t._size):0},S5.prototype={constructor:S5,clone:function(){return new S5(this.width,this.height)},set:function(t,e){this.width=parseFloat(t),this.height=parseFloat(e)}},S5.createFrom=function(t){var e=0,i=0;if(t){var n=String(t).split(",");0<n.length&&(e=i=parseFloat(n[0])),1<n.length&&(i=parseFloat(n[1]))}return new S5(e,i)};var T4=m2.prototype;m2._ERROR=new m2(c2,!0),m2._ERROR.error=!0,m2.createFrom=function(t,e,i){var n=m2._parse(t,$_tempColor,e,i,!1);return n?"object"==typeof n?n:$_tempColor.clone():null},m2.createWithArgb=function(t,e,i,n){var s=new m2;return s._a=t,s._r=e,s._g=i,s._b=n,s},m2._parse=function(t,e,i,n,s){var r=String(t);if(r){var o,a=r.length;if("#"==(r=r.trim().toLowerCase()).charAt(0))if(r=r.substr(1),6<=--a&&a<=8)e._b=v7(r.substr(a-2,2),16),e._g=v7(r.substr(a-4,2),16),e._r=v7(r.substr(a-6,2),16),e._a=6==a?i?NaN:1:v7(r.substr(0,a-6),16)/255;else{if(3!=a){if(s)throw new Error(X1._default.invalidColorText+": "+t);return e._r=e._g=e._b=0,e._a=i?0:1,!1}e._r=v7(r.charAt(0)+r.charAt(0),16),e._g=v7(r.charAt(1)+r.charAt(1),16),e._b=v7(r.charAt(2)+r.charAt(2),16),e._a=i?NaN:1}else if(0==r.indexOf("rgba(")&&")"==r.charAt(a-1))o=(r=r.substring(5,a-1)).split(","),e._r=v7(o[0]),e._g=v7(o[1]),e._b=v7(o[2]),e._a=o[3];else{if(0!=r.indexOf("rgb(")||")"!=r.charAt(a-1)){if(i&&H07.hasOwnProperty(r))return H07[r];if(!i&&j4.hasOwnProperty(r))return j4[r];if(!n&&(o=parseInt(r),!isNaN(o)))return e._a=(t>>>24)/255,e._r=(16711680&t)>>16,e._g=(65280&t)>>8,e._b=255&t,!0;if(s)throw new Error(X1._default.invalidColorText+": "+t);return e._a=e._r=e._g=e._b=0,!1}o=(r=r.substring(4,a-1)).split(","),e._r=v7(o[0]),e._g=v7(o[1]),e._b=v7(o[2]),e._a=i?NaN:1}return!0}return!1},m2.getColorStringArray=function(t){return t.trim().split(/\s+|(rgba\(.*\))|(rgb\(.*\))|(pal\(.*\))/).filter(Boolean)},m2.getColorCsvArray=function(t){return t.trim().split(/\s*,\s*|\s+|(rgba\(.*\))|(rgb\(.*\))|(pal\(.*\))/).filter(Boolean)},m2.getColorStopCsvArray=function(t){return t.trim().split(/\s*,\s*|\s+|(rgba\(.*\))|(rgb\(.*\))|(pal\(.*\))|(stops\(.*\))/).filter(Boolean)},T4.clone=function(){return new m2(this)},T4.cloneWithBrightness=function(t){return $$_addBrightness(this,t,!1,null)},T4.copy=function(t,e){return this._a=t?(this._r=t._r,this._g=t._g,this._b=t._b,isNaN(t._a)?Number(e):t._a):Number(e),this},T4.a=function(){return this._a},T4.r=function(){return this._r},T4.g=function(){return this._g},T4.b=function(){return this._b},T4.value=function(){return"rgba("+this._r+","+this._g+","+this._b+","+this._a+")"},T4.valueWithBrightness=function(t){return $$_addBrightness(this,t,!0)},T4.argb=function(){return B1(255*this._a)*(1<<24)+(this._r<<16)+(this._g<<8)+this._b},T4.rgb=function(){return this._r<<16|this._g<<8|this._b},T4.extractAlpha=function(){var t=this._a;return this._a=NaN,t},T4.forceAlpha=function(t){return isNaN(this._a)&&(this._a=isNaN(t)?1:t),this},T4.toHex=function(){return""+a4(B1(255*this._a))+a4(this._r)+a4(this._g)+a4(this._b)},T4.toColorHex=function(){return""+a4(this._r)+a4(this._g)+a4(this._b)},T4.toString=function(){return"#"+a4(B1(255*this._a))+a4(this._r)+a4(this._g)+a4(this._b)},T4.toColorString=function(){return"#"+a4(this._r)+a4(this._g)+a4(this._b)},T4.css=w4?function(){return"#"+a4(this._r)+a4(this._g)+a4(this._b)}:function(){return"rgba("+this._r+","+this._g+","+this._b+","+this._a+")"},T4.svg=w4?function(t){t.style.fill="#"+a4(this._r)+a4(this._g)+a4(this._b)}:function(t){t.style.fill="rgba("+this._r+","+this._g+","+this._b+","+this._a+")"},m2.areEqual=function(t,e){return t&&e&&t._r==e._r&&t._g==e._g&&t._b==e._b&&t._a==e._a};var $_tempColor=new m2,$_tempColors=[new m2,new m2],j4={transparent:new m2(0),aqua:new m2(4278255615),black:new m2(4278190080),blue:new m2(4278190335),fuchsia:new m2(4294902015),gray:new m2(4286611584),green:new m2(4278222848),lime:new m2(4278255360),maroon:new m2(4286578688),navy:new m2(4278190208),olive:new m2(4286611456),orange:new m2(4294944e3),purple:new m2(4286578816),red:new m2(4294901760),silver:new m2(4290822336),teal:new m2(4278222976),white:new m2(4294967295),yellow:new m2(4294967040),dimGray:new m2(4285098345),ltGray:new m2(4292072403),silver:new m2(4290822336),darkGray:new m2(4289309097)},H07={transparent:new m2("#00000000"),aqua:new m2("#00ffff",!0),black:new m2("#000000",!0),blue:new m2("#0000ff",!0),fuchsia:new m2("#ff00ff",!0),gray:new m2("#808080",!0),green:new m2("#008000",!0),lime:new m2("#00ff00",!0),maroon:new m2("#800000",!0),navy:new m2("#000080",!0),olive:new m2("#808000",!0),orange:new m2("#ffa500",!0),purple:new m2("#800080",!0),red:new m2("#ff0000",!0),silver:new m2("#c0c0c0",!0),teal:new m2("#008080",!0),white:new m2("#ffffff",!0),yellow:new m2("#ffff00",!0),dimGray:new m2("#696969",!0),ltGray:new m2("#d3d3d3",!0),silver:new m2("#c0c0c0",!0),darkGray:new m2("#a9a9a9",!0)};R4(U1.prototype,{color:function(){return this._color},alpha:function(){return this._color._a},opaque:function(){return 1<=this._color._a},applyTo:function(t){return t.setFill(this._color.value()),!0},toText:function(){return this._color.toString()},toColorText:function(){return this._color.toColorString()},css:w4?function(){return this._css||(this._css=this._color.toColorString()),this._css}:function(){return this._css||(this._css=this._color.value()),this._css},applyToCss:function(t){if(this._color._a<1){var e=this._color.toString();e="progid:DXImageTransform.Microsoft.gradient(startColorstr="+e+",endColorstr="+e+")",t.filter=e,t.background=""}else t.filter="",t.background=this._color.toColorString()},svg:w4?function(t){t.style.fill=this._color.toColorString()}:function(t){t.style.fill=this._color.value()}});var $SB=U1;R4($SB,{WHITE:new $SB(j4.white),BLACK:new $SB(j4.black),GRAY:new $SB(j4.gray),DIMGRAY:new $SB(j4.dimGray),LTGRAY:new $SB(j4.ltGray),SILVER:new $SB(j4.silver),DKGRAY:new $SB(j4.darkGray),RED:new $SB(j4.red),YELLOW:new $SB(j4.yellow),GREEN:new $SB(j4.green),BLUE:new $SB(j4.blue),SCROLL:new $SB(4293980400),SCROLLINDENT:new $SB(4294506744),NULL:{applyTo:function(t,e,i,n,s){return t.setFill("rgba(0, 0, 0, 0)"),!0}},areEqual:function(t,e){return t===e||(t&&e?m2.areEqual(t._color,e._color):!t==!e)}}),$SB.Null=$SB.NULL;var y6=I1("FillGradient",null,{init:function(t){this._super();var e=t?t.trim().toLowerCase():null;this.parse(e)},parse:function(t){},proxy:function(){return this}});y6.createFrom=function(t){if(t){var e=t.trim().toLowerCase();if(0==e.indexOf("linear"))return new T3(e);if(0==e.indexOf("radial"))return new X5(e);if(0==e.indexOf("glass"))return new O8(e)}return null};var T3=I1("LinearGradient",y6,{init:function(t){this._super(t),this._context=null},parse:function(t){var e,i,n,s,r,o,a,h,l;if(this._colors=[],this._ratios=[],this._angle=1,t){if(0!=(n=(e=m2.getColorStopCsvArray(t))[i=e.length-1]).indexOf("stops(")&&(n=null,i++),i<2||"linear"!=e[0])throw new Error(X1._default.invalidLinearGradientText+": "+t);for(s=1;s<i&&(r=String(e[s]),o=m2.createFrom(r,!1,!0));)this._colors[s-1]=o,s++;if(s<i&&(this._angle=parseFloat(e[s])),1==this._colors.length&&(this._colors[1]=this._colors[0].clone()),a=255/((i=this._colors.length)-1),this._ratios=[h=0],n)for(n=(r=n.substring(6,n.length-1)).split(","),l=0,s=1;s<i-1;s++)h=n[s-1]/100,isNaN(h)&&(h=l),this._ratios.push(h),l=h;else for(s=1;s<i-1;s++)h+=a,this._ratios.push(h/255);this._ratios.push(1)}},clone:function(){var t=new T3(null);return t._colors=this._colors.slice(),t._ratios=this._ratios.slice(),t._angle=this._angle,t},color:function(){return this._colors[0]},opaque:function(){for(var t=0,e=this._colors.length;t<e;t++)if(this._colors[t]._a<1)return!1;return!0},prepare:function(t){this._context=t},applyTo:function(t,e,i,n,s){var r;switch(this._angle){case 90:r=t.createLinearGradient(e,i,e,i+s);break;case 45:r=t.createLinearGradient(e,i,e+n,i+s);break;case 0:default:r=t.createLinearGradient(e,i,e+n,i)}for(var o=0,a=this._colors.length;o<a;o++){var h=this._colors[o].value();r.addColorStop(this._ratios[o],h)}return t.setFill(r),!0},applyShadowTo:function(t){},toText:function(){for(var t="linear",e=0,i=this._colors.length;e<i;e++)t+=","+this._colors[e].toString();return t+","+this._angle},css:w4?function(){return this._colors[0].toColorString()}:function(){return"linear-gradient(180deg,"+this._colors[0].value()+","+this._colors[1].value()+")"},applyToCss:function(t){var e="progid:DXImageTransform.Microsoft.gradient(startColorstr="+this._colors[0].toString()+",endColorstr="+this._colors[1].toString()+")";t.filter=e,t.background=""},svg:w4?function(t){t.style.fill=this._colors[0].toColorString()}:function(t){t.setAttributeNS(null,"fill",t.ownerSVGElement.$_svgPool.$_getLinearGradient(this))}});T3.areEqual=function(t,e){var i=t&&e;if(i){if(i=t._colors.length==e._colors.length)for(n=0;n<t._colors.length&&(i=m2.areEqual(t._colors[n],e._colors[n]));n++);if(i){if(i=t._ratios.length==e._ratios.length)for(var n=0;n<t._ratios.length&&t._ratios[n]==e._ratios[n];n++);i&&(i=t._angle==e._angle)}}return i};var X5=I1("RadialGradient",y6,{init:function(t){this._super(t)},parse:function(t){if(this._colors=[],this._ratios=[],t){var e=m2.getColorCsvArray(t),i=e.length;if(i<2||"radial"!=e[0])throw new Error(X1._default.invalidRadialGradientText+": "+t);for(var n=1;n<i;){var s=String(e[n]),r=m2.createFrom(s,!1,!0);if(!r)break;this._colors[n-1]=r,n++}n<i&&(this._angle=parseFloat(e[n])),1==this._colors.length&&(this._colors[1]=this._colors[0].clone());var o=255/((i=this._colors.length)-1),a=0;for(this._ratios=[0],n=1;n<i-1;n++)a+=o,this._ratios.push(a/255);this._ratios.push(1)}},clone:function(){var t=new X5(null);return t._colors=this._colors.slice(),t._ratios=this._ratios.slice(),t},prepare:function(t){},applyTo:function(t,e,i,n,s){for(var r=t.createRadialGradient(e,i,e+n,i+s),o=0,a=this._colors.length;o<a;o++){var h=this._colors[o].value();r.addColorStop(this._ratios[o],h)}return t.setFill(r),!0}}),O8=I1("GlassGradient",y6,{init:function(t){this._super()},parse:function(t){}});R4(Z1.prototype,{applyTo:function(t){return t.setStroke(this._color.value(),this._width,this._dash),!0},color:function(){return this._color},width:function(){return this._width},opaque:function(){return 1<=this._color._a},toText:function(){return this._color.toString()+","+this._width+"px"},css:w4?function(){return this._css||(this._css=this._width+"px "+(this._dash?"dashed ":"solid ")+this._color.toColorString()),this._css}:function(){return this._css||(this._css=this._width+"px "+(this._dash?"dashed ":"solid ")+this._color.value()),this._css},svg:w4?function(t){var e=t.style;e.stroke=this._color.toColorString(),e.strokeWidth=this._width,this._dash&&(e.strokeDasharray="2,2")}:function(t){var e=t.style;e.stroke=this._color.value(),e.strokeWidth=this._width,this._dash&&(e.strokeDasharray="2,2")}});var $SP=Z1;R4($SP,{WHITE:new $SP(j4.white),BLACK:new $SP(j4.black),GRAY:new $SP(j4.gray),DIMGRAY:new $SP(j4.dimGray),LTGRAY:new $SP(j4.ltGray),SILVER:new $SP(j4.silver),DKGRAY:new $SP(j4.darkGray),RED:new $SP(j4.red),GREEN:new $SP(j4.green),BLUE:new $SP(j4.blue),FOCUS:new $SP(j4.gray,1,[1,1]),areEqual:function(t,e){var i=t&&e&&m2.areEqual(t._color,e._color)&&t._width==e._width;if(i&&(i=!t._dash==!e._dash)&&t._dash)for(var n=t._dash.length;n--&&t._dash[n]==e._dash[n];);return i},fromFill:function(t){return t?new Z1(t.color()):null}});var H27=I1("Palette",null,{init:function(t,e,i){this._super(),this._owner=t,this._items=[],isNaN(i)?this._alpha=1:this._alpha=Math.max(0,Math.min(1,i)),this._nextItem=0,e&&this.addItems(e)},owner:function(){return this._owner},getNext:function(){var t=this._items.length;return 0<t?this._items[this._nextItem++%t]:null},getRandomItem:function(){var t=this._items.length;return 0<t?this._items[Y1(Math.random()*t)]:null},reset:function(t){this._nextItem=isNaN(t)?0:t},getItem:function(t){var e=this._items.length;return 0<e?this._items[t%e]:null},addItem:function(t){return t=this._createItem(t),this._items.indexOf(t)<0?(this._items.push(t),this._changed(),t):null},addItems:function(t){if(S4(t)&&(t=t.split(",")),V1(t))for(var e=0,i=t.length;e<i;e++)this.addItem(t[e])},removeItem:function(t){var e=this._items.indexOf(t);0<=e&&(this._items.splice(e,1),this._changed())},_changed:function(){this._owner&&this._owner._paletteChanged&&this._owner._paletteChanged(this)},_createItem:function(t){}}),j8=I1("FillPalette",H27,{init:function(t,e,i){this._super(t,e,i)},_createItem:function(t){var e=y87(t,this._alpha);return e instanceof U1||e instanceof y6?e:null}}),A28=I1("StrokePalette",H27,{init:function(t,e,i,n){!isNaN(i)&&1<=i?this._width=B1(i):this._width=1,this._super(t,e,n)},_createItem:function(t){var e=K97(t,this._width,this._alpha);return e instanceof Z1?e:null}}),b28=I1("FontPalette",H27,{init:function(t,e){b28.Base.init.call(this,t,e)},_createItem:function(t){return D77(t)||null}}),m28=I1("PaletteManager",null,{init:function(t){this._super(),this._owner=t,this._palettes={}},get:function(t){return this._palettes[t]},clear:function(t){0<this._palettes.length&&(this._palettes={},!t&&this._changed())},addFill:function(t,e,i,n){var s;return t&&e&&!this._palettes.hasOwnProperty(t)&&(s=this._palettes[t]=new j8(this,e,i),!n&&this._changed()),s},addStroke:function(t,e,i,n,s){var r;return t&&e&&!this._palettes.hasOwnProperty(t)&&(r=this._palettes[t]=new A28(this,e,i,n),!s&&this._changed()),r},addPalettes:function(t,e){if(V1(t)&&0<t.length){for(var i=t.length;i--;)this.add(t[i],!0);!e&&this._changed()}},add:function(t,e){var i,n=t;if(n&&n.name){if(i=n.fills,V1(i)||S4(i))return this.addFill(n.name,i,n.alpha,e);if(i=n.strokes,V1(i)||S4(i))return this.addStroke(n.name,i,n.width,n.alpha,e)}},remove:function(t,e){var i=this._palettes.indexOf(t);return 0<=i&&(this._palettes.splice(i,1),!e&&this._changed(),!0)},_paletteChanged:function(){this._changed()},_changed:function(){this._owner.onPaletteChanged(this)}}),A9=I1("PaletteItem",null,{init:function(t,e){this._super(t),this._scope=e,this._num=!1,this._any=!1,this.assign(t)},fetch:function(t){var e=t||this._scope,i=e.getPalette(this._palette);if(i)return void 0!==this._restart&&i.reset(this._restart),this._num?i.getItem(this._index):this._any?i.getRandomItem():this._index?i.getItem(e.getPaletteIndex(this._index)):i.getNext()},assign:function(t){if(t instanceof A9)this._palette=t._palette,this._index=t._index,this._restart=t._restart;else if(t){var e=String(t).trim();if(0!=e.indexOf("p(")||e.lastIndexOf(")")!=e.length-1)throw"Invalid palette item value: "+t;var i=e.substring(2,e.length-1).split(":");this._palette=i[0].trim(),(e=1<i.length?i[1].trim():void 0)?(this._index=Y1(e),isNaN(this._index)?(this._any="?"==e,this._index=this._any?void 0:e,this._num=!1):(this._num=!0,this._any=!1)):(this._index=void 0,this._num=!1,this._any=!1),(e=2<i.length?i[2].trim():void 0)?(this._restart=Y1(e),isNaN(this._restart)&&(this._restart=void 0)):this._restart=void 0}}}),D28=I1("FillCollection",null,{init:function(t,e){if(this._super(),V1(t)){var i,n,s=t.length,r=new Array(s);for(i=0;i<s;i++)"string"==typeof(n=t[i])&&(n=n.trim()),r[i]=X4(n,e);this._fills=r}else this._fills=[]},count:function(){return this._fills.length},getItem:function(t){var e=this._fills[t];return e&&e.fetch?e.fetch(this._scope):e}}),Q28=I1("StrokeCollection",null,{init:function(t,e){if(this._super(),V1(t)){var i,n=t.length,s=new Array(n);for(i=0;i<n;i++)s[i]=_createstroke(t[i],e);this._strokes=s}else this._strokes=[]},count:function(){return this._strokes.length},getItem:function(t){var e=this._strokes[t];return e&&e.fetch?e.fetch(this._scope):e}}),$_fillCtors={"#":U1,l:T3,r:X5,g:O8,p:A9},F28=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=F28||function(t){setTimeout(t,10)};var p28="Tahoma",s3=12,C7=s3+"px "+p28,$_TEXT_OFF=0;I3.getEllipsePoint=function(t,e,i,n,s,r,o){s+=r;var a=o?-1:1,h={};return h.x=t+Math.cos(s*a)*i,h.y=e+Math.sin(-s*a)*n,h},I3.getArcPoint=function(t,e,i,n,s,r,o,a,h){Math.abs(r)>2*Math.PI&&(r=2*Math.PI),h===c2&&(h=.5);var l=a?-1:1;r=(s+=3*Math.PI/2+o)-r*l*h;var u={};return u.x=t+Math.cos(r*l)*i,u.y=e+Math.sin(-r*l)*n,u};var k0=I1("ShapeCellRenderer",null,{init:function(){this._super()},draw:function(t,e,i,n,s){if(i||n){var r=parseFloat(s);r=isNaN(r)?0:r%360*Math.PI/180,this._doDraw(t,e,i,n,r)}},_doDraw:function(t,e,i,n,s){}},{getShape:function(t,e){var i=null;return e&&("empty"==(e=e.toLowerCase())?i=z28.Default:"ellipse"==e||"circle"==e?i=t._ellipse||(t._ellipse=new J07):$$_polygonShapes.hasOwnProperty(e)&&(i=t._polygon||(t._polygon=new M07),t._polygon.setShape(e))),i}}),M07=I1("PolygonShape",k0,{init:function(t){this._super(),this.setShape(t)},shape:null,setShape:function(t){this._shape=t?t.toLowerCase():null},_doDraw:function(t,e,i,n,s){var r,o,a,h,l=this._shape;if($$_polygonShapes.hasOwnProperty(l)){if(r=$$_polygonShapes[l]){for(a=0,h=(r=r.slice()).length/2;a<h;a++)r[2*a]=e.x+r[2*a]*e.width,r[2*a+1]=e.y+r[2*a+1]*e.height;r.push(r[0],r[1]),s&&(t.save(),t.rotateAt(s,e.x+e.width/2,e.y+e.height/2)),t.drawPolygonArray(i,n,r),s&&t.restore()}}else if($$_pairShapes.hasOwnProperty(l)&&(o=$$_pairShapes[l])){for(h=(r=(r=o[a=0]).slice()).length/2;a<h;a++)r[2*a]=e.x+r[2*a]*e.width,r[2*a+1]=e.y+r[2*a+1]*e.height;for(r.push(r[0],r[1]),t.drawPolygonArray(i,n,r),a=0,h=(r=(r=o[1]).slice()).length/2;a<h;a++)r[2*a]=e.x+r[2*a]*e.width,r[2*a+1]=e.y+r[2*a+1]*e.height;r.push(r[0],r[1]),t.drawPolygonArray(i,n,r)}}},{EMPTY:"empty",RECTANGLE:"rectangle",TRIANLGE:"triangle",INVERTED_TRIANLGE:"itriangle",DIAMOND:"diamond",UP_ARROW:"uparrow",DOWN_ARROW:"downarrow",LEFT_ARROW:"leftarrow",RIGHT_ARROW:"rightarrow",PLUS:"plus",MINUS:"minus",EQUAL:"equal",STAR:"star",PENTAGON:"pentagon"}),$$_polygonShapes={empty:null,rectangle:[0,0,1,0,1,1,0,1],triangle:[.5,0,0,1,1,1],itriangle:[0,0,.5,1,1,0],diamond:[.5,0,0,.5,.5,1,1,.5],uparrow:[.5,0,0,.5,.3,.5,.3,1,.7,1,.7,.5,1,.5],downarrow:[.3,0,.3,.5,0,.5,.5,1,1,.5,.7,.5,.7,0],leftarrow:[0,.5,.5,1,.5,.7,1,.7,1,.3,.5,.3,.5,0],rightarrow:[0,.3,0,.7,.5,.7,.5,1,1,.5,.5,0,.5,.3],plus:[.3,0,.3,.3,0,.3,0,.7,.3,.7,.3,1,.7,1,.7,.7,1,.7,1,.3,.7,.3,.7,0],minus:[0,.3,0,.7,1,.7,1,.3],star:[.5,0,.6122,.3454,.9755,.3454,.6816,.559,.7938,.9045,.5,.691,.2061,.9045,.3183,.559,.02447,.3454,.3877,.3454],pentagon:[.5,0,.9755,.3454,.7938,.9045,.2061,.9045,.0244,.3454],hexagon:[.75,.0669,1,.5,.75,.933,.25,.933,0,.5,.25,.0669],octagon:[.6913,.038,.9619,.3086,.9619,.6913,.6913,.9619,.3086,.9619,.038,.6913,.038,.3086,.3086,.038],trapezium:[.3333,0,.6666,0,1,1,0,1],parallelogram:[.25,0,1,0,.75,1,0,1]},$$_pairShapes={equal:[[0,.2,0,.4,1,.4,1,.2],[0,.6,0,.8,1,.8,1,.6]]},J07=I1("EllipseShape",k0,{init:function(t){this._super()},_doDraw:function(t,e,i,n){t.drawEllipse(i,n,e.x,e.y,e.width,e.height)}}),z28=I1("EmptyShape",k0,{init:function(){this._super()},_doDraw:function(t,e,i,n){}},null,function(t){t.Default=new t}),n28=I1("VisualContext",a2,{init:function(){this._super()}}),M27=I1("CanvasContext",n28,{init:function(t,e){this._super(),this._name=t,this._opaque=e,this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d"),this._graphics=new I3(this._ctx),this._dirty=!1,this._buffer=null,this._bufferCtx=null,e||(this._backBuff=this._backCtx=null)},name:function(){return this._name},isOpaque:function(){return this._opaque},isDirty:function(){return this._dirty},resize:function(t,e){t*O4>this._canvas.width&&(this._canvas.width=t*O4),e*O4>this._canvas.height&&(this._canvas.height=e*O4)},saveBack:function(t,e){var i=e.width,n=e.height,s=Math.max(0,i*O4),r=Math.max(0,n*O4),o=this._backBuff;s*r!=0&&(o||(o=this._backBuff=u2.createElement("canvas"),this._backCtx=this._backBuff.getContext("2d")),s>o.width&&(o.width=s),r>o.height&&(o.height=r),0<s&&0<r&&(this._backCtx.clearRect(0,0,s,r),this._backCtx.drawImage(t,e.x*O4,e.y*O4,s,r,0,0,s,r)))},prepare:function(t,e,i,n){if(t&&(e||i)){var s=t,r=s.x,o=s.y,a=Math.max(0,s.width),h=Math.max(0,s.height),l=this._buffer;l||(this._buffer=l=u2.createElement("canvas"),this._bufferCtx=l.getContext("2d")),a>l.width&&(l.width=a),h>l.height&&(l.height=h),0<a&&0<h&&this._bufferCtx.drawImage(this._canvas,r,o,a,h,0,0,a,h),n&&this._graphics.clear(0,0,this._canvas.width,this._canvas.height),0<e?(s.x+=e,a-=e):e<0&&(r-=e,a+=e),0<i?(s.y+=i,h-=i):i<0&&(o-=i,h+=i),0<a&&0<h&&this._ctx.drawImage(this._buffer,r,o,a,h,s.x,s.y,a,h),this._dirty=!0}else n&&this._graphics.clear(0,0,this._canvas.width,this._canvas.height);this._graphics.save(),1<O4&&this._graphics.scale(O4,O4)},restore:function(){this._dirty&&(this._dirty=!1),this._graphics.restore()},invalidate:function(t){this._dirty=!0}}),$$_layout_total=0,$$_render_total=0,W27=I1("UIComponent",L27,{init:function(t,e){this._super(t,e);var i,n,s=this._container;t?(this._createChildren(s),this.invalidateLayout(),this._registerEventHandlers(s)):(i=this._canvas=V2.createElement("canvas"),this._ctx=i.getContext("2d"),s.appendChild(i),i.width=s.clientWidth*O4,i.height=s.clientHeight*O4,i.innerText="Your browser does not support HTML5 Canvas.",(n=i.style).position="absolute",n.left="0px",n.top="0px",n.width="100%",n.height="100%",n.background="#fff",n.borderStyle="none",n.borderWidth="0px",n["-webkit-transform"]="translateZ(0)",this._defContext=new M27("defaultContext"),this._defContext.resize(this._width,this._height),this._contexts=null,this._createChildren(s),this.invalidateLayout(),this._registerEventHandlers(i)),this._imagePool=new m87,this._imagePool.addListener(this),this._forceValidation=!1},onImageLoaded:function(t){var e=this._imagePool.getImage(t);$_debug&&S3&&L8("Image loaded at "+t+" ["+e.width+","+e.height+"]"),this.invalidateLayout()},getCanvasImage:function(){return this._canvas&&this._canvas.toDataURL()},getContext:function(t){if(this._contexts)for(var e=this._contexts.length;e--;)if(this._contexts[e].name()==t)return this._contexts[e];return null},addContext:function(t){t&&(this._contexts||(this._contexts=[]),this._contexts.indexOf(t)<0&&(this._contexts.push(t),t.resize(this._width,this._height)))},getImage:function(t){return this._imagePool.getImage(t)},measureText:function(t,e){if(e){if(this.$_dom){var i=this.$_textMeasurer;return i.textContent=e,i.style.font=t?t.font:C7,i.offsetWidth}return this._ctx.font=t?t.font:"",this._ctx.measureText(e).width+1}return 0},measureTextRect:function(t,e,i,n,s,r,o,a,h){if(this.$_dom){var l=this.$_textMeasurer;return w1.calcTextBounds(l,t,e,i,n,s,r,o,a,h)}var u;switch(h){case D7.EXPLICIT:u=this._defContext._graphics.getExplicitTextRect(t,e,i,n,s,r,o,a);break;case D7.NORMAL:u=this._defContext._graphics.getWrapTextRect(t,e,i,n,s,r,o,a);break;default:u=this._defContext._graphics.getTextRect(t,e,i,n,s,r,o,a)}return u.width++,u},invalidateElement:function(t){if(!t._dom){var e=t._elementContext;e?(e.invalidate(t),this._defContext._dirty=!0):(e=t._context||this._defContext).invalidate(t)}this._drawing||this._updateRequested||(window.requestAnimationFrame(this._containerRender),this._updateRequested=!0)},validateElement:function(t){},scroll:function(t,e,i){this.$$_render(q4(),t,e,i)},resetSize:function(t,e){var i=this._container.clientWidth,n=this._container.clientHeight;if(t||(!e||0<i&&0<n)&&(this._width!=i||this._height!=n)){if(this._width=i,this._height=n,this._defContext&&(this._canvas.width=i*O4,this._canvas.height=n*O4,this._defContext.resize(i,n),this._contexts))for(var s=0;s<this._contexts.length;s++)this._contexts[s].resize(i,n);this.invalidateLayout(),(d4||q3||l27)&&this.$$_render()}},isInvalidSize:function(t){var e=this._container;return!t&&(0==e.clientWidth||0==e.clientHeight)||this._width!=e.clientWidth||this._height!=e.clientHeight},adjustSize:function(t,e){t=isNaN(t)?1e3:Math.max(0,parseInt(t)),e=isNaN(e)?50:Math.max(0,parseInt(e));var i=function(){var t=this._container;l3("### ADJSUT GRID SIZE ("+t.clientWidth+", "+t.clientHeight+"), ("+this._width+", "+this._height+") at ("+this.$_adjusting+", "+this.$_adjustDelay+")"),this.isInvalidSize()&&this.resetSize(!1,!0),0<this.$_adjusting&&this.isInvalidSize()?(this.$_adjustDelay=0<this.$_adjustDelay?e:20,this.$_adjusting-=this.$_adjustDelay,setTimeout(i,this.$_adjustDelay)):(this.$_adjusting=0,this.$_adjustDelay=0)}.bind(this);this.resetSize(!1,!0),this.isInvalidSize()&&(isNaN(this.$_adjusting)||this.$_adjusting<=0)&&(this.$_adjusting=t||1e3,this.$_adjsutDelay=0,setTimeout(i))},_createRootElement:function(t){if(t){var e=new y07(t,"root",this);return this._container.appendChild(e._dom),e}return new y07(!1,"root",this,this._defContext)},_createFeedbackRoot:function(t){if(t){var e=new c07(t,"feedbackRoot",this);return this._container.appendChild(e._dom),e}return new c07(!1,"feedbackRoot",this,this._defContext)},$_validateChildren:function(t){var e=t._elements;if(e)for(var i=e.length;i--;){var n=e[i];n._dirty=n._nodraw=!1,this.$_validateChildren(n)}},_setForceValidation:function(t){this._forceValidation=t},_doLayout:function(t){},_doPrepareRender:function(t){},_beforeRender:function(t){},_afterRender:function(){},_doRender:function(t){var e=this._defContext._graphics;if(this._defContext._dirty&&this._drawElement(this._rootElement,null,this._invalidated||this._forceValidation),this._contexts)for(var i=0,n=this._contexts.length;i<n;i++)this._contexts[i]._dirty&&this._drawElement(this._rootElement,this._contexts[i],!0);this._defContext._dirty&&this._drawElement(this._feedbackRoot,null,!0),this.$_validateChildren(this._rootElement),this.$_validateChildren(this._feedbackRoot),this._doDrawBorder(e,t)},_doRenderHtml:function(t){this._drawElementHtml(this._rootElement,this._invalidated||this._forceValidation),this._drawElementHtml(this._feedbackRoot,this._invalidated||this._forceValidation),this.$_validateChildren(this._rootElement),this.$_validateChildren(this._feedbackRoot),this._doDrawBorderHtml(t)},_doDrawBorder:function(t,e){},_doDrawBorderHtml:function(t){},_drawElement:function(t,e,i){if(!t._nodraw){var n,s,r,o,a=t._elementContext,h=e?e._graphics:this._defContext._graphics,l=t.x(),u=t.y();if(h.save(),h.translate(l,u),a&&!e){var d=Math.max(0,Math.min(this._width,t.width())),c=Math.max(0,Math.min(this._height,t.height())),_=d*O4,f=c*O4,g=t.contextOffsetX(),m=t.contextOffsetY(),p=a._graphics;if(a.resize(d,c),a._opaque||(this._invalidated?(o=t.boundsByContainer(),a.saveBack(this._defContext._canvas,o)):0<_&&0<f&&(h.clear(0,0,_,f),a._backBuff&&h.drawImage(a._backBuff,0,0,_,f,0,0,d,c))),a.isDirty()){p.save();try{p.scale(O4,O4),!a._opaque&&0<d&&0<c&&p.clear(0,0,d,c),p.translate(-l-g,-u-m),this._drawContextedElement(t,p,i)}finally{p.restore(),a._dirty=!1}}t.clip(h),h.save();try{h.translate(g,m),0<_&&0<f&&h.drawImage(a._canvas,0,0,_,f,0,0,d,c)}finally{h.restore()}}else{var w=t._mask;w?w instanceof o7?(w._doDraw(h),h.clip()):w instanceof g1&&h.clipRect(w):t.clip(h),h.setAlpha(t._alpha),t._context==e&&(i||t._dirty)&&(t._graphics=h,t.draw(h,!this._invalidated));var v=t._elements;if(v)for(n=0,s=v.length;n<s;n++)(r=v[n])._visible&&this._drawElement(r,e,i)}h.restore()}},_drawContextedElement:function(t,e,i){var n,s,r,o;if(e.save(),e.translate(t.x(),t.y()),t._mask?t._mask instanceof o7?(t._mask._doDraw(e),e.clip()):t._mask instanceof g1&&e.clipRect(t._mask):t.clip(e),e.setAlpha(t._alpha),(i||t._dirty)&&(t._graphics=e,t.draw(e,t._elementContext._opaque&&!this._invalidated)),o=t._elements)for(n=0,s=o.length;n<s;n++)(r=o[n])._visible&&this._drawContextedElement(r,e,i);e.restore()},_drawElementHtml:function(t,e){var i,n,s;for((e||t._dirty)&&t.drawHtml(),i=0,n=t.childCount();i<n;i++)(s=t.getChild(i)).visible()&&(s._dom instanceof b7?this._drawElementSvg(s,e):this._drawElementHtml(s,e))},_drawElementSvg:function(t,e){var i,n,s,r,o,a;for((e||t._dirty)&&(i=t.$_svgElt=V2.createElementNS(P2,"g"),n=V2.createElementNS(P2,"defs"),t._parent.$_svgElt.appendChild(t.$_svgElt,n),i.setAttributeNS(null,"transform","translate("+t._x+","+t._y+")"),(s=new U27(this._dom,n)).renderOpen(t.$_svgElt),t.drawSvg(s)),r=0,o=t.childCount();r<o;r++)(a=t.getChild(r)).visible()&&this._drawElementSvg(a,e)},$_clearRenderTotals:function(){$$_layout_total=$$_render_total=0},$_getLayoutTotal:function(){return $$_layout_total},$_getRenderTotal:function(){return $$_render_total},$$_render:function(t,e,i,n){var s,r,o=$_debug?q4():void 0,a=this._width,h=this._height,l=new g1(0,0,a,h);if(this._layoutChildren(l),$_debug&&(l3("rendering["+ ++this._rendered+"] at "+t),o=F0()),l=new g1(0,0,a,h),this._layoutNeeded?(this._layoutNeeded=!1,this._doLayout(l),$_debug&&($$_layout_total+=o=q4()-o,l3("## layouted in ["+this._rendered+", "+o+"]"))):this._doPrepareRender(l),$_debug&&(o=q4()),this._defContext){if(this._invalidated&&(this._defContext._dirty=!0,this._contexts))for(s=0,r=this._contexts.length;s<r;s++)this._contexts[s]._dirty=!0;if(this._defContext.prepare(e,i,n,this._invalidated),this._contexts)for(s=0;s<this._contexts.length;s++)this._contexts[s].prepare(null,0,0,this._contexts[s]._dirty);try{if(l=new g1($_validated=0,0,a,h),this._beforeRender(l),this._doRender(l),this._afterRender(),0<a&&0<h&&(a*=O4,h*=O4,this._ctx.clearRect(0,0,a,h),this._ctx.drawImage(this._defContext._canvas,0,0,a,h,0,0,a,h),this._contexts))for(s=0;s<this._contexts.length;s++)this._ctx.drawImage(this._contexts[s]._canvas,0,0,a,h,0,0,a,h)}finally{if(this._contexts)for(s=0;s<this._contexts.length;s++)this._contexts[s].restore();this._defContext.restore()}for($_debug&&($$_render_total+=o=q4()-o,l3("rendered elements["+$_validated+"] in ["+o+"]")),s=0,r=this._children.length;s<r;s++){var u=this._children[s];u._visible&&0<u._width&&0<u._height&&(u.resize(),u.layoutContent(),u._dirty&&u.draw(),this._ctx.drawImage(u._canvas,0,0,u._width,u._height,u._x,u._y,u._width,u._height))}}},$$_renderHtml:function(t,e,i,n){var s=$_debug?q4():void 0,r=this._width,o=this._height;this._layoutChildren(new g1(0,0,r,o)),this._drawing=!0;try{$_debug&&(L8("rendering["+ ++this._rendered+"] at "+t),s=F0()),this._layoutNeeded&&(this._layoutNeeded=!1,L8("layout..."),this._doLayout(new g1(0,0,r,o)),$_debug&&($$_layout_total+=s=q4()-s,l3("## layouted in ["+this._rendered+", "+s+"]"))),$_debug&&(s=F0());var a=new g1($_validated=0,0,r,o);this._beforeRender(a),this._doRenderHtml(a),this._afterRender(),$_debug&&($$_render_total+=s=q4()-s,l3("rendered elements["+$_validated+"] in ["+s+"]"))}finally{this._drawing=!1}},_resizeHandler:function(t){this.resetSize()}}),o7=I1("UIElement",a2,{init:function(t,e){this._super(),this._name=e,this._parent=null,this._elements=null,this._dirty=!1,this._mouseEnabled=!0,this._hovered=!1,this._mask=null,this._nodraw=!1,t?t instanceof b7?this._dom=t:(this._dom=V2.createElement("div"),(this._dom.$_owner=this)._dom.$_name=e,this._css=this._dom.style,this._css.boxSizing="border-box",this._css.position="absolute",this._css.padding="0px",this._css.margin="0px",this._css["-webkit-print-color-adjust"]="exact"):(this._context=null,this._graphics=null)},x:0,y:0,width:0,height:0,rotation:0,visible:!0,alpha:1,clickable:!1,renderCallback:null,right:function(){return this._x+this._width},bottom:function(){return this._y+this._height},setWidth:function(t){return(t=Math.max(0,t))!=this._width&&(this._width=t,this.invalidate()),this},setHeight:function(t){return(t=Math.max(0,t))!=this._height&&(this._height=t,this.invalidate()),this},setVisible:function(t){return t!=this._visible&&(this._visible=t,this.invalidate(!0),this._css&&(this._css.display=t?"block":"none")),this},name:function(){return this._name},setName:function(t){this._name=t},container:function(){return this._parent&&this._parent.container()},parent:function(){return this._parent},childCount:function(){return this._elements?this._elements.length:0},count:function(){return this._elements?this._elements.length:0},visibleCount:function(){var t=this._elements,e=0;if(t)for(var i=t.length;i--;)t[i]._visible&&e++;return e},isSingleton:function(){return this._parent&&1==this._parent.childCount()},position:function(){return{x:this._x,y:this._y}},bounds:function(){return new g1(this._x,this._y,this._width,this._height)},clientRect:function(){return new g1(0,0,this._width,this._height)},mouseX:function(){var t=this.container();if(t){for(var e=t._currentX,i=this;i&&i!==c2;)e-=i._x,i=i._parent;return e}return NaN},mouseY:function(){var t=this.container();if(t){for(var e=t._currentY,i=this;i&&i!==c2;)e-=i._y,i=i._parent;return e}return NaN},mask:function(){return this._mask},setMask:function(t){this._mask=t?t.clone():null},isLayer:function(){return!1},setMouseEnabled:function(t){this._mouseEnabled=t},canHover:function(){return!0},isHovered:function(){return this._hovered},hovered:function(){return this._hovered},setHovered:function(t){t!=this._hovered&&(this._hovered=t,this._hoveredChanged&&this._hoveredChanged())},contextOffsetX:function(){return 0},contextOffsetY:function(){return 0},scrollLeft:function(){return this._dom?this._dom.scrollLeft:0},scrollTop:function(){return this._dom?this._dom.scrollTop:0},visibleInContainer:function(){for(var t=this;t;){if(!t._visible)return!1;t=t._parent}return!0},setElementContext:function(t,e){e=!(1<arguments.length)||e,!t!=!this._elementContext&&(this._elementContext=t?new M27("elementContext",e):void 0,function t(e){for(var i=e.childCount();i--;)e._elements[i]._elementContext=e._elementContext,t(e._elements[i])}(this))},getChildren:function(){return this._elements?this._elements.concat():null},getChild:function(t){return this._elements?this._elements[t]:null},getChildIndex:function(t){return this._elements?this._elements.indexOf(t):-1},contains:function(t){return!!this._elements&&0<=this._elements.indexOf(t)},getVisibleChild:function(t){var e=this._elements;if(e)for(var i=0,n=0,s=e.length;n<s;n++)if(e[n]._visible&&i++==t)return e[n];return null},getVisibleChildren:function(){var t=this._elements;if(t){for(var e=[],i=0,n=t.length;i<n;i++)t[i]._visible&&e.push(t[i]);return e}return null},addChild:function(t,e){return this.$_insertChild(-1,t,e),t},$_setElementContext:function(t){if(this._elementContext=t,this._elements)for(var e=this._elements.length;e--;)this._elements[e].$_setElementContext(t)},insertChild:function(t,e,i){return this.$_insertChild(t,e,i),e},$_insertChild:function(t,e,i){if(e instanceof o7&&!this.contains(e)){this._elements||(this._elements=[]);var n=this._dom;return t<0?(n?n instanceof b7||e._dom instanceof b7||n.appendChild(e._dom):this._elementContext?e.$_setElementContext(this._elementContext):e._context=i,this._elements.push(e)):(n?n instanceof b7||this._dom instanceof b7||(this._elements.length>t?n.insertBefore(e._dom,this._elements[t]._dom):this._dom.appendChild(e._dom)):this._elementContext?e._elementContext=this._elementContext:e._context=i,this._elements.splice(t,0,e)),e._parent=this,e.$_attached(this),!0}return!1},addChildren:function(t,e){if(V1(t))for(var i=0,n=t.length;i<n;i++)this.$_insertChild(-1,t[i],e)},insertChildren:function(t,e,i){if(V1(e))for(var n=0,s=e.length;n<s;n++)this.$_insertChild(t,e[n],i)&&t++},addElement:function(t,e){return this.addChild(t,e)},insertElement:function(t,e,i){return this.insertChild(t,e,i)},removeChild:function(t){if(t&&this._elements){var e=this._elements.indexOf(t);if(0<=e)return this.removeChildAt(e)}return null},removeElement:function(t){return this.removeChild(t)},removeChildAt:function(t){if(0<=t&&t<this.childCount()){var e=this._elements[t];return this._elements.splice(t,1),e._dom?this._dom instanceof b7||this._dom.removeChild(e._dom):e._context=null,e._parent=null,e._dirty=!1,e.$_detached(this),e}return null},removeElementAt:function(t){return this.removeChildAt(t)},clear:function(){var t,e=this._dom,i=this._elements,n=i?i.length:0;if(0<n){for(t=0;t<n;t++)i[t]._parent=null,i[t].$_detached(this);if(e)if(this._dom instanceof b7);else for(t=0;t<n;t++)e.removeChild(i[t]._dom);this._elements=[],this.invalidate()}},hideAll:function(){var t,e=this._elements,i=e?e.length:0;if(this._dom)for(t=0;t<i;t++)e[t].setVisible(!1);else for(t=0;t<i;t++)e[t]._visible=!1},setTool:function(t){var e,i=this._elements,n=i?i.length:0;if(t)for(this.$_tool=!0,e=0;e<n;e++)i[e].setTool(!0);else if(this.$_tool)for(this.$_tool=!1,e=0;e<n;e++)i[e].setTool(!1)},invalidate:function(t,e){if(t||!this._dirty){var i=this.container();i&&(i.invalidateElement(this),this._dirty=!0)}if(e){var n=this._elements;if(n)for(var s=n.length;s--;)n[s].invalidate(t,!0)}},validate:function(){if(this._dirty){this._dirty=!1;var t=this.container();t&&t.validateElement(this)}},invalidateLayout:function(){var t=this.container();t&&t.invalidateLayout()},clip:function(t){},getBounds:function(t){return t?t.set(this._x,this._y,this._width,this._height):new g1(this._x,this._y,this._width,this._height)},getClientRect:function(t){return t?t.set(0,0,this._width,this._height):new g1(0,0,this._width,this._height)},containsInBounds:function(t,e){return t>=this._x&&t<this._x+this._width&&e>=this._y&&e<this._y+this._height},containsInClient:function(t,e){return 0<=t&&t<this._width&&0<=e&&e<this._height},parentToElement:function(t,e,i){for(var n=this;n&&n!=t;)e-=n._x,i-=n._y,n=n._parent;return{x:e,y:i}},translateBy:function(t,e){var i=t;for(e||(e=new g1(0,0,this._width,this._height));i&&i!==this;)e.x-=i._x,e.y-=i._y,i=i._parent;return e},topBy:function(t,e){for(var i=this._y+e,n=this._parent;n&&n!==t;)i+=n._y,n=n._parent;return i},boundsBy:function(t,e){var i=this._x,n=this._y,s=this._parent;for(e&&(i+=e.x,n+=e.y);s&&s!==t;)i+=s._x,n+=s._y,s=s._parent;return e?new g1(i,n,e.width,e.height):new g1(i,n,this._width,this._height)},boundsByContainer:function(t){var e=this._x,i=this._y,n=this._parent;for(t&&(e+=t.x,i+=t.y);n&&void 0!==n._x;)e+=n._x,i+=n._y,n=n._parent;return t?new g1(e,i,t.width,t.height):new g1(e,i,this._width,this._height)},pointByContainer:function(t){var e=this;for(t=t||{x:0,y:0};t.x+=e._x,t.y+=e._y,(e=e._parent)&&void 0!==e._x;);return t},boundsByScreen:function(t){return t=this.boundsByContainer(t),this.container().toScreen(t)},pointByScreen:function(t){var e=t?new g1(t.x,t.y):null;return{x:(e=this.boundsByScreen(e)).x,y:e.y}},containerToElement:function(t,e,i){for(var n=this;n;)t-=n._x,e-=n._y,n=n._parent;return i?(i.x=t,i.y=e,i):{x:t,y:e}},clientRectByChild:function(t,e){var i=t;for(e=this.getClientRect(e);e.x-=i.x(),e.y-=i.y(),(i=i._parent)!=this;);return e},move:function(t,e){this.setX(t),this.setY(e)},setPosition:function(t,e){this.setX(t),this.setY(e)},resize:function(t,e){this.setWidth(t),this.setHeight(e)},setSize:function(t,e){this.setWidth(t),this.setHeight(e)},setBounds:function(t,e,i,n){this.setX(t),this.setY(e),this.setWidth(i),this.setHeight(n)},setBoundsI:function(t,e,i,n){this.setX(t>>0),this.setY(e>>0),this.setWidth(i>>0),this.setHeight(n>>0)},setBoundsHtml:function(t,e,i,n){var s=this._css;this._x=t,this._y=e,this._width=i,this._height=n,s.left=t+"px",s.top=e+"px",s.width=i+"px",s.height=n+"px"},setRect:function(t){this.setX(t.x),this.setY(t.y),this.setWidth(t.width),this.setHeight(t.height)},setRectI:function(t){this.setX(B1(t.x)),this.setY(B1(t.y)),this.setWidth(B1(t.width)),this.setHeight(B1(t.height))},draw:function(t,e){this._dirty=!1,this._renderCallback?this._renderCallback(t):this._doDraw(t,e),$_validated++},drawHtml:function(){this._dirty=!1,this._css.left=this._x+"px",this._css.top=this._y+"px",this._css.width=this._width+"px",this._css.height=this._height+"px",this._doClearHtml(),this._doDrawHtml(),$_validated++},drawSvg:function(t){this._dirty=!1,this._renderCallback?this._renderCallback(t):this._doDrawSvg(t),$_validated++},moveDom:function(){this._css.left=this._x+"px",this._css.top=this._y+"px",this._css.width=this._width+"px",this._css.height=this._height+"px"},hitTest:function(t,e){return 0<=t&&t<this._width&&0<=e&&e<this._height},containerToLocal:function(t){for(var e=t.x,i=t.y,n=this;n;)e-=n._x,i-=n._y,n=n._parent;return{x:e,y:i}},localToContainer:function(t){for(var e=t.x,i=t.y,n=this;n;)e+=n._x,i+=n._y,n=n._parent;return{x:e,y:i}},findChildAt:function(t,e,i){var n,s,r,o,a,h=this._elements,l=h?h.length:0;if(0<l)for(n=l-1;0<=n;n--)if((s=h[n]).visible()&&(r=t-s._x,o=e-s._y,(i||s._mouseEnabled)&&(s.isLayer()||s.hitTest(r,o)))){if(a=s.findChildAt(r,o,i))return a;if(!s.isLayer()&&s._mouseEnabled)return s}return null},getParentAs:function(t){for(var e=this;e;){if(e instanceof t)return e;e=e._parent}return null},isAncestorOf:function(t){var e=t;if(e)do{if(e===this)return!0}while(e=e.parent());return!1},propertyChanged:function(t,e){this.invalidate()},$_attached:function(t){this._doAttached(t)},_doAttached:function(t){},$_detached:function(t){this._doDetached(t)},_doDetached:function(t){},_doDraw:function(t,e){},_doClearHtml:function(){},_doDrawHtml:function(){},_doDrawSvg:function(t){this._doDraw(t,!1)},_hoveredChanged:function(){},$_setCssFill:function(t){w4?t?t.applyToCss(this._css):(this._css.background="",this._css.filter=""):t instanceof T3?t.applyToCss(this._css):(this._css.background=t?t.css():"",this._css.filter="")},$_getGraphics:function(t,e,i){var n=this._svg;return n||(n=this._svg=new b7(null,this.container()),i?this._dom.insertBefore(n._svg,i):this._dom.appendChild(n._svg)),n._svg.style.visibility="visible",n.getGraphics(t,e)}},{addChild:function(t,e){t.addChild(e)}}),y07=I1("RootElement",o7,{init:function(t,e,i,n){this._super(t,e),this._container=i,this._context=n},container:function(){return this._container}}),c07=I1("RootLayerElement",o7,{init:function(t,e,i,n){this._super(t,e),this._container=i,this._context=n},container:function(){return this._container},isLayer:function(){return!0}}),j58=I1("MaskElement",o7,{init:function(t,e,i){this._super(!1,t),this._target=e,this._render=i},_doDraw:function(t){this._render&&this._render(t,this._target)}}),D4=I1("LayerElement",o7,{init:function(t,e,i){this._super(t,e),t?this._css&&(this._css.pointerEvents="none"):(this._clip=i,this._drawRect=null)},isLayer:function(){return!0},clip:function(t){if(this._clip){var e=this._drawRect=this._drawRect||new g1;this.getClientRect(e),t.clipRect(e)}}}),J27=I1("LayerElement",o7,{init:function(){this._super(!0),this._css&&(this._css.pointerEvents="none")},$_getGraphics:function(t,e){var i=this._svg;return i||(i=this._svg=new b7(this,this.container())),i.getGraphics(t,e)}}),$$_fileloc=$$_locproto.substr(0,4),i1=A2("Keys",{BACK:8,TAB:9,ENTER:13,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,0:48,F2:113,F3:114,F4:115,A:65,C:67,D:68,I:73,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,QUOT:222}),U0=A2("Cursor",{DEFAUT:"default",AUTO:"auto",POINTER:"pointer",WAIT:"wait",MOVE:"move",COL_RESIZE:"col-resize",ROW_RESIZE:"row-resize",CROSSHAIR:"crosshair",HORZ_RESIZE:"ew-resize",VERT_RESIZE:"ns-resize",NESW_RESIZE:"nesw-resize",NWSE_RESIZE:"nwse-resize",NO_DROP:"no-drop",NOT_ALLOWED:"not-allowed",GRAB:"grab",GRABBING:"grabbing"}),I28=I1("TouchManager",null,{init:function(t){this._super(),this._container=t},touchStart:function(t){return!1},touchMove:function(t){return!1},touchEnd:function(t){},touchCancel:function(t){},_toOffset:function(t){return c87(this._container,t)}}),O07=3,F5=I1("VisualTool",null,{init:function(t,e){this._super(),this._owner=t,this._name=e,this._dragTracker=null,this._clickX=0,this._clickY=0,this._currX=0,this._currY=0,this._mousePressed=!1,this._mousePressing=!1},dragTracker:null,owner:function(){return this._owner},setDragTracker:function(t){t!==this._dragTracker&&(this._dragTracker&&this._dragTracker.deactivate(),this._dragTracker=t,this._dragTracker&&this._dragTracker.activate())},isDragging:function(){return this._dragTracker&&this._dragTracker.isDragging()},clickX:function(){return this._clickX},clickY:function(){return this._clickY},currX:function(){return this._currX},currY:function(){return this._currY},isEditing:function(){return!1},touchManager:function(){return null},setMousePressing:function(){this._mousePressing=!0},mousePressed:function(){return this._mousePressed},mousePressing:function(){return this._mousePressing},activate:function(){this._doActivate()},deactivate:function(){this._doDeactivate()},keyDown:function(t,e,i,n){return this._doKeyDown(t,e,i,n)},keyUp:function(t,e,i,n){return this._doKeyUp(t,e,i,n)},click:function(t){this._doClick(t.mouseX,t.mouseY)},dblclick:function(t){this._doDblClick(t.mouseX,t.mouseY)},mouseDown:function(t){this._mousePressed=!0,this._mousePressing=!1;var e=this._currX=this._clickX=t.mouseX,i=this._currY=this._clickY=t.mouseY;this.isDragging()&&(this._stopDragTracker(e,i,!1),this.setDragTracker(null)),this._doMouseDown(t.mouseX,t.mouseY,t.ctrlKey,t.shiftKey,t.button,B4&&t.metaKey)},mouseMove:function(t){var e,i=this._currX=t.mouseX,n=this._currY=t.mouseY,s=this.dragTracker();s?s.isDragging()?("$hasNotButtons"in F5||(F5.$hasNotButtons=c4||G6||l27),F5.$hasNotButtons&&0==t.button||0<t.buttons?s.drag(i,n)||(e=s.getNextRequest(i,n))&&(this._stopDragTracker(i,n,!0),this.setDragTracker(this._getDragTracker(e)),this._startDragTracker(i,n)):this._stopDragTracker(i,n,!0)):Math.abs(i-this._clickX)>=O07||Math.abs(n-this._clickY)>=O07?this._startDragTracker(i,n):this._doMouseMove(i,n):this._doMouseMove(i,n,t.ctrlKey,t.shiftKey,B4&&t.metaKey)},mouseUp:function(t){var e=this._currX=t.mouseX,i=this._currY=t.mouseY;try{this.isDragging()?this._stopDragTracker(e,i,!1):this._doMouseUp(e,i)}finally{this._mousePressed=this._mousePressing=!1}},mouseEnter:function(t){this._doMouseEnter(t.mouseX,t.mouseY)},mouseLeave:function(t){this._doMouseLeave(t.mouseX,t.mouseY)},mouseOver:function(t){this._doMouseOver(t.mouseX,t.mouseY)},mouseOutside:function(){this._doMouseOutside()},mouseWheel:function(t){return this._doMouseWheel(t.mouseX,t.mouseY,t.wheelDelta,t.wheelDelta)},touchStart:function(t){return this.touchManager()?this.touchManager().touchStart(t):this._doTouchStart(t)},touchMove:function(t){return this.touchManager()?this.touchManager().touchMove(t):this._doTouchMove(t)},touchEnd:function(t){this.touchManager()?this.touchManager().touchEnd(t):this._doTouchEnd(t)},touchCancel:function(t){this.touchManager()?this.touchManager().touchCancel(t):this._doTouchCancel(t)},findElementAt:function(t,e,i){return this._owner.findElementAt(t,e,i)},setFocus:function(){return this._doSetFocus()},_doActivate:function(){},_doDeactivate:function(){},_doKeyDown:function(t,e,i){return!1},_doKeyUp:function(t,e,i){return!1},_doClick:function(t,e){},_doDblClick:function(t,e){},_doMouseDown:function(t,e){},_doMouseMove:function(t,e){},_doMouseUp:function(t,e){},_doMouseEnter:function(t,e){},_doMouseLeave:function(t,e){},_doMouseOver:function(t,e){},_doMouseOutside:function(){},_doMouseWheel:function(t,e,i,n){return!1},_doTouchStart:function(t){return!1},_doTouchMove:function(t){return!1},_doTouchEnd:function(t){},_doTouchCancel:function(t){},_startDragTracker:function(t,e){this._dragTracker&&(this._dragTracker.start(t,e)?this._doDragTrackerStarted(this._dragTracker):this._dragTracker=null)},_stopDragTracker:function(t,e,i){var n,s=!1;return this.isDragging()&&(n=this._dragTracker,i?n.cancel():(n.drop(t,e),s=!0),this.setDragTracker(null),this._doDragTrackerFinished(n,i),n.needRedraw()&&this._owner&&this._owner.invalidate&&this._owner.invalidate()),s},_doDragTrackerStarted:function(t){S3&&y0("dragTracker started: "+t.name())},_doDragTrackerFinished:function(t,e){S3&&y0("dragTracker stopped: "+t.name()+", "+(e?"canceled":"completed"))},_doSetFocus:function(){}}),y27=I1("EditRequest",null,{init:function(){this._super()},cursor:function(){return U0.AUTO},source:function(){return null},isSelectable:function(){return!1},isDblClickable:function(){return!1}}),c27=I1("DragTracker",null,{init:function(t,e,i,n){this._super(),this._container=t,this._name=e,this._active=!1,this._completed=!1,this._dragging=!1,this._startX=i,this._startY=n,this._currentX=0,this._currentY=0},cancelable:!1,needRedraw:!1,container:function(){return this._container},name:function(){return this._name},isActive:function(){return this._active},isDragging:function(){return this._dragging},isStartWhenCreated:function(){return!1},isCompleted:function(){return this._completed},activate:function(){this._active||(this._doActivate(),this._active=!0)},deactivate:function(){this._active&&(this.cancel(),this._doDeactivate(),this._active=!1)},start:function(t,e){return this.cancel(),!(!this._active||!this._doStart(t,e)||(this._currentX=this._startX=t,this._currentY=this._startY=e,this._dragging=!0,this._completed=!1,this._showFeedback(t,e),0))},drag:function(t,e){return!(!this._dragging||(this._currentX=t,this._currentY=e,!this._doDrag(t,e))||(this._moveFeedback(t,e),0))},cancel:function(){try{if(this._dragging)try{this._dragging=!1,this._doCanceled()}finally{this._doEnded()}}finally{this._hideFeedback()}},drop:function(t,e){try{if(this._dragging)try{this._currentX=t,this._currentY=e,this._dragging=!1,this._canAccept(t,e)?(this._doCompleted(t,e),this._completed=!0):this._doCanceled(t,e)}finally{this._doEnded()}}finally{this._hideFeedback()}},getNextRequest:function(t,e){return null},startX:function(){return this._startX},startY:function(){return this._startY},currentX:function(){return this._currentX},currentY:function(){return this._currentY},offsetX:function(){return this._currentX-this._startX},offsetY:function(){return this._currentY-this._startY},_showFeedback:function(t,e){},_moveFeedback:function(t,e){},_hideFeedback:function(){},_doActivate:function(){S3&&y0(this._name+" activated")},_doDeactivate:function(){S3&&y0(this._name+" deactivated")},_doStart:function(t,e){return!0},_doDrag:function(t,e){return!0},_doCanceled:function(){},_canAccept:function(t,e){return!0},_doCompleted:function(){},_doEnded:function(){},_findElementAt:function(t,e,i){return this._container.findElementAt(t,e,i)}}),O27=I1("ToolTipOptions",null,{init:function(t){this._super(),t&&this.assign(t)},minWidth:0,maxWidth:0,lineBreak:!0,message:null,visible:!0,styles:null,delay:300,duration:5e3,animation:!1,assignSimple:function(t){"string"==typeof t?(this._message=t,this._message&&(this._visible=!0)):"boolean"==typeof t&&(this._visible=Boolean(t))}}),C28=I1("ToolTipView",a2,{init:function(t){this._super(),this._container=t,this._span=null,this._element=this._createElement(),this._showing=!1},show:function(t,e,i){this._showing=!0;try{this.$_show(t,e,i)}finally{this._showing=!1}},$_show:function(t,e,i){var n,s,r,o,a,h,l,u=document.body,d=this._container._popupOwner||document.documentElement,c=t.styles(),_=t.message();_&&(n=this._element)&&(t.lineBreak()&&(_=_.replace($_linebrreg,"<br>")),this._span,n.innerHTML=_,(s=n.style).position="absolute",s.overflow="hidden",s.zIndex=3001,s.background=(c&&c.background()||U1.WHITE).css(),s.color=(c&&c.color()||Z1.BLACK).css(),s.border=(c&&c.border()||Z1.DIMGRAY).css(),s.borderRadius=(c?c.borderRadius():0)+"px",s.boxShadow=c?c.toCssShadow():"1px 1px 2px #555",s.font=(r=c&&c.font())?r.font:C7,s.padding=c?c.paddings():0,s.maxWidth=0<t.maxWidth()?t.maxWidth()+"px":"",s.minWidth=0<t.minWidth()?t.minWidth()+"px":"",s.transition=this._showed&&t.animation()?"0.5s ease-in-out":"",d.appendChild(n),o=q5(),u.scrollWidth>u.clientWidth&&(o.height-=18),u.scrollHeight>u.clientHeight&&(o.width-=18),a=w1.getBounds(d),h=w1.getBounds(this._container._container),l=w1.getBounds(n),(e+=h.left-a.left)+a.left+l.width>o.width&&(e-=l.width),(i+=h.top-a.top+21)+a.top+l.height>o.height&&(i-=l.height+21),s.left=Math.max(a.left,e)+"px",s.top=Math.max(a.top,i)+"px",this._showed=!0)},hide:function(){var t=this._element;t&&t.parentNode&&(t.parentNode.removeChild(t),this._showed=!1)},_createElement:function(){var t=u2.createElement("div");return t.style.pointerEvents="none",t.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),w1.disableSelection(t),t}}),j07=I1("ToolTipManager",a2,{init:function(t){this._super(),this._owner=t,this._container=t.container(),this._showCallback=j07.prototype.$_show.bind(this)},visible:function(){return this._active},target:null,$_show:function(t,e,i){this._target===e&&0<t.duration()&&t&&t.visible()&&(this._tipView||(this._tipView=new C28(this._container)),this._tipView.show(t,this._owner.mouseX(),this._owner.mouseY()),this._active=!0,this._closeCallback=i,this._closeTimer&&clearInterval(this._closeTimer),this._closeTimer=setTimeout(function(){this.close()}.bind(this),t.duration()))},show:function(t,e,i){void 0!==this._showTimer&&(clearTimeout(this._showTimer),this._showTimer=void 0),this._active?t.animation()&&this.$_show(t,e,i):(this.close(),0<(t=t instanceof O27?t:t?new O27(t):null).delay()?this._showTimer=setTimeout(this._showCallback,t.delay(),t,e,i):(this._showTimer=void 0,this.$_show(t,e,i)))},close:function(){void 0!==this._closeTimer&&(clearTimeout(this._closeTimer),this._timer=void 0),this._active&&(this._tipView&&this._tipView.hide(),this._active=!1,this._closeCallback&&this._closeCallback())}}),P2="http://www.w3.org/2000/svg",d8="http://www.w3.org/1999/xlink",j27={left:"start",center:"middle",right:"end"},k58={top:"hanging",middle:"middle",bottom:"baseline"},k27={top:"1em",middle:".5em",center:".5em",bottom:"0"},k07={font:"Verdana",size:12},U27=I1("SvgGraphis",null,{init:function(t,e){this._super(),this._svg=t,this._defs=e,this._elt=t,this._transforms=[],this._trans=null},renderOpen:function(t){return this._elt=t,this},renderClose:function(t){if(t!==this._elt)throw new Error("Invalid render close");return this._elt=null,this},save:function(){return this._trans="",this._transforms.push(this._trans),this},restore:function(){var t=this._transforms.length;return this._transforms.splice(t-1,1),this._trans=0<t?this._transforms[t-1]:null,this},translate:function(t,e){return this._trans+="translate("+t+","+e+")",this},rotate:function(t){return this._trans+="rotate("+180*t/Math.PI+")",this},rotateAt:function(t,e,i){return this._trans+="rotate("+180*t/Math.PI+","+e+","+i+")",this},scale:function(t,e){return this._trans+="scale("+t+","+e+")",this},clear:function(){for(var t;t=this._elt.lastChild;)this._elt.removeChild(t);return this._elt===this._svg&&this._svg.appendChild(this._defs),this},clipRect:function(t){return this.clipBounds(t.x,t.y,t.width,t.height),this},clipBounds:function(t,e,i,n){var s="ld"+U27.$_nextId++,r=V2.createElementNS(P2,"clipPath");r.setAttribute("id",s);var o=V2.createElementNS(P2,"rect");return o.x.baseVal.value=t,o.y.baseVal.value=e,o.width.baseVal.value=i,o.height.baseVal.value=n,r.appendChild(o),this._defs.appendChild(r),this},drawLine:function(t,e,i,n,s){if(t){var r=V2.createElementNS(P2,"line");this._elt.appendChild(r),r.x1.baseVal.value=e,r.x2.baseVal.value=n,r.y1.baseVal.value=i,r.y2.baseVal.value=s,t.svg(r)}return this},drawHLine:function(t,e,i,n){if(t){var s=V2.createElementNS(P2,"line");this._elt.appendChild(s),s.x1.baseVal.value=i,s.x2.baseVal.value=n,s.y1.baseVal.value=e,s.y2.baseVal.value=e,t.svg(s)}return this},drawVLine:function(t,e,i,n){if(t){var s=V2.createElementNS(P2,"line");this._elt.appendChild(s),s.x1.baseVal.value=e,s.x2.baseVal.value=e,s.y1.baseVal.value=i,s.y2.baseVal.value=n,t.svg(s)}return this},drawLineI:function(t,e,i,n,s){if(t){var r=V2.createElementNS(P2,"line");this._elt.appendChild(r);var o=t?t.width()%2/2:0;e==n?(r.x1.baseVal.value=e+o,r.x2.baseVal.value=n+o,r.y1.baseVal.value=i,r.y2.baseVal.value=s):i==s&&(r.x1.baseVal.value=e,r.x2.baseVal.value=n,r.y1.baseVal.value=i+o,r.y2.baseVal.value=s+o),t.svg(r)}return this},drawHLineI:function(t,e,i,n){if(t){var s=V2.createElementNS(P2,"line");this._elt.appendChild(s),e+=t.width()%2/2,s.x1.baseVal.value=i,s.x2.baseVal.value=n,s.y1.baseVal.value=e,s.y2.baseVal.value=e,t.svg(s)}return this},drawVLineI:function(t,e,i,n){if(t){var s=V2.createElementNS(P2,"line");this._elt.appendChild(s),e+=t.width()%2/2,s.x1.baseVal.value=e,s.x2.baseVal.value=e,s.y1.baseVal.value=i,s.y2.baseVal.value=n,t.svg(s)}return this},drawLines:function(t,e){if(t){var i=V2.createElementNS(P2,"polyline");this._elt.appendChild(i);var n,s=[];if(V1(e)&&2<=e.length)for(s.push(e[0].x+","+e[0].y),n=1;n<e.length;n++)s.push(e[n].x+","+e[n].y);else if(5<=arguments.length)for(s.push(e+","+arguments[2]),n=3;n<arguments.length-1;n+=2)s.push(arguments[n]+","+arguments[n+1]);i.setAttributeNS(null,"points",s.join(" ")),i.style.fill="none",t.svg(i)}return this},drawLinesI:function(t,e){if(t){var i=V2.createElementNS(P2,"polyline");this._elt.appendChild(i);var n,s=[],r=t.width()%2/2;if(V1(e)&&2<=e.length)for(s.push(e[0].x+r+","+(e[0].y+r)),n=1;n<e.length;n++)s.push(e[n].x+r+","+(e[n].y+r));else if(5<=arguments.length){var o,a=[];for(n=1,o=arguments.length;n<o;n++)a[n]=arguments[n]+r;for(s.push(a[1]+","+a[2]),n=3;n<o-1;n+=2)s.push(a[n]+","+a[n+1])}i.setAttributeNS(null,"points",s.join(" ")),i.style.fill="none",t.svg(i)}return this},drawQuadratic:function(t,e,i,n,s,r,o){if(t){var a=V2.createElementNS(P2,"path");a.setAttributeNS(null,"d",["M",e,i,"Q",n,s,r,o].join(" ")),this._elt.appendChild(a),a.style.fill="none",t&&t.svg(a)}return this},drawCurve:function(t,e){if(t){var i=this.$_getCurvedLinePath(e,0,e.length-1);if(i){var n=V2.createElementNS(P2,"path");n.setAttributeNS(null,"d",i.join(" ")),this._elt.appendChild(n),n.style.fill="none",t&&t.svg(n)}}return this},drawCurvedRange:function(t,e,i,n){if(i&&1<i.length&&n&&1<n.length&&(t||e)){var s=this.$_getCurvedLinePath(i,0,i.length-1,!0);if(s){var r=n[n.length-1];s.push("L",r.x,r.y);var o=this.$_getCurvedLinePath(n,n.length-1,0,!1);o&&(s=s.concat(o)),r=i[0],s.push("L",r.x,r.y);var a=V2.createElementNS(P2,"path");a.setAttributeNS(null,"d",s.join(" ")),this._elt.appendChild(a),e&&e.svg(a),t?t.svg(a):a.style.fill="none"}}return this},$_getCurvedLinePath:function(t,e,i,n){if(t&&i!=e&&t.length>Math.max(i)){var s=[],r=i<e?-1:1,o=e;if((n||void 0===n)&&s.push("M",t[o].x,t[o].y),2==Math.abs(i-e))return s.push("L",t[o+r].x,t[o+r].y),s;var a={x:0,y:0},h={x:0,y:0},l={x:0,y:0},u={x:t[o+r].x-t[o].x,y:t[o+r].y-t[o].y},d={x:0,y:0},c={x:0,y:0},_={x:0,y:0},f={x:0,y:0},g=Math.sqrt(u.x*u.x+u.y*u.y);u.x/=g,u.y/=g;var m=t[o+r].x-t[o].x,p=t[o].x,w=t[o].y;for(o+=r;o!=i;o+=r){l.x=-u.x,l.y=-u.y,u.x=t[o+r].x-t[o].x,u.y=t[o+r].y-t[o].y,g=Math.sqrt(u.x*u.x+u.y*u.y),u.x/=g,u.y/=g,u.x<l.x?(d.x=l.x-u.x,d.y=l.y-u.y):(d.x=u.x-l.x,d.y=u.y-l.y);var v=Math.sqrt(d.x*d.x+d.y*d.y);d.x/=v,d.y/=v,0<=l.y*u.y&&(d={x:1,y:0}),a.x=-d.x*m*.25,a.y=-d.y*m*.25,o==r+e?s.push("Q",t[o].x+a.x,t[o].y+a.y,t[o].x,t[o].y):(c.x=p+h.x,c.y=w+h.y,_.x=t[o].x+a.x,_.y=t[o].y+a.y,f.x=(c.x+_.x)/2,f.y=(c.y+_.y)/2,s.push("Q",c.x,c.y,f.x,f.y),s.push("Q",_.x,_.y,t[o].x,t[o].y)),m=t[o+r].x-t[o].x,h.x=d.x*m*.25,h.y=d.y*m*.25,p=t[o].x,w=t[o].y}return s.push("Q",p+h.x,w+h.y,t[o].x,t[o].y),s}return null},drawRect:function(t,e,i){if(t||e){var n=V2.createElementNS(P2,"rect");return this._elt.appendChild(n),n.x.baseVal.value=i.x,n.y.baseVal.value=i.y,n.width.baseVal.value=i.width,n.height.baseVal.value=i.height,t?t.svg(n):n.style.fillOpacity=0,e&&e.svg(n),this}},drawRectI:function(t,e,i){if(t||e){var n=e?e.width()%2/2:0,s=V2.createElementNS(P2,"rect");return s.x.baseVal.value=i.x+n,s.y.baseVal.value=i.y+n,s.width.baseVal.value=i.width,s.height.baseVal.value=i.height,this._elt.appendChild(s),t?t.svg(s):s.style.fillOpacity=0,e&&e.svg(s),this}},drawBounds:function(t,e,i,n,s,r){if(t||e){var o=V2.createElementNS(P2,"rect");return o.x.baseVal.value=i,o.y.baseVal.value=r<0?n+r:n,o.width.baseVal.value=s,o.height.baseVal.value=T77(r),this._elt.appendChild(o),t?t.svg(o):o.style.fillOpacity=0,e&&e.svg(o),this}},drawBoundsI:function(t,e,i,n,s,r){if(t||e){var o=e?e.width()%2/2:0,a=V2.createElementNS(P2,"rect");return a.x.baseVal.value=i+o,a.y.baseVal.value=r<0?n+r+o:n+o,a.width.baseVal.value=s,a.height.baseVal.value=T77(r),this._elt.appendChild(a),t?t.svg(a):a.style.fillOpacity=0,e&&e.svg(a),this}},drawCircle:function(t,e,i,n,s){var r=V2.createElementNS(P2,"circle");return r.cx.baseVal.value=i,r.cy.baseVal.value=n,r.r.baseVal.value=s,this._elt.appendChild(r),t?t.svg(r):r.style.fillOpacity=0,e&&e.svg(r),this},drawCircleBounds:function(t,e,i,n,s,r){var o=i+s/2,a=n+r/2,h=Math.min(s,r)/2,l=V2.createElementNS(P2,"circle");return l.cx.baseVal.value=o,l.cy.baseVal.value=a,l.r.baseVal.value=h,this._elt.appendChild(l),t?t.svg(l):l.style.fillOpacity=0,e&&e.svg(l),this},drawCircleRect:function(t,e,i){return this.drawCircleBounds(t,e,i.x,i.y,i.width,i.height),this},drawEllipse:function(t,e,i,n,s,r){var o=V2.createElementNS(P2,"ellipse"),a=s/2,h=r/2;return o.cx.baseVal.value=i+a,o.cy.baseVal.value=n+h,o.rx.baseVal.value=a,o.ry.baseVal.value=h,this._elt.appendChild(o),t?t.svg(o):o.style.fillOpacity=0,e&&e.svg(o),this},$_arcSector2:function(t,e,i,n,s,r,o){var a=[[e+n*Math.cos(r),i+n*Math.sin(r)],[e+n*Math.cos(o),i+n*Math.sin(o)],[e+s*Math.cos(o),i+s*Math.sin(o)],[e+s*Math.cos(r),i+s*Math.sin(r)]],h=(o-r)%(2*Math.PI)>Math.PI?1:0,l=[];l.push("M",a[0][0],a[0][1]),l.push("A",n,n,0,h,1,a[1][0],a[1][1]),l.push("L",a[2][0],a[2][1]),l.push("A",s,s,0,h,0,a[3][0],a[3][1]),l.push("z"),t.setAttributeNS(null,"d",l.join(" "))},$_arcSector:function(t,e,i,n,s,r){var o=[[e+n*Math.cos(s),i+n*Math.sin(s)],[e+n*Math.cos(r),i+n*Math.sin(r)]],a=(r-s)%(2*Math.PI)>Math.PI?1:0,h=[];h.push("M",e,i),h.push("L",o[0][0],o[0][1]),h.push("A",n,n,0,a,1,o[1][0],o[1][1]),h.push("z"),t.setAttributeNS(null,"d",h.join(" "))},drawDounut:function(t,e,i,n,s,r){var o=V2.createElementNS(P2,"path"),a=s,h=s-r,l=[];return l.push("M",i,n),l.push("m",-a,0),l.push("a",a,a,0,1,0,2*a,0),l.push("a",a,a,0,1,0,2*-a,0),l.push("z"),l.push("M",i,n),l.push("m",-h,0),l.push("a",h,h,0,0,1,2*h,0),l.push("a",h,h,0,0,1,2*-h,0),l.push("z"),o.setAttributeNS(null,"d",l.join(" ")),this._elt.appendChild(o),t?t.svg(o):o.style.fillOpacity=0,e&&e.svg(o),this},drawArcSector2:function(t,e,i,n,s,r,o,a,h,l,u,d){var c=V2.createElementNS(P2,"path");return h+=3*Math.PI/2+u,this.$_arcSector2(c,i,n,o,s,h,h+l),this._elt.appendChild(c),t?t.svg(c):c.style.fillOpacity=0,e&&e.svg(c),this},drawArcSector:function(t,e,i,n,s,r,o,a,h,l){var u=V2.createElementNS(P2,"path");return o+=3*Math.PI/2+h,this.$_arcSector(u,i,n,s,o,o+a),this._elt.appendChild(u),t?t.svg(u):u.style.fillOpacity=0,e&&e.svg(u),this},drawPolygon:function(t,e,i){for(var n=i.length,s=new Array(n),r=0;r<n;r++){var o=i[r].x+","+i[r].y;s[r]=o}var a=V2.createElementNS(P2,"polygon");return a.setAttributeNS(null,"points",s.join(" ")),this._trans&&a.setAttributeNS(null,"transform",this._trans),this._elt.appendChild(a),t?t.svg(a):a.style.fillOpacity=0,e&&e.svg(a),this},drawPolygonArray:function(t,e,i){for(var n=Y1(i.length/2),s=new Array(n),r=0;r<n;r++){var o=i[2*r]+","+i[2*r+1];s[r]=o}var a=V2.createElementNS(P2,"polygon");return a.setAttributeNS(null,"points",s.join(" ")),this._trans&&a.setAttributeNS(null,"transform",this._trans),this._elt.appendChild(a),t?t.svg(a):a.style.fillOpacity=0,e&&e.svg(a),this},drawHoledPolygonArray:function(t,e,i,n){var s=V2.createElementNS(P2,"path"),r=0,o=i.length,a=[];for(a.push("M",i[r++],i[r++]);r<o;)a.push("L",i[r++],i[r++]);for(a.push("z"),r=n.length-1,a.push("M",n[r-1],n[r]),r-=2;0<r;)a.push("L",n[r-1],n[r]),r-=2;return a.push("z"),s.setAttributeNS(null,"d",a.join(" ")),this._elt.appendChild(s),t?t.svg(s):s.style.fillOpacity=0,e&&e.svg(s),this},drawText:function(t,e,i,n,s,r,o,a){var h=V2.createElementNS(P2,"text");return t=t||k07,h.setAttributeNS(null,"y",s),h.setAttributeNS(null,"dy",k27[o||"top"]),h.setAttributeNS(null,"x",n),h.setAttributeNS(null,"text-anchor",j27[r]),h.setAttributeNS(null,"font-family",t.font),h.setAttributeNS(null,"font-size",t.size),t.deco&&h.setAttributeNS(null,"text-decoration",t.deco),h.textContent=i,e&&e.svg(h),this._elt.appendChild(h),isNaN(a)||h.setAttributeNS(null,"transform","rotate("+180*a/Math.PI+","+n+","+s+")"),this},drawTextSh:function(t,e,i,n,s,r,o,a){var h,l;return t=t||k07,i&&((h=V2.createElementNS(P2,"text")).setAttributeNS(null,"y",r+i.vert),h.setAttributeNS(null,"dy",k27[a||"top"]),h.setAttributeNS(null,"x",s+i.horz),h.setAttributeNS(null,"text-anchor",j27[o]),l.setAttributeNS(null,"font-family",t.font),h.setAttributeNS(null,"font-size",t.size),t.deco&&h.setAttributeNS(null,"text-decoration",t.deco),h.textContent=n,i.color.svg(h),this._elt.appendChild(h)),(l=V2.createElementNS(P2,"text")).setAttributeNS(null,"y",r),l.setAttributeNS(null,"dy",k27[a||"top"]),l.setAttributeNS(null,"x",s),l.setAttributeNS(null,"text-anchor",j27[o]),l.setAttributeNS(null,"font-size",t.size),t.deco&&l.setAttributeNS(null,"text-decoration",t.deco),l.textContent=n,e&&e.svg(l),this._elt.appendChild(l),this},drawTextRect:function(t,e,i,n,s,r){return this.drawText(t,e,i,n.x+n.width/2,n.y+n.height/2,s,r),this},drawTextBounds:function(t,e,i,n,s,r,o,a,h){return this.drawText(t,e,i,n+r/2,s+o/2,a,h),this},drawTextRectA:function(t,e,i,n,s){return this.drawTextBoundsA(t,e,i,n.x,n.y,n.width,n.height,s),this},drawTextBoundsA:function(t,e,i,n,s,r,o,a){return n+=r/2,s+=o/2,this.drawText(t,e,i,n,s,"center","middle",a),this},drawImage:function(t,e,i,n,s){var r=V2.createElementNS(P2,"image");return r.setAttributeNS(d8,"href",t.src),r.setAttributeNS(null,"preserveAspectRatio","none"),r.setAttributeNS(null,"x",e),r.setAttributeNS(null,"y",i),r.setAttributeNS(null,"width",n),r.setAttributeNS(null,"height",s),this._elt.appendChild(r),this},drawImageAlpha:function(t,e,i,n,s,r){var o=V2.createElementNS(P2,"image");return o.setAttributeNS(d8,"href",t.src),o.setAttributeNS(null,"preserveAspectRatio","none"),o.setAttributeNS(null,"x",i),o.setAttributeNS(null,"y",n),o.setAttributeNS(null,"width",s),o.setAttributeNS(null,"height",r),o.setAttributeNS(null,"opacity",e),this._elt.appendChild(o),this},drawImageI:function(t,e,i,n,s){var r=V2.createElementNS(P2,"image");return e=Math.floor(e),i=Math.floor(i),r.setAttributeNS(d8,"href",t.src),r.setAttributeNS(null,"preserveAspectRatio","none"),r.setAttributeNS(null,"x",e),r.setAttributeNS(null,"y",i),r.setAttributeNS(null,"width",n),r.setAttributeNS(null,"height",s),this._elt.appendChild(r),this},drawImageAlphaI:function(t,e,i,n,s,r){var o=V2.createElementNS(P2,"image");return i=Math.floor(i),n=Math.floor(n),o.setAttributeNS(d8,"href",t.src),o.setAttributeNS(null,"preserveAspectRatio","none"),o.setAttributeNS(null,"x",i),o.setAttributeNS(null,"y",n),o.setAttributeNS(null,"width",s),o.setAttributeNS(null,"height",r),o.setAttributeNS(null,"opacity",e),this._elt.appendChild(o),this},aL:function(t,e,i,n,s){return this.drawImage(t,e,i,n,s),this}},{$_nextId:1e4}),b7=I1("SvgSprite",null,{init:function(t,e){this._super();var i=this._svg=document.createElementNS(P2,"svg"),n=document.createElementNS(P2,"defs");i.appendChild(n),i.$_svgPool=e,t&&t._dom.appendChild(i);var s=i.style;s.position="absolute",s.background="",s.pointerEvents="none",i.contentText=i.innerText="Your browser does not support HTML5 Svg.",this._width=this._height=0,this._graphics=new U27(i,n)},setParent:function(t){t._dom.appendChild(this._svg)},setBounds:function(t,e,i,n){var s=this._svg;s.width=this._width=i,s.height=this._height=n,s.style.left=t+"px",s.style.top=e+"px",s.setAttributeNS(null,"width",i),s.setAttributeNS(null,"height",n)},getGraphics:function(t,e){return t&&this._graphics.clear(),e&&this.setBounds(e.x,e.y,e.width,e.height),this._graphics},render:function(t){var e=this._svg,i=this._graphics;i.renderOpen(e),i.clear(),t(e,i,this._width,this._height),i.renderClose(e)},renderAdd:function(t){var e=this._svg,i=this._graphics;i.renderOpen(e),t(e,i,this._width,this._height),i.renderClose(e)}}),U58=I1("SingleTouchTracker",null,{init:function(){this._super()},start:function(t,e){},move:function(t,e){},stop:function(t,e){}}),$_TAP_THRESHOLD=4,$_DOUBLE_TAP_THRESHOLD=300,$_LONG_TAP_THRESHOLD=700,$_SWIPE_THRESHOLD=20,e28=I1("SingleTouchManager",I28,{init:function(t){this._super(t),this._touchId=void 0,this._started=null,this._seconded=null,this._startX=NaN,this._startY=NaN,this._tapped=0,this._dragging=!1,this._prevX=NaN,this._prevY=NaN,this._longTapTimer=void 0,this._tracker=null,this._events=[]},touchHandler:null,tapHandler:null,doubleTapHandler:null,longTapHandler:null,dragStartHandler:null,dragHandler:null,dragEndHandler:null,swipeHandler:null,touchStart:function(t){clearTimeout(this._longTapTimer);var e=t.changedTouches;if(0<e.length){var i=this._toOffset(e[0]);if(this._tracker&&(this._tracker.stop(i.x,i.y),this._tracker=null),this._touchId=i.identifier,this._dragging=!1,this._touchHandler&&(this._tracker=this._touchHandler(i.x,i.y)))return this._tracker.start(i.x,i.y),!0;0==this._tapped?(this._started=F0(),this._prevX=this._startX=i.x,this._prevY=this._startY=i.y):(this._seconded=F0(),this._prevX=i.x,this._prevY=i.y),this._events=[],this._events.push({x:i.x,y:i.y,t:t.timeStamp}),this._longTapTimer=setTimeout(function(){this._longTapHandler&&this._longTapHandler(this._startX,this._startY)&&(this._touchId=void 0,this._tapped=0)}.bind(this),$_LONG_TAP_THRESHOLD)}else alert("no touch ?");return!1},touchMove:function(t){var e=this.$_findTouch(t);return!!e&&(this._tracker?this._tracker.move(e.x,e.y):(this._dragging?this._dragHandler&&this._dragHandler(this._prevX,this._prevY,e.x,e.y):(Math.abs(this._prevX-e.x)>$_TAP_THRESHOLD||Math.abs(this._prevY-e.y)>$_TAP_THRESHOLD)&&(clearTimeout(this._longTapTimer),this._tapped=0,this._dragging=!0,this._dragStartHandler&&this._dragStartHandler(this._startX,this._startY,e.x,e.y)),this._prevX=e.x,this._prevY=e.y,this._events.push({x:e.x,y:e.y,t:t.timeStamp}),30<this._events.length&&this._events.splice(0,15)),!0)},touchEnd:function(t){if(clearTimeout(this._longTapTimer),void 0!==this._touchId){var e=this.$_findTouch(t);e&&(this._tracker?this._tracker.stop(e.x,e.y):this._dragging?(this._touchId=void 0,this._tapped=0,this._swipeHandler&&this.$_checkSwipe(),this._dragEndHandler&&this._dragEndHandler(e.x,e.y)):0==this._tapped?(this._tapped=1,this._tapHandler&&this._tapHandler(this._startX,this._startY)):1==this._tapped?(this._touchId=void 0,(e=F0())-this._started<$_DOUBLE_TAP_THRESHOLD?(this._tapped=0,this._doubleTapHandler&&this._doubleTapHandler(this._startX,this._startY)):(this._tapped=1,this._started=this._seconded,this._startX=this._prevX,this._starty=this._prevY,this._tapHandler&&this._tapHandler(this._prevX,this._prevY))):alert("touch end")),this._tracker=null}},touchCancel:function(t){clearTimeout(this._longTapTimer);var e=this.$_findTouch(t);e&&this._tracker&&this._tracker.stop(e.x,e.y)},$_findTouch:function(t){for(var e=t.changedTouches,i=0;i<e.length;i++){var n=e[i];if(n&&n.identifier==this._touchId)return this._toOffset(n)}return null},$_checkSwipe:function(){var t=this._events,e=t.length;if(!(e<2)){for(var i=t[e-1],n=t[e-2],s=e-3;0<=s&&!(100<i.t-n.t);s--)n=t[s];var r=n.x,o=n.y,a=i.x,h=i.y,l=Math.sqrt(Math.pow(r-a,2)+Math.pow(o-h,2))/Math.max(16,i.t-n.t);if(.1<l){var u=Math.log(.1/l)/Math.log(.998),d=l*(1-Math.pow(.998,u+1))/(1-.998),c="right",_=Math.round(180*Math.atan2(h-o,a-r)/Math.PI);_<0&&(_=360+_),45<_&&_<=135?c="bottom":135<_&&_<=225?c="left":225<_&&_<=315&&(c="top"),this._swipeHandler(u,d,c)}}}}),d58=[12354],Y8,B0=function(a,t){var e={},i=e.lib={},n=function(){},s=i.Base={extend:function(t){n.prototype=this;var e=new n;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),(e.init.prototype=e).$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},h=i.WordArray=s.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||o).stringify(this)},concat:function(t){var e=this.words,i=t.words,n=this.sigBytes;if(t=t.sigBytes,this.clamp(),n%4)for(var s=0;s<t;s++)e[n+s>>>2]|=(i[s>>>2]>>>24-s%4*8&255)<<24-(n+s)%4*8;else if(65535<i.length)for(s=0;s<t;s+=4)e[n+s>>>2]=i[s>>>2];else e.push.apply(e,i);return this.sigBytes+=t,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=a.ceil(e/4)},clone:function(){var t=s.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],i=0;i<t;i+=4)e.push(4294967296*a.random()|0);return new h.init(e,t)}}),r=e.enc={},o=r.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var i=[],n=0;n<t;n++){var s=e[n>>>2]>>>24-n%4*8&255;i.push((s>>>4).toString(16)),i.push((15&s).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new h.init(i,e/2)}},l=r.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var i=[],n=0;n<t;n++)i.push(String.fromCharCode(e[n>>>2]>>>24-n%4*8&255));return i.join("")},parse:function(t){for(var e=t.length,i=[],n=0;n<e;n++)i[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new h.init(i,e)}},u=r.Utf8={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return l.parse(unescape(encodeURIComponent(t)))}},d=i.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,i=e.words,n=e.sigBytes,s=this.blockSize,r=n/(4*s);if(t=(r=t?a.ceil(r):a.max((0|r)-this._minBufferSize,0))*s,n=a.min(4*t,n),t){for(var o=0;o<t;o+=s)this._doProcessBlock(i,o);o=i.splice(0,t),e.sigBytes-=n}return new h.init(o,n)},clone:function(){var t=s.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});i.Hasher=d.extend({cfg:s.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(t,e){return new i.init(e).finalize(t)}},_createHmacHelper:function(i){return function(t,e){return new c.HMAC.init(i,e).finalize(t)}}});var c=e.algo={};return e}(Math),CDa,DDa,EDa,FDa,GDa,ZBa,$Ba;ZBa=B0,$Ba=ZBa.lib.WordArray,ZBa.enc.Base64={stringify:function(t){var e=t.words,i=t.sigBytes,n=this._map;t.clamp(),t=[];for(var s=0;s<i;s+=3)for(var r=(e[s>>>2]>>>24-s%4*8&255)<<16|(e[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|e[s+2>>>2]>>>24-(s+2)%4*8&255,o=0;o<4&&s+.75*o<i;o++)t.push(n.charAt(r>>>6*(3-o)&63));if(e=n.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var e=t.length,i=this._map;(n=i.charAt(64))&&-1!=(n=t.indexOf(n))&&(e=n);for(var n=[],s=0,r=0;r<e;r++)if(r%4){var o=i.indexOf(t.charAt(r-1))<<r%4*2,a=i.indexOf(t.charAt(r))>>>6-r%4*2;n[s>>>2]|=(o|a)<<24-s%4*8,s++}return $Ba.create(n,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(r){function y(t,e,i,n,s,r,o){return((t=t+(i^(e|~n))+s+o)<<r|t>>>32-r)+e}function x(t,e,i,n,s,r,o){return((t=t+(e^i^n)+s+o)<<r|t>>>32-r)+e}function E(t,e,i,n,s,r,o){return((t=t+(e&n|i&~n)+s+o)<<r|t>>>32-r)+e}function b(t,e,i,n,s,r,o){return((t=t+(e&i|~e&n)+s+o)<<r|t>>>32-r)+e}for(var t=B0,e=(n=t.lib).WordArray,i=n.Hasher,n=t.algo,S=[],s=0;s<64;s++)S[s]=4294967296*r.abs(r.sin(s+1))|0;n=n.MD5=i.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(i=0;i<16;i++)s=t[n=e+i],t[n]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8);var i=this._hash.words,n=t[e+0],s=t[e+1],r=t[e+2],o=t[e+3],a=t[e+4],h=t[e+5],l=t[e+6],u=t[e+7],d=t[e+8],c=t[e+9],_=t[e+10],f=t[e+11],g=t[e+12],m=t[e+13],p=t[e+14],w=t[e+15],v=i[0],C=i[1],I=i[2],R=i[3];C=y(C=y(C=y(C=y(C=x(C=x(C=x(C=x(C=E(C=E(C=E(C=E(C=b(C=b(C=b(C=b(C,I=b(I,R=b(R,v=b(v,C,I,R,n,7,S[0]),C,I,s,12,S[1]),v,C,r,17,S[2]),R,v,o,22,S[3]),I=b(I,R=b(R,v=b(v,C,I,R,a,7,S[4]),C,I,h,12,S[5]),v,C,l,17,S[6]),R,v,u,22,S[7]),I=b(I,R=b(R,v=b(v,C,I,R,d,7,S[8]),C,I,c,12,S[9]),v,C,_,17,S[10]),R,v,f,22,S[11]),I=b(I,R=b(R,v=b(v,C,I,R,g,7,S[12]),C,I,m,12,S[13]),v,C,p,17,S[14]),R,v,w,22,S[15]),I=E(I,R=E(R,v=E(v,C,I,R,s,5,S[16]),C,I,l,9,S[17]),v,C,f,14,S[18]),R,v,n,20,S[19]),I=E(I,R=E(R,v=E(v,C,I,R,h,5,S[20]),C,I,_,9,S[21]),v,C,w,14,S[22]),R,v,a,20,S[23]),I=E(I,R=E(R,v=E(v,C,I,R,c,5,S[24]),C,I,p,9,S[25]),v,C,o,14,S[26]),R,v,d,20,S[27]),I=E(I,R=E(R,v=E(v,C,I,R,m,5,S[28]),C,I,r,9,S[29]),v,C,u,14,S[30]),R,v,g,20,S[31]),I=x(I,R=x(R,v=x(v,C,I,R,h,4,S[32]),C,I,d,11,S[33]),v,C,f,16,S[34]),R,v,p,23,S[35]),I=x(I,R=x(R,v=x(v,C,I,R,s,4,S[36]),C,I,a,11,S[37]),v,C,u,16,S[38]),R,v,_,23,S[39]),I=x(I,R=x(R,v=x(v,C,I,R,m,4,S[40]),C,I,n,11,S[41]),v,C,o,16,S[42]),R,v,l,23,S[43]),I=x(I,R=x(R,v=x(v,C,I,R,c,4,S[44]),C,I,g,11,S[45]),v,C,w,16,S[46]),R,v,r,23,S[47]),I=y(I,R=y(R,v=y(v,C,I,R,n,6,S[48]),C,I,u,10,S[49]),v,C,p,15,S[50]),R,v,h,21,S[51]),I=y(I,R=y(R,v=y(v,C,I,R,g,6,S[52]),C,I,o,10,S[53]),v,C,_,15,S[54]),R,v,s,21,S[55]),I=y(I,R=y(R,v=y(v,C,I,R,d,6,S[56]),C,I,w,10,S[57]),v,C,l,15,S[58]),R,v,m,21,S[59]),I=y(I,R=y(R,v=y(v,C,I,R,a,6,S[60]),C,I,f,10,S[61]),v,C,r,15,S[62]),R,v,c,21,S[63]);i[0]=i[0]+v|0,i[1]=i[1]+C|0,i[2]=i[2]+I|0,i[3]=i[3]+R|0},_doFinalize:function(){var t=this._data,e=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;e[n>>>5]|=128<<24-n%32;var s=r.floor(i/4294967296);for(e[15+(n+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e[14+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.sigBytes=4*(e.length+1),this._process(),e=(t=this._hash).words,i=0;i<4;i++)n=e[i],e[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return t},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}}),t.MD5=i._createHelper(n),t.HmacMD5=i._createHmacHelper(n)}(Math),CDa=B0,DDa=CDa.lib,EDa=DDa.Base,FDa=DDa.WordArray,GDa=(DDa=CDa.algo).EvpKDF=EDa.extend({cfg:EDa.extend({keySize:4,hasher:DDa.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var i=(o=this.cfg).hasher.create(),n=FDa.create(),s=n.words,r=o.keySize,o=o.iterations;s.length<r;){a&&i.update(a);var a=i.update(t).finalize(e);i.reset();for(var h=1;h<o;h++)a=i.finalize(a),i.reset();n.concat(a)}return n.sigBytes=4*r,n}}),CDa.EvpKDF=function(t,e,i){return GDa.create(i).compute(t,e)},B0.lib.Cipher||function(t){var e=(_=B0).lib,i=e.Base,o=e.WordArray,n=e.BufferedBlockAlgorithm,s=_.enc.Base64,r=_.algo.EvpKDF,a=e.Cipher=n.extend({cfg:i.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,i){this.cfg=this.cfg.extend(i),this._xformMode=t,this._key=e,this.reset()},reset:function(){n.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(n){return{encrypt:function(t,e,i){return("string"==typeof e?f:c).encrypt(n,t,e,i)},decrypt:function(t,e,i){return("string"==typeof e?f:c).decrypt(n,t,e,i)}}}});e.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var h=_.mode={},l=function(t,e,i){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var s=0;s<i;s++)t[e+s]^=n[s]},u=(e.BlockCipherMode=i.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();u.Encryptor=u.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize;l.call(this,t,e,n),i.encryptBlock(t,e),this._prevBlock=t.slice(e,e+n)}}),u.Decryptor=u.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize,s=t.slice(e,e+n);i.decryptBlock(t,e),l.call(this,t,e,n),this._prevBlock=s}}),h=h.CBC=u,u=(_.pad={}).Pkcs7={pad:function(t,e){for(var i=4*e,n=(i-=t.sigBytes%i)<<24|i<<16|i<<8|i,s=[],r=0;r<i;r+=4)s.push(n);i=o.create(s,i),t.concat(i)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},e.BlockCipher=a.extend({cfg:a.cfg.extend({mode:h,padding:u}),reset:function(){a.reset.call(this);var t=(e=this.cfg).iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=e.createEncryptor;else i=e.createDecryptor,this._minBufferSize=1;this._mode=i.call(e,this,t&&t.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var d=e.CipherParams=i.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),c=(h=(_.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return((t=t.salt)?o.create([1398893684,1701076831]).concat(t).concat(e):e).toString(s)},parse:function(t){var e=(t=s.parse(t)).words;if(1398893684==e[0]&&1701076831==e[1]){var i=o.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return d.create({ciphertext:t,salt:i})}},e.SerializableCipher=i.extend({cfg:i.extend({format:h}),encrypt:function(t,e,i,n){n=this.cfg.extend(n);var s=t.createEncryptor(i,n);return e=s.finalize(e),s=s.cfg,d.create({ciphertext:e,key:i,iv:s.iv,algorithm:t,mode:s.mode,padding:s.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,i,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),t.createDecryptor(i,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}})),_=(_.kdf={}).OpenSSL={execute:function(t,e,i,n){return n||(n=o.random(8)),t=r.create({keySize:e+i}).compute(t,n),i=o.create(t.words.slice(e),4*i),t.sigBytes=4*e,d.create({key:t,iv:i,salt:n})}},f=e.PasswordBasedCipher=c.extend({cfg:c.cfg.extend({kdf:_}),encrypt:function(t,e,i,n){return i=(n=this.cfg.extend(n)).kdf.execute(i,t.keySize,t.ivSize),n.iv=i.iv,(t=c.encrypt.call(this,t,e,i.key,n)).mixIn(i),t},decrypt:function(t,e,i,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),i=n.kdf.execute(i,t.keySize,t.ivSize,e.salt),n.iv=i.iv,c.decrypt.call(this,t,e,i.key,n)}})}(),function(){for(var t=B0,e=t.lib.BlockCipher,i=t.algo,o=[],n=[],s=[],r=[],a=[],h=[],l=[],u=[],d=[],c=[],_=[],f=0;f<256;f++)_[f]=f<128?f<<1:f<<1^283;var g=0,m=0;for(f=0;f<256;f++){var p=(p=m^m<<1^m<<2^m<<3^m<<4)>>>8^255&p^99;o[g]=p;var w=_[n[p]=g],v=_[w],C=_[v],I=257*_[p]^16843008*p;s[g]=I<<24|I>>>8,r[g]=I<<16|I>>>16,a[g]=I<<8|I>>>24,h[g]=I,I=16843009*C^65537*v^257*w^16843008*g,l[p]=I<<24|I>>>8,u[p]=I<<16|I>>>16,d[p]=I<<8|I>>>24,c[p]=I,g?(g=w^_[_[_[C^w]]],m^=_[_[m]]):g=m=1}var R=[0,1,2,4,8,16,32,64,128,27,54];i=i.AES=e.extend({_doReset:function(){for(var t=(i=this._key).words,e=i.sigBytes/4,i=4*((this._nRounds=e+6)+1),n=this._keySchedule=[],s=0;s<i;s++)if(s<e)n[s]=t[s];else{var r=n[s-1];s%e?6<e&&4==s%e&&(r=o[r>>>24]<<24|o[r>>>16&255]<<16|o[r>>>8&255]<<8|o[255&r]):(r=o[(r=r<<8|r>>>24)>>>24]<<24|o[r>>>16&255]<<16|o[r>>>8&255]<<8|o[255&r],r^=R[s/e|0]<<24),n[s]=n[s-e]^r}for(t=this._invKeySchedule=[],e=0;e<i;e++)s=i-e,r=e%4?n[s]:n[s-4],t[e]=e<4||s<=4?r:l[o[r>>>24]]^u[o[r>>>16&255]]^d[o[r>>>8&255]]^c[o[255&r]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,r,a,h,o)},decryptBlock:function(t,e){var i=t[e+1];t[e+1]=t[e+3],t[e+3]=i,this._doCryptBlock(t,e,this._invKeySchedule,l,u,d,c,n),i=t[e+1],t[e+1]=t[e+3],t[e+3]=i},_doCryptBlock:function(t,e,i,n,s,r,o,a){for(var h=this._nRounds,l=t[e]^i[0],u=t[e+1]^i[1],d=t[e+2]^i[2],c=t[e+3]^i[3],_=4,f=1;f<h;f++){var g=n[l>>>24]^s[u>>>16&255]^r[d>>>8&255]^o[255&c]^i[_++],m=n[u>>>24]^s[d>>>16&255]^r[c>>>8&255]^o[255&l]^i[_++],p=n[d>>>24]^s[c>>>16&255]^r[l>>>8&255]^o[255&u]^i[_++];c=n[c>>>24]^s[l>>>16&255]^r[u>>>8&255]^o[255&d]^i[_++],l=g,u=m,d=p}g=(a[l>>>24]<<24|a[u>>>16&255]<<16|a[d>>>8&255]<<8|a[255&c])^i[_++],m=(a[u>>>24]<<24|a[d>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^i[_++],p=(a[d>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&u])^i[_++],c=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[u>>>8&255]<<8|a[255&d])^i[_++],t[e]=g,t[e+1]=m,t[e+2]=p,t[e+3]=c},keySize:8});t.AES=e._createHelper(i)}();var $$_licd,p5=B0.enc.Base64.parse(DataLudiLic);p5=B0.enc.Utf8.stringify(p5),p5=B0.AES.decrypt(p5,"kji_babo").toString(B0.enc.Utf8);var $$_lic=JSON.parse(p5),$$_licdom=$$_lic.domain=$$_lic.domain.split(";");$$_loc=$$_loc.hostname,E2.getLocale=function(t){return E2[t]||E2.en},E2.setLanguage=function(t){E2._default=E2.getLocale(t||$_language)},E2.setLocale=function(t,e){if(t&&I4(e))switch(E2[t]=R4(new E2(t),e),t){case"ja":E2.jp=E2.ja;break;case"jp":E2.ja=E2.jp;break;case"zh":E2.cn=E2.zh;break;case"cn":E2.zh=E2.cn}},E2.en=R4(new E2("en"),{}),E2.ko=E2.kr=R4(new E2("ko"),{dataFieldIndexOutOfBounds:"   .",valueIndexOutOfBounds:"   .",emptyGridMessage:"    DisplayOptions.emptyGridMessage  .",emptyDataMessage:"  .",invalidDerivedFieldType:"DerivedField object   .",deleteRowsConfirm:" () ?",sortingToast:" ...",filteringToast:" ...",groupingToast:" ...",completeEditing:"   .",invalidInputFormat:"  .",minLengthRequired:" ${length}   .",invalidCode128Char:"   code128 .",invalidcode39Char:"   code39 .",columnFilterExists:"   : "}),E2._default=E2.getLocale($_language);var p0=A2("ScrollButtonLocation",{NORMAL:"normal",NEAR:"near",FAR:"far",HIDDEN:"hidden"}),c6=A2("ScrollBarIndent",{NONE:"none",HEADER:"header",FIXED:"fixed"}),a1=A2("ValueType",{TEXT:"text",NUMBER:"number",BOOLEAN:"boolean",DATETIME:"datetime",OBJECT:"object"}),j1=A2("DataRowState",{NONE:"none",CREATED:"created",UPDATED:"updated",DELETED:"deleted",CREATE_AND_DELETED:"createAndDeleted",isNone:function(t){return!t||t==j1.NONE},isDeleted:function(t){return t==j1.DELETED||t==j1.CREATE_AND_DELETED}}),R58=A2("DataPendingState",{NONE:"none",INSERT_ROW:"insertRow",INSERT_ROWS:"insertRows",UPDATE_ROW:"updateRow",UPDATE_ROWS:"updateRows",DELETE_ROW:"deleteRow",DELETE_ROWS:"deleteRows"}),n4=A2("DataFillMode",{SET:"set",APPEND:"append",INSERT:"insert",UPDATE:"update"}),f3=A2("DataRestoreMode",{NONE:"none",AUTO:"auto",EXPLICIT:"explicit"}),H3=A2("ColumnCalcRange",{ROWS:"rows",FIRST:"first",LAST:"last",LOWER:"lower",UPPER:"upper",LOWER_BOUNDS:"lowerBounds",UPPER_BOUNDS:"upperBounds"}),Y27=A2("ColumnCalcBounds",{GRID:"grid",GROUP:"group"}),z0=A2("TextInputCase",{NORMAL:"normal",UPPER:"upper",LOWER:"lower",DEFAULT:"default"}),T1=A2("GridRowState",{NORMAL:"normal",FOCUSED:"focused",UPDATING:"updating",INSERTING:"inserting",APPENDING:"appending",isEditing:function(t){return t==T1.UPDATING||t==T1.INSERTING||t==T1.APPENDING},isInserting:function(t){return t==T1.INSERTING||t==T1.APPENDING},isUpdating:function(t){return t==T1.UPDATING}}),w58=A2("PagingSource",{DATA_ROWS:"dataRows",GRID_ROWS:"gridRows"}),d0=A2("ColumnGroupLayout",{HORIZONTAL:"horizontal",VERTICAL:"vertical"}),E58=A2("ButtonState",{UP:0,HOVER:1,DOWN:2}),n0=A2("HandleVisibility",{VISIBLE:"visible",HOVERED:"hovered",ALWAYS:"always",HIDDEN:"hidden"}),O6=A2("SortMode",{AUTO:"auto",EXPLICIT:"explicit"}),P7=A2("SortStyle",{NONE:"none",EXCLUSIVE:"exclusive",INCLUSIVE:"inclusive",REVERSE:"reverse"}),M4=A2("SortDirection",{ASCENDING:"ascending",DESCENDING:"descending"}),g7=A2("SortCase",{SENSITIVE:"sensitive",INSENSITIVE:"insensitive"}),j6=A2("FilterMode",{AUTO:"auto",EXPLICIT:"explicit"}),k6=A2("RowGroupDisplayMode",{BANDED:"banded",BOXED:"boxed",MERGED:"merged"}),Y0=A2("CellButton",{NONE:"none",ACTION:"action",POPUP:"popup"}),c7=A2("ButtonVisibility",{ALWAYS:"always",DEFAULT:"default",VISIBLE:"visible",CURRENT:"current",HIDDEN:"hidden"}),t07=A2("ButtonPosition",{DEFAULT:"default",LEFT:"left",RIGHT:"right"}),R07=A2("LookupCase",{SENSITIVE:"sensitvie",INSENSITIVE:"insensitive",LOWER:"lower",UPPER:"upper"}),z5=A2("RowIndicatorValue",{NONE:"none",ROW_INDEX:"rowIndex",DATA_INDEX:"dataIndex"}),K58=A2("DataStateDisplay",{HIDDEN:"hidden",NEAR:"near",FAR:"far"}),t0=A2("GridFitStyle",{NONE:"none",EVEN:"even",EVEN_FILL:"evenFill",FILL:"fill"}),X2=A2("RowGroupAdornments",{BOTH:"both",HEADER:"header",FOOTER:"footer",NONE:"none",isHeader:function(t){return"both"==t||"header"==t},isFooter:function(t){return"both"==t||"footer"==t}}),N58=A2("RowGroupCellDisplay",{NORMAL:"normal",MERGE:"merge",HIDE:"hide"}),P58=A2("RowGroupFooterVisibility",{ALWAYS:"always",MULTI_ROWS_ONLY:"multiRowsOnly"}),G3=A2("SelectionMode",{NONE:"none",SINGLE:"single",EXTENDED:"extended"}),b2=A2("SelectionStyle",{BLOCK:"block",ROWS:"rows",COLUMNS:"columns",SINGLE_ROW:"singleRow",SINGLE_COLUMN:"singleColumn",SINGLE:"single",NONE:"none",isSingle:function(t){return t&&(t==b2.SINGLE_ROW||t==b2.SINGLE_COLUMN||t==b2.SINGLE)},isRow:function(t){return t&&(t==b2.ROWS||t==b2.SINGLE_ROW)},isColumn:function(t){return t&&(t==b2.COLUMNS||t==b2.SINGLE_COLUMN)}}),t8=A2("SelectionDisplay",{MASK:"mask",CELL:"cell"}),e2=A2("HeaderItemLocation",{DEFAULT:"default",NONE:"none",LEFT_SIDE:"leftSide",RIGHT_SIDE:"rightSide",TOP_SIDE:"topSide",BOTTOM_SIDE:"bottomSide",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",CENTER:"center",isHorz:function(t){return N3(t,e2.LEFT_SIDE,e2.LEFT,e2.RIGHT_SIDE,e2.RIGHT)},isHorzSide:function(t){return N3(t,e2.LEFT_SIDE,e2.RIGHT_SIDE)}}),s4=A2("SubTextLocation",{DEFAULT:"default",NONE:"none",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",isHorz:function(t){return N3(t,s4.LEFT,s4.RIGHT)}}),e7=A2("ImageDisplay",{DEFAULT:"default",CENTER:"center",BOTH:"both",WIDTH:"width",HEIGHT:"height",AUTO:"auto",REPEAT:"repeat",REPEATX:"repeatx",REPEATY:"repeaty"}),Z58=A2("CheckLabelPosition",{HIDDEN:"hidden",RIGHT:"right",LEFT:"left",BOTTOM:"bottom",TOP:"top"}),i58=A2("IndicatorCurrentShape",{DEFAULT:"default",TRIANGLE:"triangle",CIRCLE:"circle"}),b9=A2("SortOrderVisibility",{INHERIT:"inherit",VISIBLE:"visible",HIDDEN:"hidden"}),m9=A2("CustomGroupItemType",{HEADER:"header",FOOTER:"footer"}),R8=A2("CustomGridItemType",{HEADER:"header",FOOTER:"footer"}),T0=A2("RowHoverMaskExtent",{INDICATOR_AND_DATA:"indicatorAndData",INDICATOR_AND_FILL:"indicatorAndFill",CHECK_AND_DATA:"checkAndData",CHECK_AND_FILL:"checkAndFill",DATA:"data",FILL:"fill",CELL:"cell"}),u3=A2("ListItemDisplay",{DEFAULT:"default",VALUE_LABEL:"valueLabel",LABEL_VALUE:"labelValue",subLabeled:function(t){return t===u3.VALUE_LABEL||t===u3.LABEL_VALUE}}),D9=A2("ImeMode",{ACTIVE:"active",AUTO:"auto",DISABLED:"disabled",INACTIVE:"inactive"});B7.FORMATS=["custom","iso","platform"],B7.Default=new B7("yyyy/MM/dd HH:mm:ss"),B7.Default.setAmText("AM"),B7.Default.setPmText("PM"),B7.Default.setBaseYear(2e3);var x28=I1("IconElement",o7,{init:function(t,e){this._super(t,e),this._image=null},setImage:function(t){t!=this._image&&(this._image=t,this.invalidate())},iconWidth:function(){return this._image?this._image.width:0},iconHeight:function(){return this._image?this._image.height:0},_doDraw:function(t){var e=this._image;if(e){var i=Math.min(this.width(),e.width),n=Math.min(this.height(),e.height),s=(this.width()-i)/2,r=(this.height()-n)/2;t.drawImage(e,s,r,i,n)}},_doDrawHtml:function(){var t=this._svg;t||(t=this._svg=new b7(this,this.container())),this._doDraw(t.getGraphics(!0))}}),L28=I1("GridSummarizer",null,{init:function(){this._super()},getCount:function(){},getSum:function(t){},getMax:function(t){},getMin:function(t){},getAvg:function(t){},getVar:function(t){},getVarp:function(t){},getStdev:function(t){},getStdevp:function(t){},summarize:function(t,e){},summarizeGroup:function(t,e,i){}}),w07=I1("DefaultSummarizer",L28,{init:function(t){this._super(),this._provider=t},getCount:function(t){return this._provider.getNumber(t)},getSum:function(t){return this._provider.getSum(t)},getMax:function(t){return this._provider.getMax(t)},getMin:function(t){return this._provider.getMin(t)},getAvg:function(t){return this._provider.getAvg(t)},getVar:function(t){return this._provider.getVar(t)},getVarp:function(t){return this._provider.getVarp(t)},getStdev:function(t){return this._provider.getStdev(t)},getStdevp:function(t){return this._provider.getStdevp(t)},summarize:function(t,e){var i=this._provider.getSummarized(t);return isNaN(i)&&(i=e(),this._provider.setSummarized(t,i)),i},summarizeGroup:function(t,e,i){var n=e.getSummarized(t);return isNaN(n)&&(n=i(),e.setSummarized(t,n)),n}}),H28=I1("BarCode",null,{init:function(){this._super(),this._value=null,this._error=null},value:function(){return this._value},setValue:function(t){if(t!=this._value){this._value=t;try{this._error=null,this._parse(t)}catch(t){this._error=t}}},error:function(){return this._error},render:function(t,e){this._error?L8("Barocde error: "+this._error):this._doRender(t,e)},_parse:function(t){},_doRender:function(t,e){}}),E07=I1("LinearBarcode",H28,{init:function(){this._super()},barFill:null,integralBar:!0,minBarWidth:1,maxBarWidth:0,barWidth:0,_doRender:function(t,e){if(this._barFill){var i=this._getBarLength();if(!(i<1)){var n=this._barWidth;n<=0&&(n=this._integralBar?Math.floor(e.width/i):e.width/i,n=Math.max(this._minBarWidth,n),0<this._maxBarWidth&&(n=Math.min(this._maxBarWidth,n))),i*=n,e.x+=(e.width-i)/2,this._integralBar&&(e.x=Math.floor(e.x)),this._drawBars(t,this._barFill,e.x,e.y,n,e.height)}}},_getBarLength:function(){return 0},_drawBars:function(t,e,i,n,s,r){}}),$$_C128_BAR_WEIGHTS=[2171426,2236706,2236961,1184291,1184546,1249826,1188371,1188626,1253906,2232851,2233106,2298386,1122866,1188146,1188401,1126946,1192226,1192481,2241041,2232626,2232881,2175506,2240786,3219761,3215906,3281186,3281441,3219986,3285266,3285521,2171171,2171681,2302241,1119011,1249571,1250081,1123091,1253651,1254161,2167571,2298131,2298641,1122611,1123121,1253681,1126691,1127201,1257761,3223841,2167601,2298161,2175251,2175761,2175281,3215651,3216161,3346721,3219731,3220241,3350801,3227921,2233361,4395281,1118756,1119266,1184036,1184801,1315106,1315361,1122836,1123346,1188116,1188881,1319186,1319441,2363921,2232596,4272401,2363666,1261841,1118786,1184066,1184321,1131026,1196306,1196561,4264466,4329746,4330001,2171201,2179361,4268321,1118531,1119041,1249601,1130771,1131281,4264211,4264721,1126721,1130801,3215681,4264241,2167826,2167316,2167346,36901138],$$_C128_STOP_CODE=106,$$_C128_TYPE_A=0,$$_C128_TYPE_B=1,$$_C128_TYPE_C=2,$$_C128_START_CODES=[103,104,105],$$_C128_MASKS=[251658240,15728640,983040,61440,3840,240,15],W28=I1("Code128",E07,{init:function(){this._super(),this._weights=[]},quietZoneWidth:10,_parse:function(t){this._weights=[];var e=t?t.length:0;if(!(e<1)){var i=this._detectType(t);i==$$_C128_TYPE_C&&e%2==1&&(t="0"+t,e++);var n,s,r=$$_C128_START_CODES[i],o=$$_C128_BAR_WEIGHTS[r],a=r;if(this._weights.push(o),i==$$_C128_TYPE_C)for(n=0;n<e;n+=2)s=t.substr(n,2),r=parseInt(s),r=this._convert(i,r),o=$$_C128_BAR_WEIGHTS[r],this._weights.push(o),a+=r*(n+1);else for(n=0;n<e;n++)r=t.charCodeAt(n),r=this._convert(i,r),o=$$_C128_BAR_WEIGHTS[r],this._weights.push(o),a+=r*(n+1);a%=103,this._weights.push($$_C128_BAR_WEIGHTS[a]),this._weights.push($$_C128_BAR_WEIGHTS[$$_C128_STOP_CODE])}},_getBarLength:function(){return this._quietZoneWidth+11*(this._weights.length-1)+13+this._quietZoneWidth},_drawBars:function(t,e,i,n,s,r){i+=10*s;var o,a,h,l,u=this._weights.length-1;for(o=0;o<u;o++)for(h=this._weights[o],a=0;a<6;a++)l=(h&$$_C128_MASKS[a+1])>>4*(5-a),l*=s,a%2==0&&(this._integralBar?t.drawBoundsI(e,null,i,n,l,r):t.drawBounds(e,null,i,n,l,r)),i+=l;for(h=this._weights[u],a=0;a<7;a++)l=(h&$$_C128_MASKS[a])>>4*(6-a),l*=s,a%2==0&&(this._integralBar?t.drawBoundsI(e,null,i,n,l,r):t.drawBounds(e,null,i,n,l,r)),i+=l},_convert:function(t,e){switch(t){case $$_C128_TYPE_A:if(0<=e&&e<32)return e+64;if(32<=e&&e<96)return e-32;case $$_C128_TYPE_B:if(32<=e&&e<128)return e-32;case $$_C128_TYPE_C:if(0<=e&&e<=99)return e}throw new Error(E2._default.invalidCode128Char+": "+e)},_detectType:function(t){var e=/^[0-9]+$/;return e.test(t)?$$_C128_TYPE_C:(e=/[a-z]/).test(t)?$$_C128_TYPE_B:$$_C128_TYPE_A}}),$$_C39_CODES={0:"nnnwwnwnn",1:"wnnwnnnnw",2:"nnwwnnnnw",3:"wnwwnnnnn",4:"nnnwwnnnw",5:"wnnwwnnnn",6:"nnwwwnnnn",7:"nnnwnnwnw",8:"wnnwnnwnn",9:"nnwwnnwnn",A:"wnnnnwnnw",B:"nnwnnwnnw",C:"wnwnnwnnn",D:"nnnnwwnnw",E:"wnnnwwnnn",F:"nnwnwwnnn",G:"nnnnnwwnw",H:"wnnnnwwnn",I:"nnwnnwwnn",J:"nnnnwwwnn",K:"wnnnnnnww",L:"nnwnnnnww",M:"wnwnnnnwn",N:"nnnnwnnww",O:"wnnnwnnwn",P:"nnwnwnnwn",Q:"nnnnnnwww",R:"wnnnnnwwn",S:"nnwnnnwwn",T:"nnnnwnwwn",U:"wwnnnnnnw",V:"nwwnnnnnw",W:"wwwnnnnnn",X:"nwnnwnnnw",Y:"wwnnwnnnn",Z:"nwwnwnnnn","-":"nwnnnnwnw",".":"wwnnnnwnn"," ":"nwwnnnwnn",$:"nwnwnwnnn","/":"nwnwnnnwn","+":"nwnnnwnwn","%":"nnnwnwnwn","*":"nwnnwnwnn"},J28=I1("Code39",E07,{init:function(){this._super(),this._codes=[],this._wideWidth=3},_parse:function(t){if(this._codes=[],t){var e,i,n,s=t.length;for(this._codes.push($$_C39_CODES["*"]),e=0;e<s;e++){if(i=t.charAt(e),!(n=$$_C39_CODES[i]))throw new Error(E2._default.invalidCode39Char+": "+i);this._codes.push(n)}this._codes.push($$_C39_CODES["*"])}},_getBarLength:function(){var t=this._codes.length;return t*(3*this._wideWidth+6)+(t-1)},_drawBars:function(t,e,i,n,s,r){var o,a,h,l,u=this._codes.length;for(o=0;o<u;o++){for(a=this._codes[o],h=0;h<9;h++)l="n"==a.charAt(h)?1:this._wideWidth,l*=s,h%2==0&&(this._integralBar?t.drawBoundsI(e,null,i,n,l,r):t.drawBounds(e,null,i,n,l,r)),i+=l;o<u-1&&(i+=s)}}});q17.prototype=new Error,q17.prototype.constructor=q17;var $$_SEP_HEAD="${",$$_SEP_TAIL="}",s0=JSON.parse(p5),Z07=s0.domain=s0.domain.split(";"),o8=o8.hostname,E8=I1("DataTag",null,{init:function(){this._super()},connect:function(t){},disconnect:function(){},clearRows:function(){},setRows:function(){},removeRow:function(t){},removeRows:function(t){},setValue:function(t,e){},updateRow:function(t){},saveValue:function(t,e,i){},restoreValue:function(t,e,i){},saveRow:function(t,e,i){},restoreRow:function(t,e,i){},saveRows:function(t,e,i){},restoreRows:function(t,e,i){}}),i07=I1("DataTagCollection",null,{init:function(t){this._super(),this._owner=t,this._tags=null,this._tag=null},add:function(t){t&&(this._tag?t!==this._tag?(this._tags=[],this._tags.push(this._tag,t),this._tag=null):this._tags.indexOf(t)<0&&this._tags.push(t):this._tag=t,t.connect(this._owner))},remove:function(t){if(t)if(t==this._tag)this._tag=null,t.disconnect();else if(this._tags){var e=this._tags.indexOf(t);0<=e&&(this._tags.splice(e,1),1==this._tags.length&&(this._tag=this._tags[0],this._tags.length=0,this._tags=null),t.disconnect())}},clearRows:function(){if(this._tag)this._tag.clearRows();else if(this._tags){var t,e=this._tags;for(t=e.length;t--;)e[t].clearRows()}},setRows:function(){if(this._tag)this._tag.setRows();else if(this._tags){var t,e=this._tags;for(t=e.length;t--;)e[t].setRows()}},removeRow:function(t){if(this._tag)this._tag.removeRow(t);else if(this._tags){var e,i=this._tags;for(e=i.length;e--;)i[e].removeRow(t)}},removeRows:function(t){if(this._tag)this._tag.removeRows(t);else if(this._tags){var e,i=this._tags;for(e=i.length;e--;)i[e].removeRows(t)}},setValue:function(t,e){if(this._tag)this._tag.setValue(t,e);else if(this._tags){var i,n=this._tags;for(i=n.length;i--;)n[i].setValue(t,e)}},updateRow:function(t){if(this._tag)this._tag.updateRow(t);else if(this._tags)for(var e=this._tags,i=e.length;i--;)e[i].updateRow(t)},$_saveValue:function(t,e,i){if(this._tag)this._tag.saveValue(t,e,i);else if(this._tags){var n,s=this._tags;for(n=s.length;n--;)s[n].saveValue(t,e,i)}},$_restoreValue:function(t,e,i){if(this._tag)this._tag.restoreValue(t,e,i);else if(this._tags){var n,s=this._tags;for(n=s.length;n--;)s[n].restoreValue(t,e,i)}},$_saveRow:function(t,e,i){if(this._tag)this._tag.saveRow(t,e,i);else if(this._tags){var n,s=this._tags;for(n=s.length;n--;)s[n].saveRow(t,e,i)}},$_restoreRow:function(t,e,i){if(this._tag)this._tag.restoreRow(t,e,i);else if(this._tags){var n,s=this._tags;for(n=s.length;n--;)s[n].restoreRow(t,e,i)}},$_saveRows:function(t,e,i){if(this._tag)this._tag.saveRows(t,e,i);else if(this._tags){var n,s=this._tags;for(n=s.length;n--;)s[n].saveRows(t,e,i)}},$_restoreRows:function(t,e,i){if(this._tag)this._tag.restoreRows(t,e,i);else if(this._tags){var n,s=this._tags;for(n=s.length;n--;)s[n].restoreRows(t,e,i)}}}),V58=I1("GridDataTag",E8,{init:function(){this._super()},setRowCount:function(t){},insertRow:function(t){},insertRows:function(t,e){},updateRows:function(t){},moveRow:function(t,e){},moveRows:function(t,e,i){}}),O28=I1("GridDataTagCollection",i07,{init:function(t){this._super(),this._owner=t,this._tags=null,this._tag=null},setRowCount:function(t){if(this._tag)this._tag.setRowCount(t);else if(this._tags)for(var e=this._tags,i=e.length;i--;)e[i].setRowCount(t)},insertRow:function(t){if(this._tag)this._tag.insertRow(t);else if(this._tags)for(var e=this._tags,i=e.length;i--;)e[i].insertRow(t)},insertRows:function(t,e){if(this._tag)this._tag.insertRows(t,e);else if(this._tags)for(var i=this._tags,n=i.length;n--;)i[n].insertRows(t,e)},updateRows:function(t){if(this._tag)this._tag.updateRows(t);else if(this._tags)for(var e=this._tags,i=e.length;i--;)e[i].updateRows(t)},moveRow:function(t,e){if(this._tag)this._tag.moveRow(t,e);else if(this._tags)for(var i=this._tags,n=i.length;n--;)i[n].moveRow(t,e)},moveRows:function(t,e,i){if(this._tag)this._tag.moveRows(t,e,i);else if(this._tags)for(var n=this._tags,s=n.length;s--;)n[s].moveRows(t,e,i)}}),F9=I1("DataField",a2,{init:function(t,e,i){if(this._super(),this._owner=null,this._attrName=null,this._index=-1,this._boolParser=null,this._dateParser=null,this._ownerBoolParser=null,this._ownerDateParser=null,this._updatable=!0,this.setFieldName(t),void 0!==e&&("dummy"==e?this._dataType=value:(this._dataType="numeric"==e?a1.NUMBER:"date"==e?a1.DATETIME:e,n3(a1,this._dataType))),null!=i){var n=parseInt(i);this._length=isNaN(n)?0:Math.max(0,n)}this._sysDate=!1,this._ranged=!1,this._runMax=void 0,this._runMin=void 0,this._typeLock=!1},fieldName:null,dataType:a1.TEXT,length:0,distinctNull:!1,minimum:void 0,maximum:void 0,required:!1,updatable:!0,defaultValue:void 0,nanValue:void 0,emptyValue:void 0,header:null,booleanFormat:null,datetimeFormat:null,objectParser:null,amText:null,pmText:null,baseYear:NaN,zoneDelta:0,loadCallback:null,keyPath:void 0,keyCallback:null,compareCallback:null,displayText:function(){return this._header||this._fieldName},hash:function(){return this._fieldName},index:function(){return this._index},$_setIndex:function(t){this._index=t},fieldName_:function(){return this._fieldName||""},setFieldName:function(t){if(!(t=t&&t.trim()))throw new Error("Field name must be exists.");t!=this._fieldName&&(this._attrName="@"+t,this._fieldName=t,this._changed("fieldName"))},setDataType:function(t){"numeric"==t?t=a1.NUMBER:"date"==t?t=a1.DATETIME:"dummy"==t||n3(a1,t),t!=this._dataType&&(this._dataType=t,this._resetTypes(),this._changed("dataTpe"))},setDistinctNull:function(t){t!=this._distinctNull&&(this._distinctNull=t,this._dataType==a1.TEXT&&this._resetTypes(),this._changed("distinctNull"))},setLength:function(t){(t=K3(t))!=this._length&&(this._length=t,this._dataType==a1.TEXT&&this._resetTypes(),this._changed("length"))},setMinimum:function(t){t!=this._minimum&&(this._minimum=t,this._resetTypes(),this._changed("minimum"))},setMaximum:function(t){t!=this._maximum&&(this._maximum=t,this._resetTypes(),this._changed("maximum"))},setRequired:function(t){t!=this._required&&(this._required=t,this._changed("required"))},setNaNValue:function(t){t=Number(t),t=isNaN(t)?void 0:t},setHeader:function(t){t!=this._header&&(this._header=t,this._changed("header"))},setDefaultValue:function(t){t!=this._defaultValue&&(this._defaultValue=t,this._changed("defaultValue"))},setBooleanFormat:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolParser=t?new l7(t):null,this._changed("booleanFormat"))},setDatetimeFormat:function(t){t!=this._datetimeFormat&&("system"==(this._datetimeFormat=t)?this._sysDate=!0:t?(this._sysDate=!1,this._dateParser=new B7(t),this._dateParser.setAmText(this._amText),this._dateParser.setPmText(this._pmText),this._dateParser.setBaseYear(this._baseYear),this._dateParser.setZoneDelta(this._zoneDelta)):(this._sysDate=!1,this._dateParser=null),this._changed("datetimeFormat"))},setAmText:function(t){t!=this._amText&&(this._amText=t,this._dateParser&&this._dateParser.setAmText(t),this._changed("amText"))},setPmText:function(t){t!=this._pmText&&(this._pmText=t,this._dateParser&&this._dateParser.setPmText(t),this._changed("pmText"))},setBaseYear:function(t){t!=this._baseYear&&(this._baseYear=t,this._dateParser&&this._dateParser.setBaseYear(t),this._changed("baseYear"))},setZoneDelta:function(t){t!=this._zoneDelta&&(this._zoneDelta=t,this._dateParser&&this._dateParser.setZoneDelta(t),this._changed("zoneDelta"))},setLoadCallback:function(t){(t=p4(t))!=this._loadCallback&&(this._loadCallback=t,this._changed("loadCallback"))},setKeyPath:function(t){t!=this._keyPath&&(this._keyPath=t,this._changed("keyPath"))},setKeyCallback:function(t){(t=p4(t))!=this._keyCallback&&(this._keyCallback=t,this._changed("keyCallback"))},setCompareCallback:function(t){(t=p4(t))!=this._compareCallback&&(this._compareCallback=t,this._changed("compareCallback"))},readOnly:function(){return!1},isEmpty:function(t){var e=null==t||""==t;return e||this._dataType!=a1.NUMBER||(e=isNaN(t)),e},getZonedDate:function(t){if(t){var e=(this._dateParser||this._ownerDateParser).zoneDelta();e&&(t=new Date(t.getTime()+6e4*e))}return t},propertyChanged:function(t,e){this._changed(t)},clone:function(t){var e=this._super(t);return e._attrName=this._attrName,e._boolParser=this._boolParser,e._dateParser=this._dateParser,e},_prepare:function(t){this._owner=t},_changed:function(t){this._owner&&this._owner.onFieldChanged(this,t)},_getDate:function(t,e){return null==e||""===e?void 0:this._sysDate?new Date(e):"string"==typeof e?e?this._dateParser?this._dateParser.toDate(e):t.toDate(e):void 0:new Date(e)},_resetTypes:function(t){if(!this._typeLock){t&&(this._ownerBoolParser=t._boolParser,this._ownerDateParser=t._dateParser);var e,i=this._dataType;if(this._ranged=!1,!this._ranged)switch(this._dataType){case a1.NUMBER:this._runMin=Number(this._minimum),this._runMax=Number(this._maximum),isNaN(this._runMin)||isNaN(this._runMax)?this._ranged=!isNaN(this._runMin)||!isNaN(this._runMax):this._ranged=this._runMin<=this._runMax;break;case a1.DATETIME:this._runMin=this._getDate(this._ownerDateParser,this._minimum),this._runMax=this._getDate(this._ownerDateParser,this._maximum),this._runMin&&this._runMax?this._ranged=this._runMin.getTime()<=this._runMax.getTime():this._ranged=this._runMin||this._runMax}switch(i){case a1.NUMBER:this.equalValues=this._equalNumberValues,this.sameValues=this._sameNumberValues,e=this._readNumberValue;break;case a1.DATETIME:this.equalValues=this._equalDateValues,this.sameValues=this._sameDateValues,e=this._readDatetimeValue;break;case a1.BOOLEAN:this.equalValues=this._equalBoolValues,this.sameValues=this._sameBoolValues,e=this._readBooleanValue;break;case a1.OBJECT:this.equalValues=this._equalObjValues,this.sameValues=this._sameObjValues,e=this._readObjectValue;break;case"dummy":this.equalValues=this._equalDummyValues,this.sameValues=this._sameDummyValues,e=this._readDummyValue;break;case a1.TEXT:default:e=this._distinctNull?0<this._length?this._readNullCharValue:this._readNullTextValue:0<this._length?this._readCharValue:this._readTextValue,this.equalValues=this._equalTextValues,this.sameValues=this._sameTextValues}this.readValue=e,this._loadCallback?this.loadValue=(s=(n=this)._loadCallback,r=e,function(t){return r.call(n,s(n,t))}):this.loadValue=e}var n,s,r},_refreshFormats:function(t){this._owner=t,this._dateParser&&(this._dateParser.baseYear||this._dateParser.setBaseYear(t.baseYear()),this._dateParser.amText||this._dateParser.setAmText(t.amText()),this._dateParser.pmText||this._dateParser.setPmText(t.pmText())),this._ownerBoolParser=t._boolParser,this._ownerDateParser=t._dateParser},_equalDummyValues:function(t,e){return void 0===t?void 0===e:void 0!==e&&t==e},_sameDummyValues:function(t,e){return null==t?null==e:null!=e&&t==e},_equalTextValues:function(t,e){return void 0===t?void 0===e:void 0!==e&&t==e},_sameTextValues:function(t,e){return null==t||""==t?null==e||""==e:null!=e&&""!=e&&t==e},_equalNumberValues:function(t,e){return void 0===t?void 0===e:void 0!==e&&(isNaN(t)?isNaN(e):!isNaN(e)&&t==e)},_sameNumberValues:function(t,e){return isNaN(t)?isNaN(e):!isNaN(e)&&t==e},_equalDateValues:function(t,e){return void 0===t?void 0===e:void 0!==e&&(t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date))},_sameDateValues:function(t,e){return t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date)},_equalBoolValues:function(t,e){return void 0===t?void 0===e:void 0!==e&&t==e},_sameBoolValues:function(t,e){return Boolean(t)==Boolean(e)},_equalObjValues:function(t,e){return void 0===t?void 0===e:void 0!==e&&t===e},_sameObjValues:function(t,e){return null==t?null==e:null!=e&&t===e},_readDummyValue:function(t){return t},_readTextValue:function(t){if(null!=t)return String(t)},_readCharValue:function(t){if(null!=t){var e=String(t);return e&&(e=e.substr(0,this._length)),e}},_readNullTextValue:function(t){return null==t?t:String(t)},_readNullCharValue:function(t){if(null==t)return t;var e=String(t);return e&&(e=e.substr(0,this._length)),e},_readNumberValue:function(t){var e;if("number"==typeof t)e=t;else{if(null==t||""===t)return;e=parseFloat(t)}return isNaN(e)&&(void 0!==this._nanValue?e=this._nanValue:this._owner&&void 0!==this._owner._nanValue&&(e=this._owner._nanValue)),isNaN(e)?void 0:(this._ranged&&(isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e))),e)},_readDatetimeValue:function(t){var e=this._getDate(this._ownerDateParser,t);return e&&this._ranged&&(this._runMin&&e.getTime()<this._runMin.getTime()&&(e=new Date(this._runMin)),this._runMax&&e.getTime()>this._runMax.getTime()&&(e=new Date(this._runMax))),e||void 0},_readBooleanValue:function(t){if(null!=t&&""!==t)switch(typeof t){case"boolean":return t;case"string":return t?this._boolParser?this._boolParser.toBool(t):this._ownerBoolParser.toBool(t):void 0;default:return Boolean(t)}},_readObjectValue:function(e){if(this._objectParser)e=this._objectParser(this,e);else if("string"==typeof e)try{e=JSON.parse(e)}catch(t){throw new N8("Invalid object string: "+t+"\r\n"+e)}else if(!I4(e))try{e=JSON.parse(e)}catch(e){}return e},$_compareObjs:function(t,e){var i=this._keyCallback;return(e=i?(t=i(this,t),i(this,e)):(i=this._keyPath,t=l0.extractJson(t,i,!0),l0.extractJson(e,i,!0)))<t?1:t<e?-1:0}}),K8=I1("DerivedField",F9,{init:function(t,e,i,n,s){if(e==a1.OBJECT)throw new Error(E2._default.invalidDerivedFieldType);this._super(t,e||"number",i),n&&this.setExpression(n),s&&this.setCallback(s),this._srcFlds=null,this._updatable=!1},expression:null,callback:null,sourceFields:null,setExpression:function(t){(t=t&&t.trim())!==this._expression&&(this._expression=t,this._exprNode=t?J4.Default.parse(t):null)},setCallback:function(t){(t=b4(t)?t:null)!==this._callback&&(this._callback=t)},setSourceFields:function(t){t!=this._sourceFields&&(this._sourceFields=t,this._srcFlds=null,this._owner&&this.$_resetSourceFields(this._owner))},setDataType:function(t){if(t==a1.OBJECT)throw new Error(E2._default.invalidDerivedFieldType);this._super(t)},_resetTypes:function(t){this._super(t),this.$_resetSourceFields(t)},readOnly:function(){return!0},$_resetSourceFields:function(t){var e,i,n;if(!this._srcFlds&&(e=this._sourceFields))if(V1(e))for(i=e.length;i--;)n=e[i],0<=(n=t.getFieldIndexEx(n))&&(this._srcFlds=this._srcFlds||[],this._srcFlds[n]=!0);else 0<=(n=t.getFieldIndexEx(n))&&(this._srcFlds=[],this._srcFlds[n]=!0)},$_getValue:function(t,e,i,n,s,r,o){return!this._srcFlds||r<0||this._srcFlds[r]?this._callback?this.readValue(this._callback(t,e,n,s,r,o)):this._exprNode?(i.setRow(n,s),this.readValue(this._exprNode.evaluate(i))):void 0:$$$_NOT_CALCED}}),$$$_NOT_CALCED={},f0=I1("DerivedFieldRuntime",e4,{init:function(){this._super()},prepare:function(t){return this._ds=t,this._fieldCount=t?t.baseFieldCount():0,this},setRow:function(t,e){this._row=t,this._values=e},isIdentifier:function(t){var e=this._ds.getFieldIndex(t,!0);return 0<=e?e+f0.ID_FIELD:(t=t.toLowerCase(),f0.IDENTS.hasOwnProperty(t)?f0.IDENTS[t]:this._super(t))},evaluateIdentifier:function(t){if(t>=f0.ID_FIELD)return this._values[t-f0.ID_FIELD];switch(t){case f0.ID_ROW:return this._row;case f0.ID_TAG:return this._ds.getRowTag(this._row)}return this._super(t)},evaluateIndexerI:function(t,e){switch((e<0||e>=this._fieldCount)&&B2(e),t){case f0.ID_VALUES:return this._values[e]}return this._super(t,e)},evaluateIndexerS:function(t,e){switch(t){case f0.ID_VALUES:var i=this.$_getField(e);return this._values[i]}return this._super(t,e)},$_getField:function(t){var e=this._ds.getFieldIndex(t);if(e<0||e>=this._fieldCount)throw new o4("Data field is not exits:"+t);return e}},{ID_ROW:0,ID_TAG:1,ID_VALUES:2,ID_FIELD:10},function(t){t.IDENTS={row:t.ID_ROW,tag:t.ID_TAG,values:t.ID_VALUES}}),N8=h6("DataLudi.DataSetError"),u0=I1("DataOutputOptions",null,{init:function(t){this._super(),t&&this.assign(t)},visibleFields:null,hiddenFields:null,valueCallback:null,valueCallbacks:null,datetimeFormat:void 0,booleanFormat:void 0,nullDateText:"",separator:",",lfText:void 0,crText:void 0,quoted:!1,setDatetimeFormat:function(t){return t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?new M7(t):null),this},setBooleanFormat:function(t){return t!=this._booleanFormat&&(this._booleanFormat=t,this._booleanFormatter=t?new v3(t):null),this},$_prepareFields:function(t){var e,i,n,s,r,o;if(s=this._visibleFields,V1(s)&&0<(i=s.length))for(r=this._visFlds=[],e=0;e<i;e++)0<=(n=t.getFieldIndex(s[e]))&&r.push(t.getField(n));else r=this._visFlds=null;if(s=this._hiddenFields,V1(s)&&0<(i=s.length))for(o=this._hidFlds=[],e=0;e<i;e++)0<=(n=t.getFieldIndex(s[e]))&&o.push(t.getField(n));else o=null;if(!r&&!o)return null;for(i=t.fieldCount(),s=[],e=0;e<i;e++)n=t.getField(e),o&&0<=o.indexOf(n)&&(n=null),n&&(!r||0<=r.indexOf(n))&&s.push(n);return s}});A5.prototype=new Error,A5.prototype.constructor=A5,A5.message="DataSet is pending",P3.prototype=new Error,P3.prototype.constructor=P3,P3.message="Client is editing (call grid.commit() or grid.cancel() first)",b0.prototype.clear=function(){this.count=0,this.sum=this.max=this.min=this.avg=this.vars=NaN};var i2=I1("DataSet",a2,{init:function(t,e){W77(Z07,o8)&&(this._super(),this._fieldMap={},this._fieldMapI={},this._boolParser=l7.Default,this._dateParser=B7.Default,this._eventLock=0,this._countLock=0,this._resetLock=0,this._clients=[],this._derivedRuntime=new f0,this._eventable=!1,this._fields=[],this._baseFieldCount=0,this._derivedFieldCount=0,this._fieldNames=[],t&&this.setFields(t,e),this._dataCommands=new j28(this),this._onStack=0)},onEditCommandStackChanged:function(t,e,i){this._fireCommandStackChanged(e,i)},onDisposed:E1,onReset:E1,onRefresh:E1,onRowCountChanged:E1,onDataChanged:E1,onStatesCleared:E1,onTagsCleared:E1,onCommandStackChanged:E1,dataInited:!1,undoable:!1,eventsOnStack:!1,softDelete:!1,deleteCreated:!1,checkStates:!0,checkClients:!0,restoreMode:u1(f3,f3.NONE),strictRestore:!1,booleanFormat:null,datetimeFormat:null,baseYear:2e3,amText:null,pmText:null,zoneDelta:0,nanValue:void 0,throwPendingError:!0,alertClientError:!0,throwClientError:!1,resetIdWhenClear:!0,userData:null,isOnStack:function(){return this._onStack},isInsertable:function(){return!0},isAppendable:function(){return!0},isUpdatable:function(){return!0},isDeletable:function(){return!0},isMovable:function(){return!0},fields:function(){return this._fields.slice()},setFields:function(t,e){function i(t,e){t.hasOwnProperty("distinctNull")&&e.setDistinctNull(t.distinctNull),t.hasOwnProperty("minimum")&&e.setMinimum(t.minimum),t.hasOwnProperty("maximum")&&e.setMaximum(t.maximum),t.hasOwnProperty("required")&&(e._required=t.required),t.hasOwnProperty("updatable")&&(e._updatable=t.updatable),t.hasOwnProperty("defaultValue")&&(e._defaultValue=t.defaultValue),t.hasOwnProperty("nanValue")&&e.setNanValue(t.nanValue),t.hasOwnProperty("emptyValue")&&(e._emptyValue=t.emptyValue),t.hasOwnProperty("header")&&(e._header=t.header),t.hasOwnProperty("booleanFormat")&&e.setBooleanFormat(t.booleanFormat),t.hasOwnProperty("datetimeFormat")&&e.setDatetimeFormat(t.datetimeFormat),t.hasOwnProperty("amText")&&e.setAmText(t.amText),t.hasOwnProperty("pmText")&&e.setPmText(t.pmText),t.hasOwnProperty("baseYear")&&e.setBaseYear(t.baseYear),t.hasOwnProperty("zoneDelta")&&e.setZoneDelta(t.zoneDelta),t.hasOwnProperty("keyPath")&&(e._keyPath=t.keyPath),t.hasOwnProperty("keyCallback")&&e.setKeyCallback(t.keyCallback),t.hasOwnProperty("compareCallback")&&(e._compareCallback=t.compareCallback),e instanceof K8&&"sourceFields"in t&&e.setSourceFields(t.sourceFields)}if(this._checkClientState()){this.beginUpdate();try{var n,s,r,o,a,h;if(this.$_internalClearFields(),V1(t))for(n=0,s=t.length;n<s;n++)r=null,"string"==typeof(o=t[n])?r=this.$_addField(o,a1.TEXT,0):o instanceof F9?(r=o.clone(o._fieldName),this.$_internalInsertField(this._fields.length,r)):(r=this.$_addField(o.fieldName,o.dataType,o.length))&&i(o,r),r&&r._resetTypes(this);if(V1(e))for(n=0,s=e.length;n<s;n++)r=null,(o=e[n])instanceof K8?(r=o.clone(),this.$_internalInsertField(this._fields.length,r)):(a=o.expression,h=o.callback,(a||h)&&(r=this.$_addDerivedField(o.fieldName,o.dataType,o.length,a,h))&&i(o,r)),r&&r._resetTypes(this)}finally{this.endUpdate(),this._doFieldsReset()}return this}},setUndoable:function(t){t!=this._undoable&&(this._undoable=t,this._eventable=!t||this._eventsOnStack,this._dataCommands.flush())},setEventsOnStack:function(t){t!=this._eventsOnStack&&(this._eventsOnStack=t,this._eventable=t||!this._undoable)},setCheckStates:function(t){return t!=this._checkStates&&(this._checkStates=t,this._doCheckStatesChanged()),this},setRestoreMode:function(t){if(t!=this._restoreMode){var e=this._restoreMode;this._restoreMode=t,this._doRestoreModeChanged(e,t)}return this},fieldCount:function(){return this._fields.length},baseFieldCount:function(){return this._baseFieldCount},derivedFieldCount:function(){return this._derivedFieldCount},rowCount:function(){y4()},setBooleanFormat:function(t){if(t!=this._booleanFormat){this._booleanFormat=t,this._boolParser=t?new l7(t):l7.Default;for(var e=this._fields.length;e--;)this._fields[e]._ownerBoolParser=this._boolParser}return this},$_createDateReader:function(){this._datetimeFormat?(this._dateParser=new B7(this._datetimeFormat),this._dateParser.setAmText(this._amText),this._dateParser.setPmText(this._pmText),this._dateParser.setBaseYear(this._baseYear),this._dateParser.setZoneDelta(this._zoneDelta)):this._dateParser=B7.Default;for(var t=this._fields.length;t--;)this._fields[t]._ownerDateParser=this._dateParser},setBaseYear:function(t){return t!=this._baseYear&&(this._baseYear=t,this.$_createDateReader()),this},setAmText:function(t){return t!=this._amText&&(this._amText=t,this.$_createDateReader()),this},setPmText:function(t){return t!=this._pmText&&(this._pmText=t,this.$_createDateReader()),this},setDatetimeFormat:function(t){return t!=this._datetimeFormat&&(this._datetimeFormat=t,this.$_createDateReader()),this},setZoneDelta:function(t){t!=this._zoneDelta&&(this._zoneDelta=t,this.$_createDateReader())},setNanValue:function(t){var e=Number(t);this._nanValue=isNaN(e)?void 0:e},deletedCount:function(){return 0},undoing:function(){return this._dataCommands.undoing()},redoing:function(){return this._dataCommands.redoing()},dispose:function(){},getField:function(t){return 0<=t&&t<this._fields.length?this._fields[t]:null},getFieldHeader:function(t){return 0<=t&&t<this._fields.length?this._fields[t].header():null},getFieldLabel:function(t){if(0<=t&&t<this._fields.length){var e=this._fields[t];return e.header()||e.fieldName()}return null},isLocal:function(){return!0},isImmediateUpdate:function(){return!1},getEmptyObject:function(){var t,e,i={},n=this._fields;for(t=0,e=n.length;t<e;t++)i[n[t]._fieldName]=void 0;return i},$_checkFieldName:function(t){if(!t)throw new Error("fieldName must be exists.");if(0<=this.getFieldIndex(t))throw new Error("fieldName is already exists: "+t)},$_addField:function(t,e,i){this.$_checkFieldName(t=t&&t.trim());var n=new F9(t,e,i);return this.$_internalInsertField(this._fields.length,n),n},$_addDerivedField:function(t,e,i,n,s){this.$_checkFieldName(t=t&&t.trim());var r=new K8(t,e,i,n,s);return this.$_internalInsertField(this._fields.length,r),r},clearFields:function(){this._checkClientState()&&0<this._fields.length&&(this.$_internalClearFields(),this._doFieldsReset())},getFieldNames:function(){var t,e,i=[];for(t=0,e=this._fields.length;t<e;t++)i.push(this._fields[t]._fieldName);return i},getFieldHeaders:function(){var t,e,i,n=[];for(t=0,e=this._fields.length;t<e;t++)i=this._fields[t],n.push(i._header||i._fieldName);return n},getFieldName:function(t){return this._checkFieldIndex(t),this._fields[t]._fieldName},getFieldIndex:function(t,e){var i;if(t&&(i=e?(t=t.toUpperCase(),this._fieldMapI):this._fieldMap).hasOwnProperty(t))return i[t];return-1},getFieldIndexEx:function(t,e){var i;return"string"==typeof t?(i=this.getFieldIndex(t,e))<0&&(i=parseInt(t)):i=parseInt(t),isNaN(i)?-1:i},getFieldByName:function(t,e){var i;if(t&&(i=e?(t=t.toUpperCase(),this._fieldMapI):this._fieldMap).hasOwnProperty(t))return this._fields[i[t]];return null},fieldByName:function(t,e){var i=this.getFieldIndex(t,e);return 0<=i?this._fields[i]:null},getValidFields:function(t,e){if(!t)return null;var i,n,s=e?this._fieldMapI:this._fieldMap,r=[],o=t.length;for(i=0;i<o;i++)(n=t[i])&&(e&&(n=n.toUpperCase()),n in s&&r.push(this._fields[s[n]]));return r},getValueType:function(t){return this._fields[t]._dataType},getDefaultValue:function(t){return this._fields[t]._defaultValue},getDefaultValues:function(){var t,e=this._fields,i=new Array(e.length);for(t=e.length;t--;)i[t]=e[t]._defaultValue;return i},isUpdated:function(t,e){return!1},getValue:function(t,e){},getRowTag:function(t){},getRowsByTag:function(t){},getRowsByTags:function(t){},setRowTag:function(t,e){},setRowTags:function(t,e){},unsetRowTags:function(t,e){},clearRowTags:function(){},getRowState:function(t){},setRowState:function(t,e,i){},clearRowStates:function(t,e,i){},getStateRows:function(t){},getAllStateRows:function(){},setRowStates:function(t,e,i,n){},getRowStateCount:function(t){},restoreUpdatedStates:function(t){},restoreUpdatedRows:function(t){},beginUpdate:function(){return!!this._checkClientState()&&(this._eventLock++,!0)},endUpdate:function(t){this._checkClientState()&&0<this._eventLock&&(this._eventLock--,t=!(0<arguments.length)||t,0==this._eventLock&&t&&this._doEndUpdate(t))},_doEndUpdate:function(t){t?(0<this._resetLock?(this._fireReset(),this._resetLock=0):this._fireRefresh(),0<this._countLock&&(this._fireRowCountChanged(),this._countLock=0)):this._resetLock=this._countLock=0},hasData:function(t){return!1},canUpdateRow:function(t){return!0},canAppendRow:function(){return!0},canInsertRow:function(t){return!0},canDeleteRow:function(t){return!0},canUpdateValue:function(t,e){var i;if(0<=e&&e<this._baseFieldCount){if(!this._fields[e]._updatable&&0<=t)try{return!(i=this.getRowState(t))||i==j1.CREATED||i==j1.CREATE_AND_DELETED}catch(t){return!1}return!0}return!1},canSummarize:function(t){if(0<=t&&t<this.fieldCount()){var e=this.getValueType(t);if(e===a1.BOOLEAN||e===a1.NUMBER||e===a1.DATETIME)return!0}return!1},getDistinctValues:function(t,e){return e=1<arguments.length?e:-1,t=this.getFieldIndexEx(t),this._checkFieldIndex(t),this._doGetDistinctValues(t,e)},_doGetDistinctValues:function(t,e){return null},registerClient:function(t){t&&this._clients.indexOf(t)<0&&this._clients.push(t)},unregisterClient:function(t){if(t){var e=this._clients.indexOf(t);0<=e&&this._clients.splice(e,1)}},cancelClients:function(){for(var t=this._clients.length;t--;)this._clients[t].cancelDataEditing(this)},commitClients:function(){for(var t=this._clients.length;t--;)this._clients[t].commitDataEditing(this)},refreshClients:function(){for(var t=this._clients.length;t--;)this._clients[t].dataRefreshRequested(this)},updateDerivedValues:function(t,e,i){return this.$_deriveValues(t,e,i,!0)},addFieldTrigger:function(t,e){this._triggers.addField(t,e)},execute:function(t){return this._lockedAction?this._lockedAction.add(t):this._dataCommands.execute(t)},canUndo:function(){return this._dataCommands.canUndo()},canRedo:function(){return this._dataCommands.canRedo()},undo:function(){return this._dataCommands.undo(),this},redo:function(){return this._dataCommands.redo(),this},canUndoAll:function(t){return this._dataCommands.canUndoAll(t)},canRedoAll:function(t){return this._dataCommands.canRedoAll(t)},undoAll:function(t,e){return this._dataCommands.undoAll(t,e),this},redoAll:function(t,e){return this._dataCommands.redoAll(t,e),this},clearUndo:function(){return this._dataCommands.flush(),this},setBookmark:function(t){this._dataCommands.setBookmark(t)},unsetBookmark:function(t){this._dataCommands.unsetBookmark(t)},clearBookmarks:function(){this._dataCommands.clearBookmarks()},beginActions:function(){if(this._lockedAction)throw new Error("A locked action already exists");return this._lockedAction=this.createActionGroup()},endActions:function(t){var e=this._lockedAction;e&&(this._lockedAction=null,t||this.execute(e))},requestPending:function(){return this._pending=this._createPending()},createActionGroup:function(){},equalRowValues:function(t,e,i){var n,s=this._fields;for(n=s.length;n--;){if(i&&!s[n].equalValues(t[n],e[n]))return!1;if(!i&&!s[n].sameValues(t[n],e[n]))return!1}return!0},equalRowObjects:function(t,e,i){var n,s,r=this._fields;for(n=r.length;n--;){if(s=r[n]._fieldName,i&&!r[n].equalValues(t[s],e[s]))return!1;if(!i&&!r[n].sameValues(t[s],e[s]))return!1}return!0},recalcRows:function(t){this._derivedFieldCount&&(null==t||void 0===t?this._doRecalcAll():V1(t)?this._doRecalcRows(t):this._doRecalcRow(t))&&this._fireCalculated(t)},getComparer:function(t){switch(this.getField(t).dataType()){case a1.NUMBER:return this.compareNumbers;case a1.DATETIME:return this.compareDates;case a1.BOOLEAN:return this.compareBools;case a1.OBJECT:return this.compareObjs;default:return this.compareValues}},_doFieldsReset:function(){var t,e=this._fields.length;for(this._fieldNames=new Array(e),t=0;t<e;t++)this._fieldNames[t]=this._fields[t]._fieldName;this._fireReset()},_checkClientState:function(){if(this._pending){if(this._throwPendingError)throw new A5;return!1}if(this._checkClients&&this.$_isClientsBusy()){if(this._throwClientError)throw new P3;return this._alertClientError&&(O0(P3.message),I7(P3.message)),!1}return!0},_createPending:function(){},_doCheckStatesChanged:function(){},_doRestoreModeChanged:function(t,e){},$_isClientsBusy:function(){for(var t=this._clients.length;t--;)if(this._clients[t].isDataEditing())return!0;return!1},_checkFieldIndex:function(t,e){if(isNaN(t)||t!=parseInt(t)||t<0||t>=this._fields.length){if(e)throw new N8("Invalid field name: "+e);throw new N8("Invalid field index: "+t)}},$_internalClearFields:function(){if(this._fields){for(var t=this._fields.length;t--;)this._fields[t].$_setIndex(-1);this._fields.splice(0,this._fields.length)}else this._fields=[];this._derivedFieldCount=this._baseFieldCount=0,this._derivedRuntime.prepare(this),this._fieldMap={},this._fieldMapI={}},$_internalInsertField:function(t,e){if(!(e instanceof F9))return-1;var i,n=this._fields.length;if(t<0||n<t)throw new N8("index is out of bounds:"+t);e._prepare(this),this._fields.splice(t,0,e),e.$_setIndex(t);var s=e.fieldName();for(this._fieldMap[s]=t,i=(this._fieldMapI[s.toUpperCase()]=t)+1;i<=n;i++)(e=this._fields[i]).$_setIndex(i),s=e.fieldName(),this._fieldMap[s]=i,this._fieldMapI[s.toUpperCase()]=i;return this._derivedRuntime.prepare(this),e instanceof K8?this._derivedFieldCount++:this._baseFieldCount++,t},refreshFieldFormats:function(){for(var t=this._fields.length;t--;)this._fields[t]._refreshFormats(this)},refreshFieldFormat:function(t){t&&t._refreshFormats(this)},$_deriveValues:function(t,e,i,n){var s,r,o,a,h=this._derivedRuntime;for(s=0,r=this._derivedFieldCount;s<r;s++)o=this._baseFieldCount+s,(a=this._fields[o].$_getValue(this,o,h,t,e,i,n))!==$$$_NOT_CALCED&&(e[o]=a)},$_createOutputRows:function(t,e,i){var n,s,r,o,a,h,l,u,d,c,_,f,g=j0(i=2<arguments.length?i:0),m=t.length;for(e instanceof u0||(e=new u0(e)),n=e.$_prepareFields(this),fldCount=this.fieldCount(),o=e.valueCallback(),a=e.valueCallbacks(),h=e.nullDateText(),l=0;l<fldCount;l++)if(d=(u=this.getField(l)).fieldName(),!n||0<=n.indexOf(u)){if(c=a&&a[d]||o)for(s=0;s<m;s++)(r=t[s])[d]=c(g?g[s]:s+i,d,r[d]);else if(u._dataType==a1.DATETIME)if(_=e._datetimeWriter)for(s=0;s<m;s++)f=(r=t[s])[d],r[d]=f?_.getText(r[d]):h;else for(s=0;s<m;s++)!(r=t[s])[d]&&h&&(r[d]=h);else if(u._dataType==a1.BOOLEAN&&(_=e._booleanFormatter))for(s=0;s<m;s++)(r=t[s])[d]=_.formatValue(r[d])}else for(s=0;s<m;s++)delete t[s][d]},$_createOutputLines:function(t,e,i,n){e instanceof u0||(e=new u0(e));var s,r,o,a,h,l,u,d,c,_=e.$_prepareFields(this),f=_?_.length:this.fieldCount(),g=e.valueCallback(),m=e.valueCallbacks(),p=e.separator()||",",w=e.quoted(),v=e.nullDateText(),C=e.lfText(),I=e.crText(),R="";for(s=i;s<n;s++){if(o="",r=t[s])for(a=0;a<f;a++)h=r[a],c=(l=this._fields[a]).fieldName(),(!_||0<=_.indexOf(l))&&((d=m&&m[c]||g)?h=d(s,c,h):l._dataType==a1.DATETIME?(u=e._datetimeWriter)?h=h?u.getText(h):v:!h&&v&&(h=v):l._dataType==a1.BOOLEAN&&(u=e._booleanFormatter)?h=u.formatValue(h):l._dataType==a1.TEXT&&h&&(I&&(h=h.replace(/\r/g,I)),C&&(h=h.replace(/\n/g,C))),null!=h||(h=""),o+=w?'"'+h+'"':h,a<f-1&&(o+=p));R+=o,s<n-1&&(R+="\r\n")}return R},$_sortRows:function(t,e,i,n,s){var r,o,a,h;do{a=t[Y1(((r=n)+(o=s))/2)];do{for(;r<=o&&!(i(e,a,t[r])<=0);)r++;for(;r<=o&&!(0<=i(e,a,t[o]));)o--;r<=o&&(r!=o&&(h=t[r],t[r]=t[o],t[o]=h),r++,o--)}while(r<=o);n<o&&this.$_sortRows(t,e,i,n,o),n=r}while(n<s)},$_getComparer:function(t,e){switch(t){case a1.DATETIME:case a1.NUMBER:return this.$_cmpNum||(this.$_cmpNum=this.compareNumbers.bind(this));case a1.BOOLEAN:return this.$_cmpBool||(this.$_cmpBool=this.compareBools.bind(this));case a1.OBJECT:return this.$_cmpObj||(this.$_cmpObj=this.compareObjs.bind(this));default:return e?this.$_cmpText||(this.$_cmpText=this.compareTexts.bind(this)):this.$_cmpVal||(this.$_cmpVal=this.compareValues.bind(this))}},$_getEmptyValue:function(t){if(I4(t)){var e,i,n={};for(e=this._fields.length;e--;)n[(i=this._fields[e])._fieldName]=t[i._fieldName];return n}return null===t?void 0:t},onFieldChanged:function(t,e){},$_cmd:function(t){return this._undoable&&t},_fireDisposed:function(t){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(i2.DISPOSED),this.onDisposed&&(!this._onStack||this._eventable)&&this.onDisposed(this))},_fireReset:function(t){this._eventLock<=0?(this.$$_cmd=t,this.fireEvent(i2.RESET),this.onReset&&(!this._onStack||this._eventable)&&this.onReset(this)):this._resetLock++},_fireRefresh:function(t){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(i2.REFRESH),this.onRefresh&&(!this._onStack||this._eventable)&&this.onRefresh(this))},_fireRowCountChanged:function(t){if(this._eventLock<=0){var e=this.rowCount();this.$$_cmd=t,this.fireEvent(x4.ROW_COUNT_CHANGED,e),this.onRowCountChanged&&this.onRowCountChanged(this,e)}else this._countLock++},_fireStatesCleared:function(t){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(i2.STATES_CLEARED),this.onStatesCleared&&(!this._onStack||this._eventable)&&this.onStatesCleared(this))},_fireTagsCleared:function(t){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(i2.TAGS_CLEARED),this.onTagsCleared&&(!this._onStack||this._eventable)&&this.onTagsCleared(this))},_fireCalculated:function(t,e){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(i2.CALCULATED,e))},_fireCommandStackChanged:function(t,e){this._eventLock<=0&&(this.fireEvent(i2.COMMAND_STACK_CHANGED,t,e),this.onCommandStackChanged&&this.onCommandStackChanged(this,t,e))}},{DISPOSED:"onDataSetDisposed",RESET:"onDataSetReset",REFRESH:"onDataSetRefresh",DATA_CHANGED:"onDataSetDataChanged",STATES_CLEARED:"onDataSetStatesCleared",TAGS_CLEARED:"onDataSetTagsCleared",CALCULATED:"onDataSetCalculated",COMMAND_STACK_CHANGED:"onDataSetCommandStackChanged",ALL_ROWS:{all:"rows"}}),R27=I1("DataFilterRuntime",e4,{init:function(){this._super()},prepare:function(t){return this._provider=t,this._fieldCount=t?t.fieldCount():0,this},setRow:function(t,e,i){this._no=t,this._row=e,this._values=i},isIdentifier:function(t){return t=t.toLowerCase(),R27.IDENTS.hasOwnProperty(t)?u4.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case u4.ID_NO:return this._no;case u4.ID_ROW:return this._row}throw new o4("Invalid identifier key: "+t)},evaluateIndexerI:function(t,e){if(e<0||e>=this._fieldCount)throw new o4("Data field index out of bounds:"+e);switch(t){case u4.ID_VALUES:return this._values[e]}throw new o4("Invalid identifier indexer: "+t)},evaluateIndexerS:function(t,e){switch(t){case u4.ID_VALUES:var i=this.$_getField(e);return this._values[i]}throw new o4("Invalid identifier indexer: "+t)},$_getField:function(t){var e=this._provider.getFieldIndex(t,!0);if(e<0||e>=this._fieldCount)throw new o4("Data field is not exits:"+t);return e}},{ID_NO:0,ID_ROW:1,ID_VALUES:2},function(t){t.IDENTS={no:t.ID_NO,row:t.ID_ROW,values:t.ID_VALUES}}),P8=I1("DataFilter",null,{init:function(t){this._super(),this._runtime=null,this._exprNode=null,this.setCriteria(t)},criteria:null,setCriteria:function(t){(t=t&&t.trim())!=this._criteria&&(this._criteria=t,this._exprNode=t?J4.Default.parse(t):null)},prepare:function(t){this._runtime=t},select:function(t,e,i){return!this._exprNode||(this._runtime.setRow(t,e,i),this._exprNode.evaluate(this._runtime))}}),j28=I1("DataCommandStack",s77,{init:function(t){this._super(t)},undoAll:function(t,e){var i=this._owner,n=i._eventable;i._eventable=n&&!slient;try{for(;this.canUndo()&&(!t||this._currCmd().$$_mark!==t);)this.undo()}finally{i._eventable=n}},redoAll:function(t,e){var i=this._owner,n=i._eventable;i._eventable=n&&!slient;try{for(;this.canRedo()&&(this.redo(),!t||this._currCmd().$$_mark!==t););}finally{i._eventable=n}},canUndoAll:function(t){if(t){if(t===this.$$_mark)return this.canUndo();if(0<this._current){var e,i=this._commands;for(e=this._current;0<e;e--)if(i[e].$$_mark===t)return!0}return!1}return this.canUndo()},canRedoAll:function(t){if(t){var e,i=this._commands,n=i.length;if(this._current<n-1)for(e=this._current+1;e<n;e++)if(i[e].$$_mark===t)return!0;return!1}return this.canRedo()},setBookmark:function(t){if(t)return 0<=this._current?this._commands[this._current].$$_mark=t:this.$$_mark=t,!0},unsetBookmark:function(t){if(t)if(t===this.$$_mark)delete this.$$_mark;else{var e,i=this._commands;for(e=i.length;e--;)if(i[e].$$_mark===t)return delete i[e].$$_mark,!0}},clearBookmarks:function(){var t,e=this._commands;for(delete this.$$_mark,t=e.length;t--;)delete e[t].$$_mark}}),K2=I1("DataSetEditCommand",g5,{init:function(t){this._super(),this.ds=t,this.undoable=t.undoable()},undo:function(t){var e=this.ds;if(!e._checkClientState())return this.throwEmpty();this.saveCheckStates=e._checkStates,this.saveSoftDelete=e._softDelete,this.saveOrgValues=e._orgValues,e._checkStates=this.checkStates,e._softDelete=this.softDelete,e._orgValues=this.orgValues;try{return this.keep=this._doKeep(e,this.save),this._doUndo(e,this.save,t)}finally{e._checkStates=this.saveCheckStates,e._softDelete=this.saveSoftDelete,e._orgValues=this.saveOrgValues}},redo:function(t,e){var i=this.ds;this.undoable&&(t||(this.checkStates=i._checkStates,this.softDelete=i._softDelete,this.orgValues=i._orgValues),this.saveCheckStates=i._checkStates,this.saveSoftDelete=i._softDelete,this.saveOrgValues=i._orgValues,i._checkStates=this.checkStates,i._softDelete=this.softDelete,i._orgValues=this.orgValues);try{return i._checkClientState()?t?this._doRedo(i,this.keep,e):this.undoable?this._doRun(i,this.save={},e):this._doRun(i,null,e):this.throwEmpty()}finally{this.undoable&&(i._checkStates=this.saveCheckStates,i._softDelete=this.saveSoftDelete,i._orgValues=this.saveOrgValues)}},postUndo:function(t){this._doPostUndo(this.ds,t)},postRedo:function(t){this._doPostRedo(this.ds,t)},postRun:function(t){this._doPostRun(this.ds,t)},rollback:function(){this._doRollback(this.ds)},Empty:function(){return K2.Empty},_doUndo:function(t,e,i){},_doKeep:function(t,e){},_doRun:function(t,e,i){},_doRedo:function(t,e,i){},_doPostUndo:function(t,e){},_doPostRedo:function(t,e){},_doPostRun:function(t,e){},_doRollback:function(t){},$_updating:function(){return!1}},{Empty:{}}),S07=I1("DataActionGroup",Q5,{init:function(t,e){this._super(e),this.ds=t,this.undoable=t.undoable()}}),a07=I1("DataSetPending",null,{init:function(t){this._super(),this._action=t},action:function(){return this._action},close:function(){},cancel:function(){}}),R0={csvToArray:function(t,e,i,n,s,r,o,a,h){i=2<arguments.length?i:0,n=3<arguments.length?n:-1,o=5<arguments.length?o:",";var l,u,d,c,_,f,g,m,p,w,v,C=null;if(e){for(1==(c=e.split("\r\n")).length&&(c=e.split("\n")),1==c.length&&(c=e.split("\r")),l=c.length-1;0<=l&&!((u=(u=c[l])?u.trim():null)&&0<u.length);l--)c.pop();if(0<(d=c.length)&&(i=Math.max(0,i),n<0&&(n=d),0<(n=Math.min(d-i,n)))){if(w=(p=t.fields()).length,nflds=new Array(w),v=0<w,a)for(l=0;l<w;l++)nflds[l]=p[l].dataType()==a1.NUMBER;if(C=new Array(n),s)for(_=0;_<n;_++){if(f=c[_+i],g=$_parseCSV(f,o),v&&g.length>w&&g.splice(g.length,w-g.length),0<=h){for(l=0;l<h;l++)(m=g[l])&&(nflds[l]?m=m.replace($_currencyreg,""):r&&(m=m.trim())),g[l]=p[l].readValue(m);for(l=h;l<w;l++)(m=g[l+1])&&(nflds[l]?m=m.replace($_currencyreg,""):r&&(m=m.trim()),g[l+1]=p[l].readValue(m))}else for(l=0;l<w;l++)(m=g[l])&&(nflds[l]?m=m.replace($_currencyreg,""):r&&m&&(m=m.trim()),g[l]=p[l].readValue(m));C[_]=g}else for(_=0;_<n;_++){if(g=(f=c[_+i]).split(o),v&&g.length>w&&g.splice(g.length,w-g.length),0<=h){for(l=0;l<h;l++)(m=g[l])&&(nflds[l]?m=m.replace($_currencyreg,""):r&&m&&(m=m.trim()),g[l]=p[l].readValue(m));for(l=h;l<w;l++)(m=g[l+1])&&(nflds[l]?m=m.replace($_currencyreg,""):r&&m&&(m=m.trim()),g[l+1]=p[l].readValue(m))}else for(l=0;l<w;l++)(m=g[l])&&(nflds[l]?m=m.replace($_currencyreg,""):r&&m&&(m=m.trim()),g[l]=p[l].readValue(m));C[_]=g}}}return C},xmlToRow:function(t,e,i){var n,s,r,o,a=t.childNodes,h=e.length,l=new Array(h);for(n=0,s=a.length;n<s;n++)if(o=a[n],0<=(r=i.indexOf(o.tagName))){var u=C87(o);l[r]=u}for(n=0;n<h;n++)void 0===l[n]&&(u=c97(t,i[n]),l[n]=u);return l},xmlToArray:function(t,e,i,n,s){i=2<arguments.length?i:0,n=3<arguments.length?n:-1;var r,o,a,h,l=null,u=R0.xmlToRow,d=e?e.length:0;if(d&&(i=Math.max(0,i),n<0&&(n=d),n=Math.min(d-i,n)))for(r=t.fields(),o=t.getFieldNames(),l=new Array(n),a=0;a<n;a++)h=u(e[a+i],r,o,s),l[a]=h;return l}},k28=I1("GridDataActionGroup",S07,{init:function(t,e){this._super(t,e)},clearRows:function(){return this.add(new q07(this.ds))},setRows:function(t,e,i,n,s){return this.add(new w27(this.ds,t,e,i,n,s))},setXmlRows:function(t,e,i,n,s){t=R0.xmlToArray(this,t,e,i);return this.add(new w27(this.ds,t,e,i,rowState,s))},setRowCount:function(t,e,i,n){return this.add(new v07(this.ds,t,e,i,n))},setValue:function(t,e,i){return this.add(new p9(this.ds,t,e,i,!0,!0,!1))},setValueEx:function(t,e,i,n,s,r){return this.add(new p9(this.ds,t,e,i,n,r))},updateRow:function(t,e,i,n,s){return this.add(new B07(this.ds,t,e,i,n,s))},updateRows:function(t,e,i,n,s,r,o,a,h){return this.add(new E27(this.ds,t,e,i,n,s,r,o,a,h))},updateXmlRows:function(t,e,i,n,s,r,o,a,h){e=R0.xmlToArray(this,e,i,n);return this.add(new E27(this.ds,t,e,i,n,s,r,o,a,h))},updateValues:function(t,e,i,n,s){return this.add(new T07(this.ds,t,e,i,n,s))},deleteRow:function(t){return this.add(new s07(this.ds,t))},deleteRows:function(t,e){return this.add(new f07(this.ds,t,e))},insertRow:function(t,e,i){return this.add(new Z8(this.ds,t,e,i))},appendRow:function(t,e){return this.add(new Z8(this.ds,this.ds.rowCount(),t,e))},insertRows:function(t,e,i,n,s,r){return this.add(new z9(this.ds,t,e,i,n,s,r))},insertXmlRows:function(t,e,i,n,s,r){e=R0.xmlToArray(this,e,i,n);return this.add(new z9(this.ds,t,e,i,n,s,r))},appendRows:function(t,e,i,n,s){return this.add(new z9(this.ds,this.ds.rowCount(),t,e,i,n,s))},appendXmlRows:function(t,e,i,n,s){t=R0.xmlToArray(this,t,e,i);return this.add(new z9(this.ds,this.ds.rowCount(),t,e,i,n,s))},moveRow:function(t,e){return this.add(new u07(this.ds,t,e))},moveRows:function(t,e,i){return this.add(new g07(this.ds,t,e,i))},setRowState:function(t,e,i){return this.add(new r07(this.ds,t,e,i))},setRowStates:function(t,e,i,n){return this.add(new h07(this.ds,t,e,i,n))},clearRowStates:function(t,e,i){return this.add(new X07(this.ds,t,e,i))},restoreUpdatedStates:function(t){return this.add(new A37(this.ds,t))},restoreUpdatedRows:function(t){return this.add(new b37(this.ds,t))},setRowTag:function(t,e){return this.add(new m37(this.ds,t,e))},setRowTags:function(t,e){return this.add(new D37(this.ds,t,e))},unsetRowTags:function(t,e){return t=t&&0<t.length?t:null,e=e&&0<e.length?e:null,t||e?this.add(new Q37(this.ds,t,e)):this.add(new i8(this.ds))},clearRowTags:function(){return this.add(new i8(this.ds))}}),q07=I1("DataClearRowsCommand",K2,{init:function(t){this._super(t)},_doUndo:function(t,e){t.$_restoreAll(this,e,!0)},_doPostUndo:function(t){t._fireRefresh(this),t._fireRowCountChanged(this)},_doKeep:function(t,e){return t.$_saveAll(this,{},!1)},_doRun:function(t,e){if(0<t.rowCount()&&t.isDeletable())return e&&(t.$_saveAll(this,e,!0),this._setReady()),t.$_clearRows(),!e&&this._doPostRun(t),!0;this.throwEmpty()},_doPostRun:function(t){var e=t.$_cmd(this);t._fireRefresh(e),t._fireRowCountChanged(e)},_doRedo:function(t,e){t.$_restoreAll(this,e,!1)},_doPostRedo:function(t){t._fireRefresh(this),t._fireRowCountChanged(this)}}),w27=I1("DataSetRowsCommand",K2,{init:function(t,e,i,n,s,r){this._super(t),this.rows=e,this.start=i,this.count=n,this.rowState=s,this.filter=r},_doUndo:function(t,e,i){var n=t.rowCount();t.$_clearRows(),t.$_restoreAll(this,e,!0),i.cnt=n},_doPostUndo:function(t,e){t._fireRefresh(this),0<e.cnt&&t._fireRowCountChanged(this)},_doKeep:function(t,e){return t.$_saveAll(this,{},!1)},_doRun:function(t,e){var i,n,s,r,o,a=this.rows,h=this.start,l=this.count,u=this.rowState,d=this.filter;if(!t.isAppendable())return this.throwEmpty(0);if(0<t.rowCount()&&!t.isDeletable())return this.throwEmpty(0);t.refreshFieldFormats(),e&&(t.$_saveAll(this,e,!0),this._setReady()),t.beginUpdate();try{if(t.$_clearRows(),t._rowCount=0,a&&0<(i=a.length)&&h<i)if(h=Math.max(0,h),l=l<0?i:Math.min(l,i-h),u=t._checkStates?u||j1.NONE:void 0,d instanceof P8){for(t._values.length=t._rowIds.length=t._rowStates.length=t._rowTags.length=l,d.prepare(t.filterRuntime().prepare(t)),n=i,s=0,r=h;r<n&&s<l;r++)o=a[r],V1(o)||(o=t.objectToRow(o)),d.select(r,s,o)&&(t._rowStates[s]=u,t._internalSetRow(s++,o));t._values.length=t._rowIds.length=t._rowStates.length=t._rowTags.length=s}else if((n=Math.min(i,h+l))>h)for(t._values.length=t._rowIds.length=t._rowStates.length=t._rowTags.length=n-h,s=0,r=h;r<n;r++)o=a[r],V1(o)||(o=t.objectToRow(o)),t._rowStates[s]=u,t._internalSetRow(s++,o)}finally{t.endUpdate(!1)}return t.setDataInited(!0),t._tags.setRows(),!e&&this._doPostRun(t),t.rowCount()},_doPostRun:function(t){var e=t.$_cmd(this);t._fireRefresh(e),t._fireRowCountChanged(e)},_doRedo:function(t,e){return t.$_restoreAll(this,e,!0),t._tags.setRows(),t.rowCount()},_doPostRedo:function(t){t._fireRefresh(this),t._fireRowCountChanged(this)}}),v07=I1("DataSetRowCountCommand",K2,{init:function(t,e,i,n,s){this._super(t),this.newCount=e,this.fillDefaults=i,this.defaultValues=n,this.rowState=s},_doUndo:function(t,e){var i,n,s=this.newRows,r=t._values.length,o=r-s;if(0<s)t._values.length=t._rowIds.length=t._rowStates.length=t._rowTags.length=o,t._orgValues&&(t._orgValues.length=o),t._tags.setRowCount(o);else{for(i=0;i<-s;i++)n=r+i,t._values[n]=e.values[i],t._rowIds[n]=e.rowIds[i],t._rowStates[n]=e.rowStates[i],t._rowTags[n]=e.rowTags[i],t._orgValues&&(t._orgValues[n]=e.orgValues[i]);t._tags.setRowCount(o),t._tags.$_restoreRows(this,e.rows,!0)}},_doPostUndo:function(t){t._fireRefresh(this),t._fireRowCountChanged(this)},_doKeep:function(t,e){var i,n,s=this.newRows,r=t._values.length-s,o={values:[],rowIds:[],rowStates:[],rowTags:[],orgValues:[]};if(0<s)for(o.rows=e.rows&&e.rows.concat(),i=0;i<s;i++)n=r+i,o.values[i]=t._values[n]&&t._values[n].concat(),o.rowIds[i]=t._rowIds[n],o.rowStates[i]=t._rowStates[n],o.rowTags[i]=t._rowTags[n],t._orgValues&&(o.orgValues[i]=t._orgValues[n]&&t._orgValues[n].concat());return o},_doRun:function(t,e){var i,n,s,r,o,a,h,l,u,d,c,_,f,g,m,p,w=this.newCount,v=this.fillDefaults,C=this.defaultValues,I=this.rowState;if(n=(i=t._values).length,(s=Math.max(0,w))==n)return this.throwEmpty();if(n<s&&!t.isAppendable())return this.throwEmpty();if(s<n&&!t.isDeletable())return this.throwEmpty();if(t.refreshFieldFormats(),g=t._rowIds,m=t._rowStates,p=t._rowTags,e){if((r=this.newRows=s-n)<0){for(t._orgValues&&(e.orgValues=t._orgValues.splice(s,-r)),e.values=t._values.splice(s,-r),e.rowIds=t._rowIds.splice(s,-r),e.rowStates=t._rowStates.splice(s,-r),e.rowTags=t._rowTags.splice(s,-r),o=new Array(-r),a=s;a<n;a++)o[a-s]=a;e.rows=o,t._tags.$_saveRows(this,o)}e.nextRowId=t._nextRowId,e.deletedCount=t._deletedCount,this._setReady()}if(i.length=g.length=m.length=p.length=s,t._orgValues&&t._orgValues.length>s&&(t._orgValues.length=s),n<s&&(v||C)){if(d=t._fields.length,!V1(c=C)&&c&&I4(c)&&(c=t.objectToRow(c)),c&&c.length<1&&(c=null),v||c)for(f=c?Math.min(c.length,d):0,a=n;a<s;a++){if(u=[],v)for(h=0;h<d;h++)l=t._fields[h],u[h]=l._defaultValue;if(0<f)for(h=0;h<f;h++)void 0!==(_=c[h])&&(u[h]=t._fields[h].readValue(_));t._derivedFieldCount&&t.$_deriveValues(row,u,-1),i[a]=u}}else if(s<n&&0<t._deletedCount)for(a=n-1;s<=a;a--)m[a]!=j1.DELETED&&m[a]!=j1.CREATE_AND_DELETED||t._deletedCount--,m[a]=j1.NONE;for(I=t._checkStates&&I?I:j1.NONE,a=n;a<s;a++)m[a]=I,g[a]=t._nextRowId++;return t.setDataInited(!0),t._tags.setRowCount(s),!e&&this._doPostRun(t),s},_doPostRun:function(t){var e=t.$_cmd(this);t._fireRefresh(e),t._fireRowCountChanged(e)},_doRedo:function(t,e){var i,n,s=this.newRows,r=t._values.length,o=r+s;if(0<s){for(i=0;i<s;i++)n=r+i,t._values[n]=e.values[i],t._rowIds[n]=e.rowIds[i],t._rowStates[n]=e.rowStates[i],t._rowTags[n]=e.rowTags[i],t._orgValues&&(t._orgValues[n]=e.orgValues[i]);t._tags.setRowCount(o),t._tags.$_restoreRows(this,e.rows,!1)}else t._values.length=t._rowIds.length=t._rowStates.length=t._rowTags.length=o,t._orgValues&&(t._orgValues.length=o),t._tags.setRowCount(o)},_doPostRedo:function(t){t._fireRefresh(this),t._fireRowCountChanged(this)}}),p9=I1("DataSetValueCommand",K2,{init:function(t,e,i,n,s,r,o){this._super(t),this.row=e,this.field=i,this.value=n,this.checkDiff=s,this.strictDiff=r,this.noEvent=o},$_updating:function(){return!0},_doUndo:function(t,e){var i=this.row,n=this.field;this.keep,t._values[i]=e.values,t._rowStates[i]=e.state,t._orgValues&&(t._orgValues[i]=e.orgValues),t._tags.$_restoreValue(this,i,n)},_doPostUndo:function(t){t._fireValueChanged(this,this.row,this.field)},_doKeep:function(t,e){var i=this.row,n={};return n.values=t._values[i].concat(),n.state=t._rowStates[i],t._orgValues&&(n.orgValues=t._orgValues[i]),n},_doRun:function(t,e,i){var n=this.row,s=this.field,r=this.value;return this.$_run(t,n,s,r,this.checkDiff,this.strictDiff,this.noEvent,e,i)||this.throwEmpty(!1)},$_run:function(t,e,i,n,s,r,o,a,h){var l,u,d,c,_,f,g,m;if(!t.isUpdatable())return this.throwEmpty(!1);if(t._checkRowIndex(e),"string"==typeof i&&(l=i,(i=t.getFieldIndex(l))<0&&(i=Number(l))),t._checkFieldIndex(i),u=t._fields[i],d=this.oldState=t._rowStates[e],j1.isDeleted(d))return this.throwEmpty(!1);if(!u._updatable&&(d==j1.NONE||d==j1.UPDATED))return this.throwEmpty(!1);if(c=t._values[e],_=u.readValue(n),c&&s)if(r){if(u.equalValues(_,c[i]))return this.throwEmpty(!1)}else if(u.sameValues(_,c[i]))return this.throwEmpty(!1);return t.refreshFieldFormat(u),(f=!!t._pending||t.fireValueChanging(this,e,i,_))instanceof a07&&f.action()===this?t._pending=f:f?(t._tags.$_saveValue(this,e,i),a&&(a.values=c&&c.concat(),a.state=d,t._orgValues&&(a.orgValues=t._orgValues[e]),this._setReady()),m=t._checkStates&&(d==j1.NONE||!d),c||(t._values[e]=c=[]),m&&t._orgValues&&(g=c.concat()),c[i]=_,t._derivedFieldCount&&t.$_deriveValues(e,c,i),m?(g&&(t._orgValues[e]=g),t._changeRowState(this,e,j1.UPDATED,!1),a&&(h.needState=m)):t._needAutoRestore&&d==j1.UPDATED&&t.$_restoreState(e),t._tags.setValue(e,i),a?(h.row=e,h.field=i):this.noEvent||(m&&t._fireStateChanged(this,e,this.oldState),t._fireValueChanged(this,e,i)),!0):this.throwEmpty(!1)},_doPostRun:function(t,e){if(!this.noEvent){var i=t.$_cmd(this);e.needState&&t._fireStateChanged(i,e.row,this.oldState),t._fireValueChanged(i,e.row,e.field)}},_doRedo:function(t,e){var i=this.row,n=this.field;return t._tags.$_saveValue(this,i,n),t._values[i]=e.values,t._rowStates[i]=e.state,t._orgValues&&(t._orgValues[i]=e.orgValues),t._tags.setValue(i,n),!0},_doPostRedo:function(t){t._fireValueChanged(this,this.row,this.field)}}),B07=I1("DataUpdateRowCommand",K2,{init:function(t,e,i,n,s,r){this._super(t),this.row=e,this.values=i,this.checkDiff=n,this.strictDiff=s,this.checkEmpty=r},$_updating:function(){return!0},_doUndo:function(t,e){var i=this.row;t._values[i]=e.values,t._rowStates[i]=e.state,t._orgValues&&(t._orgValues[i]=e.orgVals),t._tags.$_restoreRow(this,i)},_doPostUndo:function(t){t._fireRowUpdated(this,this.row)},_doKeep:function(t,e){var i=this.row,n={};return n.values=t._values[i].concat(),n.state=t._rowStates[i],t._orgValues&&(n.orgValues=t._orgValues[i]),n},_doRun:function(t,e){var i,n,s,r=this.row,o=this.values,a=this.checkDiff,h=this.strictDiff,l=this.checkEmpty;return t.isUpdatable()&&o?(t._checkRowIndex(r),t.refreshFieldFormats(),s=t._rowStates[r],j1.isDeleted(s)?this.throwEmpty(!1):(i=!!t._pending||t._fireRowUpdating(this,r,o))instanceof a07&&i.action()===this?t._pending=i:i&&(e&&(n=t._orgValues&&t._orgValues[r],this._setReady()),t._internalUpdateRow(this,r,o,a,h,l,!0,!V1(o)))?(e&&(e.values=t.$$_oldVals,e.state=s,e.orgVals=n,t._tags.$_saveRow(this,r)),t._tags.updateRow(this.row),!e&&this._doPostRun(t),!0):this.throwEmpty(!1)):this.throwEmpty(!1)},_doPostRun:function(t){var e=t.$_cmd(this);t._fireRowUpdated(e,this.row)},_doRedo:function(t,e){var i=this.row;return t._tags.$_saveRow(this,i),t._values[i]=e.values,t._rowStates[i]=e.state,t._orgValues&&(t._orgValues[i]=e.orgValues),t._tags.updateRow(i),!0},_doPostRedo:function(t){t._fireRowUpdated(this,this.row)}}),E27=I1("DataUpdateRowsCommand",K2,{init:function(t,e,i,n,s,r,o,a,h,l){this._super(t),this.row=e,this.rows=i,this.start=n,this.count=s,this.checkDiff=r,this.strictDiff=o,this.checkEmpty=a,this.rowEvents=h,this.filter=l},$_updating:function(){return!0},_doUndo:function(t,e,i){var n,s=t._orgValues,r=[];for(n in e.rows)t._values[n]=e.rows[n],t._rowStates[n]=e.states[n],s&&(s[n]=e.orgVals[n]),r.push(n);t._tags.$_restoreRows(this,r),i.ids=r},_doPostUndo:function(t,e){t._fireRowsUpdated(this,e.ids)},_doKeep:function(t,e){var i,n=t._orgValues,s={rows:{},states:{},tags:{},orgVals:n&&{}};for(i in e.rows)s.rows[i]=t._values[i].concat(),s.states[i]=t._rowStates[i],n&&(s.orgVals[i]=n[i]);return s},_doRun:function(t,e,i){var n,s,r,o,a,h,l,u,d,c,_,f,g,m=this.row,p=this.rows,w=this.start,v=this.count,C=this.checkDiff,I=this.strictDiff,R=this.checkEmpty,y=this.rowEvents&&!e;if(this.filter,!t.isUpdatable())return this.throwEmpty(!1);if(isNaN(m))return this.throwEmpty(!1);if(!p||(o=p.length)<1)return this.throwEmpty(!1);if(0==(v=v<0?o:Math.min(o,v)))return this.throwEmpty(!1);if(!t._fireRowsUpdating(this,m,p,w,v))return this.throwEmpty(!1);if((o=p.length)<1)return this.throwEmpty(!1);if(v=Math.min(v,o),t.refreshFieldFormats(),f=t.rowCount(),w=Math.max(0,w),(l=Math.min(o,w+v))<=w)return this.throwEmpty(!1);if(e&&(n=e.rows={},s=e.states={},r=e.orgVals={},this._setReady()),y)for(h=m,a=w;a<l&&h<f;a++,h++)_=t._rowStates[h],!j1.isDeleted(_)&&t._fireRowUpdating(this,h)&&(u=p[a],g=t._orgValues&&t._orgValues[h],t._internalUpdateRow(this,h,u,C,I,R,!0,!V1(u))&&(n&&(n[h]=t.$$_oldVals,s[h]=_,r[h]=g),t._tags.$_saveRow(this,m),t._tags.updateRow(h),t._fireRowUpdated(this,h)));else{for(d=[],c=[],h=m,a=w;a<l&&h<f;a++,h++)_=t._rowStates[h],j1.isDeleted(_)||(u=p[a],g=t._orgValues&&t._orgValues[h],t._internalUpdateRow(this,h,u,C,I,R,!1,!V1(u))&&(n&&(n[h]=t.$$_oldVals,s[h]=_,r[h]=g),d.push(h),_==j1.NONE&&c.push(h)));e&&0<d.length&&t._tags.$_saveRows(this,d),0<d.length&&t._tags.updateRows(d),i.list=c,i.ids=d,!e&&this._doPostRun(t,i)}return d},_doPostRun:function(t,e){var i=t.$_cmd(this);0<e.list.length&&t._fireStatesChanged(i,e.list,0),0<e.ids.length&&t._fireRowsUpdated(i,e.ids)},_doRedo:function(t,e,i){var n,s=t._orgValues,r=t._values,o=t._rowStates,a=[];for(n in e.rows)r[n]=e.rows[n],o[n]=e.states[n],s&&(s[n]=e.orgVals[n]),a.push(n);t._tags.$_saveRows(this,a),i.ids=a},_doPostRedo:function(t,e){t._fireRowsUpdated(this,e.ids)}}),T07=I1("DataUpdateValuesCommand",K2,{init:function(t,e,i,n,s,r){this._super(t),this.where=e,this.newValues=i,this.checkDiff=n,this.strictDiff=s,this.noState=r},_doUndo:function(t,e,i){var n,s=t._orgValues,r=[];for(n in e.rows)t._values[n]=e.rows[n],t._rowStates[n]=e.states[n],s&&(s[n]=e.orgVals[n]),r.push(n);t._tags.$_restoreRows(this,r),i.ids=r},_doPostUndo:function(t,e){t._fireRowsUpdated(this,e.ids)},_doKeep:function(t,e){var i,n=t._orgValues,s={rows:{},states:{},tags:{},orgVals:n&&{}};for(i in e.rows)s.rows[i]=t._values[i].concat(),s.states[i]=t._rowStates[i],n&&(s.orgVals[i]=n[i]);return s},_doRun:function(t,e,i){var n,s,r,o,a,h,l,u,d,c,_,f,g,m,p,w,v,C,I=this.where,R=this.newValues,y=this.checkDiff,x=this.strictDiff,E=this.noState;if(!t.isUpdatable())return this.throwEmpty();if(!R)return this.throwEmpty();if((a=t._values.length)<1)return this.throwEmpty();if(!t._fireValuesUpdating(this,I,R))return this.throwEmpty(!1);for(c in h=p4(I),l=t.fieldCount(),u=[],d=[],R)(0<=(_=t.getFieldIndexEx(c))||_<l)&&(u.push(t.getField(_)),d.push(R[c]));if(!u.length)return this.throwEmpty();for(e&&(n=e.rows={},s=e.states={},r=e.orgVals={},this._setReady()),f=[],g=[],p=m=null,I&&!h&&(m=J4.Default.parse(I),p=new Q6(t)),w=0;w<a;w++)C=t._rowStates[w],v=e&&t._orgValues&&t._orgValues[w],o=!1,j1.isDeleted(C)||(h?h(t,w,t._values[w])&&t._internalUpdateValues(this,w,u,d,y,x,!1,!1,E)&&(f.push(w),E||C!=j1.NONE||g.push(w),o=!0):m?(p.setRow(w,t._values[w]),m.evaluate(p)&&t._internalUpdateValues(this,w,u,d,y,x,!1,!1,E)&&(f.push(w),E||C!=j1.NONE||g.push(w),o=!0)):t._internalUpdateValues(this,w,u,d,y,x,!1,!1,E)&&(f.push(w),E||C!=j1.NONE||g.push(w),o=!0),o&&e&&(n[w]=t.$$_oldVals,s[w]=C,r[w]=v));0<f.length&&t._tags.$_saveRows(this,f),0<f.length&&t._tags.updateRows(f),i.list=g,i.rows=f,!e&&this._doPostRun(t,i)},_doPostRun:function(t,e){var i=t.$_cmd(this);0<e.list.length&&t._fireStatesChanged(i,e.list,0),0<e.rows.length&&t._fireRowsUpdated(i,e.rows)},_doRedo:function(t,e,i){var n,s=t._orgValues,r=[];for(n in e.rows)t._values[n]=e.rows[n],t._rowStates[n]=e.states[n],s&&(s[n]=e.orgVals[n]),r.push(n);t._tags.$_saveRows(this,r),i.ids=r},_doPostRedo:function(t,e){t._fireRowsUpdated(this,e.ids)}}),s07=I1("DataDeleteRowCommand",K2,{init:function(t,e){this._super(t),this.row=e},_doUndo:function(t,e,i){var n,s=this.row;e.values?(n=e.id,t._values.splice(s,0,e.values),t._rowIds.splice(s,0,e.id),t._deletedCount=e.deletedCount,e.orgValues&&t._orgValues&&t._orgValues.splice(s,0,e.orgValues),t._rowStates.splice(s,0,e.state),t._rowTags.splice(s,0,e.tag),t._tags.insertRow(s),t._tags.$_restoreRow(this,s,!0),i.id=n):t._rowStates[s]!=e.state&&(this._oldState=t.getRowState(s),t._tags.$_restoreRow(this,s),t._changeRowState(this,this.row,i.state,!1,!0,!0))},_doPostUndo:function(t,e){void 0!==e.id?(t._fireRowInserted(this,this.row),t._fireRowCountChanged()):t._fireStateChanged(this,this.row,this._oldState)},_doKeep:function(t,e){var i={};return i.values=e.values,i.state=e.state,i.id=e.id,i.deletedCount=t._deletedCount,i},_doRun:function(t,e,i){var n,s,r,o=this.row;if(!t.isDeletable())return this.throwEmpty();if(t._checkRowIndex(o),!t._fireRowDeleting(this,o))return this.throwEmpty(!1);if(n=!1,s=this._oldState=t._rowStates[o],r=t._rowIds[o],e&&(e.id=r,e.state=s,t._tags.$_saveRow(this,o,!0),this._setReady()),t._softDelete&&t._checkStates)switch(s){case j1.CREATED:n=t._deleteCreated?i.deleted=t.$$_deleteRow(o,e):t._changeRowState(this,o,j1.CREATE_AND_DELETED,!1,!0,!0);break;case j1.CREATE_AND_DELETED:t._deleteCreated&&(n=i.deleted=t.$$_deleteRow(o,e));break;case j1.DELETED:break;default:n=t._changeRowState(this,o,j1.DELETED,!1,!0,!0)}else n=i.deleted=t.$$_deleteRow(o,e);return n?(i.deleted&&(i.id=r),!e&&this._doPostRun(t,i),!0):this.throwEmpty(!1)},_doPostRun:function(t,e){var i=t.$_cmd(this);void 0!==e.id?(t._fireRowDeleted(i,this.row,e.id),t._fireRowCountChanged(i)):t._fireStateChanged(i,this.row,this._oldState)},_doRedo:function(t,e,i){var n=this.row;return t._tags.$_saveRow(this,n,!0),e.values?(t._internalDeleteRow(n),t._deletedCount=e.deletedCount,t._tags.removeRow(n),i.id=e.id):(this._oldState=t.getRowState(n),t._changeRowState(this,n,e.state,!1,!0,!0)),!0},_doPostRedo:function(t,e){void 0!==e.id?(t._fireRowDeleted(this,this.row,e.id),t._fireRowCountChanged(this)):t._fireStateChanged(this,this.row,this._oldState)}}),f07=I1("DataDeleteRowsCommand",K2,{init:function(t,e,i){this._super(t),this.rows=e,this.rowEvents=i},_doUndo:function(t,e,i){var n,s,r,o,a,h,l=t._deletedCount;if((n=e.rows)&&0<n.length)for(a=[],s=n.length;s--;)o=(r=n[s]).row,a.push(o),t._values.splice(o,0,r.values),t._rowIds.splice(o,0,r.id),e.orgValues&&t._orgValues.splice(o,0,r.orgValues),t._rowStates.splice(o,0,r.state),t._rowTags.splice(o,0,r.tag),t._tags.insertRow(o);if(n=e.states)for(o in h=[],n)h.push(o),t._rowStates[o]=n[o];t._deletedCount=e.deletedCount,this._deletedInc=t._deletedCount-l,a&&0<a.length&&t._tags.$_restoreRows(this,a,!0),h&&0<h.length&&t._tags.$_restoreRows(this,h,!0),i.list=a,i.list2=h},_doPostUndo:function(t,e){var i=e.list,n=e.list2;i&&0<i.length&&(t._fireRowsInserted(this,i),t._fireRowCountChanged(this)),n&&0<n.length&&t._fireStatesChanged(this,n,this._deletedInc)},_doKeep:function(t,e){var i,n,s,r={rows:[],ids:[]};if((i=e.rows)&&0<i.length)for(n=i.length;n--;)r.rows.push(i[n].row),r.ids.push(i[n].id);if(r.states={},i=e.states)for(s in i)r.states[s]=t._rowStates[s];return r.deletedCount=t._deletedCount,r},_doRun:function(t,e,i){var n,s,r,o,a,h,l,u,d,c=t._deletedCount,_=this.rows.concat(),f=this.rowEvents&&!e;if(!t.isDeletable())return this.throwEmpty(0);if(!_||_.length<1)return this.throwEmpty(0);for(_.sort(function(t,e){return t-e}),o=_.length;0<o;o--)_[o]==_[o-1]&&_.splice(o,1);if(!t._fireRowsDeleting(this,_))return this.throwEmpty(0);if((r=_.length)<1)return this.throwEmpty(0);if(d=t.deleteCreated(),e&&(e.deletedCount=t._deletedCount,n=e.states={},s=e.rows=[],this._setReady()),t._softDelete&&t._checkStates){for(u=f?null:[],o=r;o--;)if(a=_[o],t._checkRowIndex(a,!0)){switch(l=!1,h=t._rowStates[a]){case j1.CREATED:d||(l=t._changeRowState(this,a,j1.CREATE_AND_DELETED,f,!1,!0),_.splice(o,1));break;case j1.DELETED:case j1.CREATE_AND_DELETED:_.splice(o,1);break;default:l=t._changeRowState(this,a,j1.DELETED,f,!1,!0),_.splice(o,1)}l&&(u.push(a),e&&(n[a]=h))}else _.splice(o,1);e&&0<u.length&&t._tags.$_saveRows(this,u,!0),f||u&&0<u.length&&(i.stateRows=u)}if(0<(r=_.length))if(e&&t._tags.$_saveRows(this,_,!0),f)for(o=r;o--;)a=_[o],t._checkRowIndex(a,!0)?(e&&s.push(t.$_saveRow(a,{})),t.$_deleteRow(this,a)):_.splice(o,1);else{for(o=r;o--;)a=_[o],t._checkRowIndex(a,!0)?(e&&s.push(t.$_saveRow(a,{})),h=t._rowStates[a],t._internalDeleteRow(a),j1.isDeleted(h)&&t._deletedCount--):_.splice(o,1);0<(r=_.length)&&(t._tags.removeRows(_),i.rows=_)}return this._deletedInc=t._deletedCount-c,i.rows||i.stateRows?(!e&&this._doPostRun(t,i),r):this.throwEmpty(0)},_doPostRun:function(t,e){var i=t.$_cmd(this);e.stateRows&&t._fireStatesChanged(i,e.stateRows,this._deletedInc),e.rows&&(t._fireRowsDeleted(i,e.rows),t._fireRowCountChanged(i))},_doRedo:function(t,e,i){var n,s,r,o=t._deletedCount;for(s in t._tags.$_saveRows(this,e.rows,!0),n=[],e.states)t._rowStates[s]=e.states[s],n.push(s);for(0<n.length&&(i.stateRows=n),r=e.rows.length;r--;)s=e.rows[r],t._internalDeleteRow(s);t._deletedCount=e.deletedCount,this._deletedInc=t._deletedCount-o,0<e.rows.length&&(t._tags.removeRows(e.rows),i.rows=e.rows)},_doPostRedo:function(t,e){e.stateRows&&t._fireStatesChanged(this,e.stateRows,this._deletedInc),e.rows&&(t._fireRowsDeleted(this,e.rows),t._fireRowCountChanged(this))}}),Z8=I1("DataInsertRowCommand",K2,{init:function(t,e,i,n){this._super(t),this.row=e,this.values=i,this.field=void 0===n?-1:n},_doUndo:function(t,e){var i=this.row;t._values.splice(i,1),t._rowIds.splice(i,1),t._rowStates.splice(i,1),t._rowTags.splice(i,1),t._orgValues&&t._orgValues.splice(i,1),t._tags.removeRow(i)},_doPostUndo:function(t){t._fireRowDeleted(this,this.row),t._fireRowCountChanged(this)},_doKeep:function(t,e){var i=this.row,n={};return n.values=t._values[i].concat(),n.id=t._rowIds[i],n.state=t._rowStates[i],n.tag=t._rowTags[i],t._orgValues&&(n.orgVals=t._orgValues[i]&&t._orgValues[i].concat()),n},_doRun:function(t,e){var i=this.row,n=this.values;if(isNaN(i)||i<0||i>t._values.length)throw new RangeError("row is out of bounds:"+i);return t.isInsertable()&&(i!=t._values.length||t.isAppendable())?(t.refreshFieldFormats(),n&&t._fireRowInserting(this,i,n)?(e&&this._setReady(),e3(n)||(n=t.objectToRow(n)),t._internalInsertRow(i,n,this.field),t.setDataInited(!0),t._tags.insertRow(i),!e&&this._doPostRun(t),!0):this.throwEmpty(!1)):this.throwEmpty(!1)},_doPostRun:function(t){var e=t.$_cmd(this);t._fireRowInserted(e,this.row),t._fireRowCountChanged(e)},_doRedo:function(t,e){var i=this.row;return t._values.splice(i,0,e.values),t._rowIds.splice(i,0,e.id),t._rowStates.splice(i,0,e.state),t._rowTags.splice(i,0,e.tag),t._orgValues&&t._orgValues.splice(i,0,e.orgVals),t._tags.insertRow(i),!0},_doPostRedo:function(t){t._fireRowInserted(this,this.row),t._fireRowCountChanged(this)}}),z9=I1("DataInsertRowsCommand",K2,{init:function(t,e,i,n,s,r,o){this._super(t),this.row=e,this.rows=i,this.start=n,this.count=s,this.rowEvents=r,this.filter=o},_doUndo:function(t,e,i){var n,s;for(rows=e.rows,orgVals=t._orgValues,rows=e.rows,n=rows.length;n--;)s=rows[n],t._values.splice(s,1),t._rowIds.splice(s,1),t._rowStates.splice(s,1),t._rowTags.splice(s,1),orgVals&&orgVals.splice(s,1),t._tags.removeRow(s);i.rows=rows},_doPostUndo:function(t,e){t._fireRowsDeleted(this,e.rows),t._fireRowCountChanged(this)},_doKeep:function(t,e){var i,n,s,r,o=t._orgValues,a={},h=a.rows=[];for(i=e.rows,n=0;n<i.length;n++)(r={row:s=i[n]}).values=t._values[s].concat(),r.id=t._rowIds[s],r.state=t._rowStates[s],r.tag=t._rowTags[s],o&&(r.orgVals=o[s]&&o[s].concat()),h.push(r);return a},_doRun:function(t,e,i){t=this.ds;var n,s,r,o,a,h,l=this.row,u=this.rows,d=this.start,c=this.count,_=this.rowEvents&&!e,f=this.filter;if(isNaN(l)||l<0||l>t.rowCount())throw new RangeError("row is out of bounds:"+l);if(!t.isInsertable())return this.throwEmpty(0);if(!u||(s=u.length)<1)return this.throwEmpty(0);if(0==(c=c<0?s:Math.min(s,c)))return this.throwEmpty(0);if(!t._fireRowsInserting(this,l,u,d,c))return this.throwEmpty(0);if((s=u.length)<1)return this.throwEmpty(0);if(c=Math.min(c,s),t.refreshFieldFormats(),d=Math.max(0,d),h=Math.min(s,d+c),f instanceof P8?f.prepare(t.filterRuntime().prepare(t)):f=null,e&&(n=e.rows=[],this._setReady()),_)for(o=l,r=d;r<h;r++)a=u[r],V1(a)||(a=t.objectToRow(a)),t._fireRowInserting(this,o,a)&&(f&&!f.select(r,o,a)||(t._internalInsertRow(o,a),t._tags.insertRow(o),t._fireRowInserted(this,o),t._fireRowCountChanged(this),n&&n.push(o),o++));else{for(o=l,r=d;r<h;r++)a=u[r],e3(a)||(a=t.objectToRow(a)),f&&!f.select(r,o,a)||(n&&n.push(o),t._internalInsertRow(o++,a));t.setDataInited(!0),t._tags.insertRows(l,c=h-d),i.count=c,!e&&this._doPostRun(t,i)}return o-l},_doPostRun:function(t,e){var i=t.$_cmd(this);t._fireRowsInserted(i,this.row,e.count),t._fireRowCountChanged(i)},_doRedo:function(t,e,i){var n,s,r=this.row,o=e.rows;for(n=0;n<o.length;n++)s=o[n],t._values.splice(s.row,0,s.values),t._rowIds.splice(s.row,0,s.id),t._rowStates.splice(s.row,0,s.state),t._rowTags.splice(s.row,0,s.tag),t._orgValues&&t._orgValues.splice(s.row,0,s.orgVals&&s.orgVals);t._tags.insertRows(r,o.length),i.count=o.length},_doPostRedo:function(t,e){t._fireRowsInserted(this,this.row,e.count),t._fireRowCountChanged(this)}}),u07=I1("DataMoveRowCommand",K2,{init:function(t,e,i){this._super(t),this.row=e,this.newRow=i},_doUndo:function(t,e){var i=this.row,n=this.newRow;t._internalMoveRow(n,i),t._tags.moveRow(n,i)},_doPostUndo:function(t){t._fireRowMoved(this,this.newRow,this.row)},_doKeep:function(t,e){return{}},_doRun:function(t,e){var i=this.row,n=this.newRow;return t.isMovable()?i==n?this.throwEmpty():(t._checkRowIndex(i),t._checkRowIndex(n),t._fireRowMoving(this,i,n)?(this._setReady(),t._internalMoveRow(i,n),t._tags.moveRow(i,n),!e&&this._doPostRun(t),!0):this.throwEmpty()):this.throwEmpty()},_doPostRun:function(t){var e=t.$_cmd(this);t._fireRowMoved(e,this.row,this.newRow)},_doRedo:function(t,e){var i=this.row,n=this.newRow;t._internalMoveRow(i,n),t._tags.moveRow(i,n)},_doPostRedo:function(t){t._fireRowMoved(this,this.row,this.newRow)}}),g07=I1("DataMoveRowsCommand",K2,{init:function(t,e,i,n){this._super(t),this.row=e,this.count=i,this.newRow=n},_doUndo:function(t,e){var i=this.row,n=this.count,s=this.newRow;t._internalMoveRows(s,n,i),t._tags.moveRows(s,n,i)},_doPostUndo:function(t){t._fireRowsMoved(this,this.newRow,this.count,this.row)},_doKeep:function(t,e){return this.Empty()},_doRun:function(t,e,i){var n,s=this.row,r=this.count,o=this.newRow;return t.isMovable()?(t._checkRowIndex(s),t._checkRowIndex(o),s==o?this.throwEmpty(0):(n=t.rowCount(),this.count=n=Math.min(r,n-s,n-o),n<1?this.throwEmpty(0):t._fireRowsMoving(this,s,n,o)?(this._setReady(),t._internalMoveRows(s,n,o),t._tags.moveRows(s,n,o),i.count=n,!e&&this._doPostRun(t,i),n):this.throwEmpty(0))):this.throwEmpty(0)},_doPostRun:function(t,e){var i=t.$_cmd(this);t._fireRowsMoved(i,this.row,e.count,this.newRow)},_doRedo:function(t,e){var i=this.row;cnt=this.count,newRow=this.newRow,t._internalMoveRows(i,cnt,newRow),t._tags.moveRows(i,cnt,newRow)},_doPostRedo:function(t){t._fireRowsMoved(this,this.row,this.count,this.newRow)}}),r07=I1("DataSetRowStateCommand",K2,{init:function(t,e,i,n){this._super(t),this.row=e,this.state=i,this.force=n},_doUndo:function(t,e){var i=this.row;this._oldState=t._rowStates[i],t._rowStates[i]=e.state,t._rowTags[i]=e.tag,t._orgValues&&(t._orgValues[i]=e.orgValues)},_doPostUndo:function(t){t._fireStateChanged(this,this.row,this._oldState)},_doKeep:function(t,e){return{}},_doRun:function(t,e){var i=this.row,n=this.state,s=this.force;return t._checkRowIndex(i),this._oldState=t.getRowState(i),e&&(e.state=this._oldState,e.tag=t._rowTags[i],e.orgValues=t._orgValues?t._orgValues[i]:void 0,this._setReady()),(t._orgValues?t._changeRowStateEx(this,i,n,!1,s):t._changeRowState(this,i,n,!1,s,!0))?(!e&&this._doPostRun(t),!0):this.throwEmpty(!1)},_doPostRun:function(t){var e=t.$_cmd(this);t._fireStateChanged(e,this.row,this._oldState)},_doRedo:function(t,e){var i=this.row,n=this.state,s=this.force;this._oldState=t.getRowState(i),t._orgValues?t._changeRowStateEx(this,i,n,!1,s):t._changeRowState(this,i,n,!1,s,!0)},_doPostRedo:function(t){t._fireStateChanged(this,this.row,this._oldState)}}),h07=I1("DataSetRowStatesCommand",K2,{init:function(t,e,i,n,s){this._super(t),this.rows=e,this.state=i,this.force=n,this.rowEvents=s},_doUndo:function(t,e,i){var n,s,r=t._deletedCount,o=t._orgValues;for(n in s=[],e.states)t._rowStates[n]!=e.states[n]&&(t._rowStates[n]=e.states[n],t._rowTags[n]=e.tags[n],o&&(o[n]=e.orgVals[n]),s.push(n));t._deletedCount=e.deletedCount,this._deletedInc=t._deletedCount-r,i.list=s},_doPostRedo:function(t,e){0<e.list.length&&t._fireStatesChanged(this,e.list,this._deletedInc)},_doKeep:function(t,e){var i,n=t._orgValues,s={};for(i in s.deletedCount=t._deletedCount,s.states={},s.tags={},s.orgVals={},e.states)s.states[i]=t._rowStates[i],s.tags[i]=t._rowTags[i],n&&(s.orgVals[i]=n[i]);return s},_doRun:function(t,e,i){var n,s,r,o,a,h,l,u,d,c=this.rows,_=this.state,f=this.force,g=this.rowEvents&&!e,m=t._deletedCount,p=t._orgValues;if(!c||(a=c.length)<1)return this.throwEmpty();if(e&&(e.deletedCount=t._deletedCount,n=e.states={},s=e.tags={},r=e.orgVals={},this._setReady()),g)for(o=0;o<a;o++)h=c[o],t._checkRowIndex(h,!0)&&(d=t.getRowState(h),t._changeRowStateEx(this,h,_,!0,f,!1)&&e&&(n[h]=d,s[h]=t._rowTags[h],r=t._orgValues?t._orgValues[h]:void 0));else{for(l=[],u=t._rowStates,o=0;o<a;o++)h=c[o],t._checkRowIndex(h,!0)&&_!=(d=u[h])&&(u[h]=_,l.push(h),j1.isDeleted(_)?t._deletedCount++:j1.isDeleted(d)&&!j1.isDeleted(_)&&t._deletedCount--,t._orgValues&&t.$_prepareOrgValues(h,d,_),e&&(n[h]=d,s[h]=t._rowTags[h],r[h]=p?p[h]:void 0));i.list=l,this._deletedInc=t._deletedCount-m,!e&&this._doPostRun(t,i)}},_doPostRun:function(t,e){if(0<e.list.length){var i=t.$_cmd(this);t._fireStatesChanged(i,e.list,this._deletedInc)}},_doRedo:function(t,e,i){var n,s=t._deletedCount,r=t._orgValues,o=[];for(n in e.states)t._rowStates[n]=e.states[n],t._rowTags[n]=e.tags[n],r&&(r[n]=e.orgVals[n]),o.push(n);t._deletedCount=e.deletedCount,this._deletedInc=t._deletedCount-s,i.list=o},_doPostRedo:function(t,e){t._fireStatesChanged(this,e.list,this._deletedInc)}}),X07=I1("DataClearRowStatesCommand",K2,{init:function(t,e,i,n){this._super(t),this.states=e,this.deleteRows=i,this.rowEvents=n},_doUndo:function(t,e){var i,n,s,r,o,a=t._orgValues;if((i=e.delRows)&&0<i.length)for(s=i.length;s--;)o=(r=i[s]).row,t._values.splice(o,0,r.values),t._rowIds.splice(o,0,r.id),e.orgValues&&t._orgValues.splice(o,0,r.orgValues),t._rowStates.splice(o,0,r.state),t._rowTags.splice(o,0,r.tag),t._tags.insertRow(o);if(n=e.states)for(o in n)t._rowStates[o]=n[o],t._rowTags[o]=e.tags[o],a&&(a[o]=e.orgVals[o]);t._deletedCount=e.deletedCount},_doPostUndo:function(t){t._fireRefresh(this),t._fireRowCountChanged(this)},_doKeep:function(t,e){var i,n,s,r,o={};if(o.deletedCount=t._deletedCount,o.rows=[],o.states={},o.tags={},(i=e.delRows)&&0<i.length)for(n=0;n<i.length;n++)o.rows.push(i[n].row);if(s=e.states)for(r in s)o.states[r]=t._rowStates[r],o.tags[r]=t._rowTags[r];return o},_doRun:function(t,e,i){var n,s,r,o,a,h,l,u,d,c=this.states,_=this.deleteRows,f=this.rowEvents&&!e;for(e&&(e.deletedCount=t._deletedCount,n=e.states={},r=e.tags={},s=e.delRows=[],o=e.orgVals=[],this._setReady()),u=[],d=0,a=(l=t._rowStates).length;a--;)if(h=l[a],!c||0<=c.indexOf(h))switch(h){case j1.CREATE_AND_DELETED:case j1.DELETED:_?(s&&s.push(t.$_saveRow(a,{})),f?t.$_deleteRow(this,a):(t._internalDeleteRow(a),t._deletedCount--),u.push(a)):t._changeRowState(this,a,j1.NONE,f,!1,!1,this)&&(e&&(n[a]=h,r[a]=t._rowTags[a]),t._deletedCount--,d++);break;default:t._changeRowState(this,a,j1.NONE,f,!1,!1,this)&&(e&&(n[a]=h,r[a]=t._rowTags[a]),d++)}(!c||0<=c.indexOf("DataRowState.UPDATED"))&&(o&&(o=t._orgValues?t._orgValues.concat():void 0),t.$_resetOrgValues()),f||(i.rows=u,i.changed=d,!e&&this._doPostRun(t,i))},_doPostRun:function(t,e){var i=t.$_cmd(this);0<e.rows.length&&(t._fireRowsDeleted(i,e.rows),t._fireRowCountChanged(i)),0<e.changed&&t._fireStatesCleared(i)},_doRedo:function(t,e,i){var n,s=this.states,r=0,o=e.rows;if(0<o.length)for(n=0;n<o.length;n++)t._internalDeleteRow(o[n]);for(n in e.states)t._changeRowState(this,n,j1.NONE,!1,!1,!1),t._rowTags[n]=e.tags[n],r++;(!s||0<=s.indexOf("DataRowState.UPDATED"))&&t.$_resetOrgValues(),t._deletedCount=e.deletedCount,i.rows=o,i.changed=r},_doPostRedo:function(t,e){0<e.rows.length&&(t._fireRowsDeleted(this,e.rows),t._fireRowCountChanged(this)),0<e.changed&&t._fireStatesCleared(this)}}),A37=I1("DataRestoreUpdatedStatesCommand",K2,{init:function(t,e){this._super(t),this.rows=e},_doUndo:function(t,e,i){var n,s,r,o=e.rows,a=e.orgs,h=[];for(n=0,s=e.rows.length;n<s;n++)r=o[n],t._rowStates[r]=j1.UPDATED,t._orgValues[r]=a[n],h.push(r);i.list=h},_doPostUndo:function(t,e){0<e.list.length&&t._fireStatesChanged(this,e.list)},_doKeep:function(t,e){var i,n,s={};for(s.rows=e.rows.concat(),s.orgs=new Array(n=s.rows.length),i=0;i<n;i++)s.orgs[i]=t._orgValues[s.rows[i]];return s},_doRun:function(t,e,i){t=this.ds;var n,s,r,o,a,h,l,u,d=this.rows;if(!t._orgValues)return this.throwEmpty();if(e&&(n=e.rows=[],s=e.orgs=[],this._setReady()),h=t._rowStates,u=[],null==d)for(r=0,o=t._values.length;r<o;r++)l=t._orgValues[r],h[r]==j1.UPDATED&&t.$_restoreState(r)&&(e&&(n.push(r),s.push(l)),u.push(r));else if(V1(d))for(r=0,o=d.length;r<o;r++)0<=(a=d[r])&&a<t._values.length&&h[a]==j1.UPDATED&&(l=t._orgValues[a],t.$_restoreState(a)&&(e&&(n.push(a),s.push(l)),u.push(a)));else isNaN(a=parseInt(d))||0<=a&&a<t._values.length&&h[a]==j1.UPDATED&&(l=t._orgValues[a],t.$_restoreState(a)&&(e&&(n.push(a),s.push(l)),u.push(a)));if(!(0<u.length))return this.throwEmpty();i.list=u,!e&&this._doPostRun(t,i)},_doPostRun:function(t,e){var i=t.$_cmd(this);t._fireStatesChanged(i,e.list,0)},_doRedo:function(t,e,i){var n,s,r,o=e.rows,a=e.orgs,h=[];for(n=0,s=o.length;n<s;n++)r=o[n],t._rowStates[r]=j1.NONE,t._orgValues[r]=a[n],h.push(r);i.list=h},_doPostRedo:function(t,e){t._fireStatesChanged(this,e.list,0)}}),b37=I1("DataRestoreUpdatedRowsCommand",K2,{init:function(t,e){this._super(t),this.rows=e},_doUndo:function(t,e,i){var n,s,r,o=[],a=e.rows,h=e.orgs,l=e.vals;for(n=0,s=a.length;n<s;n++)r=a[n],t._values[r]=l[n],t._rowStates[r]=j1.UPDATED,t._orgValues[r]=h[n],o.push(r);i.list=o},_doPostUndo:function(t,e){t._fireStatesChanged(this,e.list,0)},_doKeep:function(t,e){var i,n,s,r={};for(s=e.rows,e.vals,r.rows=s.slice(),r.vals=new Array(s.length),i=s.length;i--;)n=s[i],r.vals[i]=t._values[n].slice();return r},_doRun:function(t,e,i){var n,s,r,o,a,h,l,u,d=this.rows;if(!t._orgValues)return this.throwEmpty();if(l=t._rowStates,u=[],e&&(e.deletedCount=t._deletedCount,n=e.rows=[],s=e.orgs=[],r=e.vals=[],this._setReady()),null==d)for(o=0,a=t._values.length;o<a;o++)l[o]==j1.UPDATED&&t.$_restoreUpdated(o,e)&&(e&&(n.push(o),s.push(t.$$_orgVals),r.push(t.$$_oldVals)),u.push(o));else if(V1(d))for(o=0,a=d.length;o<a;o++)0<=(h=d[o])&&h<t._values.length&&l[h]==j1.UPDATED&&t.$_restoreUpdated(h,e)&&(e&&(n.push(h),s.push(t.$$_orgVals),r.push(t.$$_oldVals)),u.push(h));else isNaN(h=parseInt(d))||0<=h&&h<t._values.length&&l[h]==j1.UPDATED&&t.$_restoreUpdated(h,e)&&(e&&(n.push(h),s.push(t.$$_orgVals),r.push(t.$$_oldVals)),u.push(h));if(!(0<u.length))return this.throwEmpty();i.list=u,!e&&this._doPostRun(t,i)},_doPostRun:function(t,e){var i=t.$_cmd(this);t._fireStatesChanged(i,e.list,0)},_doRedo:function(t,e,i){var n,s,r,o=[],a=e.rows,h=e.vals;for(n=0,s=a.length;n<s;n++)r=a[n],t._values[r]=h[n],delete t._orgValues[r],t._rowStates[r]=j1.NONE,o.push(r);i.list=o},_doPostRedo:function(t,e){t._fireStatesChanged(this,e.list,0)}}),m37=I1("DataSetRowTagCommand",K2,{init:function(t,e,i){this._super(t),this.row=e,this.tag=i},_doUndo:function(t,e){var i=this.row;t._rowTags[i]=e.tag},_doPostUndo:function(t){t._fireTagChanged(this,this.row)},_doKeep:function(t,e){return this.Empty()},_doRun:function(t,e){var i,n=this.row,s=this.tag;return t._checkRowIndex(n),s!==(i=t._rowTags[n])?(e&&(e.tag=i,this._setReady()),t._rowTags[n]=s,!e&&this._doPostRun(t),!0):this.throwEmpty(!1)},_doPostRun:function(t){var e=t.$_cmd(this);t._fireTagChanged(e,this.row)},_doRedo:function(t,e){var i=this.row,n=this.tag;return t._rowTags[i]=n,!0},_doPostRedo:function(t){t._fireTagChanged(this,this.row)}}),D37=I1("DataSetRowTagsCommand",K2,{init:function(t,e,i){this._super(t),this.rows=e,this.tag=i},_doUndo:function(t,e,i){var n,s=e.rows,r=e.tags;for(n=s.length;n--;)t._rowTags[s[n]]=r[n];i.rows=s},_doPostUndo:function(t,e){t._fireTagsChanged(this,e.rows)},_doKeep:function(t,e){return{rows:e.rows}},_doRun:function(t,e,n){var s=t._rowTags,o=[],a=this.rows,h=this.tag;if(e&&(e.tags=[],this._setReady()),(null===a||a===c2)&&0<(cnt=t.rowCount()))for(i=0;i<cnt;i++)h!==s[i]&&(e&&e.tags.push(s[i]),s[i]=h,o.push(i));else if(a&&0<(cnt=a.length))for(i=0;i<cnt;i++)r=a[i],t._checkRowIndex(r,!0)&&h!==s[r]&&(e&&e.tags.push(s[r]),s[r]=h,o.push(r));return 0<o.length?(e&&(e.rows=o.slice()),n.list=o,!e&&this._doPostRun(t,n),o.length):this.throwEmpty(!1)},_doPostRun:function(t,e){var i=t.$_cmd(this);t._fireTagsChanged(i,e.list)},_doRedo:function(t,e,i){var n,s=e.rows;for(n=s.length;n--;)t._rowTags[s[n]]=this.tag;i.rows=s},_doPostRedo:function(t,e){t._fireTagsChanged(this,e.rows)}}),Q37=I1("DataUnsetRowTagsCommand",K2,{init:function(t,e,i){this._super(t),this.rows=e,this.tags=i},_doUndo:function(t,e,i){var n,s=e.rows,r=e.tags;for(n=s.length;n--;)t._rowTags[s[n]]=r[n];i.rows=s},_doPostUndo:function(t,e){t._fireTagsChanged(this,e.rows)},_doKeep:function(t,e){return{rows:e.rows}},_doRun:function(e,n,s){var o=e._rowTags,a=[],h=this.rows,l=this.tags;if(n&&(n.tags=[],this._setReady()),h&&l)for(i=0,cnt=h.length;i<cnt;i++)r=h[i],e._checkRowIndex(r,!0)&&(t=o[r],0<=l.indexOf(t)&&(n&&n.tags.push(t),o[r]=void 0,a.push(r)));else if(h)for(i=0,cnt=h.length;i<cnt;i++)r=h[i],e._checkRowIndex(r,!0)&&(t=o[r],void 0!==t&&(n&&n.tags.push(t),o[r]=void 0,a.push(r)));else if(l)for(i=0,cnt=o.length;i<cnt;i++)t=o[i],0<=l.indexOf(t)&&(n&&n.tags.push(t),o[i]=void 0,a.push(i));return 0<a.length?(n&&(n.rows=a.slice()),s.list=a,!n&&this._doPostRun(e,s),a.length):this.throwEmpty(!1)},_doPostRun:function(t,e){var i=t.$_cmd(this);t._fireTagsChanged(i,e.list)},_doRedo:function(t,e,i){var n,s=e.rows;for(n=s.length;n--;)t._rowTags[s[n]]=void 0;i.rows=s},_doPostRedo:function(t,e){t._fireTagsChanged(this,e.rows)}}),i8=I1("DataClearRowTagsCommand",K2,{init:function(t){this._super(t)},_doUndo:function(t,e,i){var n,s=e.rows,r=e.tags;for(n=s.length;n--;)t._rowTags[s[n]]=r[n];i.rows=s},_doPostUndo:function(t,e){t._fireTagsChanged(this,e.rows)},_doKeep:function(t,e){return this.Empty()},_doRun:function(t,e){var i,n,s=t._rowTags;if(e){for(e.rows=[],e.tags=[],i=0,n=s.length;i<n;i++)void 0!==s[i]&&(e.rows.push(i),e.tags.push(s[i]));if(e.rows.length<1)return this.throwEmpty(!1);this._setReady()}t._rowTags=new Array(t.rowCount()),!e&&this._doPostRun(t)},_doPostRun:function(t){var e=t.$_cmd(e,this);t._fireTagsCleared(e)},_doRedo:function(t,e){t._rowTags=new Array(t.rowCount())},_doPostRedo:function(t){t._fireTagsCleared(this)}}),x4=I1("GridDataSet",i2,{init:function(t,e){this._super(t,e),this._needAutoRestore=!1,this._tags=new O28(this),this._filterRuntime=new R27,this._rowCount=0,this._nextRowId=0,this._values=[],this._rowIds=[],this._rowStates=[],this._rowTags=[],this._orgValues=null,this._deletedCount=0,(this._setValueCmd=new p9(this)).undoable=!1,(this._insertRowCmd=new Z8(this)).undoable=!1},onRowInserting:E1,onRowInserted:E1,onRowsInserted:E1,onRowDeleting:E1,onRowDeleted:E1,onRowsDeleting:E1,onRowsDeleted:E1,onRowUpdating:E1,onRowUpdated:E1,onRowsUpdated:E1,onRowMoving:E1,onRowMoved:E1,onRowsMoving:E1,onRowsMoved:E1,onValueChanging:E1,onValueChanged:E1,onStateChanged:E1,onStatesChanged:E1,onTagChanged:E1,onTagsChanged:E1,filterRuntime:function(){return this._filterRuntime},getRowId:function(t){return this._rowIds[t]},getRowById:function(t){for(var e=this.rowCount();e--;)if(this._rowIds[e]==t)return e;return-1},addTag:function(t){this._tags.add(t)},removeTag:function(t){this._tags.remove(t)},setRowCount:function(t,e,i,n){e=1<arguments.length&&e,i=2<arguments.length?i:null,n=3<arguments.length?n:"none";var s=new v07(this,t,e,i,n);return this.undoable()?this.execute(s):s.execute({})},$_saveAll:function(t,e,i){return(e=e||{}).nextRowId=this._nextRowId,e.values=this._values,e.rowIds=this._rowIds,e.rowStates=this._rowStates,e.rowTags=this._rowTags,e.orgValues=this._orgValues,e.deletedCount=this._deletedCount,this._tags.$_saveRows(t,i2.ALL_ROWS,i),e},$_restoreAll:function(t,e,i){this._nextRowId=e.nextRowId,this._values=e.values,this._rowIds=e.rowIds,this._rowStates=e.rowStates,this._rowTags=e.rowTags,this._orgValues=e.orgValues,this._deletedCount=e.deletedCount,this._tags.$_restoreRows(t,i2.ALL_ROWS,i)},$_clearRows:function(){this._resetIdWhenClear&&(this._nextRowId=0),this._values=[],this._rowIds=[],this._rowStates=[],this._rowTags=[],this._orgValues=this._orgValues?[]:null,this._deletedCount=0,this._tags.clearRows()},clearRows:function(){var t=new q07(this);return this.undoable()?this.execute(t):t.execute({})},setRows:function(t,e,i,n,s){e=1<arguments.length?e:0,i=2<arguments.length?i:-1;var r=new w27(this,t,e,i,n,s);return this.undoable()?this.execute(r):r.execute({})},setXmlRows:function(t,e,i,n,s){this._checkClientState()&&(e=1<arguments.length?e:0,0!=(i=2<arguments.length?i:-1)&&(t=R0.xmlToArray(this,t,e,i),this.setRows(t,0,-1,n,s)))},appendRows:function(t,e,i,n,s){if(this._checkClientState())return t&&0<t.length&&!this.isAppendable()?0:(e=1<arguments.length?e:0,i=2<arguments.length?i:-1,n=3<arguments.length&&n,this.insertRows(this.rowCount(),t,e,i,n,s))},insertRows:function(t,e,i,n,s,r){i=2<arguments.length?i:0,n=3<arguments.length?n:-1,s=4<arguments.length&&s;var o=new z9(this,t,e,i,n,s,r);return this.undoable()?this.execute(o):o.execute({})},appendXmlRows:function(t,e,i,n){e=1<arguments.length?e:0,i=2<arguments.length?i:-1,this.insertXmlRows(this.rowCount(),t,e,i,n)},insertXmlRows:function(t,e,i,n,s){this._checkClientState()&&(i=2<arguments.length?i:0,n=3<arguments.length?n:-1,e=R0.xmlToArray(this,e,i,n),this.insertRows(t,e,i,n,s))},updateRows:function(t,e,i,n,s,r,o,a,h){i=2<arguments.length?i:0,n=3<arguments.length?n:-1;var l=new E27(this,t,e,i,n,s,r,o,a,h);return this.undoable()?this.execute(l):l.execute({})},updateXmlRows:function(t,e,i,n,s,r,o,a,h){this._checkClientState()&&this.isUpdatable()&&(i=2<arguments.length?i:0,n=3<arguments.length?n:-1,e=R0.xmlToArray(this,e,i,n),this.updateRows(t,e,i,n,s,r,o,a,h))},updateValues:function(t,e,i,n,s){var r=new T07(this,t,e,i,n,s);return this.undoable()?this.execute(r):r.execute({})},updateRow:function(t,e,i,n,s){var r=new B07(this,t,e,i,n,s);return this.undoable()?this.execute(r):r.execute({})},setValue:function(t,e,i){return this.undoable()?this.execute(new p9(this,t,e,i,!0,!0,!1)):this._checkClientState()?this._setValueCmd.$_run(this,t,e,i,!0,!0,!1):void 0},setValueEx:function(t,e,i,n,s,r){return this.undoable()?this.execute(new p9(this,t,e,i,n,s,r)):this._checkClientState()?this._setValueCmd.$_run(this,t,e,i,n,s,r):void 0},addRow:function(t){var e=this.rowCount();return this.insertRow(this._values.length,t)?e:-1},insertRow:function(t,e,i){var n=new Z8(this,t,e,i);return this.undoable()?this.execute(n):n.execute({})},appendRow:function(t,e){return this.insertRow(this.rowCount(),t,e)},$$_deleteRow:function(t,e){var i=this._rowStates[t];return this._rowIds[t],this._internalDeleteRow(t,e),j1.isDeleted(i)&&this._deletedCount--,this._tags.removeRow(t),!0},$_deleteRow:function(t,e){return!(!this._fireRowDeleting(t,e)||!this.$$_deleteRow(e)||(this._fireRowDeleted(t,e,this._rowIds[e]),this._fireRowCountChanged(t),0))},deleteRow:function(t){var e=new s07(this,t);return this.undoable()?this.execute(e):e.execute({})},deleteRows:function(t,e){var i=new f07(this,t,e);return this.undoable()?this.execute(i):i.execute({})},moveRow:function(t,e){var i=new u07(this,t,e);return this.undoable()?this.execute(i):i.execute({})},moveRows:function(t,e,i){var n=new g07(this,t,e,i);return this.undoable()?this.execute(n):n.execute({})},getRow:function(t){this._checkRowIndex(t);var e=this._values[t];return e?e.slice():[]},getValues:function(t){this._checkRowIndex(t);var e=this._values[t];return e?e.slice():[]},$_getRowProps:function(t,e,i,n){var s,r,o,a,h,l=this._values[t],u={};if(l)for(h=this._fields,s=e.length;s--;)r=e[s],0<=(o=n?n[s]:this.getFieldIndex(r))&&(a=l[o],u[r]=a===c2?i!==c2?i.hasOwnProperty(r)?i[r]:i:h[o]._emptyValue:a);return u},_getRowProps:function(t,e){var i,n,s,r={},o=this._values[t];if(o)for(i=e.length;i--;)n=e[i],0<=(s=this.getFieldIndex(n))&&(r[n]=o[s]);return r},getRowProps:function(t,e,i){return this._checkRowIndex(t),this.$_getRowProps(t,e,this.$_getEmptyValue(i))},$_getRowObject:function(t,e){var i,n,s,r,o,a,h={},l=this._values[t];if(l)for(r=this._fields,i=0,n=(o=this._fieldNames).length;i<n;i++)s=l[i],h[a=o[i]]=s===c2?e!==c2?e.hasOwnProperty(a)?e[a]:e:r[i]._emptyValue:s;return h},getRowObject:function(t,e){return this._checkRowIndex(t),this.$_getRowObject(t,this.$_getEmptyValue(e))},_getRowObject:function(t){var e,i,n,s={},r=this._values[t];if(r)for(e=0,i=(n=this._fieldNames).length;e<i;e++)s[n[e]]=r[e];return s},getOutputObject:function(t,e,i){e=this.getRowObject(e,i);return this.$_createOutputRows([e],t,e),e},copyToObject:function(t,e){var i,n=this._values[t],s=this._fields;if(n)for(i=s.length;i--;)e[s[i]._fieldName]=n[i];else for(i=s.length;i--;)e[s[i]._fieldName]=void 0;return e},getRows:function(t,e){var i,n,s,r,o,a=this._values,h=a.length,l=[];if(V1(t))for(i=0,n=t.length;i<n;i++)0<=(s=t[i])&&s<h&&l.push(a[s].concat()||[]);else if(t=0<arguments.length?t:0,e=1<arguments.length?e:h,r=Math.max(0,t),o=Math.min(h,t+e),r<h&&r<o)for(l=new Array(o-r),s=r;s<o;s++)l[s-r]=a[s].concat()||[];return l},getRowsProps:function(t,e,i,n){var s,r,o,a,h,l=this._values.length,u=[],d=[];for(s=0;s<t.length;s++)u.push(this.getFieldIndex(t[s]));if(n=this.$_getEmptyValue(n),V1(e))for(s=0,r=e.length;s<r;s++)0<=(h=e[s])&&h<l&&d.push(this.$_getRowProps(h,t,n,u));else if(e=1<arguments.length?e:0,i=2<arguments.length&&0<=i?i:l,o=Math.max(0,e),a=Math.min(l,e+i),o<l&&o<a)for(d=new Array(a-o),h=o;h<a;h++)d[h-o]=this.$_getRowProps(h,t,n,u);return d},getRowObjects:function(t,e,i){var n,s,r,o,a,h=this._values.length,l=[];if(i=this.$_getEmptyValue(i),V1(t))for(l=new Array(s=t.length),n=0;n<s;n++)0<=(a=t[n])&&a<h&&(l[n]=this.$_getRowObject(a,i));else if(t=0<arguments.length?t:0,e=1<arguments.length&&0<=e?e:h,r=Math.max(0,t),o=Math.min(h,t+e),r<h&&r<o)for(l=new Array(o-r),a=r;a<o;a++)l[a-r]=this.$_getRowObject(a,i);return l},getOutputObjects:function(t,e,i){var n=this.getRowObjects(e,i);return this.$_createOutputRows(n,t,e),n},getModifiedRowObjects:function(t,e,i,n,s){var r,o,a,h,l,u,d=e,c=this._rowStates,_=[];for(i=i=i||"row_state",V1(n)?3<=(u=n.length)&&(l={created:n[0],updated:n[1],deleted:n[2],createAndDeleted:3<u?n[3]:n[2]}):I4(n)&&((l=n).hasOwnProperty(j1.CREATE_AND_DELETED)||(l[j1.CREATE_AND_DELETED]=l[j1.CREATED])),s=this.$_getEmptyValue(s),r=0,o=c.length;r<o;r++)(a=c[r])&&"none"!=a&&(!t||a==t||0<=t.indexOf(a))&&(h=this.$_getRowObject(r,s),d&&d.call(this,this,r,h),i&&!h.hasOwnProperty(i)&&(h[i]=l?l[a]:a),_.push(h));return _},hasData:function(t){return 0<=t&&t<this._values.length&&void 0!==this._values[t]},hasAllData:function(){for(var t=this._values.length;t--;)if(!this._values[t])return!1;return!0},getValue:function(t,e){var i,n;return this._checkRowIndex(t),"string"==typeof e&&(i=e,(e=this.getFieldIndex(i))<0&&(e=Number(i))),this._checkFieldIndex(e,i),(n=this._values[t])?n[e]:void 0},getFieldValues:function(t,e,i){var n,s,r,o;if(e=1<arguments.length?e:0,(i=2<arguments.length?i:this.rowCount())<=0)return null;if((e=Math.max(0,e))>=this.rowCount())return null;for("string"==typeof t&&(t=this.getFieldIndex(t,!0)),this._checkFieldIndex(t),n=Math.min(this.rowCount(),e+i),s=new Array(n-e),r=e;r<n;r++)o=this._values[r],s[r-e]=o&&o[t];return s},findRow:function(t,e,i){var n=this.findRows(t,e,i,1);return 0<n.length?n[0]:-1},findRows:function(t,e,i,n){if(!t||t.length<1||!e||e.length<t.length)return null;var s,r,o,a,h,l,u=this.fieldCount(),d=[],c=[],_=[],f=[],g=this._values;for(n=isNaN(n)||n<=0?Q0:n,o=t.length,s=0;s<o;s++)0<=(r=this.getFieldIndexEx(t[s]))&&r<u&&d.indexOf(r)<0&&(d.push(r),c.push(this._fields[r]),_.push(e[s]));for(h=d.length,o=g.length,s=0;s<o&&f.length<n;s++){for(a=g[s],l=!0,r=0;r<h;r++){if(i&&!c[r].equalValues(_[r],a[d[r]])){l=!1;break}if(!i&&!c[r].sameValues(_[r],a[d[r]])){l=!1;break}}l&&f.push(s)}return f},filterRows:function(t,e){e=isNaN(e)||e<0?Q0:e;var i,n,s,o=[],a=this._values,h=a.length;if(b4(t))for(i=0;i<h&&(s=o.length)<e;i++)try{t(this,i,s)&&o.push(i)}catch(t){if(t instanceof q0)break;throw t}else if(t)for((n=new P8(t)).prepare(this.filterRuntime().prepare(this)),i=r=0;i<h&&(s=o.length)<e;i++)n.select(s,i,a[i])&&o.push(i);return o},objectToRow:function(t,e){var i,n,s;if(e=e||[],t)for(i=0,n=this._baseFieldCount;i<n;i++)s=this.getFieldName(i),t.hasOwnProperty(s)&&(e[i]=t[s]);return e},rowToObject:function(t,e){var i,n,s;if(e=e||{},V1(t))for(i=0,n=this._baseFieldCount;i<n;i++)void 0!==(s=t[i])&&(e[this.getFieldName(i)]=s);return e},equalValues:function(t,e,i){var n,s,r;return e===i||(n=this._fields[t],s=this.getValue(e,t),r=this.getValue(i,t),n.equalValues(s,r))},equalTexts:function(t,e,i){var n,s;return e===i||(n=this.getValue(e,t),s=this.getValue(i,t),null==n?null==s:null!=s&&n.toLowerCase()==s.toLowerCase())},sameValues:function(t,e,i){var n,s,r;return e===i||(n=this._fields[t],s=this.getValue(e,t),r=this.getValue(i,t),n.sameValues(s,r))},copyRows:function(t,e,i,n){},createActionGroup:function(t){return new k28(this,t)},rowCount:function(){return this._values.length},getOptions:function(){return this._super()},deletedCount:function(){return this._deletedCount},canUpdateRow:function(t){return this.isUpdatable()&&0<=t&&t<this.rowCount()},canAppendRow:function(){return this.isAppendable()},canInsertRow:function(t){return this.isInsertable()&&0<=t&&t<=this.rowCount()},canDeleteRow:function(t){return this.isDeletable()&&0<=t&&t<this.rowCount()},$_internalInsertField:function(t,e){if(0<=(t=this._super(t,e))){var i,n,s=this._values.length;for(i=0;i<s;i++)(n=this._values[i])&&n.length>t&&n.splice(t,0,void 0);if(this._orgValues)for(s=Math.min(s,this._orgValues.length),i=0;i<s;i++)(n=this._orgValues[i])&&0<n.length&&n.splice(t,0,void 0)}return t},$_internalClearFields:function(){x4.Base.$_internalClearFields.call(this),this.$_clearRows()},isUpdated:function(t,e){return this._checkRowIndex(t),this._checkFieldIndex(e),!(!this._orgValues||!this._orgValues[t]||this._fields[e].equalValues(this._orgValues[t][e],this._values[t][e]))},getRowTag:function(t){return this._rowTags[t]},getRowsByTag:function(t){var e,i,n=this._rowTags,s=[];if(t)for(e=0,i=n.length;e<i;e++)n[e]===t&&s.push(e);return s},getRowsByTags:function(t){var e,i,n=this._rowTags,s=[];if(t&&t.length)for(e=0,i=n.length;e<i;e++)0<=t.indexOf(n[e])&&s.push(e);return s},setRowTag:function(t,e){var i=new m37(this,t,e);return this.undoable()?this.execute(i):i.execute({})},setRowTags:function(t,e){var i=new D37(this,t,e);return this.undoable()?this.execute(i):i.execute({})},unsetRowTags:function(t,e){var i;return t=t&&0<t.length?t:null,e=e&&0<e.length?e:null,i=t||e?new Q37(this,t,e):new i8(this),this.undoable()?this.execute(i):i.execute({})},clearRowTags:function(){var t=new i8(this);return this.undoable()?this.execute(t):t.execute({})},getRowState:function(t){return this._checkRowIndex(t),this._rowStates[t]||j1.NONE},setRowState:function(t,e,i){var n=new r07(this,t,e,i);return this.undoable()?this.execute(n):n.execute({})},setRowStates:function(t,e,i,n){var s=new h07(this,t,e,i,n);return this.undoable()?this.execute(s):s.execute({})},clearRowStates:function(t,e,i){var n=new X07(this,t,e,i);return this.undoable()?this.execute(n):n.execute({})},getStateRows:function(t){var e,i,n=[];if(t)for(e=0,i=Math.min(this._values.length,this._rowStates.length);e<i;e++)this._rowStates[e]==t&&n.push(e);return n},getAllStateRows:function(){var t,e,i,n={},s=n.created=[],r=n.updated=[],o=n.deleted=[],a=n.createAndDeleted=[];for(t=0,e=Math.min(this._values.length,this._rowStates.length);t<e;t++)(i=this._rowStates[t])===j1.CREATED?s.push(t):i===j1.UPDATED?r.push(t):i===j1.DELETED?o.push(t):i===j1.CREATE_AND_DELETED&&a.push(t);return n},getRowStateCount:function(t){var e,i,n=t?t.length:0,s=Math.min(this._values.length,this._rowStates.length),r=0;if(n&&s)if(1<n)for(e=0;e<s;e++)i=this._rowStates[e],0<=t.indexOf(i)&&r++;else for(i=t[0],e=0;e<s;e++)this._rowStates[e]===i&&r++;return r},$_restoreState:function(t){var e,i,n,s,r,o=this._orgValues[t],a=this._values[t];if(a&&o){for(r=this.strictRestore(),e=0,i=this._fields.length;e<i;e++)if(n=a.length>e?a[e]:void 0,s=o.length>e?o[e]:void 0,r){if(!this._fields[e].equalValues(n,s))return!1}else if(!this._fields[e].sameValues(n,s))return!1;return this._rowStates[t]=j1.NONE,delete this._orgValues[t],!0}return!1},restoreUpdatedStates:function(t){var e=new A37(this,t);return this.undoable()?this.execute(e):e.execute({})},$_restoreUpdated:function(t,e){var i,n,s,r=this.$$_orgVals=this._orgValues[t];if(r){if(i=this._values[t],e&&(this.$$_oldVals=i&&i.concat()),r)for(this._values[t]=i=i||[],n=0,s=this._fields.length;n<s;n++)i[n]=r[n];return this._derivedFieldCount&&this.$_deriveValues(t,i,-1),this._rowStates[t]=j1.NONE,delete this._orgValues[t],!0}return!1},restoreUpdatedRows:function(t){var e=new b37(this,t);return this.undoable()?this.execute(e):e.execute({})},_doGetDistinctValues:function(t,e){var i,n,s,r,o,a,h=[];if(e<0&&(e=this._values.length),0<e){for(this.getField(t).dataType(),a1.NUMBER,s=(i=new Array(this._values.length)).length;s--;)i[s]=s;for(a=this.getComparer(t).bind(this),this.$_sortRows(i,t,a,0,i.length-1),n=this._values[i[0]],h.push(n?n[t]:void 0),s=1,r=i.length;s<r&&!(a(t,i[s-1],i[s])<0&&(o=(n=this._values[i[s]])?n[t]:void 0,h.push(o),h.length>=e));s++);}return h},compareValues:function(t,e,i){var n,s,r=this._values[e],o=this._values[i];return r===o?0:(n=r?r[t]:null,s=o?o[t]:null,null==n?null==s?0:-1:null==s?1:s<n?1:n<s?-1:0)},compareTexts:function(t,e,i){var n=this._values[e],s=this._values[i];if(n===s)return 0;var r=n?n[t]:null,o=s?s[t]:null;return null==r?null==o?0:-1:null==o?1:(r=String(r).toLocaleLowerCase(),(o=String(o).toLocaleLowerCase())<r?1:r<o?-1:0)},compareNumbers:function(t,e,i){var n,s,r=this._values[e],o=this._values[i];return r===o?0:(n=r?r[t]:NaN,s=o?o[t]:NaN,isNaN(n)?isNaN(s)?0:-1:isNaN(s)?1:s<n?1:n<s?-1:0)},compareDates:function(t,e,i){var n,s,r=this._values[e],o=this._values[i];return r===o?0:(n=r?r[t]:null,s=o?o[t]:null,n instanceof Date?s instanceof Date?s<n?1:n<s?-1:0:1:s instanceof Date?-1:0)},compareBools:function(t,e,i){var n,s,r=this._values[e],o=this._values[i];return r===o?0:(n=r?r[t]:void 0,s=o?o[t]:void 0,void 0===n||void 0===s?n===s?0:void 0===n?-1:1:n&&!s?1:!n&&s?-1:0)},compareObjs:function(t,e,i){var n,s,r,o=this._values[e],a=this._values[i];return o===a?0:(n=o?o[t]:null,s=a?a[t]:null,n?s?((r=this.getField(t))._compareCallback||r.$_compareObjs)(n,s):1:s?-1:0)},aggregate:function(t,e){if(null==t)return!1;t.clear();var i=this.rowCount();if(i<1)return!1;var n,s,r,o,a,h=0,l=t.field,u=0,d=NaN,c=NaN;for(r=0;r<i;)if(s=(n=this._values[r++])?n[l]:NaN,!isNaN(s)){u=d=c=s,h++;break}for(;r<i;)s=(n=this._values[r++])?n[l]:NaN,isNaN(s)||(u+=s,s<d?d=s:c<s&&(c=s),h++);if(t.count=i,0<h){if(t.sum=u,t.min=d,t.max=c,t.avg=u/i,e){for(o=0,a=t.avg,r=0;r<i;r++)s=(n=this._values[r])?n[l]:NaN,isNaN(s)||(o+=Math.pow(s-a,2));t.varsp=o/i,t.vars=o/(i-1)}else t.varsp=NaN,t.vars=NaN;this._fields[l]._dataType===a1.DATETIME&&(t.min=new Date(t.min),t.max=new Date(t.max))}return!0},aggregateRange:function(t,e,i){if(null==t||null==e)return!1;t.clear();var n=e.length;if(n<1)return!1;var s,r,o,a,h,l=0,u=t.field,d=this._values,c=0,_=NaN,f=NaN;for(s=0;s<n;)if(o=(r=d[e[s++]])?r[u]:NaN,!isNaN(o)){c=_=f=o,l++;break}for(;s<n;)o=(r=d[e[s++]])?r[u]:NaN,isNaN(o)||(c+=o,o<_&&(_=o),f<o&&(f=o),l++);if(t.count=n,0<l){if(t.sum=c,t.min=_,t.max=f,t.avg=c/n,i){for(a=0,h=t.avg,s=0;s<n;s++)o=(r=d[e[s]])?r[u]:NaN,isNaN(o)||(a+=Math.pow(o-h,2));t.varsp=a/n,t.vars=a/(n-1)}else t.varsp=NaN,t.vars=NaN;this._fields[u]._dataType===a1.DATETIME&&(t.min=new Date(t.min),t.max=new Date(t.max))}return!0},exportToJson:function(t,e,i,n){e=1<arguments.length?e:0,i=2<arguments.length?i:this.rowCount();var s=this.getRowObjects(e,i,n);return s&&0<s.length&&t&&(t instanceof u0||(t=new u0(t)),this.$_createOutputRows(s,t,e)),s},exportToCsv:function(t,e,i){if(e=1<arguments.length?e:0,0<(i=2<arguments.length?i:this.rowCount())){t instanceof u0||(t=new u0(t));var n=Math.max(0,Math.min(this.rowCount(),e+i));if(e<n)return this.$_createOutputLines(this._values,t,e,n)}return null},exportToXml:function(t,e,i){},_doCheckStatesChanged:function(){this.$_resetOrgValues()},_doRestoreModeChanged:function(t,e){this.$_resetOrgValues()},copyRows:function(t,e,i,n){this._checkRowIndex(t);var s,r,o,a,h,l,u,d,c=this._values.length;if(!((e=Math.max(0,Math.min(e,c-t)))<1||c<i)){for(d=[],s=0;s<c;s++){for(r=this._values[s+t],o=[],a=0,h=this._fields.length;a<h;a++)l=r[a],this._fields[a].dataType()==a1.DATE?o[a]=typeof l==Date?new Date(l):l:o[a]=l;d.push(o)}u=this._checkStates,n&&(this._checkStates=!1);try{this.insertRows(i,d)}finally{this._checkStates=u}}},tags:function(){return this._tags},isEventLocked:function(){return 0<this._eventLock},_checkRowIndex:function(t,e){if(isNaN(t)||t!=parseInt(t)||t<0||t>=this._values.length){if(e)return!1;throw new RangeError("Row is out of bounds: "+t)}return!0},$_resetOrgValues:function(){var t=this.restoreMode();this._orgValues=!this._checkStates||t!=f3.AUTO&&t!=f3.EXPLICIT?null:[],this._needAutoRestore=this._orgValues&&t==f3.AUTO},_arrayToRow:function(t){var e,i=Math.min(t?t.length:0,this._baseFieldCount),n=new Array(i);for(e=0;e<i;e++)n[e]=this._fields[e].loadValue(t[e]);return n},_internalInsertRow:function(t,e,i){var n=this._arrayToRow(e),s=t==this._values.length;this._derivedFieldCount&&this.$_deriveValues(t,n,0<=i?i:-1),s?(this._values.push(n),this._rowIds.push(this._nextRowId++),this._rowTags.push(void 0)):(this._values.splice(t,0,n),this._rowIds.splice(t,0,this._nextRowId++),this._rowTags.splice(t,0,void 0)),s?this._rowStates.push(this._checkStates?j1.CREATED:j1.NONE):(this._rowStates.splice(t,0,this._checkStates?j1.CREATED:j1.NONE),this._orgValues&&this._orgValues.splice(t,0,void 0))},_internalSetRow:function(t,e){var i=this._arrayToRow(e);this._derivedFieldCount&&this.$_deriveValues(t,i,-1),this._values[t]=i,this._rowIds[t]=this._nextRowId++,this._rowTags[t]=void 0},_xmlToRow:function(t){},_internalInsertXmlRow:function(t,e,i,n){},_internalSetXmlRow:function(t,e,i){},_internalUpdateRow:function(t,e,i,n,s,r,o,a){var h,l,u,d,c,_,f=this._fields,g=a?f.length:Math.min(f.length,i.length),m=this._values[e],p=this._rowStates[e],w=p==j1.CREATED||p==j1.CREATE_AND_DELETED,v=this._checkStates&&(p==j1.NONE||!p),C=!1;for(this.$$_oldVals=m&&m.concat(),m||(this._values[e]=m=[]),v&&this._orgValues&&(h=this.$$_oldVals),l=0;l<g;l++)((u=f[l])._updatable||w)&&(a?(_=u.fieldName(),i.hasOwnProperty(_)?d=i[_]:_=null):d=i[l],a&&!_||r&&void 0===d||(d=u.readValue(d),(c=!n)||(c=s?!u.equalValues(d,m[u._index]):!u.sameValues(d,m[u._index])),c&&(m[l]=d,C=!0)));return C&&(this._derivedFieldCount&&this.$_deriveValues(e,m,-1),v?(h&&(this._orgValues[e]=h),this._changeRowState(t,e,j1.UPDATED,o)):this._needAutoRestore&&p==j1.UPDATED&&this.$_restoreState(e)),C},_internalUpdateValues:function(t,e,i,n,s,r,o,a,h){i=i||this._fields;var l,u,d,c,_,f=Math.min(i.length,n.length),g=this._values[e],m=this._rowStates[e],p=m==j1.CREATED||m==j1.CREATE_AND_DELETED,w=!h&&this._checkStates&&(m==j1.NONE||!m),v=!1;for(g||(this._values[e]=g=[]),this.$$_oldVals=g.concat(),w&&this._orgValues&&(_=this.$$_oldVals),l=0;l<f;l++)((u=i[l])._updatable||p)&&(d=n[l],o&&void 0===d||(b4(d)&&(d=d(this,e,u._index)),d=u.readValue(d),(c=!s)||(c=r?!u.equalValues(d,g[u._index]):!u.sameValues(d,g[u._index])),c&&(g[u._index]=d,v=!0)));return v&&(this._derivedFieldCount&&this.$_deriveValues(e,g,-1),w?(_&&(this._orgValues[e]=_),this._changeRowState(t,e,j1.UPDATED,a)):this._needAutoRestore&&m==j1.UPDATED&&this.$_restoreState(e)),v},_internalUpdateXmlRow:function(t,e,i,n,s,r){},$_saveRow:function(t,e){return e.row=t,e.values=this._values[t],e.id=this._rowIds[t],e.state=this._rowStates[t],this._orgValues&&this._orgValues.length>t&&(e.orgValues=this._orgValues[t]),e.tag=this._rowTags[t],e},_internalDeleteRow:function(t,e){e&&this.$_saveRow(t,e),this._values.splice(t,1),this._rowIds.splice(t,1),this._orgValues&&this._orgValues.length>t&&this._orgValues.splice(t,1),this._rowStates.splice(t,1),this._rowTags.splice(t,1)},_internalMoveRow:function(t,e){var i=this._values.splice(t,1)[0],n=this._rowIds.splice(t,1)[0],s=this._rowStates.splice(t,1)[0],r=this._rowTags.splice(t,1)[0];this._values.splice(e,0,i),this._rowIds.splice(e,0,n),this._rowStates.splice(e,0,s),this._rowTags.splice(e,0,r),this._orgValues&&(this._orgValues.length=Math.max(this._orgValues.length,t+1,e+1),i=this._orgValues.splice(t,1)[0],this._orgValues.splice(e,0,i))},_internalMoveRows:function(t,e,i){var n,s,r=this._values.splice(t,e),o=this._rowIds.splice(t,e),a=this._rowStates.splice(t,e),h=this._rowTags.splice(t,e);for(n=0;n<e;n++)s=i+n,this._values.splice(s,0,r[n]),this._rowIds.splice(s,0,o[n]),this._rowStates.splice(s,0,a[n]),this._rowTags.splice(s,0,h[n]);if(this._orgValues)for(this._orgValues.length=Math.max(this._orgValues.length,t+e,i+e),r=this._orgValues.splice(t,e),n=0;n<e;n++)this._orgValues.splice(i+n,0,r[n])},_changeRowState:function(t,e,i,n,s,r){if(this._checkStates||s){var o=this._rowStates[e];if((i=i||j1.NONE)!=o)return this._rowStates[e]=i,r&&(!j1.isDeleted(o)&&j1.isDeleted(i)?this._deletedCount++:j1.isDeleted(o)&&!j1.isDeleted(i)&&this._deletedCount--),n&&this._fireStateChanged(t,e,o),!0}return!1},$_prepareOrgValues:function(t,e,i){i==j1.UPDATED?this._orgValues[t]=this._values[t]?this._values[t].concat():[]:e==j1.UPDATED&&this._orgValues[t]&&(this._orgValues[t]=void 0)},_changeRowStateEx:function(t,e,i,n,s){var r=this._rowStates[e];return!!this._changeRowState(t,e,i,!1,s,!0)&&(this._orgValues&&this.$_prepareOrgValues(e,r,i),n&&this._fireStateChanged(t,e,r),!0)},_doRecalcAll:function(){var t,e=this._values,i=e.length;if(0<i)for(t=0;t<i;t++)this.$_deriveValues(t,e[t],-1);return i},_doRecalcRows:function(t){var e,i,n=this._values,s=0,r=t.length;for(e=0;e<r;e++)0<=(i=t[e])&&i<n.length&&n[i]&&(this.$_deriveValues(i,n[i],-1),s++);return s},_doRecalcRow:function(t){var e=this._values;return 0<=t&&t<e.length&&e[t]?(this.$_deriveValues(t,e[t],-1),1):0},_fireRowInserting:function(t,e,i){if(this._eventLock<=0){this.$$_cmd=t;var n=this.fireConfirmEvent(x4.ROW_INSERTING,e,i);return n&&this.onRowInserting&&(n=!1!==this.onRowInserting(this,e,i)),n}return!0},_fireRowInserted:function(t,e){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(x4.ROW_INSERTED,e),this.onRowInserted&&(!this._onStack||this._eventable)&&this.onRowInserted(this,e),this.$$_cmd=t,this.fireEvent(i2.DATA_CHANGED),this.onDataChanged&&this.onDataChanged(this))},_fireRowsInserting:function(t,e,i,n,s){if(this._eventLock<=0){this.$$_cmd=t;var r=this.fireConfirmEvent(x4.ROWS_INSERTING,e,i,n,s);return r&&this.onRowsInserting&&(r=!1!==this.onRowsInserting(this,e,i,n,s)),r}return!0},_fireRowsInserted:function(t,e,i){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(x4.ROWS_INSERTED,e,i),this.onRowsInserted&&(!this._onStack||this._eventable)&&this.onRowsInserted(this,e,i),this.$$_cmd=t,this.fireEvent(i2.DATA_CHANGED),this.onDataChanged&&this.onDataChanged(this))},_fireRowDeleting:function(t,e){if(this._eventLock<=0){this.$$_cmd=t;var i=this.fireConfirmEvent(x4.ROW_DELETING,e);return i&&this.onRowDeleting&&(i=!1!==this.onRowDeleting(this,e)),i}return!0},_fireRowDeleted:function(t,e,i){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(x4.ROW_DELETED,e,i),this.onRowDeleted&&(!this._onStack||this._eventable)&&this.onRowDeleted(this,e,i),this.$$_cmd=t,this.fireEvent(i2.DATA_CHANGED),this.onDataChanged&&this.onDataChanged(this))},_fireRowsDeleting:function(t,e){if(this._eventLock<=0){var i=this.fireConfirmEvent(x4.ROWS_DELETING,e);return i&&this.onRowsDeleting&&(i=!1!==this.onRowsDeleting(this,e)),i}return!0},_fireRowsDeleted:function(t,e){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(x4.ROWS_DELETED,e),this.onRowsDeleted&&(!this._onStack||this._eventable)&&this.onRowsDeleted(this,e),this.$$_cmd=t,this.fireEvent(i2.DATA_CHANGED),this.onDataChanged&&this.onDataChanged(this))},_fireRowUpdating:function(t,e,i){if(this._eventLock<=0){var n=this.fireConfirmEvent(x4.ROW_UPDATING,e,i);return n&&this.onRowUpdating&&(n=!1!==this.onRowUpdating(this,e,i)),n}return!0},_fireRowUpdated:function(t,e){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(x4.ROW_UPDATED,e),this.onRowUpdated&&(!this._onStack||this._eventable)&&this.onRowUpdated(this,e),this.$$_cmd=t,this.fireEvent(i2.DATA_CHANGED),this.onDataChanged&&this.onDataChanged(this))},_fireRowsUpdating:function(t,e,i,n,s){if(this._eventLock<=0){this.$$_cmd=t;var r=this.fireConfirmEvent(x4.ROWS_UPDATING,e,i,n,s);return r&&this.onRowsUpdating&&(r=!1!==this.onRowsUpdating(this,e,i,n,s)),r}return!0},_fireValuesUpdating:function(t,e,i){if(this._eventLock<=0){this.$$_cmd=t;var n=this.fireConfirmEvent(x4.VALUES_UPDATING,e,i);return n&&this.onValuesUpdating&&(n=!1!==this.onValuesUpdating(this,e,i)),n}return!0},_fireRowsUpdated:function(t,e){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(x4.ROWS_UPDATED,e),this.onRowsUpdated&&(!this._onStack||this._eventable)&&this.onRowsUpdated(this,e),this.$$_cmd=t,this.fireEvent(i2.DATA_CHANGED),this.onDataChanged&&this.onDataChanged(this))},_fireRowMoving:function(t,e,i){if(this._eventLock<=0){this.$$_cmd=t;var n=this.fireConfirmEvent(x4.ROW_MOVING,e,i);return n&&this.onRowMoving&&(n=!1!==this.onRowMoving(this,e,i)),n}return!0},_fireRowMoved:function(t,e,i){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(x4.ROW_MOVED,e,i),this.onRowMoved&&(!this._onStack||this._eventable)&&this.onRowMoved(this,e,i),this.$$_cmd=t,this.fireEvent(i2.DATA_CHANGED),this.onDataChanged&&this.onDataChanged(this))},_fireRowsMoving:function(t,e,i,n){if(this._eventLock<=0){this.$$_cmd=t;var s=this.fireConfirmEvent(x4.ROWS_MOVING,e,i,n);return s&&this.onRowsMoving&&(s=!1!==this.onRowsMoving(this,e,i,n)),s}return!0},_fireRowsMoved:function(t,e,i,n){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(x4.ROWS_MOVED,e,i,n),this.onRowsMoved&&(!this._onStack||this._eventable)&&this.onRowsMoved(this,e,i,n),this.$$_cmd=t,this.fireEvent(i2.DATA_CHANGED),this.onDataChanged&&this.onDataChanged(this))},fireValueChanging:function(t,e,i,n){if(this._eventLock<=0){this.$$_cmd=t;var s=this.fireConfirmEvent(x4.VALUE_CHANGING,e,i,n);return s&&this.onValueChanging&&(s=!1!==this.onValueChanging(this,e,i,n)),s}return!0},_fireValueChanged:function(t,e,i){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(x4.VALUE_CHANGED,e,i),this.onValueChanged&&(!this._onStack||this._eventable)&&this.onValueChanged(this,e,i)||this.onRowUpdated&&(!this._onStack||this._eventable)&&this.onRowUpdated(this,e,i),this.$$_cmd=t,this.fireEvent(i2.DATA_CHANGED),this.onDataChanged&&this.onDataChanged(this))},_fireStateChanged:function(t,e,i){if(this._eventLock<=0){var n=t&&t.$_updating();this.$$_cmd=t,this.fireEvent(x4.STATE_CHANGED,e,i,n),this.onStateChanged&&(!this._onStack||this._eventable)&&this.onStateChanged(this,e,i,n)}},_fireStatesChanged:function(t,e,i){if(this._eventLock<=0){var n=t&&t.$_updating();this.$$_cmd=t,this.fireEvent(x4.STATES_CHANGED,e,i,n),this.onStatesChanged&&(!this._onStack||this._eventable)&&this.onStatesChanged(this,e,i,n)}},_fireTagChanged:function(t,e){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(x4.TAG_CHANGED,e),this.onTagChanged&&(!this._onStack||this._eventable)&&this.onTagChanged(this,e))},_fireTagsChanged:function(t,e){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(x4.TAGS_CHANGED,e),this.onTagsChanged&&(!this._onStack||this._eventable)&&this.onTagsChanged(this,e))}},null,function(t){t.ROW_COUNT_CHANGED="onGridDataSetRowCountChanged",t.ROW_INSERTING="onGridDataSetRowInserting",t.ROW_INSERTED="onGridDataSetRowInserted",t.ROWS_INSERTING="onGridDataSetRowsInserting",t.ROWS_INSERTED="onGridDataSetRowsInserted",t.ROW_DELETING="onGridDataSetRowDeleting",t.ROW_DELETED="onGridDataSetRowDeleted",t.ROWS_DELETING="onGridDataSetRowsDeleting",t.ROWS_DELETED="onGridDataSetRowsDeleted",t.ROW_UPDATING="onGridDataSetRowUpdating",t.ROW_UPDATED="onGridDataSetRowUpdated",t.ROWS_UPDATING="onGridDataSetRowsUpdating",t.VALUES_UPDATING="onGridDataSetValuesUpdating",t.ROWS_UPDATED="onGridDataSetRowsUpdated",t.VALUE_CHANGING="onGridDataSetValueChanging",t.VALUE_CHANGED="onGridDataSetValueChanged",t.ROW_MOVING="onGridDataSetRowMoving",t.ROW_MOVED="onGridDataSetRowMoved",t.ROWS_MOVING="onGridDataSetRowsMoving",t.ROWS_MOVED="onGridDataSetRowsMoved",t.STATE_CHANGED="onGridDataSetStateChanged",t.STATES_CHANGED="onGridDataSetStatesChanged",t.TAG_CHANGED="onGridDataSetTagChanged",t.TAGS_CHANGED="onGridDataSetTagsChanged"}),l0=I1("DataPath",null,{init:function(){this._super()}},{extractJson:function(t,e,i){var n,s,r,o,a,h,l,u,d=t;if(e=e&&e.trim(e))if(0<=e.indexOf("."))for(n=e.split("."),s=0;s<n.length&&(!(r=n[s]&&n[s].trim())||(o=r.indexOf("["),a=r.lastIndexOf("]"),0<o&&o<a?(l="$"!=(h=r.substring(0,o))?d[h]:d,d=V1(l)?(h=r.substring(o+1,a),0<=(u=parseInt(h))&&u<l.length?l[u]:null):null):"$"!=r&&(d=d[r]),d));s++);else d=d[e];return i||V1(d)?d:null},extractXml:function(t,e){var i=null;if(e=e&&e.trim())for(var n=e.split("."),s=0;s<n.length;s++){var r=n[s]&&n[s].trim();if(r){var o=r.indexOf("["),a=r.lastIndexOf("]");if(0<o&&o<a){var h=r.substring(0,o);(i=X9(i?i[0]:t,h))&&(h=r.substring(o+1,a),i=i[parseInt(h)])}else i=X9(i?i[0]:t,r);if(!i)break}}return i}}),V8=I1("DataLoader",null,{init:function(t){C4.init.call(this),this._provider=t,this._filter=null},load:function(t,e,i){if(i instanceof K17||(i=new K17(i)),this.$_checkEmpty(e,i))return 0;this.$_prepareLoad(i),t=t&&t.toLowerCase();try{switch(t){case"json":return this.$_loadJson(e,i,this._filter);case"xml":return this.$_loadXml(e,i,this._filter);case"csv":return this.$_loadCsv(e,i,this._filter)}}finally{var n=p4(i.callback);n&&n(this._provider)}return 0},$_loadJson:function(t,e,i){"string"==typeof t&&(t=JSON.parse(t));var n;if(n=e.rows?l0.extractJson(t,e.rows):j0(t)){var s=e.fillPos,r=e.start,o=e.count;switch(e.fillMode){case n4.APPEND:this._provider.appendRows(n,r,o);break;case n4.INSERT:this._provider.insertRows(s,n,r,o);break;case n4.UPDATE:this._provider.updateRows(s,n,r,o);break;case n4.SET:default:this._provider.setRows(n,r,o,null,i)}return n.length}return this.$_fillEmpty(e),0},$_loadXml:function(t,e,i){if("string"==typeof t&&(t=r9(t)),t&&t.documentElement){var n=e.fillPos,s=e.start,r=e.count,o=e.rows||"row",a=l0.extractXml(t.documentElement,o);switch(e.fillMode){case n4.APPEND:this._provider.appendXmlRows(a,s,r);break;case n4.INSERT:this._provider.insertXmlRows(n,a,s,r);break;case n4.UPDATE:this._provider.updateXmlRows(n,a,s,r);break;case n4.SET:default:this._provider.setXmlRows(a,s,r,null,i)}return a.length}return this.$_fillEmpty(e),0},$_loadCsv:function(t,e,i){var n=e.fillPos,s=e.start,r=e.count,o=e.quoted,a=e.trim,h=e.currency,l=e.delimiter,u=R0.csvToArray(this._provider,t,s,r,o,a,l,h);if(u&&0<(r=u.length)){switch(e.fillMode){case n4.APPEND:this._provider.appendRows(u,0,r,!1,i);break;case n4.INSERT:this._provider.insertRows(n,u,0,r,!1,i);break;case n4.UPDATE:this._provider.updateRows(n,u,0,r,!1,!1,!1,!1,i);break;case n4.SET:default:this._provider.setRows(u,0,r,null,i)}return u.length}return this.$_fillEmpty(e),0},$_fillEmpty:function(t){t.fillMode===n4.SET&&this._provider.setRows(null)},$_checkEmpty:function(t,e){return!t&&(this.$_fillEmpty(e),!0)},$_prepareLoad:function(t){t.filter&&(this._filter=new P8(t.filter))}}),n9=1,S58=2,l9=4,a58=8,K27=16,U28=4294901760,$$_grid_item_id=0,g2=I1("GridRow",null,{init:function(){this._super(!0),this._id=$$_grid_item_id++,this._index=-1,this._parent=null,this._viewExts={}},id:function(){return this._id},index:function(){return this._index},parent:function(){return this._parent},parentIndex:function(){return this._parent?this._parent._index:-1},root:function(){var t,e;for(t=e=this;t=t._parent;)e=t;return e},childIndex:function(){return this._parent?this._parent.indexOf(this):-1},level:function(){return this._parent?this._parent.level()+1:0},leaf:function(){return!0},isLeaf:function(){return!0},visible:function(){return this._parent&&0<=this._index},dataState:function(){var t=this.dataIndex();if(0<=t){var e=this.dataSource();return e?e.getRowState(t):j1.NONE}return j1.NONE},rowState:function(){return T1.NORMAL},next:function(){return this._parent&&this._parent.getNext(this)},prev:function(){return this._parent&&this._parent.getPrev(this)},displayLevel:function(){return this.level()},provider:function(){return this._parent?this._parent.provider():null},dataSource:function(){return this._parent?this._parent.dataSource():null},dataIndex:function(){return-1},dataId:function(){return-1},dataTag:function(){},isEditing:function(){return!1},copyToObject:function(t){},getAncestor:function(t){if(t<this.level()){for(var e=this._parent;e.level()>t;)e=e._parent;return e}return null},getAncestors:function(){var t=null,e=this._parent;if(e)for(t=[];t.push(e),e=e._parent;);return t},isDescendantOf:function(t){if(t){for(var e=this._parent;e&&e!=t;)e=e._parent;return e===t}return!1},getSiblings:function(t){var e,i,n,s,r,o=this._parent;if(o){for(i=[],n=0,s=(e=o._children).length;n<s;n++)(r=e[n])!==this&&(!t||0<=r.dataIndex())&&i.push(r);return i}return null},getUncles:function(t){return this._parent&&this._parent.getSiblings(t)},getValue:function(t){var e=this.dataSource();if(e&&0<=this.dataIndex())return e.getValue(this.dataIndex(),t)},setValue:function(t,e){var i=this.dataSource();i&&0<=this.dataIndex()&&i.setValue(this.dataIndex(),t,e)},getRowData:function(){var t=this.dataIndex();if(0<=t){var e=this.dataSource();if(e)return e.getRow(t)}return null},getRowObject:function(){},getRowProps:function(t){},setRowProps:function(t,e,i,n){},canEdit:function(){return!1},makeVisible:function(){this._parent&&(this._parent.makeVisible(),this._parent.setExpanded(!0))},checkExpanded:function(){},merged:function(){return!1},$_dataKey:function(){return this.dataIndex()},setIndex:function(t){this._index=t},$_isChecked:function(t){return 0!=(this._viewExts[t.$_hash]&n9)},$_setChecked:function(t,e){var i=t.$_hash,n=this._viewExts[i];if(n){if(e!=(0!=(n&n9)))return this._viewExts[i]=e?n|n9:n&~n9,!0}else if(e)return this._viewExts[i]=n9,!0;return!1},$_saveChecked:function(t,e,i,n){var s;this.$_isChecked(e)&&(s=e.$_hash+"_"+i,t.set(s,!0),n&&(s+="_ex",t.set(s,!0))),this.$_isCheckable(e)||(s=e.$_hash+"_c_"+i,t.set(s,!0))},$_restoreChecked:function(t,e,i,n){var s=e.$_hash+"_"+i;t.get(s)&&(t.unset(s),s+="_ex",t.get(s)&&(t.unset(s),n.call(e)),this.$_setChecked(e,!0)),s=e.$_hash+"_c_"+i,t.get(s)&&(t.unset(s),this.$_setCheckable(e,!1))},$_isCheckable:function(t){return 0==(this._viewExts[t.$_hash]&l9)},$_setCheckable:function(t,e){var i=this._viewExts[t.$_hash];if(i){if(e!=(0==(i&l9)))return this._viewExts[t.$_hash]=e?i&~l9:i|l9,!0}else if(!e)return this._viewExts[t.$_hash]=l9,!0;return!1},$_height:function(t){var e=this._viewExts[t.$_hash];return e&K27?(e&U28)>>>16:NaN},$_setHeight:function(t,e){e=parseInt(e),isNaN(e)?this._viewExts[t.$_hash]&=~K27:this._viewExts[t.$_hash]=Math.min(65535,e)<<16|65535&this._viewExts[t.$_hash]|K27},$_saveExpanded:function(t,e,i){var n;this.expanded()&&(n=e.$_hash+"_exp_"+i,t.set(n,!0))},$_restoreExpanded:function(t,e,i){var n=e.$_hash+"_"+i;t.get(n)&&(t.unset(n),this.setExpanded(!0))},isEditable:function(){return!1},isReadOnly:function(){return 0!=(this._extents&EXT_READONLY)},setReadOnly:function(t){this._extents=t?this._extents|EXT_READONLY:this._extents&~EXT_READONLY},isResizable:function(){return!1}},{$_ALL:{}}),v4=I1("DataRow",g2,{init:function(t){this._super(),this._dataIndex=t,this._displayLevel=-1},$_dataKey:function(){return this._dataIndex},dataIndex:function(){return this._dataIndex},dataId:function(){return this.dataSource().getRowId(this._dataIndex)},dataTag:function(){return this.dataSource().getRowTag(this._dataIndex)},isEditable:function(){return!0},isResizable:function(){return!0},displayLevel:function(){return 0<=this._displayLevel?this._displayLevel:this.level()},canEdit:function(){return!0},getValue:function(t){return this.dataSource().getValue(this._dataIndex,t)},setValue:function(t,e){this.dataSource().setValue(this._dataIndex,t,e)},getRowObject:function(){var t=this.dataSource();return t?t._getRowObject(this._dataIndex):null},getRowProps:function(t){var e=this.dataSource();return e?e._getRowProps(this._dataIndex,t):null},setRowProps:function(t,e,i,n){var s=this.dataSource();s&&s.updateRow(this._dataIndex,t,e,i,n)},copyToObject:function(t){var e=this.dataSource();e&&e.copyToObject(this._dataIndex,t)}}),j2=I1("GroupRow",g2,{init:function(){this._super(),this._children=[],this._descendantCount=0,this._descendantRowCount=0,this._summaries=void 0,this._summarized=void 0,this._rows=null},expanded:!1,collapsed:!0,count:function(){return this._children.length},children:function(){return this._children.slice()},setExpanded:function(t){t!=this._expanded&&(t?this.provider().expand(this,!1,!1):this.provider().collapse(this,!1))},collapsed_:function(){return!this.expanded()},setCollapsed:function(t){this.setExpanded(!t)},footer:function(){return null},first:function(){return 0<this._children.length?this._children[0]:null},last:function(){var t=this._children.length;return 0<t?this._children[t-1]:null},firstLeaf:function(){if(0<this._children.length){var t=this._children[0];return t instanceof j2?t.firstLeaf():t}return null},lastLeaf:function(){var t=this._children.length;if(0<t){var e=this._children[t-1];return e instanceof j2?e.lastLeaf():e}return null},descendantCount:function(){return this._descendantCount},descendantDataCount:function(){return this._descendantCount},descendantRowCount:function(){return this._descendantRowCount},firstVisibleItem:function(){for(var t=0,e=this._children.length;t<e;t++){var i=this._children[t];if(i.visible())return i}return null},expandable:function(){return!0},collapsable:function(){return!0},visitAll:function(t){if(t){var e,i,n,s=this._children;if(s&&0<(i=s.length))for(e=0;e<i;e++){if(!1===t(n=s[e],i,e))return!1;if(n instanceof j2&&!1===n.visitAll(t))return!1}}},visit:function(t,e){if(e=void 0===e?0:e,t&&0<=e){var i,n,s,r=this._children;if(r&&0<(n=r.length))for(i=0;i<n;i++){if(!1===t(s=r[i],n,i))return!1;if(0<e&&s instanceof j2&&!1===s.visit(t,e-1))return!1}}},visitRows:function(t,e,i){if(i){var n,s,r,o=this._children;if(o&&0<(s=o.length))for(n=0;n<s;n++)if(r=o[n],!t||r.visible()){if((!e||0<=r.dataIndex())&&!1===i(r,s,n))return!1;if(r instanceof j2&&!1===r.visitRows(t,e,i))return!1}}},collectDataRows:function(t,e){return e=e||[],this.visitRows(!1,!0,function(t){e.push(t)}),e},getItem:function(t){if(t<0||t>=this._children.length)throw new RangeError("index is invalid: "+t);return this._children[t]},getChild:function(t){if(t<0||t>=this._children.length)throw new RangeError("index is invalid: "+t);return this._children[t]},getNext:function(t){for(var e=0,i=this._children.length;e<i-1;e++)if(this._children[e]===t)return this._children[e+1];return null},getPrev:function(t){for(var e=this._children.length-1;0<e;e--)if(this._children[e]===t)return this._children[e-1];return null},itemOfRow:function(t){for(var e=this._children.length;e--;)if(this._children[e].dataIndex()==t)return this._children[e];return null},indexOf:function(t){for(var e=0,i=this._children.length;e<i;e++)if(this._children[e]==t)return e;return-1},isDescendant:function(t){if(t&&t!==this){for(var e=t._parent;e&&e!=this;)e=e._parent;return e===this}return!1},$_getDescendants:function(a,h,l,u){if((!a||this._expanded)&&this._children&&0<this._children.length){var t=[];return function t(e,i){var n,s,r,o;for(n=0,s=e.count();n<s;n++)r=e.getItem(n),l&&!r.leaf()||h&&!(0<=r.dataIndex())||(u?(o=u(r))&&i.push(o):i.push(r)),r instanceof j2&&(!a||r.expanded())&&t(r,i)}(this,t),t}return null},getDescendants:function(t,e,i){return this.$_getDescendants(t,e,!1,i)},getLeaves:function(t,e,i){return this.$_getDescendants(t,e,!0,i)},clear:function(){var t=this._children;this._summaries=void 0,this._summarized=void 0,t.splice(0,t.length),this._descendantCount=this._descendantRowCount=0},insert:function(t,e,i){this._addChild(e,t,i)},add:function(t,e){this._addChild(t,-1,e)},addAll:function(t,e){this._addChildren(t,e)},remove:function(t,e){this._removeChild(t,e)},setItem:function(t,e){if(t&&e&&t!=e){var i=this._removeChild(t);this._insertChild(i,e),e instanceof g2&&(e._index=t.index())}},getNumber:function(t){var e=this.$_getSummary(t);return e instanceof b0?e.count:e?e.length:this._descendantCount},getSum:function(t){var e=this.$_getSummary(t);if(e instanceof b0)return e.sum;if(e){var i,n,s=this.dataSource(),r=e.length,o=0;for(n=0;n<r;n++)i=s.getValue(e[n],t),isNaN(i)||(o+=i);return o}return NaN},getMax:function(t){var e=this.$_getSummary(t);if(e instanceof b0)return e.max;if(e){var i,n,s,r=this.dataSource(),o=e.length;if(1<o){for(i=NaN,s=0;i=r.getValue(e[s++],t),isNaN(i)&&s<o;);for(;s<o;)n=r.getValue(e[s++],t),!isNaN(n)&&i<n&&(i=n);return i}if(1==o)return r.getValue(e[0],t)}return NaN},getMin:function(t){var e=this.$_getSummary(t);if(e instanceof b0)return e.min;if(e){var i,n,s,r=this.dataSource(),o=e.length;if(1<o){for(i=NaN,s=0;i=r.getValue(e[s++],t),isNaN(i)&&s<o;);for(;s<o;)n=r.getValue(e[s++],t),!isNaN(n)&&n<i&&(i=n);return i}if(1==o)return r.getValue(e[0],t)}return NaN},getAvg:function(t){var e=this.$_getSummary(t);if(e instanceof b0)return e.avg;if(e){var i,n,s=this.dataSource(),r=e.length;if(1<r){for(n=i=0;n<r;n++)i+=s.getValue(e[n],t);return i/r}if(1==r)return s.getValue(e[0],t)}return NaN},getVar:function(t,e){var i=this.$_getSummary(t);if(i instanceof b0)return i.vars;if(i&&this.summaryMode()==z4.STATISTICAL){var n,s,r,o=this.dataSource(),a=i.length;if(1<a){for(s=n=0;s<a;s++)n+=o.getValue(i[s],t);for(r=n/a,s=n=0;s<a;s++)n+=Math.pow(o.getValue(i[s],t)-r,2);return n/(a-e)}if(1==a)return 0}return NaN},getStdev:function(t,e){var i=this.$_getSummary(t);if(i instanceof b0)return 0==e?Math.sqrt(i.varsp):Math.sqrt(i.vars);if(i&&this.summaryMode()==z4.STATISTICAL){var n,s,r,o=this.dataSource(),a=i.length;if(1<a){for(s=n=0;s<a;s++)n+=o.getValue(i[s],t);for(r=n/a,s=n=0;s<a;s++)n+=Math.pow(o.getValue(i[s],t)-r,2);return Math.sqrt(n/(a-e))}if(1==a)return 0}return NaN},getSummarized:function(t){return this._summarized&&this._summarized[t]},setSummarized:function(t,e){return this._summarized=this._summarized||{},this._summarized[t]=e},leaf:function(){return!1},summaryMode:function(){return this.provider().summaryMode()},_setExpanded:function(t){this._expanded=t},_insertChild:function(t,e,i){this._children.splice(t,0,e),e instanceof g2&&(e._parent=this),i&&(this._descendantCount++,this._descendantRowCount++)},_addChild:function(t,e,i){t&&this.indexOf(t)<0&&(e<0?this._children.push(t):this._children.splice(e,0,t),t._parent=this,i&&(this._descendantCount++,this._descendantRowCount++))},_addChildren:function(t,e){var i;if(t&&0<(i=t.length)){var n,s,r=0;for(n=0;n<i;n++)(s=t[n])&&this.indexOf(s)<0&&((s._parent=this)._children.push(s),r++);e&&(this._descendantCount+=r,this._descendantRowCount+=r)}},_removeChild:function(t,e){var i=this.indexOf(t);return 0<=i&&(this._children.splice(i,1),t instanceof g2&&(t._parent=null),e&&(this._descendantCount--,this._descendantRowCount--)),i},attachItem:function(t){t&&(t._parent=this)},detachItem:function(t){t&&item_parent==this&&(t._parent=null)},_exchangeItems:function(t,e){var i,n=this._children;if(t<0||t>=n.length)throw new RangeError("index1 is out of range: "+t);if(e<0||e>=n.length)throw new RangeError("index2 is out of range: "+e);t!==e&&(i=n[t],n[t]=n[e],n[e]=i)},_collectSummaryRows:function(t,e){var i,n,s,r;for(i=0,n=t.count();i<n;i++)(s=t.getItem(i))instanceof j2?this._collectSummaryRows(s,e):0<=(r=s.dataIndex())&&e.push(r)},_clearSummary:function(){var t,e;for(this._summaries=void 0,this._summarized=void 0,t=this._children.length;t--;)(e=this._children[t])instanceof j2&&e._clearSummary()},$_getSummary:function(t){var e=this.dataSource();if(!e)return null;this._summaries||(this._summaries={},this._rows=null);var i=this._summaries[t];return i||e.canSummarize(t)&&(i=this.$_summarize(t,e))&&(this._summaries[t]=i),i},$_summarize:function(t,e){var i=this.summaryMode();if(i==z4.NONE)return null;if(this._rows||(this._rows=[],this._collectSummaryRows(this,this._rows)),3<this._rows.length&&e.canSummarize(t)){var n=new b0(t);return e.aggregateRange(n,this._rows,i==z4.STATISTICAL),n}return this._rows}}),m7=I1("GroupFooter",g2,{init:function(){this._super()},expandable:!1,displayLevel:function(){return this._expandable?this.level()-1:this.level()}}),n5=I1("RootRow",j2,{init:function(t){this._super(-1),this._provider=t},provider:function(){return this._provider},level:function(){return 0},expanded:function(){return!0},isExpanded:function(){return!0},setExpanded:function(){},leaf:function(){return!1},isLeaf:function(){return!1},visible:function(){return!0},dataSource:function(){return this._provider.dataSource()},expandable:function(){return!1},isExpandable:function(){return!1},collapsable:function(){return!1},isCollapsable:function(){return!1},makeVisible:function(){}}),Y28=I1("CustomGroupItem",null,{init:function(t,e){this._super(),this._owner=t,this._styles=new o1(this,"customGroupItem",null,!1),e&&this.assign(e),this._styles.setBorderRight(new Z1(4288716960)),this._styles.setBorderBottom(new Z1(4288716960))},displayLevels:null,displayCallback:null,styles:null,minHeight:10,maxHeight:0,height:0,setDisplayLevels:function(t){var e="string"==typeof t&&"*"===t.trim(),i=e?null:j0(t);e==this._allLevels&&i==this._displayLevels||(this._displayLevels=e?(this._allLevels=!0,null):(this._allLevels=!1,i),this._changed())},setDisplayCallback:function(t){(t=p4(t))!=this._displayCallback&&(this._displayCallback=t,this._changed())},setStyles:function(t){t!=this._styles&&(this._styles.extend(t),this._changed())},itemType:function(){return this._owner._itemType},isHeader:function(){return this._owner._itemType==m9.HEADER},displayText:function(){return this.className()},canCreate:function(t){var e=this._displayCallback;return e?e(t):!!this._allLevels||!this._displayLevels||0<=this._displayLevels.indexOf(t.level())},createRow:function(){return null},createRowView:function(t){return null},propertyChanged:function(){this._changed()},proxy:function(){var t=this._super();return t.type=this.$_type(),t},_changed:function(){this._owner&&this._owner._itemChanged(this)}}),S8=I1("CustomGroupItemCollection",null,{init:function(t,e){this._super(),this._owner=t,this._itemType=e||m9.FOOTER,this._items=[],this._itemTypes={}},count:function(){return this._items.length},registerType:function(t,e){return t&&b4(e)?this._itemTypes[t]=e:null},getItem:function(t){return this._items[t]},getRows:function(t,e){var i,n,s,r;if(t instanceof j2&&0<(n=(i=this._items).length)){for(e=e||[],s=0;s<n;s++)(r=i[s]).canCreate(t)&&e.push(r.createRow(r));return e}return null},assign:function(t){var e,i;if(t!==this)if(this._items=[],this._itemMap={},V1(t))for(e=0;e<t.length;e++)(i=this._createItem(t[e]))&&this._items.push(i);else t&&(i=this._createItem(t))&&this._items.push(i)},_createItem:function(t){var e=this._itemTypes[t.type];return e?new e(this,t):null},_itemChanged:function(t){this._owner.customGroupItemChanged(t)}}),M3=I1("CustomGroupItemRow",g2,{init:function(t){this._super(),this._model=t},expandable:!1,model:function(){return this._model},displayText:function(){return this._model?this._model.displayText():this.className()},displayLevel:function(){return this._expandable?this.level()-1:this.level()}}),z2=I1("RowProvider",a2,{init:function(t){this._super(),this._rowFilterRuntime=new V7,this._rowFilter=new S48(this),this._indexing=t,this._rootRow=this._createRootRow(),this._eventLock=0},rowFilterChanged:function(t){this._rowFilterSetting||this.refreshItems()},alwaysSorting:!0,hideDeleted:!1,rowFilter:null,setRowFilter:function(t){if(t!==this._rowFilter){this._rowFilterSetting=!0;try{this._rowFilter.assign(t)}finally{this._rowFilterSetting=!1,this._doApplyRowFilter()}}},dataSource:function(){y4()},rowCount:function(){y4()},fixedCount:function(){y4()},getView:function(e){return this.findListener(function(t){return t.viewId()===e})},getItem:function(t){y4()},getItems:function(t,e){y4()},attachItem:function(t){t&&(t._parent=this._rootRow)},refreshItems:function(){y4()},getItemsByIndices:function(t){var e=[];if(t)for(var i=0,n=t.length;i<n;i++){var s=this.getItem(t[i]);s&&e.push(s)}return e},getIndexOfRow:function(t){var e=this.getItemOfRow(t);return e?e.index():-1},getIndicesOfRows:function(t){var e=[],i=t?t.length:0;if(i)for(var n=0;n<i;n++){var s=this.getItemOfRow(t[n]);e.push(s?s.index():-1)}return e},getItemOfRow:function(t){y4()},getItemsOfRows:function(t,e){var i,n,s=[],r=t?t.length:0;for(i=0;i<r;i++)(n=this.getItemOfRow(t[i],e))&&s.push(n);return s},exchange:function(t,e){y4()},visitAll:function(t,e){for(var i=0,n=this.rowCount();i<n;i++)if(!1===t(this.getItem(i)))return!1},_clearDisplayLevels:function(){},hasCellStyle:function(){return!1},setCellStyle:function(t,e,i){},setCellStyles:function(t,e,i){},clearCellStyles:function(){},removeCellStyle:function(t){},getCellStyle:function(t,e){return null},canUpdateField:function(t,e){if(t){var i=this.dataSource();if(i){var n=t.dataIndex(),s=T1.isInserting(t.rowState());return(0<=n||s)&&(s||i.canUpdateRow(n))&&i.canUpdateValue(n,e)}}return!1},canUpdate:function(t){if(t){var e=this.dataSource();if(e){var i=t.dataIndex(),n=T1.isInserting(t.rowState());return(0<=i||n)&&(n||e.canUpdateRow(i))}}return!1},canAppend:function(){var t=this.dataSource();return t&&t.canAppendRow()},canInsert:function(t){if(t){var e=this.dataSource();if(e){var i=t.dataIndex();return 0<=i&&e.canInsertRow(i)}}return!1},canDelete:function(t){if(t){var e=this.dataSource();if(e){var i=t.dataIndex();return 0<=i&&e.canDeleteRow(i)}}return!1},getAllItems:function(){y4()},getDistinctValues:function(t,e){var i,n,s,r,o,a,h,l,u,d=this._dataSource;if(d&&(i=d.getField(s=d.getFieldIndexEx(t)))){for(n=d.getComparer(s).bind(d),a=(r=this._doGetDistinctValues(s,i.dataType())).length,e=0<e?Math.min(e,r.length):a,h=0,o=[l=r[h++]];o.length<e&&h<a;)u=r[h++],n(s,l.$_dataKey(),u.$_dataKey())<0&&o.push(u),l=u;for(h=o.length;h--;)o[h]=d.getValue(o[h].dataIndex(),s);return o}return[]},findItem:function(t,e,i,n,s){y4()},getNumber:function(){return 0},getSum:function(t){return NaN},getMax:function(t){return NaN},getMin:function(t){return NaN},getAvg:function(t){return NaN},getVar:function(t){return NaN},getVarp:function(t){return NaN},getStdev:function(t){return NaN},getStdevp:function(t){return NaN},isIndexing:function(){return this._indexing},isController:function(){return!1},_createRootRow:function(){return new n5(this)},_resetItemIndices:function(t){if(this._indexing)for(var e=t,i=this.rowCount();e<i;e++)this.getItem(e)._index=e},_setExpanded:function(t,e){t._setExpanded(e)},_resetItemIndex:function(t){var e=this.getItem(t);e&&(e._index=t)},_incDescendants:function(t,e,i){var n=t.parent();t._descendantCount+=e,t._descendantRowCount+=e+i,n&&this._incDescendants(n,e,i)},_copyExtents:function(t,e){if(t instanceof g2&&e instanceof g2&&t!=e)for(var i in t._viewExts)e._viewExts[i]=t._viewExts[i]},_doApplyRowFilter:function(){},_fireReset:function(){this._eventLock<=0&&this.fireEvent(z2.RESET)},_fireRefresh:function(){this._eventLock<=0&&this.fireEvent(z2.REFRESH)},_fireIndicesPolluted:function(){this._eventLock<=0&&this.fireEvent(z2.INDICES_POLLUTED)},_fireSummaryCleared:function(){this._eventLock<=0&&this.fireEvent(z2.SUMMARY_CLEARED)},_fireUndoStateChanged:function(t,e){this._eventLock<=0&&this.fireEvent(z2.UNDO_STATE_CHANGED,t,e)},_fireCountChanged:function(t,e){e=1<arguments.length?e:this.rowCount(),this._eventLock<=0&&t!=e&&this.fireEvent(z2.COUNT_CHANGED,t,e)},_fireDataCountChanged:function(t,e){this._eventLock<=0&&t!=e&&this.fireEvent(z2.DATA_COUNT_CHANGED,t,e)},_fireRowCountChanged:function(t,e){this._eventLock<=0&&t!=e&&this.fireEvent(z2.ROW_COUNT_CHANGED,t,e)},_fireDataCalculated:function(t){this._eventLock<=0&&this.fireEvent(z2.DATA_CALCULATED,t)},_fireItemInserted:function(t){this._eventLock<=0&&this.fireEvent(z2.ITEM_INSERTED,t)},_fireItemDeleted:function(t,e){this._eventLock<=0&&this.fireEvent(z2.ITEM_DELETED,t,e)},_fireItemUpdated:function(t){this._eventLock<=0&&this.fireEvent(z2.ITEM_UPDATED,t)},_fireCheckableChanged:function(t){this._eventLock<=0&&this.fireEvent(z2.CHECKABLE_CHANGED,t)},_fireItemChecked:function(t){this._eventLock<=0&&this.fireEvent(z2.ITEM_CHECKED,t)},_fireItemsChecked:function(t,e){this._eventLock<=0&&this.fireEvent(z2.ITEMS_CHECKED,t,e)},_fireItemAllChecked:function(t){this._eventLock<=0&&this.fireEvent(z2.ITEM_ALL_CHECKED,t)},_fireRowStateChanged:function(t){this._eventLock<=0&&this.fireEvent(z2.ROW_STATE_CHANGED,t)},_fireRowStatesChanged:function(t){this._eventLock<=0&&this.fireEvent(z2.ROW_STATES_CHANGED,t)},_fireRowStatesCleared:function(){this._eventLock<=0&&this.fireEvent(z2.ROW_STATES_CLEARED)},_fireRowTagChanged:function(t){this._eventLock<=0&&this.fireEvent(z2.ROW_TAG_CHANGED,t)},_fireRowTagsChanged:function(t){this._eventLock<=0&&this.fireEvent(z2.ROW_TAGS_CHANGED,t)},_fireRowTagsCleared:function(){this._eventLock<=0&&this.fireEvent(z2.ROW_TAGS_CLEARED)},_fireSorting:function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(z2.SORTING,t,e,i)},_fireSorted:function(){this._eventLock<=0&&this.fireEvent(z2.SORTED)},_fireFiltering:function(){return!(this._eventLock<=0)||this.fireConfirmEvent(z2.FILTERING)},_fireFilterAdded:function(t,e){this._eventLock<=0&&this.fireEvent(z2.FILTER_ADDED,t,e)},_fireFilterRemoved:function(t,e){this._eventLock<=0&&this.fireEvent(z2.FILTER_REMOVED,t,e)},_fireFilterCleared:function(t){this._eventLock<=0&&this.fireEvent(z2.FILTER_CLEARED,t)},_fireFilterAllCleared:function(){this._eventLock<=0&&this.fireEvent(z2.FILTER_ALL_CLEARED)},_fireFiltered:function(){this._eventLock<=0&&this.fireEvent(z2.FILTERED)},_firePaged:function(t){this._eventLock<=0&&this.fireEvent(z2.PAGED,t)},_firePageCountChanged:function(t,e){this._eventLock<=0&&this.fireEvent(z2.PAGE_COUNT_CHANGED,t,e)},_firePageIndexChanging:function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(z2.PAGE_INDEX_CHANGING,t,e)},_firePageIndexChanged:function(t,e){this._eventLock<=0&&this.fireEvent(z2.PAGE_INDEX_CHANGED,t,e)}});z2.RESET="onRowProviderReset",z2.REFRESH="onRowProviderRefresh",z2.INDICES_POLLUTED="onRowProviderIndicesPolluted",z2.SUMMARY_CLEARED="onRowProviderSummaryCleared",z2.UNDO_STATE_CHANGED="onRowProviderUndoStateChanged",z2.COUNT_CHANGED="onRowProviderCountChanged",z2.DATA_COUNT_CHANGED="onRowProviderDataCountChanged",z2.ROW_COUNT_CHANGED="onRowProviderRowCountChanged",z2.DATA_CALCULATED="onRowProviderDataCalculated",z2.ITEM_INSERTED="onRowProviderItemInserted",z2.ITEM_DELETED="onRowProviderItemDeleted",z2.ITEM_UPDATED="onRowProviderItemUpdated",z2.CHECKABLE_CHANGED="onRowProviderCheckableChanged",z2.ITEM_CHECKED="onRowProviderItemChecked",z2.ITEMS_CHECKED="onRowProviderItemsChecked",z2.ITEM_ALL_CHECKED="onRowProviderItemAllChecked",z2.ROW_STATE_CHANGED="onRowProviderRowStateChanged",z2.ROW_STATES_CHANGED="onRowProviderRowStatesChanged",z2.ROW_STATES_CLEARED="onRowProviderRowStatesCleared",z2.ROW_TAG_CHANGED="onRowProviderRowTagChanged",z2.ROW_TAGS_CHANGED="onRowProviderRowTagsChanged",z2.ROW_TAGS_CLEARED="onRowProviderRowTagsCleared",z2.SORTING="onRowProviderSorting",z2.SORTED="onRowProviderSorted",z2.FILTER_ADDED="onRowProviderFilterAdded",z2.FILTER_REMOVED="onRowProviderFilterRemoved",z2.FILTER_CLEARED="onRowProviderFilterCleared",z2.FILTER_ALL_CLEARED="onRowProviderFilterAllCleared",z2.FILTERING="onRowProviderFiltering",z2.FILTERED="onRowProviderFiltered",z2.PAGED="onRowProviderPaged",z2.PAGE_COUNT_CHANGED="onRowProviderPageCountChanged",z2.PAGE_INDEX_CHANGING="onRowProviderPageIndexChanging",z2.PAGE_INDEX_CHANGED="onRowProviderPageIndexChanged";var F37=I1("FilteredRowProvider",z2,{init:function(t){this._super(t),this._explicitFilter=!1,this._filtered=!1,this._filters=[],this._filterRuntime=new A3,this._filterLock=0,this._fixedFiltering=!1,this._sortingDirty=!0,this._explicitSort=!1,this._sorted=!1,this._sortFields=[],this._sortDirections=[],this._sortCases=[],this._editing=!1},hideDeleted:!1,sortMode:u1(O6,O6.AUTO),filterMode:u1(j6,j6.AUTO),dataStateFiltering:!0,dataTagFiltering:!1,sortFirst:!1,setHideDeleted:function(t){t!=this._hideDeleted&&(this._hideDeleted=t,this._hideDeletedChanged())},isFiltered:function(){return this._filtered},isSorted:function(){return this._sorted},getSortFieldCount:function(){return this._sortFields.length},getSortFields:function(){return this._sortFields.slice()},getSortDirections:function(){return this._sortDirections.slice()},getSortCases:function(){return this._sortCases.concat()},setDataStateFiltering:function(t){t!=this._dataStateFiltering&&(this._dataStateFiltering=t,this._doApplyFilters(!0,!0))},setDataTagFiltering:function(t){t!=this._dataTagFiltering&&(this._dataTagFiltering=t,this._doApplyFilters(!0,!0))},setSortFirst:function(t){t!=this._sortFirst&&(this._sortFirst=t,this._doApplyFilters(!0,!0))},beginFilter:function(){this._filterLock++},endFilter:function(t){t=!(0<arguments.length)||t,0<this._filterLock&&0==--this._filterLock&&t&&this.applyFilters()},hasFilter:function(t){var e=this._filters[t];return e&&0<e.length},addFilter:function(t,e){if(0<=t&&!this._editing){this._fireFilterAdded(t,e);var i=this._filters[t];i||(i=[],this._filters[t]=i);var n="string"==typeof e?new y37(e):e;return i.push(n),this.applyFilters(),n}},removeFilter:function(t,e){if(this._filtered&&this._filters[t]){this._fireFilterRemoved(t,e);var i=this._filters[t],n=i.indexOf(e);0<=n&&(i.splice(n,1),this.applyFilters())}},clearFilters:function(t){if(this._filtered&&this._filters[t]){this._fireFilterCleared(t);var e=this._filters[t];e&&0<e.length&&(e.length=0,delete this._filters[t],this.applyFilters())}},clearAllFilters:function(){this._filtered&&(this._fireFilterAllCleared(),this._filters=[],this.applyFilters())},hasFilters:function(){var t,e,i;for(t=0,e=this._filters.length;t<e;t++)if((i=this._filters[t])&&0<i.length)return!0;return!1},applyFilters:function(t){t=!(0<arguments.length)||t,0<this._filterLock||this._fireFiltering()&&(this._explicitFilter=!0,this._doApplyFilters(t))},$_setEditing:function(t){this._editing=t},$_needSort:function(){return this._sorted&&this._sortMode==O6.AUTO&&this._sortingDirty},$_needFilter:function(){return this._filtered&&this._filterMode==j6.AUTO},$_checkSorted:function(){var t,e,i=this._sortFields,n=this._dataSource;if(i&&n){for(e=n.fieldCount(),t=i.length-1;0<=t;t--)i[t]>=e&&(i.splice(t,1),this._sortDirections.splice(t,1),this._sortCases.splice(t,1));return 0<i.length}},$_checkFiltered:function(){var t=this._dataSource;if(t)return this._activeRowFilter=void 0,this._filters.length=t.fieldCount(),!this._rowFilter.canFiltering()||this._paging&&!this._pageFiltering?this.hasFilters()||this._hideDeleted&&0<t.deletedCount():(this._activeRowFilter=this._rowFilter,!0)},$_prepareFilters:function(t){var e,i,n,s,r,o=this._activeRowFilter,a=this._filters,h=this._filterRuntime;for(o&&(this._rowFilterRuntime.setDataSource(t),o.prepare(this._rowFilterRuntime)),e=0,i=a.length;e<i;e++)if(filters=a[e],filters){for(r=0,n=filters.length;n--;)(s=filters[n])instanceof y37?(s.prepare(h,t),r++):s instanceof d7&&0<s._checkCount&&r++;for(n=filters.length;n--;)(s=filters[n])instanceof d7&&s.setAlone(0==r)}},$_select:function(t,e){var i,n,s,r,o,a,h,l=this._filterRuntime,u=this._filters;if(e&&!e.select(t))return!1;for(i=0,n=u.length;i<n;i++)if(o=u[i]){for(h=!1,s=0,r=o.length;s<r&&((a=o[s])instanceof d7?a.select(t.getValue(i))&&(h=!0):a.select(l,t,i)&&(h=!0),!h);s++);if(!h)return!1}return!0}}),N27=I1("DefaultRowProvider",F37,{init:function(t){this._super(t),this._dataSource=null,this._rows=[],this._hiddens=[],this._filteredItems=[],this._pageItems=[],this._sortedItems=[],this._pubItems=this._items=this._rows,this._pendingRows=[],this._fixedCount=0,this._fixedSorting=!1,this._maxItemCount=0,this._rowCount=0,this._pubCount=0,this._hiddenCount=0,this._hiddenChanged=!1,this._paging=!1,this._pageSize=10,this._pageCount=-1,this._pageOffset=0,this._pageRows=null,this._currPage=-1,this._currPageCount=0,this._reqPage=-1,this._pageStart=0,this._summaryMap=null,this._summarizedMap={}},pageSorting:!0,pageFiltering:!0,summaryMode:u1(z4,z4.AGGREGATE),setPageSorting:function(t){t!=this._pageSorting&&(this._pageSorting=t,this._sorted&&(this.$_buildItems(),this._fireRefresh()))},setPageFiltering:function(t){t!=this._pageFiltering&&(this._pageFiltering=t,this._filtered&&(this.$_buildItems(),this._fireRefresh()))},setSummaryMode:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_resetSummary(),this.$_buildItems(),this._fireRefresh())},isPaging:function(){return this._paging},pageStartIndex:function(){return this._pageStart},hiddenCount:function(){return this._hiddenCount},getDataRow:function(t){return 0<=t&&t<this._rows.length?this._rows[t]:null},getFieldDomain:function(t){var e,i,n=this._rows,s=[],r=c2,o=c2;for(e=0,i=n.length;e<i;e++)(r=this._dataSource.getValue(e,t))!=o&&s.indexOf(r)<0&&s.push(r),o=r;return s},isRowHidden:function(t){return this._hiddens[t]},setHiddenRow:function(t,e){if(0<=t&&t<this._rows.length&&this._hiddens[t]!=e){var i=this.rowCount();return this._hiddens[t]=e,this._hiddenCount+=e?1:-1,this._hiddenChanged=!0,this.$_buildMaxItems(),this._fireRefresh(),this._fireCountChanged(i),!0}},getHiddenRows:function(){var t,e=this._hiddens,i=e.length,n=[];for(t=0;t<i;t++)e[t]&&n.push(t);return n},setHiddenRows:function(t,e){var i,n,s,r=this._rows.length,o=this._hiddens,a=0;if(V1(t)&&0<(n=t.length)){for(i=0;i<n;i++)0<=(s=t[i])&&s<r&&o[s]!=e&&(o[s]=e,a++);0<a&&(r=this.rowCount(),this._hiddenCount+=(e?1:-1)*a,this._hiddenChanged=!0,this.$_buildMaxItems(),this._fireRefresh(),this._fireCountChanged(r))}return a},unhideAllRows:function(){if(0<this._hiddenCount){var t=this.rowCount();return this._hiddens.length=0,this._hiddenCount=0,this._hiddenChanged=!0,this.$_buildMaxItems(),this._fireRefresh(),this._fireCountChanged(t),!0}},_doApplyFilters:function(t,e){var i=this.rowCount();this.$_buildMaxItems();try{t&&this._fireRefresh()}finally{e||this._fireFiltered()}this._fireCountChanged(i)},_doApplyRowFilter:function(){this._doApplyFilters(!0)},orderBy:function(t,e,i,n){if(n=!(3<arguments.length)||n,this._fireSorting(t,e,i)){this._sortFields=[],this._sortDirections=[],this._sortCases=[];var s,r=t?t.length:0,o=e?e.length:0,a=i?i.length:0;for(s=0;s<r;s++)this._sortFields.push(t[s]),s<o?this._sortDirections.push(e[s]):0<o?this._sortDirections.push(e[o-1]):this._sortDirections.push(M4.ASCENDING),s<a?this._sortCases.push(i[s]):0<a?this._sortCases.push(i[a-1]):this._sortCases.push(g7.SENSITIVE);this._explicitSort=!0,this.$_buildItems();try{n&&this._fireRefresh()}finally{this._fireSorted()}}},setPaging:function(t,e,i,n){e=1<arguments.length?e:10,i=2<arguments.length?i:-1,n=3<arguments.length?n:0,e=Math.max(K3(e),1),i=Math.max(K3(i),-1),n=Math.max(K3(n),0);var s=this._paging,r=this._pageSize,o=this._pageCount;if(this._currPage,t!=s||e!=r||i!=o||n!=this._pageOffset){var a=this.rowCount();t!=s&&(this._currPage=-1,this._currPageCount=0,this._reqPage=-1,this._pageStart=0),this._paging=t,this._pageSize=e,this._pageCount=i,this._pageOffset=n,this.$_buildItems(),this._fireRefresh(),this._paging!=s&&this._firePaged(this._paging),this._fireCountChanged(a)}},page:function(){return this._paging?this._currPage:-1},setPage:function(t){if(this._paging){var e=this.rowCount();if((t=Math.max(0,Math.min(this.pageCount()-1,isNaN(t)?0:t)))!=this._currPage&&this._firePageIndexChanging(this._currPage,t)){this._reqPage=t;try{this.$_buildPage()}finally{this._reqPage=-1}}this._fireCountChanged(e)}},pageSize:function(){return this._pageSize},setPageSize:function(t){if((t=Math.max(1,t))!=this._pageSize){var e=this.rowCount();this._pageSize,this._pageSize=t,this._paging&&this.$_buildPage(),this._fireCountChanged(e)}},pageCount:function(){return this._paging?this._currPageCount:this._pageCount},setPageCount:function(t){if((t=Math.max(-1,t))!=this._pageCount){var e=this.rowCount();this._pageCount=t,this._paging&&this.$_buildPage(),this._fireCountChanged(e)}},pageOffset:function(){return this._pageOffset},setPageOffset:function(t){var e=Y1(t);if(isNaN(e)&&(e=0),e!=this._pageOffset){var i=this.rowCount();this._pageOffset=e,this._paging&&this.$_buildPage(),this._fireCountChanged(i)}},setPageAndOffset:function(t,e){var i=Y1(t);isNaN(i)&&(i=0);var n=Y1(e);isNaN(n)&&(n=0),i!=this._currPage?(this._pageOffset=n,this.setPage(i)):n!=this._pageOffset&&this.setPageOffset(n)},pageRows:function(){var t=this._pageRows;if(!t&&this._paging)for(var e=(t=this._pubItems.concat()).length;e--;)t[e]=t[e].dataIndex();return t},setPageRows:function(t){if(this._pageRows=t?t.concat():null,this._paging){var e=this.rowCount();this.$_buildPage(),this._fireRefresh(),this._fireCountChanged(e)}},setPageAndRows:function(t,e){var i=Y1(t);isNaN(i)&&(i=0),i!=this._currPage?(this._pageRows=e?e.concat():null,this.setPage(i)):this.setPageRows(e)},dataSource:function(){return this._dataSource},setDataSource:function(t){if(t!==this._dataSource){var e=this.rowCount();this.$_clearRows(),this._dataSource&&this._dataSource.removeListener(this),this._dataSource=t,this._dataSource&&(this.$_buildRows(),this._dataSource.addListener(this)),this.$_resetSummary(),this._fireReset(),this._fireCountChanged(e)}},rowCount:function(){return this._pubCount},descendantCount:function(){return this._pubCount},descendantRowCount:function(){return this._pubCount},getDescendantRows:function(t,e){return this._pubItems.slice()},visitRows:function(t,e,i){if(i){var n,s=this._pubItems,r=s.length;for(n=0;n<r;n++)if(!1===i(s[n]))return!1}},fixedCount:function(){return this._fixedCount},maxItemCount:function(){return this._maxItemCount},setMaxItemCount:function(t){if(t=Math.max(0,parseInt(t)),!isNaN(t)&&t!=this._maxItemCount){var e=this.rowCount();this._maxItemCount=t,this.refreshItems(!0),this._fireCountChanged(e)}},_doApplyRowFilter:function(){var t=this.rowCount();this.refreshItems(),this._fireCountChanged(t)},visitAll:function(t,e){for(var i=0,n=this._pubCount;i<n;i++)if(!1===t(this._pubItems[i]))return!1},getItem:function(t){return t<0||t>=this._pubCount?null:this._pubItems[t]},getItems:function(t,e){return this._pubItems.slice(t,t+e)},getIndexOfRow:function(t){return 0<=t&&t<this._rows.length?this._rows[t]._index:-1},getItemOfRow:function(t,e){if(0<=t&&t<this._rows.length){var i=this._rows[t];return e||0<=i._index?i:null}return null},_hideDeletedChanged:function(){var t=this.rowCount();this.$_buildItems(),this._fireRefresh(),this._fireCountChanged(t)},refreshItems:function(t){var e,i,n=this._dataSource,s=this.rowCount();n.$$_cmd&&(e=n.rowCount()<s,i=n.rowCount()>s),e&&this.onSaveRows(n.$$_cmd),this.$_clearRows(t),this.$_buildRows(t),i&&this.onRestoreRows(n.$$_cmd),this._fireRefresh()},setFixed:function(t,e,i){(t=Math.max(0,t))==this._fixedCount&&e==this._fixedSorting&&i==this._fixedFiltering||(this._fixedCount=t,this._fixedSorting=e,this._fixedFiltering=i,this.$_buildItems(),this._fireRefresh())},exchange:function(t,e){if(t!=e&&!this._sorted&&!this._filtered){if(t<0||t>=this._rows.length)throw new Error("index1 is out of bounds: "+t);if(e<0||e>=this._rows.length)throw new Error("index2 is out of bounds: "+t);var i=this._rows[t];this._rows[t]=this._rows[e],this._rows[e]=i}},clearDisplayLevels:function(){for(var t=this._rows,e=0,i=t.length;e<i;e++)t[e]._displayLevel=-1},getAllItems:function(){return this._pubItems.slice()},getNumber:function(t){var e=this.$_getSummary(t);return e?e.count:this.rowCount()},getSum:function(t){var e=this.$_getSummary(t);return e?e.sum:NaN},getMax:function(t){var e=this.$_getSummary(t);return e?e.max:NaN},getMin:function(t){var e=this.$_getSummary(t);return e?e.min:NaN},getAvg:function(t){var e=this.$_getSummary(t);return e?e.avg:NaN},getVar:function(t){var e=this.$_getSummary(t);return e?e.vars:NaN},getVarp:function(t){var e=this.$_getSummary(t);return e?e.varsp:NaN},getStdev:function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.vars):NaN},getStdevp:function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.varsp):NaN},getSummarized:function(t){return this._summarizedMap[t.$_hash]},setSummarized:function(t,e){return this._summarizedMap[t.$_hash]=e},_doGetDistinctValues:function(t,e){var i=this._pubItems.slice();return 0<i.length&&this.$_sortRange(i,t,!0,!1,this._dataSource.$_getComparer(e),0,i.length-1,!0),i},$_clearRows:function(t){this._rows.length=0,t||(this._hiddens.length=0,this._hiddenCount=0),this._filteredItems.length=0,this._filtered=!1,this._sorted=!1,this._sortedItems=null,this._pubItems=this._rows,this._pubCount=0},$_clearIndices:function(){for(var t=this._rows.length;t--;)this._rows[t]._index=-1},$_buildRows:function(t){var e=this._dataSource,i=s0,n=i[C8+"var"];if(e){var s=i[C8+"val"],r=(this.$_checkFiltered()||0<this._hiddenCount)&&!(this._paging&&this._pageFiltering),o=this.maxItemCount();this._rowCount=e.rowCount(),!r&&!this._paging&&0<o&&(this._rowCount=Math.min(this._rowCount,o)),n&&s!=f5[n]&&(this._rowCount=this._rowCount=0),this._rows=new Array(this._rowCount);for(var a=0,h=this._rowCount;a<h;a++)this._rows[a]=this.$_createRow(a);i&&this.$_buildItems(!1,!1,t)}},$_resetCounts:function(){this._filtered?this._pubCount=this._rowCount=this._items.length:this._pubCount=this._rowCount=this._rows.length},$_buildItems:function(t,e,i){var n,s,r,o,a,h,l,u,d,c,_=this._dataSource,f=this._rows,g=this._hiddens,m=0<this.maxItemCount()?this.maxItemCount():this._rows.length;if(this._pubItems=this._items=f,this._pubCount=this._rowCount=f.length,this._explicitSort=this._explicitFilter=!1,this._filtered=this.$_checkFiltered()||0<this._hiddenCount,this._sorted=this.$_checkSorted(),this._filtered||this._hiddenChanged){if(this._filteredItems.length=0,this._hideDeleted)for(n=0;n<this._rowCount;n++)r=f[n],g[n]?r._index=-1:(o=_.getRowState(r._dataIndex),r._index=j1.isDeleted(o)?-1:0);else for(n=0;n<this._rowCount;n++)(r=f[n])._index=g[n]?-1:0;for(a=this._activeRowFilter,h=this._paging&&this._pageFiltering,u=0<(l=this.fixedCount())&&!this._fixedFiltering,d=this._rows.length,this._filters.length,t||this.$_prepareFilters(_),this._paging||(d=Math.min(d,m)),n=s=0;n<this._rowCount&&s<d;n++)0<=(r=f[n])._index&&(t||h||u&&s<l?(this._filteredItems.push(r),s++):this.$_select(r,a)?(this._filteredItems.push(r),s++):r._index=-1);for(n=s;n<this._rowCount;n++)f[n]._index=-1;this._hiddenChanged=!1,this._pubItems=this._items=this._filteredItems,this._pubCount=this._rowCount=this._items.length}else if(i&&!this._paging)for(n=0;n<this._rowCount;n++)f[n]._index=0;if((!this._paging||!this._pageSorting)&&this._sorted){if(e)for(n=(c=this._sortedItems).length;n--;)c[n]._index<0&&c.splice(n,1);else this.$_sortRows();this._pubItems=this._sortedItems}if(this._paging&&(i&&this.$_clearIndices(),this.$_buildPageItems(!1,t,e),i))for(n=0;n<this._rowCount;n++)this._items[n]._index=0;this.$_clearSummary(),this._resetItemIndices(0)},$_buildMaxItems:function(t,e,i){0<this.maxItemCount()?this.$_buildRows(i):this.$_buildItems(t,e,i)},$_buildPageItems:function(t,e,i){var n,s,r,o,a,h,l=this._sorted&&!this._pageSorting?this._sortedItems:this._filtered&&!this._pageFiltering?this._filteredItems:this._rows,u=l.length,d=this.pageSize(),c=this.pageCount(),_=this.page(),f=0<=this._pageCount?this._pageCount:Y1((u+d-1)/d),g=Math.max(0,Math.min(f-1,this._reqPage<0?_:this._reqPage)),m=g*d+this.pageOffset();if(u<=m)this._pageItems.length=0,this._pubItems=this._items=this._pageItems,this._pubCount=this._rowCount=this._items.length;else{if(n=0<this.maxItemCount()?this.maxItemCount():u,s=Math.min(d,n),(r=this._pageItems).length=0,V1(this._pageRows))for(l=this._pageRows,m=0;m<l.length;m++)0<=(h=l[m])&&h<u&&r.push(this._rows[h]);else for(;m<u&&0<s;m++,s--)0<=m&&r.push(l[m]);if(this._pubItems=this._items=r,0<(s=this._pubCount=r.length)){if(this._pageFiltering&&!e){for(o=this._fixedFiltering?0:this._fixedCount,m=(s=r.length)-1;o<=m;m--)a=r[m],this.$_select(a,this._activeRowFilter)||r.splice(m,1);this._pubCount=this._rowCount=this._items.length}this._pageSorting&&!i&&this.$_sortRows(r)}}this._currPageCount=f,this._currPage=g,this._pageStart=this._currPage*this._pageSize,t&&(this._resetItemIndices(0),this._fireRefresh()),this._currPageCount!=c&&this._firePageCountChanged(c,this._currPageCount),this._currPage!=_&&this._firePageIndexChanged(_,this._currPage)},$_buildPage:function(){this.$_clearIndices(),this.$_buildPageItems(!0)},$_sortRows:function(t){this._sortedItems=t||this._items.concat();var e=this._sortedItems.length;0<this._fixedCount&&!this._fixedSorting?this.$_sort(0,this._fixedCount,e-1):this.$_sort(0,0,e-1),this._sortingDirty=!1},$_sort:function(t,e,i){this.$_sortLevel(t,e,i)},$_compFunc:function(e){switch(t){case a1.DATETIME:case a1.NUMBER:compFunc=ds.compareNumbers.bind(ds);break;case a1.BOOLEAN:compFunc=ds.compareBools.bind(ds);break;case a1.OBJECT:compFunc=ds.compareObjs.bind(ds);break;default:compFunc=ignoreCase?ds.compareTexts.bind(ds):ds.compareValues.bind(ds)}},$_sortLevel:function(t,e,i){if(!(i<=e||t>=this._sortFields.length)){var n,s,r,o,a,h,l,u,d=this._dataSource,c=this._sortFields[t],_=d.getField(c);if(_&&(u=this._sortedItems,n=this._sortDirections[t]!=M4.DESCENDING,s=this._sortCases[t]==g7.INSENSITIVE,r=_.dataType(),o=d.$_getComparer(r,s),a=r==a1.TEXT&&s?d.equalTexts.bind(d):d.equalValues.bind(d),this.$_sortRange(u,c,n,s,o,e,i,t+1==this._sortFields.length),t+1<this._sortFields.length)){for(l=h=e;h<i;)a(c,u[++h]._dataIndex,u[h-1]._dataIndex)||(this.$_sortLevel(t+1,l,h-1),l=h);l<i&&this.$_sortLevel(t+1,l,i)}}},$_sortRange:function(t,e,i,n,s,r,o,a){var h,l,u,d,c;do{u=t[B1(((h=r)+(l=o))/2)]._dataIndex;do{if(i){for(;h<=l&&(0==(c=s(e,u,d=t[h]._dataIndex))&&a&&(c=u-d),!(c<=0));)h++;for(;h<=l&&(0==(c=s(e,u,d=t[l]._dataIndex))&&a&&(c=u-d),!(0<=c));)l--}else{for(;h<=l&&(0==(c=s(e,u,d=t[h]._dataIndex))&&a&&(c=u-d),!(0<=c));)h++;for(;h<=l&&(0==(c=s(e,u,d=t[l]._dataIndex))&&a&&(c=u-d),!(c<=0));)l--}if(h<=l){if(h!=l){var _=t[h];t[h]=t[l],t[l]=_}h++,l--}}while(h<=l);r<l&&this.$_sortRange(t,e,i,n,s,r,l,a),r=h}while(r<o)},$_createRow:function(t){var e=new v4(t);return this.attachItem(e),e},$_createAllRow:function(){for(var t=0;t<this._rowCount;t++)this._rows[t]||(this._rows[t]=this.$_createRow(t))},$_resetSummary:function(){this._summaryMap=[],this._summarizedMap={}},$_clearSummary:function(){if(this._summaryMap)for(var t=this._summaryMap.length;t--;)this._summaryMap[t]&&this._summaryMap[t].clear();this._summarizedMap={},this._fireSummaryCleared()},$_getSummary:function(t){var e=this._summaryMap[t];if(!e){var i=this._dataSource;i&&i.canSummarize(t)&&(e=new b0(t),this._summaryMap[t]=e)}return e&&0==e.count&&0<this.rowCount()&&this.$_summarize(e),e},$_summarize:function(t){var e=this._dataSource;if(e)if(this._filtered){for(var i=this._items.length,n=new Array(i),s=0;s<i;s++)n[s]=this._pubItems[s]._dataIndex;e.aggregateRange(t,n,this._summaryMode==z4.STATISTICAL)}else e.aggregate(t,this._summaryMode==z4.STATISTICAL)},onDataSetDisposed:function(t){var e=this.rowCount();this.setDataSource(null),this._fireCountChanged(e,0)},onDataSetReset:function(t){var e,i,n=this.rowCount();(t=this._dataSource).$$_cmd&&(e=t.rowCount()<n,i=t.rowCount()>n),e&&this.onSaveRows(t.$$_cmd),this._sortingDirty=!0,this.$_clearRows(),this.$_buildRows(),this.$_resetSummary(),i&&this.onRestoreRows(t.$$_cmd),this._fireReset(),this._fireCountChanged(n)},onDataSetRefresh:function(t){var e=this.rowCount();this._sortingDirty=!0,this.refreshItems(),this._fireCountChanged(e)},onDataSetCalculated:function(t){this._fireDataCalculated(t)},onDataSetCommandStackChanged:function(t,e,i){this._fireUndoStateChanged(e,i)},onGridDataSetRowCountChanged:function(t,e){},onGridDataSetRowInserting:function(t,e,i){return!0},onGridDataSetRowInserted:function(t,e){var i,n,s,r,o,a=this.rowCount(),h=this._rows,l=e<h.length?h[e]:null;for(this._sortingDirty=!0,i=this.$_createRow(e),h.splice(e,0,i),this._hiddens.splice(e,0,!1),s=e,r=h.length;s<r;s++)h[s]._dataIndex=s;this.$_needFilter()||this.$_needSort()||this._paging?(this.$_buildMaxItems(!1,!1,!0),o=0<=i._index):0<this.maxItemCount()?(this.$_buildRows(!0),o=0<=i._index):(o=!0,this._filtered&&(n=this._filteredItems,e=Math.max(0,l?n.indexOf(l):n.length),n.splice(e,0,i)),this._sorted&&(n=this._sortedItems,e=Math.max(0,l?n.indexOf(l):n.length),n.splice(e,0,i)),this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndices(this._sorted?0:e)),t.$$_cmd&&this.onRestoreRow(t.$$_cmd,i,e),o?(this._fireItemInserted(i),this._fireCountChanged(a)):this._fireIndicesPolluted()},onGridDataSetRowsInserted:function(t,e,i){var n=j0(e);if(n&&(i=n.length),!(i<0)){var s,r,o,a,h,l=n?n[0]:e,u=this.rowCount(),d=this._rows,c=this._hiddens,_=!n&&e<d.length?d[e]:null,f=[];for(this._sortingDirty=!0,s=0;s<i;s++)r=n?n[s]:l+s,f.push(o=this.$_createRow(r)),d.splice(r,0,o),c.splice(r,0,!1);for(h=d.length,s=l;s<h;s++)d[s]._dataIndex=s;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildMaxItems();else if(0<this.maxItemCount())this.$_buildRows(!0);else{if(this._filtered)if(a=this._filteredItems,n)for(s=0;s<f.length;s++)e=n[s],e=Math.max(0,e<u?a.indexOf(e):a.length),a.splice(e+s,0,f[s]);else for(e=Math.max(0,_?a.indexOf(_):a.length),s=0;s<f.length;s++)a.splice(e+s,0,f[s]);if(this._sorted)if(a=this._sortedItems,n)for(s=0;s<f.length;s++)e=n[s],e=Math.max(0,e<u?a.indexOf(e):a.length),a.splice(e+s,0,f[s]);else for(e=Math.max(0,_?a.indexOf(_):a.length),s=0;s<f.length;s++)a.splice(e+s,0,f[s]);this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndices(l)}t.$$_cmd&&this.onRestoreRows(t.$$_cmd,f),this._fireRefresh(),this._fireCountChanged(u)}},onGridDataSetRowDeleting:function(t,e){return!0},onGridDataSetRowDeleted:function(t,e,i){var n,s,r=this.rowCount(),o=this._rows,a=o[e];for(this._sortingDirty=!0,o.splice(e,1),this._hiddenCount-=this._hiddens[e]?1:0,this._hiddens.splice(e,1),s=o.length-1;e<=s;s--)o[s]._dataIndex=s;t.$$_cmd&&this.onSaveRow(t.$$_cmd,a,e),this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildMaxItems():0<this.maxItemCount()?this.$_buildRows(!0):(this._filtered&&0<=(e=(n=this._filteredItems).indexOf(a))&&n.splice(e,1),this._sorted&&0<=(e=(n=this._sortedItems).indexOf(a))&&n.splice(e,1),this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndices(e)),a.$_rowId=i,this._fireItemDeleted(a),this._fireCountChanged(r)},onGridDataSetRowsDeleting:function(t,e){return!0},onGridDataSetRowsDeleted:function(t,e){if(e&&!(e.length<1)){this._sortingDirty=!0,1<e.length&&e.sort(function(t,e){return t-e});var i,n,s,r=this.rowCount(),o=this._rows,a=this._hiddens,h=e[0],l=[];for(i=e.length-1;0<=i;i--)n=e[i],l.push(o[n]),o.splice(n,1),this._hiddenCount-=a[n]?1:0,a.splice(n,1);for(t.$$_cmd&&this.onSaveRows(t.$$_cmd,l),i=this._rows.length-1;h<=i;i--)o[i]._dataIndex=i;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildMaxItems();else if(0<this.maxItemCount())this.$_buildRows(!0);else{if(this._filtered)for(o=this._filteredItems,i=0;i<l.length;i++)s=l[i],0<=(h=o.indexOf(s))&&o.splice(h,1);if(this._sorted)for(o=this._sortedItems,i=0;i<l.length;i++)s=l[i],0<=(h=o.indexOf(s))&&o.splice(h,1);this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndices(h)}this._fireRefresh(),this._fireCountChanged(r)}},onGridDataSetRowUpdating:function(t,e,i){var n,s,r=t.getRow(e),o=t.fields();for(n=0,s=o.length;n<s;n++)if(!o[n].equalValues(r[n],i[n])&&(-1<this._sortFields.indexOf(n)||this.alwaysSorting())){this._sortingDirty=!0;break}return!0},onGridDataSetRowUpdated:function(t,e){var i=this.rowCount();this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildMaxItems():0<this.maxItemCount()?this.$_buildRows(!0):this.$_clearSummary(),this._fireItemUpdated(this._rows[e]),this._fireCountChanged(i)},onGridDataSetRowsUpdated:function(t,e){var i=this.rowCount();this._sortingDirty=!0,this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildMaxItems():0<this.maxItemCount()?this.$_buildRows(!0):this.$_clearSummary(),this._fireRefresh(),this._fireCountChanged(i)},onGridDataSetValueChanging:function(t,e,i,n){return(-1<this._sortFields.indexOf(i)||this.alwaysSorting())&&(this._sortingDirty=!0),!0},onGridDataSetValueChanged:function(t,e,i){var n=this.rowCount();this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildMaxItems():0<this.maxItemCount()?this.$_buildRows(!0):this.$_clearSummary(),this._fireItemUpdated(this._rows[e]),this._fireCountChanged(n)},onGridDataSetRowMoving:function(t,e,i){return!0},onGridDataSetRowMoved:function(t,e,i){var n,s=this.rowCount(),r=this._hiddens;this.refreshItems(!0),r[e]!=r[i]&&(n=r[e],r[e]=r[i],r[i]=n),this._fireCountChanged(s)},onGridDataSetRowsMoving:function(t,e,i,n){return!0},onGridDataSetRowsMoved:function(t,e,i,n){var s,r,o=this._hiddens,a=this.rowCount();if(0<this._hiddenCount)for(o.length=Math.max(o.length,n+i+1),s=o.splice(e,i),r=0;r<i;r++)o.splice(n+r,0,s[r]);this.refreshItems(!0),this._fireCountChanged(a)},onGridDataSetStateChanged:function(t,e,i,n){if(!n){var s=this.rowCount(),r=this._rows[e];r&&(this.$_needFilter()&&this._dataStateFiltering?(this.$_buildMaxItems(),this._fireRefresh()):this._hideDeleted&&(j1.isDeleted(i)||j1.isDeleted(r.dataState()))&&(this.$_needSort()||this._paging?this.$_buildMaxItems():this.$_buildMaxItems(!0,!0),this._fireRefresh()),this._fireRowStateChanged(r)),this._fireCountChanged(s)}},onGridDataSetStatesChanged:function(t,e,i,n){if(!n){var s=this.rowCount();this.$_needFilter()&&this._dataStateFiltering?(this.$_buildMaxItems(),this._fireRefresh()):this._hideDeleted&&i&&(this.$_needSort()||this._paging?this.$_buildMaxItems():this.$_buildMaxItems(!0,!0),this._fireRefresh()),this._fireRowStatesChanged(this.getItemsOfRows(e)),this._fireCountChanged(s)}},onDataSetStatesCleared:function(t){var e=this.rowCount();this.$_needFilter()&&this._dataStateFiltering?(this.$_buildMaxItems(),this._fireRefresh()):this._hideDeleted&&(this.$_needSort()||this._paging?this.$_buildMaxItems():this.$_buildMaxItems(!0,!0),this._fireRefresh()),this._fireRowStatesCleared(),this._fireCountChanged(e)},onGridDataSetTagChanged:function(t,e){var i,n=this._dataTagFiltering&&this.$_needFilter();n&&(i=this.rowCount(),this.$_buildMaxItems(),this._fireRefresh()),this._fireRowTagChanged(this._rows[e]),n&&this._fireCountChanged(i)},onGridDataSetTagsChanged:function(t,e){var i,n=this._dataTagFiltering&&this.$_needFilter();n&&(i=this.rowCount(),this.$_buildMaxItems(),this._fireRefresh()),this._fireRowTagsChanged(this.getItemsOfRows(e)),n&&this._fireCountChanged(i)},onDataSetTagsCleared:function(t){var e,i=this._dataTagFiltering&&this.$_needFilter();i&&(e=this.rowCount(),this.$_buildMaxItems(),this._fireRefresh()),this._fireRowTagsCleared(),i&&this._fireCountChanged(e)}}),$$_DRPP=N27.prototype,p37=I1("ProxyRowProvider",z2,{init:function(t,e){this._super(e),this._initialize(),this.setSource(t)},source:null,setSource:function(t){t!=this._source&&(this._source&&this._source.removeListener(this),this._clearItems(),this._source=t,this._source&&(this._populateItems(),this._source.addListener(this)))},dataSource:function(){return this._source?this._source.dataSource():null},fixedCount:function(){return this._source?this._source.fixedCount():0},maxItemCount:function(){return this._source?this._source.maxItemCount():0},setMaxItemCount:function(t){this._source&&this._source.setMaxItemCount(t)},rowFilter:function(){return this._source&&this._source.rowFilter()},setRowFilter:function(t){this._source&&this._source.setRowFilter(t)},setFixed:function(t,e,i){this._source&&this._source.setFixed(t,e,i)},setAlwaysSorting:function(t){this._source&&this._source.setAlwaysSorting(t)},getIndexOfRow:function(t){return this._source?this._source.getIndexOfRow(t):-1},getItemOfRow:function(t){return this._source?this._source.getItemOfRow(t):null},refreshItems:function(){this._source&&this._source.refreshItems()},_clearDisplayLevels:function(){this._source&&this._source._clearDisplayLevels()},setCellStyle:function(t,e,i){this._source&&this._source.setCellStyle(t,e,i)},removeCellStyle:function(t){this._source&&this._source.removeCellStyle(t)},clearCellStyles:function(){this._source&&this._source.clearCellStyles()},visitAll:function(t,e){return this._source&&this._source.visitAll(t,e)},canInsert:function(t){return this._source&&this._source.canInsert(t)},_initialize:function(){},_clearItems:function(){},_populateItems:function(){this._resetItemIndices(0)},onRowProviderReset:function(t){this._populateItems(),this._fireReset()},onRowProviderRefresh:function(t){this._populateItems(),this._fireRefresh()},onRowProviderIndicesPolluted:function(t){this._resetItemIndices(0),this._fireIndicesPolluted()},onRowProviderUndoStateChanged:function(t,e,i){this._fireUndoStateChanged(e,i)},onRowProviderCountChanged:function(t,e,i){this._fireCountChanged(e,i)},onRowProviderDataCountChanged:function(t,e,i){this._fireDataCountChanged(e,i)},onRowProviderDataCalculated:function(t){this._fireDataCalculated(t)},onRowProviderItemInserted:function(t,e){this._resetItemIndices(0),this._fireItemInserted(e)},onRowProviderItemDeleted:function(t,e){this._resetItemIndices(0),this._fireItemDeleted(e)},onRowProviderItemUpdated:function(t,e){this._resetItemIndices(0),this._fireItemUpdated(e)},onRowProviderCheckableChanged:function(t,e){this._fireCheckableChanged(e)},onRowProviderItemChecked:function(t,e){this._fireItemChecked(e)},onRowProviderItemsChecked:function(t,e,i){this._fireItemsChecked(e,i)},onRowProviderItemAllChecked:function(t,e){this._fireItemAllChecked(e)},onRowProviderRowStateChanged:function(t,e){this._fireRowStateChanged(e)},onRowProviderRowStatesChanged:function(t,e){this._fireRowStatesChanged(e)},onRowProviderRowStatesCleared:function(t){this._fireRowStatesCleared()},onRowProviderRowTagChanged:function(t,e){this._fireRowTagChanged(e)},onRowProviderRowTagsChanged:function(t,e){this._fireRowTagsChanged(e)},onRowProviderRowTagsCleared:function(t){this._fireRowTagsCleared()},onRowProviderFilterAdded:function(t,e,i){this._fireFilterAdded(e,i)},onRowProviderFilterRemoved:function(t,e,i){this._fireFilterRemoved(e,i)},onRowProviderFilterCleared:function(t,e){this._fireFilterCleared(e)},onRowProviderFilterAllCleared:function(t){this._fireFilterAllCleared()},onRowProviderFiltering:function(t){return this._fireFiltering()},onRowProviderFiltered:function(t){this._fireFiltered()},onRowProviderSorting:function(t,e,i,n){return this._fireSorting(e,i,n)},onRowProviderSorted:function(t){this._fireSorted()},onRowProviderPaged:function(t,e){this._firePaged(e)},onRowProviderPageCountChanged:function(t,e,i){this._firePageCountChanged(e,i)},onRowProviderPageIndexChanging:function(t,e,i){return this._firePageIndexChanging(e,i)},onRowProviderPageIndexChanged:function(t,e,i){this._firePageIndexChanged(e,i)}}),U6=I1("GroupRowImpl",j2,{init:function(t,e){this._super(),this._groupField=t,this._value=e,this._footer=null,this._header=null},groupField:function(){return this._groupField},groupValue:function(){return this._value},footer:function(){return this._footer},_addChild:function(t,e,i){this._super(t,e,i),t instanceof m7&&(this._footer=t)}}),Z7=I1("GroupedRowProvider",p37,{init:function(t,e){this._super(t,e)},customRowProvider:null,expandedAdornments:u1(X2,X2.BOTH),collapsedAdornments:u1(X2,X2.HEADER),createFooterCallback:null,expandWhenGrouping:!1,mergeMode:!1,summaryMode:u1(z4,z4.AGGREGATE),descendantCount:function(){return this._rootItem.descendantDataCount()},descendantRowCount:function(){return this._rootItem.descendantRowCount()},getDescendantRows:function(t,e){return this._rootItem.getDescendants(t,e)},visitRows:function(t,e,i){return this._rootItem.visitRows(t,e,i)},grouped:function(){return this._grouped},groupCount:function(){return this._groupFields?this._groupFields.length:0},setExpandedAdornments:function(t){t!=this._expandedAdornments&&(this._expandedAdornments=t,this._grouped&&this.repopulateItems())},setCollapsedAdornments:function(t){t!=this._collapsedAdornments&&(this._collapsedAdornments=t,this._grouped&&this.repopulateItems())},setCreateFooterCallback:function(t){t!=this._createFooterCallback&&(this._createFooterCallback=t,this._grouped&&this.repopulateItems())},setMergeMode:function(t){t!=this._mergeMode&&((this._mergeMode=t)||this._clearDisplayLevels(),this.repopulateItems())},setSummaryMode:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.repopulateItems())},repopulateItems:function(){var t=this.rowCount();this._populateItems();try{this._fireRefresh()}finally{this._fireCountChanged(t,this.rowCount())}},canGrouping:function(t){return this._fireGrouping(t)},groupBy:function(t){this.groupByMode(t,this._mergeMode)},groupByMode:function(t,e){var i=this.rowCount();if(!this._editing){this._mergeMode=e,this._groupFields=t?t.concat():null,e||this._clearDisplayLevels(),this._populateItems(!0);try{this._fireRefresh()}finally{this._fireGrouped(),this._fireCountChanged(i,this.rowCount())}}},isGroupedField:function(t){if(this._groupFields)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return!0;return!1},getGroupLevel:function(t){if(this._groupFields&&0<=t)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return e+1;return 0},getGroupedFields:function(){return this._groupFields?this._groupFields.concat():null},expand:function(t,e,i,n){var s,r,o=this.rowCount(),a=!1;if(!this._editing){if(t){if(t&&(i||!t.expanded())){if(!this._fireExpand(t))return;t.expanded()&&this._visibleItems.collapse(t,!1),(a=this._visibleItems.expand(t,e))&&this._resetItemIndices(t.index())}}else if(e&&i){if(t=this._rootItem,!this._fireExpand(t))return;for(s=t.count();s--;)(r=t.getChild(s))instanceof j2&&(r.expanded()&&this._visibleItems.collapse(r,!1),a=this._visibleItems.expand(r,!0)||a);a&&this._resetItemIndices(0)}if(a)try{this._fireRefresh()}finally{this._fireExpanded(t),this._fireCountChanged(o,this.rowCount())}}},collapse:function(t,e,i){var n=this.rowCount();if(!this._editing&&(t=t||this._rootItem)&&(i||t.expanded())){if(!this._fireCollapse(t))return;if(this._visibleItems.collapse(t,e)){this._resetItemIndices(t.index());try{this._fireRefresh()}finally{this._fireCollapsed(t),this._fireCountChanged(n,this.rowCount())}}}},reveal:function(t){if(t){if(!t.visible()){for(var e=t.parent();e.parent()!=this._rootItem;)e=e.parent();this.expand(e,!0,!0,t.level()-e.level())}return t.visible()}},getNextDataRow:function(t){return this._grouped?this._visibleItems.getNextData(t):this._source.getItem(t.index()+1)},rowCount:function(){return this._grouped?this._visibleItems.count():this._source.rowCount()},canInsert:function(t){return!t||t instanceof v4||(t=this.getNextDataRow(t)),this._super(t)},$_visitChildren:function(t,e){for(var i=0,n=t.count();i<n;i++){var s=t.getItem(i);s instanceof g2&&e(s),s instanceof j2&&this.$_visitChildren(s,e)}},visitAll:function(t,e){if(e||!this._grouped)this._grouped?this._visibleItems.visitAll(t):this._super(t);else{var i=this._visibleItems.fixedCount();if(0<i)for(var n=0;n<i;n++)t(this.getItem(n));this.$_visitChildren(this._rootItem,t)}this._editItem&&t(this._editItem)},getItem:function(t){return this._grouped?this._visibleItems.getCheckedItem(t):this._source.getItem(t)},getItems:function(t,e){if(this._grouped){for(var i=[],n=Math.min(this._visibleItems.count(),t+e-1),s=t;s<n;s++){var r=this._visibleItems.getItem(s);i.push(r)}return i}return this._source.getItems(t,e)},getAllItems:function(){var t;return this._grouped?((t=new O77(this))._clearAndInit(this._source,this.fixedCount()),t.expand(this._rootItem,!0,!1),t.getItems()):(t=this._source)?t.getAllItems():null},getTopItems:function(){return this._grouped?this._rootItem.children():this._source.getAllItems()},getLeafItems:function(t,e){return this._grouped?this._rootItem.getLeaves(t,e):this._source.getAllItems()},getDistinctValues:function(t,e,i){return this._super(t,e,i)},setFixed:function(t,e,i){this._super(t,e,i)},_initialize:function(){this._super(),this._visibleItems=new O77(this),this._rootItem=new n5(this),this._dataGroups=[],this._groupFields=null,this._groupSorting=!1,this._summarizing=!1,this._grouped=!1,this._editItem=null,this._editing=!1},_clearItems:function(){this._visibleItems.clear(),this._rootItem.clear(),this._dataGroups=[]},_populateItems:function(t){var e,i,n,s,r=this._grouped;oldCount=this._rootItem._descendantRowCount;try{if(this._clearItems(),!(e=this._source))return;if(!(i=this.dataSource()))return;if(r=this._grouped,this._groupFields){for(n=this._groupFields.length-1;0<=n;n--)this._groupFields[n]>=i.fieldCount()&&this._groupFields.splice(n,1);this._grouped=0<this._groupFields.length}else this._grouped=!1;s=e.rowCount(),this._grouped&&0<s?(this._buildGroupItems(s),this.$_resetVisibleItems()):this._rootItem._descendantRowCount=s,this._grouped!=r&&this.onGroupedChanged&&this.onGroupedChanged(this,this._grouped)}finally{(t||this._grouped!=r)&&(s=this._rootItem._descendantRowCount)!=oldCount&&this._fireRowCountChanged(oldCount,s)}},_resetItemIndices:function(t){this.isIndexing()&&this._grouped?this._visibleItems._resetIndices(t):this._super(t)},findItem:function(t,e,i,n,s){var r,o,a,h,l,u,d,c,_,f,g=this.dataSource();if(!g)return-1;if((o=this.rowCount())<1)return-1;if((a=Math.min(t.length,e.length))<1)return-1;for(r=[],h=0;h<a;h++)r.push(g.getField(t[h]).dataType()==a1.TEXT);for(c=!i||void 0===i.allFields||i.allFields,textMatch=i&&i.textMatch,_=i&&i.caseSensitive,f=i&&i.partialMatch,n=Math.max(0,n),s=Math.min(o-1,s),h=n;h<=s;h++){if(u=0<=(l=this.$_getItem(h)).dataIndex())for(d=0;d<a;d++){if((u=textMatch||r[d]?$$_compareTextValue(e[d],l.getValue(t[d]),_,f):e[d]==l.getValue(t[d]))&&!c)return h;if(!u&&c)break}if(u)return h}return-1},findCell:function(t,e,i,n,s,r){var o=this.dataSource();if(!o)return null;var a,h,l,u,d,c,_,f,g,m=this.rowCount();if(m<1)return null;for(h=i&&i.textMatch,l=i&&i.caseSensitive,u=i&&i.partialMatch,d=t.length,n=Math.max(0,n),s=Math.min(m-1,s),r=Math.max(0,r),a=[],c=0;c<d;c++)a.push(o.getField(t[c]).dataType()==a1.TEXT);for(r>=t.length&&(n++,r=0),c=n;c<=s;c++)if(0<=(_=this.$_getItem(c)).dataIndex())for(f=n<c?0:r;f<d;f++)if(g=t[f],h||a[f]?$$_compareTextValue(e,_.getValue(g),l,u):e==_.getValue(g))return{rowIndex:c,fieldIndex:g,fieldName:o.getFieldName(g),searchFieldIndex:f};return null},onRowProviderReset:function(t){var e=this._rootItem.descendantRowCount(),i=this.rowCount();this._super(t),this._fireRowCountChanged(e,this._rootItem.descendantRowCount()),this._fireCountChanged(i,this.rowCount())},onRowProviderRefresh:function(t){var e=this._rootItem.descendantRowCount(),i=this.rowCount();this._super(t),this._fireRowCountChanged(e,this._rootItem.descendantRowCount()),this._fireCountChanged(i,this.rowCount())},onRowProviderSummaryCleared:function(t){this._grouped&&this._rootItem._clearSummary()},onRowProviderCountChanged:function(t,e,i){this._fireDataCountChanged(e,i),!this._grouped&&this._fireCountChanged(e,i)},onRowProviderItemInserted:function(t,e){var i,n,s,r,o=this._visibleItems,a=this.rowCount();if(this._grouped){if(i=this.$_findDataParent(e)){for(r=this._rootItem.descendantRowCount(),n=i.count();n--&&!(0<=(s=i.getChild(n).dataIndex())&&s<e.dataIndex()););i.insert(n+1,e,!0),this._groupSorting&&this.$_sortDataGroup(i),this.$_isVisibleDataParent(i)&&(o._addItem(e),o._rearrangeGroup(i)),this._incDescendants(i,1,0),this._super(t,e),this._fireRowCountChanged(r,this._rootItem.descendantRowCount())}else this._populateItems(!0);this._fireRefresh(),this._fireCountChanged(a,this.rowCount())}else this._super(t,e),this._fireRowCountChanged(a-1,this.rowCount())},onRowProviderItemDeleted:function(t,e){var i,n=this._visibleItems,s=this.rowCount();this._grouped?((i=e.parent())&&(1<i.descendantDataCount()?(oldRows=this._rootItem._descendantRowCount,i.remove(e),this.$_isVisibleDataParent(i)&&(n._removeItem(e),n._rearrangeGroup(i)),this._incDescendants(i,-1,0),this._super(t,e),this._fireRowCountChanged(oldRows,this._rootItem._descendantRowCount)):this._populateItems(!0),this._fireRefresh()),this._fireCountChanged(s,this.rowCount())):(this._super(t,e),this._fireRowCountChanged(s+1,this.rowCount()))},onRowProviderItemUpdated:function(t,e){var i,n,s,r=this._visibleItems,o=this.rowCount();if(this._grouped){if(this.$_isValidChild(e))i=e.parent(),this._groupSorting&&this.$_sortDataGroup(i),this.$_isVisibleDataParent(i)&&r._rearrangeGroup(i);else if(n=e.parent(),i=this.$_findDataParent(e)){for(n.remove(e),s=i.count();s--&&!(0<=i.getChild(s).dataIndex()););i.insert(s+1,e),this.$_isVisibleDataParent(n)&&(r._removeItem(e),r._rearrangeGroup(n)),this._incDescendants(n,1,0),this.$_sortDataGroup(i),this.$_isVisibleDataParent(i)&&(r._addItem(e),r._rearrangeGroup(i)),this._incDescendants(n,-1,0),this._super(t,e)}else this._populateItems(!0);this._fireRefresh(),this._fireCountChanged(o,this.rowCount())}else this._super(t,e)},$_setEditing:function(t){this._editing=t},$_getItem:function(t){return this._grouped?this._visibleItems.getItem(t):this._source.getItem(t)},$_resetVisibleItems:function(){this._visibleItems._clearAndInit(this._source,this.fixedCount()),this._source&&this._source.rowCount()>this._visibleItems.fixedCount()&&this._visibleItems.expand(this._rootItem,!1),this._resetItemIndices(0)},$_isChildOf:function(t,e,i,n){var s,r,o,a,h,l;for(i=i||this.dataSource(),h=n||this._groupFields,l=e||t.parent(),s=h.length;s--;){if(r=h[s],o=t.getValue(r),a=l.groupValue(),!i.getField(r).equalValues(o,a))return!1;l=l.parent()}return!0},$_isValidChild:function(t){return this.$_isChildOf(t)},$_isVisibleDataParent:function(t){if(t.expanded()){for(var e=t.parent();e;){if(!e.expanded())return!1;e=e.parent()}return!0}},$_findDataParent:function(t){var e,i=this.dataSource(),n=this._groupFields,s=this._dataGroups;for(e=s.length;e--;)if(this.$_isChildOf(t,s[e],i,n))return s[e];return null},$_sortDataGroup:function(t){for(var e=t._children,i=0,n=e.length-1;i<n&&!(e[i]instanceof v4);)i++;for(;i<n&&!(e[n]instanceof v4);)n--;this._source.$_sortLevel(this._groupFields.length,i,n,e)},_buildGroupItems:function(t){if(t>this.fixedCount()){var e=new b27(this.fixedCount(),t-1);this._buildGroups(e,this._source,this._groupFields),this._buildItems(this._rootItem,e,this._groupFields,this._createFooterCallback),this._mergeMode&&(this._clearDisplayLevels(),this.$_resetDisplayLevels(this._rootItem))}},$_resetDisplayLevels:function(t){for(var e=0,i=t.count();e<i;e++){var n=Q2(t.getItem(e),j2);if(n){var s=Q2(n.firstLeaf(),v4);s&&s._displayLevel<0&&(s._displayLevel=n.level),this.$_resetDisplayLevels(n)}}},_buildGroups:function(t,e,i){var n,s,r,o,a,h,l,u,d,c;if(!(i.length<=t.level||(n=t.startIndex,(s=t.endIndex)<n))){for(r=t.level+1,o=i[t.level],a=this.dataSource().getField(o),l=e.getItem(n).getValue(o),(h=new b27(n,n,l)).level=r,t.children.push(h),u=n+1;u<=s;u++)d=e.getItem(u).getValue(o),a.equalValues(d,l)||(h.endIndex=u-1,(h=new b27(u,u,d)).level=r,t.children.push(h)),l=d;for(h.endIndex=s,c=t.children.length,u=0;u<c;u++)this._buildGroups(t.children[u],e,i)}},_buildItems:function(t,e,i,n){var s,r,o,a,h,l,u,d,c,_=this._mergeMode,f=t.level();if(0<f&&this._customRowProvider&&(s=[],this._customRowProvider.getCustomHeaderRows(t,s),0<s.length&&(t.addAll(s),this._incDescendants(t,0,s.length))),0<(r=e.children.length)){for(o=i[e.level],a=0;a<r;a++)l=e.children[a],(h=_?new P0(o,l.value):new U6(o,l.value))._setExpanded(this.expandWhenGrouping()),t.add(h),this._incDescendants(t,0,1),this._buildItems(h,l,i,n);if(f==i.length-1)for(a=0;a<r;a++)this._dataGroups.push(t.getChild(a))}else u=e.endIndex-e.startIndex+1,d=this._source.getItems(e.startIndex,u),t.addAll(d),this._incDescendants(t,d.length,0);0<f&&(this._customRowProvider&&(s=[],this._customRowProvider.getCustomFooterRows(t,s),0<s.length&&(t.addAll(s),this._incDescendants(t,0,s.length))),n&&!1===n(t,_)||(c=_?new o0:new m7,t.add(c),this._incDescendants(t,0,1)))},_setEditItem:function(t){this._editItem=t},_fireGrouping:function(t){return this.fireConfirmEvent(Z7.GROUPING,t)},_fireGrouped:function(){this.fireEvent(Z7.GROUPED)},_fireExpand:function(t){return this.fireConfirmEvent(Z7.EXPAND,t)},_fireExpanded:function(t){this.fireEvent(Z7.EXPANDED,t)},_fireCollapse:function(t){return this.fireConfirmEvent(Z7.COLLAPSE,t)},_fireCollapsed:function(t){this.fireEvent(Z7.COLLAPSED,t)}},{GROUPING:"onGroupedRowProviderGrouping",GROUPED:"onGroupedRowProviderGrouped",EXPAND:"onGroupedRowProviderExpand",EXPANDED:"onGroupedRowProviderExpanded",COLLAPSE:"onGroupedRowProviderCollapse",COLLAPSED:"onGroupedRowProviderCollapsed"}),t28=0,v58=1,B58=2,T58=3,s58=4,f58=5,k2=I1("EditableRowProvider",p37,{init:function(t,e){this._super(t,e),this._currentIndex=-1,this._currentChanging=!1,this._currentValues={},this._operation=t28,this._orgItem=null,this._editingItem=null,this._insertMode=0,this._modified=!1,this._commiting=!1,this._saveDs=null,t&&(this._saveDs=t.dataSource())&&this._saveDs.registerClient(this),this._editCommands=new s77(this)},isDataEditing:function(t){return this._autoCommit&&this.commit(),this.isEditing()},cancelDataEditing:function(t){this.isEditing()&&this._fireCancelRequest(t)},commitDataEditing:function(t){this.isEditing()&&this._fireCommitRequest()},dataRefreshRequested:function(t){this._fireRefresh()},onEditCommandStackChanged:function(t,e,i){var n=this._saveDs;n?this._fireUndoStateChanged(e||n.canUndo(),i||n.canRedo()):this._fireUndoStateChanged(e,i)},onCurrentChanged:null,undoable:!1,autoCommit:!1,cancelWhenUndo:!0,editingState:u1(T1,T1.NORMAL),checkDiff:!1,checkCellDiff:!1,strictDiff:!1,currentIndex:-1,setUndoable:function(t){t!=this._undoable&&(this._undoable=t,this._editCommands.flush())},setEditingState:function(t){if(t!=this._editingState){var e=this._editingState;this._editingState=t,this._editingStateChanged(e,t)}},isUpdating:function(){return this._editingState==T1.UPDATING},isInserting:function(){return this._editingState==T1.INSERTING},isAppending:function(){return this._editingState==T1.APPENDING},isAdding:function(){return this._editingState==T1.INSERTING||this._editingState==T1.APPENDING},setCurrentIndex:function(t){if(!this._currentChanging&&(t=t instanceof g2?t.index():parseInt(t),!isNaN(t))){this._currentChanging=!0;try{this._doSetCurrent(t)}finally{this._currentChanging=!1}}return this},current:function(){return this.currentIndex()},setCurrent:function(t){this.setCurrentIndex(t)},currentRow:function(){var t=this._currentIndex;return 0<=t&&t<this.rowCount()?this.getItem(t):null},currentDataRow:function(){var t=this._currentIndex;return 0<=t&&t<this.rowCount()?Q2(this.getItem(t),v4):null},currentValues:function(){return this._currentValues},editingItem:function(){return this._commiting||this.isEditing()?this._editingItem:null},execute:function(t){this.undoable()?this._editCommands.execute(t):t.execute()},canUndo:function(){return this._editCommands.canUndo()||this._saveDs&&this._saveDs.canUndo()},canRedo:function(){return this._editCommands.canRedo()||this._saveDs&&this._saveDs.canRedo()},undo:function(){return this.isEditing()?(0<this._editCommands._current||this._cancelWhenUndo)&&this._editCommands.undo():this._saveDs&&this._saveDs.undo(),this},redo:function(){return this.isEditing()?this._editCommands.redo():this._saveDs&&this._saveDs.redo(),this},clearUndo:function(t){this._editCommands.flush(),t&&this._saveDs&&this._saveDs.clearUndo()},update:function(){if(this.isUpdating())return!0;if(!this.isEditing()&&0<=this._currentIndex&&this._currentIndex<this.rowCount())try{return this.$_beginUpdate(this.getItem(this._currentIndex))}catch(t){throw this.cancel(),t}return!1},append:function(t,e){if(this.isAppending())return!0;if(!this.isEditing())try{return this.$_beginAppend(t,e)}catch(t){throw this.cancel(),t}return!1},insert:function(t,e,i,n){if(this.isInserting())return!0;if(!this.isEditing()&&0<=this._currentIndex&&this._currentIndex<this.rowCount())try{return this.$_beginInsert(this.getItem(this._currentIndex),t,e,i,n)}catch(t){throw this.cancel(),t}return!1},remove:function(t){},removeAll:function(t){},getRemovableRows:function(t){return null},removeRows:function(t){},cancel:function(){return!!this.isEditing()&&this._cancelEdit()},commit:function(t){var e,i,n,s,r,o;if(this.isEditing()){this._commiting=!0;try{if(e=this.dataSource()){if(this.isUpdating()&&this.checkDiff())if(s=!1,r=this.strictDiff(),i=this._editingItem.values(),0<=t)s=r?!e.getField(t).equalValues(this._orgItem.getValue(t),i[t]):!e.getField(t).sameValues(this._orgItem.getValue(t),i[t]);else{for(n=i.length,o=0;o<n;o++)if(r){if(!e.getField(o).equalValues(this._orgItem.getValue(o),i[o])){s=!0;break}}else if(!e.getField(o).sameValues(this._orgItem.getValue(o),i[o])){s=!0;break}if(!s)return this._cancelEdit(),!0}return this.$_commitEdit(e,t)}}finally{this._commiting=!1}}return!1},isEditing:function(t){return T1.isEditing(this._editingState)&&(!t||t===this._editingItem||T1.isUpdating(this._editingState)&&t===this._orgItem)},isEdited:function(t){return T1.isEditing(this._editingState)&&(!t||t===this._editingItem||T1.isUpdating(this._editingState)&&t===this._orgItem)&&this._modified},isCellEdited:function(t,e){return this.isEdited(t)&&t.isValueEdited(e)},setDiffs:function(t,e,i){this._checkDiff=t,this._checkCellDiff=e,this._strictDiff=i,this.isEditing()&&this._editingItem.setDiffs(e,i)},rowCount:function(){return this.source().rowCount()},onRowProviderReset:function(t){var e=this.dataSource();e||(this._editingState=T1.NORMAL,this._editingItem=null),this._super(t),e!=this._saveDs&&(this._saveDs&&this._saveDs.unregisterClient(this),this._saveDs=e,this._saveDs&&this._saveDs.registerClient(this),this._currentValues=e?e.getEmptyObject():{})},onRowProviderRefresh:function(t){if(this.isEditing()){var e,i,n=this.dataSource(),s=this._editingItem;this._resetItemIndices(0),this.isUpdating()?(e=n.getRowById(s._rowId))<0?this._cancelEdit():(i=t.getItemOfRow(e),s._dataIndex=i.dataIndex()):this.isInserting()?(e=n.getRowById(s._rowId),i=t.getItemOfRow(e),s._dataIndex=i.dataIndex()):this.isAppending(),this._editingItem&&this.$_checkCurrent(this._editingItem._index,!0)}this._super(t)},onRowProviderUndoStateChanged:function(t,e,i){var n=this._editCommands;this._fireUndoStateChanged(e||n.canUndo(),i||n.canRedo())},onRowProviderItemInserted:function(t,e){if(this.isEditing()){var i,n=this.dataSource(),s=this._editingItem;this._resetItemIndices(0),this.isUpdating()?(i=n.getRowById(s._rowId),e=t.getItemOfRow(i),s._index=e.index(),s._dataIndex=e.dataIndex()):this.isInserting()?(i=n.getRowById(s._rowId),e=t.getItemOfRow(i),s._index=e.index(),s._dataIndex=e.dataIndex()):this.isAppending()&&(s._index=Math.min(s._index,this.rowCount()-1)),this._editingItem&&this.$_checkCurrent(this._editingItem._index,!0)}this._super(t,e)},onRowProviderItemDeleted:function(t,e){if(this.isEditing()){var i,n=this._editingItem;this._resetItemIndices(0),this.isUpdating()?e.$_rowId==n._rowId?this._cancelEdit():(i=this.dataSource().getRowById(n._rowId),e=t.getItemOfRow(i),n._index=e.index(),n._dataIndex=e.dataIndex()):this.isInserting()?(i=this.dataSource().getRowById(n._rowId),e=t.getItemOfRow(i),n._index=e.index(),n._dataIndex=e.dataIndex()):this.isAppending()&&(n._index=Math.min(n._index,this.rowCount()-1)),this._editingItem&&this.$_checkCurrent(this._editingItem._index,!0)}k2.Base.onRowProviderItemDeleted.call(this,t,e)},onRowProviderItemUpdated:function(t,e){if(this.isEditing()){var i,n=this._editingItem;if(this._resetItemIndices(0),this.isUpdating())i=this.dataSource().getRowById(n._rowId),(e=t.getItemOfRow(i))?(n._index=e.index(),n._dataIndex=e.dataIndex()):this._cancelEdit();else if(this.isInserting())if(i=this.dataSource().getRowById(n._rowId),e=t.getItemOfRow(i))n._index=Math.max(0,e.index()-1),n._dataIndex=e.dataIndex();else{var s=Math.max(0,Math.min(t.rowCount(),n._index));n._index=s,n._dataIndex=t.getRow(s).dataIndex()}else this.isAppending()&&(n._index=Math.min(n._index,this.rowCount()-1));this._editingItem&&this.$_checkCurrent(this._editingItem._index,!0)}this._super(t,e)},_doSetCurrent:function(t){var e=this._currentIndex;if((t=Math.max(-1,Math.min(t,this.rowCount()-1)))!=e){try{if(!this.fireConfirmEvent(k2.CURRENT_CHANGING,e,t))return;if(t==(e=this._currentIndex))return;if(this.isEditing()&&t!=this._editingItem.index()&&!this.commit()){if(this.isEdited())return;this.cancel()}}catch(t){if(t instanceof n7)return O0(t.message?t.message:t.toString()),void I7(t);if(t instanceof q0)return;throw t}this._currentIndex=t,this.$_refreshCurrentValues(),this.fireEvent(k2.CURRENT_CHANGED,e,t),this.onCurrentChanged&&this.onCurrentChanged(this,t,e)}},$_refreshCurrentValues:function(){var t,e,i=this._currentValues,n=this._currentIndex;if(0<=n&&(t=this.getItem(n)))return t.copyToObject(i);for(e in i)i[e]=void 0},_editingStateChanged:function(t,e){},_checkEditing:function(){if(!this.isEditing())throw new Error("itemProvider is not editing")},_checkNotEditing:function(){if(this.isEditing())throw new Error("itemProvider is already editing")},$_checkCurrent:function(t,e){if(t!=this._currentIndex){var i=this._currentIndex;this._currentIndex=t,this._fireCurrentChanged(i,t,e)}},$_beginUpdate:function(t){return!(!t||!this._fireUpdating(t)||j1.isDeleted(t.dataState())||(this._orgItem=null,this._modified=!1,this._editingItem=this._doBeginUpdate(t),!this._editingItem||(this._editingItem.beginEdit(this.checkCellDiff(),this.strictDiff()),this._orgItem=t,this.setEditingState(T1.UPDATING),this._doEditingStarted(this._editingItem),this.$_checkCurrent(this._editingItem.index()),this._fireUpdateStarted(this._editingItem),0)))},_doBeginUpdate:function(t){return null},$_beginAppend:function(t,e){var i=e?[]:void 0;return!!this._fireAppending(i)&&(i&&(V1(t)||(t=i)),this._currentIndex,this._modified=!1,this._editingItem=this._doBeginAppend(t),!!this._editingItem&&(this._editingItem.beginEdit(this.checkCellDiff(),this.strictDiff()),this.setEditingState(T1.APPENDING),this._resetItemIndices(0),this._doEditingStarted(this._editingItem),this.$_checkCurrent(this._editingItem.index()),this._fireAppendStarted(this._editingItem),!0))},_doBeginAppend:function(t){return null},$_beginInsert:function(t,e,i,n,s){var r=i?[]:void 0;return!(!t||!this._fireInserting(t,r,n,s)||(r&&(V1(e)||(e=r)),this._modified=!1,this._editingItem=this._doBeginInsert(t,e,n,s),!this._editingItem||(this._editingItem.beginEdit(this.checkCellDiff(),this.strictDiff()),this.setEditingState(T1.INSERTING),this._resetItemIndices(0),this._doEditingStarted(this._editingItem),this.$_checkCurrent(this._editingItem.index()),this._fireInsertStarted(this._editingItem),0)))},_doBeginInsert:function(t,e,i){return null},_cancelEdit:function(){this._checkEditing();var t,e,i=this._editingState;try{t=this._editingItem.index()-(this.isAppending()?1:0),this.setEditingState(T1.NORMAL),this._doCancelEdit(i,this._orgItem)}catch(t){throw this._editingState=i,t}e=this._orgItem,this._modified=!1,this._orgItem=null,this._doEditingFinished(!1),this._editingItem=null;try{this._editCommands.flush(),this._fireCanceled(e,i)}finally{this.$_checkCurrent(Math.min(t,this.rowCount()-1))}},_doCancelEdit:function(t,e){return this._resetItemIndices(0),!0},_updateEditingRow:function(t){return!1},_insertEditingRow:function(t){return!1},$_commitEdit:function(t,e){try{if(!this._fireCommitting(this._editingItem,this._editingState))return!1}catch(t){throw t}var i=this._editingState,n=!1;if(this.isUpdating())try{this.setEditingState(T1.NORMAL),n=this._doCompleteUpdate(this._orgItem,e)}catch(t){throw this.setEditingState(i),t}else try{this.setEditingState(T1.NORMAL),n=this._doCompleteInsert(i==T1.APPENDING,e)}catch(t){throw this.setEditingState(i),t}if(n){this._modified=!1,this._doCommitEdit(i,this._orgItem),this._doEditingFinished(!0);var s=this._editingItem;this._editingItem=null,this._orgItem=null;try{this._editCommands.flush(),this._fireCommitted(s,i)}finally{this.$_checkCurrent(s.index())}}else this.setEditingState(i);return n},_doCompleteUpdate:function(t,e){return!1},_doCompleteInsert:function(t,e){return!1},_doCommitEdit:function(t,e){return!1},_editItemCellUpdated:function(t,e,i,n){this.isEditing(t)&&(this._modified=!0,this._fireCellUpdated(t,e,i,n))},_doEditingStarted:function(t){},_doEditingFinished:function(t){},_fireCurrentChanging:function(t,e){return!(!this.fireConfirmEvent(k2.CURRENT_CHANGING,t,value)||this.onCurrentChanging&&!1===this.onCurrentChanging(this,e,t))},_fireCurrentChanged:function(t,e,i){this.onCurrentChanged&&this.onCurrentChanged(this,e,t),this.fireEvent(k2.CURRENT_CHANGED,t,e,i)},_fireUpdating:function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(k2.UPDATING,t)},_fireUpdateStarted:function(t){this._eventLock<=0&&this.fireEvent(k2.UPDATE_STARTED,t)},_fireAppending:function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(k2.APPENDING,t)},_fireAppendStarted:function(t){this._eventLock<=0&&this.fireEvent(k2.APPEND_STARTED,t)},_fireInserting:function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(k2.INSERTING,t,e)},_fireInsertStarted:function(t){this._eventLock<=0&&this.fireEvent(k2.INSERT_STARTED,t)},_fireCellUpdated:function(t,e,i,n){this._eventLock<=0&&this.fireEvent(k2.CELL_UPDATED,t,e,i,n)},_fireCommitting:function(t,e){return this.fireConfirmEvent(k2.COMMITTING,t,e)},_fireCommitted:function(t,e){this.fireEvent(k2.COMMITTED,t,e)},_fireCanceling:function(t,e){return this.fireConfirmEvent(k2.CANCELING,t,e)},_fireCanceled:function(t,e){this.fireEvent(k2.CANCELED,t,e)},_fireCommitRequest:function(){this.fireEvent(k2.COMMIT_REQUEST)},_fireCancelRequest:function(){this.fireEvent(k2.CANCEL_REQUEST)}});k2.CURRENT_CHANGING="onItemEditCurrentChanging",k2.CURRENT_CHANGED="onItemEditCurrentChanged",k2.UPDATING="onItemEditUpdating",k2.UPDATE_STARTED="onItemEditUpdateStarted",k2.APPENDING="onItemEditAppending",k2.APPEND_STARTED="onItemEditAppendStarted",k2.INSERTING="onItemEditInserting",k2.INSERT_STARTED="onItemEditInsertStarted",k2.CELL_UPDATED="onItemEditCellUpdated",k2.COMMITTING="onItemEditCommitting",k2.COMMITTED="onItemEditCommitted",k2.CANCELING="onItemEditCanceling",k2.CANCELED="onItemEditCanceled",k2.COMMIT_REQUEST="onItemEditCommitRequest",k2.CANCEL_REQUEST="onItemEditCancelRequest";var P27=I1("EditRow",v4,{init:function(t,e,i,n,s,r){this._super(n),this._target=e,t.attachItem(this),this._index=i,this._dataRow=n,this._rowId=s,this._state=r,this._values=[],this._displayLevel=e?e.displayLevel():0,this._started=!1,this._checkDiff=!1,this._strictDiff=!1},values:null,target:function(){return this._target},values_:function(){return this._values.concat()},setValues:function(t){var e,i,n,s,r,o=this.provider(),a=this.dataSource(),h=a.fieldCount();if(V1(t))for(h=Math.min(h,t.length),e=0;e<h;e++)n=a.getField(e),s=this._values[e],r=n.readValue(t[e]),this._values[e]=r,this._started&&!n.equalValues(s,r)&&o._editItemCellUpdated(this,e,s,r);else if(t)for(e=0;e<h;e++)i=a.getFieldName(e),t.hasOwnProperty(i)&&(n=a.getField(e),s=this._values[e],r=n.readValue(t[i]),this._values[e]=r,this._started&&!n.equalValues(s,r)&&o._editItemCellUpdated(this,e,s,r))},setDiffs:function(t,e){this._checkDiff=t,this._strictDiff=e},beginEdit:function(t,e){this._started=!0,this.setDiffs(t,e)},setEditValue:function(t,e,i){var n,s,r=this.dataSource();if(t<0&&t>=r.fieldCount())throw new RangeError("field index is out of bounds: "+t);n=r.getField(t),s=this._values[t],e=n.readValue(e),this._values[t]=e,!i&&r.updateDerivedValues(this._dataRow,this._values,t),this._started&&!n.equalValues(s,e)&&this.provider()._editItemCellUpdated(this,t,s,e)},isValueEdited:function(t){var e;return T1.isInserting(this._state)||!(e=this.dataSource()).getField(t).equalValues(e.getValue(this._dataRow,t),this._values[t])},isEditing:function(){return!0},rowState:function(){return this._state},getValue:function(t){var e=this.dataSource();if((t=e.getFieldIndexEx(t))<0&&t>=e.fieldCount())throw new RangeError("field index is out of bounds: "+t);return this._values[t]},setValue:function(t,e,i){var n,s,r,o=this.dataSource();if((t=o.getFieldIndexEx(t))<0&&t>=o.fieldCount())throw new RangeError("field index is out of bounds: "+t);n=o.getField(t),s=this._values[t],e=n.readValue(e),(r=!this._checkDiff)||(r=this._strictDiff?!n.equalValues(s,e):!n.sameValues(s,e)),r&&(this._values[t]=e,!i&&o.updateDerivedValues(this._dataRow,this._values,t),this.provider()._editItemCellUpdated(this,t,s,e))},getRowData:function(){return this._values.concat()},getRowObject:function(){var t,e,i,n=this.dataSource();if(n){for(t=n.fieldCount(),e={},i=0;i<t;i++)e[n.getFieldName(i)]=this._values[i];return e}return null},copyToObject:function(t){var e,i,n=this.dataSource();if(n)for(e=n.fieldCount(),i=0;i<e;i++)t[n.getFieldName(i)]=this._values[i]},_clearDisplayLevels:function(){var t,e=this._rows.length;for(t=0;t<e;t++)this._rows[t]._displayLevel=-1}}),R28=I1("EditableRowProviderImpl",k2,{init:function(t,e){this._super(t,e),this._insertRow=-1},_resetItemIndices:function(t){if(this._super(t),this._indexing&&this.isUpdating()){var e=this._editingItem.index();e<this.source().rowCount()&&(this.source().getItem(e)._index=e)}},rowCount:function(){var t=this.source().rowCount();return this.isInserting()||this.isAppending()?t+1:t},descendantCount:function(){return this.source().descendantCount()},getItem:function(t){var e=this._editingItem._index;return this.isEditing()&&e==t?this._editingItem:this.isAdding()&&e<t?this.source().getItem(t-1):this.source().getItem(t)},_doBeginUpdate:function(t){return this._editingItem=this._createEditItem(t,T1.UPDATING,null),this._editingItem},_doBeginAppend:function(t){return this._editingItem=this._createEditItem(null,T1.APPENDING,t),this._editingItem},_doBeginInsert:function(t,e,i,n){return this._editingItem=this._createEditItem(t,T1.INSERTING,e,i,n),this._editingItem},_doCancelEdit:function(t,e){this._super(t,e)},_doCommitEdit:function(t,e){this._super(t,e)},_doCompleteUpdate:function(t,e){var i=this.dataSource();if(i){var n=this._editingItem;return this._copyExtents(n,t),0<=e?i.setValue(n.dataIndex(),e,n.getValue(e)):i.updateRow(n.dataIndex(),n.values())}return!1},_doCompleteInsert:function(t,e){var i,n,s,r,o,a=!1,h=this.dataSource();if(h){if(i=this._editingItem,n=t?h.rowCount():this._insertRow,s=i.values(),n<0){for(r=i.index()-1;0<=r;r--)if(0<(n=this.getItem(r).dataIndex())){n++;break}n=Math.max(0,n)}(a=h.insertRow(n,s,e))&&(o=this.getItemOfRow(n),this._copyExtents(i,o))}return a},remove:function(t){var e,i=this.dataSource();t&&!this.isEditing(t)&&i&&0<=(e=t.dataIndex())&&i.deleteRow(e)},removeAll:function(t){if(t&&0!=t.length){var e,i,n,s,r=this.dataSource();if(r)if(1<(e=t.length)){for(n=[],s=0;s<e;s++)0<=(i=this.getItem(t[s]).dataIndex())&&n.push(i);1<n.length?r.deleteRows(n):1==n.length&&r.deleteRow(n[0])}else 1==e&&0<=(i=this.getItem(t[0]).dataIndex())&&r.deleteRow(i)}},revert:function(t){var e,i,n;t instanceof g2||(t=this.getItem(t)),t&&(e=this.dataSource())&&(i=t.dataIndex(),(n=e.getRowState(i))==j1.DELETED?e.setRowState(i,j1.NONE):n==j1.CREATE_AND_DELETED&&e.setRowState(i,j1.CREATED))},revertAll:function(t){if(t&&0!=t.length){var e,i,n,s,r=this.dataSource();if(r)for(e=t.length;e--;)(i=this.getItem(t[e]))&&0<=(n=i.dataIndex())&&((s=r.getRowState(n))==j1.DELETED?r.setRowState(n,j1.NONE):s==j1.CREATE_AND_DELETED&&r.setRowState(n,j1.CREATED))}},getRemovableRows:function(t){if(!t||0==t.length)return null;var e,i,n,s=[];for(e=0,i=t.length;e<i;e++)0<=(n=this.getItem(t[e]).dataIndex())&&s.push(n);return s},removeRows:function(t){t&&(1<t.length?this.dataSource().deleteRows(t):this.dataSource().deleteRow(t[0]))},_createEditItem:function(t,e,i){var n=this.dataSource();if(!n)return null;var s,r=null,o=n.fieldCount();switch(e){case T1.UPDATING:for(r=new P27(this,t,t.index(),t.dataIndex(),t.dataId(),e),s=0;s<o;s++)r.setEditValue(s,t.getValue(s),!0);this._copyExtents(t,r);break;case T1.INSERTING:case T1.APPENDING:if(r=e==T1.APPENDING?new P27(this,null,this.rowCount(),-1,-1,e):new P27(this,t,t.index(),-1,t.dataId(),e),e==T1.INSERTING&&(this._insertRow=t.dataIndex()),i){for(s=0;s<o;s++)i.length>s&&r.setEditValue(s,i[s],!0);r&&n.updateDerivedValues(r._dataRow,r._values,-1)}}return r}}),d6=I1("GridRowProvider",R28,{init:function(t){this._super(null,t),(this._pubItems=this)._groupSorting=!0,this._groupSortDirection=M4.ASCENDING,this._groupSortCase=g7.SENSITIVE;var e=this._itemProvider=new N27(!1);e.onSaveRow=function(t,e,i){this.fireEvent(d6.SAVE_ROW,t,e,i)}.bind(this),e.onSaveRows=function(t,e){this.fireEvent(d6.SAVE_ROWS,t,e)}.bind(this),e.onRestoreRow=function(t,e,i){this.fireEvent(d6.RESTORE_ROW,t,e,i)}.bind(this),e.onRestoreRows=function(t,e){this.fireEvent(d6.RESTORE_ROWS,t,e)}.bind(this),this._groupedProvider=new Z7(e,!1),this.setSource(this._groupedProvider),this._groupedProvider.onGroupedChanged=function(t,e){this.$_resetPubItems()}.bind(this),this._summarizer=new w07(e),this.$_resetPubItems()},passiveFiltering:!1,setCustomRowProvider:function(t){this._groupedProvider.setCustomRowProvider(t)},hideDeleted:function(){return this._itemProvider.hideDeleted()},setHideDeleted:function(t){this._itemProvider.setHideDeleted(t)},setSummaryMode:function(t){this._itemProvider.setSummaryMode(t)},setRowGroupSummaryMode:function(t){this._groupedProvider.setSummaryMode(t)},setMergeMode:function(t){this._groupedProvider.setMergeMode(t)},sortMode:function(){return this._itemProvider.sortMode()},setSortMode:function(t){this._itemProvider.setSortMode(t)},filterMode:function(){return this._itemProvider.filterMode()},setFilterMode:function(t){this._itemProvider.setFilterMode(t)},pageSorting:function(){return this._itemProvider.pageSorting()},setPageSorting:function(t){return this._itemProvider.setPageSorting(t)},pageFiltering:function(){return this._itemProvider.pageFiltering()},setPageFiltering:function(t){return this._itemProvider.setPageFiltering(t)},isGrouped:function(){return this._groupedProvider.grouped()},isMergedRowGrouped:function(){return this._groupedProvider.grouped()&&this._groupedProvider.mergeMode()},groupLevels:function(){return this._groupedProvider.groupCount()},groupByFields:function(){return this._groupedProvider.getGroupedFields()},summarizer:function(){return this._summarizer},dataStateFiltering:function(){return this._itemProvider.dataStateFiltering()},setDataStateFiltering:function(t){return this._itemProvider.setDataStateFiltering(t)},dataTagFiltering:function(){return this._itemProvider.dataTagFiltering()},setDataTagFiltering:function(t){return this._itemProvider.setDataTagFiltering(t)},sortFirst:function(){return this._itemProvider.sortFirst()},setSortFirst:function(t){return this._itemProvider.setSortFirst(t)},isSorted:function(){return this._itemProvider.isSorted()},isFiltered:function(){return this._itemProvider.isFiltered()},setDataSource:function(t){this._itemProvider.setDataSource(t)},getRowsOfDataRows:function(t,e){return this._itemProvider.getItemsOfRows(t,e)},clearSummary:function(){this._itemProvider.$_clearSummary()},resetCustomGroupItems:function(t){this._groupedProvider.repopulateItems()},getFieldDomain:function(t){this._itemProvider.getFieldDomain(t)},canFiltering:function(){return!this.isEditing()},addFilter:function(t,e){this.canFiltering()&&this._itemProvider.addFilter(t,e)},removeFilter:function(t,e){this.canFiltering()&&this._itemProvider.removeFilter(e)},clearFilters:function(t){this.canFiltering()&&this._itemProvider.clearFilters(t)},clearAllFilters:function(){this.canFiltering()&&this._itemProvider.clearAllFilters()},beginFiltering:function(){this.canFiltering()&&this._itemProvider.beginFilter()},endFiltering:function(){this.canFiltering()&&this._itemProvider.endFilter()},canSorting:function(t,e,i){return!this.isEditing()},orderBy:function(t,e,i){if(this.canSorting(t,e,i))if(this._groupedProvider.grouped()){var n,s,r,o,a,h,l=e?e.length:0,u=i?i.length:0,d=this._groupedProvider.getGroupedFields(),c=this._itemProvider.getSortDirections(),_=this._itemProvider.getSortCases(),f=[];for(n=0,s=d.length;n<s;n++)f.push(d[n]);for(n=0,s=t.length;n<s;n++)r=t[n],o=f.indexOf(r),a=n<l?e[n]:0<l?e[l-1]:M4.ASCENDING,h=n<u?i[n]:0<u?i[u-1]:g7.SENSITIVE,o<0?(f.push(r),c[f.length-1]=a,_[f.length-1]=h):(c[o]=a,_[o]=h);d=f,this._itemProvider.orderBy(d,c,_)}else this._itemProvider.orderBy(t,e,i)},getSortFieldCount:function(){return this._itemProvider.getSortFieldCount()},getSortFields:function(){return this._itemProvider.getSortFields()},getSortDirections:function(){return this._itemProvider.getSortDirections()},getSortCases:function(){return this._itemProvider.getSortCases()},canGrouping:function(t){return!this.isEditing()&&this._groupedProvider.canGrouping(t)},groupBy:function(t,e,i,n){this.canGrouping(t)&&(t&&!(t.length<1)||this._groupedProvider.grouped())&&(this._groupSorting=e,this._groupSortDirection=i,this._groupSortCase=n||g7.SENSITIVE,e&&this._itemProvider.orderBy(t,[i],[this._groupSortCase],!1),this._groupedProvider.groupBy(t))},groupByMode:function(t,e){this.canGrouping(t)&&(this._groupSorting&&this._itemProvider.orderBy(t,[this._groupSortDirection],[this._groupSortCase],!1),this._groupedProvider.groupByMode(t,e))},addGroupBy:function(t,e,i,n,s){var r;this._groupedProvider.groupCount()<1?r=[e]:(r=this._groupedProvider.getGroupedFields(),t=parseInt(t),isNaN(t)?r.push(e):(t=Math.max(0,Math.min(r.length,t)),r.splice(t,0,e))),this.canGrouping(r)&&(this._groupSorting=i,this._groupSortDirection=n,this._groupSortCase=s,i&&this._itemProvider.orderBy(r,[n],[s],!1),this._groupedProvider.groupBy(r))},removeGroupBy:function(t){if(this._groupedProvider.grouped()){var e,i=-1,n=this._groupedProvider.getGroupedFields();for(e=n.length-1;0<=e;e--)if(n[e]==t){i=e;break}if(0<=i){if(n.splice(i,1),!this.canGrouping(n))return;this._groupSorting&&this._itemProvider.orderBy(n,[this._groupSortDirection],null,!1),this._groupedProvider.groupBy(n)}else{if(!this.canGrouping(null))return;this._groupSorting&&this._itemProvider.orderBy(null,null,null,!1)}}},getGroupLevels:function(){return this._groupedProvider.groupCount()},isGroupedField:function(t){return this._groupedProvider.isGroupedField(t)},getGroupLevel:function(t){return this._groupedProvider.getGroupLevel(t)},getGroupByFieldCount:function(){return this._groupedProvider.groupCount()},setExpandWhenGrouping:function(t){this._groupedProvider.setExpandWhenGrouping(t)},setGroupedStyle:function(t,e,i){this._groupedProvider.setExpandedAdornments(t),this._groupedProvider.setCollapsedAdornments(e),this._groupedProvider.setCreateFooterCallback(i)},expand:function(t,e,i){this._groupedProvider.expand(t,e,i)},collapse:function(t,e,i){this._groupedProvider.collapse(t,e,i)},reveal:function(t){return this._pubItems!==this._groupedProvider||this._pubItems.reveal(t)},canPaging:function(){return!this.isEditing()},setPaging:function(t,e,i,n){return this.canPaging()&&this._itemProvider.setPaging(t,e,i,n),this},isPaging:function(){return this._itemProvider.isPaging()},pageIndex:function(){return this._itemProvider.page()},setPageIndex:function(t){return this.canPaging()&&this._itemProvider.setPage(t),this},pageSize:function(){return this._itemProvider.pageSize()},setPageSize:function(t){return this.canPaging()&&this._itemProvider.setPageSize(t),this},pageCount:function(){return this._itemProvider.pageCount()},setPageCount:function(t){return this.canPaging()&&this._itemProvider.setPageCount(t),this},pageOffset:function(){return this._itemProvider.pageOffset()},setPageOffset:function(t){return this.canPaging()&&this._itemProvider.setPageOffset(t),this},setPageAndOffset:function(t,e){return this.canPaging()&&this._itemProvider.setPageAndOffset(t,e),this},pageRows:function(){return this._itemProvider.pageRows()},setPageRows:function(t){return this.canPaging()&&this._itemProvider.setPageRows(t),this},setPageAndRows:function(t,e){return this.canPaging()&&this._itemProvider.setPageAndRows(t,e),this},getDisplayItemIndex:function(t){return this._itemProvider.isPaging()?t.index()+this._itemProvider.pageStartIndex():t.index()},setExpandWhenGrouping:function(t){this._groupedProvider.setExpandWhenGrouping(t)},getDataRow:function(t){return this._itemProvider.getDataRow(t)},isRowHidden:function(t){return this._itemProvider.isRowHidden(t)},setHiddenRow:function(t,e){return this._itemProvider.setHiddenRow(t,e)},getHiddenRows:function(){return this._itemProvider.getHiddenRows()},setHiddenRows:function(t,e){return this._itemProvider.setHiddenRows(t,e)},unhideAllRows:function(){return this._itemProvider.unhideAllRows()},hiddenRowCount:function(){return this._itemProvider.hiddenCount()},dataSource:function(){return this._itemProvider.dataSource()},setDataSource:function(t){this._itemProvider.setDataSource(t)},getItem:function(t){return this._pubItems===this?this._super(t):this._pubItems.getItem(t)},_editingStateChanged:function(t,e){this.$_resetPubItems()},getAllItems:function(){return this._groupedProvider.getAllItems()},getTopItems:function(){return this._groupedProvider.getTopItems()},getLeafItems:function(t,e){return this._groupedProvider.getLeafItems(t,e)},getDistinctValues:function(t,e,i){return this._itemProvider.getDistinctValues(t,e,i)},findItem:function(t,e,i,n,s){return this._groupedProvider.findItem(t,e,i,n,s)},findCell:function(t,e,i,n,s,r){return this._groupedProvider.findCell(t,e,i,n,s,r)},getIndexOfRow:function(t){return this._itemProvider.getIndexOfRow(t)},getItemOfRow:function(t,e){return this._itemProvider.getItemOfRow(t,e)},_doEditingStarted:function(t){this._itemProvider.$_setEditing(!0),this._groupedProvider.$_setEditing(!0)},_doEditingFinished:function(t){this._itemProvider.$_setEditing(!1),this._groupedProvider.$_setEditing(!1)},_doBeginUpdate:function(t){var e=this._super(t);return this._groupedProvider._setEditItem(e),e},_doBeginAppend:function(t){var e=this._super(t);return this._groupedProvider._setEditItem(e),e},_doBeginInsert:function(t,e,i,n){var s=this._super(t,e,i,n);return this._groupedProvider._setEditItem(s),s},_doCancelEdit:function(t,e){this._super(t,e),this._groupedProvider._setEditItem(null)},_doCommitEdit:function(t,e){this._super(t,e),this._groupedProvider._setEditItem(null)},$_resetPubItems:function(){W77(Z07,o8)||delete Z7.prototype.grouped,T1.isEditing(this._editingState)?this._pubItems=this:this._groupedProvider.grouped()?this._pubItems=this._groupedProvider:this._pubItems=this._itemProvider},descendantCount:function(){return this._pubItems==this._itemProvider?this._pubItems.descendantCount():this._groupedProvider.descendantCount()},descendantRowCount:function(){return this._pubItems==this._itemProvider?this._pubItems.descendantRowCount():this._groupedProvider.descendantRowCount()},getDescendantRows:function(t,e){return this._pubItems==this._itemProvider?this._pubItems.getDescendantRows(t,e):this._groupedProvider.getDescendantRows(t,e)},visitRows:function(t,e,i){return this._pubItems==this._itemProvider?this._pubItems.visitRows(t,e,i):this._groupedProvider.visitRows(t,e,i)},onRowProviderDataCountChanged:function(t,e,i){this._fireDataCountChanged(e,i)},onRowProviderRowCountChanged:function(t,e,i){this._fireRowCountChanged(e,i)},onGroupedRowProviderGrouping:function(t,e){return this.fireConfirmEvent(Z7.GROUPING,e)},onGroupedRowProviderGrouped:function(t){this.fireEvent(Z7.GROUPED)},onGroupedRowProviderExpand:function(t,e){return this.fireConfirmEvent(Z7.EXPAND,e)},onGroupedRowProviderExpanded:function(t,e){this.fireEvent(Z7.EXPANDED,e)},onGroupedRowProviderCollapse:function(t,e){return this.fireConfirmEvent(Z7.COLLAPSE,e)},onGroupedRowProviderCollapsed:function(t,e){this.fireEvent(Z7.COLLAPSED,e)}},{SAVE_ROW:"onGridRowProviderSaveRow",SAVE_ROWS:"onGridRowProviderSaveRows",RESTORE_ROW:"onGridRowProviderRestoreRow",RESTORE_ROWS:"onGridRowProviderRestoreRows"}),D7=A2("TextWrap",{NONE:"none",EXPLICIT:"explicit",NORMAL:"normal"}),u58=A2("TextOverflow",{CLIP:"clip",ELLIPSIS:"ellipsis",PATH:"path"}),v1=A2("Alignment",{NEAR:"near",CENTER:"center",FAR:"far"}),w28=A2("TextDecoration",{NONE:"none",UNDERLINE:"underline",OVERLINE:"overline",LINE_THROUGH:"lineThrough"}),n2=A2("IconLocation",{LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",LEFT_SIDE:"leftSide",RIGHT_SIDE:"rightSide",TOP_SIDE:"topSide",BOTTOM_SIDE:"bottomSide",CENTER:"center",CENTER_BACK:"centerBack",NONE:"none"},{isHorz:function(t){return t==n2.LEFT||t==n2.RIGHT||t==n2.LEFT_SIDE||t==n2.RIGHT_SIDE||t==n2.CENTER||t==n2.CENTER_BACK},isVert:function(t){return t==n2.TOP||t==n2.BOTTOM||t==n2.TOP_SIDE||t==n2.BOTTOM_SIDE||t==n2.CENTER||t==n2.CENTER_BACK},isStrictVert:function(t){return t==n2.TOP||t==n2.BOTTOM||t==n2.TOP_SIDE||t==n2.BOTTOM_SIDE},isCenter:function(t){return t==n2.CENTER||t==n2.CENTER_BACK}}),W3=I1("Dimension",null,{init:function(t){this._super(),this._value=NaN,this._valuePercent=!1,t&&this.setSize(t)},size:null,minSize:null,maxSize:null,setSize:function(t){if(t!=this.size){this._size=t;var e=this.parse(t);this._value=e.value,this._valuePercent=e.percent}},fixed:function(){return!this._valuePercent&&!isNaN(this._value)},getDimension:function(t){var e=t;return isNaN(this._value)||(e=this._value?this._valuePercent?this._value*t/100:this._value:0),e},equals:function(t){return this._value==t._value&&this._valuePercent==t._valuePercent},toString:function(){return this._size||""},parse:function(t){var e,i={value:NaN,percent:!1};return t&&(t=String(t).trim())&&(e=t.length,i.percent="%"==t.charAt(e-1),i.percent?0<(e=(t=t.substring(0,e-1)).length)&&(i.value=Number(t)):i.value=Number(t)),i}},{areEquals:function(t,e){return t===e||!(!t||!e)&&t.equals(e)}},function(t){t.NULL=new t}),$$_FONT_REG=new RegExp("\\s*,\\s*"),$$_STYLE_PROP_MAP={renderer:"setRenderer",background:"setBackground",inactiveBackground:"setInactiveBackground",selectedBackground:"setSelectedBackground",hoveredBackground:"setHoveredBackground",color:"setColor",inactiveColor:"setInactiveColor",selectedColor:"setSelectedColor",hoveredColor:"setHoveredColor",border:"setBorder",borderLeft:"setBorderLeft",borderRight:"setBorderRight",borderTop:"setBorderTop",borderBottom:"setBorderBottom",borderLeftSize:"setBorderLeftSize",borderRightSize:"setBorderRightSize",borderTopSize:"setBorderTopSize",borderBottomSize:"setBorderBottomSize",borderRadius:"setBorderRadius",line:"setLine",textAlignment:"setTextAlignment",lineAlignment:"setLineAlignment",textWrap:"setTextWrap",textFormat:"setTextFormat",numberFormat:"setNumberFormat",datetimeFormat:"setDatetimeFormat",booleanFormat:"setBooleanFormat",prefix:"setPrefix",suffix:"setSuffix",font:"setFont",fontName:"setFontName",fontSize:"setFontSize",fontBold:"setFontBold",fontItalic:"setFontItalic",textDecoration:"setTextDecoration",textDecorationColor:"setTextDecorationColor",textShadow:"setTextShadow",marginLeft:"setMarginLeft",marginRight:"setMarginRight",marginTop:"setMarginTop",marginBottom:"setMarginBottom",paddingLeft:"setPaddingLeft",paddingRight:"setPaddingRight",paddingTop:"setPaddingTop",paddingBottom:"setPaddingBottom",iconIndex:"setIconIndex",iconLocation:"setIconLocation",iconAlignment:"setIconAlignment",iconOffset:"setIconOffset",iconPadding:"setIconPadding",iconAlpha:"setIconAlpha",shapeName:"setShapeName",shapeColor:"setShapeColor",shapeColors:"setShapeColors",shapeInactiveColor:"setShapeInactiveColor",shapeSelectedColor:"setShapeSelectedColor",shapeHoveredColor:"setShapeHoveredColor",shapeBorder:"setShapeBorder",shapeInactiveBorder:"setShapeInactiveBorder",shapeSelectedBorder:"setShapeSelectedBorder",shapeHoveredBorder:"setShapeHoveredBorder",shapeLocation:"setShapeLocation",shapeAlignment:"setShapeAlignment",shapeOffset:"setShapeOffset",shapePadding:"setShapePadding",shapeSize:"setShapeSize",shapeRotate:"setShapeRotate",shapeInnerName:"setShapeInnerName",shapeInnerColor:"setShapeInnerColor",shapeInnerSize:"setShapeInnerSize",shapeInnerRotate:"setShapeInnerRotate"},o1=I1("GridStyles",null,{init:function(t,e,i,n){this._super(!0),this._owner=t,this._name=e,this._parent=null,this._sysDefault=null,this._values=[],void(this._updateLock=0)!==n&&(this._fireEvents=n),this._scope=t&&t.getPaletteScope&&t.getPaletteScope(),i&&this.extend(i,!1)},name:null,fireEvents:!0,parent:function(){return this._parent},sysDefault:function(){return this._sysDefault},setParent:function(t,e){return t!==this._parent&&(this._parent=t,(void 0===e||e)&&this._fireEvents&&this.changed(o1.STYLE_ALL)),this},setSysDefault:function(t,e){return t!==this._sysDefault&&(this._sysDefault=t,(void 0===e||e)&&this._fireEvents&&this.changed(o1.STYLE_ALL)),this},isEmpty:function(){return this._values.length<=0},renderer:void 0,renderer_:function(){return this.searchStyles(o1.RENDERER)._renderer},setRenderer:function(t){void 0!==t?this._values[o1.RENDERER]&&t===this._renderer||(this._renderer=t,this._values[o1.RENDERER]=!0,this._fireEvents&&this.changed(o1.RENDERER)):this._values[o1.RENDERER]&&(delete this._renderer,this._values[o1.RENDERER]=!1,this._fireEvents&&this.changed(o1.RENDERER))},background:void 0,background_:function(){var t=this.searchStyles(o1.BACKGROUND)._background;return t&&t.fetch?t.fetch(this._scope):t},setBackground:function(t){void 0!==t?this._values[o1.BACKGROUND]&&t===this._background||(t=X4(t,this._scope),this._background=t,this._values[o1.BACKGROUND]=!0,this._fireEvents&&this.changed(o1.BACKGROUND)):this._values[o1.BACKGROUND]&&(delete this._background,this._values[o1.BACKGROUND]=!1,this._fireEvents&&this.changed(o1.BACKGROUND))},$_setBackground:function(t){this._background=t,this._values[o1.BACKGROUND]=!0},inactiveBackground:void 0,inactiveBackground_:function(){var t=this.searchStyles(o1.INACTIVE_BACKGROUND)._inactiveBackground;return t&&t.fetch?t.fetch(this._scope):t},setInactiveBackground:function(t){void 0!==t?this._values[o1.INACTIVE_BACKGROUND]&&t===this._inactiveBackground||(t=X4(t,this._scope),this._inactiveBackground=t,this._values[o1.INACTIVE_BACKGROUND]=!0,this._fireEvents&&this.changed(o1.INACTIVE_BACKGROUND)):this._values[o1.INACTIVE_BACKGROUND]&&(delete this._inactiveBackground,this._values[o1.INACTIVE_BACKGROUND]=!1,this._fireEvents&&this.changed(o1.INACTIVE_BACKGROUND))},selectedBackground:void 0,selectedBackground_:function(){var t=this.searchStyles(o1.SELECTED_BACKGROUND)._selectedBackground;return t&&t.fetch?t.fetch(this._scope):t},setSelectedBackground:function(t){void 0!==t?this._values[o1.SELECTED_BACKGROUND]&&t===this._selectedBackground||(t=X4(t,this._scope),this._selectedBackground=t,this._values[o1.SELECTED_BACKGROUND]=!0,this._fireEvents&&this.changed(o1.SELECTED_BACKGROUND)):this._values[o1.SELECTED_BACKGROUND]&&(delete this._selectedBackground,this._values[o1.SELECTED_BACKGROUND]=!1,this._fireEvents&&this.changed(o1.SELECTED_BACKGROUND))},hoveredBackground:void 0,hoveredBackground_:function(){var t=this.searchStyles(o1.HOVERED_BACKGROUND)._hoveredBackground;return t&&t.fetch?t.fetch(this._scope):t},setHoveredBackground:function(t){void 0!==t?this._values[o1.HOVERED_BACKGROUND]&&t===this._hoveredBackground||(t=X4(t,this._scope),this._hoveredBackground=t,this._values[o1.HOVERED_BACKGROUND]=!0,this._fireEvents&&this.changed(o1.HOVERED_BACKGROUND)):this._values[o1.HOVERED_BACKGROUND]&&(delete this._hoveredBackground,this._values[o1.HOVERED_BACKGROUND]=!1,this._fireEvents&&this.changed(o1.HOVERED_BACKGROUND))},color:void 0,color_:function(){var t=this.searchStyles(o1.COLOR)._color;return t&&t.fetch?t.fetch(this._scope):t},setColor:function(t){void 0!==t?this._values[o1.COLOR]&&t===this._color||(t=X4(t,this._scope),this._color=t,this._values[o1.COLOR]=!0,this._fireEvents&&this.changed(o1.COLOR)):this._values[o1.COLOR]&&(delete this._color,this._values[o1.COLOR]=!1,this._fireEvents&&this.changed(o1.COLOR))},inactiveColor:void 0,inactiveColor_:function(){var t=this.searchStyles(o1.INACTIVE_COLOR)._inactiveColor;return t&&t.fetch?t.fetch(this._scope):t},setInactiveColor:function(t){void 0!==t?this._values[o1.INACTIVE_COLOR]&&t===this._inactiveColor||(t=X4(t,this._scope),this._inactiveColor=t,this._values[o1.INACTIVE_COLOR]=!0,this._fireEvents&&this.changed(o1.INACTIVE_COLOR)):this._values[o1.INACTIVE_COLOR]&&(delete this._inactiveColor,this._values[o1.INACTIVE_COLOR]=!1,this._fireEvents&&this.changed(o1.INACTIVE_COLOR))},selectedColor:void 0,selectedColor_:function(){var t=this.searchStyles(o1.SELECTED_COLOR)._selectedColor;return t&&t.fetch?t.fetch(this._scope):t},setSelectedColor:function(t){void 0!==t?this._values[o1.SELECTED_COLOR]&&t===this._selectedColor||(t=X4(t,this._scope),this._selectedColor=t,this._values[o1.SELECTED_COLOR]=!0,this._fireEvents&&this.changed(o1.SELECTED_COLOR)):this._values[o1.SELECTED_COLOR]&&(delete this._selectedColor,this._values[o1.SELECTED_COLOR]=!1,this._fireEvents&&this.changed(o1.SELECTED_COLOR))},hoveredColor:void 0,hoveredColor_:function(){var t=this.searchStyles(o1.HOVERED_COLOR)._hoveredColor;return t&&t.fetch?t.fetch(this._scope):t},setHoveredColor:function(t){void 0!==t?this._values[o1.HOVERED_COLOR]&&t===this._hoveredColor||(t=X4(t,this._scope),this._hoveredColor=t,this._values[o1.HOVERED_COLOR]=!0,this._fireEvents&&this.changed(o1.HOVERED_COLOR)):this._values[o1.HOVERED_COLOR]&&(delete this._hoveredColor,this._values[o1.HOVERED_COLOR]=!1,this._fireEvents&&this.changed(o1.HOVERED_COLOR))},border:void 0,border_:function(){var t=this.searchStyles(o1.BORDER)._border;return t&&t.fetch?t.fetch(this._scope):t},setBorder:function(t){void 0!==t?this._values[o1.BORDER]&&t===this._border||(t=h4(t),this._border=t,this._values[o1.BORDER]=!0,this._fireEvents&&this.changed(o1.BORDER)):this._values[o1.BORDER]&&(delete this._border,this._values[o1.BORDER]=!1,this._fireEvents&&this.changed(o1.BORDER))},borderWidth:function(){var t=this.border();return t?t.width():0},borderLeft:void 0,borderLeft_:function(){var t=this.searchStyles(o1.BORDER_LEFT)._borderLeft;return t&&t.fetch?t.fetch(this._scope):t},setBorderLeft:function(t){void 0!==t?this._values[o1.BORDER_LEFT]&&t===this._borderLeft||(t=h4(t),this._borderLeft=t,this._values[o1.BORDER_LEFT]=!0,this._fireEvents&&this.changed(o1.BORDER_LEFT)):this._values[o1.BORDER_LEFT]&&(delete this._borderLeft,this._values[o1.BORDER_LEFT]=!1,this._fireEvents&&this.changed(o1.BORDER_LEFT))},borderLeftWidth:function(){var t=this.borderLeft();return t?t.width():0},borderRight:void 0,borderRight_:function(){var t=this.searchStyles(o1.BORDER_RIGHT)._borderRight;return t&&t.fetch?t.fetch(this._scope):t},setBorderRight:function(t){void 0!==t?this._values[o1.BORDER_RIGHT]&&t===this._borderRight||(t=h4(t),this._borderRight=t,this._values[o1.BORDER_RIGHT]=!0,this._fireEvents&&this.changed(o1.BORDER_RIGHT)):this._values[o1.BORDER_RIGHT]&&(delete this._borderRight,this._values[o1.BORDER_RIGHT]=!1,this._fireEvents&&this.changed(o1.BORDER_RIGHT))},borderRightWidth:function(){var t=this.borderRight();return t?t.width():0},borderHorzWidth:function(){var t=this.borderLeft(),e=t?t.width():0;return(t=this.borderRight())&&(e+=t.width()),e},borderTop:void 0,borderTop_:function(){var t=this.searchStyles(o1.BORDER_TOP)._borderTop;return t&&t.fetch?t.fetch(this._scope):t},setBorderTop:function(t){void 0!==t?this._values[o1.BORDER_TOP]&&t===this._borderTop||(t=h4(t),this._borderTop=t,this._values[o1.BORDER_TOP]=!0,this._fireEvents&&this.changed(o1.BORDER_TOP)):this._values[o1.BORDER_TOP]&&(delete this._borderTop,this._values[o1.BORDER_TOP]=!1,this._fireEvents&&this.changed(o1.BORDER_TOP))},borderTopWidth:function(){var t=this.borderTop();return t?t.width():0},borderBottom:void 0,borderBottom_:function(){var t=this.searchStyles(o1.BORDER_BOTTOM)._borderBottom;return t&&t.fetch?t.fetch(this._scope):t},setBorderBottom:function(t){void 0!==t?this._values[o1.BORDER_BOTTOM]&&t===this._borderBottom||(t=h4(t),this._borderBottom=t,this._values[o1.BORDER_BOTTOM]=!0,this._fireEvents&&this.changed(o1.BORDER_BOTTOM)):this._values[o1.BORDER_BOTTOM]&&(delete this._borderBottom,this._values[o1.BORDER_BOTTOM]=!1,this._fireEvents&&this.changed(o1.BORDER_BOTTOM))},borderBottomWidth:function(){var t=this.borderBottom();return t?t.width():0},borderVertWidth:function(){var t=this.borderTop(),e=t?t.width():0;return(t=this.borderBottom())&&(e+=t.width()),e},borderLeftSize:void 0,borderLeftSize_:function(){return this.searchStyles(o1.BORDER_LEFT_SIZE)._borderLeftSize},setBorderLeftSize:function(t){void 0!==t?this._values[o1.BORDER_LEFT_SIZE]&&t===this._borderLeft||(this._borderLeftSize=o1.getDimension(t),this._values[o1.BORDER_LEFT_SIZE]=!0,this._fireEvents&&this.changed(o1.BORDER_LEFT_SIZE)):this._values[o1.BORDER_LEFT_SIZE]&&(delete this._borderLeftSize,this._values[o1.BORDER_LEFT_SIZE]=!1,this._fireEvents&&this.changed(o1.BORDER_LEFT_SIZE))},borderRightSize:void 0,borderRightSize_:function(){return this.searchStyles(o1.BORDER_RIGHT_SIZE)._borderRightSize},setBorderRightSize:function(t){void 0!==t?this._values[o1.BORDER_RIGHT_SIZE]&&t===this._borderRight||(this._borderRightSize=o1.getDimension(t),this._values[o1.BORDER_RIGHT_SIZE]=!0,this._fireEvents&&this.changed(o1.BORDER_RIGHT_SIZE)):this._values[o1.BORDER_RIGHT_SIZE]&&(delete this._borderRightSize,this._values[o1.BORDER_RIGHT_SIZE]=!1,this._fireEvents&&this.changed(o1.BORDER_RIGHT_SIZE))},borderTopSize:void 0,borderTopSize_:function(){return this.searchStyles(o1.BORDER_TOP_SIZE)._borderTopSize},setBorderTopSize:function(t){void 0!==t?this._values[o1.BORDER_TOP_SIZE]&&t===this._borderTop||(this._borderTopSize=o1.getDimension(t),this._values[o1.BORDER_TOP_SIZE]=!0,this._fireEvents&&this.changed(o1.BORDER_TOP_SIZE)):this._values[o1.BORDER_TOP_SIZE]&&(delete this._borderTopSize,this._values[o1.BORDER_TOP_SIZE]=!1,this._fireEvents&&this.changed(o1.BORDER_TOP_SIZE))},borderBottomSize:void 0,borderBottomSize_:function(){return this.searchStyles(o1.BORDER_BOTTOM_SIZE)._borderBottomSize},setBorderBottomSize:function(t){void 0!==t?this._values[o1.BORDER_BOTTOM_SIZE]&&t===this._borderBottom||(this._borderBottomSize=o1.getDimension(t),this._values[o1.BORDER_BOTTOM_SIZE]=!0,this._fireEvents&&this.changed(o1.BORDER_BOTTOM_SIZE)):this._values[o1.BORDER_BOTTOM_SIZE]&&(delete this._borderBottomSize,this._values[o1.BORDER_BOTTOM_SIZE]=!1,this._fireEvents&&this.changed(o1.BORDER_BOTTOM_SIZE))},borderRadius:void 0,borderRadius_:function(){return this.searchStyles(o1.BORDER_RADIUS)._borderRadius},setBorderRadius:function(t){void 0!==t?this._values[o1.BORDER_RADIUS]&&t===this._borderRadius||(this._borderRadius=t,this._values[o1.BORDER_RADIUS]=!0,this._fireEvents&&this.changed(o1.BORDER_RADIUS)):this._values[o1.BORDER_RADIUS]&&(delete this._borderRadius,this._values[o1.BORDER_RADIUS]=!1,this._fireEvents&&this.changed(o1.BORDER_RADIUS))},line:void 0,line_:function(){var t=this.searchStyles(o1.LINE)._line;return t&&t.fetch?t.fetch(this._scope):t},setLine:function(t){void 0!==t?this._values[o1.LINE]&&t===this._line||(t=h4(t),this._line=t,this._values[o1.LINE]=!0,this._fireEvents&&this.changed(o1.LINE)):this._values[o1.LINE]&&(delete this._line,this._values[o1.LINE]=!1,this._fireEvents&&this.changed(o1.LINE))},lineWidth:function(){var t=this.lineBottom();return t?t.width():0},fontName:void 0,fontName_:function(){return this.searchStyles(o1.FONT_NAME)._fontName},setFontName:function(t){void 0!==t?this._values[o1.FONT_NAME]&&t===this._fontName||(this._fontName=t,this._values[o1.FONT_NAME]=!0,this._fireEvents&&this.changed(o1.FONT_NAME)):this._values[o1.FONT_NAME]&&(delete this._fontName,this._values[o1.FONT_NAME]=!1,this._fireEvents&&this.changed(o1.FONT_NAME))},fontSize:void 0,fontSize_:function(){return this.searchStyles(o1.FONT_SIZE)._fontSize},setFontSize:function(t){void 0!==t?(S97(t)?(t=parseFloat(t.substr(0,t.length-2)),isNaN(t)||(t=Math.round(97*t/76))):t=parseInt(t),this._values[o1.FONT_SIZE]&&t===this._fontSize||(this._fontSize=t,this._values[o1.FONT_SIZE]=!0,this._fireEvents&&this.changed(o1.FONT_SIZE))):this._values[o1.FONT_SIZE]&&(delete this._fontSize,this._values[o1.FONT_SIZE]=!1,this._fireEvents&&this.changed(o1.FONT_SIZE))},fontBold:void 0,fontBold_:function(){return this.searchStyles(o1.FONT_BOLD)._fontBold},setFontBold:function(t){void 0!==t?(t=t&&"false"!==t,this._values[o1.FONT_BOLD]&&t===this._fontBold||(this._fontBold=t,this._values[o1.FONT_BOLD]=!0,this._fireEvents&&this.changed(o1.FONT_BOLD))):this._values[o1.FONT_BOLD]&&(delete this._fontBold,this._values[o1.FONT_BOLD]=!1,this._fireEvents&&this.changed(o1.FONT_BOLD))},fontItalic:void 0,fontItalic_:function(){return this.searchStyles(o1.FONT_ITALIC)._fontItalic},setFontItalic:function(t){void 0!==t?(t=t&&"false"!==t,this._values[o1.FONT_ITALIC]&&t===this._fontItalic||(this._fontItalic=t,this._values[o1.FONT_ITALIC]=!0,this._fireEvents&&this.changed(o1.FONT_ITALIC))):this._values[o1.FONT_ITALIC]&&(delete this._fontItalic,this._values[o1.FONT_ITALIC]=!1,this._fireEvents&&this.changed(o1.FONT_ITALIC))},textDecoration:void 0,textDecoration_:function(){return this.searchStyles(o1.TEXT_DECORATION)._textDecoration},setTextDecoration:function(t){void 0!==t?this._values[o1.TEXT_DECORATION]&&t===this._textDecoration||(this._textDecoration=t,this._values[o1.TEXT_DECORATION]=!0,this._fireEvents&&this.changed(o1.TEXT_DECORATION)):this._values[o1.TEXT_DECORATION]&&(delete this._textDecoration,this._values[o1.TEXT_DECORATION]=!1,this._fireEvents&&this.changed(o1.TEXT_DECORATION))},textDecorationColor:void 0,textDecorationColor_:function(){return this.searchStyles(o1.TEXT_DECORATION_COLOR)._textDecorationColor},setTextDecorationColor:function(t){void 0!==t?this._values[o1.TEXT_DECORATION_COLOR]&&t===this._textDecorationColor||(t=h4(t),this._textDecorationColor=t,this._values[o1.TEXT_DECORATION_COLOR]=!0,this._fireEvents&&this.changed(o1.TEXT_DECORATION_COLOR)):this._values[o1.TEXT_DECORATION_COLOR]&&(delete this._textDecorationColor,this._values[o1.TEXT_DECORATION_COLOR]=!1,this._fireEvents&&this.changed(o1.TEXT_DECORATION_COLOR))},textShadow:void 0,textShadow_:function(){return this.searchStyles(o1.TEXT_SHADOW)._textShadow},setTextShadow:function(t){void 0!==t?(t=U97(t),this._values[o1.TEXT_SHADOW]&&t===this._textShadow||(this._textShadow=t,this._values[o1.TEXT_SHADOW]=!0,this._fireEvents&&this.changed(o1.TEXT_SHADOW))):this._values[o1.TEXT_SHADOW]&&(delete this._textShadow,this._values[o1.TEXT_SHADOW]=!1,this._fireEvents&&this.changed(o1.TEXT_SHADOW))},textAlignment:void 0,textAlignment_:function(){return this.searchStyles(o1.TEXT_ALIGNMENT)._textAlignment},setTextAlignment:function(t){void 0!==t?this._values[o1.TEXT_ALIGNMENT]&&t===this._textAlignment||(this._textAlignment=t,this._values[o1.TEXT_ALIGNMENT]=!0,this._fireEvents&&this.changed(o1.TEXT_ALIGNMENT)):this._values[o1.TEXT_ALIGNMENT]&&(delete this._textAlignment,this._values[o1.TEXT_ALIGNMENT]=!1,this._fireEvents&&this.changed(o1.TEXT_ALIGNMENT))},lineAlignment:void 0,lineAlignment_:function(){return this.searchStyles(o1.LINE_ALIGNMENT)._lineAlignment},setLineAlignment:function(t){void 0!==t?this._values[o1.LINE_ALIGNMENT]&&t===this._lineAlignment||(this._lineAlignment=t,this._values[o1.LINE_ALIGNMENT]=!0,this._fireEvents&&this.changed(o1.LINE_ALIGNMENT)):this._values[o1.LINE_ALIGNMENT]&&(delete this._lineAlignment,this._values[o1.LINE_ALIGNMENT]=!1,this._fireEvents&&this.changed(o1.LINE_ALIGNMENT))},textWrap:void 0,textWrap_:function(){return this.searchStyles(o1.TEXT_WRAP)._textWrap},setTextWrap:function(t){void 0!==t?this._values[o1.TEXT_WRAP]&&t===this._textWrap||(this._textWrap=t,this._values[o1.TEXT_WRAP]=!0,this._fireEvents&&this.changed(o1.TEXT_WRAP)):this._values[o1.TEXT_WRAP]&&(delete this._textWrap,this._values[o1.TEXT_WRAP]=!1,this._fireEvents&&this.changed(o1.TEXT_WRAP))},textFormat:void 0,textFormat_:function(){return this.searchStyles(o1.TEXT_FORMAT)._textFormat},setTextFormat:function(t){void 0!==t?this._values[o1.TEXT_FORMAT]&&t===this._textFormat||(this._textFormat=t,this._values[o1.TEXT_FORMAT]=!0,this._fireEvents&&this.changed(o1.TEXT_FORMAT)):this._values[o1.TEXT_FORMAT]&&(delete this._textFormat,this._values[o1.TEXT_FORMAT]=!1,this._fireEvents&&this.changed(o1.TEXT_FORMAT))},numberFormat:void 0,numberFormat_:function(){return this.searchStyles(o1.NUMBER_FORMAT)._numberFormat},setNumberFormat:function(t){void 0!==t?this._values[o1.NUMBER_FORMAT]&&t===this._numberFormat||(this._numberFormat=t,this._values[o1.NUMBER_FORMAT]=!0,this._fireEvents&&this.changed(o1.NUMBER_FORMAT)):this._values[o1.NUMBER_FORMAT]&&(delete this._numberFormat,this._values[o1.NUMBER_FORMAT]=!1,this._fireEvents&&this.changed(o1.NUMBER_FORMAT))},datetimeFormat:void 0,datetimeFormat_:function(){return this.searchStyles(o1.DATETIME_FORMAT)._datetimeFormat},setDatetimeFormat:function(t){void 0!==t?this._values[o1.DATETIME_FORMAT]&&t===this._datetimeFormat||(this._datetimeFormat=t,this._values[o1.DATETIME_FORMAT]=!0,this._fireEvents&&this.changed(o1.DATETIME_FORMAT)):this._values[o1.DATETIME_FORMAT]&&(delete this._datetimeFormat,this._values[o1.DATETIME_FORMAT]=!1,this._fireEvents&&this.changed(o1.DATETIME_FORMAT))},booleanFormat:void 0,booleanFormat_:function(){return this.searchStyles(o1.BOOLEAN_FORMAT)._booleanFormat},setBooleanFormat:function(t){void 0!==t?this._values[o1.BOOLEAN_FORMAT]&&t===this._booleanFormat||(this._booleanFormat=t,this._values[o1.BOOLEAN_FORMAT]=!0,this._fireEvents&&this.changed(o1.BOOLEAN_FORMAT)):this._values[o1.BOOLEAN_FORMAT]&&(delete this._booleanFormat,this._values[o1.BOOLEAN_FORMAT]=!1,this._fireEvents&&this.changed(o1.BOOLEAN_FORMAT))},prefix:void 0,prefix_:function(){return this.searchStyles(o1.PREFIX)._prefix},setPrefix:function(t){void 0!==t?this._values[o1.PREFIX]&&t===this._prefix||(this._prefix=t,this._values[o1.PREFIX]=!0,this._fireEvents&&this.changed(o1.PREFIX)):this._values[o1.PREFIX]&&(delete this._prefix,this._values[o1.PREFIX]=!1,this._fireEvents&&this.changed(o1.PREFIX))},suffix:void 0,suffix_:function(){return this.searchStyles(o1.SUFFIX)._suffix},setSuffix:function(t){void 0!==t?this._values[o1.SUFFIX]&&t===this._suffix||(this._suffix=t,this._values[o1.SUFFIX]=!0,this._fireEvents&&this.changed(o1.SUFFIX)):this._values[o1.SUFFIX]&&(delete this._suffix,this._values[o1.SUFFIX]=!1,this._fireEvents&&this.changed(o1.SUFFIX))},marginLeft:void 0,marginLeft_:function(){return this.searchStyles(o1.MARGIN_LEFT)._marginLeft},setMarginLeft:function(t){void 0!==t?(t=parseInt(t),this._values[o1.MARGIN_LEFT]&&t===this._marginLeft||(this._marginLeft=t,this._values[o1.MARGIN_LEFT]=!0,this._fireEvents&&this.changed(o1.MARGIN_LEFT))):this._values[o1.MARGIN_LEFT]&&(delete this._marginLeft,this._values[o1.MARGIN_LEFT]=!1,this._fireEvents&&this.changed(o1.MARGIN_LEFT))},marginRight:void 0,marginRight_:function(){return this.searchStyles(o1.MARGIN_RIGHT)._marginRight},setMarginRight:function(t){void 0!==t?(t=parseInt(t),this._values[o1.MARGIN_RIGHT]&&t===this._marginRight||(this._marginRight=t,this._values[o1.MARGIN_RIGHT]=!0,this._fireEvents&&this.changed(o1.MARGIN_RIGHT))):this._values[o1.MARGIN_RIGHT]&&(delete this._marginRight,this._values[o1.MARGIN_RIGHT]=!1,this._fireEvents&&this.changed(o1.MARGIN_RIGHT))},marginTop:void 0,marginTop_:function(){return this.searchStyles(o1.MARGIN_TOP)._marginTop},setMarginTop:function(t){void 0!==t?(t=parseInt(t),this._values[o1.MARGIN_TOP]&&t===this._marginTop||(this._marginTop=t,this._values[o1.MARGIN_TOP]=!0,this._fireEvents&&this.changed(o1.MARGIN_TOP))):this._values[o1.MARGIN_TOP]&&(delete this._marginTop,this._values[o1.MARGIN_TOP]=!1,this._fireEvents&&this.changed(o1.MARGIN_TOP))},marginBottom:void 0,marginBottom_:function(){return this.searchStyles(o1.MARGIN_BOTTOM)._marginBottom},setMarginBottom:function(t){void 0!==t?(t=parseInt(t),this._values[o1.MARGIN_BOTTOM]&&t===this._marginBottom||(this._marginBottom=t,this._values[o1.MARGIN_BOTTOM]=!0,this._fireEvents&&this.changed(o1.MARGIN_BOTTOM))):this._values[o1.MARGIN_BOTTOM]&&(delete this._marginBottom,this._values[o1.MARGIN_BOTTOM]=!1,this._fireEvents&&this.changed(o1.MARGIN_BOTTOM))},marginHorz:function(){return this.marginLeft()+this.marginRight()},marginVert:function(){return this.marginTop()+this.marginBottom()},paddingLeft:void 0,paddingLeft_:function(){return this.searchStyles(o1.PADDING_LEFT)._paddingLeft},setPaddingLeft:function(t){void 0!==t?(t=parseInt(t),this._values[o1.PADDING_LEFT]&&t===this._paddingLeft||(this._paddingLeft=t,this._values[o1.PADDING_LEFT]=!0,this._fireEvents&&this.changed(o1.PADDING_LEFT))):this._values[o1.PADDING_LEFT]&&(delete this._paddingLeft,this._values[o1.PADDING_LEFT]=!1,this._fireEvents&&this.changed(o1.PADDING_LEFT))},paddingRight:void 0,paddingRight_:function(){return this.searchStyles(o1.PADDING_RIGHT)._paddingRight},setPaddingRight:function(t){void 0!==t?(t=parseInt(t),this._values[o1.PADDING_RIGHT]&&t===this._paddingRight||(this._paddingRight=t,this._values[o1.PADDING_RIGHT]=!0,this._fireEvents&&this.changed(o1.PADDING_RIGHT))):this._values[o1.PADDING_RIGHT]&&(delete this._paddingRight,this._values[o1.PADDING_RIGHT]=!1,this._fireEvents&&this.changed(o1.PADDING_RIGHT))},paddingTop:void 0,paddingTop_:function(){return this.searchStyles(o1.PADDING_TOP)._paddingTop},setPaddingTop:function(t){void 0!==t?(t=parseInt(t),this._values[o1.PADDING_TOP]&&t===this._paddingTop||(this._paddingTop=t,this._values[o1.PADDING_TOP]=!0,this._fireEvents&&this.changed(o1.PADDING_TOP))):this._values[o1.PADDING_TOP]&&(delete this._paddingTop,this._values[o1.PADDING_TOP]=!1,this._fireEvents&&this.changed(o1.PADDING_TOP))},paddingBottom:void 0,paddingBottom_:function(){return this.searchStyles(o1.PADDING_BOTTOM)._paddingBottom},setPaddingBottom:function(t){void 0!==t?(t=parseInt(t),this._values[o1.PADDING_BOTTOM]&&t===this._paddingBottom||(this._paddingBottom=t,this._values[o1.PADDING_BOTTOM]=!0,this._fireEvents&&this.changed(o1.PADDING_BOTTOM))):this._values[o1.PADDING_BOTTOM]&&(delete this._paddingBottom,this._values[o1.PADDING_BOTTOM]=!1,this._fireEvents&&this.changed(o1.PADDING_BOTTOM))},paddingHorz:function(){return this.paddingLeft()+this.paddingRight()},paddingVert:function(){return this.paddingTop()+this.paddingBottom()},spaceLeft:function(){return this.paddingLeft()+this.marginLeft()},spaceRight:function(){return this.paddingRight()+this.marginRight()},spaceHorz:function(){return this.paddingLeft()+this.paddingRight()+this.marginLeft()+this.marginRight()},spaceTop:function(){return this.paddingTop()+this.marginTop()},spaceBottom:function(){return this.paddingBottom()+this.marginBottom()},spaceVert:function(){return this.paddingTop()+this.paddingBottom()+this.marginTop()+this.marginBottom()},iconIndex:void 0,iconIndex_:function(){return this.searchStyles(o1.ICON_INDEX)._iconIndex},setIconIndex:function(t){void 0!==t?this._values[o1.ICON_INDEX]&&t===this._iconIndex||(this._iconIndex=t,this._values[o1.ICON_INDEX]=!0,this._fireEvents&&this.changed(o1.ICON_INDEX)):this._values[o1.ICON_INDEX]&&(delete this._iconIndex,this._values[o1.ICON_INDEX]=!1,this._fireEvents&&this.changed(o1.ICON_INDEX))},iconLocation:void 0,iconLocation_:function(){return this.searchStyles(o1.ICON_LOCATION)._iconLocation},setIconLocation:function(t){void 0!==t?this._values[o1.ICON_LOCATION]&&t===this._iconLocation||(this._iconLocation=t,this._values[o1.ICON_LOCATION]=!0,this._fireEvents&&this.changed(o1.ICON_LOCATION)):this._values[o1.ICON_LOCATION]&&(delete this._iconLocation,this._values[o1.ICON_LOCATION]=!1,this._fireEvents&&this.changed(o1.ICON_LOCATION))},iconAlignment:void 0,iconAlignment_:function(){return this.searchStyles(o1.ICON_ALIGNMENT)._iconAlignment},setIconAlignment:function(t){void 0!==t?this._values[o1.ICON_ALIGNMENT]&&t===this._iconAlignment||(this._iconAlignment=t,this._values[o1.ICON_ALIGNMENT]=!0,this._fireEvents&&this.changed(o1.ICON_ALIGNMENT)):this._values[o1.ICON_ALIGNMENT]&&(delete this._iconAlignment,this._values[o1.ICON_ALIGNMENT]=!1,this._fireEvents&&this.changed(o1.ICON_ALIGNMENT))},iconOffset:void 0,iconOffset_:function(){return this.searchStyles(o1.ICON_OFFSET)._iconOffset},setIconOffset:function(t){void 0!==t?(t=parseInt(t),this._values[o1.ICON_OFFSET]&&t===this._iconOffset||(this._iconOffset=t,this._values[o1.ICON_OFFSET]=!0,this._fireEvents&&this.changed(o1.ICON_OFFSET))):this._values[o1.ICON_OFFSET]&&(delete this._iconOffset,this._values[o1.ICON_OFFSET]=!1,this._fireEvents&&this.changed(o1.ICON_OFFSET))},iconPadding:void 0,iconPadding_:function(){return this.searchStyles(o1.ICON_PADDING)._iconPadding},setIconPadding:function(t){void 0!==t?(t=parseInt(t),this._values[o1.ICON_PADDING]&&t===this._iconPadding||(this._iconPadding=t,this._values[o1.ICON_PADDING]=!0,this._fireEvents&&this.changed(o1.ICON_PADDING))):this._values[o1.ICON_PADDING]&&(delete this._iconPadding,this._values[o1.ICON_PADDING]=!1,this._fireEvents&&this.changed(o1.ICON_PADDING))},iconAlpha:void 0,iconAlpha_:function(){return this.searchStyles(o1.ICON_ALPHA)._iconAlpha},setIconAlpha:function(t){void 0!==t?(t=parseFloat(t),this._values[o1.ICON_ALPHA]&&t===this._iconAlpha||(this._iconAlpha=t,this._values[o1.ICON_ALPHA]=!0,this._fireEvents&&this.changed(o1.ICON_ALPHA))):this._values[o1.ICON_ALPHA]&&(delete this._iconAlpha,this._values[o1.ICON_ALPHA]=!1,this._fireEvents&&this.changed(o1.ICON_ALPHA))},shapeName:void 0,shapeName_:function(){return this.searchStyles(o1.SHAPE_NAME)._shapeName},setShapeName:function(t){void 0!==t?this._values[o1.SHAPE_NAME]&&t===this._shapeName||(this._shapeName=t,this._values[o1.SHAPE_NAME]=!0,this._fireEvents&&this.changed(o1.SHAPE_NAME)):this._values[o1.SHAPE_NAME]&&(delete this._shapeName,this._values[o1.SHAPE_NAME]=!1,this._fireEvents&&this.changed(o1.SHAPE_NAME))},shapeColor:void 0,shapeColor_:function(){var t=this.searchStyles(o1.SHAPE_COLOR)._shapeColor;return t&&t.fetch?t.fetch(this._scope):t},setShapeColor:function(t){void 0!==t?this._values[o1.SHAPE_COLOR]&&t===this._shapeColor||(t=X4(t,this._scope),this._shapeColor=t,this._values[o1.SHAPE_COLOR]=!0,this._fireEvents&&this.changed(o1.SHAPE_COLOR)):this._values[o1.SHAPE_COLOR]&&(delete this._shapeColor,this._values[o1.SHAPE_COLOR]=!1,this._fireEvents&&this.changed(o1.SHAPE_COLOR))},shapeColors:void 0,shapeColors_:function(){var t=this.searchStyles(o1.SHAPE_COLORS)._shapeColors;return!t||t instanceof j8||!this._scope||(t=this._scope.getPalette(t)),t},setShapeColors:function(t){void 0!==t?(t="string"==typeof t?t:V1(t)?new j8(this,t):null,this._values[o1.SHAPE_COLORS]&&t===this._shapeColors||(this._shapeColors=t,this._values[o1.SHAPE_COLORS]=!0,this._fireEvents&&this.changed(o1.SHAPE_COLORS))):this._values[o1.SHAPE_COLORS]&&(delete this._shapeColors,this._values[o1.SHAPE_COLORS]=!1,this._fireEvents&&this.changed(o1.SHAPE_COLORS))},shapeInactiveColor:void 0,shapeInactiveColor_:function(){var t=this.searchStyles(o1.SHAPE_INACTIVE_COLOR)._shapeInactiveColor;return t&&t.fetch?t.fetch(this._scope):t},setShapeInactiveColor:function(t){void 0!==t?this._values[o1.SHAPE_INACTIVE_COLOR]&&t===this._shapeInactiveColor||(t=X4(t,this._scope),this._shapeInactiveColor=t,this._values[o1.SHAPE_INACTIVE_COLOR]=!0,this._fireEvents&&this.changed(o1.SHAPE_INACTIVE_COLOR)):this._values[o1.SHAPE_INACTIVE_COLOR]&&(delete this._shapeInactiveColor,this._values[o1.SHAPE_INACTIVE_COLOR]=!1,this._fireEvents&&this.changed(o1.SHAPE_INACTIVE_COLOR))},shapeSelectedColor:void 0,shapeSelectedColor_:function(){var t=this.searchStyles(o1.SHAPE_SELECTED_COLOR)._shapeSelectedColor;return t&&t.fetch?t.fetch(this._scope):t},setShapeSelectedColor:function(t){void 0!==t?this._values[o1.SHAPE_SELECTED_COLOR]&&t===this._shapeSelectedColor||(t=X4(t,this._scope),this._shapeSelectedColor=t,this._values[o1.SHAPE_SELECTED_COLOR]=!0,this._fireEvents&&this.changed(o1.SHAPE_SELECTED_COLOR)):this._values[o1.SHAPE_SELECTED_COLOR]&&(delete this._shapeSelectedColor,this._values[o1.SHAPE_SELECTED_COLOR]=!1,this._fireEvents&&this.changed(o1.SHAPE_SELECTED_COLOR))},shapeHoveredColor:void 0,shapeHoveredColor_:function(){var t=this.searchStyles(o1.SHAPE_HOVERED_COLOR)._shapeHoveredColor;return t&&t.fetch?t.fetch(this._scope):t},setShapeHoveredColor:function(t){void 0!==t?this._values[o1.SHAPE_HOVERED_COLOR]&&t===this._shapeHoveredColor||(t=X4(t,this._scope),this._shapeHoveredColor=t,this._values[o1.SHAPE_HOVERED_COLOR]=!0,this._fireEvents&&this.changed(o1.SHAPE_HOVERED_COLOR)):this._values[o1.SHAPE_HOVERED_COLOR]&&(delete this._shapeHoveredColor,this._values[o1.SHAPE_HOVERED_COLOR]=!1,this._fireEvents&&this.changed(o1.SHAPE_HOVERED_COLOR))},shapeBorder:void 0,shapeBorder_:function(){var t=this.searchStyles(o1.SHAPE_BORDER)._shapeBorder;return t&&t.fetch?t.fetch(this._scope):t},setShapeBorder:function(t){void 0!==t?this._values[o1.SHAPE_BORDER]&&t===this._shapeBorder||(t=h4(t),this._shapeBorder=t,this._values[o1.SHAPE_BORDER]=!0,this._fireEvents&&this.changed(o1.SHAPE_BORDER)):this._values[o1.SHAPE_BORDER]&&(delete this._shapeBorder,this._values[o1.SHAPE_BORDER]=!1,this._fireEvents&&this.changed(o1.SHAPE_BORDER))},shapeInactiveBorder:void 0,shapeInactiveBorder_:function(){var t=this.searchStyles(o1.SHAPE_INACTIVE_BORDER)._shapeInactiveBorder;return t&&t.fetch?t.fetch(this._scope):t},setShapeInactiveBorder:function(t){void 0!==t?this._values[o1.SHAPE_INACTIVE_BORDER]&&t===this._shapeInactiveBorder||(t=h4(t),this._shapeInactiveBorder=t,this._values[o1.SHAPE_INACTIVE_BORDER]=!0,this._fireEvents&&this.changed(o1.SHAPE_INACTIVE_BORDER)):this._values[o1.SHAPE_INACTIVE_BORDER]&&(delete this._shapeInactiveBorder,this._values[o1.SHAPE_INACTIVE_BORDER]=!1,this._fireEvents&&this.changed(o1.SHAPE_INACTIVE_BORDER))},shapeSelectedBorder:void 0,shapeSelectedBorder_:function(){var t=this.searchStyles(o1.SHAPE_SELECTED_BORDER)._shapeSelectedBorder;return t&&t.fetch?t.fetch(this._scope):t},setShapeSelectedBorder:function(t){void 0!==t?this._values[o1.SHAPE_SELECTED_BORDER]&&t===this._shapeSelectedBorder||(t=h4(t),this._shapeSelectedBorder=t,this._values[o1.SHAPE_SELECTED_BORDER]=!0,this._fireEvents&&this.changed(o1.SHAPE_SELECTED_BORDER)):this._values[o1.SHAPE_SELECTED_BORDER]&&(delete this._shapeSelectedBorder,this._values[o1.SHAPE_SELECTED_BORDER]=!1,this._fireEvents&&this.changed(o1.SHAPE_SELECTED_BORDER))},shapeHoveredBorder:void 0,shapeHoveredBorder_:function(){var t=this.searchStyles(o1.SHAPE_HOVERED_BORDER)._shapeHoveredBorder;return t&&t.fetch?t.fetch(this._scope):t},setShapeHoveredBorder:function(t){void 0!==t?this._values[o1.SHAPE_HOVERED_BORDER]&&t===this._shapeHoveredBorder||(t=h4(t),this._shapeHoveredBorder=t,this._values[o1.SHAPE_HOVERED_BORDER]=!0,this._fireEvents&&this.changed(o1.SHAPE_HOVERED_BORDER)):this._values[o1.SHAPE_HOVERED_BORDER]&&(delete this._shapeHoveredBorder,this._values[o1.SHAPE_HOVERED_BORDER]=!1,this._fireEvents&&this.changed(o1.SHAPE_HOVERED_BORDER))},shapeLocation:void 0,shapeLocation_:function(){return this.searchStyles(o1.SHAPE_LOCATION)._shapeLocation},setShapeLocation:function(t){void 0!==t?this._values[o1.SHAPE_LOCATION]&&t===this._shapeLocation||(this._shapeLocation=t,this._values[o1.SHAPE_LOCATION]=!0,this._fireEvents&&this.changed(o1.SHAPE_LOCATION)):this._values[o1.SHAPE_LOCATION]&&(delete this._shapeLocation,this._values[o1.SHAPE_LOCATION]=!1,this._fireEvents&&this.changed(o1.SHAPE_LOCATION))},shapeAlignment:void 0,shapeAlignment_:function(){return this.searchStyles(o1.SHAPE_ALIGNMENT)._shapeAlignment},setShapeAlignment:function(t){void 0!==t?this._values[o1.SHAPE_ALIGNMENT]&&t===this._shapeAlignment||(this._shapeAlignment=t,this._values[o1.SHAPE_ALIGNMENT]=!0,this._fireEvents&&this.changed(o1.SHAPE_ALIGNMENT)):this._values[o1.SHAPE_ALIGNMENT]&&(delete this._shapeAlignment,this._values[o1.SHAPE_ALIGNMENT]=!1,this._fireEvents&&this.changed(o1.SHAPE_ALIGNMENT))},shapeOffset:void 0,shapeOffset_:function(){return this.searchStyles(o1.SHAPE_OFFSET)._shapeOffset},setShapeOffset:function(t){void 0!==t?(t=parseInt(t),this._values[o1.SHAPE_OFFSET]&&t===this._shapeOffset||(this._shapeOffset=t,this._values[o1.SHAPE_OFFSET]=!0,this._fireEvents&&this.changed(o1.SHAPE_OFFSET))):this._values[o1.SHAPE_OFFSET]&&(delete this._shapeOffset,this._values[o1.SHAPE_OFFSET]=!1,this._fireEvents&&this.changed(o1.SHAPE_OFFSET))},shapePadding:void 0,shapePadding_:function(){return this.searchStyles(o1.SHAPE_PADDING)._shapePadding},setShapePadding:function(t){void 0!==t?(t=parseInt(t),this._values[o1.SHAPE_PADDING]&&t===this._shapePadding||(this._shapePadding=t,this._values[o1.SHAPE_PADDING]=!0,this._fireEvents&&this.changed(o1.SHAPE_PADDING))):this._values[o1.SHAPE_PADDING]&&(delete this._shapePadding,this._values[o1.SHAPE_PADDING]=!1,this._fireEvents&&this.changed(o1.SHAPE_PADDING))},shapeSize:void 0,shapeSize_:function(){return this.searchStyles(o1.SHAPE_SIZE)._shapeSize},setShapeSize:function(t){void 0!==t?this._values[o1.SHAPE_SIZE]&&t===this._shapeSize||(this._shapeSize=o1.getDimension(t),this._values[o1.SHAPE_SIZE]=!0,this._fireEvents&&this.changed(o1.SHAPE_SIZE)):this._values[o1.SHAPE_SIZE]&&(delete this._shapeSize,this._values[o1.SHAPE_SIZE]=!1,this._fireEvents&&this.changed(o1.SHAPE_SIZE))},shapeRotate:void 0,shapeRotate_:function(){return this.searchStyles(o1.SHAPE_ROTATE)._shapeRotate},setShapeRotate:function(t){void 0!==t?(t=parseFloat(t),this._values[o1.SHAPE_ROTATE]&&t===this._shapeRotate||(this._shapeRotate=t,this._values[o1.SHAPE_ROTATE]=!0,this._fireEvents&&this.changed(o1.SHAPE_ROTATE))):this._values[o1.SHAPE_ROTATE]&&(delete this._shapeRotate,this._values[o1.SHAPE_ROTATE]=!1,this._fireEvents&&this.changed(o1.SHAPE_ROTATE))},shapeInnerName:void 0,shapeInnerName_:function(){return this.searchStyles(o1.SHAPE_INNER_NAME)._shapeInnerName},setShapeInnerName:function(t){void 0!==t?this._values[o1.SHAPE_INNER_NAME]&&t===this._shapeInnerName||(this._shapeInnerName=t,this._values[o1.SHAPE_INNER_NAME]=!0,this._fireEvents&&this.changed(o1.SHAPE_INNER_NAME)):this._values[o1.SHAPE_INNER_NAME]&&(delete this._shapeInnerName,this._values[o1.SHAPE_INNER_NAME]=!1,this._fireEvents&&this.changed(o1.SHAPE_INNER_NAME))},shapeInnerColor:void 0,shapeInnerColor_:function(){var t=this.searchStyles(o1.SHAPE_INNER_COLOR)._shapeInnerColor;return t&&t.fetch?t.fetch(this._scope):t},setShapeInnerColor:function(t){void 0!==t?this._values[o1.SHAPE_INNER_COLOR]&&t===this._shapeInnerColor||(t=X4(t,this._scope),this._shapeInnerColor=t,this._values[o1.SHAPE_INNER_COLOR]=!0,this._fireEvents&&this.changed(o1.SHAPE_INNER_COLOR)):this._values[o1.SHAPE_INNER_COLOR]&&(delete this._shapeInnerColor,this._values[o1.SHAPE_INNER_COLOR]=!1,this._fireEvents&&this.changed(o1.SHAPE_INNER_COLOR))},shapeInnerSize:void 0,shapeInnerSize_:function(){return this.searchStyles(o1.SHAPE_INNER_SIZE)._shapeInnerSize},setShapeInnerSize:function(t){void 0!==t?this._values[o1.SHAPE_INNER_SIZE]&&t===this._shapeInnerSize||(this._shapeInnerSize=Math.max(0,Math.min(1,t)),this._values[o1.SHAPE_INNER_SIZE]=!0,this._fireEvents&&this.changed(o1.SHAPE_INNER_SIZE)):this._values[o1.SHAPE_INNER_SIZE]&&(delete this._shapeInnerSize,this._values[o1.SHAPE_INNER_SIZE]=!1,this._fireEvents&&this.changed(o1.SHAPE_INNER_SIZE))},shapeInnerRotate:void 0,shapeInnerRotate_:function(){return this.searchStyles(o1.SHAPE_INNER_ROTATE)._shapeInnerRotate},setShapeInnerRotate:function(t){void 0!==t?this._values[o1.SHAPE_INNER_ROTATE]&&t===this._shapeInnerRotate||(this._shapeInnerRotate=t,this._values[o1.SHAPE_INNER_ROTATE]=!0,this._fireEvents&&this.changed(o1.SHAPE_INNER_ROTATE)):this._values[o1.SHAPE_INNER_ROTATE]&&(delete this._shapeInnerRotate,this._values[o1.SHAPE_INNER_ROTATE]=!1,this._fireEvents&&this.changed(o1.SHAPE_INNER_ROTATE))},font:function(){var t,e,i,n,s=[],r=this.fontSize(),o=this.fontItalic(),a=this.fontBold();return o&&s.push("italic"),a&&s.push("bold"),s.push(r+"px"),(t=this.fontName())&&s.push(t),e=s.join(" "),i="",(n=this.textDecoration())&&("lineThrough"===n&&(n="line-through"),i=(i=this.textDecorationColor())?i._color:""),{font:e,size:r,deco:n,line:i}},setFont:function(t){var e,i,n,s;if(t=t&&t.trim())for(0<(i=(e=t.split($$_FONT_REG)).length)&&e[0]&&this.fontName(e[0]),1<i&&e[1]&&this.fontSize(e[1]),n=2;n<i;n++)if(s=e[n])switch(s=s.toLowerCase()){case"bold":this.setFontBold(!0);break;case"italic":this.setFontItalic(!0);break;case"underline":case"lineThrough":case"line-through":this.setTextDecoration(s)}},clone:function(){var t=new o1;return t._owner=this._owner,t._name=this._name,t._parent=this._parent,t._sysDefault=this._sysDefault,t._values=this._values.concat(),t._fireEvents=this.fireEvents,t._scope=this._scope,t},setParentAndDefault:function(t,e){return this._parent=t,this._sysDefault=e,this},beginUpdate:function(){this._updateLock++},endUpdate:function(t){t=!(0<arguments.length)||t,0==--this._updateLock&&this._fireEvents&&this.changed(o1.STYLE_ALL,t)},hasValue:function(t){return"string"==typeof t?this._values[o1.STYLE_NAMES[t]]:this._values[t]},getValue:function(t){return this["_"+t]},clearValue:function(t){"number"!=typeof t&&(t=o1.STYLE_NAMES[t]),t=Y1(t),!isNaN(t)&&0<=t&&delete this._values[t]},clearValues:function(){this._values=[]},initialize:function(t){this._values=[],t&&this.extend(t)},extend:function(t,e){e=!(1<arguments.length)||e,this.beginUpdate();try{if(t instanceof o1){var i=t._values;i[o1.RENDERER]&&this.setRenderer(t._renderer),i[o1.BACKGROUND]&&this.setBackground(t._background),i[o1.INACTIVE_BACKGROUND]&&this.setInactiveBackground(t._inactiveBackground),i[o1.SELECTED_BACKGROUND]&&this.setSelectedBackground(t._selectedBackground),i[o1.HOVERED_BACKGROUND]&&this.setHoveredBackground(t._hoveredBackground),i[o1.COLOR]&&this.setColor(t._color),i[o1.INACTIVE_COLOR]&&this.setInactiveColor(t._inactiveColor),i[o1.SELECTED_COLOR]&&this.setSelectedColor(t._selectedColor),i[o1.HOVERED_COLOR]&&this.setHoveredColor(t._hoveredColor),i[o1.BORDER]&&this.setBorder(t._border),i[o1.BORDER_LEFT]&&this.setBorderLeft(t._borderLeft),i[o1.BORDER_RIGHT]&&this.setBorderRight(t._borderRight),i[o1.BORDER_TOP]&&this.setBorderTop(t._borderTop),i[o1.BORDER_BOTTOM]&&this.setBorderBottom(t._borderBottom),i[o1.BORDER_LEFT_SIZE]&&this.setBorderLeftSize(t._borderLeftSize),i[o1.BORDER_RIGHT_SIZE]&&this.setBorderRightSize(t._borderRightSize),i[o1.BORDER_TOP_SIZE]&&this.setBorderTopSize(t._borderTopSize),i[o1.BORDER_BOTTOM_SIZE]&&this.setBorderBottomSize(t._borderBottomSize),i[o1.BORDER_RADIUS]&&this.setBorderRadius(t._borderRadius),i[o1.LINE]&&this.setLine(t._line),i[o1.FONT_NAME]&&this.setFontName(t._fontName),i[o1.FONT_SIZE]&&this.setFontSize(t._fontSize),i[o1.FONT_BOLD]&&this.setFontBold(t._fontBold),i[o1.FONT_ITALIC]&&this.setFontItalic(t._fontItalic),i[o1.TEXT_DECORATION]&&this.setTextDecoration(t._textDecoration),i[o1.TEXT_DECORATION_COLOR]&&this.setTextDecorationColor(t._textDecorationColor),i[o1.TEXT_SHADOW]&&this.setTextShadow(t._textShadow),i[o1.TEXT_ALIGNMENT]&&this.setTextAlignment(t._textAlignment),i[o1.LINE_ALIGNMENT]&&this.setLineAlignment(t._lineAlignment),i[o1.TEXT_WRAP]&&this.setTextWrap(t._textWrap),i[o1.NUMBER_FORMAT]&&this.setNumberFormat(t._numberFormat),i[o1.TEXT_FORMAT]&&this.setTextFormat(t._textFormat),i[o1.DATETIME_FORMAT]&&this.setDatetimeFormat(t._datetimeFormat),i[o1.BOOLEAN_FORMAT]&&this.setBooleanFormat(t._booleanFormat),i[o1.PREFIX]&&this.setPrefix(t._prefix),i[o1.SUFFIX]&&this.setSuffix(t._suffix),i[o1.MARGIN_LEFT]&&this.setMarginLeft(t._marginLeft),i[o1.MARGIN_RIGHT]&&this.setMarginRight(t._marginRight),i[o1.MARGIN_TOP]&&this.setMarginTop(t._marginTop),i[o1.MARGIN_BOTTOM]&&this.setMarginBottom(t._marginBottom),i[o1.PADDING_LEFT]&&this.setPaddingLeft(t._paddingLeft),i[o1.PADDING_RIGHT]&&this.setPaddingRight(t._paddingRight),i[o1.PADDING_TOP]&&this.setPaddingTop(t._paddingTop),i[o1.PADDING_BOTTOM]&&this.setPaddingBottom(t._paddingBottom),i[o1.PADDING_BOTTOM]&&this.setPaddingBottom(t._paddingBottom),i[o1.ICON_INDEX]&&this.setIconIndex(t._iconIndex),i[o1.ICON_LOCATION]&&this.setIconLocation(t._iconLocation),i[o1.ICON_ALIGNMENT]&&this.setIconAlignment(t._iconAlignment),i[o1.ICON_OFFSET]&&this.setIconOffset(t._iconOffset),i[o1.ICON_PADDING]&&this.setIconPadding(t._iconPadding),i[o1.ICON_ALPHA]&&this.setIconAlpha(t._iconAlpha),i[o1.SHAPE_NAME]&&this.setShapeName(t._shapeName),i[o1.SHAPE_COLOR]&&this.setShapeColor(t._shapeColor),i[o1.SHAPE_COLORS]&&this.setShapeColors(t._shapeColors),i[o1.SHAPE_INACTIVE_COLOR]&&this.setShapeInactiveColor(t._shapeInactiveColor),i[o1.SHAPE_SELECTED_COLOR]&&this.setShapeSelectedColor(t._shapeSelectedColor),i[o1.SHAPE_HOVERED_COLOR]&&this.setShapeHoveredColor(t._shapeHoveredColor),i[o1.SHAPE_BORDER]&&this.setShapeBorder(t._shapeBorder),i[o1.SHAPE_INACTIVE_BORDER]&&this.setShapeInactiveBorder(t._shapeInactiveBorder),i[o1.SHAPE_SELECTED_BORDER]&&this.setShapeSelectedBorder(t._shapeSelectedBorder),i[o1.SHAPE_HOVERED_BORDER]&&this.setShapeHoveredBorder(t._shapeHoveredBorder),i[o1.SHAPE_LOCATION]&&this.setShapeLocation(t._shapeLocation),i[o1.SHAPE_ALIGNMENT]&&this.setShapeAlignment(t._shapeAlignment),i[o1.SHAPE_OFFSET]&&this.setShapeOffset(t._shapeOffset),i[o1.SHAPE_PADDING]&&this.setShapePadding(t._shapePadding),i[o1.SHAPE_SIZE]&&this.setShapeSize(t._shapeSize),i[o1.SHAPE_ROTATE]&&this.setShapeRotate(t._shapeRotate),i[o1.SHAPE_INNER_NAME]&&this.setShapeInnerName(t._shapeInnerName),i[o1.SHAPE_INNER_COLOR]&&this.setShapeInnerColor(t._shapeInnerColor),i[o1.SHAPE_INNER_SIZE]&&this.setShapeInnerSize(t._shapeInnerSize),i[o1.SHAPE_INNER_ROTATE]&&this.setShapeInnerRotate(t._shapeInnerRotate)}else if(I4(t)){var n=t.margin;for(var s in void 0!==n&&(this.setMarginLeft(n),this.setMarginRight(n),this.setMarginTop(n),this.setMarginBottom(n)),void 0!==(n=t.padding)&&(this.setPaddingLeft(n),this.setPaddingRight(n),this.setPaddingTop(n),this.setPaddingBottom(n)),t){var r=this[$$_STYLE_PROP_MAP[s]];r instanceof Function&&r.call(this,t[s])}}else if(S4(t)){var o=t.split(";");for(var s in o)if(o[s]){var a=o[s].split(":");if(2==a.length){var h=a[0],l=a[1];if("margin"===h)this.setMarginLeft(l),this.setMarginRight(l),this.setMarginTop(l),this.setMarginBottom(l);else if("padding"==h)this.setPaddingLeft(l),this.setPaddingRight(l),this.setPaddingTop(l),this.setPaddingBottom(l);else{var u=this[$$_STYLE_PROP_MAP[h]];u instanceof Function&&u.call(this,l)}}}}}finally{this.endUpdate(e)}},proxy:function(){return{name:this._name,renderer:this._renderer,background:this._background,inactiveBackground:this._inactiveBackground,selectedBackground:this._selectedBackground,hoveredBackground:this._hoveredBackground,color:this._color,inactiveColor:this._inactiveColor,selectedColor:this._selectedColor,hoveredColor:this._hoveredColor,border:this._border,borderLeft:this._borderLeft,borderRight:this._borderRight,borderTop:this._borderTop,borderBottom:this._borderBottom,borderLeftSize:this._borderLeftSize,borderRightSize:this._borderRightSize,borderTopSize:this._borderTopSize,borderBottomSize:this._borderBottomSize,borderRadius:this._borderRadius,line:this._line,fontName:this._fontName,fontSize:this._fontSize,fontBold:this._fontBold,fontItalic:this._fontItalic,textDecoration:this._textDecoration,textDecorationColor:this._textDecorationColor,textShadow:this._textShadow,textAlignment:this._textAlignment,lineAlignment:this._lineAlignment,textWrap:this._textWrap,textFormat:this._textFormat,numberFormat:this._numberFormat,datetimeFormat:this._datetimeFormat,booleanFormat:this._booleanFormat,prefix:this._prefix,suffix:this._suffix,marginLeft:this._marginLeft,marginRight:this._marginRight,marginTop:this._marginTop,marginBottom:this._marginBottom,paddingLeft:this._paddingLeft,paddingRight:this._paddingRight,paddingTop:this._paddingTop,paddingBottom:this._paddingBottom,iconIndex:this._iconIndex,iconLocation:this._iconLocation,iconAlignment:this._iconAlignment,iconOffset:this._iconOffset,iconPadding:this._iconPadding,iconAlpha:this._iconAlpha,shapeName:this._shapeName,shapeColor:this._shapeColor,shapeColors:this._shapeColors,shapeInactiveColor:this._shapeInactiveColor,shapeSelectedColor:this._shapeSelectedColor,shapeHoveredColor:this._shapeHoveredColor,shapeBorder:this._shapeBorder,shapeInactiveBorder:this._shapeInactiveBorder,shapeSelectedBorder:this._shapeSelectedBorder,shapeHoveredBorder:this._shapeHoveredBorder,shapeLocation:this._shapeLocation,shapeAlignment:this._shapeAlignment,shapeOffset:this._shapeOffset,shapePadding:this._shapePadding,shapeSize:this._shapeSize,shapeRotate:this._shapeRotate,shapeInnerName:this._shapeInnerName,shapeInnerColor:this._shapeInnerColor,shapeInnerSize:this._shapeInnerSize,shapeInnerRotate:this._shapeInnerRotate}},deflatePaddings:function(t){var e;return t.x+=e=this.paddingLeft(),t.width-=e+this.paddingRight(),t.y+=e=this.paddingTop(),t.height-=e+this.paddingBottom(),t},inflatePaddings:function(t){var e;return t.x-=e=this.paddingLeft(),t.width+=e+this.paddingRight(),t.y-=e=this.paddingTop(),t.height+=e+this.paddingBottom(),t},deflateMargins:function(t){var e;return t.x+=e=this.marginLeft(),t.width-=e+this.marginRight(),t.y+=e=this.marginTop(),t.height-=e+this.marginBottom(),t},inflateMargins:function(t){var e;return t.x-=e=this.marginLeft(),t.width+=e+this.marginRight(),t.y-=e=this.marginTop(),t.height+=e+this.marginBottom(),t},deflateSpaces:function(t){var e;return t.x+=e=this.paddingLeft()+this.marginLeft(),t.width-=e+this.paddingRight()+this.marginRight(),t.y+=e=this.paddingTop()+this.marginTop(),t.height-=e+this.paddingBottom()+this.marginBottom(),t},inflateSpaces:function(t){var e;return t.x-=e=this.paddingLeft()+this.marginLeft(),t.width+=e+this.paddingRight()+this.marginRight(),t.y-=e=this.paddingTop()+this.marginTop(),t.height+=e+this.paddingBottom()+this.marginBottom(),t},paddings:function(){return this.paddingTop()+"px "+this.paddingRight()+"px "+this.paddingBottom()+"px "+this.paddingLeft()+"px"},toCssShadow:function(){return"1px 1px 2px #555"},searchStyles:function(t){if(this._values[t])return this;for(var e=this._parent;e;){if(e._values[t])return e;e=e._parent}if(this._sysDefault&&this._sysDefault._values[t])return this._sysDefault;for(e=this._parent;e;){if(e._sysDefault&&e._sysDefault._values[t])return e._sysDefault;e=e._parent}return o1.Default},changed:function(t,e){e=!(1<arguments.length)||e,this._owner&&0==this._updateLock&&e&&this._owner.stylesChanged(this,t)}},{STYLE_ALL:-1,RENDERER:0,BACKGROUND:1,INACTIVE_BACKGROUND:2,SELECTED_BACKGROUND:3,HOVERED_BACKGROUND:4,COLOR:5,INACTIVE_COLOR:6,SELECTED_COLOR:7,HOVERED_COLOR:8,BORDER:9,BORDER_LEFT:10,BORDER_RIGHT:11,BORDER_TOP:12,BORDER_BOTTOM:13,BORDER_LEFT_SIZE:14,BORDER_RIGHT_SIZE:15,BORDER_TOP_SIZE:16,BORDER_BOTTOM_SIZE:17,BORDER_RADIUS:18,LINE:19,FONT_NAME:20,FONT_SIZE:21,FONT_BOLD:22,FONT_ITALIC:23,TEXT_DECORATION:24,TEXT_DECORATION_COLOR:25,TEXT_SHADOW:26,TEXT_ALIGNMENT:27,LINE_ALIGNMENT:28,TEXT_WRAP:29,TEXT_FORMAT:30,NUMBER_FORMAT:31,DATETIME_FORMAT:32,BOOLEAN_FORMAT:33,PREFIX:34,SUFFIX:35,MARGIN_LEFT:36,MARGIN_RIGHT:37,MARGIN_TOP:38,MARGIN_BOTTOM:39,PADDING_LEFT:40,PADDING_RIGHT:41,PADDING_TOP:42,PADDING_BOTTOM:43,ICON_INDEX:44,ICON_LOCATION:45,ICON_ALIGNMENT:46,ICON_OFFSET:47,ICON_PADDING:48,ICON_ALPHA:49,SHAPE_NAME:50,SHAPE_COLOR:51,SHAPE_COLORS:52,SHAPE_INACTIVE_COLOR:53,SHAPE_SELECTED_COLOR:54,SHAPE_HOVERED_COLOR:55,SHAPE_BORDER:56,SHAPE_INACTIVE_BORDER:57,SHAPE_SELECTED_BORDER:58,SHAPE_HOVERED_BORDER:59,SHAPE_LOCATION:60,SHAPE_ALIGNMENT:61,SHAPE_OFFSET:62,SHAPE_PADDING:63,SHAPE_SIZE:64,SHAPE_ROTATE:65,SHAPE_INNER_NAME:66,SHAPE_INNER_COLOR:67,SHAPE_INNER_SIZE:68,SHAPE_INNER_ROTATE:69,STYLE_LAST:69,equalFonts:function(t,e){return t==t||t&&e&&t.s==e.s&&t.size==e.size&&t.deco==e.deco&&t.line==e.line},getFillText:function(t){return t?t.toText():null},getStrokeText:function(t){return t?t.toText():null},getFillPaletteText:function(t){return t instanceof j8?t.toString():t},getDimension:function(t){return null===t||t instanceof W3||(t=new W3(t)),t},getDimensionText:function(t){return t?t.toString():null},$_extendPropMap:function(t){for(var e in t)$$_STYLE_PROP_MAP[e]=t[e]},$_extendNameMap:function(t){var e=o1.STYLE_NAMES;for(var i in t)e[i]=t[i]}},function(t){var e;t.Default=new t(null,"defaultStyles"),(e=t.Default)._renderer=null,e._background=null,e._inactiveBackground=U1.LTGRAY,e._selectedBackground=U1.DIMGRAY,e._hoveredBackground=U1.WHITE,e._color=U1.BLACK,e._inactiveColor=U1.GRAY,e._selectedColor=U1.WHITE,e._hoveredColor=U1.BLACK,e._border=null,e._borderLeft=null,e._borderRight=null,e._borderTop=null,e._borderBottom=null,e._borderLeftSize=null,e._borderRightSize=null,e._borderTopSize=null,e._borderBottomSize=null,e._borderRadius=0,e._line=Z1.GRAY,e._fontName="Tahoma",e._fontSize=12,e._fontBold=!1,e._fontItalic=!1,e._textDecoration=null,e._textDecorationColor=null,e._textShadow=null,e._textAlignment=v1.CENTER,e._lineAlignment=v1.CENTER,e._textWrap=D7.NONE,e._textFormat=null,e._numberFormat=null,e._datetimeFormat=null,e._booleanFormat=null,e._prefix=null,e._suffix=null,e._marginLeft=0,e._marginRight=0,e._marginTop=0,e._marginBottom=0,e._paddingLeft=0,e._paddingRight=0,e._paddingTop=0,e._paddingBottom=0,e._iconIndex=0,e._iconLocation=n2.LEFT_SIDE,e._iconAlignment=v1.CENTER,e._iconOffset=0,e._iconPadding=2,e._iconAlpha=1,e._shapeName=null,e._shapeColor=new U1(4278224896),e._shapeColors=null,e._shapeInactiveColor=U1.LTGRAY,e._shapeSelectedColor=new U1(4278224896),e._shapeHoveredColor=new U1(4278224896),e._shapeBorder=null,e._shapeInactiveBorder=null,e._shapeSelectedBorder=null,e._shapeHoveredBorder=null,e._shapeLocation=n2.LEFT_SIDE,e._shapeAlignment=v1.CENTER,e._shapeOffset=0,e._shapePadding=2,e._shapeSize=null,e._shapeRotate=0,e._shapeInnerName=null,e._shapeInnerColor=U1.WHITE,e._shapeInnerSize=.5,e._shapeInnerRotate=0,t.STYLE_NAMES={renderer:t.RENDERER,background:t.BACKGROUND,inactiveBackground:t.INACTIVE_BACKGROUND,selectedBackground:t.SELECTED_BACKGROUND,hoveredBackground:t.HOVERED_BACKGROUND,color:t.COLOR,inactiveColor:t.INACTIVE_COLOR,selectedColor:t.SELECTED_COLOR,hoveredColor:t.HOVERED_COLOR,border:t.BORDER,borderLeft:t.BORDER_LEFT,borderRight:t.BORDER_RIGHT,borderTop:t.BORDER_TOP,borderBottom:t.BORDER_BOTTOM,borderLeftSize:t.BORDER_LEFT_SIZE,borderRightSize:t.BORDER_RIGHT_SIZE,borderTopSize:t.BORDER_TOP_SIZE,borderBottomSize:t.BORDER_BOTTOM_SIZE,borderRadius:t.BORDER_RADIUS,line:t.LINE,fontName:t.FONT_NAME,fontSize:t.FONT_SIZE,fontBold:t.FONT_BOLD,fontItalic:t.FONT_ITALIC,textDecoration:t.TEXT_DECORATION,textDecorationColor:t.TEXT_DECORATION_COLOR,textShadow:t.TEXT_SHADOW,textAlignment:t.TEXT_ALIGNMENT,lineAlignment:t.LINE_ALIGNMENT,textWrap:t.TEXT_WRAP,textFormat:t.TEXT_FORMAT,numberFormat:t.NUMBER_FORMAT,datetimeFormat:t.DATETIME_FORMAT,booleanFormat:t.BOOLEAN_FORMAT,prefix:t.PREFIX,suffix:t.SUFFIX,marginLeft:t.MARGIN_LEFT,marginRight:t.MARGIN_RIGHT,marginTop:t.MARGIN_TOP,marginBottom:t.MARGIN_BOTTOM,paddingLeft:t.PADDING_LEFT,paddingRight:t.PADDING_RIGHT,paddingTop:t.PADDING_TOP,paddingBottom:t.PADDING_BOTTOM,iconIndex:t.ICON_INDEX,iconLocation:t.ICON_LOCATION,iconAlignment:t.ICON_ALIGNMENT,iconOffset:t.ICON_OFFSET,iconPadding:t.ICON_PADDING,iconAlpha:t.ICON_ALPHA,shapeName:t.SHAPE_NAME,shapeColor:t.SHAPE_COLOR,shapeColors:t.SHAPE_COLORS,shapeInactiveColor:t.SHAPE_INACTIVE_COLOR,shapeSelectedColor:t.SHAPE_SELECTED_COLOR,shapeHoveredColor:t.SHAPE_HOVERED_COLOR,shapeBorder:t.SHAPE_BORDER,shapeInactiveBorder:t.SHAPE_INACTIVE_BORDER,shapeSelectedBorder:t.SHAPE_SELECTED_BORDER,shapeHoveredBorder:t.SHAPE_HOVERED_BORDER,shapeLocation:t.SHAPE_LOCATION,shapeAlignment:t.SHAPE_ALIGNMENT,shapeOffset:t.SHAPE_OFFSET,shapePadding:t.SHAPE_PADDING,shapeSize:t.SHAPE_SIZE,shapeRotate:t.SHAPE_ROTATE,shapeInnerName:t.SHAPE_INNER_NAME,shapeInnerColor:t.SHAPE_INNER_COLOR,shapeInnerSize:t.SHAPE_INNER_SIZE,shapeInnerRotate:t.SHAPE_INNER_ROTATE}});GridStylesProto=o1.prototype,GridStylesProto.$_spd=GridStylesProto.setParentAndDefault,GridStylesProto.$_ssd=GridStylesProto.setSysDefault,o1.CHANGED="onVisualStylesChanged";var o2=I1("GridStyleSheet",null,{init:function(){this._super(),this._default=new o1(null,o2.DEFAULT,null,!1),this._grid=new o1(null,o2.GRID,null,!1),this._panel=new o1(null,o2.PANEL,null,!1),this._groupPanel=new o1(null,o2.GROUPPANEL,null,!1),this._groupPanelItem=new o1(null,o2.GROUPPANEL_ITEM,null,!1),this._groupPanelItemInner=new o1(null,o2.GROUPPANEL_ITEM_INNER,null,!1),this._groupPanelHead=new o1(null,o2.GROUPPANEL_HEAD,null,!1),this._groupPanelHeadInner=new o1(null,o2.GROUPPANEL_HEAD_INNER,null,!1),this._body=new o1(null,o2.BODY,null,!1),this._bodyEmpty=new o1(null,o2.BODY_EMPTY,null,!1),this._bodyEmptyData=new o1(null,o2.BODY_EMPTY_DATA,null,!1),this._bodyRow=new o1(null,o2.BODY_ROW,null,!1),this._bodyFixedRow=new o1(null,o2.BODY_FIXED_ROW,null,!1),this._bodyCell=new o1(null,o2.BODY_CELL,null,!1),this._bodyFixedCell=new o1(null,o2.BODY_FIXED_CELL,null,!1),this._bodyMerged=new o1(null,o2.BODY_MERGED,null,!1),this._bodyFixedMerged=new o1(null,o2.BODY_FIXED_MERGED,null,!1),this._bodyFixedColumnBar=new o1(null,o2.BODY_FIXED_COLBAR,null,!1),this._bodyFixedRowBar=new o1(null,o2.BODY_FIXED_ROWBAR,null,!1),this._bodySelection=new o1(null,o2.BODY_SELECTION,null,!1),this._bodyMobileSelection=new o1(null,o2.BODY_MOBILE_SELECTION,null,!1),this._bodyRowHover=new o1(null,o2.BODY_ROW_HOVER,null,!1),this._header=new o1(null,o2.HEADER,null,!1),this._headerHead=new o1(null,o2.HEADER_HEAD,null,!1),this._headerGroup=new o1(null,o2.HEADER_GROUP,null,!1),this._headerSub=new o1(null,o2.HEADER_SUB,null,!1),this._headerMenuHandle=new o1(null,o2.HEADER_MENUHANDLE,null,!1),this._headerFilterHandle=new o1(null,o2.HEADER_FILTERHANDLE,null,!1),this._headerSortHandle=new o1(null,o2.HEADER_SORTHANDLE,null,!1),this._headerSortOrder=new o1(null,o2.HEADER_SORTORDER,null,!1),this._headerSummary=new o1(null,o2.HEADER_SUMMARY,null,!1),this._headerSummaryHead=new o1(null,o2.HEADER_SUMMARY_HEAD,null,!1),this._headerSummaryGroup=new o1(null,o2.HEADER_SUMMARY_GROUP,null,!1),this._footer=new o1(null,o2.FOOTER,null,!1),this._footerGroup=new o1(null,o2.FOOTER_GROUP,null,!1),this._footerHead=new o1(null,o2.FOOTER_HEAD,null,!1),this._rowGroupHead=new o1(null,o2.ROWGROUP_HEAD,null,!1),this._rowGroupHeader=new o1(null,o2.ROWGROUP_HEADER,null,!1),this._rowGroupExpander=new o1(null,o2.ROWGROUP_EXPANDER,null,!1),this._rowGroupFooter=new o1(null,o2.ROWGROUP_FOOTER,null,!1),this._rowGroupIndent=new o1(null,o2.ROWGROUP_INDENT,null,!1),this._rowGroupBar=new o1(null,o2.ROWGROUP_BAR,null,!1),this._rowGroupHeaderBar=new o1(null,o2.ROWGROUP_HEADER_BAR,null,!1),this._rowGroupFooterBar=new o1(null,o2.ROWGROUP_FOOTER_BAR,null,!1),this._rowIndicator=new o1(null,o2.ROWINDICATOR,null,!1),this._rowIndicatorState=new o1(null,o2.ROWINDICATOR_STATE,null,!1),this._rowIndicatorCreated=new o1(null,o2.ROWINDICATOR_CREATED,null,!1),this._rowIndicatorUpdated=new o1(null,o2.ROWINDICATOR_UPDATED,null,!1),this._rowIndicatorDeleted=new o1(null,o2.ROWINDICATOR_DELETED,null,!1),this._checkBar=new o1(null,o2.CHECKBAR,null,!1),this._checkBarHead=new o1(null,o2.CHECKBAR_HEAD,null,!1),this._headerItem=new o1(null,o2.HEADER_ITEM,null,!1),this._footerItem=new o1(null,o2.FOOTER_ITEM,null,!1),this._treeFooter=new o1(null,o2.TREE_FOOTER,null,!1),this._treeExpander=new o1(null,o2.TREE_EXPANDER,null,!1),this._treeIndent=new o1(null,o2.TREE_INDENT,null,!1),this._scrollBar=new o1(null,o2.SCROLLBAR,null,!1),this._scrollBarButton=new o1(null,o2.SCROLLBAR_BUTTON,null,!1),this._scrollBarThumb=new o1(null,o2.SCROLLBAR_THUMB,null,!1),this._scrollBarIndent=new o1(null,o2.SCROLLBAR_INDENT,null,!1),this._scrollEdge=new o1(null,o2.SCROLL_EDGE,null,!1),this._tooltip=new o1(null,o2.TOOLTIP,null,!1)},default:function(){return this._default},grid:function(){return this._grid},panel:function(){return this._panel},groupPanel:function(){return this._groupPanel},groupPanelItem:function(){return this._groupPanelItem},groupPanelItemInner:function(){return this._groupPanelItemInner},groupPanelHead:function(){return this._groupPanelHead},groupPanelHeadInner:function(){return this._groupPanelHeadInner},body:function(){return this._body},bodyEmpty:function(){return this._bodyEmpty},bodyEmptyData:function(){return this._bodyEmptyData},bodyRow:function(){return this._bodyRow},bodyFixedRow:function(){return this._bodyFixedRow},bodyCell:function(){return this._bodyCell},bodyFixedCell:function(){return this._bodyFixedCell},bodyMerged:function(){return this._bodyMerged},bodyFixedMerged:function(){return this._bodyFixedMerged},bodyFixedColumnBar:function(){return this._bodyFixedColumnBar},bodyFixedRowBar:function(){return this._bodyFixedRowBar},bodySelection:function(){return this._bodySelection},bodyMobileSelection:function(){return this._bodyMobileSelection},bodyRowHover:function(){return this._bodyRowHover},header:function(){return this._header},headerHead:function(){return this._headerHead},headerGroup:function(){return this._headerGroup},headerSub:function(){return this._headerSub},headerMenuHandle:function(){return this._headerMenuHandle},headerFilterHandle:function(){return this._headerFilterHandle},headerSortHandle:function(){return this._headerSortHandle},headerSortOrder:function(){return this._headerSortOrder},headerSummary:function(){return this._headerSummary},headerSummaryHead:function(){return this._headerSummaryHead},headerSummaryGroup:function(){return this._headerSummaryGroup},footer:function(){return this._footer},footerGroup:function(){return this._footerGroup},footerHead:function(){return this._footerHead},rowGroupHead:function(){return this._rowGroupHead},rowGroupHeader:function(){return this._rowGroupHeader},rowGroupExpander:function(){return this._rowGroupExpander},rowGroupFooter:function(){return this._rowGroupFooter},rowGroupIndent:function(){return this._rowGroupIndent},rowGroupBar:function(){return this._rowGroupBar},rowGroupHeaderBar:function(){return this._rowGroupHeaderBar},rowGroupFooterBar:function(){return this._rowGroupFooterBar},rowIndicator:function(){return this._rowIndicator},rowIndicatorState:function(){return this._rowIndicatorState},rowIndicatorCreated:function(){return this._rowIndicatorCreated},rowIndicatorUpdated:function(){return this._rowIndicatorUpdated},rowIndicatorDeleted:function(){return this._rowIndicatorDeleted},checkBar:function(){return this._checkBar},checkBarHead:function(){return this._checkBarHead},headerItem:function(){return this._headerItem},footerItem:function(){return this._footerItem},treeFooter:function(){return this._treeFooter},treeExpander:function(){return this._treeExpander},treeIndent:function(){return this._treeIndent},scrollBar:function(){return this._scrollBar},scrollBarButton:function(){return this._scrollBarButton},scrollBarThumb:function(){return this._scrollBarThumb},scrollBarIndent:function(){return this._scrollBarIndent},scrollEdge:function(){return this._scrollEdge},tooltip:function(){return this._tooltip}},{DEFAULT:"default",GRID:"grid",PANEL:"panel",GROUPPANEL:"groupPanel",GROUPPANEL_ITEM:"groupPanelItem",GROUPPANEL_ITEM_INNER:"groupPanelItemInner",GROUPPANEL_HEAD:"groupPanelHead",GROUPPANEL_HEAD_INNER:"groupPanelHeadInner",BODY:"body",BODY_EMPTY:"body.empty",BODY_EMPTY_DATA:"body.emptyData",BODY_ROW:"body.row",BODY_FIXED_ROW:"body.fixedRow",BODY_CELL:"body.cell",BODY_FIXED_CELL:"body.fixedCell",BODY_MERGED:"body.merged",BODY_FIXED_MERGED:"body.fixedMerged",BODY_FIXED_COLBAR:"body.fixedColBar",BODY_FIXED_ROWBAR:"body.fixedRowBar",BODY_SELECTION:"body.selection",BODY_MOBILE_SELECTION:"body.mobileSelection",BODY_ROW_HOVER:"body.rowHover",HEADER:"header",HEADER_HEAD:"header.head",HEADER_GROUP:"header.group",HEADER_SUB:"header.sub",HEADER_MENUHANDLE:"header.menuHandle",HEADER_FILTERHANDLE:"header.filterHandle",HEADER_SORTHANDLE:"header.sortHandle",HEADER_SORTORDER:"header.sortOrder",HEADER_SUMMARY:"header.summary",HEADER_SUMMARY_HEAD:"header.summaryHead",HEADER_SUMMARY_GROUP:"header.summaryGroup",FOOTER:"footer",FOOTER_GROUP:"footer.group",FOOTER_HEAD:"footer.head",ROWGROUP_HEADER:"rowGroup.header",ROWGROUP_EXPANDER:"rowGroup.expander",ROWGROUP_FOOTER:"rowGroup.footer",ROWGROUP_INDENT:"rowGroup.indent",ROWGROUP_HEAD:"rowGroup.head",ROWGROUP_BAR:"rowGroup.bar",ROWGROUP_HEADER_BAR:"rowGroup.headerBar",ROWGROUP_FOOTER_BAR:"rowGroup.footerBar",ROWGROUP_LEVELS:"rowGroup.levels",ROWINDICATOR:"rowIndicator",ROWINDICATOR_STATE:"rowIndicator.state",ROWINDICATOR_CREATED:"rowIndicator.created",ROWINDICATOR_UPDATED:"rowIndicator.updated",ROWINDICATOR_DELETED:"rowIndicator.deleted",CHECKBAR:"checkBar",CHECKBAR_HEAD:"checkBar.head",HEADER_ITEM:"headerItem",FOOTER_ITEM:"footerItem",TREE_FOOTER:"tree.footer",TREE_EXPANDER:"tree.expander",TREE_INDENT:"tree.indent",SCROLLBAR:"scrollBar",SCROLLBAR_BUTTON:"scrollBar.button",SCROLLBAR_THUMB:"scrollBar.thumb",SCROLLBAR_INDENT:"scrollBar.indent",SCROLL_EDGE:"scrollEdge",TOOLTIP:"tooltip",clearStyles:function(t){t.beginUpdate();try{t.defaultStyles().clearValues(),t.styles().clearValues(),t.panel().styles().clearValues(),t.groupPanel().styles().clearValues(),t.groupPanel().itemStyles().clearValues(),t.groupPanel().itemInnerStyles().clearValues(),t.groupPanelHead().styles().clearValues(),t.groupPanelHead().innerStyles().clearValues(),t.body().styles()().clearValues(),t.body().emptyStyles().clearValues(),t.body().emptyDataStyles().clearValues(),t.body().rowStyles().clearValues(),t.body().fixedRowStyles().clearValues(),t.body().cellStyles().clearValues(),t.body().fixedCellStyles().clearValues(),t.body().fixedColumnBarStyles().clearValues(),t.body().fixedRowBarStyles().clearValues(),t.body().selectionStyles().clearValues(),t.body().mobileSelectionStyles().clearValues(),t.body().rowHoverStyles().clearValues(),t.header().styles().clearValues(),t.header().head().styles.clearValues(),t.header().groupStyles().clearValues(),t.header().subStyles().clearValues(),t.header().menuHandleStyles().clearValues(),t.header().filterHandleStyles().clearValues(),t.header().sortHandleStyles().clearValues(),t.header().sortOrderStyles().clearValues(),t.header().summary().styles().clearValues(),t.header().summary().headStyles().clearValues(),t.header().summary().groupStyles().clearValues(),t.footer().styles().clearValues(),t.footer().groupStyles().clearValues(),t.footer().head().styles.clearValues(),t.rowGroup().headStyles().clearValues(),t.rowGroup().headerStyles().clearValues(),t.rowGroup().expanderStyles().clearValues(),t.rowGroup().footerStyles().clearValues(),t.rowGroup().indentStyles().clearValues(),t.rowGroup().barStyles().clearValues(),t.rowGroup().headerBarStyles().clearValues(),t.rowGroup().footerBarStyles().clearValues(),t.rowIndicator().styles().clearValues(),t.rowIndicator().stateStyles().clearValues(),t.rowIndicator().createdStyles().clearValues(),t.rowIndicator().updatedStyles().clearValues(),t.rowIndicator().deletedStyles().clearValues(),t.checkBar().styles().clearValues(),t.checkBar().headStyles().clearValues(),t.headerItem().styles().clearValues(),t.footerItem().styles().clearValues(),t.scrollEdgeStyles().clearValues(),t instanceof r4&&(t.treeOptions().footerStyles().clearValues(),t.treeOptions().expanderStyles().clearValues(),t.treeOptions().indentStyles().clearValues()),t.vscrollBar().styles().clearValues(),t.vscrollBar().buttonStyles().clearValues(),t.vscrollBar().thumbStyles().clearValues(),t.vscrollBar().indentStyles().clearValues(),t.hscrollBar().styles().clearValues(),t.hscrollBar().buttonStyles().clearValues(),t.hscrollBar().thumbStyles().clearValues(),t.hscrollBar().indentStyles().clearValues(),t.displayOptions().tooltipStyles().clearValues()}finally{t.endUpdate()}}}),SRb,TRb;o2.Default=(SRb=new o2,TRb=SRb._default,TRb.$_setBackground(U1.WHITE),TRb.setColor(U1.BLACK),TRb.setSelectedBackground(new U1(4278225117)),TRb.setSelectedColor(U1.WHITE),TRb.setBorder(null),TRb.setBorderLeft(null),TRb.setBorderTop(null),TRb.setBorderRight(null),TRb.setBorderBottom(null),TRb.setBorderLeftSize(null),TRb.setBorderTopSize(null),TRb.setBorderRightSize(null),TRb.setBorderBottomSize(null),TRb.setBorderRadius(0),TRb.setInactiveBackground(U1.LTGRAY),TRb.setFontName("Tahoma"),TRb.setFontSize(13),TRb.setTextDecoration(null),TRb.setTextDecorationColor(null),TRb.setTextShadow(null),TRb.setMarginTop(0),TRb.setMarginBottom(0),TRb.setMarginLeft(0),TRb.setMarginRight(0),TRb.setPaddingTop(2),TRb.setPaddingBottom(2),TRb.setPaddingLeft(2),TRb.setPaddingRight(2),TRb.setTextAlignment(v1.NEAR),TRb.setLineAlignment(v1.CENTER),TRb.setIconLocation(n2.LEFT_SIDE),TRb.setIconAlignment(v1.CENTER),TRb.setIconPadding(2),TRb.setIconAlpha(1),TRb.setShapeName(null),TRb.setShapeColor(U1.BLACK),TRb.setShapeColors(null),TRb.setShapeInactiveColor(U1.BLACK),TRb.setShapeSelectedColor(U1.BLACK),TRb.setShapeHoveredColor(U1.BLACK),TRb.setShapeLocation(n2.LEFT_SIDE),TRb.setShapeAlignment(v1.CENTER),TRb.setShapePadding(2),TRb.setShapeSize(W3.NULL),TRb.setShapeRotate(0),TRb.setShapeInnerName(null),TRb.setShapeInnerColor(U1.WHITE),TRb.setShapeInnerSize(.5),TRb.setShapeInnerRotate(0),(TRb=SRb._grid).$_setBackground(null),TRb.setBorder(new Z1(4284573033)),TRb.setBorderLeft(null),TRb.setBorderTop(null),TRb.setBorderRight(null),TRb.setBorderBottom(null),TRb.setLine(Z1.GRAY),(TRb=SRb._panel).setBackground(new U1(4291611852)),TRb.setColor(new U1(4280295456)),TRb.setBorderRight(new Z1(4286019447)),TRb.setBorderBottom(new Z1(4286019447)),TRb.setPaddingLeft(8),TRb.setPaddingTop(4),TRb.setPaddingBottom(5),TRb.setPaddingRight(2),TRb.setTextAlignment(v1.NEAR),TRb.setLineAlignment(v1.CENTER),(TRb=SRb._groupPanel).setBackground(new U1(4293849332)),TRb.setColor(new U1(4280295456)),TRb.setBorderRight(new Z1(4286019447)),TRb.setBorderBottom(new Z1(4286019447)),TRb.setPaddingLeft(8),TRb.setPaddingTop(4),TRb.setPaddingBottom(5),TRb.setPaddingRight(2),TRb.setTextAlignment(v1.NEAR),TRb.setLineAlignment(v1.CENTER),(TRb=SRb._groupPanelItem).setBorderTop(null),TRb.setBorderLeft(null),TRb.setBorderBottom(null),TRb.setBorderRight(new Z1(4288716960)),(TRb=SRb._groupPanelItemInner).setBorderTop(null),TRb.setBorderLeft(null),TRb.setBorderBottom(null),TRb.setBorderRight(Z1.WHITE),(TRb=SRb._groupPanelHead).setBorderTop(null),TRb.setBorderLeft(null),TRb.setBorderBottom(null),TRb.setBorderRight(new Z1(4288716960)),TRb.setShapeColor(U1.DKGRAY),TRb.setShapeSelectedColor(U1.DIMGRAY),(TRb=SRb._groupPanelHeadInner).setBorderTop(Z1.WHITE),TRb.setBorderLeft(null),TRb.setBorderBottom(null),TRb.setBorderRight(Z1.WHITE),(TRb=SRb._body).setBackground(null),TRb.setBorderLeft(null),TRb.setBorderTop(null),TRb.setBorderRight(Z1.GRAY),TRb.setBorderBottom(Z1.GRAY),TRb.setShapeColors(null),(TRb=SRb._bodyEmpty).setBackground(new U1(4294506744)),TRb.setColor(U1.DIMGRAY),TRb.setBorderLeft(null),TRb.setBorderTop(null),TRb.setBorderRight(new Z1(4288256409)),TRb.setBorderBottom(TRb.borderRight()),TRb.setPaddingTop(2),TRb.setPaddingBottom(2),TRb.setPaddingLeft(2),TRb.setPaddingRight(2),TRb.setFontSize(13),TRb.setTextAlignment(v1.NEAR),TRb.setLineAlignment(v1.NEAR),(TRb=SRb._bodyEmptyData).setBackground(null),TRb.setColor(U1.DIMGRAY),TRb.setBorderLeft(null),TRb.setBorderTop(null),TRb.setBorderRight(null),TRb.setBorderBottom(null),TRb.setPaddingTop(10),TRb.setPaddingBottom(10),TRb.setPaddingLeft(10),TRb.setPaddingRight(10),TRb.setFontSize(18),TRb.setTextAlignment(v1.CENTER),TRb.setLineAlignment(v1.CENTER),(TRb=SRb._bodyRow).setBackground(null),TRb.setBorderLeft(null),TRb.setBorderTop(null),TRb.setBorderRight(null),TRb.setBorderBottom(null),(TRb=SRb._bodyFixedRow).setBackground(new U1(4293980400)),TRb.setBorderLeft(null),TRb.setBorderTop(null),TRb.setBorderRight(null),TRb.setBorderBottom(null),(TRb=SRb._bodyCell).setBackground(null),TRb.setColor(new U1(4278190080)),TRb.setHoveredBackground(U1.WHITE),TRb.setHoveredColor(new U1(4280295456)),TRb.setBorderLeft(null),TRb.setBorderTop(null),TRb.setBorderRight(new Z1(4292796126)),TRb.setBorderBottom(new Z1(4292796126)),TRb.setLine(Z1.WHITE),TRb.setPaddingTop(3),TRb.setPaddingBottom(3),TRb.setPaddingLeft(2),TRb.setPaddingRight(2),TRb.setFontName("Tahoma"),TRb.setFontSize(13),TRb.setTextAlignment(v1.NEAR),TRb.setLineAlignment(v1.CENTER),TRb.setIconLocation(n2.LEFT_SIDE),TRb.setIconAlignment(v1.CENTER),TRb.setIconPadding(2),TRb.setIconAlpha(1),TRb.setShapeName(null),TRb.setShapeColor(U1.DIMGRAY),TRb.setShapeColors(null),TRb.setShapeInactiveColor(U1.LTGRAY),TRb.setShapeHoveredColor(U1.DIMGRAY),TRb.setShapeSelectedColor(null),TRb.setShapeSelectedBorder(null),TRb.setShapeLocation(n2.LEFT_SIDE),TRb.setShapeAlignment(v1.CENTER),TRb.setShapeSize(W3.NULL),TRb.setShapeRotate(0),TRb.setShapeInnerName(null),TRb.setShapeInnerColor(U1.WHITE),TRb.setShapeInnerSize(.5),TRb.setShapeInnerRotate(0),(TRb=SRb._bodyFixedCell).setBackground(null),TRb.setColor(U1.BLACK),TRb.setBorderLeft(null),TRb.setBorderTop(null),TRb.setBorderRight(new Z1(4288256409)),TRb.setBorderBottom(TRb.borderRight()),TRb.setShapeColors(null),(TRb=SRb._bodyMerged).setBackground(U1.WHITE),(TRb=SRb._bodyFixedMerged).setBackground(new U1(4293980400)),(TRb=SRb._bodyFixedColumnBar).setBackground(new U1(4291611852)),TRb.setBorderRight(new Z1(4286611584)),TRb.setBorderBottom(new Z1(4286611584)),(TRb=SRb._bodyFixedRowBar).setBackground(new U1(4291611852)),TRb.setBorderRight(new Z1(4286611584)),TRb.setBorderBottom(new Z1(4286611584)),(TRb=SRb._bodySelection).setBackground(new U1(268435456)),TRb.setBorder(new Z1(2952790016)),TRb=SRb._bodyMobileSelection,(TRb=SRb._bodyRowHover).setBackground(new U1(548055722)),TRb.setBorder(null),(TRb=SRb._header).setBackground("linear,#ffffff,#f0f0f0,90"),TRb.setColor(new U1(4281348144)),TRb.setBorderLeft(null),TRb.setBorderTop(Z1.WHITE),TRb.setBorderRight(new Z1(4288716960)),TRb.setBorderBottom(new Z1(4288716960)),TRb.setPaddingTop(2),TRb.setPaddingBottom(3),TRb.setPaddingLeft(2),TRb.setPaddingRight(2),TRb.setFontSize(12),TRb.setFontBold(!0),TRb.setTextAlignment(v1.CENTER),TRb.setLineAlignment(v1.CENTER),TRb.setTextWrap(D7.NORMAL),TRb.setSelectedBackground(new U1(4292927712)),TRb.setSelectedColor(new U1(4279242768)),TRb.setHoveredBackground(new U1(542282488)),(TRb=SRb._headerHead).setShapeColor(U1.DKGRAY),TRb.setShapeSelectedColor(U1.DIMGRAY),(TRb=SRb._headerGroup).setBackground("linear,#ffffff,#f0f0f0,90"),TRb.setColor(new U1(4281348192)),TRb.setSelectedBackground("linear,#ffbac3ce,#ffaebccc,90"),TRb.setSelectedColor(new U1(4279242768)),TRb.setHoveredBackground(new U1(542282488)),TRb.setBorderLeft(null),TRb.setBorderTop(Z1.WHITE),TRb.setBorderRight(new Z1(4288716960)),TRb.setBorderBottom(new Z1(4288716960)),TRb.setPaddingTop(2),TRb.setPaddingBottom(2),TRb.setPaddingLeft(2),TRb.setPaddingRight(2),TRb.setTextAlignment(v1.CENTER),TRb.setLineAlignment(v1.CENTER),TRb.setTextWrap(D7.NORMAL),TRb.setFontBold(!0),(TRb=SRb._headerSub).setTextAlignment(v1.CENTER),TRb.setLineAlignment(v1.CENTER),(TRb=SRb._headerMenuHandle).setShapeColor(new U1(4286611584)),TRb.setShapeHoveredColor(U1.BLACK),TRb.setShapeBorder(new Z1(4286611584)),TRb.setShapeInactiveBorder(new Z1(4286611584)),TRb.setShapeHoveredBorder(Z1.BLACK),(TRb=SRb._headerFilterHandle).setShapeColor(new U1(4286611584)),TRb.setShapeHoveredColor(U1.BLACK),TRb.setShapeBorder(new Z1(4286611584)),TRb.setShapeInactiveBorder(new Z1(4286611584)),TRb.setShapeHoveredBorder(Z1.BLACK),(TRb=SRb._headerSortHandle).setShapeName(null),TRb.setShapeColor(new U1(4286611584)),TRb.setShapeHoveredColor(U1.BLACK),TRb.setShapeBorder(new Z1(4286611584)),TRb.setShapeInactiveBorder(new Z1(4286611584)),TRb.setShapeHoveredBorder(Z1.BLACK),(TRb=SRb._headerSortOrder).setColor(new U1(4281348192)),TRb.setFontSize(11),(TRb=SRb._headerSummary).setBackground(new U1(4293849332)),TRb.setColor(U1.BLACK),TRb.setBorderLeft(null),TRb.setBorderTop(null),TRb.setBorderRight(new Z1(4288716960)),TRb.setBorderBottom(new Z1(4288716960)),TRb.setPaddingLeft(2),TRb.setPaddingRight(2),TRb.setPaddingTop(1),TRb.setPaddingBottom(2),TRb.setTextAlignment(v1.FAR),TRb.setLineAlignment(v1.CENTER),(TRb=SRb._headerSummaryHead).setTextAlignment(v1.CENTER),(TRb=SRb._headerSummaryGroup).setBackground(new U1(4293849332)),TRb.setColor(U1.BLACK),TRb.setBorderLeft(null),TRb.setBorderTop(null),TRb.setBorderRight(new Z1(4288716960)),TRb.setBorderBottom(new Z1(4288716960)),TRb.setPaddingLeft(2),TRb.setPaddingRight(2),TRb.setPaddingTop(1),TRb.setPaddingBottom(2),TRb.setTextAlignment(v1.FAR),TRb.setLineAlignment(v1.CENTER),(TRb=SRb._footer).setBackground(new U1(4293849332)),TRb.setColor(U1.BLACK),TRb.setBorderLeft(Z1.WHITE),TRb.setBorderBottom(null),TRb.setBorderRight(new Z1(4288716960)),TRb.setBorderTop(new Z1(4288716960)),TRb.setPaddingLeft(2),TRb.setPaddingRight(2),TRb.setPaddingTop(2),TRb.setPaddingBottom(1),TRb.setTextAlignment(v1.FAR),TRb.setLineAlignment(v1.CENTER),(TRb=SRb._footerGroup).setBackground(new U1(4293849332)),TRb.setColor(U1.BLACK),TRb.setBorderLeft(Z1.WHITE),TRb.setBorderBottom(null),TRb.setBorderRight(new Z1(4288716960)),TRb.setBorderTop(new Z1(4288716960)),TRb.setPaddingTop(2),TRb.setPaddingBottom(1),TRb.setPaddingLeft(2),TRb.setPaddingRight(2),TRb.setTextAlignment(v1.FAR),TRb.setLineAlignment(v1.CENTER),(TRb=SRb._footerHead).setShapeColor(U1.DKGRAY),TRb.setShapeSelectedColor(U1.DIMGRAY),TRb.setTextAlignment(v1.CENTER),(TRb=SRb._rowGroupHeader).setBackground(new U1(4293981434)),TRb.setColor(new U1(4278198063)),TRb.setBorderLeft(null),TRb.setBorderTop(Z1.WHITE),TRb.setBorderRight(new Z1(4286949584)),TRb.setBorderBottom(new Z1(4288716992)),TRb.setPaddingTop(2),TRb.setPaddingBottom(2),TRb.setPaddingLeft(2),TRb.setPaddingRight(2),TRb.setTextAlignment(v1.NEAR),TRb.setLineAlignment(v1.CENTER),TRb.setShapeColor(new U1(4278206287)),(TRb=SRb._rowGroupExpander).setShapeColor(new U1(4283650899)),TRb.setBorderRight(null),(TRb=SRb._rowGroupFooter).setBackground(new U1(4293849332)),TRb.setColor(U1.BLACK),TRb.setBorderLeft(Z1.WHITE),TRb.setBorderTop(null),TRb.setBorderRight(new Z1(4288716960)),TRb.setBorderBottom(new Z1(4288716960)),TRb.setPaddingLeft(2),TRb.setPaddingRight(2),TRb.setPaddingTop(2),TRb.setPaddingBottom(2),TRb.setTextAlignment(v1.FAR),TRb.setLineAlignment(v1.CENTER),TRb.setShapeColor(U1.GRAY),(TRb=SRb._rowGroupIndent).setBackground(new U1(4293914607)),TRb.setBorderLeft(null),TRb.setBorderTop(null),TRb.setBorderRight(new Z1(4290822336)),TRb.setBorderBottom(new Z1(4290822336)),(TRb=SRb._rowGroupBar).setBorderLeft(null),TRb.setBorderRight(Z1.DIMGRAY),TRb.setBorderTop(null),TRb.setBorderBottom(null),(TRb=SRb._rowGroupHeaderBar).setBorderLeft(null),TRb.setBorderRight(null),TRb.setBorderTop(null),TRb.setBorderBottom(null),(TRb=SRb._rowGroupFooterBar).setBorderLeft(null),TRb.setBorderRight(null),TRb.setBorderTop(null),TRb.setBorderBottom(Z1.GRAY),TRb=SRb._rowGroupHead,(TRb=SRb._rowIndicator).setBackground(new U1(4294506744)),TRb.setColor(new U1(4280295472)),TRb.setBorderLeft(Z1.WHITE),TRb.setBorderTop(Z1.WHITE),TRb.setBorderRight(new Z1(4288716960)),TRb.setBorderBottom(new Z1(4288716960)),TRb.setPaddingLeft(2),TRb.setPaddingRight(2),TRb.setPaddingTop(2),TRb.setPaddingBottom(2),TRb.setTextAlignment(v1.CENTER),TRb.setLineAlignment(v1.CENTER),TRb.setHoveredBackground(new U1(542282488)),TRb.setSelectedBackground(new U1(4292927712)),TRb.setSelectedColor(new U1(4279242768)),TRb.setShapeColor(new U1(4280295472)),TRb.setShapeHoveredColor(new U1(4281496200)),(TRb=SRb._rowIndicatorState).setBackground(new U1(4294769916)),TRb.setColor(U1.BLACK),TRb.setBorderLeft(null),TRb.setBorderTop(null),TRb.setBorderRight(new Z1(4289376696)),TRb.setBorderBottom(new Z1(4289376696)),TRb.setPaddingLeft(2),TRb.setPaddingRight(2),TRb.setPaddingTop(2),TRb.setPaddingBottom(2),TRb.setTextAlignment(v1.CENTER),TRb.setLineAlignment(v1.CENTER),TRb.setIconIndex(-1),TRb.setShapeName(null),(TRb=SRb._rowIndicatorCreated).setBackground(new U1(1610652159)),TRb.setHoveredBackground(new U1(2147523071)),(TRb=SRb._rowIndicatorUpdated).setBackground(new U1(536870912)),TRb.setHoveredBackground(new U1(1073741824)),(TRb=SRb._rowIndicatorDeleted).setBackground(new U1(2147483648)),TRb.setHoveredBackground(new U1(3221225472)),(TRb=SRb._checkBar).setBackground(U1.WHITE),TRb.setBorderLeft(null),TRb.setBorderTop(null),TRb.setBorderRight(new Z1(4288716960)),TRb.setBorderBottom(new Z1(4288716960)),TRb.setPaddingLeft(2),TRb.setPaddingRight(2),TRb.setPaddingTop(2),TRb.setPaddingBottom(2),TRb.setTextAlignment(v1.CENTER),TRb.setLineAlignment(v1.CENTER),TRb.setShapeName(null),TRb.setShapeColor(new U1(4283782485)),TRb.setShapeInactiveColor(new U1(4290822336)),TRb.setShapeSize(new W3(12)),(TRb=SRb._checkBarHead).setShapeName(null),TRb.setShapeColor(new U1(4283782485)),TRb.setShapeInactiveColor(new U1(4290822336)),TRb.setShapeSize(new W3(12)),(TRb=SRb._treeFooter).setBackground(new U1(4293849332)),TRb.setColor(U1.BLACK),TRb.setBorderLeft(null),TRb.setBorderTop(null),TRb.setBorderRight(new Z1(4288716960)),TRb.setBorderBottom(new Z1(4288716960)),TRb.setPaddingLeft(2),TRb.setPaddingRight(2),TRb.setPaddingTop(2),TRb.setPaddingBottom(2),TRb.setTextAlignment(v1.FAR),TRb.setLineAlignment(v1.CENTER),TRb.setShapeColor(U1.GRAY),(TRb=SRb._headerItem).setBackground(U1.WHITE),TRb.setBorderRight(new Z1(4288716960)),TRb.setBorderBottom(new Z1(4288716960)),TRb.setPaddingLeft(4),TRb.setPaddingTop(4),TRb.setPaddingBottom(4),TRb.setPaddingRight(4),(TRb=SRb._footerItem).setBackground(U1.WHITE),TRb.setBorderRight(new Z1(4288716960)),TRb.setBorderTop(new Z1(4288716960)),TRb.setPaddingLeft(4),TRb.setPaddingTop(4),TRb.setPaddingBottom(4),TRb.setPaddingRight(4),(TRb=SRb._treeExpander).setColor(U1.BLACK),TRb.setBorderLeft(null),TRb.setBorderTop(null),TRb.setBorderRight(null),TRb.setBorderBottom(new Z1(4291611852)),TRb.setPaddingTop(0),TRb.setPaddingBottom(0),TRb.setPaddingLeft(0),TRb.setPaddingRight(2),TRb.setShapeColor(U1.DIMGRAY),TRb.setShapeSize(new W3(9)),(TRb=SRb._treeIndent).setBackground(null),TRb.setBorderLeft(null),TRb.setBorderTop(null),TRb.setBorderRight(new Z1(4288716960)),TRb.setBorderBottom(new Z1(4288716960)),(TRb=SRb._scrollBar).setBackground(U1.SCROLL),(TRb=SRb._scrollBarButton).setBackground(new U1(4293980400)),TRb.setSelectedBackground(new U1(4286611584)),TRb.setHoveredBackground(new U1(4291870928)),TRb.setInactiveBackground(new U1(4293980400)),TRb.setShapeColor(new U1(4281545523)),TRb.setShapeSelectedColor(new U1(4294967295)),TRb.setShapeHoveredColor(new U1(4281545523)),TRb.setShapeInactiveColor(new U1(4288716960)),(TRb=SRb._scrollBarThumb).setBackground(new U1(4290822336)),TRb.setHoveredBackground(new U1(4288716960)),TRb.setSelectedBackground(new U1(4286611584)),TRb.setBorderRadius(0),(TRb=SRb._scrollBarIndent).setBackground(U1.SCROLLINDENT),(TRb=SRb._scrollEdge).setBackground(U1.SCROLL),(TRb=SRb._tooltip).setBackground("linear,#ffffff,#f8f8f8"),TRb.setColor(U1.BLACK),TRb.setBorder("#646464"),TRb.setBorderRadius(3),TRb.setFontName("Helvetica"),TRb.setFontSize(13),TRb.setPaddingLeft(7),TRb.setPaddingRight(7),TRb.setPaddingTop(5),TRb.setPaddingBottom(5),SRb);var E28="default",K28="grid",N28="panel",I9="groupPanel",P28="groupPanel.item",Z28="groupPanel.itemInner",i28="groupPanel.head",V28="groupPanel.headInner",U7="body",S28="body.empty",a28="body.emptyData",q28="body.row",v28="body.fixedRow",B28="body.cell",T28="body.fixedCell",s28="body.merged",f28="body.fixedMerged",u28="body.created",g28="body.updated",r28="body.deleted",h28="body.checked",X28="body.fixedColumnBar",A48="body.fixedRowBar",b48="body.selection",m48="body.mobileSelection",n37="body.rowHover",l37="body.rowRange",I37="body.rowDynamic",C37="body.cellDynamic",o37="body.focus",w0="header",D48="header.head",Q48="header.group",F48="header.sub",p48="header.menuHandle",z48="header.filterHandle",n48="header.sortHandle",l48="header.sortOrder",I48="header.summary",e37="header.summary.head",g58="header.summary.group",Z27="footer",C48="footer.group",o48="footer.head",J3="rowGroup",e48="rowGroup.header",x48="rowGroup.expander",L48="rowGroup.footer",H48="rowGroup.indent",G48="rowGroup.head",M48="rowGroup.bar",W48="rowGroup.headerBar",J48="rowGroup.footerBar",C9="rowIndicator",y48="rowIndicator.state",c48="rowIndicator.created",O48="rowIndicator.updated",j48="rowIndicator.deleted",x37="checkBar",k48="checkBar.head",U48="headerItem",d48="footerItem",o9="tree",Y48="tree.footer",t48="tree.expander",R48="tree.indent",g3="scrollBar",L37="scrollBar.button",H37="scrollBar.thumb",G37="scrollBar.indent",w48="scrollEdge",E48="tooltip",K48="palettes",N48="columns",M37=I1("StylesArchiver",null,{init:function(){this._super()},loadGridStyles:function(t,e){this.loadGrid(t,e)},loadGrid:function(t,e){},saveGrid:function(t){},loadStyles:function(t,e){},saveStyles:function(t){}},{applyStyles:function(t,e,i){i=!(2<arguments.length)||i,t&&e&&e.extend(t,i)},deserialize:function(r,t){function e(t,e,i){var n=r[t][e];return!!n&&(i.extend(n),!0)}function i(t,e){if(r.hasOwnProperty(t)){var i=r[t];if(i)return e.extend(i),!0}return!1}function n(t,e,i,n){var s=r[t][e][i];return!!s&&(n.extend(s),!0)}if(r&&t){var s,o,a,h=t.displayOptions();i(E28,t.defaultStyles()),i(K28,t.styles()),i(N28,t.panel().styles());var l=t.groupPanel();i(I9,l.styles())&&(e(I9,"item",l.itemStyles()),e(I9,"itemInner",l.itemInnerStyles()),e(I9,"head",l.head().styles()),e(I9,"headInner",l.head().innerStyles())),i(P28,l.itemStyles()),i(Z28,l.itemInnerStyles()),i(i28,l.head().styles()),i(V28,l.head().innerStyles());var u=t.body();i(U7,u.styles())&&(s=r[U7])&&(e(U7,"empty",u.emptyStyles()),e(U7,"emptyData",u.emptyDataStyles()),e(U7,"row",u.rowStyles()),e(U7,"fixedRow",u.fixedRowStyles()),e(U7,"cell",u.cellStyles()),e(U7,"fixedCell",u.fixedCellStyles()),e(U7,"merged",u.mergedStyles()),e(U7,"fixedMerged",u.fixedMergedStyles()),e(U7,"fixedColumnBar",u.fixedColumnBarStyles()),e(U7,"fixedRowBar",u.fixedRowBarStyles()),e(U7,"rowHover",h.rowHoverMask().styles()),s.hasOwnProperty("focus")&&(o=s.focus.border)&&h.setFocusBorder(o),D0()?e(U7,"selection",u.mobileSelectionStyles()):e(U7,"selection",u.selectionStyles()),(a=s.created)&&u.setCreatedStyles(a),(a=s.updated)&&u.setUpdatedStyles(a),(a=s.deleted)&&u.setDeletedStyles(a),(a=s.checked)&&u.setCheckedStyles(a),(a=s.rowRange)&&u.setRowRangeStyles(a),(a=s.rowDynamic)&&u.setRowDynamicStyles(a),(a=s.cellDynamic)&&u.setCellDynamicStyles(a)),i(S28,u.emptyStyles()),i(a28,u.emptyDataStyles()),i(q28,u.rowStyles()),i(v28,u.fixedRowStyles()),i(B28,u.cellStyles()),i(T28,u.fixedCellStyles()),i(s28,u.mergedStyles()),i(f28,u.fixedMergedStyles()),i(X28,u.fixedColumnBarStyles()),i(A48,u.fixedRowBarStyles()),i(n37,h.rowHoverMask().styles()),i(u28,u.createdStyles()),i(g28,u.updatedStyles()),i(r28,u.deletedStyles()),i(h28,u.checkedStyles()),D0()?i(m48,u.mobileSelectionStyles()):i(b48,u.selectionStyles()),i(n37,h.rowHoverMask().styles()),s&&(r.hasOwnProperty(l37)&&u.setRowRangeStyles(r[l37]),r.hasOwnProperty(I37)&&u.setRowDynamicStyles(r[I37]),r.hasOwnProperty(C37)&&u.setCellDynamicStyles(r[C37])),r.hasOwnProperty(o37)&&(o=r[o37].border)&&t.options.setFocusBorder(o);var d=t.header();i(w0,d.styles())&&(e(w0,"head",d.head().styles()),e(w0,"group",d.groupStyles()),e(w0,"sub",d.subStyles()),e(w0,"menuHandle",d.menuHandleStyles()),e(w0,"filterHandle",d.filterHandleStyles()),e(w0,"sortHandle",d.sortHandleStyles()),e(w0,"sortOrder",d.sortOrderStyles()),e(w0,"summary",d.summary().styles())&&(n(w0,"summary","head",d.summary().head().styles()),n(w0,"summary","group",d.summary().groupStyles()))),i(D48,d.head().styles()),i(Q48,d.groupStyles()),i(F48,d.subStyles()),i(p48,d.menuHandleStyles()),i(z48,d.filterHandleStyles()),i(n48,d.sortHandleStyles()),i(l48,d.sortOrderStyles()),i(I48,d.summary().styles()),i(e37,d.summary().head().styles()),i(e37,d.summary().groupStyles());var c=t.footer();i(Z27,c.styles())&&(e(Z27,"group",c.groupStyles()),e(Z27,"head",c.head().styles())),i(C48,c.groupStyles()),i(o48,c.head().styles());var _=t.rowGroup();r&&r.hasOwnProperty(J3)&&(e(J3,"header",_.headerStyles()),e(J3,"expander",_.expanderStyles()),e(J3,"footer",_.footerStyles()),e(J3,"indent",_.indentStyles()),e(J3,"head",_.headStyles()),e(J3,"bar",_.barStyles()),e(J3,"headerBar",_.headerBarStyles()),e(J3,"footerBar",_.footerBarStyles())),i(e48,_.headerStyles()),i(x48,_.expanderStyles()),i(L48,_.footerStyles()),i(H48,_.indentStyles()),i(G48,_.headStyles()),i(M48,_.barStyles()),i(W48,_.headerBarStyles()),i(J48,_.footerBarStyles());var f=t.rowIndicator();i(C9,f.styles())&&(e(C9,"state",f.stateStyles()),e(C9,"created",f.createdStyles()),e(C9,"updated",f.updatedStyles()),e(C9,"deleted",f.deletedStyles())),i(y48,f.stateStyles()),i(c48,f.createdStyles()),i(O48,f.updatedStyles()),i(j48,f.deletedStyles());var g=t.checkBar();if(i(x37,g.styles())&&e(x37,"head",g.headStyles()),i(k48,g.headStyles()),i(U48,t.headerItemStyles()),i(d48,t.footerItemStyles()),r4){var m=Q2(t,r4);if(m){i(o9,t.styles());var p=m.treeOptions();r&&r.hasOwnProperty(o9)&&(e(o9,"footer",p.footerStyles()),e(o9,"expander",p.expanderStyles()),e(o9,"indent",p.indentStyles())),i(Y48,p.footerStyles()),i(t48,p.expanderStyles()),i(R48,p.indentStyles())}}var w=t.vscrollBar(),v=t.hscrollBar();i(g3,w.styles())&&(i(g3,v.styles()),e(g3,"button",w.buttonStyles()),e(g3,"button",v.buttonStyles()),e(g3,"thumb",w.thumbStyles()),e(g3,"thumb",v.thumbStyles()),e(g3,"indent",w.indentStyles()),e(g3,"indent",v.indentStyles())),i(L37,w.buttonStyles()),i(L37,v.buttonStyles()),i(H37,w.thumbStyles()),i(H37,v.thumbStyles()),i(G37,w.indentStyles()),i(G37,v.indentStyles()),i(w48,t.scrollEdgeStyles()),i(E48,h.tooltipStyles());var C=r[K48];C&&t.loadPalettes(C);var I=r[N48];I&&t.registerColumnStyles(I),(h=r.options)&&t.setOptions(h)}}}),i27=I1("DynamicStyle",null,{init:function(){this._super(),this._body=!0,this._fixed=!0},apply:function(t,e){},_changed:function(){}}),V27=I1("DynamicStyleImpl",i27,{init:function(t){this._super(),this._exprNode=null,this._styleMap={},t&&(t.hasOwnProperty("expression")&&this.setExpression(t.expression),t.hasOwnProperty("styles")&&this.setStyles(t.styles))},expression:null,callback:null,styles:null,setExpression:function(t){var e=t?t.toString():null;e!=this._expression&&(this._expression=e,this.$_buildExpression(),this._changed())},setCallback:function(t){t!==this._callback&&(this._callback="function"==typeof t?t:null,this._changed())},setStyles:function(t){t!=this._styles&&(this._styles=t,this.$_buildStyles(),this._changed())},apply:function(t,e){var i=!1;if(this._callback?i=this._callback(t.scope()):this._exprNode&&this._exprNode.evaluate(t)&&(i=!0),i)for(var n in this._styleMap){var s=e[$$_STYLE_PROP_MAP[n]];s&&s.call(e,this._styleMap[n])}},getAppliables:function(t,e){var i=!1;if(this._callback?i=this._callback(t.scope()):this._exprNode&&this._exprNode.evaluate(t)&&(i=!0),i)for(var n in this._styleMap){var s=GridStylesProto[$$_STYLE_PROP_MAP[n]];s&&(e[n]={setter:s,value:this._styleMap[n]})}return e},$_buildExpression:function(){this._expression?(this._exprNode=J4.Default.parse(this._expression),null==this._exprNode&&(this._exprNode=y8.Default)):this._exprNode=y8.Default},$_buildStyles:function(){if(this._styleMap={},this._styles)for(var t in this._styles)this._styleMap[t]=this._styles[t]}}),W37=I1("DynamicStyleCase",i27,{init:function(t){this._super(),this._callbacks=[],this._exprNodes=[],this._stylesMap=[],t&&(t.hasOwnProperty("callbacks")&&this.setCallbacks(t.callbacks),t.hasOwnProperty("expressions")&&this.setExpressions(t.expressions),t.hasOwnProperty("styles")&&this.setStyles(t.styles))},expressions:null,callbacks:null,styles:null,setExpressions:function(t){t!=this._expressions&&(this._expressions=t,this.$_buildExpressions(),this._changed())},setCallbacks:function(t){if(t!==this._callbacks){if(this._callbacks=[],V1(t))for(var e=0,i=t.length;e<i;e++)this._callbacks.push("function"==typeof t[e]?t[e]:null);else"function"==typeof t&&this._callbacks.push(t);this._changed()}},setStyles:function(t){t!=this._styles&&(this._styles=V1(t)?t:[t],this.$_buildStyles(),this._changed())},apply:function(t,e){var i,n,s,r,o,a,h=Math.max(this._callbacks?this._callbacks.length:0,this._exprNodes?this._exprNodes.length:0);for(i=0;i<h;i++)if((n=this._callbacks[i])&&n(t.scope())||(s=this._exprNodes[i])&&s.evaluate(t)){for(o in r=this._stylesMap[i])void 0!==(a=r[o])&&e[$$_STYLE_PROP_MAP[o]].call(e,a);break}},getAppliables:function(t,e){var i,n,s,r,o,a,h=Math.max(this._callbacks?this._callbacks.length:0,this._exprNodes?this._exprNodes.length:0);for(i=0;i<h;i++)if(r=void 0,((n=this._callbacks[i])&&n(t.scope())||(s=this._exprNodes[i])&&s.evaluate(t))&&(r=this._stylesMap[i]),r){for(o in r)void 0!==(a=r[o])&&(e[o]={setter:GridStylesProto[$$_STYLE_PROP_MAP[o]],value:a});break}return e},$_buildExpressions:function(){var t,e,i,n;if(this._exprNodes=[],V1(this._expressions)&&0<(t=this._expressions.length))for(e=0;e<t;e++)(i=this._expressions[e])?(null==(n=J4.Default.parse(i))&&(n=y8.Default),this._exprNodes.push(n)):this._exprNodes.push(y8.Default);this.$_buildStyles()},$_buildStyles:function(){var t,e,i,n=this._stylesMap=[];if(V1(this._styles))for(e=Math.max(this._callbacks?this._callbacks.length:0,this._exprNodes?this._exprNodes.length:0),t=0;t<e;t++)if(styles=this._styles[t],styles){if(i={},styles)for(var s in styles)i[s]=styles[s];n.push(i)}else 0<t?n.push(n[n.length-1]):n.push(null)}}),g0=I1("DynamicStyleCollection",null,{init:function(){this._super(),this._items=[]},count:function(){return this._items.length},getItem:function(t){return this._items[t]},clear:function(){this._items=[]},add:function(t){var e=this.$_createStyle(t);e&&this._items.indexOf(e)<0&&this._items.push(e)},getItems:function(){return this._items.slice()},setItems:function(t){var e,i,n;if(this._items=[],t)for(t instanceof g0?t=t.getItems():V1(t)||(t=[t]),e=0,i=t.length;e<i;e++)(n=this.$_createStyle(t[e]))&&this._items.push(n)},prepare:function(){},applyCheck:function(t,e,i){t&&e&&i&&this.applyInternalNormal(t,e,i)},applyInternalNormal:function(t,e,i){var n,s;for(n=0,s=this._items.length;n<s;n++)this._items[n].apply(t,e)},applyInternalUserMode:function(t,e,i){var n,s;try{for(n=0,s=this._items.length;n<s;n++)this._items[n].apply(t,e)}catch(t){}},getAppliables:function(t,e){var i,n;for(i=0,n=this._items.length;i<n;i++)this._items[i].getAppliables(t,e);return e},toArray:function(){return this._items.concat()},proxy:function(){var t,e=[];for(t=0;t<this._items.length;t++)e.push(this._items[t].proxy());return e},$_createStyle:function(t){var e=null;return t instanceof i27?e=t:t&&(V1(t.callbacks)?((e=new W37).setCallbacks(t.callbacks),e.setStyles(t.styles)):t.callback?((e=new V27).setCallback(t.callback),e.setStyles(t.styles)):V1(t.expressions)?((e=new W37).setExpressions(t.expressions),e.setStyles(t.styles)):t.expression&&((e=new V27).setExpression(t.expression),e.setStyles(t.styles))),e}}),S27=I1("GridRowStyleRange",null,{init:function(t,e,i){this._super(),"function"==typeof e?this._callback=e:this._rangeNode=e?J4.Default.parse(e):null,this._styles=new o1(t,null,i,!1,t)},getRow:function(t,e){if(this._callback){if(this._callback(this._styles._owner._owner._grid,e))return this._styles}else if(t.setRow(e),this._rangeNode&&this._rangeNode.evaluate(t))return this._styles;return null}}),P48=I1("GridRowStyles",null,{init:function(t,e){this._super(),this._owner=t,this._rangeRuntime=new i9,this.assign(e),this._current=void 0,this._palettes=null},setDefaultStyles:function(t,e){this._styles=t,this._fixedStyles=e},stylesChanged:function(){this._changed()},getPaletteScope:function(){return this},getPalette:function(t){return this._palettes[t]},getPaletteIndex:function(t){return"row"==t?this._current:t},styles:null,fixedStyles:null,owner:function(){return this._owner},getRow:function(t,e){if(e&&this._fixedIgnore)return this._fixedStyles;var i,n,s=e?this._fixedStyles:this._styles,r=this._rows[t]||this._rowMap[t];if(!r&&this._ranges)for(i=0,n=this._ranges.length;i<n;i++)if(r=this._ranges[i].getRow(this._rangeRuntime,t)){this._rowMap[t]=r;break}return r&&(r._parent=s),this._current=t,r||s},clearRows:function(){var t,e=!1;for(t in this._rows){e=!0;break}return e&&(this._rows={},this._rowMap={},this._changed()),this},setRow:function(t,e){return b87(t)&&e?(this._rows[t]=new o1(null,null,e,!1),this._rows[t]._parent=this._styles,this._changed()):this._rows[t]&&(delete this._rows[t],this._changed()),this},clearRanges:function(){return this._ranges&&0<this._ranges.length&&(this._ranges=null,this._rangeMap={},this._changed()),this},setRange:function(t,e,i){var n,s,r;if(n&&i)(n=new S27(this,e,i))._styles._parent=this._styles,this._ranges=this._ranges||[],this._ranges.push(n),t&&(this._rangeMap[t]=n),this._changed();else if(t&&this._ranges){for(s=this._rangeMap[t],delete this._rangeMap[t],r=this._ranges.length;r--;)if(this._ranges[r]===s){this._ranges.splice(r,1);break}this._changed()}return this},assign:function(t){var e,i,n,s,o,a;if(this._ranges=null,this._rangeMap={},this._rows={},this._rowMap={},t){if(e=t.rows)for(s=0;s<e.length;s++)(i=(o=e[s]).callback||o.range)&&o.styles&&((n=new S27(this,i,o.styles))._styles._parent=this._styles,this._ranges=this._ranges||[],this._ranges.push(n),o.name&&(this._rangeMap[o.name]=n));for(a in t)"rows"!=a&&(r=Number(a),isNaN(r)?I4(t[a])&&((n=new S27(this,a,t[a]))._styles._parent=this._styles,this._ranges=this._ranges||[],this._ranges.push(n)):(this._rows[r]=new o1(null,null,t[a],!1),this._rows[r]._parent=this._styles))}return this},$_prepareRender:function(t,e){this._rowMap={},this._palettes=t,this._fixedIgnore=e,this._rangeRuntime.setGrid(this._owner.owner())},_changed:function(){this._owner&&this._owner.onRowStylesChanged(this)}}),$$_dc_empty_styles=new o1,$$_dc_edit_props=["readOnly","editable","button"],x9=I1("CellStyle",null,{init:function(t,e){this._super(),this._id=t,this._styles=$$_dc_empty_styles,this._props=null,e&&this.assign(e)},id:function(){return this._id},editable:function(){return this._props?this._props.editable:void 0},isEditable:function(){return this.editable()},readOnly:function(){return this._props?this._props.readOnly:void 0},isReadOnly:function(){return this.readOnly()},button:function(){return this._props&&this._props.button},clone:function(){var t=new x9(this._id);t._styles=this._styles===$$_dc_empty_styles?$$_dc_empty_styles:this._styles.clone(),t._props=this._props?R4(null,this._props):null},setStyles:function(t){t!=this._styles&&(t?(this._styles===$$_dc_empty_styles&&(this._styles=new o1(null,null,!1)),this._styles.clearValues(),this._styles.extend(t,!1,!1)):this._styles=$$_dc_empty_styles)},assignTo:function(t){t&&t.extend(this._styles,!1,!1)},assign:function(t){t&&(this.setStyles(t instanceof x9?t._styles:t),this.$_assignProps(t,$$_dc_edit_props))},$_assignProps:function(t,e){var i,n;for(i=e.length;i--;)n=e[i],t.hasOwnProperty(n)&&(void 0===t[n]?this._props&&delete this._props[n]:(this._props=this._props||{},this._props[n]=t[n]))}}),i48=I1("CellStyleCollection",a2,{init:function(t){this._super(),this._owner=t,this._styles={},this._dirtyLock=0},getCellStyle:function(t){return this._styles[t]},exists:function(t){return void 0!==this._styles[t]},get:function(t){return this._styles[t]},clear:function(){return!m27(this._styles)&&(this._styles={},this._dirtyLock<=0&&this._owner&&this._owner.cellStylesCleared(this._dirtyLock<=0),!0)},add:function(t,e){return!(!t||!e||this._styles[t]||(this._styles[t]=new x9(t,e),this._owner&&this._owner.cellStyleAdded(t,this._dirtyLock<=0),0))},set:function(t,e){if(t){var i=this._styles[t];if(e)return i?(i.assign(e),this._owner&&this._owner.cellStyleChanged(t,this._dirtyLock<=0)):(this._styles[t]=new x9(t,e),this._owner&&this._owner.cellStyleAdded(t,this._dirtyLock<=0)),!0;if(i)return delete this._styles[t],this._owner&&this._owner.cellStyleRemoved(t,i,this._dirtyLock<=0),!0}return!1},beginUpdate:function(){this._dirtyLock++},endUpdate:function(t){0==--this._dirtyLock&&t&&this._owner&&this._owner.cellStyleChanged(null,!0)},load:function(t){}}),J37=I1("CellStyleMap",E8,{init:function(){this._super(),this._ds=null,this._initMap()},isEmpty:function(){return 0==this._styleMap.length&&!this._styleMap[-1]},setCellStyle:function(t,e,i){if(e<0)this._styleMap[t]=i;else{var n,s=this._styleMap[t];if(s)if(V1(s))s[e]=i;else{n=[];for(var r=0,o=this._ds.fieldCount();r<o;r++)n[r]=s;this._styleMap[t]=n}(n=this._styleMap[t])||(n=[]),n[e]=i,this._styleMap[t]=n}},loadStyleRows:function(t,e,n,s,r){if(!e||e.length<1||!n)return!1;var o=this._ds;if(s=void 0===s?0:Math.max(this._minRowIndex(o),s),(r=void 0===r?e.length:Math.max(0,Math.min(e.length,r)))<=0)return!1;var a,h,l,u,d,c=this._maxRowIndex(o),_=(o.fieldCount(),{}),f=e.length;for(a in n)0<=(h=o.getFieldIndexEx(n[a]))&&(_[a]=h);for(u=s,f=Math.min(r,f),i=0;i<f&&u<c;i++,u++)if(d=e[i])for(a in _)h=_[a],(l=t.getCellStyle(d[a]))&&this.setCellStyle(u,h,l);return!0},removeCellStyle:function(t){var e,i,n;for(e=0,i=this._styleMap.length;e<i;e++)if(n=this._styleMap[e],V1(n))for(var s=n.length-1;0<=s;s--)n[s]===t&&(n[s]=null);else this._styleMap[e]===t&&delete this._styleMap[e]},clearCellStyles:function(){return!this.isEmpty()&&(this._initMap(),!0)},getCellStyle:function(t,e){var i=this._styleMap[t];return V1(i)?i[e]:i},_initMap:function(){this._styleMap=[]},_minRowIndex:function(t){return 0},_maxRowIndex:function(t){return t.rowCount()}}),l5=I1("CellStyleManager",a2,{init:function(t){this._super(),this._styles=new i48,this._styleMap=t.createCellStyleMap(),this._updateLock=0},dataSource:null,setDataSource:function(t){t!==this._dataSource&&(this._dataSource&&this._dataSource.removeTag(this._styleMap),(this._dataSource=t)&&t.addTag(this._styleMap),this._styleChanged())},isEmpty:function(){return this._styleMap.isEmpty()},beginUpdate:function(){this._updateLock++},endUpdate:function(t){t=!(0<arguments.length)||t,0==--this._updateLock&&t&&this._styleChanged()},registerStyle:function(t,e,i){t&&I4(e)&&(i?this._styles.set(t,e):this._styles.add(t,e))&&this._styleChanged()},registerStyles:function(t,e){if(V1(t)){for(var i=!1,n=0,s=t.length;n<s;n++){var r=t[n];r&&r.id&&(i=e?this._styles.set(r.id,r)||i:this._styles.add(r.id,r)||i)}i&&this._styleChanged()}},unregisterStyles:function(t){var e=!1;if(V1(ids))for(var i=t.length;i--;)e=this._styles.set(t[i],void 0)||e;else t&&(e=this._styles.set(t,void 0));e&&this._styleChanged()},unregisterAll:function(){this._styles.clear()&&this._styleChanged()},getStyle:function(t){return this._styles.get(t)},hasStyle:function(t){return this._styles.exists(t)},getStyleAt:function(t,e){if(this._dataSource){var i=this._dataSource.getFieldIndexEx(e);return this._styleMap.getCellStyle(t,i)}},setStyleAt:function(t,e,i,n){if(this._dataSource){var s=i?this._styles.get(i):null;this.$_setStyle(this._dataSource,t,e,s),n&&this._cellChanged(t,e)}},setStylesAt:function(t,e,i){var n=this._dataSource;if(n){var s,r,o,a,h=j0(t),l=j0(e),u=i?this._styles.get(i):null;if(h&&l)for(a=l.length,s=0,r=h.length;s<r;s++)for(o=0;o<a;o++)this.$_setStyle(n,h[s],l[o],u);else if(h)for(s=0,r=h.length;s<r;s++)this.$_setStyle(n,h[s],e,u);else if(l)for(o=0,r=l.length;o<r;o++)this.$_setStyle(n,t,l[o],u);else this.$_setStyle(n,h,e,u);this._cellChanged(t,e)}},loadStyleRows:function(t,e,i,n){this._styleMap.loadStyleRows(this._styles,t,e,i,n)&&this._cellChanged(i,e)},clear:function(){this._styleMap.clearCellStyles()&&this._cellChanged(-1)},$_getStyleAt:function(t,e){return this._styleMap.getCellStyle(t,e)},$_setStyle:function(t,e,i,n){Math.max(-1,e);var s=t.getFieldIndexEx(i);this._styleMap.setCellStyle(e,s,n)},_styleChanged:function(){0==this._updateLock&&this.fireEvent(l5.STYLE_CHANGED)},_cellChanged:function(t,e){0==this._updateLock&&this.fireEvent(l5.CELL_CHANGED,t,e)}});l5.STYLE_CHANGED="onCellStyleManagerStyleChanged",l5.CELL_CHANGED="onCellStyleManagerCellChanged";var E0=I1("ColumnFilter",a2,{init:function(t){this._super(),this.setExpression(t)},name:null,expression:null,text:null,description:null,active:!1,visible:!0,propertyChanged:function(t,e){this._changed()},toString:function(){return this._text||this._name},_changed:function(){this.fireEvent(E0.CHANGED)}},{CHANGED:"onColumnFilterChanged"}),y37=I1("ColumnFilterRun",E0,{init:function(t){this._super(t)},prepare:function(t,e){t.setDataSource(e)},select:function(t,e,i){return!this._exprNode||(t.setData(e,i),this._exprNode.evaluate(t))},setExpression:function(t){t!=this._expression&&(this._expression=t,this._exprNode=t?J4.Default.parse(t,null):null)}}),V48=I1("ColumnFilterCollection",a2,{init:function(){this._super(),this._items=[],this._names={},this._updating=!1},count:function(){return this._items.length},activeCount:function(){var t,e=0;for(t=this._items.length;t--;)this._items[t].active()&&e++;return e},items:function(){return this._items.slice()},visible:function(){for(var t=this._items.length;t--;)if(this._items[t].visible())return!0;return!1},getItemAt:function(t){if(t<0||t>=this._items.length)throw new Error("Invalid index: "+t);return this._items[t]},getItem:function(t){return this._names[t]||null},getItemIndex:function(t){for(var e=this._items.length-1;0<=e;e--)if(this._items[e]._name==t)return e;return-1},getActiveItems:function(t){var e,i=[];for(e=this._items.length-1;0<=e;e--)this._items[e].active()==t&&i.push(this._items[e]);return i},clear:function(t){t=!(0<arguments.length)||t;var e,i=this._items.length;if(0<i){for(e=0;e<i;e++)this._items[e].removeListener(this);return this._items.length=0,this._names={},t&&this._changed(null),!0}return!1},add:function(t){var e=Q2(t,E0);e?this._items.indexOf(e)<0&&e.name()&&(this.$_checkName(e.name),e=e.clone()):t&&t.name&&(this.$_checkName(t.name),(e=new E0).assign(t)),this._items.push(e),(this._names[e.name]=e).addListener(this),this._changed(null)},addItems:function(t,e){if(!V1(t)&&t&&(t=[t]),t&&0<t.length){var i,n,s,r=0;for(i=0,len=t.length;i<len;i++)(n=Q2(t[i],E0))?this._items.indexOf(t[i])<0&&n.name()&&(e||this.$_checkName(n.name()),n=n.clone()):t[i]&&t[i].name&&(e||this.$_checkName(t[i].name),(n=new E0).assign(t[i])),n&&(0<=(s=this.getItemIndex(n.name()))?(this._items[s]&&this._items[s].removeListener(this),this._items[s]=n):this._items.push(n),n.addListener(this),this._names[n.name()]=n,r++);0<r&&this._changed(null)}},remove:function(t){if(!t)return!1;var e,i;for(e=this._items.length-1;0<=e;e--)if((i=this._items[e]).name()==t)return this._items.splice(e,1),delete this._names[i.name()],i.removeListener(this),this._changed(null),!0;return!1},removeItems:function(t){if(V1(t)&&!(t.length<1)){var e,i,n,s=0;for(e=t.length-1;0<=e;e--)0<=(i=this.getItemIndex(t[e]))&&(n=this._items[i],this._items.splice(i,1),delete this._names[n.name()],n.removeListener(this),s++);0<s&&this._changed(null)}},activateItems:function(t,e){if(V1(t)&&!(t.length<1)){var i,n,s=0;this._updating=!0;try{for(i=t.length-1;0<=i;i--)(n=this._names[t[i]])&&n.active()!=e&&(n.setActive(e),s++);0<s&&this._changed(null,!0)}finally{this._updating=!1}}},activateAll:function(t){var e,i,n=this._items.length,s=!1;this._updating=!0;try{for(e=0;e<n;e++)(i=this._items[e]).active()!=t&&(i.setActive(t),s=!0);s&&this._changed(null,!0)}finally{this._updating=!1}},toggleItems:function(t){var e,i,n;if(V1(t)&&!(t.length<1)){this._updating=!0;try{for(n=0,e=t.length-1;0<=e;e--)(i=this._names[t[e]])&&(i.setActive(!i.active()),n++);0<n&&this._changed(null,!0)}finally{this._updating=!1}}},toggleAll:function(){var t,e,i=this._items.length,n=!1;this._updating=!0;try{for(t=0;t<i;t++)(e=this._items[t]).setActive(!e.active()),n=!0;n&&this._changed(null,!0)}finally{this._updating=!1}},assign:function(t){if(t!==this){var e,i,n,s=j0(t),r=this.clear(!1);if(t)for(s||(s=[t]),e=0,i=s.length;e<i;e++)n=null,(t=s[e])instanceof E0?this._items.indexOf(t)<0&&t.name()&&(this.$_checkName(t.name()),n=t.clone()):t&&t.name&&(this.$_checkName(t.name),(n=new E0).assign(t)),n&&(this._items.push(n),(this._names[n.name()]=n).addListener(this));(r||0<this.count())&&this._changed(null)}},$_checkName:function(t){if(this._names.hasOwnProperty(t))throw new Error(E2._default.columnFilterExists+t)},_changed:function(t,e){this._updating&&!e||this.fireEvent(E0.CHANGED,t)},onColumnFilterChanged:function(t){this._changed(t)}}),L9=I1("ColumnFilterSelector",a2,{init:function(t){this._super(),this._container=t,this._globalMouseHandler=function(t){for(var e=t.target;e;){if(e==this._element)return;e=e.parentNode}this.hide()}.bind(this)},minWidth:100,closeWhenClick:!1,column:function(){return this._column},opened:function(){return this._element&&this._container.contains(this._element)},show:function(t,e){if(this.hide(),t){this._showing=!0;try{e=e||t.grid().operateOptions().filterSelector(),this._closeWhenClick=e.closeWhenClick(),this.$_show(t,e)}finally{this._showing=!1}}},$_show:function(t,e){var i=this._element=this._initControl();if(i&&!i.parentNode){var n,s,r,o,a,h,l,u,d,c,_,f=i.style,g=this._eltAll,m=this._eltItems,p=this._eltAuto,w=this._autoView,v=t.grid(),C=this._column=t.index().column,I=t.boundsByContainer(),R=v.width()-10,y=v.height()-10;w1.setStyles(i,{position:"absolute",float:"none",overflow:"hidden",zIndex:3e3,background:"rgb(233, 233, 233)",border:"1px solid rgb(200, 200, 200)",boxShadow:"rgba(0, 0, 0, 0.8) 1px 2px 5px",fontFamily:"Tahoma",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",fontSize:"10pt",padding:"4px"}),this.$_clearItems(),h=this.$_buildItems(C),l=this.$_buildAuto(v,h),n=parseFloat(e.getMinWidth(R)),!isNaN(n)&&0<n&&(f.minWidth=n+"px"),n=parseFloat(e.getMaxWidth(R)),!isNaN(n)&&0<n?f.maxWidth=Math.min(n,R)+"px":f.maxWidth=R+"px",n=parseFloat(e.getMinHeight(y)),!isNaN(n)&&0<n&&(f.minHeight=n+"px"),n=parseFloat(e.getMaxHeight(y)),!isNaN(n)&&0<n?f.maxHeight=Math.min(n,y)+"px":f.maxHeight=y+"px",g.style.visibility=h?"":"collapse",g.style.height=h?"":"0px",this._container.appendChild(i),l&&(_=(d=w._eltItems.childNodes)[(c=Math.max(1,Math.min(this._column.autoFilter().displayCount()+1,d.length)))-1],w._eltItems.style.height=_.offsetHeight*c+3+"px"),p.style.display=l?"block":"none",u=(s=i.getBoundingClientRect()).height-g.offsetHeight-8,l&&(u-=p.getBoundingClientRect().height),m.style.height=u+"px",m.offsetWidth>m.clientWidth&&(f.width=s.width+m.offsetWidth-m.clientWidth+"px"),n=I.right()-s.width,f.left=(this._x=Math.max(0,n))+"px",y+=10,(u=I.bottom())+s.height>=y&&(u=Math.max(0,y-s.height-3)),f.top=(this._y=u)+"px",l&&(r=g.getBoundingClientRect(),o=m.getBoundingClientRect(),a=p.getBoundingClientRect(),r.height+o.height+a.height>s.height&&(y=r.height+o.height+a.height-s.height+w._eltFinder.getBoundingClientRect().height+w._hr.getBoundingClientRect().height,w._eltItems.style.height=Math.max(0,_.offsetHeight*c+2-y-2)+"px"),w._findInput.style.minWidth=w._findInput.style.maxWidth=Math.max(0,r.width-w._findButton.offsetWidth-4)+"px"),h||l||this.hide(),setTimeout(function(){"function"==typeof V0?V0(this,"mousedown",this._globalMouseHandler):f2.addEventListener("mousedown",this._globalMouseHandler)}.bind(this),0)}},hide:function(){var t=this._element;t&&t.parentNode&&("function"==typeof _removeEventListener?_removeEventListener("mousedown",this._globalMouseHandler):f2.removeEventListener("mousedown",this._globalMouseHandler),this._container.removeChild(t))},_initControl:function(){var t,e,i,n,s=u2.createElement("div");return s.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),(t=this._eltAll=u2.createElement("div")).style.float="none",t.style.backgroundColor="#333",t.style.color="#fff",(e=u2.createElement("input")).id="$columnFilter_all_"+L9.$_checkId++,e.type="checkbox",e.tabIndex=-1,e.onclick=function(t){this._column.activateAllFilters(t.target.checked),this.$_refreshItems()}.bind(this),t.appendChild(e),(i=u2.createElement("label")).htmlFor=e.id,i.innerHTML="All",t.appendChild(i),(n=u2.createElement("hr")).style.height="1px",n.style.border="0px",n.style.margin="2px",n.style.color="#777",n.style.backgroundColor="#777",t.appendChild(n),s.appendChild(t),(t=this._eltItems=u2.createElement("div")).style.float="none",t.style.overflow="auto",s.appendChild(t),this._autoView=new c37(this._container),(t=this._eltAuto=this._autoView._element).style.float="none",t.style.overflow="hidden",t.style.marginTop="0px",s.appendChild(t),s},$_clearItems:function(){for(var t=this._eltItems;t.lastChild;)t.removeChild(t.lastChild)},$_buildItems:function(t){var e,i,n,s,r,o,a=t.filters(),h=!1,l=this;for(e=0,i=a.length;e<i;e++)(n=a[e]).visible()&&((s=u2.createElement("div")).style.float="none",s.style.whiteSpace="nowrap",w1.disableSelection(s),this._eltItems.appendChild(s),s.onmouseover=function(t){(this._currDiv=t.currentTarget).style.textDecoration="underline"},s.onmouseout=function(t){(this._currDiv=t.currentTarget).style.textDecoration="none"},(r=u2.createElement("input")).id="$columnFilter_item_"+L9.$_checkId++,r.type="checkbox",r.tabIndex=-1,r.checked=n.active(),r.filter=n,r.onclick=function(t){var e=t.target;e.filter.setActive(e.checked),l._closeWhenClick&&l.hide()},s.check=r,s.appendChild(r),(o=u2.createElement("label")).htmlFor=r.id,o.innerHTML=n.toString(),o.title=n.description()||n.toString(),s.appendChild(o),h=!0);return h},$_buildAuto:function(t,e){var i=this._column.autoFilter(),n=this._autoView;if(i.active())return n.setFilter(i),n.measure(t,100,100,e),!0},$_refreshItems:function(){var t,e,i,n=this._eltItems.children;for(t=0,e=n.length;t<e;t++)(i=n[t]).check.checked=i.check.filter.active()},_changed:function(){this.fireEvent(E0.CHANGED)}},{$_checkId:0});L9.CHANGED="onColumnFilterSelectorChanged";var S48=I1("RowFilter",a2,{init:function(t){this._super(),this._owner=t},active:!0,expression:null,callback:null,setActive:function(t){t!=this._active&&(this._active=t,this._changed())},setExpression:function(t){t!=this._expression&&(this._expression=t,this._exprNode=t?J4.Default.parse(t,null):null,this._changed())},setCallback:function(t){(t=p4(t))!=this._callback&&(this._callback=t,this._changed())},canFiltering:function(){return this._active&&(this._callback||this._exprNode)},prepare:function(t){this._runtime=t},select:function(t){return this._callback?this._callback(t):this._exprNode?this._exprNode.evaluate(this._runtime.setRow(t)):void 0},assignSimple:function(t){S4(t)?this.setExpression(t):b4(t)?this.setCallback(t):null!=t||(this.setExpression(null),this.setCallback(null))},_changed:function(){this._owner&&this._owner.rowFilterChanged(this)}}),d7=I1("ColumnAutoFilter",a2,{init:function(t){this._super(),this._column=t,this._valueType=t&&t.valueType(),this.$_clear(),this._alone=!0},active:!1,valueScale:0,menu:null,maxCount:U4(100),ignoreCase:!1,displayCase:H8.NORMAL,ascending:!0,displayCount:U4(6),editSize:U4(18),showEllipsis:!1,customFilter:!1,setValueScale:function(t){(t=K3(t))!=this._valueScale&&(this._valueScale=t,this.$_clear(),this._changed())},column:function(){return this._column},valueType:function(){return this._valueType},count:function(){return this._values.length},checkedCount:function(){return this._active?this._checkCount:0},allChecked:function(){var t,e=this._checks,i=this._values,n=i.length;if(this._checkCount>=n){for(t=0;t<n;t++)if(!e[i[t]])return!1;return!0}},setAlone:function(t){this._alone=t},clearChecked:function(){0<this._checkCount&&(this._checks={},this._checkCount=0,this._changed())},clear:function(){(this._values&&this._values.length||0<this._checkCount)&&(this.$_clear(),this._changed())},loadItems:function(t,e){if(!(!t&&this._values&&0<this._values.length))if(e=e||this._column.grid()){var i=e.dataSource();if(i){var n,s,r,o,a,h,l=this._maxCount<=0?Q0:this._maxCount,u=this._checks,d=this._valueType=this._column.valueType(),c=i.getDistinctValues(this._column.dataIndex());if(this._obj=d==a1.OBJECT,c&&0<(n=c.length)&&this._ignoreCase&&this._column.valueType()==a1.TEXT){for(r=s9(c[0]),a=[c[0]],s=1;s<n;s++)(o=s9(c[s]))!==r&&(a.push(c[s]),r=o);c=a}if(c){if(((h=this._valueScale=K3(this._valueScale))||this._obj)&&(c=this.$_scaleValues(c,h)),this._ascending||c.reverse(),this._allValues=c,0<this._checkCount){for(s=c.length;s--&&!u[c[s]];);l=Math.max(l,s+1)}this._remainder=c.length-l,0<this._remainder&&(c=c.slice(0,l))}else this._remainder=0;this._values=c||[]}else this._values=[]}else this._values=[]},$_search:function(t,e,i,n){var s,r,o=this._values;switch(this._valueType){case a1.TEXT:for(s=e;s<i;s++)if(0==o[s].indexOf(t))return s;for(r=t.toUpperCase(),s=e;s<i;s++)if(0==o[s].toUpperCase().indexOf(r))return s;for(s=e;s<i;s++)if(0<=o[s].indexOf(t))return s;for(s=e;s<i;s++)if(0<=o[s].toUpperCase().indexOf(r))return s;break;case a1.NUMBER:for(r=Number(t),s=e;s<i;s++)if(o[s]==r)return s;default:if(n){for(i=Math.min(i,n.length),s=e;s<i;s++)if((r=n[s+1].childNodes[1].innerHTML)&&0==r.indexOf(t))return s}else for(s=e;s<i;s++)if(o[s]==t)return s}return-1},search:function(t,e,i){var n,s=this._values.length;return 0<s?(e=s<=e?0:e,(n=this.$_search(t,e,s,i))<0&&(n=this.$_search(t,0,e,i)),n):-1},$_checkValue:function(t,e){return e&&!this._checks[t]?(this._checks[t]=!0,this._checkCount++,!0):!e&&this._checks[t]?(this._checks[t]=!1,this._checkCount--,!0):void 0},$_check:function(t,e){if(t<this._values.length){var i=this._values[t];return this.$_checkValue(i,e)}},check:function(t,e){this._values&&this.$_check(t,e)&&(this._column.$_autoFilterChecked(t,this._values[t],e),this.fireEvent(d7.CHECKED,t,this._values[t],e))},checkList:function(t,e){var i,n,s,r;if(this._values&&V1(t)){for(s=[],r=[],i=t.length;i--;)n=t[i],this.$_check(n,e)&&(s.push(n),r.push(this._values[n]));0<s.length&&(this._column.$_autoFilterChecked(s,r,e),this.fireEvent(d7.LIST_CHECKED,s,r,e))}},checkValue:function(t,e){var i=this._valueScale?this.$_scale(t):t;if(this.$_checkValue(i,e))return this._column.$_autoFilterChecked(-1,t,e),this.fireEvent(d7.CHECKED,-1,t,e),i},checkValues:function(t,e){if(V1(t)){var i,n=[],s=this._valueScale?this.$_scaleValues(t,this._valueScale):t;for(i=s.length;i--;)this.$_checkValue(s[i],e)&&n.push(s[i]);if(0<n.length)return this._column.$_autoFilterChecked(null,n,e),this.fireEvent(d7.LIST_CHECKED,null,n,e),n}},checkAll:function(t){var e,i=this._values;if(t&&i){for(e=i.length;e--;)this._checks[i[e]]=!0;this._checkCount=i.length,this._column.$_autoFilterChecked(-1,d7.ALL,t),this.fireEvent(d7.ALL_CHECKED,!0)}else!t&&0<this._checkCount&&(this._checks={},this._checkCount=0,this._column.$_autoFilterChecked(-1,d7.ALL,t),this.fireEvent(d7.ALL_CHECKED,!1))},getValue:function(t){return this._values[t]},addValue:function(t){return this._values.push(t)},isChecked:function(t){return this._all||this._checks[t]},isCheckedAt:function(t){return this._all||this._checks[this._values[t]]},select:function(t){return!!this._all||(this._checkCount<=0?this._alone:((this._valueScale||this._obj)&&(t=d7[this._valueType](this._valueScale,t,this._column)),this._checks[t]))},assignSimple:function(t){"boolean"==typeof t&&this.setActive(t)},propertyChanged:function(){this._changed()},_changed:function(){this._column&&this._column.$_autoFilterChanged(this)},$_clear:function(){this._values=[],this._checks={},this._checkCount=0,this._remainder=0},$_scaleValues:function(t,e){var n,s=this._column,r=s.valueType(),o=r==a1.DATETIME,a=d7[r];if(prev=a(e,t[0],s),vals=[prev],cnt=t.length,i=1,!a0(prev))for(;i<cnt;)if(a0(n=a(e,t[i++],s))){vals.push(n),prev=n;break}for(;i<cnt;)n=a(e,t[i++],s),(o&&n.getTime()!=prev.getTime()||!o&&n!=prev)&&(vals.push(n),prev=n);return vals},$_scale:function(t){return(0,d7[this._column.valueType()])(this._valueScale,t,this._column)}},{NULL:{},ALL:{},text:function(t,e){if(e)return 0<t?e.substr(0,t):e.substr(t,-t)},number:function(t,e){return k97(e,t)},datetime:function(t,e){if(e instanceof Date)switch(e=new Date(e),t){case Z4.YEAR:e.setMonth(0);case Z4.MONTH:e.setDate(1);case Z4.DATE:e.setHours(0);case Z4.HOUR:e.setMinutes(0);case Z4.MINUTE:e.setSeconds(0);case Z4.SECOND:e.setMilliseconds(0);break;case Z4.WEEK:e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0),e.setDate(e.getDate()-e.getDay());break;case Z4.QUARTER:e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0),e.setDate(1),e.setMonth(3*Y1(e.getMonth()/3));break;case Z4.HALF:e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0),e.setDate(1),e.setMonth(6*Y1(e.getMonth()/6))}return e},boolean:function(t,e){return e},object:function(t,e,i){return i._keyFn?i._keyFn(i.$_field,e):i._keyPath?l0.extractJson(e,i._keyPath,!0):e},ALL_CHECKED:"onColumnAutoFilterAllChecked",LIST_CHECKED:"ononColumnAutoFilterListChecked",CHECKED:"ononColumnAutoFilterChecked"}),c37=I1("ColumnAutoFilterView",a2,{init:function(t){this._super(),this._container=t,this._dom=new w1(this._element=this.$_createElement()),this._filter=null,this._selIndex=-1,this._checkHandler=function(t){var e=t.target;this._filter.check(e.$_index,e.checked),this._eltAll.check.checked=this._filter.allChecked()}.bind(this),this._mouseoverHandler=function(t){var e=this._currDiv=t.currentTarget;e.style.background="rgba(0, 0, 0, 0.05)",e.style.textDecoration="underline"}.bind(this),this.mouseoutHandler=function(t){var e=this._currDiv=t.currentTarget;e.style.background=null,e.style.textDecoration="none"}.bind(this)},showAll:!0,displayCount:6,maxCount:100,setFilter:function(t){t!==this._filter&&(this._filter=t)},measure:function(t,e,i,n){var s=this._filter,r=(this._eltItems,{width:0,height:0});return this._hr.style.display=n?"":"none",s.loadItems(!0,t),this._findInput.size=Math.max(2,s.editSize()),this.$_buildItems(s),r.width=Math.max(e,200),r.height=Math.max(e,500),r},layout:function(t){},$_createElement:function(){var t=document.createElement("div"),e=this.$_createHr();return finder=this.$_createFinder(),items=this._eltItems=document.createElement("div"),t.appendChild(e),t.appendChild(finder),finder.style.marginBottom="4px",finder.style.width="100%",t.appendChild(items),items.style.overflow="auto",items.style.background="#fff",items.style.width="100%",items.style.border="1px solid #aaa",items.style.marginBottom="2px",t},$_createHr:function(){var t=this._hr=document.createElement("hr");return t.style.height="1px",t.style.border="0px",t.style.marginTop="1px",t.style.marginBottom="5px",t.style.color="#777",t.style.backgroundColor="#aaa",t},$_search:function(){var t,e,i,n=i0(this._findInput.value);n&&((i=this._selected)&&(i.childNodes[1].style.color="#222"),0<=(t=this._filter.search(n,this._selIndex+1,this._eltItems.childNodes))?(e=(i=this._selected=this._eltItems.childNodes[t+1]).childNodes[1],this._eltItems.scrollTop=i.offsetTop-this._eltItems.clientHeight,e.style.color="#e00"):this._selected=null,this._selIndex=t)},$_createFinder:function(){this._filter;var t=this._eltFinder=document.createElement("div"),e=this._findInput=document.createElement("input"),i=this._findButton=document.createElement("img");return t.style.textAlign="right",w1.setStyles(e,{marginRight:"4px",outline:"0px solid transparent",fontFamily:"Tahoma",fontSize:"10pt"},{type:"search",placeholder:"Search",size:18}),e.onkeydown=function(t){t.stopImmediatePropagation&&t.stopImmediatePropagation(),13==t.keyCode&&this.$_search()}.bind(this),t.appendChild(e),i.src=c37.$_BTNIMG,i.alt="Search",i.title="Search",i.style.verticalAlign="middle",i.style.marginBottom="2px",i.onclick=function(t){this.$_search()}.bind(this),t.appendChild(i),t},$_writer:function(t){var i,e,n=X1._default,s=t.valueType(),r=t.valueScale();return s==a1.DATETIME?(r&&(i=M7.Writers[r]),i||(e=t._column.styles().datetimeFormat(),i=e?new M7(e):M7.Default),function(t){if(!a0(t))return"";var e=i.getText(t);switch(r){case Z4.QUARTER:e+=" ("+n.quarters[Y1(t.getMonth()/3)]+")";break;case Z4.HALF:e+=" ("+n.halfs[5<t.getMonth()?1:0]+")"}return e}):s==a1.BOOLEAN&&(e=t._column.styles().booleanFormat())?(i=v3.getFormatter(e),function(t){return i.formatValue(t)}):void 0},$_toCase:function(t){var e=t.valueType()==a1.TEXT&&t.displayCase();return e==H8.UPPER?s9:e==H8.LOWER?A87:null},$_ellipsis:function(t){return t._showEllipsis&&0<t._valueScale&&t.valueType()==a1.TEXT?" ...":""},$_buildItems:function(e){var t,i,n,s,r=this.$_writer(e),o=this.$_toCase(e),a=this.$_ellipsis(e),h=this._eltItems;for(this._showAll&&((s=this._eltAll=this.$_buildItem(-1,"(Select All)",!1,"")).check.onclick=function(t){var e=!!t.target.checked;this._filter.checkAll(e),this.$_allChecked(e)}.bind(this),s.childNodes[1].style.color="#000",h.appendChild(s)),t=0;t<e.count();t++)i=e.getValue(t),n=e.isChecked(i),o&&(i=o(i)),s=this.$_buildItem(t,i,n,a,r),h.appendChild(s);return 0<e._remainder&&((s=this._eltMore=this.$_buildItem(-1,"(More...)",!1,"")).check.style.visibility="hidden",s.check.onclick=void 0,s.childNodes[1].onclick=function(t){this.$_buildMoreItems(e,h,s)}.bind(this),s.childNodes[1].style.color="#000",h.appendChild(s)),h},$_buildMoreItems:function(t,e,i){var n,s,r,o,a=this.$_writer(t),h=this.$_toCase(t),l=this.$_ellipsis(t),u=t._allValues,d=t.count(),c=Math.min(t.maxCount(),u.length-d);for(n=0;n<c;n++)s=u[n+d],r=t.isChecked(s),t.addValue(s),h&&(s=h(s)),o=this.$_buildItem(n+d,s,r,l,a),e.insertBefore(o,i);t.count()>=u.length&&e.removeChild(i)},$_buildItem:function(t,e,i,n,s){var r,o,a;return(r=document.createElement("div")).style.whiteSpace="nowrap",w1.disableSelection(r),r.onmouseover=this._mouseoverHandler,r.onmouseout=this.mouseoutHandler,(o=document.createElement("input")).id="$autoFilter_item_"+L9.$_checkId++,o.setAttribute("type","checkbox"),o.$_index=t,o.onclick=this._checkHandler,o.checked=i,r.check=o,r.appendChild(o),(a=document.createElement("label")).htmlFor=o.id,a.innerHTML=s?s(e):a0(e)?e+n:"",a.title=e,a.style.color="#222",r.appendChild(a),r},$_allChecked:function(i){var n=this._eltAll;w1.visitChildren(this._eltItems,function(t,e){e!==n&&(e.check.checked=i)})}},{$_BTNIMG:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAABTElEQVR42o2Rv0rDYBTF0wdw9QEU6eSgj5DQFpMWmn9QWihUQgLOztEurukThExFH6BuQuOa3UERF6FZ4qCg2DTWc0A/2mKlF+7w8d0f55x7JQlVrVa3VVX1dF2/a7fbeafT+TQM46ler1/IsrwrrdYPcILhZ9/3iyiKiuFwOBsMBjPP84pms3ldqVT2liBN01wCYRgWWZbNFztJktxxHIJX5XJ5S0C0RIVV4LfH4/EUVidHKAExAy2tg9itVuut0WicCoihmeE/qNvtfsDiuYC4pSAI1iqlaVrYtv2C7McC4lq5JYb+C+r3+7lpmg+KouwIiA9Ij1zXncVxPF1UIACVOdw84iz7S2vnHQBeoicI/YoM77SE4XsC6C/83dZqtUOMlwTIO3Ct3BIsn6F7dEEFAjgNwRuMHEibFBUIWJZVAI6lDatEBQJwMvoGdjwqony8pFcAAAAASUVORK5CYII="}),I5=I1("ToastOptions",null,{init:function(t){this._super(),this._styles={},t&&this.assign(t)},visible:!0,message:null,resourceId:null,styles:null,styleName:null,duration:0,setStyles:function(t){I4(t)?this._styles=R4(null,t):this._styles={}},getMessage:function(){return this._message||E2._default[this.resourceId()]},assign:function(t){S4(t)?(this._message=t,this._visible=!0):Q3(t)?this._visible=t:this._super(t)}}),a48=I1("ToastView",a2,{init:function(t){this._super(),this._container=t,this._span=null,this._element=this._createElement(),this._showing=!1,this._timer=void 0},minWidth:0,maxWidth:0,dropDownCount:8,show:function(t){this._showing=!0;try{this.$_show(t)}finally{this._showing=!1}},$_show:function(t){var e,i,n,s,r,o,a,h,l,u;if(this.$_stopTimer(),(e=t.getMessage())&&(i=this._element)){if(n=i.style,t.styleName()?i.className=t.styleName():(M77("rgba(0, 0, 55, 0.8)",n),n.borderRadius="7px",n.color="rgb(255, 255, 255)",n.border="1px solid rgb(200, 200, 200)",n.boxShadow="rgb(0, 0, 0, 0.8) 1px 2px 5px",n.fontSize="16pt",n.padding="8px 16px 8px 16px"),s=t.styles()){for(r in s)n[r]=s[r];s.hasOwnProperty("background")&&M77(s.background,n)}n.position="absolute",n.overflow="hidden",n.zIndex=3e3,o=this._container._container,this._span.innerHTML=e,o.appendChild(i),h=(a=i.getBoundingClientRect2()).width+10,l=a.height+10,(u=new g1).width=this._container.width(),u.height=this._container.height(),n.left=(u.width-h)/2+"px",n.top=3*(u.height-l)/8+"px",0<t.duration()&&this.$_startTimer(t.duration())}},hide:function(){var t;this.$_stopTimer(),(t=this._element)&&t.parentNode&&this._container._container.removeChild(t)},_createElement:function(){var t=u2.createElement("div");return t.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),this._disableSelection(t),this._span=u2.createElement("span"),t.appendChild(this._span),this._disableSelection(this._span),t},_disableSelection:function(t){void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}},$_startTimer:function(t){this.$_stopTimer(),this._timer=setTimeout(function(){this.hide()}.bind(this),t)},$_stopTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=void 0)}},{$_labelId:0}),q48=I1("ToastManager",null,{init:function(t){this._super(),this._container=t.container(),this._toast=null,this._active=!1},visible:function(){return this._active},show:function(t,e,i){!this._active||e?(this.close(),(t=t instanceof I5?t:t?new I5(t):null)&&t.visible()&&t.getMessage()?(this._toast||(this._toast=new a48(this._container)),this._toast.show(t),this._active=!0,i&&setTimeout(function(){try{i()}finally{this.close()}}.bind(this),0)):i&&i()):i&&i()},close:function(){return!!this._active&&(this._toast&&this._toast.hide(),!(this._active=!1))}}),K4=A2("ValidationLevel",{ERROR:"error",WARNING:"warning",INFO:"info",IGNORE:"ignore",$_levels:{error:1,warning:2,info:3,ignore:4},compare:function(t,e){return K4.$_levels[t]-K4.$_levels[e]}}),r3=A2("ValidationMode",{ALWAYS:"always",UPDATE:"update",INSERT:"insert"});n7.prototype=new q0,n7.prototype.constructor=n7,n7.prototype.toString=function(){return"Validation failed ["+s9(this.level)+"]: "+this.message};var v48=I1("EditValidation",null,{init:function(t){this._super(),this._name=t,this.validate=this.$_validateExpression},name:null,active:!0,mode:u1(r3,r3.ALWAYS),level:u1(K4,K4.ERROR),expression:null,callback:null,message:null,description:null,styles:{},setExpression:function(t){t!=this._expression&&(this._expression=t,this._exprNode=t?J4.Default.parse(t):null)},setCallback:function(t){t!==this._callback&&(this.validate="function"==typeof t?(this._callback=t,this.$_validateCallback):(this._callback=null,this.$_validateExpression))},setStyles:function(t){this._styles=t?R4(null,t):{}},$_validateCallback:function(t){!1===this._callback(t.scope())&&this.$_throwError()},$_validateExpression:function(t){this._exprNode&&!this._exprNode.evaluate(t)&&this.$_throwError()},$_throwError:function(){var t=this._message||this._description||this._name||this._expression;throw new n7(this._level,t,null,this._message)}}),O37=I1("EditValidationCollection",null,{init:function(){this._super(),this._items=[]},items:null,count:function(){return this._items.length},items_:function(){return this._items.slice()},setItems:function(t){this.assign(t)},getItem:function(t){return this._items[t]},clear:function(){this._items=[]},addAll:function(t){if(t&&0<t.length)for(var e=0,i=t.length;e<i;e++)this._items.push(t[e])},assign:function(t){if(t!==this&&(this.clear(),t)){V1(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var n=t[e];n&&(n=(new v48).assign(n),this._items.push(n))}}},validate:function(t,e,i,n){for(var s=0;s<this._items.length;s++){var r=this._items[s];if(r.active()&&(r.mode()==t||r.mode()==r3.ALWAYS))try{r.validate(e)}catch(t){if(!i||K4.compare(r.level(),n)<0)throw t instanceof n7?(t.level=r.level(),t):new n7(r.level(),t)}}}}),h3=I1("DataRowValidationRuntime",e4,{init:function(){this._super(),this._item=null,this._dataSet=null,this._fieldCount=null,this._scope=void 0},item:null,setItem:function(t){this._item=t,this._dataSet=this._item.dataSource(),this._fieldCount=this._dataSet?this._dataSet.fieldCount():0},scope:function(t){var e=this._scope;return e||(e={row:this._item,dataSet:this._dataSet}),e},isIdentifier:function(t){return t=t.toLowerCase(),h3.IDENTS.hasOwnProperty(t)?h3.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case h3.ID_ROW:return this._item.index();case h3.ID_DATA_ROW:return this._item.dataIndex();case h3.ID_CHECKED:return this._item.checked()}throw new o4("Invalid identifier key: "+t)},evaluateIndexerI:function(t,e){if(e<0||e>=this._fieldCount)throw new o4("Data field index out of bounds:"+e);switch(t){case h3.ID_VALUES:return this._item.getValue(e)}throw new o4("Invalid identifier indexer: "+t)},evaluateIndexerS:function(t,e){var i=this._dataSet.getFieldIndex(e);if(i<0||i>=this._fieldCount)throw new o4("Data field is not exists:"+e);switch(t){case h3.ID_VALUES:return this._item.getValue(i)}throw new o4("Invalid identifier indexer: "+t)}},{ID_ROW:0,ID_DATA_ROW:1,ID_CHECKED:2,ID_VALUES:3},function(t){t.IDENTS={row:t.ID_ROW,datarow:t.ID_DATA_ROW,checekd:t.ID_CHECKED,values:t.ID_VALUES}}),t6=I1("DataCellValidationRuntime",e4,{init:function(){this._super(),this._index=null,this._row=null,this._value=null,this._scope=void 0},setIndex:function(t){this._index=t,this._row=t.getRow(t.column.$_grid),this._value=this._row.getValue(this._index.column.dataIndex())},scope:function(){var t=this._scope;return t||(t={index:this._index,row:this._row,value:this._value}),t},isIdentifier:function(t){return t=t.toLowerCase(),t6.IDENTS.hasOwnProperty(t)?t6.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case t6.ID_VALUE:return this._value;case t6.ID_ROW:return this._row.index();case t6.ID_DATA_ROW:return this._row.dataIndex();case t6.ID_CHECKED:return this._index.column.$_grid.isChecked(this._row)}throw new o4("Invalid identifier key: "+t)},evaluateIndexerI:function(t,e){throw new o4("Invalid identifier indexer: "+t)},evaluateIndexerS:function(t,e,i){throw new o4("Invalid identifier indexer: "+t)}},{ID_VALUE:0,ID_ROW:1,ID_DATA_ROW:2,ID_CHECKED:3,ID_TAG:4},function(t){t.IDENTS={value:t.ID_VALUE,row:t.ID_ROW,datarow:t.ID_DATA_ROW,checked:t.ID_CHECKED,tag:t.ID_TAG}}),B48=I1("ValidationManager",null,{init:function(t){this._super(),this._userValidations=!1,this._grid=t},owner:function(){return this._grid},hasRowValidation:function(){var t=this._grid.editOptions().validations();return t&&0<t.count()},validateCell:function(t,e){this.$_validateCell(t,e,!1)},validateRow:function(t,e,i){var n=this._grid.editOptions().commitLevel();if(!i)for(var s=this._grid.getDataColumns(),r=0,o=s.length;r<o;r++){var a=s[r],h=P1.temp(t.index(),a);this.$_validateCell(h,e,!0,n)}var l=this._grid.editOptions().validations();if(l&&0<l.count()){var u=this._grid.rowValidationRuntime();u.setItem(t),l.validate(e?r3.INSERT:r3.UPDATE,u,!0,n)}},$_validateCell:function(t,e,i,n){var s,r,o,a,h,l,u=Q2(t.dataColumn(),L2);if(u){if(s=t.getRow(this._grid).getValue(u.dataIndex()),u.required()&&((o=(r=u.grid())&&r.dataSource()&&r.dataSource().getField(u.dataIndex()))&&o.isEmpty(s)))throw n=u.requiredLevel()||K4.ERROR,a=u.requiredMessage()||X1._default.valueIsRequired+": "+u.fieldName(),new n7(n,a,u,u.requiredMessage());if((h=u.validations())&&0<h.count()){(l=this._grid.columnValidationRuntime()).setIndex(t);try{h.validate(e?r3.INSERT:r3.UPDATE,l,i,n),this.$_clearInvalidateCell(t)}catch(t){throw t instanceof n7&&(t.column=u),t}}}},$_addInvalidateCell:function(t,e){var i,n=t.getDataId(),s=t.dataColumn();if(i=s&&null!=s.dataIndex()?s.dataIndex():-1,-1<n&&-1<i){var r=this._validateCellList;(r[n]?r[n]:r[n]={})[i]={dataRow:t.getDataIndex(),message:e.message,level:e.level,column:t.column.name()}}},$_clearInvalidateCell:function(t){var e=t.getDataId();-1<e&&(columnIndex=t.dataColumn().dataIndex(),cellInfo=this._validateCellList[e],cellInfo&&cellInfo[columnIndex]&&delete cellInfo[columnIndex])},$_clearInvalidateList:function(){this._validateCellList={},this._userValidations=!1,this._grid.refreshView()},addInvalidateCell:function(t,e){this.$_addInvalidateCell(t,e)},getInvalidCellList:function(){var t=[],e=this._validateCellList;for(var i in e){var n=e[i];for(var s in n){var r=n[s];t.push({column:r.column,dataRow:r.dataRow,message:r.message,level:r.level})}}return 0<t.length?t:null},checkValidateCells:function(){for(var t=this._grid,e=t.getDataColumns(),i=[],n=0,s=t.dataRowCount();n<s;n++)i.push(n);this._validateCellList={};for(var r=0,o=i.length;r<o;r++){var a=t._items.getItem(i[r]);if(null!=(a?a.dataId():null)){var h=0;for(s=e.length;h<s;h++){var l={};try{var u=e[h];u.dataIndex(),l=t.getCellIndex(i[r],u),this.$_validateCell(l,!1,!1,"ignore"),t._fireValidateCell(l,!1,l.getRow().getRowObject())}catch(t){u.setError(t.message),u.setErrorLevel(DataLudi.ValidationLevel.ERROR),this.$_addInvalidateCell(l,t),this._userValidations=!0}}}}return t.refreshView(),this.getInvalidCellList()}}),H9=I1("LookupSource",a2,{init:function(t){this._super(),this._id=t},id:function(){return this._id},clear:function(){},load:function(t){},exists:function(){return!1},fill:function(t,e){},fillRows:function(t){},add:function(t,e){},addRow:function(t){},lookup:function(){return c2},getDomain:function(){return null},getTextDomain:function(){return null},_changed:function(){this.fireEvent(H9.CHANGED)}});H9.CHANGED="onLookupSourceChanged";var a8=I1("LookupSourceProvider",a2,{init:function(){this._super()},getSource:function(t){return null},_changed:function(){this.fireEvent(a8.CHANGED)}});a8.CHANGED="onLookupSourceProviderChanged";var j37=I1("LocalLookupSourceProvider",a8,{init:function(t){this._super(),this._sources={},t&&this.load(t)},load:function(t){if(t!==this){if(this._sources={},V1(t))for(var e=0,i=t.length;e<i;e++)this.$_add(t[e]);else t&&this.$_add(t);this._changed()}},add:function(t){var e=this.$_add(t);return e&&this._changed(),e},remove:function(t){return!!this.$_remove(t)&&(this._changed(),!0)},getSource:function(t){return this._sources[t]},$_createSource:function(t){var e=null;if(t){var i=t.type;i=i?i.toLowerCase():null;var n=new T48(t.id,t.levels,t.ordered);n.fill(t.keys,t.values),e=n}return e},$_add:function(t){var e=null;return t instanceof H9?t.id()&&this._sources[t.id()]!==t&&(e=t):t&&t.id&&this._sources[t.id]!==t&&(e=this.$_createSource(t)),e?(this.$_remove(e.id()),(this._sources[e.id()]=e).addListener(this),e):null},$_remove:function(t){if(t){var e=this._sources[t];if(e)return e.removeListener(this),delete this._sources[t],!0}return!1},onLookupSourceChanged:function(t){this._changed()}}),T48=I1("LookupTree",H9,{init:function(t,e,i){if(t=0<arguments.length?t:null,e=1<arguments.length?e:-1,i=2<arguments.length&&i,this._super(t),e<1)throw"LookupTable levels must be equals or greater than 1";this._levels=e,this._tree={},this._listMap=i?{}:null},levels:function(){return this._levels},clear:function(){this._tree={},this._changed()},load:function(t){},exists:function(t){var e,i,n;if(!(1<this._levels))return this._tree.hasOwnProperty(V1(t)?t[0]:t);if(t&&0<(e=t.length)&&e<=this._levels){if(0<(e=Math.min(e,this._levels)-1)){for(i=this._tree,n=0;n<e&&(i=i[t[n]]);n++);return i&&i.hasOwnProperty(t[e])}return this._tree.hasOwnProperty(t[0])}return!1},fill:function(t,e){if(t&&0<t.length&&e&&0<e.length){var i,n,s=Math.min(t.length,e.length);for(i=0;i<s;i++)n=t[i],V1(n)||(n=[n]),this.$_add(n,e[i]);this._changed()}return this},fillRows:function(t){var e;if(t&&0<(e=t.length)){for(var i=0;i<e;i++)this.$_addRow(t[i]);this._changed()}return this},add:function(t,e){return t&&(this.$_add(t,e),this._changed()),this},addRow:function(t){return t&&(this.$_addRow(t),this._changed()),this},lookup:function(t){if(1<this._levels){var e,i=this._tree,n=this._levels-1;for(e=0;e<n&&(i=i[t[e]]);e++);return i?i[t[n]]:void 0}return this._tree[t]},getDomain:function(t){if(!t||t.length!=this._levels-1)throw"Keys length must be "+(this._levels-1);var e,i,n,s,r=[],o=[],a=this._tree;if(1<this._levels)for(i=t.length,e=0;e<i;e++)if(!(a=a[t[e]]))return{keys:r,values:o};if(this._listMap)for(i=(s=this._listMap[a]).length,e=0;e<i;e++)r.push(s[e]),o.push(a[s[e]]);else for(n in a)r.push(n),o.push(a[n]);return{keys:r,values:o}},getTextDomain:function(t){var e,i,n=this.getDomain(t),s=(t=n.keys,n.values);for(e=0,i=t.length;e<i;e++)t[e]=E7(t[e]),s[e]=E7(s[e]);return n},$_add:function(t,e){if(t){var i,n,s,r,o,a,h=this._levels,l=V1(t)?t.length:1;if(l<h)throw Error("Keys length must be equals or greater than "+h);if(1<h){for(o=this._tree,n=0,l=h-1;n<l;n++)(r=o[s=t[n]])||(r={},o[s]=r),o=r;o[i=t[l]]=e}else this._tree[i=t]=e;this._listMap&&(a=this._listMap[o],V1(a)||(a=[],this._listMap[o]=a),a.push(i))}},$_addRow:function(t){if(t){var e;if(t.length-1<this._levels)throw Error("Keys length must be equals or greater than "+this._levels);e=t[this._levels],t=t.slice(0,this._levels),this.$_add(t,e)}}}),C5=I1("GridObject",a2,{init:function(t){this._super(),this._grid=t,this._dirty=!1},owner:function(){return this._grid},dirty:function(){return this._dirty},clean:function(){this._dirty&&(this._dirty=!1)},invalidate:function(){this._grid&&this._grid.invalidate()},refreshOwner:function(){this._grid&&this._grid.refreshView()},propertyChanged:function(t,e){this._changed()},_changed:function(){this._dirty||(this._dirty=!0,this._doChanged(),this.refreshOwner())},_doChanged:function(){}}),r7=I1("VisualObject",C5,{init:function(t,e){this._super(t),this._styles=new o1(this,e)},stylesChanged:function(){this._changed()},getPaletteScope:function(){},visible:!0,styles:null,setStyles:function(t){return t!==this._styles&&this._styles.extend(t),this},clearStyles:function(t){this._styles.clearValues(),t&&this._doClearStyles(),this.stylesChanged()},assignSimple:function(t){"boolean"==typeof t&&this.setVisible(t)},_doChanged:function(){this._grid&&this._grid._visualObjectChanged(this)},_doPrepareUpdate:function(){},$_prepareUpdate:function(){this._doPrepareUpdate()},_doClearStyles:function(){}}),k37=I1("GridPanel",r7,{init:function(t){this._super(t,"panelStyles"),this.setVisible(!1)},minHeight:20,height:0}),s48=I1("RowGroupPanelHead",r7,{init:function(t){this._super(t.owner(),"groupPanelHead"),this._innerStyles=new o1(this,"groupPanelHeadInner"),this._panel=t,this.setVisible(!0)},innerStyles:null,showMenu:!0,setInnerStyles:function(t){return t!==this._innerStyles&&this._innerStyles.extend(t),this},setShowMenu:function(t){return t!=this._showMenu&&(this._showMenu=t,this._panel._changed()),this},_doClearStyles:function(){this._innerStyles.clearValues()}}),a27=I1("RowGroupPanel",r7,{init:function(t){this._super(t,"groupPanel"),this._head=new s48(this),this._itemStyles=new o1(this,"groupPanelItem"),this._itemInnerStyles=new o1(this,"groupPanelItemInner"),this.setVisible(!1)},head:null,itemStyles:null,itemInnerStyles:null,minHeight:U4(20),height:U4(0),prompt:"Group by",setHead:function(t){t!==this._head&&this._head.assign(t)},setItemStyles:function(t){return t!==this._itemStyles&&this._itemStyles.extend(t),this},setItemInnerStyles:function(t){return t!==this._itemInnerStyles&&this._itemInnerStyles.extend(t),this},_doClearStyles:function(){this._itemStyles.clearValues(),this._head.clearStyles(!0)}}),q8=I1("MenuVisualObject",r7,{init:function(t,e){q8.Base.init.call(this,t,e),this._popupMenuName=null},popupMenu:null,menuVisible:!0,setPopupMenu:function(t){t!=this._popupMenu&&(this._popupMenu=t,V1(t)||I4(t)?(this._popupMenuName="$$_"+this.className()+"_menu",this.owner().registerPopupMenu(this._popupMenuName,V1(t)?t:[t])):this._popupMenuName=t?String(t):null)},popupMenuName:function(){return this._popupMenuName}}),f48=I1("HeaderSummaryHead",q8,{init:function(t){this._super(t.owner(),"headerSummaryHead"),this._summary=t},text:null,summary:function(){return this._summary},assignSimple:function(t){this.setText(t)}}),u48=I1("HeaderSummary",r7,{init:function(t){this._super(t._grid,"headerSummary"),this._header=t,this._head=new f48(this),this._groupStyles=new o1(this),this._cell=new z78(this._grid),this._headCell=new n78(this._grid,this._head),this._runtime=new Y3,this._runStyles=new o1(this,"runFooter",null,!1),this.setVisible(!1)},head:null,groupStyles:null,minHeight:U4(19),height:L3,autoResize:!1,resizable:!1,tooltipCallback:null,setHead:function(t){return t!==this._head&&this._head.assign(t),this},setGroupStyles:function(t){return t!==this._groupStyles&&this._groupStyles.extend(t),this},header:function(){return this._header},getCell:function(t){var e,i,n,s=this._cell,r=t.column;return s.setIndex(t),s.calculate(),r instanceof O1?s.setStyles(this._groupStyles):(i=(e=r.header().summary()).dynamicStyles())&&0<i.count()?((n=this._runStyles).clearValues(),n.setParent(e.styles()),this._runtime.setCell(s),i.applyInternal(this._runtime,n),s.setStyles(n)):s.setStyles(e.styles()),s},getHeadCell:function(){var t=this._head,e=this._headCell;return e.setMenuVisible(t.menuVisible()&&t.popupMenu()),e.setStyles(t.styles()),e.setText(t.text()),e},clean:function(){this._super(),this._head.clean()},_doClearStyles:function(){this._groupStyles.clearValues(),this._runStyles.clearValues(),this._head.clearStyles(!0)}}),U37=I1("GridHeaderHead",q8,{init:function(t){U37.Base.init.call(this,t.owner(),"headerHead"),this._header=t},header:function(){return this._header}}),q27=I1("GridHeader",r7,{init:function(t){this._super(t,"gridHeader"),this._head=new U37(this),this._summary=new u48(this),this._groupStyles=new o1(this,"headerGroup"),this._subStyles=new o1(this,"headerSub"),this._menuHandleStyles=new o1(this,"menuHandle"),this._filterHandleStyles=new o1(this,"filterHandle"),this._sortHandleStyles=new o1(this,"sortHandle"),this._sortOrderStyles=new o1(this,"sortOrder"),this._cell=new F78(t),this._headCell=new p78(t,this._head),this._images=null,this.setVisible(!0)},head:null,summary:null,groupStyles:null,subStyles:null,menuHandleStyles:null,filterHandleStyles:null,sortHandleStyles:null,sortOrderStyles:null,minHeight:U4(23),height:L3,sortOrderVisible:!0,autoResize:!1,resizable:!1,selectable:!0,checkLocation:u1(e2,e2.NONE),imageLocation:u1(e2,e2.NONE),subTextLocation:u1(s4,s4.BOTTOM),subTextGap:1,itemOffset:2,itemGap:2,imageList:null,imageOffset:0,handleOffset:2,handleGap:1,menuHandleWidth:7,tooltipCallback:null,setHead:function(t){t!==this._head&&this._head.assign(t)},setSummary:function(t){return t!==this._summary&&this._summary.assign(t),this},setGroupStyles:function(t){return t!==this._groupStyles&&this._groupStyles.extend(t),this},setSubStyles:function(t){return t!==this._subStyles&&this._subStyles.extend(t),this},setMenuHandleStyles:function(t){return t!==this._menuHandleStyles&&this._menuHandleStyles.extend(t),this},setFilterHandleStyles:function(t){return t!==this._filterHandleStyles&&this._filterHandleStyles.extend(t),this},setSortHandleStyles:function(t){return t!==this._sortHandleStyles&&this._sortHandleStyles.extend(t),this},setSortOrderStyles:function(t){return t!==this._sortOrderStyles&&this._sortOrderStyles.extend(t),this},setCheckLocation:function(t){return t&&t!=e2.DEFAULT||(t=e2.NONE),t!==this._checkLocation&&(this._checkLocation=t,this._changed()),this},setImageLocation:function(t){return t&&t!=e2.DEFAULT||(t=e2.NONE),t!==this._imageLocation&&(this._imageLocation=t,this._changed()),this},setSubTextLocation:function(t){return t||(t=s4.BOTTOM),t!=this._subTextLocation&&(this._subTextLocation=t,this._changed()),this},getCell:function(t){var e,i=this._cell,n=t.column,s=n.header();switch(i.setIndex(t),i._styles=s.styles(),i._subStyles=s.subStyles(),s.sortOrderVisibility()){case b9.VISIBLE:e=!0;break;case b9.HIDDEN:e=!1;break;default:e=this._sortOrderVisible}return i._sortOrderVisible=e,i._text=s.displayText(),i._subText=s.subText(),i._subTextLocation=(e=s.subTextLocation())&&e!=s4.DEFAULT?e:this._subTextLocation,i._subTextGap=void 0===(e=s.subTextGap())?this._subTextGap:e,i._itemOffset=void 0===(e=s.itemOffset())?this._itemOffset:e,i._itemGap=void 0===(e=s.itemGap())?this._itemGap:e,i._imageList=this._imageList,i._imageIndex=s.imageIndex(),i._imageUrl=s.imageUrl(),i._imageOffset=void 0===(e=s.imageOffset())?this._imageOffset:e,i._checkLocation=(e=s.checkLocation())==e2.DEFAULT?this._checkLocation:e,i._imageLocation=(e=s.imageLocation())==e2.DEFAULT?this._imageLocation:e,i._checked=n.checked(),i._handleOffset=void 0===(e=s.handleOffset())?this._handleOffset:e,i._handleGap=void 0===(e=s.handleGap())?this._handleGap:e,i._menuWidth=void 0===(e=s.menuHandleWidth())?this._menuHandleWidth:e,i},getHeadCell:function(){var t=this._headCell;return t.setMenuVisible(this._head.menuVisible()&&this._head.popupMenu()),t.setStyles(this._head.styles()),t},getGroupingCell:function(t){var e,i=this._cell,n=t.header();return i.setIndex(new P1(-1,t)),i._styles=this._grid.rowGroup().panelStyles(),i._subStyles=n.subStyles(),i._text=n.displayText(),i._subText=n.subText(),i._subLocation=(e=n.subTextLocation())?e:this._subTextLocation,i._subTextGap=void 0===(e=n.subTextGap())?this._subTextGap:e,i._itemOffset=void 0===(e=n.itemOffset())?this._itemOffset:e,i._itemGap=void 0===(e=n.itemGap())?this._itemGap:e,i._imageList=this._imageList,i._imageIndex=n.imageIndex(),i._imageUrl=n.imageUrl(),i._checkLocation=n.checkLocation(),i._imageLocation=n.imageLocation(),i._checked=t.checked(),i},getImage:function(t){return this._images&&this._images.getImage(t)},clean:function(){this._super(),this._head.clean(),this._summary.clean()},_doPrepareUpdate:function(){this._images=this._imageList?this._grid.getImageList(this._imageList):null},_doClearStyles:function(){this._groupStyles.clearValues(),this._subStyles.clearValues(),this._filterHandleStyles.clearValues(),this._sortHandleStyles.clearValues(),this._sortOrderStyles.clearValues(),this._head.clearStyles(!0),this._summary.clearStyles(!0)}}),d37=I1("EditBar",r7,{init:function(t){this._super(t,"editBarStyles"),this._cell=new C78(t),this.setVisible(!1)},minHeight:23,height:0,getCell:function(t){var e=this._cell;return e.setStyles(this._styles),e}}),g48=I1("GridFooterHead",q8,{init:function(t){this._super(t.owner(),"footerHeadStyles"),this._footer=t},text:null,iconUrl:null,footer:function(){return this._footer},assignSimple:function(t){this.setText(t)}}),v27=I1("GridFooter",r7,{init:function(t){this._super(t,"footerStyles"),this._groupStyles=new o1(this),this._head=new g48(this),this._cell=new l78(t),this._headCell=new I78(t,this._head),this._runtime=new Y3,this._runStyles=new o1(this,"runFooterStyles",null,!1),this.setVisible(!0)},groupStyles:null,head:null,minHeight:U4(23),height:L3,autoResize:!1,resizable:!1,tooltipCallback:null,setGroupStyles:function(t){return t!==this._groupStyles&&this._groupStyles.extend(t),this},setHead:function(t){return t!==this._head&&this._head.assign(t),this},getCell:function(t){var e,i,n=this._cell,s=t.column,r=s.footer();return n.setIndex(t),n.calculate(),s instanceof O1?n.setStyles(r.styles()):(e=r.dynamicStyles())&&0<e.count()?((i=this._runStyles).clearValues(),i.setParent(r.styles()),this._runtime.setCell(n),e.applyInternal(this._runtime,i),n.setStyles(i)):n.setStyles(r.styles()),n},getHeadCell:function(){var t=this._headCell;return t.setMenuVisible(this._head.menuVisible()&&this._head.popupMenu()),t.setStyles(this._head.styles()),t},clean:function(){this._super(),this._head.clean()},_doClearStyles:function(){this._groupStyles.clearValues(),this._runStyles.clearValues(),this._head.clearStyles(!0)}}),r48=I1("CustomGridItem",null,{init:function(t,e){this._super(),this._owner=t,this._styles=new o1(this,"customGridItem",null,!1),e&&this.assign(e)},visible:!0,height:100,minHeight:NaN,maxHeight:NaN,fillHeight:0,styles:null,setStyles:function(t){t!=this._styles&&(this._styles.extend(t),this._changed())},itemType:function(){return this._owner._itemType},displayText:function(){return this.className()},isHeader:function(){return this._owner._itemType==m9.HEADER},createItemView:function(){return null},refresh:function(){this._changed()},proxy:function(){var t=this._super();return t.type=this.$_type(),t},propertyChanged:function(){this._changed()},_changed:function(){this._owner&&this._owner._itemChanged(this)}}),Y37=I1("CustomGridItemCollection",null,{init:function(t,e){this._super(),this._grid=t,this._itemType=e||R8.FOOTER,this._items=[],this._itemTypes={}},count:function(){return this._items.length},visible:function(){return 0<this._items.length},registerType:function(t,e){return t&&b4(e)?this._itemTypes[t]=e:null},getItem:function(t){return this._items[t]},assign:function(t){var e,i,n;if(t!==this&&(this._items=[],this._itemMap={},V1(t)))for(e=this._itemType==R8.FOOTER?this._grid.footerItemStyles():this._grid.headerItemStyles(),i=0;i<t.length;i++)(n=this._createItem(t[i]))&&(n.styles().setParent(e,!1),this._items.push(n))},proxy:function(){return $$_getProxy(this._items)},_createItem:function(t){var e=this._itemTypes[t.type];return e?new e(this,t):null},_itemChanged:function(t){this._grid.$_customGridItemChanged(t)},_changed:function(){this._grid&&this._grid.invalidate()}}),B27=I1("RowIndicator",r7,{init:function(t){this._super(t,"rowIndicatorStyles"),this._stateStyles=new o1(this),this._createdStyles=new o1(this),this._createdStyles.setParent(this._stateStyles,!1),this._updatedStyles=new o1(this),this._updatedStyles.setParent(this._stateStyles,!1),this._deletedStyles=new o1(this),this._deletedStyles.setParent(this._stateStyles,!1),this._cell=new o78(t,this),this._stateCell=new e78(t,this),this.setVisible(!0)},displayValue:u1(z5,z5.ROW_INDEX),shapeVisible:!0,rowIndexBase:U4(1),dataIndexBase:U4(1),minWidth:U4(24),maxWidth:L3,width:L3,selectable:!0,indicatorVisible:!0,stateWidth:U4(7),stateVisible:!1,stateStyles:null,createdStyles:null,updatedStyles:null,deletedStyles:null,createdLabel:null,updatedLabel:null,deletedLabel:null,stateImageList:null,setStateStyles:function(t){return t!==this._stateStyles&&this._stateStyles.extend(t),this},setCreatedStyles:function(t){return t!==this._createdStyles&&this._createdStyles.extend(t),this},setUpdatedStyles:function(t){return t!==this._updatedStyles&&this._updatedStyles.extend(t),this},setDeletedStyles:function(t){return t!==this._updatedStyles&&this._deletedStyles.extend(t),this},stateImages:function(){return this._stateImages},getCell:function(t){var e,i,n=this._cell;return n.setIndex(t),n.setStyles(this.styles()),n.setShapeVisible(this._shapeVisible),(e=t.getRow(this._grid))&&((i=e.rowState())==T1.NORMAL&&this._grid.$_focusedIndex().rowIndex===t.rowIndex&&(i=T1.FOCUSED),n.setRowState(i)),n},getStateCell:function(t){var e=this._stateCell;switch(e.setIndex(t),t.getRow(this._grid).dataState()){case j1.CREATED:e.setStyles(this._createdStyles),e.setLabel(this._createdLabel);break;case j1.UPDATED:e.setStyles(this._updatedStyles),e.setLabel(this._updatedLabel);break;case j1.DELETED:case j1.CREATED_AND_DELETED:e.setStyles(this._deletedStyles),e.setLabel(this._deletedLabel);break;default:e.setStyles(this._stateStyles),e.setLabel(null)}return e},$_indicatorVisible:function(){return this._visible&&(this._indicatorVisible||!this._stateVisible)},$_stateVisible:function(){return this._visible&&this._stateVisible},_doClearStyles:function(){this._stateStyles.clearValues(),this._createdStyles.clearValues(),this._updatedStyles.clearValues(),this._deletedStyles.clearValues()},_doPrepareUpdate:function(){this._stateImages=this._stateImageList?this._grid.getImageList(this._stateImageList):null}}),v8=I1("CheckBar",r7,{init:function(t){v8.Base.init.call(this,t,"checkBarStyles"),this._headStyles=new o1(this),this._cell=new x78(t),this._headCell=new Q78(t,this),this._checkableRuntime=new b38,this.setVisible(!0)},width:U4(21),headVisible:!0,exclusive:!1,exclusiveDisplay:!0,checkAllExpression:null,checkAllCallback:null,showAll:!0,showGroup:!0,groupCheck:!1,headStyles:null,visibleOnly:!1,checkableOnly:!0,checkableExpression:null,checkableCallback:null,draggable:!1,hideUncheckable:!1,setHeadStyles:function(t){return t!==this._headStyles&&this._headStyles.extend(t),this},setCheckAllExpression:function(t){return(t="string"==typeof t?t.trim():null)!=this._checkAllExpression&&(this._checkAllExpression=t,this._checkAllNode=t?J4.Default.parse(t):null,this._changed()),this},setCheckAllCallback:function(t){return(t=b4(t)?t:null)!=this._checkAllCallback&&(this._checkAllCallback=t,this._changed()),this},setCheckableExpression:function(t){return(t="string"==typeof t?t.trim():null)!=this._checkableExpression&&(this._checkableExpression=t,this._checkableNode=t?J4.Default.parse(t):null,this._changed()),this},setCheckableCallback:function(t){return(t=b4(t)?t:null)!=this._checkableCallback&&(this._checkableCallback=t,this._changed()),this},getCell:function(t){var e=this._cell;return e.setIndex(t),e.setStyles(this.styles()),e},getHeadCell:function(){return this._headCell.setStyles(this._headStyles),this._headCell},$_getCheckAllCallback:function(){return function(t){var e=this._checkAllCallback;return e?e(t):!this._checkAllNode||(this._checkableRuntime.setItem(t),this._checkAllNode.evaluate(this._checkableRuntime))}.bind(this)},$_isCheckable:function(t){return!this._checkableOnly||(this._checkableCallback?this._checkableCallback(this._grid,t):this._checkableNode?(this._checkableRuntime.setItem(t),this._checkableNode.evaluate(this._checkableRuntime)):t.$_isCheckable(this._grid))},_doClearStyles:function(){this._headStyles.clearValues()},_doPrepareUpdate:function(){(this._checkableNode||this._checkAllNode)&&this._checkableRuntime.setDataSource(this._grid.dataSource())}}),B8=I1("GridBody",r7,{init:function(t){B8.Base.init.call(this,t,"bodyStyles"),this._emptyStyles=new o1(this,"empty",null,!0),this._emptyDataStyles=new o1(this,"emptyData",null,!0),this._rowRangeStyles=new P48(this),this._rowStyles=new o1(this._rowRangeStyles,"row"),this._fixedRowStyles=new o1(this._rowRangeStyles,"fixedRow"),this._rowRangeStyles.setDefaultStyles(this._rowStyles,this._fixedRowStyles),this._cellStyles=new o1(this,"cell"),this._fixedCellStyles=new o1(this,"fixedCell",{color:"#000",borderRight:"#999",borderBottom:"#999"}),this._mergedStyles=new o1(this,"merged",{background:"#fff"}),this._fixedMergedStyles=new o1(this,"fixedMerged",{background:"#fff0f0f0"}),this._createdStyles=new o1(this,"created"),this._updatedStyles=new o1(this,"updated"),this._deletedStyles=new o1(this,"deleted",{fontItalic:!0,color:"#ffa0a0a0",background:"#fff8f8f8"}),this._checkedStyles=new o1(this,"checked"),this._fixedRowBarStyles=new o1(this,"fixedRowBar"),this._fixedColumnBarStyles=new o1(this,"fixedColumnBar"),this._selectionStyles=new o1(this,"selection"),this._mobileSelectionStyles=new o1(this,"mobileSelection",{background:new U1(268435456),border:new Z1(4281545523,2)}),this._rowDynamicStyles=new g0(this),this._cellDynamicStyles=new g0(this),this._groupCell=new L78(t),this._dataCell=new t37(t),this._labelCell=new R37(t),this._seriesCell=new R6(t),this._calcedCell=new H78(t),this._mergedCell=new Z78(t),this._mergedSeriesCell=new h37(t),this._chartCell=new w37(t),this._mergedChartCell=new z47(t),this._rowRuntime=new u4(t),this._cellRuntime=new F7(t),this._mergeValueRuntime=new X0(t),this._runCellStyles=new o1(this,null,null,!1),this._runDynStyles=new o1(this,null,null,!1),this._runBodyStyles=new o1(this,null,null,!1),this._dataSource=null,this._fixedColIgnore=!1,this._fixedDynIgnore=!1,this._items=null,this._styleManager=null,this._hasCellStyles=!1,this._styleTargets={body:!0,fixed:!1},this._runCheckedStyles=null,this._runStateStyles={},this._rowDynMap={},this._palettes=null},getPaletteScope:function(){return this},getPalette:function(t){return this._palettes[t]},getPaletteIndex:function(t){return t},onRowStylesChanged:function(t){this._grid&&this._grid.refreshView()},emptyStyles:null,emptyDataStyles:null,rowStyles:null,fixedRowStyles:null,rowRangeStyles:null,cellStyles:null,fixedCellStyles:null,mergedStyles:null,fixedMergedStyles:null,createdStyles:null,updatedStyles:null,deletedStyles:null,checkedStyles:null,fixedRowBarStyles:null,fixedColumnBarStyles:null,rowDynamicStyles:null,cellDynamicStyles:null,ignoreRowStylesOnFixed:!0,ignoreColumnStylesOnFixed:!1,ignoreDynamicStylesOnFixed:!1,fixedColumnBarWidth:0,fixedRowBarHeight:0,selectionStyles:null,mobileSelectionStyles:null,styleCallback:null,tooltipCallback:null,setEmptyStyles:function(t){return t!==this._emptyStyles&&(this._emptyStyles.extend(t),this._grid&&this._grid.refreshView()),this},setEmptyDataStyles:function(t){return t!==this._emptyDataStyles&&(this._emptyDataStyles.extend(t),this._grid&&this._grid.refreshView()),this},setRowStyles:function(t){return t!==this._rowStyles&&(this._rowStyles.extend(t),this._grid&&this._grid.refreshView()),this},setFixedRowStyles:function(t){return t!==this._fixedRowStyles&&(this._fixedRowStyles.extend(t),this._grid&&this._grid.refreshView()),this},setRowRangeStyles:function(t){return t!==this._rowRangeStyles&&(this._rowRangeStyles.assign(t),this._grid&&this._grid.refreshView()),this},setCellStyles:function(t){return t!==this._cellStyles&&(this._cellStyles.extend(t),this._grid&&this._grid.refreshView()),this},setFixedCellStyles:function(t){return t!==this._fixedCellStyles&&(this._fixedCellStyles.extend(t),this._grid&&this._grid.refreshView()),this},setMergedStyles:function(t){return t!==this._mergedStyles&&(this._mergedStyles.extend(t),this._grid&&this._grid.refreshView()),this},setFixedMergedStyles:function(t){return t!==this._fixedMergedStyles&&(this._fixedMergedStyles.extend(t),this._grid&&this._grid.refreshView()),this},setCreatedStyles:function(t){return t!==this._createdStyles&&(this._createdStyles.extend(t),this._grid&&this._grid.refreshView()),this},setUpdatedStyles:function(t){return t!==this._updatedStyles&&(this._updatedStyles.extend(t),this._grid&&this._grid.refreshView()),this},setDeletedStyles:function(t){return t!==this._deletedStyles&&(this._deletedStyles.extend(t),this._grid&&this._grid.refreshView()),this},setCheckedStyles:function(t){return t!==this._checkedStyles&&(this._checkedStyles.assign(t),this._grid&&this._grid.refreshView()),this},setFixedRowBarStyles:function(t){return t!==this._fixedRowBarStyles&&(this._fixedRowBarStyles.extend(t),this._grid&&this._grid.refreshView()),this},setFixedColumnBarStyles:function(t){return t!==this._fixedColumnBarStyles&&(this._fixedColumnBarStyles.extend(t),this._grid&&this._grid.refreshView()),this},setSelectionStyles:function(t){return t!==this._selectionStyles&&(this._selectionStyles.extend(t),this._grid&&this._grid.refreshView()),this},setMobileSelectionStyles:function(t){return t!==this._mobileSelectionStyles&&(this._mobileSelectionStyles.extend(t),this._grid&&this._grid.refreshView()),this},setRowDynamicStyles:function(t){return t!==this._rowDynamicStyles&&(this._rowDynamicStyles.setItems(t),this._grid&&this._grid.refreshView()),this},setCellDynamicStyles:function(t){return t!==this._cellDynamicStyles&&(this._cellDynamicStyles.setItems(t),this._grid&&this._grid.refreshView()),this},setIgnoreRowStylesOnFixed:function(t){return t!=this._ignoreRowStylesOnFixed&&(this._ignoreRowStylesOnFixed=t,this._grid&&this._grid.refreshView()),this},setIgnoreColumnStylesOnFixed:function(t){return t!=this._ignoreColumnStylesOnFixed&&(this._ignoreColumnStylesOnFixed=t,this._grid&&this._grid.refreshView()),this},setIgnoreDynamicStylesOnFixed:function(t){return t!=this._ignoreDynamicStylesOnFixed&&(this._ignoreDynamicStylesOnFixed=t,this._grid&&this._grid.refreshView()),this},setFixedColumnBarWidth:function(t){return(t=Math.max(0,t))!=this._fixedColumnBarWidth&&(this._fixedColumnBarWidth=t,this._grid&&this._grid.refreshView()),this},setFixedRowBarHeight:function(t){return(t=Math.max(0,t))!=this._fixedRowBarHeight&&(this._fixedRowBarHeight=t,this._grid&&this._grid.refreshView()),this},setStyleCallback:function(t){(t=p4(t))!==this._styleCallback&&(this._styleCallback=t,this._grid&&this._grid.refreshView())},rowRuntime:function(){return this._rowRuntime},cellRunTime:function(){return this._cellRuntime},getCell:function(t,e){var i,n,s,r,o,a,h,l,u=this._grid,d=t.getRow(u),c=t.column,_=c instanceof L2?c:null,f=t.isFixed(u),g=u._validationManager;if((i=e?this.$_getMergedCell(e,c,f):this.$_getCell(c,f)).setIndex(t),(n=this._runCellStyles).clearValues(),f&&this._fixedColIgnore?(n.setParent(e?this._fixedMergedStyles:this._fixedCellStyles,!1),n._sysDefault=void 0):(e?c._styles.setParent(f?this._fixedMergedStyles:this._mergedStyles,!1):c._styles.setParent(f?this._fixedCellStyles:this._cellStyles,!1),n.setParent(c._styles,!1),n._sysDefault=c._runStyles),this._dataSource&&i!==this._groupCell){if(this._styleTargets.body=!f,this._styleTargets.fixed=f,0<c.$_dynRowCount)for(a in(s=this._runBodyStyles).clearValues(),s.setParent(n,!1),this._rowRuntime.setItem(d),(o=this._rowDynMap[d.dataIndex()])||(this._rowDynMap[d.dataIndex()]=o=this._rowDynamicStyles.getAppliables(this._rowRuntime,{})),o)o[a].setter.call(s,o[a].value);else s=n;0<c.$_dynCellCount||0<c.$_dynColCount?((r=this._runDynStyles).clearValues(),r.setParent(s,!1),0<c.$_dynCellCount&&(this._cellRuntime.setCell(i),this._cellDynamicStyles.applyInternal(this._cellRuntime,r,this._styleTargets)),0<c.$_dynColCount&&(this._cellRuntime.setCell(i),c._dynamicStyles.applyInternal(this._cellRuntime,r,this._styleTargets)),i._styles=r):i._styles=s,_&&this._hasCellStyles?(h=this._styleManager.getStyleAt(d.dataIndex(),_._dataIndex),i.setCellStyles(h)):i.setCellStyles(null)}else i.setStyles(n);if((l=c.$_styleCallback)&&l(t,i._styles,i.merged()),_)if(u.isRowEditing(d)&&!g._userValidations)i.setError(_.error()),i.setErrorLevel(_.errorLevel());else if(g._userValidations){var m=g._validateCellList;if(null!=m&&0<Object.keys(m).length){var p=m[t.getDataId()]&&m[t.getDataId()][c.dataIndex()];p&&p.message&&p.level?(i.setError(p.message),i.setErrorLevel(p.level)):i.setError(null)}}else i.setError(null);return(r=this._runStateStyles[d.$_state])&&(r._parent=i._styles,i._styles=r),d.$_checked&&this._runCheckedStyles&&(this._runCheckedStyles._parent=i._styles,i._styles=this._runCheckedStyles),i},getCellSimple:function(t,e){var i=t._column,n=e?this._mergedCell:i instanceof Q7?this._seriesCell:i instanceof R37?this._labelCell:i instanceof O1?this._groupCell:this._dataCell;return n.setIndex(t),n},addDynamicStyle:function(t,e){},_doPrepareUpdate:function(){var t,e=this._grid=this.owner(),i=e._palettes._palettes;this._items=e.itemSource(),this._fixedColIgnore=this._ignoreColumnStylesOnFixed,this._fixedDynIgnore=this._ignoreDynamicStylesOnFixed,this._rowRangeStyles.$_prepareRender(i,this._ignoreRowStylesOnFixed),this._runStateStyles={},this._createdStyles.isEmpty()||(this._runStateStyles[j1.CREATED]=this._createdStyles),this._updatedStyles.isEmpty()||(this._runStateStyles[j1.UPDATED]=this._updatedStyles),this._deletedStyles.isEmpty()||(this._runStateStyles[j1.CREATE_AND_DELETED]=this._runStateStyles[j1.DELETED]=this._deletedStyles),this._runCheckedStyles=this._checkedStyles.isEmpty()?null:this._checkedStyles,this._styleManager=e.styleManager(),this._hasCellStyles=!this._styleManager.isEmpty(),this._dataSource=e.dataSource(),this._rowRuntime.setDataSource(this._dataSource),this._cellRuntime.setDataSource(this._dataSource),this._mergeValueRuntime.setDataSource(this._dataSource),this._rowDynMap={},this._palettes=i,e.cellRendererRuntime().setDataSource(this._dataSource),(t=g0.prototype).applyInternal=this._grid._userMode?t.applyInternalUserMode:t.applyInternalNormal},_doClearStyles:function(){this._emptyStyles.clearValues(),this._emptyDataStyles.clearValues(),this._rowStyles.clearValues(),this._fixedRowStyles.clearValues(),this._cellStyles.clearValues(),this._fixedCellStyles.clearValues(),this._mergedStyles.clearValues(),this._fixedMergedStyles.clearValues(),this._createdStyles.clearValues(),this._updatedStyles.clearValues(),this._deletedStyles.clearValues(),this._checkedStyles.clearValues(),this._fixedRowBarStyles.clearValues(),this._fixedColumnBarStyles.clearValues(),this._selectionStyles.clearValues(),this._mobileSelectionStyles.clearValues(),this._runCellStyles.clearValues(),this._runDynStyles.clearValues(),this._runBodyStyles.clearValues(),this._rowDynamicStyles.clear(),this._cellDynamicStyles.clear()},$_getCell:function(t,e){var i,n=t.$_cell;return n||(i=!1,n=t instanceof Q7?t instanceof G5?this._chartCell:this._seriesCell:t instanceof D6?this._labelCell:t instanceof h7?(i=!0,this._calcedCell):t instanceof O1?this._groupCell:(i=!0,this._dataCell),(t.$_cell=n)!==this._groupCell&&(e&&this._fixedDynIgnore||(t.$_dynRowCount=i&&t._ignoreRowDynamicStyles?0:this._rowDynamicStyles.count(),t.$_dynCellCount=t._ignoreDefaultDynamicStyles?0:this._cellDynamicStyles.count(),t.$_dynColCount=i?t._dynamicStyles.count():0))),n},$_getMergedCell:function(t,e,i){return cell=e instanceof Q7?e instanceof G5?this._mergedChartCell:this._mergedSeriesCell:this._mergedCell.$_setMergeValue(e._mergeValueNode,this._mergeValueRuntime),cell._room=t,i&&this._fixedDynIgnore||(e.$_dynCellCount=e._ignoreDefaultDynamicStyles?0:this._cellDynamicStyles.count(),e.$_dynColCount=e._dynamicStyles?e._dynamicStyles.count():0),cell},$_hasDynamicStyles:function(t,e){return!!(this._hasCellStyles&&e instanceof L2&&this._styleManager.getStyleAt(t.dataIndex(),e._dataIndex))||this._runStateStyles[t.$_state]||t.$_checked&&this._runCheckedStyles}}),h48=I1("RowHoverMask",r7,{init:function(t){this._super(t,"rowHoverMask"),this._visible=!1},extent:u1(T0,T0.DATA)}),$_SBAR_MIN_WIDTH=8,T27=I1("ScrollBar",r7,{init:function(t,e){this._super(t,"scrollBar"),this._buttonStyles=new o1(this,"scrollButton"),this._thumbStyles=new o1(this,"scrollThumb"),this._indentStyles=new o1(this,"scrollIndent"),e&&this.assign(e)},buttonStyles:null,thumbStyles:null,indentStyles:null,barWidth:16,barIndent:u1(c6,c6.NONE),buttonLocation:u1(p0,p0.NORMAL),lineScrollSize:U4(1),pageScrollSize:U4(1),minThumbSize:U4(20),setButtonStyles:function(t){return t!==this._buttonStyles&&this._buttonStyles.extend(t),this},setThumbStyles:function(t){return t!==this._thumbStyles&&this._thumbStyles.extend(t),this},setIndentStyles:function(t){return t!==this._indentStyles&&this._indentStyles.extend(t),this},setBarWidth:function(t){t=parseInt(t),isNaN(t)||(t=Math.max($_SBAR_MIN_WIDTH,t))!=this._barWidth&&(this._barWidth=t,this._changed())},displayWidth:function(){return this._visible?this._barWidth:0}}),s27=I1("ColumnSummary",C5,{init:function(t){this._super(),this._column=t,this._styles=new o1(this,"columnSummary"),this._dynamicStyles=new g0(this),this._exprNode=void 0,this._dirty=!1},stylesChanged:function(t){this._changed()},styles:null,text:null,expression:null,callback:null,summaryCallback:null,dynamicStyles:null,spanPrev:0,spanNext:0,setStyles:function(t){return t!==this._styles&&this._styles.extend(t),this},setText:function(t){return t!=this._text&&(this._text=t,this._changed()),this},$_clearSummary:function(){var t=this._column.grid();t&&t.clearRowSummary(),this._changed()},setExpression:function(t){return(t=I27(t))!=this._expression&&(this._expression=t,this._exprNode=t?J4.Default.parse(t):void 0,this.$_clearSummary()),this},setCallback:function(t){return(t=p4(t))!==this._callback&&(this._callback=t,this.$_clearSummary()),this},setSummaryCallback:function(t){return(t=p4(t))!==this._summaryCallback&&(this._summaryCallback=t,this.$_clearSummary()),this},setDynamicStyles:function(t){return this._dynamicStyles.setItems(t),this._changed(),this},setSpanPrev:function(t){return t=Math.max(0,parseInt(t)),isNaN(t)||t===this._spanPrev||(this._spanPrev=t,this._column.$_summarySpanChanged(this),this._changed()),this},setSpanNext:function(t){return t=Math.max(0,parseInt(t)),isNaN(t)||t===this._spanNext||(this._spanNext=t,this._column.$_summarySpanChanged(this),this._changed()),this},column:function(){return this._column},isDirty:function(){return this._dirty},canSummary:function(){return this._callback||this._exprNode},clean:function(){this._dirty=!1},evaluate:function(t){return this._callback?this._callback(t.scope()):this._exprNode?this._exprNode.evaluate(t):void 0},assign:function(t){"string"==typeof t?this.setText(t):this._super(t)},_changed:function(){this._dirty||(this.dirty=!0,this._column instanceof t2&&this._column._footerChanged())}}),A78=I1("ColumnHeaderSummary",s27,{init:function(t){this._super(t._column)}}),o5=I1("ColumnHeader",C5,{init:function(t){o5.Base.init.call(this),this._column=t,this._summary=new A78(this),this._styles=new o1(this,"columnHeaderStyles"),this._subStyles=new o1(this,"columnHeaderSubStyles"),this._popupMenuName=null,this._dirty=!1},stylesChanged:function(){this._changed()},popupMenu:null,sortHandleVisibility:void 0,filterHandleVisibility:void 0,sortOrderVisibility:u1(b9,b9.INHERIT),summary:null,styles:null,subStyles:null,text:null,subText:null,subTextGap:void 0,itemOffset:void 0,itemGap:void 0,subTextLocation:u1(s4,s4.DEFAULT),imageIndex:-1,imageUrl:null,imageOffset:void 0,checkLocation:u1(e2,e2.DEFAULT),imageLocation:u1(e2,e2.DEFAULT),handleOffset:void 0,handleGap:void 0,menuHandleWidth:void 0,setPopupMenu:function(t){return t!=this._popupMenu&&(V1(t)||I4(t)?(this._popupMenu=t,this._popupMenuName=null):this._popupMenuName=t?(this._popupMenu=null,String(t)):this._popupMenu=null,this._changed(),this._popupMenuChanged=!0),this},$_checkPopupMenu:function(t){var e;(e=this._popupMenu)&&!this._popupMenuName&&(this._popupMenuName="$$_column_"+ ++$_autoinc+"_menu",t.registerPopupMenu(this._popupMenuName,V1(e)?e:[e]))},popupMenuName:function(){return this._popupMenuName},column:{get:function(){return this._column},set:null},setSummary:function(t){return t!=this._summary&&(this._summary.assign(t),this._changed()),this},setStyles:function(t){return t!==this._styles&&(this._styles.extend(t),this._changed()),this},setSubStyles:function(t){return t!==this._subStyles&&(this._subStyles.extend(t),this._changed()),this},displayText:function(){var t,e=this._text;return null!=e||(!e&&this._column instanceof L2&&(e=(t=this._column.getDataField())?t.header()||t.fieldName():this._column.fieldName()),e||(e=this._column.name()),!e&&this._column instanceof D6&&(e=this._column.text())),e},clean:function(){this._dirty=!1},hasMenu:function(){return this._popupMenuName},assign:function(t){"string"==typeof t?this.setText(t):this._super(t)},_changed:function(){this._dirty||(this.dirty=!0,this._column&&this._column._headerChanged())}}),f27=I1("ColumnFooter",s27,{init:function(t){this._super(t)}}),b78=I1("ColumnGroupSummary",s27,{init:function(t){this._super(t)}}),k4=I1("GridColumn",null,{init:function(t){this._super(),this._initColumn(),t&&this.assign(t)},_initColumn:function(){this._header=this._createHeader(),this._footer=this._createFooter(),this._groupFooter=this._createGroupFooter(),this._groupSummary=this._createGroupSummary(),this._styles=new o1(this,"columnStyles"),this._index=-1,this._layoutRect=new g1,this._orgWidth=NaN,this._groupWidth=NaN,this._displayOffset=NaN,this._displayWidth=NaN,this._fitOffset=NaN,this._fitWidth=NaN,this._measuredHeight=-1,this._dataRoot=null,this._distance=0,this._value=c2,this._states={},this._parent=null,this.$_grid=null,this.$_fixed=!1,this._palettes=null,this._dirty=!1},stylesChanged:function(t,e){this._changed()},getPaletteScope:function(){return this},getPalette:function(t){return this._palettes[t]},getPaletteIndex:function(t){return t},header:null,footer:null,groupFooter:null,groupSummary:null,styles:null,name:null,tag:null,visible:!0,width:100,height:0,saveWidth:NaN,fillWidth:0,fillHeight:0,resizable:!0,movable:!0,styleName:null,displayIndex:-1,checked:!1,userData:null,grid:function(){return this._parent?this._parent.grid():null},parent:function(){return this._parent},setParent:function(t){var e=this.grid(),i=this._parent;t!=i&&(i&&i._removeInternal(this),t instanceof O1?t.$_addInternal(this):this._parent=null,e&&(e._columnsReset(),e._columnParentChanged(this,i,t)))},group:function(){return this._parent instanceof G47?null:this._parent},root:function(){var t=this.group();return t?t.root():this},isRoot:function(){return this===this.root()},dataRoot:function(){return this._dataRoot},isDataRoot:function(){return this._dataRoot===this},isDirty:function(){return this._dirty||this._header._isDirty},setHeader:function(t){return t!==this._header&&("string"==typeof t?t={text:t}:"boolean"==typeof t&&(t={visible:t}),this._header.assign(t)),this},setFooter:function(t){return t!==this._footer&&this._footer.assign(t),this},setGroupFooter:function(t){return t!==this._groupFooter&&this._groupFooter.assign(t),this},setVisible:function(t){if(t!=this._visible){this._visible=t,this._invalidateSize(),this._invalidateVisible();var e=this.grid();e&&e._columnVisibleChanged(this)}return this},setWidth:function(t){if((t=Math.max(0,t))!=this._width){var e=this._width;this._width=t,(!this.group()||isNaN(this._groupWidth)||isNaN(this._displayWidth))&&(this._displayWidth=this._groupWidth=t),this._widthChanged(e,t),this._invalidateSize()}else(!this.group()||isNaN(this._groupWidth)||isNaN(this._displayWidth))&&(this._displayWidth=this._groupWidth=t);return this},setHeight:function(t){return(t=Y1(Math.max(0,t)))!=this._height&&(this._height=t,this._changed()),this},setFillWidth:function(t){return(t=Y1(Math.max(0,t)))!=this._fillWidth&&(this._fillWidth=t,this._changed()),this},setFillHeight:function(t){return(t=Y1(Math.max(0,t)))!=this._fillHeight&&(this._fillHeight=t,this._changed()),this},groupWidth:function(){return this._groupWidth},displayOffset:function(){return isNaN(this._fitOffset)?this._displayOffset:this._fitOffset},displayWidth:{get:function(){return isNaN(this._fitWidth)?this._displayWidth:Y1(this._fitWidth)},set:function(t){t=Math.max(0,t);var e=this.displayWidth();isNaN(e)&&(e=0),isNaN(t)||t==e||O1.changeWidth(this,t-e)}},saveWidth_:function(){return isNaN(this._fitWidth)?this._groupWidth:this._fitWidth},setSaveWidth:function(t){this._saveWidth=t},measuredHeight:function(){return this._measuredHeight},index:function(){return this._index},displayIndex_:function(){return this._visible&&this._parent?this._displayIndex:-1},setDisplayIndex:function(t){return this._parent&&(t<0?this.setVisible(!1):(t=Math.min(t,this._parent.visibleCount()-1),this.setVisible(!0),this._parent.setChildDisplayIndex(this,t))),this},setStyleName:function(t){if(t!=this._styleName){this._styleName,this._styleName=t;var e=this.grid();e&&e.$_columnStyleNameChanged(this)}return this},setStyles:function(t){return t!==this._styles&&(this._styles.extend(t),this._changed()),this},setChecked:function(t){if(t!=this._checked){this._checked=t,this._changed();var e=this.grid();e&&e._columnChecked(this,t)}return this},distance:function(){return this._distance},displayText:function(){return this._name?this._name:this.header()?this.header().text():"col:"+this._index},isFixed:function(){return this.$_fixed},fixed:function(){return this.$_fixed},delegateOwner:function(){var t=this.$_delegateOwner;return t?t.delegateOwner()||t:null},canEditable:function(){return!1},canEdit:function(){return!1},canMerge:function(){return!1},prepareLayout:function(t,e,i){this.$_grid=t,this.$_fixed=e,this.$_cell=void 0,this.$_dynRowCount=this.$_dynCellCount=this.$_dynColCount=0,this._palettes=t._palettes._palettes,this._header._popupMenuChanged&&(this._header.$_checkPopupMenu(t),this._header._popupMenuChanged=!1)},clean:function(){this._dirty=!1,this._header.clean()},$_getOffset:function(){for(var t=0,e=this,i=e.group();i;)t+=e._displayOffset,i=(e=i).group();return t},stateFor:function(t){return this._states[t]},setState:function(t,e){this._states[t]=e},proxy:function(){var t=this._super();return t.type=this.constructor.$_columnType,t},propertyChanged:function(){this._changed()},_setParent:function(t,e){if(t!=this._parent){var i=t;t&&t._columnRemoved(this),(this._parent=t)&&t._columnAdded(this),this._parentChanged(),e&&e._columnParentChanged(this,i,t)}},_parentChanged:function(){},_createHeader:function(){return new o5(this)},_createFooter:function(){return new f27(this)},_createGroupFooter:function(){return new f27(this)},_createGroupSummary:function(){return new b78(this)},_headerChanged:function(){this._changed()},_widthChanged:function(t,e){var i=this.grid();i&&(this._dirty=!0,i.$_columnWidthChanged(this,t,e))},_invalidateSize:function(){var t=this.grid();t&&(this._dirty=!0,t.invalidateColumnWidths())},_invalidateVisible:function(){var t=this.grid();t&&t._columnDisplayIndexChanged()},_changed:function(){if(!this._dirty){this._dirty=!0;var t=this.grid();t&&t.invalidateColumns()}},_canSplit:function(){return!0},$_summarySpanChanged:function(t){this._parent&&(t===this._footer?this._parent.$_childFooterSpanChanged(this):t===this._groupFooter?this._parent.$_childGroupFooterSpanChanged(this):t===this._header._summary&&this._parent.$_childSummarySpanChanged(this))},$_hasDynamicStyles:function(){return 0<this.$_dynCellCount||0<this.$_dynColCount||0<this.$_dynRowCount||b4(this._styleCallback)}},{compareLoc:function(t,e){if(null==t||null==e)return 0;if(null==t)return-1;if(null==e)return 1;var i=t.root().displayIndex(),n=e.root().displayIndex();return i==n&&(n=t.group()==e.group()?(i=t.displayIndex(),e.displayIndex()):(i=t.dataRoot().displayIndex(),e.dataRoot().displayIndex())),i-n},$_ALL:{}}),I0=k4.compareLoc,u27=I1("ColumnGroupHeader",o5,{init:function(t){u27.Base.init.call(this,t)},visible:!0,group:function(){return this._column}}),O1=I1("ColumnGroup",k4,{init:function(t){this._super(t),this._headerLevel=this._dataLevel=this._footerLevel=this._headerSummaryLevel=this._groupHeaderLevel=this._groupFooterLevel=0},_initColumn:function(){this._super(),this._columns=new m78(this),this._sum=c2,this._childFooterSpansDirty=!0,this._childGroupFooterSpansDirty=!0,this._childSummarySpansDirty=!0},layout:u1(d0,d0.HORIZONTAL),columns:null,headerDelegate:null,footerDelegate:null,groupFooterDelegate:null,summaryDelegate:null,childHeadersVisible:!0,childFootersVisible:!0,childGroupFootersVisible:!0,childSummariesVisible:!0,setLayout:function(t){n3(d0,t)!=this._layout&&(this._layout=t,this.resetGroupWidths(),this._changed())},columns_:function(){return this._columns.items()},setColumns:function(t,e){var i,n,s,r,o=this.grid(),a=this._columns;if(a.clear(),t&&0<(n=t.length)){for(i=0;i<n;i++)(s=t[i])instanceof k4?a.indexOf(s)<0&&this._columns.add(s):(r=q1.createColumn(s,e),this._columns.add(r));this.$_attachChildren(o)}o&&o._columnsReset(this)},setHeaderDelegate:function(t){t!=this._headerDelegate&&(this._headerDelegate=t,this._changed())},setFooterDelegate:function(t){t!=this._footerDelegate&&(this._footerDelegate=t,this._changed())},setGroupFooterDelegate:function(t){t!=this._groupFooterDelegate&&(this._groupFooterDelegate=t,this._changed())},setSummaryDelegate:function(t){t!=this._summaryDelegate&&(this._summaryDelegate=t,this._changed())},setChildHeadersVisible:function(t){t!=this._childHeadersVisible&&(this._childHeadersVisible=t,this._changed())},hiddenChildHeaders:function(t){return!this.childHeadersVisible(!t)},setHiddenChildHeaders:function(t){this.setChildHeadersVisible(!t)},setChildSummariesVisible:function(t){t!=this._childSummariesVisible&&(this._childSummariesVisible=t,this._changed())},hiddenChildHeaderSummaries:function(t){return!this.childSummariesVisible(!t)},setHiddenChildHeaderSummaries:function(t){this.setChildSummariesVisible(!t)},setChildFootersVisible:function(t){t!=this._childFootersVisible&&(this._childFootersVisible=t,this._changed())},setChildGroupFootersVisible:function(t){t!=this._childGroupFootersVisible&&(this._childGroupFootersVisible=t,this._changed())},hiddenChildFooters:function(t){return!this.childFootersVisible(!t)},setHiddenChildFooters:function(t){this.setChildFootersVisible(!t)},visibleItems:function(){return this._columns.visibleItems()},hiddenItems:function(){return this._columns.hiddenItems()},headerLevel:function(){return this._headerLevel},dataLevel:function(){return this._dataLevel},footerLevel:function(){return this._footerLevel},headerSummaryLevel:function(){return this._headerSummaryLevel},groupHeaderLevel:function(){return this._groupHeaderLevel},groupFooterLevel:function(){return this._groupFooterLevel},count:function(){return this._columns.count()},visibleCount:function(){return this._columns.visibleCount()},isVertical:function(){return this._layout==d0.VERTICAL},isHorizontal:function(){return this._layout!=d0.VERTICAL},vertical:function(){return this._layout==d0.VERTICAL},horizontal:function(){return this._layout!=d0.VERTICAL},$_isVeritcalGrouped:function(){var t,e,i=this._layout==d0.VERTICAL&&1<(t=this._columns.visibleCount());if(!i)for(;e<t;e++)if(this._columns.getVisibleItem(e)instanceof O1&&column.$_verticalGrouped())return!0;return i},first:function(){return $_getFirstColumn(this)||this},last:function(){return $_getLastColumn(this)||this},getVisibleColumns:function(){return this._columns.visibleItems()},getHiddenColumns:function(){return this._columns.hiddenItems()},visitAllChildren:function(t){if(t){for(var e=0,i=this._columns.count();e<i;e++){var n=this._columns.getItem(e);if(!1===t(n))return!1;if(n instanceof O1&&!1===n.visitAllChildren(t))return!1}return!0}return!1},visitChildren:function(t){if(t){for(var e=0,i=this._columns.visibleCount();e<i;e++){var n=this._columns.getVisibleItem(e);if(!1===t(n))return!1;if(n instanceof O1&&!1===n.visitChildren(t))return!1}return!0}return!1},getItem:function(t){return this._columns.getItem(t)},getVisibleItem:function(t){if(t<0||t>=this._columns.visibleCount())throw"Invalid visible index: "+t;return this._columns.getVisibleItem(t)},isAncestorOf:function(t){if(t&&t!==this)for(var e=t._parent;e;){if(e===this)return!0;e=e._parent}return!1},setChildrenProperty:function(t,e,i,n){this._columns.setChildrenProperty(t,e,i,n)},calcHeaderLevels:function(){var t=this.header().visible()?1:0;if(this.$_headerColumn instanceof O1)t+=this.$_headerColumn.calcHeaderLevels();else if(this.$_headerColumn)t++;else if(this._childHeadersVisible){var e,i,n=this.visibleCount(),s=0;if(0<n)if(this.horizontal())for(s=1,e=0;e<n;e++)(i=this.getVisibleItem(e))instanceof O1&&(s=Math.max(s,i.calcHeaderLevels()));else for(e=0;e<n;e++)(i=this.getVisibleItem(e))instanceof O1?s+=i.calcHeaderLevels():s++;t+=s}return this._headerLevel=Math.max(1,t)},calcDataLevels:function(t){var e,i,n=this._columns,s=this.visibleCount(),r=0;if(0<s)if(this.horizontal())for(r=1,e=0;e<s;e++)(i=n.getVisibleItem(e))instanceof O1&&(r=Math.max(r,i.calcDataLevels(t)));else for(e=0;e<s;e++)(i=n.getVisibleItem(e))instanceof O1?r+=i.calcDataLevels(t):r++;return this._dataLevel=0+r},calcFooterLevels:function(t){if(this.$_footerColumn instanceof O1)return this.$_footerColumn.calcFooterLevels(t);if(this.$_footerColumn)return 1;if(!this._childFootersVisible)return 0;var e=0,i=this.visibleCount();if(0<i){var n,s,r=this._columns;if(this.horizontal())for(e=1,n=0;n<i;n++)(s=r.getVisibleItem(n))instanceof O1&&(e=Math.max(e,s.calcFooterLevels(t)));else{var o,a=!t&&this.$_footerSpanned?this.$_footerSpans:null;if(a)for(o=a[0],n=e=1;n<a.length;n++)(s=a[n])!==o&&(s instanceof O1?e+=s.calcFooterLevels(t):e++,o=s);else for(n=0;n<i;n++)(s=r.getVisibleItem(n))instanceof O1?e+=s.calcFooterLevels(t):e++}}return this._footerLevel=0+e},calcHeaderSummaryLevels:function(t){if(this.$_summaryColumn instanceof O1)return this.$_summaryColumn.calcHeaderSummaryLevels(t);if(this.$_summaryColumn)return 1;if(!this._childSummariesVisible)return 0;var e=0,i=this.visibleCount();if(0<i){var n,s,r=this._columns;if(this.horizontal())for(e=1,n=0;n<i;n++)(s=r.getVisibleItem(n))instanceof O1&&(e=Math.max(e,s.calcHeaderSummaryLevels(t)));else{var o,a=!t&&this.$_summarySpanned?this.$_summarySpans:null;if(a)for(o=a[0],n=e=1;n<a.length;n++)(s=a[n])!==o&&(s instanceof O1?e+=s.calcHeaderSummaryLevels(t):e++,o=s);else for(n=0;n<i;n++)(s=r.getVisibleItem(n))instanceof O1?e+=s.calcHeaderSummaryLevels(t):e++}}return this._headerSummaryLevel=0+e},calcGroupHeaderLevels:function(t){return this._groupHeaderLevel=1},calcGroupFooterLevels:function(t){if(this.$_groupFooterColumn instanceof O1)return this.$_groupFooterColumn.calcGroupFooterLevels(t);if(this.$_groupFooterColumn)return 1;if(!this._childGroupFootersVisible)return 0;var e=this.visibleCount(),i=0;if(0<e){var n,s,r=this._columns;if(this.horizontal())for(i=1,n=0;n<e;n++)(s=r.getVisibleItem(n))instanceof O1&&(i=Math.max(i,s.calcGroupFooterLevels(t)));else{var o,a=!t&&this.$_groupFooterSpanned?this.$_groupFooterSpans:null;if(a)for(o=a[0],n=i=1;n<a.length;n++)(s=a[n])!==o&&(s instanceof O1?i+=s.calcGroupFooterLevels(t):i++,o=s);else for(n=0;n<e;n++)(s=r.getVisibleItem(n))instanceof O1?i+=s.calcGroupFooterLevels(t):i++}}return this._groupFooterLevel=0+i},calcHorz:function(){var t,e,i=this.visibleCount(),n=1;if(1<=i)if(this.vertical())for(n=1,e=0;e<i;e++)(t=this.getVisibleItem(e))instanceof O1&&(n=Math.max(n,t.calcHorz()));else for(e=n=0;e<i;e++)(t=this.getVisibleItem(e))instanceof O1?n+=Math.max(1,t.calcHorz()):n++;return n},right:function(t){if(this.horizontal())try{var e=this._checkVisible(t);if(e<this.visibleCount()-1)return $_getRightColumn(this,e+1)}catch(t){}return null},left:function(t){if(this.horizontal())try{var e=this._checkVisible(t);if(0<e)return $_getLeftColumn(this,e-1)}catch(t){}return null},next:function(t){try{var e=this._checkVisible(t);if(e<this.visibleCount()-1)return $_getNextColumn(this,e+1)}catch(t){}return null},prev:function(t){try{var e=this._checkVisible(t);if(0<e)return $_getPrevColumn(this,e-1)}catch(t){}return null},lower:function(t){if(this.vertical())try{var e=this._checkVisible(t);if(e<this.count()-1)return $_getLowerColumn(this,e+1)}catch(t){}return null},upper:function(t){if(this.vertical())try{var e=this._checkVisible(t);if(0<e)return $_getUpperColumn(this,e-1)}catch(t){}return null},columnAtPoint:function(t,e){var i,n,s,r=this.visibleCount();if(this.vertical()){for(i=0;i<r;i++)if(e<(n=this.getVisibleItem(i))._layoutRect.bottom())return(s=Q2(n,O1))?(e-=n._layoutRect.y,s.columnAtPoint(t,e)):n}else for(i=0;i<r;i++)if(t<(n=this.getVisibleItem(i))._layoutRect.right())return(s=Q2(n,O1))?(t-=n._layoutRect.x,s.columnAtPoint(t,e)):n;return this},$_addInternal:function(t,e){return!t||t instanceof k4||(t=q1.createColumn(t)),!t||t instanceof O1&&t.isAncestorOf(this)||this._columns.contains(t)?null:(this._columns.add(t,e),t)},add:function(t,e){var i;return t?((t=this.$_addInternal(t,e))&&(i=this.grid())&&(i._columnsReset(this,t),i._columnParentChanged(t,null,this)),t):null},addAll:function(t){var e,i,n,s,r=[];if(V1(t)){for(e=0,i=t.length;e<i;e++)(n=this.$_addInternal(t[e]))&&r.push(n);if(0<r.length&&(s=this.grid()))for(s._columnsReset(this),e=0,i=r.length;e<i;e++)s._columnParentChanged(r[e],null,this)}return r.length},_removeInternal:function(t){var e=this._columns.indexOf(t);return 0<=e&&(this._columns.removeAt(e),!0)},remove:function(t){if(this._removeInternal(t)){var e=this.grid();return e&&(e._columnsReset(this),e._columnParentChanged(t,this,null)),!0}return!1},removeAt:function(t){if(0<=t&&t<this.count()){this._columns.removeAt(t);var e=this.grid();return e&&(e._columnsReset(this),e._columnParentChanged(column,this,null)),!0}return!1},clear:function(){if(0<this.count()){var t,e,i=this.grid(),n=this._columns.items();if(this._columns.clear(),i)for(i._columnsReset(this),t=0,e=n.length;t<e;t++)i._columnParentChanged(n[t],this,null)}},setChildIndex:function(t,e){var i=this.grid();return!!(i&&t&&t.parent()===this&&t.index()!=e&&(old=t.displayIndex(),this._columns.move(t,e)))&&(i._columnIndexChanged(t,old),!0)},setChildDisplayIndex:function(t,e){var i,n=this.grid();return n&&n._displayOptions._singleColumnIndices?this.setChildIndex(t,e):!!(n&&t&&t.parent()===this&&(i=t.displayIndex(),this._columns.moveVisible(t,e)))&&(n._columnDisplayIndexChanged(t,i,e),!0)},initGroupWidths:function(){var t,e,i=this._columns.count();if(!(i<1))for(t=0;t<i;t++)(e=this._columns.getItem(t))._displayWidth=e._groupWidth=NaN,e instanceof O1&&e.initGroupWidths()},restoreGroupWidths:function(){var t,e,i,n,s,r,o=this._columns.count();if(!(o<1)){if(t=this._groupWidth,this.vertical())for(n=0;n<o;n++)(e=this._columns.getItem(n))._displayWidth=e._groupWidth=t,e._displayOffset=0;else{for(n=i=0;n<o;n++)i+=(e=this._columns.getItem(n))._displayWidth=isNaN(e._saveWidth)?e.saveWidth():e._saveWidth;for(n=r=0;n<o-1;n++)s=(e=this._columns.getItem(n))._displayWidth*t/i,e._groupWidth=s,e._displayOffset=Y1(r),r+=s,e._displayWidth=Y1(r)-e._displayOffset;s=t-r,(e=this._columns.getItem(o-1))._groupWidth=s,e._displayOffset=Y1(r),e._displayWidth=Y1(r+s)-e._displayOffset}for(n=0;n<o;n++)(e=this._columns.getItem(n))instanceof O1&&e.restoreGroupWidths()}},resetGroupWidths:function(){var t,e,i,n,s,r,o=this._columns.visibleCount();if(!(o<1)){if(t=this._groupWidth,this.vertical())for(e=0;e<o;e++)(i=this._columns.getVisibleItem(e))._displayWidth=i._groupWidth=t,i._displayOffset=0;else{for(e=n=0;e<o;e++)n+=(i=this._columns.getVisibleItem(e))._displayWidth=i._width;for(e=r=0;e<o-1;e++)i=this._columns.getVisibleItem(e),s=0==n?0:t*i._displayWidth/n,i._groupWidth=s,i._displayOffset=Y1(r),r+=s,i._displayWidth=Y1(r)-i._displayOffset;s=t-r,(i=this._columns.getVisibleItem(o-1))._groupWidth=s,i._displayOffset=Y1(r),i._displayWidth=Y1(r+s)-i._displayOffset}for(e=0;e<o;e++)(i=this._columns.getVisibleItem(e))instanceof O1&&i.resetGroupWidths()}},collectColumns:function(t,e){var i,n,s;for(i=0,n=this._columns.count();i<n;i++)s=this._columns.getItem(i),e&&s instanceof O1||t.push(s),s instanceof O1&&s.collectColumns(t,e)},collectGroups:function(t){var e,i,n;for(e=0,i=this._columns.count();e<i;e++)(n=Q2(this._columns.getItem(e),O1))&&(t.push(n),n.collectGroups(t))},collectColumnNames:function(t,e){var i,n,s,r;for(i=0,n=this._columns.count();i<n;i++)!(s=this._columns.getItem(i))||!(r=s.name())||e&&s instanceof O1||t.push(r),s instanceof O1&&s.collectColumnNames(t,e);return t},collectGroupNames:function(t){var e,i,n,s;for(e=0,i=this._columns.count();e<i;e++)(n=this._columns.getItem(e))instanceof O1&&((s=n.name())&&t.push(s),n.collectGroupNames(t));return t},clearMergeGrouped:function(){var t,e,i=this._columns.count();for(t=0;t<i;t++)(e=this._columns.getItem(t))instanceof L2&&e._setMergeGrouped(!1),e instanceof O1&&e.clearMergeGrouped()},columnByName:function(t,e){return this._columns.columnByName(t,e)},visibleColumnByName:function(t,e){return this._columns.visibleColumnByName(t,e)},valueColumnByName:function(t,e){return this._columns.valueColumnByName(t,e)},columnByField:function(t,e){if(0<=t){var i,n,s=this._columns,r=e?s.visibleCount():s.count();for(i=0;i<r;i++){if((n=e?s.getVisibleItem(i):s.getItem(i))instanceof L2&&n.dataIndex()==t)return n;if(n instanceof O1&&(n=n.columnByField(t,e)))return n}}return null},collectColumnsByField:function(t,e){var i,n;if(0<=t)for(i=0,n=this._columns.count();i<n;i++)column=this._columns.getItem(i),column instanceof L2&&column.dataIndex()==t&&e.push(column),column instanceof O1&&column.collectColumnsByField(t,e)},columnByTag:function(t){if(t){var e,i,n=this._columns.count();for(e=0;e<n;e++){if((i=this._columns.getItem(e)).tag()==t)return i;if(i instanceof O1&&(i=i.columnByTag(t)))return i}}return null},collectColumnsByTag:function(t,e){if(t){var i,n,s=this._columns.count();for(i=0;i<s;i++)(n=this._columns.getItem(i)).tag()==t&&e.push(n),n instanceof O1&&n.collectColumnsByTag(t,e)}},getLeafColumns:function(t){t=!(0<arguments.length)||t;var e=[];return $_collectColumns(this,e,t),e},getValueColumns:function(t){t=!(0<arguments.length)||t;var e=[];return $_collectValueColumns(this,e,t),e},getDataColumns:function(t){t=!(0<arguments.length)||t;var e=[];return $_collectDataColumns(this,e,t),e},clearFitWidths:function(){this._columns.$_clearFitWidths()},resetFitWidths:function(){var t,e,i,n,s,r,o,a=this._columns.visibleCount();if(!(a<1)){if(t=this._fitWidth,this.horizontal()){for(e=o=0;e<a;e++)o+=(s=this._columns.getVisibleItem(e))._groupWidth;for(e=n=0;e<a-1;e++)s=this._columns.getVisibleItem(e),i=0==o?0:s._groupWidth*t/o,s._fitOffset=Y1(n),n+=i,s._fitWidth=Y1(n)-s._fitOffset;i=t-n,(s=this._columns.getVisibleItem(a-1))._fitOffset=n,s._fitWidth=Y1(n+i)-s._fitOffset}else for(e=0;e<a;e++)(s=this._columns.getVisibleItem(e))._fitWidth=t,s._fitOffset=0;for(e=0;e<a;e++)(r=Q2(this._columns.getVisibleItem(e),O1))&&r.resetFitWidths()}},setChildrenVisible:function(t,e){var i,n,s,r=this.grid();if(r){for(i=!1,n=0;n<t.length;n++)(s=t[n])._visible!=e&&(s._visible=e,i=s._dirty=!0);i&&(r.invalidateColumnWidths(),r._columnDisplayIndexChanged())}},_createHeader:function(){return new u27(this)},clean:function(){this._super();for(var t=this.count();t--;)this.getItem(t).clean()},canMerge:function(){return!1},prepareLayout:function(t,e,i){function n(t,e){var i=null;return e instanceof k4?0<=t._columns._visibles.indexOf(e)&&(i=e):e&&(i=t._columns.visibleColumnByName(e)),i&&(i.$_delegateOwner=t),i}this._super(t,e),this.$_headerColumn=n(this,this._headerDelegate),this.$_footerColumn=n(this,this._footerDelegate),this.$_groupFooterColumn=n(this,this._groupFooterDelegate),this.$_summaryColumn=n(this,this._summaryDelegate),this._childFooterSpansDirty&&(this.$_refreshChildFooterSpans(i),this._childFooterSpansDirty=!1),this._childGroupFooterSpansDirty&&t.canShowGroupFooters()&&(this.$_refreshChildGroupFooterSpans(i),this._childGroupFooterSpansDirty=!1),this._childSummarySpansDirty&&(this.$_refreshChildSummarySpans(i),this._childSummarySpansDirty=!1)},$_attachChildren:function(t){var e,i;for(e=this.count();e--;)(i=this.getItem(e))._setParent(this,t),i instanceof O1&&i.$_attachChildren(t)},_columnAdded:function(t){},_columnRemoved:function(t){},initVisibles:function(){this._columns.$_initVisibles()},resetVisibles:function(){this._columns.$_resetVisibles(),this._childFooterSpansDirty=!0,this._childGroupFooterSpansDirty=!0,this._childSummarySpansDirty=!0},resetStates:function(){this._columns.$_resetStates(this.grid())},resetIndices:function(t){this._columns.$_resetIndices(t)},_checkVisible:function(t){var e;if(!t||(e=t._displayIndex)<0||t!==this.getVisibleItem(e))throw new Error("Column is not a visible group member");return e},_clearSavedWidths:function(){var t,e,i;for(t=0,e=this.count();t<e;t++)(i=this.getItem(t))._saveWidth=NaN,i instanceof O1&&i._clearSavedWidths()},_saveOrgWidths:function(){var t,e,i;for(t=0,e=this.count();t<e;t++)(i=this.getItem(t))._orgWidth=i.saveWidth(),i instanceof O1&&i._saveOrgWidths()},_restoreOrgWidths:function(){var t,e,i;for(t=0,e=this.count();t<e;t++)(i=this.getItem(t))._saveWidth=i._orgWidth,i instanceof O1&&i._restoreOrgWidths()},$_childFooterSpanChanged:function(t){this._childFooterSpansDirty=!0},$_childGroupFooterSpanChanged:function(t){this._childGroupFooterSpansDirty=!0},$_childSummarySpanChanged:function(t){this._childSummarySpansDirty=!0},$_refreshSpans:function(t,e){for(var i,n,s,r,o,a,h,l=[],u=!1,d=this.visibleCount(),c=0;c<t&&c<d;){if(r=(n=e(i=this.getVisibleItem(c))).spanPrev(),o=n.spanNext(),i instanceof O1||!(0<r||0<o))l[c]||(l[c]=i);else{for(l[c]=i,a=c-1;0<r&&0<=a;r--,a--){if((s=l[h=a])===this.getVisibleItem(h))for(;0<h&&l[--h]===s;)l[h]=i;l[a]=i}for(a=c+1;0<o&&a<t;a++,o--)l[a]=i;u=!0}c++}for(;c<d;){if(r=(n=e(i=this.getVisibleItem(c))).spanPrev(),o=n.spanNext(),i instanceof O1||!(0<r||0<o))l[c]||(l[c]=i);else{for(l[c]=i,a=c-1;0<r&&t<=a;r--,a--){if((s=l[h=a])===this.getVisibleItem(h))for(;t<h&&l[--h]===s;)l[h]=i;l[a]=i}for(a=c+1;0<o&&a<d;a++,o--)l[a]=i;u=!0}c++}return{spans:l,spanned:u}},$_refreshChildFooterSpans:function(t){var e=this.$_refreshSpans(t,function(t){return t.footer()});this.$_footerSpanned=e.spanned,this.$_footerSpans=e.spans},$_refreshChildGroupFooterSpans:function(t){var e=this.$_refreshSpans(t,function(t){return t.groupFooter()});this.$_groupFooterSpanned=e.spanned,this.$_groupFooterSpans=e.spans},$_refreshChildSummarySpans:function(t){var e=this.$_refreshSpans(t,function(t){return t.header().summary()});this.$_summarySpanned=e.spanned,this.$_summarySpans=e.spans}},{$_columnType:"group",getRight:function(t){var e=t&&t._parent;return e?((t=e.right(t))||(t=O1.getRight(e)),t):null},getLeft:function(t){var e=t&&t._parent;return e?((t=e.left(t))||(t=O1.getLeft(e)),t):null},getNext:function(t){var e=t&&t._parent;return e?((t=e.next(t))||(t=O1.getNext(e)),t):null},getPrev:function(t){var e=t&&t._parent;return e?((t=e.prev(t))||(t=O1.getPrev(e)),t):null},getLower:function(t){var e=t&&t._parent;return e?((t=e.lower(t))||(t=O1.getLower(e)),t):null},getUpper:function(t){var e=t&&t._parent;return e?((t=e.upper(t))||(t=O1.getUpper(e)),t):null},isTop:function(t){for(var e=t&&t._parent;e;){if(e.vertical()&&1<e.visibleCount()&&0<t._displayIndex)return!1;e=(t=e)._parent}return!0},isBottom:function(t){for(var e=t&&t._parent;e;){if(e.vertical()&&1<e.visibleCount()&&t._displayIndex<e.visibleCount()-1)return!1;e=(t=e)._parent}return!0},isLeft:function(t){for(var e=t&&t._parent;e;){if(e.horizontal()&&1<e.visibleCount()&&0<t._displayIndex)return!1;e=(t=e)._parent}return!0},isRight:function(t){for(var e=t&&t._parent;e;){if(e.vertical()&&1<e.visibleCount()&&t._displayIndex<e.visibleCount()-1)return!1;e=(t=e)._parent}return!0},getAncestors:function(t,e){e?e.length=0:e=[];for(var i=t._parent;i&&!(i instanceof G47);)e.push(i),i=i._parent;return e},getFirstDataRoot:function(t){var e,i=t.visibleCount();return i<1?e=t:t.vertical()&&1<i?e=t:(e=t.getVisibleItem(0))instanceof O1&&(e=O1.getFirstDataRoot(e)),e},getLastDataRoot:function(t){var e,i=t.visibleCount();return i<1?e=t:t.vertical()&&1<i?e=t:(e=t.getVisibleItem(t.visibleCount()-1))instanceof O1&&(e=O1.getLastDataRoot(e)),e},changeWidth:function(t,e,i,n){if(t&&0!=e&&(n=isNaN(n)?0:Math.max(0,n),!(t.displayWidth()+e<n))){var s,r,o,a,h,l=t.parent(),u=t.group(),d=0,c=e;if(i){for(s=d=a=0,r=l.visibleCount();s<r;s++)d+=l.getVisibleItem(s)._groupWidth,a+=l.getVisibleItem(s)._fitWidth;c=e*(d/a),c=0<e?Math.max(1,c):Math.min(-1,c)}if(u){for(h=O1.getAncestors(t),u.vertical()||(o=0<t._groupWidth?t._width*c/t._groupWidth:c,t.setWidth(Math.max(0,(isNaN(t._width)?0:t._width)+o))),s=0;s<h.length-1;s++)o=0<(u=h[s])._groupWidth?u._width*c/u._groupWidth:0,u.setWidth(Math.max(0,u._width+o));(u=h[h.length-1]).setWidth(Math.max(0,Y1(u._width+c))),u.resetGroupWidths()}else t.setWidth(Math.max(0,Y1(t._width+c))),t instanceof O1&&t.resetGroupWidths()}},getColumnMap:function(t,e){if(t&&V1(e)){for(var i=new x6,n=e.length;n--;){var s=Q2(e[n],k4)||t.columnByName(e[n]);if(s){var r=s.parent();if(r){var o=i.get(r);o||i.set(r,o=[]),o.push(s)}}}return i}return null},createMenuItems:function(t,e,i,n){var s,r=[];if(n)for(s in n)r[s]=n[s];return r}}),m78=I1("ColumnCollection",null,{init:function(t){this._super(),this._owner=t,this._items=[],this._visibles=[]},owner:function(){return this._owner},grid:function(){return this._owner&&this._owner.grid()},count:function(){return this._items.length},items:function(){return this._items.slice()},visibleCount:function(){return this._visibles.length},visibleItems:function(){return this._visibles.slice()},hiddenItems:function(){var t,e,i=this._items,n=(i.length,this._visibles),s=[];if(n.length<i.length)for(t=0,e=i.length;t<e;t++)n.indexOf(i[t])<0&&s.push(i[t]);return s},getItem:function(t){return this._items[t]},getVisibleItem:function(t){return this._visibles[t]},clear:function(t){var e,i=this._items;for(e=i.length;e--;)i[e]._setParent(null);i.length=this._visibles.length=0},contains:function(t){return 0<=this._items.indexOf(t)},indexOf:function(t){return this._items.indexOf(t)},visibleIndexOf:function(t){return this._visibles.indexOf(t)},add:function(t,e){if(null==t)throw new Error("column is null");if(0<=this.indexOf(t))throw new Error("column is already contained");return 0<=e&&e<this._items.length?this._items.splice(e,0,t):this._items.push(t),t._setParent(this._owner),this._items.length},removeAt:function(t){if(t<0||t>=this._items.length)throw new Error("index is invalid: "+t);var e=this._items[t];return this._items.splice(t,1),e._setParent(null),this._items.length},move:function(t,e){if(null==t)throw new Error("column is null");if(e<0||e>=this._items.length)throw new Error("newIndex is invalid: "+e);return t._parent===this._owner&&t._index!=e&&(this._items.splice(t.index(),1),this._items.splice(e,0,t),!0)},moveVisible:function(t,e){if(null==t)throw new Error("column is null");if(e<0||e>=this._items.length)return!1;if(t._parent===this._owner&&t._visible){if(!this.$_isVisible(t))return this.$_resetVisibles(!1),!0;var i=this._visibles,n=t._displayIndex;if(n!=e)return 0<=n&&i.splice(n,1),i.splice(e,0,t),this.$_resetVisibles(!1),!0}return!1},columnByName:function(t,e){if(t)for(var i=0,n=this._items.length;i<n;i++){var s=this._items[i];if(b5(s.name(),t,e))return s;if(s instanceof O1&&(s=s._columns.columnByName(t,e)))return s}return null},visibleColumnByName:function(t,e){if(t)for(var i=0,n=this._visibles.length;i<n;i++){var s=this._visibles[i];if(b5(s.name(),t,e))return s;if(s instanceof O1&&(s=s._columns.visibleColumnByName(t,e)))return s}return null},valueColumnByName:function(t,e){var i,n,s;if(t)for(i=0,n=this._items.length;i<n;i++)if((s=this._items[i])instanceof O1){if(s=s._columns.valueColumnByName(t,e))return s}else if(b5(s.name(),t,e))return s;return null},setChildrenProperty:function(t,e,i,n){var s,r,o=n?this._visibles:this._items;for(s=o.length;s--;)(r=o[s]).setProperty(t,e),r instanceof O1&&r.setProperty(t,e,!0)},$_isVisible:function(t){return 0<=this._visibles.indexOf(t)},$_initVisibles:function(){var t,e,i,n=this._items;for(t=0,e=n.length;t<e;t++)(i=n[t])._displayIndex=t,i instanceof O1&&i.initVisibles()},$_resetVisibles:function(t){arguments.length<1&&(t=!0);var e,i,n,s,r=this._items,o=this._visibles;if((e=this.grid())&&e._displayOptions._singleColumnIndices)for(i=o.length=0,n=r.length;i<n;i++)(s=r[i])._visible?(s._displayIndex=o.length,o.push(s)):s._displayIndex=-1;else{for(i=o.length-1;0<=i;i--)(!(s=o[i])._visible||r.indexOf(s)<0)&&o.splice(i,1);for(i=0,n=r.length;i<n;i++)(s=r[i])._visible&&(this.$_isVisible(s)||(0<=s._displayIndex?o.splice(Math.min(o.length,s._displayIndex),0,s):o.push(s)))}if(0<(n=o.length))for(i=0;i<n;i++)(s=o[i])._displayIndex=i,s.$_last=s._parent.$_last&&i==n-1,s instanceof O1&&t&&s.resetVisibles()},$_clearFitWidths:function(){for(var t=this._items.length;t--;){var e=this._items[t];e._fitWidth=NaN,e._fitOffset=NaN,e instanceof O1&&e.clearFitWidths()}},$_resetStates:function(t){var e,i,n,s,r,o=this._items,a=o.length,h=t.itemSource();for(e=0;e<a;e++)(n=o[e])._header.$_checkPopupMenu(t),n instanceof L2&&n._setSortOrder(-1);if(h&&(s=t.getSortFields()))for(r=t.getSortDirections(),e=0;e<s.length;e++)for(i=0;i<a;i++)(n=o[i])instanceof L2&&n.dataIndex()==s[e]&&(n._setSortOrder(e),n._setSortDirection(r[e]));for(e=0;e<a;e++)(n=o[e])instanceof O1&&n.resetStates()},$_resetIndices:function(t){var e,i,n,s=t.itemSource(),r=s&&s.dataSource();for(e=0,i=this._items.length;e<i;e++)(n=this._items[e])._index=e,n instanceof L2?n._resetDataIndex(r):n instanceof Q7?n.resetIndices(r):n instanceof h7?t.$_calculatedColumnChanged(n):n instanceof O1&&n.resetIndices(t)}}),P1=I1("CellIndex",null,{init:function(t,e){this._super(),this.rowIndex=parseInt(t),this.column=e instanceof k4?e:null},setColumn:function(t){return this.column=t,this},setRowIndex:function(t){return this.rowIndex=t,this},grid:{get:function(){return this.column&&this.column.grid()},set:null},dataColumn:{get:function(){return this.column instanceof L2?this.column:null},set:null},calcedColumn:{get:function(){return this.column instanceof h7?this.column:null},set:null},valueColumn:{get:function(){return this.column instanceof t2?this.column:null},set:null},group:{get:function(){return this.column instanceof O1?this.column:null},set:null},dataField:{get:function(){return this.column instanceof L2?this.column.dataIndex():-1},set:null},isDataCell:{get:function(){if(this.column instanceof L2){var t=this.column.grid().getRow(this.rowIndex);return t&&0<=t.dataIndex()}return!1},set:null},isTopColumn:{get:function(){var t=this.column;return!!t&&(!t.group()||O1.isTop(t))},set:null},isBottomColumn:{get:function(){var t=this.column;return!!t&&(!t.group()||O1.isBottom(t))},set:null},isLeftColumn:{get:function(){var t=this.column;if(t){var e=t.group();return e?0==e.displayIndex()&&O1.isLeft(t):0==t.displayIndex()}return!1},set:null},isRightColumn:{get:function(){var t=this.column;if(t){var e=t.group();return e?e.displayIndex()==e.grid().visibleColumnCount()-1&&O1.isRight(t):t.displayIndex()==t.grid().visibleColumnCount()-1}return!1},set:null},isFirstColumn:{get:function(){var t=this.grid();if(t&&0<t.visibleColumnCount()){var e=t.getVisibleColumn(0);return(e=e instanceof t2?e:e.root().first())==this.column}return!1},set:null},isLastColumn:{get:function(){var t=this.grid();if(t&&0<t.visibleColumnCount()){var e=t.getVisibleColumn(t.visibleColumnCount()-1);return(e=e instanceof t2?e:e.root().last())==this.column}return!1},set:null},equals:function(t,e){return t instanceof P1?t.rowIndex==this.rowIndex&&t.column==this.column:t==this.rowIndex&&e==this.column},set:function(t,e){return this.rowIndex=t,this.column=e,this},setRow:function(t,e){t instanceof g2?this.rowIndex=t.index():e&&(this.rowIndex=-1)},getRow:function(t){return!t&&this.column&&(t=this.column.grid()),t&&0<=this.rowIndex?t.getRow(this.rowIndex):null},getDataIndex:function(t){if(!t&&this.column&&(t=this.column.grid()),t&&0<=this.rowIndex){var e=t.getRow(this.rowIndex);return e?e.dataIndex():-1}return-1},getDataId:function(t){if(!t&&this.column&&(t=this.column.grid()),t&&0<=this.rowIndex){var e=t.getRow(this.rowIndex);return e?e.dataId():-1}return-1},columnIs:function(t,e){return t===this.column||!(!t||!this.column)&&b5(t,this.column.name(),e)},normalize:function(t){return t&&(this.column||(this.column=t.getFirstColumn()),this.rowIndex=isNaN(this.rowIndex)?0:Math.max(0,Math.min(t.rowCount()-1,this.rowIndex))>>0),this},isFixed:function(t){return t&&t.isFixedCell(this)},isFixedCol:function(t){return t&&t.isFixedColumn(this.column)},isFixedRow:function(t){return t&&t.isFixedRowIndex(this.rowIndex)},incRow:function(t,e){t&&(this.rowIndex=Math.max(0,Math.min(t.rowCount()-1,this.rowIndex+e)))},firstRow:function(t){t&&(this.rowIndex=0)},lastRow:function(t){t&&(this.rowIndex=t.rowCount()-1)},right:function(){var t=$$_cellIndex_getRight(this.grid(),this.column);t&&(this.column=t)},left:function(){var t=$$_cellIndex_getLeft(this.grid(),this.column);t&&(this.column=t)},next:function(){var t=$$_cellIndex_getNext(this.grid(),this.column);return!!t&&(this.column=t,!0)},prev:function(){var t=$$_cellIndex_getPrev(this.grid(),this.column);return!!t&&(this.column=t,!0)},home:function(){var t=this.grid();if(t&&0<t.visibleColumnCount()){var e=t.getVisibleColumn(0);this.column=e instanceof t2?e:e.root().first()}},end:function(){var t=this.grid();if(t&&0<t.visibleColumnCount()){var e=t.getVisibleColumn(t.visibleColumnCount()-1);this.column=e instanceof t2?e:e.root().last()}},down:function(){this.isBottomColumn()?this.incRow(this.column.grid(),1):this.column=O1.getLower(this.column)},up:function(){this.isTopColumn()?this.incRow(this.column.grid(),-1):this.column=O1.getUpper(this.column)},getValue:function(){var t=this.column;if(t instanceof L2){var e=t.dataIndex();if(0<=e){var i=t.grid().getRow(this.rowIndex);if(i)return i.getValue(e)}}else if(t instanceof h7)return t.getValue(t.grid().getRow(this.rowIndex))},setValue:function(t){var e=this.column;if(e instanceof L2){var i=e.dataIndex();if(0<=i){var n=e.grid().getRow(this.rowIndex);if(n)return n.setValue(i,t)}}},clone:function(){return new P1(this.rowIndex,this.column)},copyTo:function(t){return t.rowIndex=this.rowIndex,t.column=this.column,t},assign:function(t){return this.column=t?(this.rowIndex=t.rowIndex,t.column):(this.rowIndex=-1,null),this},toString:function(){var t=this.column?this.column.root():null,e=this.column?this.column.dataRoot():null;return"("+(t?t.displayIndex():"null")+","+(e?e.displayIndex():"null")+","+this.rowIndex+")"}},{NULL:null,$_temp:null,create:function(t,e){return t instanceof P1?new P1(t.rowIndex,t.column):new P1(t,e)},temp:function(t,e){return P1.$_temp.column=t instanceof P1?(P1.$_temp.rowIndex=t.rowIndex,t.column):(P1.$_temp.rowIndex=t,e),P1.$_temp},areEquals:function(t,e){return this.areEqual(t,e)},areEqual:function(t,e){return t===e||t&&e&&t.rowIndex==e.rowIndex&&t.column==e.column},borrow:function(t,e){return(P1.$_buff.pop()||new P1).set(t,e)},return:function(t){t&&P1.$_buff.push(t)}},function(t){t.NULL=new t,t.$_temp=new t,t.$_buff=[]}),r58=P1.areEqual,L4=I1("CellRange",null,{init:function(){this._super(),this._row1=0,this._col1=null,this._row2=-1,this._col2=null},isEmpty:{get:function(){return this._row2<this._row1||null==this._col1&&null==this._col2},set:null},R1:{get:function(){return this._row1},set:null},C1:{get:function(){return this._col1},set:null},R2:{get:function(){return this._row2},set:null},C2:{get:function(){return this._col2},set:null},top:{get:function(){return this._row1<=this._row2?this._row1:this._row2},set:null},bottom:{get:function(){return this._row1<=this._row2?this._row2:this._row1},set:null},rowCount:function(){return Math.abs(this._row2-this._row1)+1},firstCell:{get:function(){var t=new P1;return t.rowIndex=this._row1<=this._row2?this._row1:this._row2,this._col1.dataRoot().distance()<=this._col2.dataRoot().distance()?t.column=this._col1:t.column=this._col2,t},set:null},lastCell:{get:function(){var t=new P1;return t.rowIndex=this._row1>=this._row2?this._row1:this._row2,this._col1.dataRoot().distance()>=this._col2.dataRoot().distance()?t.column=this._col1:t.column=this._col2,t},set:null},contains:function(t,e){if(e&&t>=this._row1&&t<=this._row2){var i,n=this._col1.dataRoot().distance(),s=this._col2.dataRoot().distance();return s<n&&(i=n,n=s,s=i),(i=e.dataRoot().distance())>=n&&i<=s}return!1},containsIndex:function(t){return t&&this.contains(t.rowIndex,t.column)},intersects:function(t,e){var i,n=Math.min(t.rowIndex,e.rowIndex),s=Math.max(t.rowIndex,e.rowIndex),r=Math.min(this._row1,this._row2),o=Math.max(this._row1,this._row2),a=t.column,h=e.column,l=this._col1,u=this._col2;return 0<I0(a,h)&&(i=a,a=h,h=i),0<I0(l,u)&&(i=l,l=u,u=i),I0(a,u)<=0&&I0(l,h)<=0&&n<=o&&r<=s},intersectsWith:function(t){return!1},normalize:function(){if(this._row1>this._row2){var t=this._row1;this._row1=this._row2,this._row2=t}if(this._col1.dataRoot().distance()>this._col2.dataRoot().distance()){var e=this._col1;this._col1=this._col2,this._col2=e}return this},normalizeData:function(){this.normalize();var t=this._col1;return t instanceof O1&&(this._col1=O1.getFirstDataRoot(t)),(t=this._col2)instanceof O1&&(this._col2=O1.getLastDataRoot(t)),this},bottomIsVisible:function(t){var e=t.layoutManager(),i=e.fixedItemCount(),n=t.topIndex(),s=Math.min(this._row1,this._row2),r=Math.max(this._row1,this._row2);if(0<i){if(r>=n+i+e.fullItemCount()||r<0||i<=s&&r<n+i)return!1}else{if(!(0<e.itemCount()))return!1;if(r>=n+e.fullItemCount()||r<n)return!1}return!0},moveToNext:function(t){var e,i,n,s,r,o;return this.normalize(),e=this.firstCell(),n=(i=this.lastCell()).group(),s=i.column,n&&(s=n.last()),t.column==s?((r=e.column)instanceof O1&&(r=r.first()),o=t.rowIndex+1,t.rowIndex==i.rowIndex&&(o=e.rowIndex),t.set(o,r)):t.column==this.C2()?t.set(t.rowIndex+1,this.C1()):t.next(),t},moveToPrev:function(t){var e,i,n,s,r,o;return this.normalize(),e=this.firstCell(),i=this.lastCell(),n=e.group(),s=e.column,n&&(s=n.first()),t.column==s?((r=i.column)instanceof O1&&(r=r.last()),o=t.rowIndex-1,t.rowIndex==e.rowIndex&&(o=i.rowIndex),t.set(o,r)):t.column==this.C1()?t.set(t.rowIndex-1,this.C2()):t.prev(),t}},{$_setRange:function(t,e,i,n,s){e<n?(t._row1=e,t._col1=i,t._row2=n,t._col2=s):n<e?(t._row1=n,t._col1=s,t._row2=e,t._col2=i):(t._row1=e,t._row2=n);var r=i instanceof k4?i:null,o=s instanceof k4?s:null;return r&&o?r.dataRoot().distance()<=o.dataRoot().distance()?(t._col1=i,t._col2=s):(t._col1=s,t._col2=i):(t._col1=i,t._col2=s),t},create:function(t,e){if(e&&t!==e)return L4.$_setRange(new L4,t.rowIndex,t.column,e.rowIndex,e.column);var i=new L4;return i._row1=i._row2=t.rowIndex,i._col1=i._col2=t.column,i},temp:function(t,e){var i=L4.$_TEMP;return e&&t!==e?L4.$_setRange(i,t.rowIndex,t.column,e.rowIndex,e.column):(i._row1=i._row2=t.rowIndex,i._col1=i._col2=t.column,i)},createRange:function(t,e,i,n){return L4.$_setRange(new L4,t,e,i,n)}});L4.NULL=new L4,L4.$_TEMP=new L4;var $_GridCellIndex=I1("$_GridCellIndex",P1,{init:function(t,e){this._super(t,e)},assign:function(t){return this.$_row=t?(this.rowIndex=t.rowIndex,this.column=t.column,t.$_row):(this.rowIndex=-1,void(this.column=null)),this},getRow:function(t){return this._super(t)||this.$_row}}),Q4=I1("GridCell",null,{init:function(t,e){this._super(),this._grid=t,this._name=e,this._index=new $_GridCellIndex},styles:null,index:null,name:function(){return this._name},grid:function(){return this._grid},setIndex:function(t){return this._index.assign(t),this},column:function(){return this._index.column},rowIndex:function(){return this._index.rowIndex},row:function(){return this._index.getRow(this._grid)},displayText:function(){return null},value:function(){return null},error:function(){return null},errorDetail:function(){return null},errorLevel:function(){return K4.IGNORE},merged:function(){return!1},setCellStyles:function(t){}},{ERROR:"<<ERROR>>"}),Q78=I1("StyledCell",Q4,{init:function(t,e){this._super(t,null),this._model=e},model:null}),F78=I1("HeaderCell",Q4,{init:function(t){this._super(t,"headerCell")},sortOrderVisible:!0,subStyles:null,text:null,subText:null,subTextGap:1,subTextLocation:u1(s4,s4.BOTTOM),itemOffset:2,itemGap:2,imageList:null,imageIndex:-1,imageUrl:null,imageOffset:0,checkLocation:u1(e2,e2.NONE),imageLocation:u1(e2,e2.NONE),checked:!1,handleOffset:2,handleGap:1,menuWidth:7}),p78=I1("HeaderHeadCell",Q4,{init:function(t,e){this._super(t,"headerHeadCell"),this._head=e},menuVisible:!1}),z78=I1("HeaderSummaryCell",Q4,{init:function(t){this._super(t,"headerSummaryCell"),this._value=NaN,this._error=null,this._errorDetail=null},displayText:function(){if(this._error)return Q4.ERROR;var t=isNaN(this._value)?null:String(this._value);return t||(t=this.index().column.header().summary().text()),t},value:function(){return this._value},level:function(){return 0},calculate:function(){var t=this.index().valueColumn(),e=t?t.$_grid:null;if(this._value=NaN,this._error=null,e&&e.displayOptions().summaryMode()!=z4.NONE){var i=t.header().summary(),n=i._summaryCallback||t._summaryCallback;if(n)try{this._value=e.getSummarizer().summarize(i,function(){return n(t)})}catch(t){this._error=t,this._errorDetail=t,r6(t)}else if(i.canSummary()&&0<=t.dataIndex()&&0<e.dataRowCount())try{var s=e.columnSummaryRuntime();s.setColumn(t,e.getSummarizer()),this._value=i.evaluate(s)}catch(t){this._error=t,this._errorDetail=t,r6(t)}}},error:function(){return this._error},errorDetail:function(){return this._errorDetail}}),n78=I1("HeaderSummaryHeadCell",Q4,{init:function(t,e){this._super(t,"headerSummaryHeadCell"),this._head=e},menuVisible:!1,text:null}),l78=I1("FooterCell",Q4,{init:function(t){this._super(t,"footerCell"),this._value=NaN,this._error=null,this._errorDetail=null},displayText:function(){if(this._error)return Q4.ERROR;var t=this._value,e=isNaN(t)?"string"==typeof t?t:null:String(t);return e||(e=this.index().column.footer().text()),e},value:function(){return this._value},level:function(){return 0},$_setError:function(t){this._error=t,this._errorDetail=t,r6(t)},calculate:function(){var t=this.index().valueColumn(),e=t?t.$_grid:null;if(this._value=void 0,this._error=null,e&&e.displayOptions().summaryMode()!=z4.NONE){var i=t.footer(),n=i._summaryCallback||t._summaryCallback;if(n)try{this._value=e.getSummarizer().summarize(i,function(){return n(t)})}catch(t){this.$_setError(t)}else if(i.canSummary()&&0<=t.dataIndex()&&0<e.dataRowCount())try{var s=e.columnSummaryRuntime();s.setColumn(t,e.getSummarizer()),this._value=i.evaluate(s)}catch(t){this.$_setError(t)}}},error:function(){return this._error},errorDetail:function(){return this._errorDetail}}),I78=I1("FooterHeadCell",Q4,{init:function(t,e){this._super(t,"footerHeadCell"),this._head=e},menuVisible:!1,displayText:function(){return this._head.text()}}),C78=I1("EditBarCell",Q4,{init:function(t){this._super(t,"editBarCell")}}),o78=I1("IndicatorCell",Q4,{init:function(t,e){this._super(t,"indicatorCell"),this._indicator=e},indicator:null,rowState:u1(T1,T1.NORMAL),dataState:u1(j1,j1.NONE),stateWidth:0,stateFill:null,shapeVisible:!0,displayText:function(){var t,e=this._indicator,i=this.index(),n=i.getRow(this._grid),s="";if(n)switch(e.displayValue()){case z5.ROW_INDEX:0<=(t=e._grid.getIndicatorIndex(n))&&(t+=e.rowIndexBase(),s=String(t));break;case z5.DATA_INDEX:0<=(t=i.getDataIndex(this._grid))&&(t+=e.dataIndexBase(),s=String(t))}return s}}),e78=I1("StateCell",Q4,{init:function(t){this._super(t,"stateCell")},label:null,displayText:function(){return this._label}}),x78=I1("CheckBarCell",Q4,{init:function(t){this._super(t,"checkBarCell")},displayText:function(){return this._index.getDataIndex(this._grid)}}),L78=I1("GroupCell",Q4,{init:function(t,e){this._super(t,e)}}),T8=I1("ValueCell",Q4,{init:function(t,e){this._super(t,e)},cellStyles:null,displayText:function(){return this.value()},setCellStyles:function(t){(this._cellStyles=t)&&t.assignTo(this._styles)}}),t37=I1("DataCell",T8,{init:function(t,e){this._super(t,e||"dataCell")},error:null,errorLevel:u1(K4,K4.IGNORE),error_:function(){return this._error},errorLevel_:function(){return this._errorLevel},displayText:function(){var t,e,i,n,s,r,o,a=this.index(),h=a.dataColumn(),l=a.getRow(this._grid);if(h.lookupDisplay())if(e=h.lookupSource()){for(s=(n=h.lookupKeyFieldIds()).length,r=[],i=0;i<s;i++)r.push(l.getValue(n[i]));t=void 0!==(t=e.lookup(r))?t:this.value()}else t=0<=(o=h.labelFieldIndex())?l.getValue(o):h.getLookupLabel(this.value());else t=this.value();return null==t?"":String(t)},value:function(){var t=this._index.column.dataIndex();if(0<=t)return this._index.getRow(this._grid).getValue(t)},getTextFromItem:function(t){var e,i=this.index().dataColumn(),n=t.getValue(i.dataIndex());if(i.lookupDisplay()){var s=i.lookupSource();if(s){var r,o=i.lookupKeyFieldIds(),a=o.length,h=[];for(r=0;r<a;r++)h.push(t.getValue(o[r]));e=void 0!==(e=s.lookup(h))?e:this.value()}else{var l=i.labelFieldIndex();e=0<=l?t.getValue(l):i.getLookupLabel(n)}}else e=n;return null==e?"":String(e)}}),R37=I1("LabelCell",T8,{init:function(t){this._super(t,"labelCell")},displayText:function(){return this._index.column.text()},value:function(){return this._index.column.text()}}),R6=I1("SeriesCell",T8,{init:function(t,e){this._super(t,e||"seriesCell")},getValue:function(t,e){return t instanceof Q7?t.getValue(e):[]},value:function(){var t=this._index.column;return t instanceof Q7?t.getValue(this.row()):[]},labels:function(){return this._index.column.fieldLabels()},fieldCount:function(){return this._index.column.fieldCount()}},{getText:function(t){return V1(t)?t.join(","):t}}),w37=I1("ChartCell",R6,{init:function(t){this._super(t,"chartCell")},chart:function(){var t=this._index.column.chart();return t?new O5(this._grid).loadChart(t):null},getKey:function(t){this._index.column.getFieldName(t)}}),H78=I1("CalcedCell",T8,{init:function(t,e){this._super(t,e||"calcedCell")},displayText:function(){var t=this.value();return null==t?"":String(t)},value:function(){return this._index.column.getValue(this._index.getRow(this._grid))}}),G78=I1("RowGroupHeaderCell",Q4,{init:function(t,e){this._super(t,"rowGroupHeaderCell"),this._rowGroup=e},displayText:function(){var t=this._index.getRow(this._grid);return t instanceof j2?this._rowGroup.getHeaderText(t):""}}),M78=I1("RowGroupExpanderCell",Q4,{init:function(t){this._super(t,"rowGroupExpanderCell")}}),W78=I1("v",Q4,{init:function(t){this._super(t,"rowGroupIndentCell")}}),w6=I1("RowGroupFooterCell",Q4,{init:function(t,e){this._super(t,"rowGroupFooterCell"),this._value=NaN,this._error=null,this._errorDetail=null},calculate:function(){this._value=NaN,this._error=null;try{this._value=w6.$_getValue(this._index.getRow(this._grid),this._index.column)}catch(t){this._error=t,this._errorDetail=t,r6(t)}},displayText:function(){if(this._error)return Q4.ERROR;var t,e=this._value,i=isNaN(e)?"string"==typeof e?e:null:String(e);return!i&&(t=this.index().valueColumn())&&(i=t.groupFooter().text()),i},value:function(){return this._value},level:function(){return this.index().getRow(this._grid).level()},error:function(){return this._error},errorDetail:function(){return this._errorDetail}},{$_getValue:function(t,e){if(e instanceof t2){var i,n,s=e.groupFooter(),r=t.parent(),o=s._summaryCallback;return o?i=e.$_grid.getSummarizer().summarizeGroup(e,r,function(){return o(e,r)}):s.canSummary()&&0<=e.dataIndex()&&((n=e.$_grid.rowGroupSummaryRuntime()).setColumn(e,e.$_grid.getSummarizer()),n.setItem(r),i=e.groupFooter().evaluate(n)),i}},getValue:function(t,e){try{return w6.$_getValue(t,e)}catch(t){return Q4.ERROR}}}),J78=I1("RowGroupBarCell",Q4,{init:function(t,e){this._super(t,"rowGroupBarCell")},level:0}),y78=I1("RowGroupItemBarCell",Q4,{init:function(t,e){this._super(t,"rowGroupItemBarCell")}}),c78=I1("RowGroupHeadCell",Q4,{init:function(t,e){this._super(t,"rowGroupHeadCell")},level:0,index:function(){return P1.NULL}}),h58=I1("RowGroupFootCell",Q4,{init:function(t,e){this._super(t,"rowGroupFootCell")}}),s8=I1("HandleRenderer",a2,{init:function(){this._super()},draw:function(t,e,i){this._doDraw(t,e,i)},drawHtml:function(t,e){this._doDrawHtml(t,e)},_doDraw:function(t,e,i){},_doDrawHtml:function(t,e){},_changed:function(){this.fireEvent(s8.CHANGED)}});s8.CHANGED="onHandleRendererChanged";var g27=9,e5=11,r27=4,O78=I1("DefaultFilterHandleRenderer",s8,{init:function(){this._super()},_doDraw:function(t,e,i){var n,s,r=e.width/2,o=(e.height-e5)/2,a=[r-g27/2,o,r+g27/2,o,r,o+e5-r27+2,r-g27/2,o],h=i.column().filtered();n=i.hovered()?(s=i.hoveredBorder(),h?i.hoveredBackground():null):(s=h?i.border():i.emptyBorder(),h?i.background():null),t.drawPolygonArray(n,s,a),t.drawLineI(s,r-1,o+e5-r27-1,r-1,o+e5+1),t.drawLineI(s,r,o+e5-r27-1,r,o+e5+1)},_doDrawHtml:function(t,e){this._doDraw(e.$_getGraphics(!0),t,e)}}),j78=7,E37=7,k78=I1("DefaultSortHandleRenderer",s8,{init:function(){this._super()},_doDraw:function(t,e,i){var n,s,r,o=i.sortOrder(),a=Y1(e.width/2),h=Y1((e.height-E37+1)/2)+1,l=j78/2,u=h+E37-1,d=0<=o;n=o<0||i.sortDir()==M4.ASCENDING?[a,h,a-l,u,a+l,u]:[a-l,h,a+l,h,a,u],s=i.hovered()?(r=i.hoveredBorder(),d?i.hoveredBackground():null):(r=d?i.border():i.emptyBorder(),d?i.background():null),t.drawPolygonArray(s,r,n)},_doDrawHtml:function(t,e){this._doDraw(e.$_getGraphics(!0),t,e)}}),W2=I1("GridElement",o7,{init:function(t,e){this._super(t,e),this._css&&(this._css.overflow="hidden"),this._drawRect=new g1,this._recycling=!1},grid:function(){for(var t=this._parent;t;){if(t instanceof q1)return t;t=t._parent}return null},measure:function(t,e,i){return this._doMeasure(t,e,i)},layoutContent:function(t){return this._doLayoutContent(t)},refresh:function(){this._doRefresh()},clip:function(t){this.getClientRect(this._drawRect),t.clipRect(this._drawRect)},_doDraw:function(t,e){e&&t.drawRectI(U1.WHITE,null,this._drawRect),this._doRender(t,this._drawRect)},_doClearHtml:function(){this._span&&(this._span.style.visibility="hidden"),this._svg&&(this._svg._svg.style.visibility="hidden")},_doDrawHtml:function(){this.getClientRect(this._drawRect),this._doRenderHtml(this._drawRect)},$_prepareSpan:function(){return this._span||(this._span=document.createElement("span"),this._span.style.position="absolute",this._span.style.display="inline-block",this._dom.appendChild(this._span)),this._span.style.visibility="visible",this._span},$_prepareSvg:function(){var t=this._svg;return t||(t=this._svg=new b7(null,this.container()),this._dom.appendChild(t._svg)),t._svg.style.visibility="visible",t},_doMeasure:function(t,e,i){return new J2(e,i)},_doLayoutContent:function(t){},_doRefresh:function(){},_doRender:function(t,e){},_doRenderHtml:function(t){},_renderText:function(t,e,i,n,s,r){if(this._dom){var o=this.$_prepareSpan();w1.renderText(o,this._font,i,n,s,r)}else t.drawText(e,i,n,s,r)}},{drawStyledBorders:function(t,e,i){var n,s=i.borderLeft(),r=i.borderTop(),o=i.borderRight(),a=i.borderBottom();s&&(n=s.width())&&(n=B1(n/2),t.drawVertLineI(s,e.y,e.bottom(),e.x+n)),r&&(n=r.width())&&(n=B1(n/2),t.drawHorzLineI(r,e.x,e.right(),e.y+n)),o&&(n=o.width())&&(n=B1((n+1)/2),t.drawVertLineI(o,e.y,e.bottom(),e.right()-n)),a&&(n=a.width())&&(n=B1((n+1)/2),t.drawHorzLineI(a,e.x,e.right(),e.bottom()-n))},drawStyledHtmlBorders:function(t,e){var i=e.borderLeft(),n=e.borderTop(),s=e.borderRight(),r=e.borderBottom();t.borderLeft=i?i.css():"",t.borderTop=n?n.css():"",t.borderRight=s?s.css():"",t.borderBottom=r?r.css():""},drawBorders:function(t,e,i){var n=t._borderLeft?t._borderLeft.width():0,s=t._borderTop?t._borderTop.width():0,r=t._borderRight?t._borderRight.width():0,o=t._borderBottom?t._borderBottom.width():0;n&&(n=B1(n/2),e.drawVertLineI(t._borderLeft,i.y,i.bottom(),i.x+n)),s&&(s=B1(s/2),e.drawHorzLineI(t._borderTop,i.x,i.right(),i.y+s)),r&&(r=B1((r+1)/2),e.drawVertLineI(t._borderRight,i.y,i.bottom(),i.right()-r)),o&&(o=B1((o+1)/2),e.drawHorzLineI(t._borderBottom,i.x,i.right(),i.bottom()-o))},drawSizedBorders:function(t,e,i){var n,s,r,o,a=t._borderLeft?t._borderLeft.width():0,h=t._borderTop?t._borderTop.width():0,l=t._borderRight?t._borderRight.width():0,u=t._borderBottom?t._borderBottom.width():0;a&&(r=i.y,o=i.bottom(),(n=t._borderLeftSize)&&(n=((s=o-r)-n.getDimension(s))/2,r=Y1(r+n),o=Y1(o-n)),a=B1(a/2),e.drawVertLineI(t._borderLeft,r,o,i.x+a)),h&&(r=i.x,o=i.right(),(n=t._borderTopSize)&&(n=((s=o-r)-n.getDimension(s))/2,r=Y1(r+n),o=Y1(o-n)),h=B1(h/2),e.drawHorzLineI(t._borderTop,r,o,i.y+h)),l&&(r=i.y,o=i.bottom(),(n=t._borderRightSize)&&(n=((s=o-r)-n.getDimension(s))/2,r=Y1(r+n),o=Y1(o-n)),l=B1((l+1)/2),e.drawVertLineI(t._borderRight,r,o,i.right()-l)),u&&(r=i.x,o=i.right(),(n=t._borderBottomSize)&&(n=((s=o-r)-n.getDimension(s))/2,r=Y1(r+n),o=Y1(o-n)),u=B1((u+1)/2),e.drawHorzLineI(t._borderBottom,r,o,i.bottom()-u))},drawHtmlBorders:function(t){t._css.borderLeft=t._borderLeft?t._borderLeft.css():"",t._css.borderTop=t._borderTop?t._borderTop.css():"",t._css.borderRight=t._borderRight?t._borderRight.css():"",t._css.borderBottom=t._borderBottom?t._borderBottom.css():""}}),K0=I1("VisualObjectElement",W2,{init:function(t,e,i){K0.Base.init.call(this,t,e),this._model=i,this._clipBounds=null,this._dom&&(this._dom.style.pointerEvents="none")},model:null,setClipBounds:function(t,e,i,n){var s;t instanceof g1?((s=this._clipBounds||new g1).x=Math.max(t.x,this._x),s.setRight(Math.min(t.right(),this.right())),s.y=Math.max(t.y,this._y),s.setBottom(Math.min(t.bottom(),this.bottom())),s.x-=this._x,s.y-=this._y):null===t||isNaN(t)||((s=this._clipBounds||new g1).x=Math.max(t,this._x),s.setRight(Math.min(t+i,this.right())),s.y=Math.max(e,this._y),s.setBottom(Math.min(e+n,this.bottom())),s.x-=this._x,s.y-=this._y),this._dom?this._css.clip=w1.getClipRect(s):this._clipBounds=s},clip:function(t){this.getClientRect(this._drawRect),t.clipRect(this._clipBounds||this._drawRect)},_doRenderHtml:function(t){this._doRender(this.$_getGraphics(!0,t),t)},_renderHorzBar:function(t,e,i){var n=this.grid(),s=n.body();i?(h=this._fill)&&(this._dom?this._dom.style.background=h.css():t.drawRectI(h,null,e)):this._dom?this._dom.style.background="#fff":t.drawRectI(U1.WHITE,null,e);var r,o=s.fixedColumnBarWidth();if(this._fixed&&0<o){e.setLeft(e.right()-o),e.height=n.layoutManager().fixedBounds().height;var a=s.fixedColumnBarStyles(),h=a.background(),l=a.borderRight();h&&t.drawRect(h,null,e),l&&0<=(r=l.width())&&t.drawVLineI(l,e.x+B1(r/2),e.y,e.bottom()),(l=a.borderRight())&&0<=(r=l.width())&&t.drawVLineI(l,e.right()-1-B1(r/2),e.y,e.bottom())}}}),U78=I1("EmptyGridElement",W2,{init:function(t,e){this._super(t,e),t&&(this._span1=w1.createSimpleSpan(this._dom),this._span2=w1.createSimpleSpan(this._dom))},_doRender:function(t,e){var i=this.grid(),n=m8(i.displayOptions().emptyGridMessage(),E2._default.emptyGridMessage),s=i._productName,r=i.body().emptyStyles(),o=r.background(),a=r.color(),h=r.font();o&&(this._dom?this._dom.style.background=o.css():t.drawRectI(o,null,e)),(n||s)&&(e.inflate(-10,-10),this._dom?(n&&w1.renderTextRect(this._span1,h,a,n,e,T2.LEFT,N7.TOP),s&&w1.renderTextRect(this._span2,h,a,s,e,T2.LEFT,N7.BOTTOM)):(n&&t.drawTextRect(h,a,n,e,T2.LEFT,N7.TOP),s&&t.drawTextRect(h,a,s,e,T2.LEFT,N7.BOTTOM)))},_doRenderHtml:function(t){this._doRender(null,t)}}),K37=I1("PanelElement",K0,{init:function(t,e){this._super(t,"panelView",e),this.setElementContext(!0)},_doMeasure:function(t,e,i){return J2.create(e,this.model().minHeight())},_doRender:function(t,e){var i,n=this.model().styles();(i=n.background())&&t.drawRectI(i,null,e),W2.drawStyledBorders(t,e,n)},_doRenderHtml:function(t){this._dom.style.background="#ddd"}}),f8=I1("HeaderElement",K0,{init:function(t,e,i){this._super(t,"headerView",e),this._fixed=i,this._endCol=-1,this._cells={},this._focusedColumn=null,this.setElementContext(!0)},fixed:function(){return this._fixed},$_getChildAt:function(t,e,i,n){for(var s=0,r=t.childCount();s<r;s++){var o=t.getChild(s);if(o.visible()){if(n&&o instanceof O7){var a=this.$_getChildAt(o,e-o.x(),i-o.y(),!0);if(a)return a}if(o.containsInBounds(e,i))return o}}return null},getCellAt:function(t,e,i){return this.$_getChildAt(this,t,e,i)},findCell:function(t,e){if(t){var i=t.root(),n=this._cells[i.$_hash];if(n&&n.visible())return i!=t&&(n=n.findCell(t)),e&&n instanceof E6?n.headerCell():n}return null},getView:function(t,e){return this.findCell(t,e)},contextOffsetX:function(){return this._fixed?0:this.grid().leftPos()},_doMeasure:function(t,e,i){var n=this.model();return A47.updateStyles(n.menuHandleStyles()),r0.updateStyles(n.filterHandleStyles()),A6.updateStyles(n.sortHandleStyles()),J2.create(e,n.minHeight())},_doRender:function(t,e){this._renderHorzBar(t,e,!1)},_doLayoutContent:function(t){this._prepareCells(t),this._layoutCells(t)},$_checkCell:function(t){var e=Q2(t,x7);e&&e.setFocused(this._focusedColumn==e.index().column),t instanceof E6&&this.$_refreshCells(t)},$_refreshCells:function(t){for(var e=0,i=t.childCount();e<i;e++)this.$_checkCell(t.getChild(e))},_doRefresh:function(){for(var t in this._focusedColumn=this.grid().$_focusedIndex().column,this._cells)this.$_checkCell(this._cells[t])},_prepareCells:function(t){var e,i,n,s,r,o,a,h,l=this.grid(),u=l.header();for(l.columnLayoutChanged(),this.hideAll(),e=t.fixedColCount(),i=this._fixed?0:t.firstCol(),n=this._fixed?e-1:t.lastCol(),this._fixed||t.lastCol()==t.lastCol2()||"none"==l.vscrollBar().barIndent()||(n=t.lastCol2()),this._endCol=n,s=i;s<=n;s++)(r=t.getColumn(s))||(r=t.getColumn(s)),(o=this._cells[r.$_hash])||(o=r instanceof O1?new E6(this._dom):new x7(this._dom),this._cells[r.$_hash]=o,this.addElement(o)),o.setVisible(!0),a=P1.temp(-1,r),h=u.getCell(a),o.updateCell(h)},_layoutCells:function(t){t.fixedColCount();var e,i,n,s=this._fixed?0:t.firstCol(),r=this._endCol;for(e=s;e<=r;e++)i=this._cells[t.getColumn(e).$_hash],(n=t.getColumnBounds(e)).height=this.height(),i.setRect(n),i.layoutContent(t)}}),N37=I1("SummaryElement",K0,{init:function(t,e,i,n){this._super(t,e,i),this._fixed=n,this._cells={},this.setElementContext(!0)},fixed:function(){return this._fixed},findCell:function(t){if(t){var e=t.root(),i=this._cells[e.$_hash];if(i&&i.visible())return e!=t&&(i=i.findCell(t)),i}return null},getView:function(t){return this.findCell(t)},contextOffsetX:function(){return this._fixed?0:this.grid().leftPos()},_doMeasure:function(t,e,i){return J2.create(e,this.model().minHeight())},_doRender:function(t,e){this._renderHorzBar(t,e,!1)},_doLayoutContent:function(t){this._prepareCells(t),this._layoutCells(t)},_doRefresh:function(){},_getSummary:function(){},_createCellView:function(t){},_getSpans:function(t){},_updateCellView:function(t,e){var i,n,s=this._cells[t.$_hash];return s||(s=this._createCellView(t),this._cells[t.$_hash]=s,this.addElement(s)),s.setVisible(!0),i=P1.temp(-1,t),n=e.getCell(i),s.updateCell(n),s},_prepareCells:function(t){var e,i,n,s,r,o=this.grid(),a=this._getSummary();for(o.columnLayoutChanged(),this.hideAll(),e=t.fixedColCount(),i=this._fixed?0:t.firstCol(),n=this._fixed?e-1:t.lastCol(),this._fixed||t.lastCol()==t.lastCol2()||"none"==o.vscrollBar().barIndent()||(n=t.lastCol2()),this._endCol=n,s=i;s<=n;s++)r=t.getColumn(s),this._updateCellView(r,a)},_layoutCells:function(t){var e,i,n,s,r,o,a=this._getSummary(),h=(t.fixedColCount(),this._fixed?0:t.firstCol()),l=this._endCol,u=this._getSpans(t.getColumn(h)),d=this.height(),c=this._cells;if(u)for(e=h;e<=l;){for(o=t.columnBounds(e),i=t.getColumn(e),n=u[e++],s=this._updateCellView(n,a),i!==n&&(r=c[i.$_hash])&&r.setVisible(!1);e<=l&&(i=u[e])===n;e++)o.width+=t.columnBounds(e).width,(i=t.getColumn(e))!==n&&(r=c[i.$_hash])&&r.setVisible(!1);o.height=d,s.setRect(o),s.layoutContent(t)}else for(e=h;e<=l;e++)s=c[t.getColumn(e).$_hash],(o=t.columnBounds(e)).height=d,s.setRect(o),s.layoutContent(t)}}),P37=I1("HeaderSummaryElement",N37,{init:function(t,e,i){this._super(t,"headerSummaryView",e,i)},_getSummary:function(){return this.grid().header().summary()},_createCellView:function(t){return t instanceof O1?new J9(this._dom):new W9(this._dom)},_getSpans:function(t){return t&&(t=t.parent()).$_summarySpanned?t.$_summarySpans:null}}),Z37=I1("FooterElement",N37,{init:function(t,e,i){this._super(t,"footerView",e,i)},_getSummary:function(){return this.grid().footer()},_createCellView:function(t){return t instanceof O1?new c9(this._dom):new y9(this._dom)},_getSpans:function(t){return t&&(t=t.parent()).$_footerSpanned?t.$_footerSpans:null}}),h27=I1("VisualBarElement",K0,{init:function(t,e,i){this._super(t,e,i),this._cells=[],this._fixedCount=0,this.setElementContext(!0)},findCell:function(t){for(var e=this.childCount();e--;){var i=this.getChild(e);if(i.index().rowIndex==t)return i}return null},_doRefresh:function(){},_doRender:function(t,e){t.drawRectI(U1.WHITE,null,e)},_doRenderHtml:function(t){this._css.background=U1.WHITE.css()},_doLayoutContent:function(t){var e,i,n,s,r,o,a,h,l=this.model(),u=this.width(),d=t.topIndex(),c=t.fixedItemCount(),_=t.itemCount();for(c==this._fixedCount&&_==this.childCount()-this._fixedCount&&this.childCount()>this._fixedCount+1&&(e=this.getChild(this._fixedCount))&&null!=(i=e.item())&&(i.index()==this._fixedCount+d-1?(e=this.removeElementAt(this._fixedCount),this.addElement(e)):i.index()==this._fixedCount+d+1&&(e=this.removeElementAt(this.childCount()-1),this.insertElement(this._fixedCount,e))),this._fixedCount=c;this.childCount()<c+_;)e=0<this._cells.length?this._cells.pop():this._createCellView(),this.addElement(e);for(;this.childCount()>c+_;)(e=this.removeElementAt(this.childCount()-1)).validate(!0),this._cells.push(e);for(s=this.childCount(),n=0;n<s;n++)r=n<c?n:n+d,o=P1.temp(r),a=this._getCell(l,o),e=this.getChild(n),this._updateCellView(e,a,o),(h=t.getItemBounds(n)).x=0,h.width=u,e.setRect(h)},_createCellView:function(){},_getCell:function(t,e){return t.getCell(e)},_updateCellView:function(t,e,i){t.updateCell(e)}}),d78=I1("RowIndicatorElement",h27,{init:function(t,e){this._super(t,"rowIndicatorView",e)},findCell:function(t){if(Z17(t)&&(t=this.grid().getRow(t)),t)for(var e=this.childCount();e--;){var i=this.getChild(e);if(i.row()===t)return i}return null},$_calcWidth:function(t,e){var i,n,s,r,o=e.styles(),a=o.paddingHorz()+o.borderHorzWidth(),h=t.rowCount();return 0<h&&(i=new Array(String(h).length+1).join("8"),n=t.container(),s=o.font(),(r=o.prefix())&&(i=r+i),(r=o.suffix())&&(i+=r),a+=n.measureText(s,i)+2),Math.ceil(a)},_doMeasure:function(t,e,i){var n,s=this.model(),r=s.width();return(isNaN(r)||r<=0)&&(r=this.$_calcWidth(t,s)),0<(n=s.maxWidth())&&n<r&&(r=n),0<(n=s.minWidth())&&r<n&&(r=n),J2.create(r,i)},_doRefresh:function(){var t,e,i,n,s=this.grid(),r=s.rowIndicator(),o=s.layoutManager(),a=o.fixedItemCount(),h=this.childCount();for(t=0;t<h;t++)e=t<a?t:t+o.topIndex(),i=P1.temp(e),n=r.getCell(i),this.getChild(t).updateCell(n)},_createCellView:function(){return new C0(this._dom)}}),i37=I1("StateBarElement",h27,{init:function(t,e){this._super(t,"stateBarView",e)},getCellView:function(t){for(var e=this.childCount();e--;){var i=this.getChild(e);if(i instanceof O9&&i._index.rowIndex===t)return i}return null},_doMeasure:function(t,e,i){return J2.create(this.model().stateWidth(),i)},_getCell:function(t,e){return t.getStateCell(e)},_createCellView:function(){return new O9(this._dom)}}),V37=I1("CheckBarElement",h27,{init:function(t,e){this._super(t,"checkBarView",e)},_doMeasure:function(t,e,i){return J2.create(this.model().width(),i)},_doLayoutContent:function(t){var e=this.model();this.$_grid=this.grid(),this.$_showGroup=e.showGroup(),this.$_exclusive=e.exclusive()&&e.exclusiveDisplay(),this._super(t)},_createCellView:function(){return new K6(this._dom)},_updateCellView:function(t,e,i){t.setMarkVisible(this.$_showGroup||0<=i.getDataIndex(this.$_grid)),t.setExclusive(this.$_exclusive),this._super(t,e)}}),X27=I1("GridBodyElement",K0,{init:function(t,e,i){this._super(t,"gridBodyView",e),this._fixed=i,this._lineScrolled=!1,this._horzScrolling=!1,this._fixedCount=0,this._items=[],this._rowViews=[],this._viewMap={},this._fill=null},fixed:function(){return this._fixed},lineScrolled:function(){return this._lineScrolled},checkResourceColumn:function(t,e){},checkResourceUse:function(t,e){},clearItems:function(){this._items=[]},addItem:function(t){this._items.indexOf(t)<0&&this._items.push(t)},findRowView:function(t){for(var e=0,i=this.childCount();e<i;e++){var n=this.getChild(e),s=n.item();if(s&&(s===t||s.index()==t))return n}return null},findRowViewById:function(t){for(var e=0,i=this.childCount();e<i;e++){var n,s=this.getChild(e);if(s instanceof N6&&(n=s.item())&&n.dataId()==t)return s}return null},findRowViewAt:function(t){for(var e=0,i=this.childCount();e<i;e++){var n=this.getChild(e);if(t>=n.y()&&t<n.bottom())return n}return null},findFirstRow:function(){var t=this.childCount();if(0<t){for(var e=null,i=1;i<t;i++){var n,s=this.getChild(i);s instanceof N6&&(n=s.item())&&!e&&n.index()<e.itemIndex()&&(e=s)}return e}return null},_doMeasure:function(t,e,i){return{width:e,height:i}},_doLayoutContent:function(t){this._lineScrolled=!1,this._super(t);var e,i,n,s,r,o,a,h,l,u,d,c,_,f=this._fixed,g=this.grid(),m=g.body(),p=m.rowRangeStyles(),w=this.childCount(),v=this._items,C=v.length;for(this._fill=m.styles().background();(w=this.childCount())<C;)n=v[w],s=this.$_borrowView(n),this.addElement(s);for(;(w=this.childCount())>C;)this.$_removeView(w-1);for(e=this.childCount();e--;)this.getChild(e)._recycling=!1;for(this._fixedCount=t.fixedItemCount(),h=g.topIndex(),u=g.body().fixedColumnBarWidth(),d=0,c={},(_=this.getChildren()||[]).length=Math.min(_.length,C),e=0;e<C;e++)n=v[e],(s=this._viewMap[n.dataIndex()])&&0<=(i=_.indexOf(s))?_.splice(i,1):s=_.pop(),s&&(l=(o=n.index())<this._fixedCount,r=p.getRow(o,f||l),s.updateElement(n,r),o=l?o:o-h,(a=t.itemBounds(o,f)).width-=u,s.setRect(a),s._recycling?t.columnMerged()&&this._lineScrolled&&(e<=1||C-2<=e)&&(s._displayIndex=d++,s.layoutContent(t)):(s._displayIndex=d++,s.layoutContent(t)),0<=n.dataIndex()&&(c[n.dataIndex()]=s));this._viewMap=c},_doRender:function(t,e){this._renderHorzBar(t,e,!0)},_doRefresh:function(){},$_removeView:function(t){var e=this.removeElementAt(t);e.validate(!0),this._rowViews.push(e)},$_borrowView:function(t){var e=this._rowViews.pop();return e||(e=this.grid().delegate().borrowItemView(t,this._fixed)),x8(null!=e,"view is null"),e},$_requestFill:function(t,e,i){var n,s=this.grid();s.$_requestFill(t,e,i),(n=this._fill)instanceof U1?e.drawRectI(n,null,i):n&&(i=this.clientRectByChild(t,this._drawRect),e.drawRectI(n,null,i)),(t instanceof e0||t instanceof m6)&&t._fixed&&((n=s.body().fixedRowStyles().background())instanceof U1?e.drawRectI(n,null,i):n&&(i=s.fixedMergeView().clientRectByChild(t,this._drawRect),e.drawRectI(n,null,i)))},$_clearSelections:function(){var t,e=this._viewMap;for(t in e)e[t].$_clearSelections()},$_setSelections:function(t,e){var i,n=this._viewMap;for(i in n)n[i].$_setSelections(t,e)}}),Y78=I1("GridBordersElement",D4,{init:function(t,e){this._super(t,"gridBordersView",!0),this._grid=e},borderLeft:null,borderRight:null,borderTop:null,borderBottom:null,updateElement:function(){var t=this._grid.styles();this.setBorderLeft(t.borderLeft()),this.setBorderRight(t.borderRight()),this.setBorderTop(t.borderTop()),this.setBorderBottom(t.borderBottom())},deflate:function(t){this._borderLeft&&t.leftBy(this._borderLeft.width()),this._borderRight&&t.rightBy(-this._borderRight.width()),this._borderTop&&t.topBy(this._borderTop.width()),this._borderBottom&&t.bottomBy(-this._borderBottom.width())},_doDraw:function(t){W2.drawBorders(this,t,this._drawRect)},_doDrawHtml:function(){W2.drawHtmlBorders(this)}}),t78=I1("GridLinesElement",D4,{init:function(t,e){this._super(t,"gridLinesView"),this._grid=e},$_renderRowBar:function(t,e,i,n,s){var r,o,a,h,l,u;0<e.fixedHeight()&&0<i.fixedRowBarHeight()&&(r=Math.min(e.gridBounds().right(),s.right()),(o=s.y+e.fixedHeight())<n&&(h=(a=i.fixedRowBarStyles()).background(),l=a.borderTop(),h&&(u=Math.min(i.fixedRowBarHeight(),n-o),t.drawBoundsI(h,null,0,o,r,u)),o<n&&l&&0<(w=l.width())&&t.drawHLineI(l,o+B1(w/2),0,r),l=a.borderBottom(),(o+=i.fixedRowBarHeight()-1)<n&&l&&0<(w=l.width())&&t.drawHLineI(l,o-B1(w/2),0,r)))},_doDraw:function(t){var e,i,n,s,r=this._grid,o=r.body(),a=r.layoutManager(),h=a.bodyBounds(),l=a.footerBounds().y,u=Math.min(h.right(),a.gridBounds().right());this.$_renderRowBar(t,a,o,l,h),s=o.styles(),e=h.x+h.width,i=h.y+h.height,r.$_hideBorders||(n=s.borderRight())&&0<n.width()&&e<=u&&0<a.columnCount()+a.fixedColCount()&&(t.drawVLineI(Z1.WHITE,e-1,0,i),t.drawVLineI(n,e-1,0,i)),(n=s.borderBottom())&&0<n.width()&&0<r.rowCount()&&a.itemCount()==a.fullItemCount()&&i<l&&(t.drawHLineI(Z1.WHITE,i-1,0,u),t.drawHLineI(n,i-1,0,u))},_doDrawHtml:function(){var t,e,i,n=this._grid,s=n.layoutManager(),r=n.body(),o=r.styles(),a=s.bodyBounds(),h=a.x+a.width,l=a.y+a.height,u=Math.min(a.right(),s.gridBounds().right()),d=s.footerBounds().y;0<s.fixedHeight()&&0<(t=r.fixedRowBarHeight())&&this.$_renderRowBar(this.$_getGraphics(!0,new g1(0,0,this.container().width(),d+t)),s,r,d,a),this._css.borderRight=null,stroke=o.borderRight(),stroke&&0<stroke.width()&&h<=u&&0<s.columnCount()+s.fixedColCount()&&(e=stroke),this._css.borderBottom=null,stroke=o.borderBottom(),stroke&&0<stroke.width()&&0<n.rowCount()&&s.itemCount()==s.fullItemCount()&&l<d&&(i=stroke),this._css.borderBottom=e||i?(this._css.left=0,this._css.top=0,this._css.width=h+"px",this._css.height=l+"px",this._css.borderRight=e?e.css():null,i?i.css():null):this._css.borderRight=null}}),X58=I1("CustomGridItemHeadElement",W2,{init:function(t){this._super(t,"gridItemHead")},_doRender:function(t,e){},_doRenderHtml:function(t){}}),R78=I1("CustomGridItemElement",K0,{init:function(t,e,i){this._super(t,e||"gridItemView",i)},_doMeasure:function(t,e,i){return J2.create(e,this.model().height())},_doLayoutContent:function(t){var e=this.getClientRect(this._drawRect);this._doLayoutItem(t,e)},_doLayoutItem:function(t,e){}}),S37=I1("CustomGridItemsLayer",D4,{init:function(t,e){this._super(t,"customGridItemsLayer"),this._items=e,this._viewMap={},this._fillHeights=0},measure:function(t,e,i){for(var n=0,s=this._items.count();s--;){var r=this._items.getItem(s),o=r.minHeight(),a=r.maxHeight(),h=r.height();isNaN(h)&&(h=0),isNaN(o)||(h=Math.max(o,h)),isNaN(a)||(h=Math.min(a,h)),n+=r.$_measuredHeight=Math.max(0,h)}return new J2(e,n)},layoutContent:function(t){t.grid();var e,i,n,s,r,o={},a=this.height(),h=0;for(this.clear(),e=0,i=this._items.count();e<i;e++)r=(n=this._items.getItem(e)).$_measuredHeight,(s=o[n.$_hash])||(s=n.createItemView(this._dom),o[n.$_hash]=s),this.addChild(s),e<i-1&&0<this._fillHeights&&0<n.$_fillHeight&&(r+=Y1(this._measuredFillHeights*n.$_fillHeight/this._fillHeights)),s.setModel(n),s.setBoundsI(0,h,this.width(),e<i-1?r:a),s.layoutContent(t),h+=r,a-=r;this._viewMap=o},getFillHeights:function(){var t,e,i=0;for(t=this._items.count();t--;)e=this._items.getItem(t),h=parseFloat(e.fillHeight()),i+=e.$_fillHeight=isNaN(h)?0:h;return this._fillHeights=i},setFillHeights:function(t){this._measuredFillHeights=t},clip:function(t){this.getClientRect(this._drawRect||(this._drawRect=new g1)),t.clipRect(this._drawRect)},_doDraw:function(t){},_doDrawHtml:function(){}}),u8=I1("HandleElement",o7,{init:function(t,e,i){this._super(t,i),this._owner=e},owner:function(){return this._owner},$_getGraphics:function(t){var e=this._svg;return e||(e=this._svg=new b7(null,this.container())),!e._svg.parentNode&&this._dom.appendChild(e._svg),e.getGraphics(t)},propertyChanged:function(){this.invalidate()},_doClearHtml:function(){this._svg&&this._svg._svg.parentNode===this._dom&&this._dom.removeChild(this._svg._svg)}}),X3=I1("CellHandle",u8,{init:function(t,e,i){this._super(t,e,i)},cellView:function(){return this._owner},_hoveredChanged:function(){this.invalidate(),this._owner.$_handleHoveredChanged?this._owner.$_handleHoveredChanged(this,this.hovered()):this._owner.canHovering()&&this._owner.invalidate()}}),A6=I1("ColumnSortHandle",X3,{init:function(t,e){this._super(t,e,"sortHandle"),this.setClickable(!1)},sortOrder:-1,sortDir:u1(M4,M4.ASCENDING),renderer:null,background:function(){return A6.background},hoveredBackground:function(){return A6.hoveredBackground},border:function(){return A6.border},emptyBorder:function(){return A6.emptyBorder},hoveredBorder:function(){return A6.hoveredBorder},_doDraw:function(t){this._renderer&&this._renderer.draw(t,this.clientRect(),this)},_doDrawHtml:function(){this._renderer&&this._renderer.drawHtml(this.clientRect(),this)}},{updateStyles:function(t){this.background=t.shapeColor(),this.hoveredBackground=t.shapeHoveredColor(),this.border=t.shapeBorder(),this.emptyBorder=t.shapeInactiveBorder(),this.hoveredBorder=t.shapeHoveredBorder()},background:null,hoveredBackground:null,border:null,emptyBorder:null,hoveredBorder:null}),r0=I1("ColumnFilterHandle",X3,{init:function(t,e){this._super(t,e,"filterHandle"),this.setClickable(!0)},renderer:null,column:null,background:function(){return r0.background},hoveredBackground:function(){return r0.hoveredBackground},border:function(){return r0.border},emptyBorder:function(){return r0.emptyBorder},hoveredBorder:function(){return r0.hoveredBorder},_doDraw:function(t){this._column&&this._renderer&&this._renderer.draw(t,this.clientRect(),this)},_doDrawHtml:function(){this._renderer&&this._renderer.drawHtml(this.clientRect(),this)}},{updateStyles:function(t){this.background=t.shapeColor(),this.hoveredBackground=t.shapeHoveredColor(),this.border=t.shapeBorder(),this.emptyBorder=t.shapeInactiveBorder(),this.hoveredBorder=t.shapeHoveredBorder()},background:null,hoveredBackground:null,border:null,emptyBorder:null,hoveredBorder:null}),A47=I1("ColumnMenuHandle",X3,{init:function(t,e){this._super(t,e,"menuHandle"),this.setClickable(!0)},renderer:null,column:null,background:function(){return r0.background},hoveredBackground:function(){return r0.hoveredBackground},_doMeasure:function(t){return{width:7,height:13}},_doDraw:function(t){if(this._column){var e=this.clientRect(),i=e.x+e.width/2,n=e.y+(e.height-13+3)/2,s=this.hovered()?this.hoveredBackground():this.background();t.drawCircle(s,null,i,n,1.5),n+=5,t.drawCircle(s,null,i,n,1.5),n+=5,t.drawCircle(s,null,i,n,1.5)}},_doDrawHtml:function(){this._doDraw(this.$_getGraphics(!0,this.clientRect()))}},{updateStyles:function(t){this.background=t.shapeColor(),this.hoveredBackground=t.shapeHoveredColor()},background:null,hoveredBackground:null}),g8=11,w78=new Z1("rgba(170, 170, 170, 0.7)"),G9=I1("HeaderCheckHandle",X3,{init:function(t,e){this._super(t,e,"checkHandle"),this.setClickable(!0)},checked:!1,_doDraw:function(t){var e=this.getClientRect(),i=U1.WHITE;i&&t.drawRectI(i,w78,e),this.$_drawCheck(t,e)},_doDrawHtml:function(){this._doDraw(this.$_getGraphics())},$_drawCheck:function(t,e){var i=g8;if(t.drawBoundsI(null,b17,e.x,e.y,i,i),this.checked()){e.x++;var n=U1.DIMGRAY;$$_drawCheckMark(t,n,e,i-1)}}}),b47=I1("HeaderImageHandle",X3,{init:function(t,e){this._super(t,e,"imageHandle"),this.setMouseEnabled(!1),this.setClickable(!1)},image:null,_doDraw:function(t){var e=this._image;e&&0<e.width&&0<e.height&&t.drawImage(e,0,0,e.width,e.height)},_doDrawHtml:function(){this._doDraw(this.$_getGraphics(!0))}}),m47=I1("DataCellExpandHandle",X3,{init:function(t,e){this._super(t,e,"dataCellExpandHandle"),this.setClickable(!0)},expanded:!1,color:null,fill:null,group:function(){var t=Q2(this.cellView(),e0);return t?t.mergeRoom().group():null},_doDraw:function(t){var e=this.clientRect(),i=this._color,n=this._fill;n&&t.drawRectI(n,null,e),this.expanded()?$$_drawMinusBox(t,e,9,i):$$_drawPlusBox(t,e,9,i)},_doDrawHtml:function(){this._doDraw(this.$_getGraphics(!0))}}),A98=I1("CellRenderer",C5,{init:function(){this._super()}}),E78=I1("CellElementIndex",P1,{init:function(t,e,i){this._super(e,i),this._grid=t},grid:function(){return this._grid},getValue:function(){var t=this.column;if(t instanceof L2){var e=t.dataIndex();if(0<=e){var i=this._grid.getRow(this.rowIndex);if(i)return i.getValue(e)}}}}),m4=I1("CellElement",W2,{init:function(t,e){this._super(t,e),this._grid=null,this._fixed=!1,this._colspan=1,this._recycling=!1,this._index=new E78(null),this._renderRect=new g1,this._textAlign="left",this._lineAlign="middle"},background:U1.WHITE,color:U1.BLACK,font:null,border:null,borderLeft:null,borderTop:null,borderRight:null,borderBottom:null,paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,shapeColor:U1.DIMGRAY,shapeColors:null,shapeInactiveColor:U1.LTGRAY,shapeHoveredColor:U1.DIMGRAY,shapeBorder:null,shapeSize:null,shapeRotate:0,shapeName:null,textAlignment:u1(v1,v1.NEAR),lineAlignment:u1(v1,v1.CENTER),textWrap:u1(D7,D7.NONE),pushed:!1,mouseEntered:!1,pressed:!1,index:null,isFixed:function(){return this._fixed},setIndex:function(t){P1.areEqual(this._index,t)||(this._index.assign(t),this.invalidate())},item:function(){return this._index.getRow(this._grid)},row:function(){return this._index.getRow(this._grid)},setTextAlignment:function(t){t!=this._textAlignment&&(this._textAlign=t77(this._textAlignment=t),this.invalidate())},setLineAlignment:function(t){t!=this._lineAlignment&&(this._lineAlign=F77(this._lineAlignment=t),this.invalidate())},setFont:function(t){var e=this._font;t!=e&&(t&&e&&t.font==e.font&&t.size==e.size&&t.deco==e.deco&&t.line===e.line||(this._font=t,this.invalidate()))},borderWidth:function(){return this._border?this._border.width():0},borderLeftWidth:function(){return this._borderLeft?this._borderLeft.width():0},borderRightWidth:function(){return this._borderRight?this._borderRight.width():0},borderHorzWidth:function(){return(this._borderLeft?this._borderLeft.width():0)+(this._borderRight?this._borderRight.width():0)},borderTopWidth:function(){return this._borderTop?this._borderTop.width():0},borderBottomWidth:function(){return this._borderBottom?this._borderBottom.width():0},borderVertWidth:function(){return(this._borderTop?this._borderTop.width():0)+(this._borderBottom?this._borderBottom.width():0)},paddingHorz:function(){return this._paddingLeft+this._paddingRight},paddingVert:function(){return this._paddingTop+this._paddingBottom},textAlign:function(){return this._textAlign},lineAlign:function(){return this._lineAlign},canHovering:function(t){return!0},setMouseEntered:function(t){t!=this._mouseEntered&&(this._mouseEntered=t,this.canHovering(t)&&(this._doLayoutHandles(),this.invalidate(!1,!0)))},setPressed:function(t){t!=this._pressed&&(this._pressed=t,this.invalidate(!1,!0))},$_handleHoveredChanged:function(t,e){this.canHovering(e)&&(this._doLayoutHandles(),this.invalidate(!1,!0))},$_setHoverIndex:function(t,e){},isDataCell:function(){return!1},canEditable:function(){return!1},canEditableAt:function(t){return this.canEditable()},updateCell:function(t){this._index._grid=this._grid=this.grid(),this.setIndex(t.index()),this.$_clickRect=void 0,this._doPrepareElement(t),this._doPrepareValue(t),this._doUpdateContent(t)},inflatePadding:function(t){return t.x+=this._paddingLeft,t.width-=this._paddingLeft+this._paddingRight,t.y+=this._paddingTop,t.height-=this._paddingTop+this._paddingBottom,t},deflatePadding:function(t){return t.x-=this._paddingLeft,t.width+=this._paddingLeft+this._paddingRight,t.y-=this._paddingTop,t.height+=this._paddingTop+this._paddingBottom,t},deflatePadding2:function(t){return t.x+=this._paddingLeft,t.width-=this._paddingLeft+this._paddingRight,t.y+=this._paddingTop,t.height-=this._paddingTop+this._paddingBottom,t},inflatePadding2:function(t){return t.x-=this._paddingLeft,t.width+=this._paddingLeft+this._paddingRight,t.y-=this._paddingTop,t.height+=this._paddingTop+this._paddingBottom,t},getButtonWidth:function(){return 0},getDelegateParent:function(){for(var t=this,e=this._index.column;e&&(e=e.$_delegateOwner);)e=(t=t.parent())._index.column;return t},measureWidth:function(t,e,i,n){return this._doMeasureWidth(t,e,i,n)},measureHeight:function(t,e){return this._doMeasureHeight(t,e)},ptInHovered:function(t,e){return!0},propertyChanged:function(t,e){this.invalidate()},_doLayoutContent:function(t){this._doLayoutHandles()},_doRender:function(t,e){t.drawTextRect(null,U1.BLACK,"Cell:"+this._index.toString(),e,T2.CENTER)},_doPrepareElement:function(t){var e=t.styles();this.setBackground(e.background()),this.setColor(e.color()),this.setFont(e.font()),this.setBorder(e.border()),this.setBorderLeft(e.borderLeft()),this.setBorderTop(e.borderTop()),this.setBorderRight(e.borderRight()),this.setBorderBottom(e.borderBottom()),this.setPaddingLeft(e.paddingLeft()),this.setPaddingTop(e.paddingTop()),this.setPaddingRight(e.paddingRight()),this.setPaddingBottom(e.paddingBottom()),this.setShapeColor(e.shapeColor()),this.setShapeColors(e.shapeColors()),this.setShapeInactiveColor(e.shapeInactiveColor()),this.setShapeHoveredColor(e.shapeHoveredColor()),this.setShapeBorder(e.shapeBorder()),this.setShapeSize(e.shapeSize()),this.setShapeRotate(e.shapeRotate()),this.setShapeName(e.shapeName()),this.setTextAlignment(e.textAlignment()),this.setLineAlignment(e.lineAlignment()),this.setTextWrap(e.textWrap()),this._textDeco=e.textDecoration()},_doPrepareValue:function(t){},_doUpdateContent:function(t){},_doLayoutHandles:function(){},_drawBorders:function(t,e){W2.drawBorders(this,t,e)},_drawHtmlBorders:function(){W2.drawHtmlBorders(this)},_getRenderRect:function(t){var e=this._renderRect,i=this._borderLeft?Y1((this._borderLeft.width()+1)/2):0,n=this._borderTop?Y1((this._borderTop.width()+1)/2):0;return t?e.set(t.x+i,t.y+n,t.width-i-(this._borderRight?Y1((this._borderRight.width()+1)/2):0),t.height-n-(this._borderBottom?Y1((this._borderBottom.width()+1)/2):0)):e.set(i,n,this.width()-i-(this._borderRight?Y1((this._borderRight.width()+1)/2):0),this.height()-n-(this._borderBottom?Y1((this._borderBottom.width()+1)/2):0)),e},_renderText:function(t,e,i,n){this._renderTextBounds(t,e,i,n.x,n.y,n.width,n.height)},_renderTextBounds:function(t,e,i,n,s,r,o){if(this._dom){var a=this.$_prepareSpan();w1.renderTextBounds(a,this._font,i,e,n,s,r,o,this._textAlign,this._lineAlign,this._textWrap)}else switch(this._textWrap){case D7.EXPLICIT:t.drawTextBoundsExplicit(this._font,i,e,n,s,r,o,this._textAlign,this._lineAlign);break;case D7.NORMAL:t.drawTextBoundsWrap(this._font,i,e,n,s,r,o,this._textAlign,this._lineAlign);break;default:t.drawTextBounds(this._font,i,e,n,s,r,o,this._textAlign,this._lineAlign)}},_renderText2:function(t,e,i,n,s,r,o,a){this._renderTextBounds2(t,e,i,n,s.x,s.y,s.width,s.height,r,o,a)},_renderTextBounds2:function(t,e,i,n,s,r,o,a,h,l,u){if(this._dom){var d=this.$_prepareSpan();w1.renderTextBounds(d,i,n,e,s,r,o,a,h,l,u)}else switch(u){case D7.EXPLICIT:t.drawTextBoundsExplicit(i,n,e,s,r,o,a,h,l);break;case D7.NORMAL:t.drawTextBoundsWrap(i,n,e,s,r,o,a,h,l);break;default:t.drawTextBounds(i,n,e,s,r,o,a,h,l)}},_renderTextEx:function(t,e,i,n,s,r,o,a){this._renderTextBoundsEx(t,e,i,n,s.x,s.y,s.width,s.height,r,o,a)},_renderTextBoundsEx:function(t,e,i,n,s,r,o,a,h,l,u){if(this._dom)t=t,w1.renderTextBounds(t,i,n,e,s,r,o,a,h,l,u);else switch(u){case D7.EXPLICIT:t.drawTextBoundsExplicit(i,n,e,s,r,o,a,h,l);break;case D7.NORMAL:t.drawTextBoundsWrap(i,n,e,s,r,o,a,h,l);break;default:t.drawTextBounds(i,n,e,s,r,o,a,h,l)}},_calcTextRect:function(t,e,i,n,s,r,o){if(this._dom){var a=this.container().$_textMeasurer;return w1.calcTextBounds(a,this._font,i,n,s,r,o,this._textAlign,this._lineAlign,this._textWrap)}switch(this._textWrap){case D7.EXPLICIT:return t.getExplicitTextRect(e,i,n,s,r,o,this._textAlign,this._lineAlign);case D7.NORMAL:return t.getWrapTextRect(e,i,n,s,r,o,this._textAlign,this._lineAlign);default:return t.getTextRect(e,i,n,s,r,o,this._textAlign,this._lineAlign)}},_calcTextRectEx:function(t,e,i,n,s,r,o,a,h,l){if(this._dom){var u=this.container().$_textMeasurer;return w1.calcTextBounds(u,e,i,n,s,r,o,a,h,l)}switch(l){case D7.EXPLICIT:return t.getExplicitTextRect(e,i,n,s,r,o,a,h);case D7.NORMAL:return t.getWrapTextRect(e,i,n,s,r,o,a,h);default:return t.getTextRect(e,i,n,s,r,o,a,h)}},_doMeasureWidth:function(t,e,i,n){return this._doMeasure(t,i,n).width},_doMeasureHeight:function(t,e,i,n){},_measureText:function(t,e,i){var n=this.container().measureTextRect(this._font,t,0,0,e,i,this._textAlign,this._lineAlign,this._textWrap);return{width:n.width,height:n.height}},$_setSelected:function(t,e){this._selected==t&&X97(e,this._selRanges)||(this._selected=t,this._selRanges=e,this.invalidate(!1,!0))}}),M9=I1("CellMenuElement",W2,{init:function(t,e){this._super(t),this._owner=e,this._grid=null},background:null,color:null,hoveredColor:null,owner:function(){return this._owner},setColor:function(t){t!=this._color&&(this._color=t,this._stroke=t?new Z1(t.color(),2):null)},setHoveredColor:function(t){t!=this._hoveredColor&&(this._hoveredColor=t,this._hoveredStroke=t?new Z1(t.color(),2):null)},_doMeasure:function(t){return{width:11,height:11}},_doRender:function(t,e){var i,n,s,r=this._background,o=this._hovered?this._hoveredStroke:this._stroke;r&&t.drawRectI(r,null,e),o&&(i=e.y+(e.height-10)/2,n=Math.min(9,e.width),s=e.x+(e.width-n)/2,i+=1,t.drawHLine(o,i,s,s+n),i+=3.5,t.drawHLine(o,i,s,s+n),i+=3.5,t.drawHLine(o,i,s,s+n))},_doRenderHtml:function(t){this._doDraw(this.$_getGraphics(!0,t),t)},_hoveredChanged:function(){this.invalidate()},propertyChanged:function(){this.invalidate()}}),O7=I1("GroupCellElement",m4,{init:function(t,e){this._super(t,e),this._cells={}},focused:!1,group:function(){var t=this._index.column;return t instanceof O1?t:null},findCell:function(t){var e,i,n;for(e=0,i=this.childCount();e<i;e++)if((n=this.getChild(e)).visible()){if(n.index().column===t)return n;if(n instanceof O7&&(n=n.findCell(t)))return n}return null},getDisplayIndex:function(t){var e=this.getVisibleChildren();return e&&0<e.length?(this.group().vertical()?e.sort(function(t,e){return t.y()-e.y()}):e.sort(function(t,e){return t.x()-e.x()}),e.indexOf(t)):-1},getVisibleChild:function(t){var e=this.getVisibleChildren();return e&&0<=t&&t<e.length?(this.group().vertical()?e.sort(function(t,e){return t.y()-e.y()}):e.sort(function(t,e){return t.x()-e.x()}),e[t]):null},getCellBounds:function(t,e){var i=this.index().column,n=t.index().column.group(),s=t;for(e?e.copy(t.bounds()):e=t.bounds();n&&n!=i;)s=s.parent(),e.x+=s.x(),e.y+=s.y(),n=n.group();return e},$_getChild:function(t,e,i,n){var s,r,o,a;for(s=0,r=t.childCount();s<r;s++){if(o=t.getChild(s),n&&o instanceof O7&&(a=this.$_getChild(o,e-o.x(),i-o.y(),n)))return a;if(o.containsInBounds(e,i))return o}return null},getCellAt:function(t,e,i){return this.$_getChild(this,t,e,i)},updateCell:function(t){this._super(t),this._doUpdateGroup(t.index().column)},_doMeasure:function(t,e,i){return new J2(e,t.header().minHeight())},_doRender:function(t,e){this._needRender()&&(t.drawRect(this._background,null,e),this._renderCell(t,e),W2.drawBorders(this,t,e))},_doRenderHtml:function(t){if(this._needRender()){var e=this._background;c4?this.$_setCssFill(e):this._css.background=e?e.css():"",this._renderCell(null,t),W2.drawHtmlBorders(this)}},_doLayoutContent:function(t){var e=t.grid();e.columnLayoutChanged()&&(this.clear(),this._cells={}),this._prepareCells(t,e),this._layoutCells(t,e)},$_clearSelections:function(){var t,e,i;for(t=0,e=this.childCount();t<e;t++)(i=this.getChild(t)).visible()&&(i.$_setSelected(!1),i instanceof O7&&i.$_clearSelections())},$_setSelections:function(t,e){var i,n,s,r,o,a=t.length;for(i=0,s=this.childCount();i<s;i++)if((r=this.getChild(i)).visible()){if(e)r.$_setSelected(P1.areEqual(t[0]._startIndex,r._index));else{for(o=!1,n=a;n--;)if(t[n].contains(r._index)){o=!0;break}r.$_setSelected(o)}r instanceof O7&&r.$_setSelections(t,e)}},_needRender:function(){return this.childCount()<=0},_renderCell:function(t,e){},_doUpdateGroup:function(t){},_getCell:function(t){return this._cells[t.$_hash]},$_setCell:function(t,e){this._cells[t.$_hash]=e},_prepareCells:function(t){},_layoutCells:function(t){}},{getRootOf:function(t){var e,i=Q2(t.parent(),O7);if(!i)return null;for(;i;){if(!(e=Q2(i.parent(),O7)))return i;i=e}return null}}),y3=I1("ValueCellElement",m4,{init:function(t,e){this._super(t,e),this._numberFormatter=null,this._datetimeWriter=null,this._booleanFormatter=null,this._textFormatter=null},focused:!1,deleted:!1,text:null,prefix:null,suffix:null,line:null,hoveredBackground:null,hoveredColor:null,selectedBackground:U1.WHITE,selectedColor:U1.BLACK,shapeSelectedColor:null,shapeSelectedBorder:null,numberFormat:null,datetimeFormat:null,booleanFormat:null,textFormat:null,setFocused:function(t){t!=this._focused&&(this._focused=t,this.invalidate(!1,!0))},setNumberFormat:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?new W7(t):null,this.invalidate())},setDatetimeFormat:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?new M7(t):null,this.invalidate())},setBooleanFormat:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?new v3(t):null,this.invalidate())},setTextFormat:function(t){t!=this._textFormat&&(this._textFormat=t,this._textFormatter=t?new f77(t):null,this.invalidate())},numberFormatter:function(){return this._numberFormatter},booleanFormatter:function(){return this._boolFormatter},datetimeWriter:function(){return this._datetimeWriter||M7.Default},textFormatter:function(){return this._textFormatter},selected:function(){return this._selected},animate:function(t){},setBorderRight:function(t){this._grid.$_hideBorders&&this._index.column.$_last&&(t=null),this._super(t)},_doPrepareElement:function(t){this._super(t);var e=t.styles();this.setHoveredBackground(e.hoveredBackground()),this.setHoveredColor(e.hoveredColor()),this.setSelectedBackground(e.selectedBackground()),this.setLine(e.line()),this.setSelectedColor(e.selectedColor()),this.setShapeSelectedColor(e.shapeSelectedColor()),this.setShapeSelectedBorder(e.shapeSelectedBorder()),this.setNumberFormat(e.numberFormat()),this.setDatetimeFormat(e.datetimeFormat()),this.setBooleanFormat(e.booleanFormat()),this.setTextFormat(e.textFormat()),this.setPrefix(e.prefix()),this.setSuffix(e.suffix())},$_prepareSummary:function(t){this._value=t.value();var e="",i=null,n=this._value;n instanceof Date?e=this._datetimeWriter?this._datetimeWriter.getText(n):String(n):(n=Number(n),isNaN(n)?(e=t.displayText(),this._textFormatter&&e&&(e=this._textFormatter.format(e))):e=this._numberFormatter?this._numberFormatter.format(n):String(n)),(i=this.prefix())&&(e=i+e),(i=this.suffix())&&(e+=i),this.setText(e),this._error=t.error(),this._errorDetail=t.errorDetail()}}),r8=I1("SelectableCellElement",m4,{init:function(t,e){this._super(t,e)},hoveredBackground:U1.WHITE,hoveredColor:U1.BLACK,selectedBackground:U1.WHITE,selectedColor:U1.BLACK,selected:!1,_doPrepareElement:function(t){this._super(t);var e=t.styles();this.setHoveredBackground(e.hoveredBackground()),this.setHoveredColor(e.hoveredColor()),this.setSelectedBackground(e.selectedBackground()),this.setSelectedColor(e.selectedColor())}}),$$_HCE_RECT=new g1,x7=I1("HeaderCellElement",r8,{init:function(t){this._super(t,"headerCellView"),this._menuHandle=new A47(t,this),this._menuHandle.setVisible(!1),this.addElement(this._menuHandle),this._sortHandle=new A6(t,this),this._sortHandle.setVisible(!1),this.addElement(this._sortHandle),this._filterHandle=new r0(t,this),this._filterHandle.setVisible(!1),this.addElement(this._filterHandle),this._checkHandle=null,this._imageHandle=null,this._column=null,this._handleWidth=0,this._sortOrderWidth=0,this._sortOrder=0,this._sortOrderLeft=0,this.setClickable(!0)},borderLeftSize:null,borderTopSize:null,borderRightSize:null,borderBottomSize:null,subFont:null,subColor:null,subHoveredColor:null,subSelectedColor:null,subTextWrap:null,subTextAlignment:null,subLineAlignment:null,focused:!1,text:null,subText:null,subTextGap:1,showHandles:!0,sortOrderVisible:!0,checkLocation:u1(e2,e2.NONE),imageLocation:u1(e2,e2.NONE),subTextLocation:u1(s4,s4.BOTTOM),imageList:null,imageIndex:-1,imageUrl:null,imageOffset:0,itemOffset:2,itemGap:2,handleOffset:2,handleGap:1,menuWidth:7,checked:!1,setSubFont:function(t){var e=this._subFont;t!=e&&(t&&e&&t.font==e.font&&t.size==e.size&&t.deco==e.deco&&t.line===e.line||(this._subFont=t,this.invalidate()))},setSubTextAlignment:function(t){t!=this._subTextAlignment&&(this._subTextAlign=t77(this._subTextAlignment=t),this.invalidate())},setSubLineAlignment:function(t){t!=this._subLineAlignment&&(this._subLineAlign=F77(this._subLineAlignment=t),this.invalidate())},setSortOrderVisible:function(t){t!=this._sortOrderVisible&&(this._sortOrderVisible=t,this._doLayoutHandles(),this.invalidate())},setFocused:function(t){t!=this._focused&&(this._focused=t,this._doLayoutHandles(),this.invalidate())},column:function(){return this.index().column},hovered:function(){return this._mouseEntered||this._filterHandle.hovered()||this._sortHandle.hovered()},setBorderRight:function(t){this._grid.$_hideBorders&&this._index.column.$_last&&(t=null),this._super(t)},_doClearHtml:function(){this._super(),this._span2&&this._span2.parentNode===this._dom&&this._dom.removeChild(this._span2),this._span3&&this._span3.parentNode===this._dom&&this._dom.removeChild(this._span3)},$_prepareSpan2:function(){return this._span2||(this._span2=document.createElement("span"),this._span2.style.position="absolute"),!this._span2.parentNode&&this._dom.appendChild(this._span2),this._span2},$_prepareSpan3:function(){return this._span3||(this._span3=document.createElement("span"),this._span3.style.position="absolute"),!this._span3.parentNode&&this._dom.appendChild(this._span3),this._span3},_doPrepareElement:function(t){this._super(t);var e=t.styles(),i=t.subStyles();this.setBorderLeftSize(e.borderLeftSize()),this.setBorderTopSize(e.borderTopSize()),this.setBorderRightSize(e.borderRightSize()),this.setBorderBottomSize(e.borderBottomSize()),this.setSubFont(i.font()),this.setSubColor(i.color()),this.setSubHoveredColor(i.hoveredColor()),this.setSubSelectedColor(i.selectedColor()),this.setSubTextAlignment(i.textAlignment()),this.setSubLineAlignment(i.lineAlignment()),this.setSubTextWrap(i.textWrap()),this.setSubText(t.subText()),this.setSubTextGap(t.subTextGap()),this.setSubTextLocation(t.subTextLocation()),this.setItemOffset(t.itemOffset()),this.setItemGap(t.itemGap()),this.setImageList(t.imageList()),this.setImageIndex(t.imageIndex()),this.setImageUrl(t.imageUrl()),this.setImageOffset(t.imageOffset()),this.setCheckLocation(t.checkLocation()),this.setImageLocation(t.imageLocation()),this.setChecked(t.checked()),this.setHandleOffset(t.handleOffset()),this.setHandleGap(t.handleGap()),this.setMenuWidth(t.menuWidth()),this._column=this.index().column},_doPrepareValue:function(t){this._super(t),this.setText(t.text()),this.setSortOrderVisible(t.sortOrderVisible())},_doLayoutHandles:function(){var t,e,i,n,s,r,o,a,h,l,u=this.grid(),d=this._column;u&&(t=u.operateOptions(),e=d.header().hasMenu(),i=this.$_canFilterHandleVisible(u,d),n=this.$_canSortHandleVisible(t,d),this._handleWidth=0,this._sortOrderWidth=0,(e||i||n)&&(r=(s=this._getRenderRect(null)).right()-this._handleOffset,o=s.y,a=s.height),this._menuHandle.setVisible(e),e&&(h=this._menuWidth,this._menuHandle.setColumn(d),this._menuHandle.setBounds(r-h,o,h,a),this._menuHandle.invalidate(),r-=h+=this._handleGap,this._handleWidth+=h),this._filterHandle.setVisible(i),i&&(h=12,this._filterHandle.setRenderer(t.$_filterHandleRenderer()),this._filterHandle.setColumn(d),this._filterHandle.setBounds(r-h,o,h,a),this._filterHandle.invalidate(),r-=h+=this._handleGap,this._handleWidth+=h),this._sortHandle.setVisible(n),n&&(this._sortHandle.setSortOrder(d.sortOrder()),this._sortHandle.setSortDir(d.sortDirection()),this._sortHandle.setRenderer(t.$_sortHandleRenderer()),l=h=9,this._sortOrderVisible&&t.sortStyle()===P7.INCLUSIVE&&1<u.$_sortFieldCount&&0<=d.sortOrder()&&(this._sortOrder=d.sortOrder()+1,this._sortOrderWidth=this.container().measureText(u.$_sortOrderFont,this._sortOrder),l+=this._sortOrderWidth+1),this._sortHandle.setBounds(r-l,o,h,a),this._sortOrderLeft=r-l+h+1,this._sortHandle.invalidate(),this._handleWidth+=l+this._handleGap),this._handleWidth+=0<this._handleWidth?6:0)},$_renderEdgedItems:function(t,e){var i,n,s,r,o,a,h=this._checkLocation,l=this._imageLocation,u=this._checkHandle,d=this._imageHandle,c=0,_=g8;switch(h){case e2.LEFT_SIDE:c=1;break;case e2.RIGHT_SIDE:c=2;break;case e2.TOP_SIDE:c=3;break;case e2.BOTTOM_SIDE:c=4}if(c){switch(u||(u=this._checkHandle=new G9(this._dom,this),this.addElement(u)),c){case 1:e.leftBy(this._itemOffset),u.setBoundsI(e.x,e.y+(e.height-_)/2,_,_),e.leftBy(_);break;case 2:e.rightBy(-this._itemOffset),u.setBoundsI(e.right()-_,e.y+(e.height-_)/2,_,_),e.rightBy(-_);break;case 3:e.topBy(this._itemOffset),u.setBoundsI(e.x+(e.width-_)/2,e.y,_,_),e.topBy(_);break;case 4:e.bottomBy(-this._itemOffset),u.setBoundsI(e.x+(e.width-_)/2,e.bottom()-_,_,_),e.bottomBy(-_)}u.setChecked(this._checked),u.setVisible(!0)}if(l!=e2.NONE)if(d||(d=this._imageHandle=new b47(this._dom,this),this.addElement(d)),r=this.grid(),(i=this._imageUrl?r.getImage(this._imageUrl):r.header().getImage(this._imageIndex))&&0<(n=i.width)&&0<(s=i.height)){switch(o=!1,a=this._imageOffset,l){case e2.LEFT_SIDE:1==c?e.leftBy(this._itemGap):e.leftBy(this._itemOffset),d.setBoundsI(e.x,e.y+(e.height-s)/2+.5+a,n,s),e.leftBy(n),o=!0;break;case e2.RIGHT_SIDE:2==c?e.rightBy(-this._itemGap):e.rightBy(-this._itemOffset),d.setBoundsI(e.right()-n,e.y+(e.height-s)/2+.5+a,n,s),e.rightBy(-n),o=!0;break;case e2.TOP_SIDE:3==c?e.topBy(this._itemGap):e.topBy(this._itemOffset),d.setBoundsI(e.x+(e.width-n)/2+a,e.y,n,s),e.topBy(s),o=!0;break;case e2.BOTTOM_SIDE:4==c?e.bottomBy(-this._itemGap):e.bottomBy(-this._itemOffset),d.setBoundsI(e.x+(e.width-n)/2+a,e.bottom()-s,n,s),e.bottomBy(-s),o=!0}d.setImage(i),d.setVisible(o)}else i=null;return i},$_renderCenteredItems:function(t,e,i){var n,s,r,o,a,h=this._checkLocation,l=this._imageLocation,u=this._checkHandle,d=this._imageHandle,c=g8;if(i?(r=i.width,o=i.height):l=e2.NONE,h==e2.CENTER){if(u||(u=this._checkHandle=new G9(this._dom,this),this.addElement(u)),l==e2.NONE||d.visible())e.x+=(e.width-c)/2,e.y+=(e.height-c)/2;else{switch(d||(d=this._imageHandle=new b47(this._dom,this),this.addElement(d)),a=e.clone(),l){case e2.RIGHT:case e2.CENTER:e.x+=(e.width-c-r-this._itemGap)/2,e.y+=(e.height-c)/2,n=e.x+c+this._itemGap,s=a.y+(a.height-o)/2+.5;break;case e2.LEFT:e.x+=(e.width-c-r-this._itemGap)/2+r+this._itemGap,e.y+=(e.height-c)/2,n=e.x-this._itemGap-r,s=a.y+(a.height-o)/2+.5;break;case e2.TOP:e.x+=(e.width-c)/2,e.y+=(e.height-c-o-this._itemGap)/2+o+this._itemGap,n=a.x+(a.width-r)/2,s=e.y-this._itemGap-o;break;case e2.BOTTOM:e.x+=(e.width-c)/2,e.y+=(e.height-c-o-this._itemGap)/2,n=a.x+(a.width-r)/2,s=e.y+c+this._itemGap}d.setBoundsI(n,s,r,o),d.setVisible(!0)}return u.setChecked(this._checked),u.setVisible(!0),u.setBoundsI(e.x,e.y,c,c),!0}if(l!=e2.CENTER)return!1;if(h==e2.NONE||u&&u.visible())e.x+=(e.width-r)/2,e.y+=(e.height-o)/2;else{switch(u||(u=this._checkHandle=new G9(this._dom,this),this.addElement(u)),a=e.clone(),h){case e2.LEFT:case e2.CENTER:e.x+=(e.width-r-c-this._itemGap)/2+r+this._itemGap,e.y+=(e.height-o)/2,n=e.x-this._itemGap-c,s=a.y+(a.height-c)/2;break;case e2.RIGHT:e.x+=(e.width-r-c-this._itemGap)/2,e.y+=(e.height-o)/2,n=e.x+r+this._itemGap,s=a.y+(a.height-c)/2;break;case e2.TOP:e.x+=(e.width-r)/2,e.y+=(e.height-o-c-this._itemGap)/2+c+this._itemGap,n=a.x+(a.width-c)/2,s=e.y-this._itemGap-c;break;case e2.BOTTOM:e.x+=(e.width-r)/2,e.y+=(e.height-o-c-this._itemGap)/2,n=a.x+(a.width-c)/2,s=e.y+c+this._itemGap;break;case e2.NONE:default:e.x+=(e.width-r)/2,e.y+=(e.height-o)/2}u.setChecked(this._checked),u.setVisible(!0),u.setBoundsI(n,s,c,c)}return d.setBoundsI(e.x,e.y+.5,r,o),d.setVisible(!0),!0},$_calcTextRect:function(t,e,i){return this._calcTextRectEx(t,i.font,i.text,e.x,e.y,e.width,e.height,i.align,i.valign,i.wrap)},$_renderText:function(t,e,i){this._renderTextEx(t||this.$_prepareSpan(),i.text,i.font,i.fill,e,i.align,i.valign,i.wrap)},$_renderSubText:function(t,e,i){this._renderTextEx(t||this.$_prepareSpan2(),i.text,i.font,i.fill,e,i.align,i.valign,i.wrap)},$_renderOrderText:function(t,e,i,n,s,r,o,a,h,l){this._renderTextBoundsEx(t||this.$_prepareSpan3(),n,e,i,s,r,o,a,h,l)},$_renderTexts:function(t,e,i,n,s){var r,o,a,h,l,u,d,c,_,f,g,m,p,w,v,C,I,R,y,x,E,b,S,T,D,k,A,$,V=this._checkHandle,L=this._imageHandle,B=V&&V.visible()?e2.NONE:this._checkLocation,O=i&&!L.visible()?this._imageLocation:e2.NONE,N=this._text,P=this._subText;switch(N&&(n&&(a=this._hoveredColor),!a&&s&&(a=this._selectedColor),!a&&(a=this._color),r={text:N,font:this._font,fill:a,wrap:this._textWrap,align:this._textAlign,valign:this._lineAlign}),P&&(a=null,n&&(a=this._subHoveredColor),!a&&s&&(a=this._subSelectedColor),!a&&(a=this._subColor),o={text:P,font:this._subFont,fill:a,wrap:this._subTextWrap,align:this._textAlign,valign:this._lineAlign}),h=this._itemGap,l=this._subTextGap,u=i?i.width:0,d=i?i.height:0,c=g8,_=f=g=m=p=w=v=C=0,B){case e2.LEFT:_=c+h;break;case e2.RIGHT:f=c+h;break;case e2.TOP:g=c+h;break;case e2.BOTTOM:m=c+h}switch(O){case e2.LEFT:p=u+h;break;case e2.RIGHT:w=u+h;break;case e2.TOP:v=d+h;break;case e2.BOTTOM:C=d+h}if($=this._imageOffset,(N||P)&&(e.leftBy(_+p),e.rightBy(-f-w),e.topBy(g+v),e.bottomBy(-m-C),I=N&&this.$_calcTextRect(t,e,r),R=P&&this.$_calcTextRect(t,e,o)),N&&P)switch(this._subTextLocation){case s4.BOTTOM:if((x=I.height+l+R.height)<=e.height){switch(r.valign){case"middle":x=e.y+(e.height-x)/2;break;case"bottom":x=e.bottom()-R.height-l-I.height;break;default:x=e.y}I.y=x,this.$_renderText(t,I,r),R.y=I.bottom()+l,this.$_renderSubText(t,R,o),S=(E=I).height+R.height,y=Math.min(I.x,R.x),b=Math.max(I.right(),R.right())-y}else b=I.height<=e.height?(I.y=e.y,this.$_renderText(t,I,r),R.y=I.bottom()+l,this.$_renderSubText(t,R,o),S=(E=e).height,y=Math.min(I.x,R.x),Math.max(I.right(),R.right())-y):(this.$_renderText(t,e,r),R=null,S=(E=e).height,y=I.x,I.width);(_||f)&&(D=E.y+(S-c)/2),(p||w)&&(A=E.y+(S-d)/2+.5+$),(g||m)&&(T=y+(b-c)/2),(v||C)&&(k=y+(b-u)/2+$);break;case s4.TOP:if((x=I.height+l+R.height)<=e.height){switch(r.valign){case"middle":x=e.y+(e.height-x)/2;break;case"bottom":x=e.bottom()-R.height-l-I.height;break;default:x=e.y}R.y=x,this.$_renderText(t,R,o),I.y=R.bottom()+l,this.$_renderSubText(t,I,r),E=e,S=I.height+R.height,y=Math.min(I.x,R.x),b=Math.max(I.right(),R.right())-y}else b=I.height<=e.height?(I.y=e.bottom()-I.height,this.$_renderText(t,I,r),R.y=I.y-l-R.height,this.$_renderSubText(t,R,o),E=I,S=e.height,y=Math.min(I.x,R.x),Math.max(I.right(),R.right())-y):(this.$_renderText(t,I,r),R=null,S=(E=e).height,y=I.x,I.width);(_||f)&&(D=E.y+(S-c)/2),(p||w)&&(A=E.y+(S-d)/2+.5+$),(g||m)&&(T=y+(b-c)/2),(v||C)&&(k=y+(b-u)/2+$);break;case s4.RIGHT:if((y=I.width+l+R.width)<=e.width){switch(r.align){case"center":y=e.x+(e.width-y)/2;break;case"right":y=e.right()-R.width-l-I.width;break;default:y=e.x}I.x=y,this.$_renderText(t,I,r),R.x=I.right()+l,this.$_renderSubText(t,R,o),b=(E=I).width+R.width,x=Math.min(I.y,R.y),S=Math.max(I.bottom(),R.bottom())-x}else I.width<=e.width?(I.x=e.x,this.$_renderText(t,I,r),R.x=I.right()+l,this.$_renderSubText(t,R,o),b=(E=e).width,x=Math.min(I.y,R.y),S=Math.max(I.bottom(),R.bottom())-x):(this.$_renderText(t,e,r),b=(E=e).width,x=I.y,S=I.height,R=null);(_||f)&&(D=x+(S-c)/2),(p||w)&&(A=x+(S-d)/2+.5+$),(g||m)&&(T=E.x+(b-c)/2),(v||C)&&(k=E.x+(b-u)/2+$);break;case s4.LEFT:if((y=I.width+l+R.width)<=e.width){switch(r.align){case"center":y=e.x+(e.width-y)/2;break;case"right":y=e.right()-R.width-l-I.width;break;default:y=e.x}R.x=y,this.$_renderSubText(t,R,o),I.x=R.right()+l,this.$_renderText(t,I,r),E=R,x=Math.min(I.y,R.y),S=Math.max(I.bottom(),R.bottom())-x,b=I.width+R.width}else I.width<=e.width?(I.x=e.right()-I.width,this.$_renderText(t,I,r),R.x=I.x-l-R.width,this.$_renderSubText(t,R,o),b=(E=e).width,x=Math.min(I.y,R.y),S=Math.max(I.bottom(),R.bottom())-x):(this.$_renderText(t,I,r),b=(E=e).width,x=I.y,S=I.height,R=null);(_||f)&&(D=x+(S-c)/2),(p||w)&&(A=x+(S-d)/2+.5+$),(g||m)&&(T=E.x+(b-c)/2),(v||C)&&(k=E.x+(b-u)/2+$);break;default:this.$_renderText(t,e,r)}else(N||P)&&(e=N?(this.$_renderText(t,e,r),I):(this.$_renderSubText(t,e,o),R),(_||f)&&(D=e.y+(e.height-c)/2),(p||w)&&(A=e.y+(e.height-d)/2+.5+$),(g||m)&&(T=e.x+(e.width-c)/2),(v||C)&&(k=e.x+(e.width-u)/2+$));(_||p)&&(y=I&&R?Math.min(I.x,R.x):I?I.x:R?R.x:e.x,_&&p?T=(k=y-h-u)-h-c:_?T=y-h-c:p&&(k=y-h-u)),f+w&&(y=I&&R?Math.max(I.right(),R.right()):I?I.right():R?R.right():e.right(),f&&w?k=(T=y+h)+c+h:f?T=y+h:w&&(k=y+h)),(g||v)&&(x=I&&R?Math.min(I.y,R.y):I?I.y:R?R.y:e.y,g&&v?D=(A=x-h-d)-h-c:g?D=x-h-c:v&&(A=x-h-d)),(m||C)&&(x=I&&R?Math.max(I.bottom(),R.bottom()):I?I.bottom():R?R.bottom():e.bottom(),m&&C?A=(D=x+h)+c+h:m?D=x+h:C&&(A=x+h)),0<_+f+g+m&&(V||(V=this._checkHandle=new G9(this._dom,this),this.addElement(V)),V.setChecked(this._checked),V.setVisible(!0),V.setBoundsI(T,D,c,c)),0<p+w+v+C&&(L||(L=this._imageHandle=new b47(this._dom,this),this.addElement(L)),L.setImage(i),L.setVisible(!0),L.setBoundsI(k,A,u,d))},$_renderContents:function(t,e,i,n){this.text(),this.subText(),this._checkLocation,this._imageLocation;var s,r,o,a=this._checkHandle,h=this._imageHandle;a&&a.setVisible(!1),h&&h.setVisible(!1),e.width-=this._handleWidth,this.deflatePadding2(e),0<e.width&&(s=e.clone(),r=this.$_renderEdgedItems(t,s),this.$_renderCenteredItems(t,s,r)||this.$_renderTexts(t,s,r,i,n)),this._sortOrderWidth&&(o=this._column,this.$_renderOrderText(t,o.$_grid.$_sortOrderFont,o.$_grid.$_sortOrderColor,this._sortOrder,this._sortOrderLeft,e.y,1e3,e.height,"left","middle")),this.inflatePadding2(e),e.width+=this._handleWidth},_doRender:function(t,e){var i,n,s=null,r=this.grid().rowCount(),o=this.hovered();o&&(s=this.hoveredBackground()),!s&&(i=0<r&&(this.focused()||this.selected()))&&(s=this.selectedBackground()),s||(s=this.background()),s&&t.drawRect(s,null,e),n=this._getRenderRect(e),this.$_renderContents(t,n,o,i),W2.drawSizedBorders(this,t,e)},_doRenderHtml:function(t){var e,i=null,n=this.grid().rowCount(),s=this.hovered();s&&(i=this.hoveredBackground()),!i&&(e=0<n&&(this.focused()||this.selected()))&&(i=this.selectedBackground()),i||(i=this.background()),this._css.clip=w1.getClipRect(t),c4?this.$_setCssFill(i):this._css.background=i?i.css():"",t=this._getRenderRect(t),this.$_renderContents(null,t,s,e),W2.drawHtmlBorders(this)},getShowHandles:function(){return this._showHandles},_doMeasureWidth:function(t,e,i,n){var s,r,o,a=this._imageHandle&&this._imageHandle.visible()?this._imageHandle.width():0,h=this._checkHandle&&this._checkHandle.visible()?this._checkHandle.width():0,l=this._imageLocation,u=this._checkLocation,d=e2,c=d.CENTER,_=this._handleWidth+this._sortOrderWidth+this.paddingHorz()+this.borderHorzWidth();return a&&l==c||h&&u==c?a&&l==c&&h&&u==c?_+=a+this._itemGap+h:a&&l==c?(_+=a,d.isHorz(u)?(_+=h,d.isHorzSide(u)?_+=this._itemOffset:_+=this._itemGap):a<h&&(_+=h-a)):(_+=h,d.isHorz(l)?(_+=a,d.isHorzSide(l)?_+=this._itemOffset:_+=this._itemGap):h<a&&(_+=a-h)):(_+=this._measureText(this.text(),i,n).width,(s=this.subText())&&(r=this._subTextLocation)!=s4.NONE&&(o=this._measureText(s,i,n).width,s4.isHorz(r)?_+=o+this._subTextGap:_<o&&(_+=o=_)),h&&a?d.isHorz(u)&&d.isHorz(l)?(_+=h+a,d.isHorzSide(u)&&d.isHorzSide(l)?_+=u==l?this._itemOffset+this._itemGap:this._itemGap+this._itemGap:d.isHorzSide(u)||d.isHorzSide(l)?_+=this._itemOffset+this._itemGap:_+=this._itemGap+this._itemGap):d.isHorz(u)?(_+=h,d.isHorzSide(u)?_+=this._itemOffset:_+=this._itemGap):d.isHorz(l)&&(_+=a,d.isHorzSide(l)?_+=this._itemOffset:_+=this._itemGap):h?d.isHorz(u)?(_+=h,d.isHorzSide(u)?_+=this._itemOffset:_+=this._itemGap):_<h&&(_+=h-_):a&&(d.isHorz(l)?(_+=a,d.isHorzSide(l)?_+=this._itemOffset:_+=this._itemGap):_<a&&(_+=a-_))),_},$_canFilterHandleVisible:function(t,e){var i=e instanceof L2&&this.showHandles()&&e.hasFilters();if(i)switch(e.header().filterHandleVisibility()||t.operateOptions().filterHandleVisibility()){case n0.HIDDEN:i=!1;break;case n0.HOVERED:i=this.hovered()||t.isFilterSelecting(e)}return i},$_canSortHandleVisible:function(t,e){var i=e instanceof L2&&this.showHandles();if(i)switch(e.header().sortHandleVisibility()||t.sortHandleVisibility()){case n0.VISIBLE:i=0<=e.sortOrder();break;case n0.HOVERED:i=this.hovered()&&0<=e.sortOrder();break;case n0.HIDDEN:i=!1;break;case n0.ALWAYS:}return i}}),E6=I1("HeaderGroupCellElement",O7,{init:function(t){this._super(t,"headerGroupCellView")},focused:!1,headerCell:function(){var t=this._getCell(this.group());return t&&t.visible()?t:null},_needRender:function(){return this.$_needRender},_prepareCells:function(t,e){this.$_createCells(this.group(),e)},_layoutCells:function(t,e){var i,n,s,r,o,a,h,l,u=new g1,d=this.group(),c=this.width(),_=this.height(),f=d.visibleCount(),g=d.$_headerColumn,m=!g&&d.childHeadersVisible()&&0<f;if(u.set(0,0,c,_),d.header().visible()&&(i=this._getCell(d),u.height=x3(u.height/(m?d.headerLevel():g?e._rootColumn._headerLevel:1)),i.setRect(u),i.layoutContent(t),g&&(u.y=u.bottom(),u.height=_-u.height)),g&&((i=this._getCell(g)).setRect(u),i.layoutContent(t)),this.$_needRender=!i&&!m,m)if(n=u.height<_?u.bottom():0,d.vertical())for(s=Y1(_/d.headerLevel()),r=0;r<f;r++)o=d.getVisibleItem(r),(i=this._getCell(o))&&(a=0,r==f-1?a=_-n:i instanceof E6?a=s*i.group().headerLevel():a+=s,i.setBounds(0,n,c,a),i.layoutContent(t),n+=a);else for(r=h=0;r<f;r++)o=d.getVisibleItem(r),(i=this._getCell(o))&&(l=r==f-1?c-h:o.displayWidth(),i.setBounds(h,n,l,_-n),i.layoutContent(t),h+=l)},$_createView:function(t,e,i){var n,s=this._getCell(e);return s||(s=e instanceof O1?new E6(this._dom):new x7(this._dom),this.$_setCell(e,s),this.addElement(s)),s.setVisible(!0),n=t.getCell(P1.temp(-1,e)),s.updateCell(n),e instanceof O1&&s.$_createCells(e,i),s},$_createCells:function(t,e){var i,n,s,r,o=e.header(),a=t.visibleCount(),h=t.$_headerColumn,l=!h&&t.childHeadersVisible()&&0<a;if(this.hideAll(),t.header().visible()&&((s=this._getCell(t))||(this.$_setCell(t,s=new x7(this._dom)),this.addElement(s)),s.setVisible(!0),r=o.getCell(P1.temp(-1,t)),s.updateCell(r)),h)this.$_createView(o,h,e);else if(l)for(i=0;i<a;i++)n=t.getVisibleItem(i),this.$_createView(o,n,e)}}),W9=I1("SummaryCellElement",y3,{init:function(t){this._super(t,"summaryCellView"),this._value=NaN,this._error=null,this._errorDetail=null},text:null,column:function(){return this.index().column},value:function(){return this._value},error:function(){return this._error},errorDetail:function(){return this._errorDetail},_doPrepareValue:function(t){this._super(t),this.$_prepareSummary(t)},_doLayoutHandles:function(){},_doRender:function(t,e){var i,n=this.background();n&&t.drawRectI(n,null,e),(i=this.text())&&(this.inflatePadding(e),t.drawTextRect(this._font,this._color,i,e,this._textAlign),this.deflatePadding(e)),W2.drawBorders(this,t,e)},_doRenderHtml:function(t){var e,i,n,s=this.background();c4?this.$_setCssFill(s):this._css.background=s?s.css():"",(e=this.text())&&(i=this.color(),this.inflatePadding(t),n=this.$_prepareSpan(),w1.renderTextBounds(n,this.font(),i,e,t.x,t.y,t.width,t.height,this.textAlign()),this.deflatePadding(t)),W2.drawHtmlBorders(this)},canHovering:function(){return!1}}),J9=I1("SummaryGroupCellElement",O7,{init:function(t){this._super(t,"summaryGroupCellView")},canHovering:function(){return!1},_doUpdateGroup:function(t){this._text=t.header().summary().text()},_prepareCells:function(t){this.$_createCells(this.group())},_layoutCells:function(t,e){var i,n,s,r,o,a,h,l,u,d,c,_=e.header().summary(),f=this.group(),g=f.visibleCount(),m=this.width(),p=this.height(),w=new g1;if(this.$_needRender=!1,i=f.$_summaryColumn)return(n=this._getCell(i)).setVisible(!0),s=_.getCell(P1.temp(-1,i)),n.updateCell(s),w.set(0,0,m,p),n.setRect(w),void n.layoutContent(t);if(!f.childSummariesVisible()||g<1)this.$_needRender=!0;else if(c=f.$_summarySpanned?f.$_summarySpans:null,f.vertical())if(h=w.bottom(),l=Y1(p/f.headerSummaryLevel()),c)for(r=0;r<g;){if(d=f.getVisibleItem(r),i=c[r++],n=this._getCell(i),r==g)o=p-h;else for(0,o=n instanceof J9?l*i.headerSummaryLevel():l;r<g&&(d=c[r])===i;r++)d=f.getVisibleItem(r),r==g-1&&(o=p-h),0;n.setVisible(!0),s=_.getCell(P1.temp(-1,i)),n.updateCell(s),n.setBounds(0,h,m,o),n.layoutContent(t),h+=o}else for(r=0;r<g;r++)i=f.getVisibleItem(r),(n=this._getCell(i))&&(o=0,r==g-1?o=p-h:n instanceof J9?o=l*i.headerSummaryLevel():o+=l,n.setVisible(!0),s=_.getCell(P1.temp(-1,i)),n.updateCell(s),n.setBounds(0,h,m,o),n.layoutContent(t),h+=o);else if(a=0,c)for(r=0;r<g;){if(d=f.getVisibleItem(r),i=c[r++],n=this._getCell(i),r==g)u=m-a;else for(0,u=d.displayWidth();r<g&&(d=c[r])===i;r++)d=f.getVisibleItem(r),r==g-1?u=m-a:u+=d.displayWidth(),0;n.setVisible(!0),s=_.getCell(P1.temp(-1,i)),n.updateCell(s),n.setBounds(a,0,u,p),n.layoutContent(t),a+=u}else for(r=0;r<g;r++)i=f.getVisibleItem(r),(n=this._getCell(i))&&(u=r==g-1?m-a:i.displayWidth(),n.setVisible(!0),s=_.getCell(P1.temp(-1,i)),n.updateCell(s),n.setBounds(a,0,u,p),n.layoutContent(t),a+=u)},_needRender:function(){return this.$_needRender},_renderCell:function(t,e){this._text&&(this.deflatePadding2(e),this._renderText(t,this._text,this._color,e),this.inflatePadding2(e))},$_createCell:function(t){var e;return e=t instanceof O1?new J9(this._dom):new W9(this._dom),this.$_setCell(t,e),this.addElement(e),t instanceof O1&&e.$_createCells(t),e},$_createCells:function(t){var e,i,n,s,r,o=t.visibleCount();if(this.hideAll(),e=t.$_summaryColumn)this._getCell(e)||this.$_createCell(e);else if(t.childSummariesVisible()&&0<o)if(s=t.$_summarySpanned?t.$_summarySpans:null)for(r=null,i=0,n=s.length;i<n;i++)(e=s[i])!=r&&(r=e,this._getCell(e)||this.$_createCell(e));else for(i=0;i<o;i++)e=t.getVisibleItem(i),this._getCell(e)||this.$_createCell(e)}}),y9=I1("FooterCellElement",y3,{init:function(t){this._super(t,"footerCellView"),this._value=NaN,this._error=null,this._errorDetail=null},text:null,column:function(){return this.index().column},value:function(){return this._value},error:function(){return this._error},errorDetail:function(){return this._errorDetail},setBorderRight:function(t){this._grid.$_hideBorders&&this._index.column.$_last&&(t=null),this._super(t)},_doPrepareValue:function(t){this._super(t),this.$_prepareSummary(t)},_doLayoutHandles:function(){},_doRender:function(t,e){var i,n,s=this.background();s&&t.drawRectI(s,null,e),(i=this.text())&&(n=this._getRenderRect(e),this.inflatePadding(n),t.drawTextRect(this._font,this._color,i,n,this._textAlign),this.deflatePadding(n)),W2.drawBorders(this,t,e)},_doRenderHtml:function(t){var e,i,n,s=this._background;c4?this.$_setCssFill(s):this._css.background=s?s.css():"",(e=this.text())&&(i=this.color(),this.inflatePadding(t),n=this.$_prepareSpan(),w1.renderTextBounds(n,this.font(),i,e,t.x,t.y,t.width,t.height,this.textAlign()),this.deflatePadding(t)),W2.drawHtmlBorders(this)},canHovering:function(){return!1}}),c9=I1("FooterGroupCellElement",O7,{init:function(t){this._super(t,"fooerGroupCellView")},canHovering:function(){return!1},_doUpdateGroup:function(t){this._text=t.footer().text()},_prepareCells:function(t){this.$_createCells(this.group())},_layoutCells:function(t,e){var i,n,s,r,o,a,h,l,u,d,c,_=e.footer(),f=this.group(),g=f.visibleCount(),m=this.width(),p=this.height(),w=new g1;if(this.$_needRender=!1,i=f.$_footerColumn)return(n=this._getCell(i)).setVisible(!0),s=_.getCell(P1.temp(-1,i)),n.updateCell(s),w.set(0,0,m,p),n.setRect(w),void n.layoutContent(t);if(!f.childFootersVisible()||g<1)this.$_needRender=!0;else if(c=f.$_footerSpanned?f.$_footerSpans:null,f.vertical())if(h=w.bottom(),l=Y1(p/f.footerLevel()),c)for(r=0;r<g;){if(d=f.getVisibleItem(r),i=c[r++],n=this._getCell(i),r==g)o=p-h;else for(0,o=n instanceof c9?l*i.footerLevel():l;r<g&&(d=c[r])===i;r++)d=f.getVisibleItem(r),r==g-1&&(o=p-h),0;n.setVisible(!0),s=_.getCell(P1.temp(-1,i)),n.updateCell(s),n.setBounds(0,h,m,o),n.layoutContent(t),h+=o}else for(r=0;r<g;r++)i=f.getVisibleItem(r),(n=this._getCell(i))&&(o=0,r==g-1?o=p-h:n instanceof c9?o=l*i.footerLevel():o+=l,n.setVisible(!0),s=_.getCell(P1.temp(-1,i)),n.updateCell(s),n.setBounds(0,h,m,o),n.layoutContent(t),h+=o);else if(a=0,c)for(r=0;r<g;){if(d=f.getVisibleItem(r),i=c[r++],n=this._getCell(i),r==g)u=m-a;else for(0,u=d.displayWidth();r<g&&(d=c[r])===i;r++)d=f.getVisibleItem(r),r==g-1?u=m-a:u+=d.displayWidth(),0;n.setVisible(!0),s=_.getCell(P1.temp(-1,i)),n.updateCell(s),n.setBounds(a,0,u,p),n.layoutContent(t),a+=u}else for(r=0;r<g;r++)i=f.getVisibleItem(r),(n=this._getCell(i))&&(u=r==g-1?m-a:i.displayWidth(),n.setVisible(!0),s=_.getCell(P1.temp(-1,i)),n.updateCell(s),n.setBounds(a,0,u,p),n.layoutContent(t),a+=u)},_needRender:function(){return this.$_needRender},_renderCell:function(t,e){this._text&&(this.deflatePadding2(e),this._renderText(t,this._text,this._color,e),this.inflatePadding2(e))},$_createCell:function(t){var e;return e=t instanceof O1?new c9(this._dom):new y9(this._dom),this.$_setCell(t,e),this.addElement(e),t instanceof O1&&e.$_createCells(t),e},$_createCells:function(t){var e,i,n,s,r,o=t.visibleCount();if(this.hideAll(),e=t.$_footerColumn)this._getCell(e)||this.$_createCell(e);else if(t.childFootersVisible()&&0<o)if(i=t.$_footerSpanned?t.$_footerSpans:null)for(r=null,n=0,s=i.length;n<s;n++)(e=i[n])!=r&&(r=e,this._getCell(e)||this.$_createCell(e));else for(n=0;n<o;n++)e=t.getVisibleItem(n),this._getCell(e)||this.$_createCell(e)}}),b6=I1("GroupFooterCellElement",y3,{init:function(t){this._super(t,"groupFooterCellElement"),this._value=void 0,this._error=null,this._errorDetail=null},text:null,value:function(){return this._value},error:function(){return this._error},errorDetail:function(){return this._errorDetail},_doPrepareValue:function(t){this._super(t),this.$_prepareSummary(t)},_doLayoutHandles:function(){},_doDraw:function(t,e){var i=this._drawRect;e&&t.drawRectI(U1.WHITE,null,i),this._doRender(t,i)},_doRender:function(t,e){var i,n=this.background();n&&t.drawRect(n,null,e),(i=this.text())&&(this.inflatePadding(e),t.drawTextRect(this._font,this._color,i,e,this._textAlign),this.deflatePadding(e)),W2.drawBorders(this,t,e)},_doRenderHtml:function(t){var e,i=this.background();if(this._css.clip=w1.getClipRect(t),c4?this.$_setCssFill(i):this._css.background=i?i.css():"",e=this.text()){this.inflatePadding(t);var n=this.$_prepareSpan();w1.renderTextBounds(n,this._font,this._color,e,t.x,t.y,t.width,t.height,this._textAlign),this.deflatePadding(t)}W2.drawHtmlBorders(this)}}),Y7=I1("GroupFooterGroupCellElement",O7,{init:function(t,e){this._super(t,e||"groupFooterGroupCellView")},layoutTreeContent:function(t){this._layoutTreeCells(t)},_needRender:function(){return this.$_needRender},_prepareCells:function(t,e){this.$_createCells(this.group(),e)},_layoutCells:function(t,e){var i,n,s,r,o,a,h,l,u,d,c,_=this.index().rowIndex,f=this.group(),g=f.visibleCount(),m=this.width(),p=this.height(),w=new g1;if(this.$_needRender=!1,i=f.$_groupFooterColumn)return(n=this._getCell(i)).setVisible(!0),s=this._getModel(e,P1.temp(_,i)),n.updateCell(s),w.set(0,0,m,p),n.setRect(w),void n.layoutContent(t);if(!f.childGroupFootersVisible()||g<1)this.$_needRender=!0;else if(c=f.$_groupFooterSpanned?f.$_groupFooterSpans:null,f.vertical())if(h=w.bottom(),l=Y1(p/f.groupFooterLevel()),c)for(r=0;r<g;){if(d=f.getVisibleItem(r),i=c[r++],n=this._getCell(i),r==g)o=p-h;else for(0,o=n instanceof Y7?l*i.groupFooterLevel():l;r<g&&(d=c[r])===i;r++)d=f.getVisibleItem(r),r==g-1&&(o=p-h),0;n.setVisible(!0),s=this._getModel(e,P1.temp(_,i)),n.updateCell(s),n.setBounds(0,h,m,o),n.layoutContent(t),h+=o}else for(r=0;r<g;r++)i=f.getVisibleItem(r),(n=this._getCell(i))&&(o=0,r==g-1?o=p-h:n instanceof Y7?o=l*i.groupFooterLevel():o+=l,n.setVisible(!0),s=this._getModel(e,P1.temp(_,i)),n.updateCell(s),n.setBounds(0,h,m,o),n.layoutContent(t),h+=o);else if(a=0,c)for(r=0;r<g;){if(d=f.getVisibleItem(r),i=c[r++],n=this._getCell(i),r==g)u=m-a;else for(0,u=d.displayWidth();r<g&&(d=c[r])===i;r++)d=f.getVisibleItem(r),r==g-1?u=m-a:u+=d.displayWidth(),0;n.setVisible(!0),s=this._getModel(e,P1.temp(_,i)),n.updateCell(s),n.setBounds(a,0,u,p),n.layoutContent(t),a+=u}else for(r=0;r<g;r++)i=f.getVisibleItem(r),(n=this._getCell(i))&&(u=r==g-1?m-a:i.displayWidth(),n.setVisible(!0),s=this._getModel(e,P1.temp(_,i)),n.updateCell(s),n.setBounds(a,0,u,p),n.layoutContent(t),a+=u)},_layoutTreeCells:function(t){var e,i,n,s,r,o,a,h,l,u,d,c=t.grid(),_=this.index().rowIndex,f=this.group(),g=f.visibleCount(),m=this.width(),p=this.height(),w=new g1;if(this.$_needRender=!1,e=f.$_groupFooterColumn)return(i=this._getCell(e)).setVisible(!0),n=this._getModel(c,P1.temp(_,e)),i.updateCell(n),w.set(0,0,m,p),i.setRect(w),void(i instanceof Y7&&i._layoutTreeCells(t));if(!f.childGroupFootersVisible()||g<1)this.$_needRender=!0;else if(d=f.$_groupFooterSpanned?f.$_groupFooterSpans:null,f.vertical())if(a=w.bottom(),h=Y1(p/f.groupFooterLevel()),d)for(s=0;s<g;){if(u=f.getVisibleItem(s),e=d[s++],i=this._getCell(e),s==g)r=p-a;else for(0,r=i instanceof Y7?h*e.groupFooterLevel():h;s<g&&(u=d[s])===e;s++)u=f.getVisibleItem(s),s==g-1&&(r=p-a),0;i.setVisible(!0),n=this._getModel(c,P1.temp(_,e)),i.updateCell(n),i.setBounds(0,a,m,r),i instanceof Y7&&i._layoutTreeCells(t),a+=r}else for(s=0;s<g;s++)e=f.getVisibleItem(s),(i=this._getCell(e))&&(r=0,s==g-1?r=p-a:i instanceof Y7?r=h*e.groupFooterLevel():r+=h,i.setVisible(!0),n=this._getModel(c,P1.temp(_,e)),i.updateCell(n),i.setBounds(0,a,m,r),i instanceof Y7&&i._layoutTreeCells(t),a+=r);else if(o=0,d)for(s=g-1;0<=s;){if(u=f.getVisibleItem(s),e=d[s--],i=this._getCell(e),s<0)l=Math.max(0,m-o);else for(0,l=Math.min(m,u.displayWidth());0<=s&&(u=d[s])===e;s--)u=f.getVisibleItem(s),0==s?l=Math.max(0,m-o):l+=Math.min(m,u.displayWidth()),0;i.setVisible(!0),n=this._getModel(c,P1.temp(_,e)),i.updateCell(n),o+=l,i.setBounds(m-o,0,l,p),i instanceof Y7&&i._layoutTreeCells(t)}else for(s=g-1;0<=s;s--)e=f.getVisibleItem(s),(i=this._getCell(e))&&(l=0==s?Math.max(0,m-o):Math.min(m,e.displayWidth()),i.setVisible(!0),n=this._getModel(c,P1.temp(_,e)),i.updateCell(n),o+=l,i.setBounds(m-o,0,l,p),i instanceof Y7&&i._layoutTreeCells(t))},_doDraw:function(t,e){if(this.childCount()<=0){var i=this._drawRect;this._background&&t.drawRect(this._background,null,i),W2.drawBorders(this,t,i)}},_getModel:function(t,e){return t.rowGroup().getFooterCell(e)},_createGroupCellView:function(){return new Y7(this._dom)},$_createCell:function(t){var e;return e=t instanceof O1?this._createGroupCellView():new b6(this._dom),this.$_setCell(t,e),this.addElement(e),t instanceof O1&&e.$_createCells(t),e},$_createCells:function(t,e){this.hideAll();var i,n,s,r,o,a=t.visibleCount();if(i=t.$_groupFooterColumn)this._getCell(i)||this.$_createCell(i);else if(t.childGroupFootersVisible()&&0<a)if(this.index().rowIndex,n=t.$_groupFooterSpanned?t.$_groupFooterSpans:null)for(o=null,s=0,r=n.length;s<r;s++)(i=n[s])!=o&&(o=i,this._getCell(i)||this.$_createCell(i));else for(s=0;s<a;s++)i=t.getVisibleItem(s),this._getCell(i)||this.$_createCell(i)}}),h8=I1("HeaderSummaryHeadElement",m4,{init:function(t){this._super(t,"headerSummaryHeadView"),t&&this.addElement(this._backView=(new J27).setVisible(!1)),this.addElement(this._menuView=new M9(t,this)),this._menuView.setVisible(!1)},text:null,menuVisible:!1,_doUpdateContent:function(t){this._super(t),this.setMenuVisible(t.menuVisible()),this.setText(t.text())},_doMeasure:function(t,e,i){},_doLayoutHandles:function(){},$_renderMenuText:function(t,e){var i,n,s=this.text(),r=s?t.getTextWidth(this._font,s):0,o=e.clone();this.inflatePadding(o),this._menuVisible?(this._menuView.setVisible(!0),i=this._menuView.measure(this._grid),r=Math.max(o.x,(o.width-i.width-r)/2),this._menuView.setBoundsI(r,(this.height()-i.height+1)/2,i.width,i.height),this._menuView.setBackground(this._background)):this._menuView.setVisible(!1),s&&(n=this.color())&&(this._menuView.visible()&&o.leftBy(this._menuView.right()),this._renderText(t,s,n,o))},_doRender:function(t,e){var i;this._renderer?this._renderer.render(this,t,e):(i=this.background())&&t.drawRect(i,null,e),this.$_renderMenuText(t,e),W2.drawBorders(this,t,e)},_doRenderHtml:function(t){var e;this._renderer?(this._backView.setVisible(!0),this._renderer.renderHtml(this._backView,t)):(e=this.background(),this._css.background=e?e.css():""),this.$_renderMenuText(null,t),W2.drawHtmlBorders(this)}}),X8=I1("HeaderHeadElement",m4,{init:function(t){this._super(t,"headerHeadView"),this.addElement(this._menuView=new M9(t,this)),this._menuView.setVisible(!1)},menuVisible:!1,_doUpdateContent:function(t){this._super(t),this.setMenuVisible(t.menuVisible())},_doMeasure:function(t,e,i){},_doLayoutHandles:function(){var t,e=this._menuView;this._menuVisible?(e.setVisible(!0),t=e.measure(this._grid),e.setBoundsI((this.width()-t.width)/2,(this.height()-t.height+1)/2,t.width,t.height),e.setBackground(this._background),e.setColor(this._shapeColor),e.setHoveredColor(this._shapeHoveredColor)):e.setVisible(!1)},_doRender:function(t,e){var i=this.background();i&&t.drawRect(i,null,e),W2.drawBorders(this,t,e)},_doRenderHtml:function(t){var e=this.background();this._css.background=e?e.css():"",W2.drawHtmlBorders(this)}}),A17=I1("CheckBarHeadElement",m4,{init:function(t){this._super(t,"checkBarHeadView")},showCheck:!0,checked:!1,checkableAt:function(t,e){return t>=this._boxX&&t<=this._boxX+this._boxW&&e>=this._boxY&&e<=this._boxY+this._boxW},_doUpdateContent:function(t){var e=this.grid(),i=e.checkBar();this._super(t),this.setShowCheck(i.showAll()&&!i.exclusive()&&0<e.rowCount()),e.rowCount()<=0&&this.setChecked(!1)},_doMeasure:function(t,e,i){},_doRender:function(t,e){var i,n=this.background();n&&t.drawRect(n,null,e),this.showCheck()&&(i=this._getRenderRect(e),this.$_drawCheck(t,i)),W2.drawBorders(this,t,e)},_doRenderHtml:function(t){var e,i,n=this.background();this._css.background=n?n.css():"",this.showCheck()&&((e=this._checkElement)||((e=this._checkElement=document.createElement("input")).type="checkbox",e.style.position="absolute",e.style.padding="0px",e.style.margin="0px",e.style.pointEvents="none",this._dom.appendChild(e)),i=f17(e),this._boxW=Math.max(i.width,i.height),e.checked=this.checked(),e.style.left=(this._boxX=t.x+this.paddingLeft()+(t.width-this.paddingHorz()-i.width)/2)+"px",e.style.top=(this._boxY=t.y+this.paddingTop()+(t.height-this.paddingVert()-i.height)/2)+"px"),W2.drawHtmlBorders(this)},$_drawCheck:function(t,e){var i,n,s,r,o=this.checked()?this.shapeColor():this.shapeInactiveColor();o&&(e=this._getRenderRect(e),i=this._shapeSize?this._shapeSize.getDimension(e.height):13,n=B1(this._boxW=i-2),this._boxX=e.x+(e.width-n)/2,this._boxY=e.y+(e.height-n)/2,"rectangle"==this.shapeName()?(s=B1(this._boxX),r=B1(this._boxY),t.drawBoundsI(null,b17,s,r,n+1,n),n++,this.checked()&&t.drawBounds(o,null,s+(n+1)/2-n/4,r+n/2-n/4,n/2,n/2)):$$_drawCheckMark(t,o,e,n+2))}}),C0=I1("IndicatorCellElement",r8,{init:function(t){this._super(t,"indicatorCellView")},prefix:null,suffix:null,text:null,shapeVisible:!0,rowState:u1(T1,T1.NORMAL),dataState:u1(j1,j1.NONE),setRowState:function(t){t!=this._rowState&&(this._rowState=t,this.invalidate())},_doPrepareValue:function(t){this._super(t);var e=t.styles();this.setPrefix(e.prefix()),this.setSuffix(e.suffix())},_doUpdateContent:function(t){this._super(t),this.setShapeVisible(t.shapeVisible()),this.setRowState(t.rowState()),this.setDataState(t.dataState());var e=t.displayText();this._prefix&&(e=this._prefix+e),this._suffix&&(e+=this._suffix),this.setText(e)},_doRender:function(t,e){var i=this.$_getBackground();i&&t.drawRectI(i,null,e),this.$_renderCell(t,this._getRenderRect(e)),W2.drawBorders(this,t,e)},_doRenderHtml:function(t){var e=this._getRenderRect(t),i=this.$_getBackground();c4?this.$_setCssFill(i):this._css.background=i?i.css():"",this.$_renderCell(this.$_getGraphics(!0,e),e),W2.drawHtmlBorders(this)},_hoveredChanged:function(){this.invalidate()},$_getBackground:function(){var t=null;return this.hovered()&&(t=this._hoveredBackground),t||!this._selected&&this._rowState==T1.NORMAL||(t=this._selectedBackground),t||(t=this._background),t},$_renderCell:function(t,e){var i,n=this._rowState,s=this._shapeVisible&&(this.hovered()?this._shapeHoveredColor:this._selected?this._shapeSelectedColor:this._shapeColor);s&&n!=T1.NORMAL?n==T1.INSERTING||n==T1.APPENDING?this.$_drawInsert(t,s,e):n==T1.UPDATING?this.$_drawEdit(t,s,e):n==T1.FOCUSED&&this.$_drawArrow(t,s,e):(i=this.text())&&(s=null,(this._selected||this._rowState!=T1.NORMAL)&&(s=this._selectedColor),!s&&this.hovered()&&(s=this._hoveredColor),s||(s=this._color),s&&(this.inflatePadding(e),this._renderText(t,i,s,e),this.deflatePadding(e)))},$_drawArrow:function(t,e,i){var n=i.x+(i.width-11)/2,s=i.y+(i.height-11)/2;t.drawPolygonArray(e,null,[n+4,s+2.5,n+7.5,s+5.5,n+4,s+9,n+5,s+10.5,n+9.5,s+5.5,n+5,s+1])},$_drawEdit:function(t,e,i){var n=i.x+(i.width-12)/2,s=i.y+(i.height-12)/2;t.drawPolygonArray(e,null,[n+1,s+2,n+7,s+8,n+9,s+8,n+9,s+6,n+3,s+0]),t.drawPolygonArray(e,null,[n+0,s+9.5,n+0,s+11,n+3,s+11,n+3,s+9.5]),t.drawPolygonArray(e,null,[n+4,s+9.5,n+4,s+11,n+7,s+11,n+7,s+9.5]),t.drawPolygonArray(e,null,[n+8,s+9.5,n+8,s+11,n+11,s+11,n+11,s+9.5])},$_drawInsert:function(t,e,i){var n=i.x+(i.width-12)/2,s=i.y+(i.height-12)/2;t.drawPolygonArray(e,null,[n+4.5,s+0,n+4.5,s+7.5,n+6.5,s+7.5,n+6.5,s+0]),t.drawPolygonArray(e,null,[n+1,s+2.5,n+10,s+2.5,n+10,s+4,n+1,s+4]),t.drawPolygonArray(e,null,[n+0,s+9.5,n+0,s+11,n+3,s+11,n+3,s+9.5]),t.drawPolygonArray(e,null,[n+4,s+9.5,n+4,s+11,n+7,s+11,n+7,s+9.5]),t.drawPolygonArray(e,null,[n+8,s+9.5,n+8,s+11,n+11,s+11,n+11,s+9.5])}}),O9=I1("StateCellElement",r8,{init:function(t){this._super(t,"stateCellView")},iconIndex:-1,iconAlpha:1,rowState:j1.NONE,label:null,_doUpdateContent:function(t){this._super(t);var e=t.styles();this.setIconIndex(e.iconIndex()),this.setIconAlpha(e.iconAlpha()),this.setRowState(t.index().getRow(this._grid).dataState()),this.setLabel(t.label()),this._images=this._grid.rowIndicator().stateImages(),this._dirty||this._grid._imageLoaded!==this._images||this.invalidate()},_renderCell:function(t,e,i){var n,s,r,o,a;this._rowState&&this._rowState!==j1.NONE&&(this._label&&(n=i&&this.hoveredColor()||this.color())?(this.deflatePadding2(e),this._renderText(t,this._label,n,e),this.inflatePadding2(e)):this._images&&(o=this._images.getImage(this._iconIndex))&&(s=o.width)?(r=o.height,t.drawImageAlphaI(o,this._iconAlpha,e.x+(e.width-s)/2,e.y+(e.height-r)/2,s,r)):this._shapeName&&(o=k0.getShape(this,this._shapeName))&&(this.deflatePadding2(e),s=Math.min(e.width,e.height),(a=this.shapeSize())&&(s=a.getDimension(s)),e.x+=(e.width-s)/2,e.y+=(e.height-s)/2,e.width=e.height=s,o.draw(t,e,this._shapeColor,this._shapeBorder,this._shapeRotate)))},_doRender:function(t,e){var i,n=this.hovered();n&&(i=this.hoveredBackground()),i||(i=this.background()),i&&t.drawRect(i,null,e),this._renderCell(t,this._getRenderRect(e),n),W2.drawBorders(this,t,e)},_doRenderHtml:function(t){var e,i,n=this.hovered();n&&(e=this.hoveredBackground()),e||(e=this.background()),w4?this.$_setCssFill(e):this._css.background=e?e.css():"",i=this._getRenderRect(t),this._renderCell(this.$_getGraphics(!0,i),i,n),W2.drawHtmlBorders(this)}}),b17=new Z1("rgba(170, 170, 170, 1)"),a37=new U1(4293848814),q37=new Z1("rgba(170, 170, 170, 0.35)"),K6=I1("CheckBarCellElement",r8,{init:function(t){this._super(t,"checkBarCellView")},markVisible:!0,exclusive:!1,checked:!1,checkable:!0,checkableAt:function(t,e){return t>=this._boxX&&t<=this._boxX+this._boxW&&e>=this._boxY&&e<=this._boxY+this._boxW},_doUpdateContent:function(t){this._super(t);var e=this._grid,i=t.index().getRow(e);this.setCheckable(e.isCheckable(i)),this.setChecked(i.$_isChecked(e))},_doRender:function(t,e){var i=null;if(this.hovered()&&(i=this.hoveredBackground()),i||(i=this.background()),i&&t.drawRect(i,null,e),this._markVisible&&this.$_showCheckbox()){var n=this._getRenderRect(e);this._exclusive?this.$_drawRadio(t,n):this.$_drawCheck(t,n)}W2.drawBorders(this,t,e)},_doRenderHtml:function(t){var e,i,n=null;this.hovered()&&(n=this._hoveredBackground),n||(n=this._background),this._css.background=n?n.css():"",(e=this._checkElement)||((e=this._checkElement=document.createElement("input")).style.position="absolute",e.style.padding="0px",e.style.margin="0px",e.style.pointEvents="none",this._dom.appendChild(e)),i=f17(e),this._boxW=Math.max(i.width,i.height),e.type=this._exclusive?"radio":"checkbox",e.disabled=!this._checkable,e.checked=this._checked,e.style.left=(this._boxX=t.x+(t.width-i.width)/2)+"px",e.style.top=(this._boxY=t.y+(t.height-i.height)/2)+"px",e.style.visibility=this.$_showCheckbox()?"visible":"hidden",W2.drawHtmlBorders(this)},$_showCheckbox:function(){return this._checkable||!this._grid.checkBar().hideUncheckable()},$_drawCheck:function(t,e){e=this._getRenderRect(e);var i,n=this._shapeSize?this._shapeSize.getDimension(e.height):13,s=B1(this._boxW=n-2),r=B1(this._boxX=e.x+(e.width-s)/2),o=B1(this._boxY=e.y+(e.height-s)/2);this._checkable?t.drawBoundsI(null,b17,r,o,s+1,s):t.drawBoundsI(a37,q37,r,o,s+1,s),this._checked&&(i=this._shapeColor)&&("rectangle"==this.shapeName()?(s++,t.drawBounds(i,null,r+(s+1)/2-s/4,o+s/2-s/4,s/2,s/2)):(e.leftBy(2),$$_drawCheckMark(t,i,e,n)))},$_drawRadio:function(t,e){var i,n=this._getRenderRect(e),s=this._shapeSize?this._shapeSize.getDimension(n.height):12,r=this._boxW=s-3,o=r/2,a=n.x+n.width/2,h=n.y+n.height/2;this._boxX=n.x+(n.width-r)/2,this._boxY=n.y+(n.height-r)/2,this._checkable?t.drawCircle(null,b17,a,h,o):t.drawCircle(a37,q37,a,h,o),this._checked&&(i=this._shapeColor)&&(o-=2,t.drawCircle(i,null,a,h,o))}}),v37=I1("RenderableValueCellElement",y3,{init:function(t,e){this._super(t,e)},iconIndex:0,iconLocation:u1(n2,n2.NONE),iconAlignment:u1(v1,v1.NEAR),iconOffset:0,iconPadding:0,iconAlpha:1,shapeLocation:u1(n2,n2.NONE),shapeAlignment:u1(v1,v1.NEAR),shapeOffset:0,shapePadding:0,renderer:null,text:null,value:void 0,setValue:function(t){t!==this._value&&(this._value=t,this.invalidate())},getAnimations:function(){return this._grid._animations.getRuns(this._index.column,this._index.getDataId(this._grid))},getIcon:function(){var t,e=this._iconIndex;return(0<=e||"string"==typeof e)&&(t=this._index.column.$_images())?t.getImage(e):null},_doPrepareElement:function(t){this._super(t);var e=t.styles(),i=null,n=e.renderer();this.setIconIndex(e.iconIndex()),this.setIconLocation(e.iconLocation()),this.setIconAlignment(e.iconAlignment()),this.setIconOffset(e.iconOffset()),this.setIconPadding(e.iconPadding()),this.setIconAlpha(e.iconAlpha()),this.setShapeLocation(e.shapeLocation()),this.setShapeAlignment(e.shapeAlignment()),this.setShapeOffset(e.shapeOffset()),this.setShapePadding(e.shapePadding()),n&&(i=this.grid().dataCellRenderers().getRenderer(n)),i||(i=this._index.column.rendererObj()),this.setRenderer(i)},_doPrepareValue:function(t){this._super(t);var e,i,n,s=null,r=this._index.column,o=r.valueType();if(this.setValue(t.value()),o){if(e=r._displayCallback)"string"!=typeof(s=e(t._index,this._value))&&null!=s&&(s=String(s));else switch(o){case a1.TEXT:s=t.displayText(),this._textFormatter&&s&&(s=this._textFormatter.format(s));break;case a1.NUMBER:i=Number(this._value),s=isNaN(i)?a17(r._nanText,this._grid.$_nanText):this._numberFormatter?this._numberFormatter.format(i):t.displayText();break;case a1.DATETIME:s=this._value&&(n=this.datetimeWriter())?n.getText(this._value):t.displayText();break;case a1.BOOLEAN:s=this._boolFormatter?this._boolFormatter.formatValue(this._value):t.displayText();break;case a1.OBJECT:if(this._value)switch(typeof(i=r._keyFn?r._keyFn(r.$_field,this._value):r._keyPath?l0.extractJson(this._value,r._keyPath,!0):t.displayText())){case"string":s=this._textFormatter&&i?this._textFormatter.format(i):i;break;case"number":s=this._numberFormatter?this._numberFormatter.format(i):i;break;case"boolean":s=this._boolFormatter?this._boolFormatter.formatValue(i):i;break;default:s=i5(i)&&(n=this.datetimeWriter())?n.getText(i):i}else s="";break;default:s=t.displayText()}this.setText(s)}},_doMeasure:function(t,e,i){var n=this.renderer().measure(t,this,e,i);return this._dirty=this._dirty||t._imageLoaded,n.width+=this._borderLeft?this._borderLeft.width():0,n.width+=this._borderRight?this._borderRight.width():0,n},$_setSelStyles:function(t){this._selFill=t.background()},_doDraw:function(t,e){var i,n,s,r,o,a=this._drawRect,h=this._selected&&this._selRanges,l=!this._selRanges&&this._selected;if(a.height-=this._rowBottom,e&&this._rowView.$_requestFill(this,t,a),i=this._getRenderRect(a),(n=l?this._selectedBackground:this._background)&&t.drawRectI(n,null,i),this._textColor=l&&this._selectedColor||this._color,this._doRenderCell(t,i),W2.drawBorders(this,t,a),h)for(s=0;s<h.length/2;s++)r=h[2*s],(o=h[2*s+1])>r&&t.drawBoundsI(this._selFill,null,a.x,r,a.width,o-r)},_doRenderHtml:function(t){var e,i,n,s,r,o,a=this._selected&&this._selRanges,h=!this._selRanges&&this._selected;if(e=h?this._selectedBackground:this._background,w4?this.$_setCssFill(e):this._css.background=e?e.css():"",i=this._getRenderRect(t),this._textColor=h&&this._selectedColor||this._color,this._doRenderCell(null,i),W2.drawHtmlBorders(this),a)for(n=this.$_getSelGraphics(!0,t),s=0;s<a.length/2;s++)r=a[2*s],(o=a[2*s+1])>r&&n.drawBoundsI(this._selFill,null,t.x,r,t.width,o-r)},_doClearHtml:function(){this._super(),this._selSvg&&(this._selSvg._svg.style.visibility="hidden")},$_getSelGraphics:function(t,e){var i=this._selSvg;return i||(i=this._selSvg=new b7(null,this.container()),this._dom.appendChild(i._svg)),i._svg.style.visibility="visible",i.getGraphics(t,e)},_doRenderCell:function(t,e){}}),l4=I1("DataCellElement",v37,{init:function(t,e){this._super(t,e||"dataCellView"),this._dataColumn=null,this._cellStyles=null,this._error=null,this._errorLevel=K4.IGNORE,this._lButtonsWidth=0,this._rButtonsWidth=0,this._buttonWidth=0,this._buttonPoints=[],this._editWidth=0,this._errorWidth=0,this._buttonHovered=-1,this._buttonPressed=-1,this._editorButtonHovered=!1,this._editorButtonPressed=!1,this._expandHandle=null},button:u1(Y0,Y0.NONE),buttonVisibility:u1(c7,c7.DEFAULT),buttons:null,editorButtonVisibility:u1(c7,c7.DEFAULT),expanderVisible:!1,innerIndex:-1,setInnerIndex:function(t){t!=this._innerIndex&&(this._innerIndex=t,this.$_resetButtonsVisible(),this.invalidate(!1,!0))},mergeRoom:function(){return null},expanderVisible_:function(){return null!=this._expandHandle},setExpanderVisible:function(t){t!=this.expanderVisible()&&(this._expandHandle?(this.contains(this._expandHandle)&&this.removeChild(this._expandHandle),this._expandHandle=null):this._expandHandle=new m47(this._dom,this),this.invalidate(!1,!0))},setButtons:function(t){t!=this._buttons&&(this._buttons=t,this.invalidate(!1,!0))},group:function(){var t=this.mergeRoom();return t?t.group():this.index().getRow(this._grid).parent()},innerCellIndex:function(){if(0<=this._innerIndex){var t=this._index.clone();return t.rowIndex=this._index.rowIndex+this._innerIndex,t}return this._index},layoutTreeContent:function(t){this._doLayoutHandles()},ptInCell:function(t,e){return t>this._lButtonsWidth&&t<this.width()-this._buttonWidth-this._rButtonsWidth-this._editWidth-this._errorWidth},ptInClick:function(t,e){return this.$_clickRect?this.$_clickRect.contains(t,e):this.ptInCell(t,e)},ptInButton:function(t,e){var i=this._buttonWidth,n=this._rButtonsWidth,s=this.width()-i-n;return 0<i&&s<=t&&t<this.width()-n&&0<=e&&e<=this.height()&&this.grid().$_buttonRenderer.hitTest(i,this.height(),t-s,e)},ptInCustomButton:function(t,e){var i,n,s,r,o=this._rButtonsWidth;if(0<o&&0<=e&&e<=this.height()&&this.grid().$_customButtonRenderer)for(n=this._buttons,i=this._buttonPoints,s=this.width()-o,r=0;r<n.length;r++)if(n[r],t>=s+i[r]&&t<s+i[r+1])return r;return-1},ptInEditorButton:function(t,e){var i=this._editWidth,n=this._buttonWidth+this._rButtonsWidth,s=this.width()-i-n;return 0<i&&s<=t&&t<this.width()-n&&0<=e&&e<=this.height()&&this.grid().delegate().getCellEditorButtonRenderer(this.index()).hitTest(i,this.height(),t-s,e)},ptInDataButton:function(t,e){var i=this._renderer;return!(!i||!i.isButton())&&i.ptInButton(this,t,e)},ptInHovered:function(t,e){var i=this._renderer;return!i||!i.isButton()||i.ptInButton(this,t,e)},setButtonState:function(t,e){this._buttonHovered==t&&this._buttonPressed==e||(this._buttonHovered=t,this._buttonPressed=e,this.invalidate())},setEditorButtonState:function(t,e){this._editorButtonHovered==t&&this._editorButtonPressed==e||(this._editorButtonHovered=t,this._editorButtonPressed=e,this.invalidate())},getButtonsWidth:function(){return this._buttonWidth+this._rButtonsWidth+this._editWidth+this._errorWidth-1},getValueOf:function(t){var e=this.index().getRow(this._grid),i=e.dataSource().getFieldIndex(t);if(0<=i)return e.getValue(i)},isDataCell:function(){return!0},canEditable:function(){return!0},canEditableAt:function(t){return!this.ptInButton(t.x,t.y)&&0<=!this.ptInCustomButton(t.x,t.y)&&!this.ptInEditorButton(t.x,t.y)},setFocused:function(t){this._super(t),this.invalidate(!1,!0)},canHovering:function(t){if(t){if(this.button()!=Y0.NONE||0<this.$_rightButtonsWidth()||0<this.$_editorButtonWidth()||this._expandHandle||this._error)return!0}else if(this._lButtonsWidth+this._buttonWidth+this._rButtonsWidth+this._editWidth+this._errorWidth!=0)return!0;return!1},_hoveredChanged:function(){var t=this.renderer();t&&(t.isClickable(this)||t.alwaysRedraw&&t.alwaysRedraw())&&(this._font.deco=this._hovered?"underline":this._textDeco,this.invalidate())},setMouseEntered:function(t){this._super(t),t||(this.setButtonState(-1,-1),this.setEditorButtonState(!1,!1))},_doClearHtml:function(){this._super();var t,e,i=this._spans;if(i)for(t=i.length;t--;)(e=i[t])&&e.parentNode===this._dom&&this._dom.removeChild(e)},$_prepareItemSpan:function(t){this._spans||(this._spans=[]);var e=this._spans[t];return e||(this._spans[t]=e=document.createElement("span"),e.style.position="absolute"),!e.parentNode&&this._dom.appendChild(e),e},_doLayoutHandles:function(){if(this._super(),this._expandHandle){var t,e=this._expandHandle;e.setBounds(2,2,12,12),e.setExpanded(this.group().expanded()),t=this._grid.rowGroup().getExpanderCell(this._index.rowIndex),e.setColor(t.styles().shapeColor()),e.setFill(null),this.contains(e)||this.addElement(e),e.invalidate()}},_doPrepareValue:function(t){this._super(t);var e=this._index.column;this._dataColumn=e instanceof L2?e:null,this._error=t.error(),this._errorLevel=t.errorLevel()},_doUpdateContent:function(t){this._super(t),this.setInnerIndex(-1),this.$_resetButtonsVisible()},_doMeasure:function(t,e,i){var n=this.renderer().measure(t,this,e,i);return this._dirty=this._dirty||t._imageLoaded,n.width+=this._borderLeft?this._borderLeft.width():0,n.width+=this._borderRight?this._borderRight.width():0,n},measureHeight:function(t,e,i){var n=this.renderer().measureHeight(t,this,e,i);return(n+=this._borderTop?this._borderTop.width():0)+(this._borderBottom?this._borderBottom.width():0)},_doRenderCell:function(t,e){var i,n,s,r,o,a,h,l,u=0;this._mergeRoom?(this._buttonIdx||(this._buttonIdx=new P1),this._buttonIdx.column=this._index.column,this._buttonIdx.rowIndex=this._index.rowIndex+Math.max(0,this._mouseEntered&&0<=this._hoverIndex?this._hoverIndex:this._innerIndex)):this._buttonIdx=this._index,r=0<(o=this._buttonWidth=this.$_buttonWidth())+(a=this._rButtonsWidth=this.$_rightButtonsWidth())+(h=this._editWidth=this.$_editorButtonWidth())+(l=this._errorWidth=this.$_errorWidth()),this._renderer&&(r||0<(u=this._lButtonsWidth=this.$_leftButtonsWidth())?(e.leftBy(u),e.rightBy(-o-a-h-l),t?(t.save(),t.clipRect(e),this._renderer.render(this,t,e),t.restore()):this._renderer.renderHtml(this,e),e.rightBy(o+a+h+l),e.leftBy(-u)):t?this._renderer.render(this,t,e):this._renderer.renderHtml(this,e)),r&&(t=t||this.$_getGraphics(!0,e),i=e.clone(),this._mergeRoom&&(s=(n=this._grid).lm().getItemRect(this._buttonIdx.rowIndex-n.topIndex()),i.y=s.y-this.topBy(n,0),i.height=s.height),0<a&&(i.setLeft(i.right()-a),this.$_drawRightButtons(t,i)),0<o&&(i.set(e.x,i.y,e.width,i.height),i.rightBy(-a),i.setLeft(i.right()-o),this.$_drawButton(t,i)),0<h&&(i.set(e.x,i.y,e.width,i.height),i.rightBy(-o-a),i.setLeft(i.right()-h),this.$_drawEditorButton(t,i)),0<l&&(i.set(e.x,i.y,e.width,i.height),i.rightBy(-o-a-h),i.setLeft(i.right()-l),this.$_drawError(t,i)))},$_leftButtonsWidth:function(){return this._expandHandle?16:0},$_rightButtonsWidth:function(){var t,e,i,n,s,r=this._buttons,o=this._buttonIdx;if(r&&(i=this._grid.$_customButtonRenderer)){for((s=this._buttonPoints)[0]=0,n=this.height(),t=0;t<r.length;t++)e=r[t],!this._getButtonVisible(e._visibility,!0)||e._displayCallback&&!e._displayCallback(o)?s[t+1]=s[t]:s[t+1]=s[t]+i.measure(o,0,n).width;return s[r.length]}return 0},$_getButton:function(t){return this._cellStyles&&this._cellStyles.button()||t.button()},_getButtonVisible:function(t,e){var i,n=this._focused;switch(t){case c7.ALWAYS:return!0;case c7.HIDDEN:return!1;case c7.CURRENT:i=n&&this._mouseEntered;break;case c7.VISIBLE:i=n;break;case c7.DEFAULT:default:i=n||this._mouseEntered}return(i=i&&(e&&this._grid.editOptions().forceButtonVisible()||this._grid.editController().getEditable(this._buttonIdx)))&&this._mergeRoom&&(i=this._grid.getRow(this._buttonIdx.rowIndex).canEdit()),i},$_resetButtonsVisible:function(){var t=this._dataColumn;t&&(this.setButton(this.$_getButton(t)),this.setButtonVisibility(t.buttonVisibility()),this.setEditorButtonVisibility(t.editorButtonVisibility()),this.setButtons(t.customButtons()))},$_editorButtonWidth:function(){var t,e=this._buttonIdx,i=0;return this._dataColumn&&this._grid._delegate.hasEditorButton(e)&&this._getButtonVisible(this._editorButtonVisibility)&&(t=this._grid._delegate.getCellEditorButtonRenderer(e))&&(i=t.measure(e,0,this.height()).width),i},$_drawEditorButton:function(t,e){this._grid._delegate.getCellEditorButtonRenderer(this._index).render(this._index,t,e,this._editorButtonHovered,this._editorButtonPressed,this._focused)},$_buttonWidth:function(){var t,e=this._buttonIdx,i=0;return this._button!=Y0.NONE&&this._getButtonVisible(this._buttonVisibility,!0)&&(e.column._buttonDisplayCallback&&!e.column._buttonDisplayCallback(e)||(t=this._grid.$_buttonRenderer)&&(i=t.measure(e,0,this.height()).width)),i},getButtonWidth:function(){var t=this._buttonWidth+this._rButtonsWidth+this._editWidth+this._errorWidth;return isNaN(t)?0:Math.max(t,0)},$_drawButton:function(t,e){var i=this._buttonIdx,n=this._grid.$_buttonRenderer;n&&n.render(i,t,e,0==this._buttonHovered,0==this._buttonPressed,this._focused)},$_drawRightButtons:function(t,e){var i,n,s,r,o,a;if(0<this._rButtonsWidth&&(renderer=this._grid.$_customButtonRenderer,renderer))for(a=this._buttons,i=this._buttonIdx,r=this._buttonPoints,s=e.clone(),n=0;n<a.length;n++)0<(o=r[n+1]-r[n])&&(s.x=e.x+r[n],s.width=o,renderer.setButton(a[n]),renderer.render(i,t,s,this._buttonHovered==n+1,this._buttonPressed==n+1,this._focused))},$_errorWidth:function(){if(this._error){var t=l4.getErrorIcon(this._grid,this._errorLevel);return t?t.width+4:0}return 0},$_drawError:function(t,e){var i,n,s,r,o=l4.getErrorIcon(this._grid,this._errorLevel);o&&0<(i=o.width)&&0<(n=o.height)&&(s=Y1(e.x+(e.width-i)/2),r=Y1(e.y+(e.height-n)/2),t.drawImageI(o,s,r,i,n))}},null,function(t){var n={};t.getErrorIcon=function(t,e){var i=n[e];return i||(i=t.getAssetImage("error_"+e))&&(n[e]=i),i}}),B37=I1("CalcedCellElement",v37,{init:function(t,e){this._super(t,"calcedCellView")},text:null,isDataCell:function(){return!0},canEditable:function(){return!0},_doPrepareValue:function(t){this._super(t)},_doRenderCell:function(t,e){this._renderer&&(t?this._renderer.render(this,t,e):this._renderer.renderHtml(this,e))}}),N0=I1("DataGroupCellElement",O7,{init:function(t){this._super(t,"dataGroupCellView")},selectedBackground:U1.WHITE,deleted:!1,layoutTreeContent:function(t){this._layoutTreeCells(t)},clearAnimations:function(){var t,e,i,n=this.group(),s=n.visibleCount();for(t=0;t<s;t++)e=n.getVisibleItem(t),(i=this._getCell(e))instanceof N0?i.clearAnimations():i instanceof l4&&i.clearAnimation()},_needRender:function(){return this.$_needRender},_prepareCells:function(){this.$_createCells(this.group(),!0)},_doPrepareElement:function(t){this._super(t);var e=t.styles();this.setSelectedBackground(e.selectedBackground())},layoutColumnRects:function(t){var e,i,n,s,r,o,a,h=this.group(),l=h._layoutRect.width,u=this._height,d=h.visibleCount();if(h.vertical())for(e=a=0;e<d;e++)s=h.getVisibleItem(e),r=this._getCell(s),n=s.measuredHeight(),s._layoutRect.set(0,a,l,n),a+=n,r instanceof N0&&r.layoutColumnRects(t);else for(n=u,e=o=0;e<d;e++)s=h.getVisibleItem(e),r=this._getCell(s),i=e==d-1?l-o:s.displayWidth(),s._layoutRect.set(o,0,i,n),o+=i,r instanceof N0&&r.layoutColumnRects(t)},_layoutCells:function(t){var e,i,n,s,r,o,a,h,l,u,d,c=this._width,_=this._height,f=this.group(),g=f.visibleCount();if(this.$_needRender=0==g,f.vertical())for(e=l=0;e<g;e++){if(r=f.getVisibleItem(e),1<(o=1)){for(u=0,s=r.measuredHeight(),i=e+1;i<e+o&&i<g;i++)d=f.getVisibleItem(i),this._getCell(d).setVisible(!1),s+=d.measuredHeight(),u++;e+=u,o=u+1}else s=r.measuredHeight(),o=1;(a=this._getCell(r))&&(a._colspan=o,a._fixed=this._fixed,a._rowView=this._rowView,e==g-1?(a._rowBottom=this._rowBottom,s=Math.max(0,_-l)):a._rowBottom=0,a.setBounds(0,l,c,s),a instanceof N0?a._layoutCells(t):a.layoutContent(t)),l+=s}else for(s=_,e=h=0;e<g;e++){if(r=f.getVisibleItem(e),1<(o=1)){u=0;var m=h;for(m+=n=e==g-1?c-h:r.displayWidth(),i=e+1;i<e+o&&i<g;i++)d=f.getVisibleItem(i),this._getCell(d).setVisible(!1),m+=n+=i==g-1?c-m:d.displayWidth(),u++;e+=u,o=u+1}else n=e==g-1?Math.max(0,c-h):r.displayWidth(),o=1;(a=this._getCell(r))&&(a._colspan=o,a._fixed=this._fixed,a._rowView=this._rowView,a._rowBottom=this._rowBottom,a.setBounds(h,0,n,s),a instanceof N0?a._layoutCells(t):a.layoutContent(t)),h+=n}},_layoutTreeCells:function(t){var e,i,n,s,r,o,a,h=this._width,l=this._height,u=this.group(),d=u.visibleCount();if(u.vertical())for(e=a=0;e<d;e++)n=(s=u.getVisibleItem(e)).measuredHeight(),(r=this._getCell(s))&&(r._colspan=1,r._fixed=this._fixed,r._rowView=this._rowView,e==d-1?(r._rowBottom=this._rowBottom,n=Math.max(0,l-a)):r._rowBottom=0,r.setBounds(0,a,h,n),r instanceof N0?r._layoutTreeCells(t):r.layoutTreeContent(t)),a+=n;else for(o=0,n=l,e=d-1;0<=e;e--)s=u.getVisibleItem(e),o+=i=0==e?Math.max(0,h-o):Math.min(h,s.displayWidth()),(r=this._getCell(s))&&(r._colspan=1,r._fixed=this._fixed,r._rowView=this._rowView,r._rowBottom=this._rowBottom,r.setBounds(h-o,0,i,n),r instanceof N0?r._layoutTreeCells(t):r.layoutTreeContent(t))},_doDraw:function(t,e){var i,n;this._needRender()&&((i=this._drawRect).height-=this._rowBottom,e&&this._rowView.$_requestFill(this,t,i),(n=this._selected?this._selectedBackground:this._background)&&t.drawRect(n,null,i),W2.drawBorders(this,t,i))},_doRenderHtml:function(t){if(this._needRender()){var e=this._selected?this._selectedBackground:this._background;c4?this.$_setCssFill(e):this._css.background=e?e.css():"",W2.drawHtmlBorders(this)}},$_createCells:function(t,e){var i,n,s,r,o,a,h,l,u=this.grid(),d=u.body(),c=this.index().rowIndex;for(this.hideAll(),i=0,n=t.visibleCount();i<n;i++){if(s=t.getVisibleItem(i),this.$_needScr){if((l=s._layoutRect).x+this.$_scrX>this.$_scrRight)break;if(l.right()+this.$_scrX<this.$_scrLeft)continue}e&&s.canMerge()&&(h=u.lm().getMergedCell(a=P1.borrow(c,s)),P1.return(a),h)||((r=this._getCell(s))||(r=s instanceof L2?new l4(this._dom):s instanceof Q7?s instanceof G5?new s37(this._dom):new j9(this._dom):s instanceof D6?new T37(this._dom):s instanceof h7?new B37(this._dom):new N0(this._dom),this.$_setCell(s,r),this.addElement(r)),r.setVisible(!0),o=d.getCell(P1.temp(c,s)),r.setDeleted(this._deleted),r.updateCell(o),r.setMouseEntered(!1),r instanceof l4&&r.setFocused(!1),s instanceof O1&&((r.$_needScr=this.$_needScr)&&(r.$_scrLeft=this.$_scrLeft,r.$_scrRight=this.$_scrRight,r.$_scrX=this.$_scrX+l.x),r.$_createCells(s)))}}}),T37=I1("LabelCellElement",y3,{init:function(t,e){this._super(t,"labelCellView")},text:null,isDataCell:function(){return!0},_doPrepareValue:function(t){this._super(t),this.setText(t.displayText())},_doDraw:function(t,e){var i,n,s=this._drawRect,r=this._selected;s.height-=this._rowBottom,e&&this._rowView.$_requestFill(this,t,s),i=this._getRenderRect(s),(n=r?this._selectedBackground:this._background)&&t.drawRectI(n,null,i),this._textColor=r&&this._selectedColor||this._color,this._doRenderCell(t,i),W2.drawBorders(this,t,s)},_doRenderHtml:function(t){var e,i,n=this._selected;e=n?this._selectedBackground:this._background,w4?this.$_setCssFill(e):this._css.background=e?e.css():"",i=this._getRenderRect(t),this._textColor=n&&this._selectedColor||this._color,this._doRenderCell(null,i),W2.drawHtmlBorders(this)},_doRenderCell:function(t,e){var i=this._text;i&&(this.deflatePadding2(e),this._renderText(t,i,this._textColor,e))}}),j9=I1("SeriesCellElement",l4,{init:function(t,e){this._super(t,e||"seriesCellView"),this._values=null},labels:null,setLabels:function(t){t!=this._labels&&(this._labels=t,this.invalidate())},fieldCount:function(){return this._fieldCount},isDataCell:function(){return!0},_doPrepareValue:function(t){this._super(t),this.setLabels(t.labels()),this._fieldCount=this._labels.length},value:function(){return this._values},setValue:function(t){G87(t,this._values)||(this._values=t,this.invalidate())}}),s37=I1("ChartCellElement",j9,{init:function(t,e){this._super(t,e)},_doUpdateContent:function(t){this._super(t);var e=t.chart();e?(this._chartView||(this._chartView=new Y5(this._dom,this.container()),this.addChild(this._chartView)),e.setItemSource(t),this._chartView.setModel(e)):this._chartView&&(this.removeChild(this._chartView),this._chartView=null)},_doLayoutContent:function(t){if(this._super(t),this._chartView){var e=this._getRenderRect();this.deflatePadding2(e),this._chartView.setRectI(e),this._chartView.layoutContent(t)}},_doRenderCell:function(t,e){}}),m17=I1("FooterHeadElement",m4,{init:function(t){this._super(t,"footerHeadView"),t&&this.addElement(this._backView=(new J27).setVisible(!1)),this.addElement(this._menuView=new M9(t,this)),this._menuView.setVisible(!1)},renderer:null,text:null,menuVisible:!1,_doUpdateContent:function(t){this._super(t),this.setMenuVisible(t.menuVisible()),this.setText(t.displayText())},_doMeasure:function(t,e,i){},_doLayoutHandles:function(){},$_renderMenuText:function(t,e){var i,n=this._menuView,s=this.text(),r=s?t?t.getTextWidth(this._font,s):this.container().measureText(this._font,s):0,o=e.clone();this.inflatePadding(o),this._menuVisible?(n.setVisible(!0),i=n.measure(this._grid),r=Math.max(o.x,(o.width-i.width-r)/2),n.setBoundsI(r,o.y+(this.height()-i.height+1)/2,i.width,i.height),n.setBackground(this._background),n.setColor(this._shapeColor),n.setHoveredColor(this._shapeHoveredColor)):n.setVisible(!1),s&&(fill=this.color(),fill&&(n.visible()&&o.leftBy(n.right()),this._renderText(t,s,fill,o)))},_doRender:function(t,e){if(this._renderer)this._renderer.render(this,t,e);else{var i=this.background();i&&t.drawRect(i,null,e)}this.$_renderMenuText(t,e),W2.drawBorders(this,t,e)},_doRenderHtml:function(t){if(this._renderer)this._backView.setVisible(!0),this._renderer.renderHtml(this._backView,t);else{var e=this.background();this._css.background=e?e.css():""}this.$_renderMenuText(null,t),W2.drawHtmlBorders(this)}}),x5=I1("RowElement",W2,{init:function(t,e){this._super(t,e),this._item=null},item:function(){return this._item},row:function(){return this._item},rowIndex:function(){return this._item.index()},updateElement:function(t,e){this._item=t,this._doUpdateElement(e)},propertyChanged:function(t,e){this.invalidate()},_doLayoutContent:function(t){this._doLayoutHandles()},_doRender:function(t,e){},_doRenderHtml:function(t){},_doUpdateElement:function(t){},_doLayoutHandles:function(){},$_clearSelections:function(){},$_setSelections:function(t){}},{}),N6=I1("DataRowElement",x5,{init:function(t,e){this._super(t,e),this._cells={},this._displayIndex=-1},fixed:!1,background:null,borderBottom:null,findCell:function(t){return this.getCell(t)},getCell:function(t){if(t){var e=t.root(),i=this._cells[e.$_hash];if(i&&i.visible())return e!=t&&(i=i.findCell(t)),i}return null},getLeftCell:function(t){},_doUpdateElement:function(t){this.setBackground(t.background()),this.setBorderBottom(t.borderBottom()),this.$_wBottom=this._borderBottom?this._borderBottom.width():0},_doMeasure:function(t,e,i){return{width:e,height:i}},_doLayoutContent:function(t){this._prepareCells(t),0==this._displayIndex&&this._layoutColumnRects(t),this._layoutCells(t)},_doRender:function(t,e){this._background&&t.drawRectI(this._background,null,e);var i=this._borderBottom;i&&t.drawHLineI(this._borderBottom,e.bottom()-B1((i.width()+1)/2),e.x,e.right())},_doRenderHtml:function(t){var e=this._background;w4?this.$_setCssFill(e):this._css.background=e?e.css():"";var i=this._borderBottom;this._css.borderBottom=i?i.css():""},_getCellView:function(t){return this._cells[t.$_hash]},_getFirstCell:function(t){var e=this.fixed()?0:t.firstCol();return this._cells[t.getColumn(e).$_hash]},_clearChildren:function(){this.clear(),this._cells={}},_createCell:function(t){return t instanceof O1?new N0(this._dom):t instanceof Q7?t instanceof G5?new s37(this._dom):new j9(this._dom):t instanceof D6?new T37(this._dom):t instanceof h7?new B37(this._dom):new l4(this._dom)},_prepareCells:function(t){var e,i,n,s,r,o,a,h,l,u=this.grid(),d=u.body(),c=u.rowGroup(),_=t.fixedColCount(),f=u.isHorzScrolling(),g=t.columnMerged(),m=c.expanderVisible(),p=c.expandedAdornments()==X2.BOTH,w=j1.isDeleted(this._item.dataState());if(u.columnLayoutChanged()&&(this._clearChildren(),this._cells={}),f){for(var v in this._cells)this._cells[v]._recycling=!1;for(r=this._fixed?0:t.prevFirst(),o=this._fixed?_-1:t.prevLast(),e=r;e<o;e++)i=t.getColumn(e),(s=this._cells[i.$_hash])&&(s._recycling=!0)}for(this.hideAll(),r=this._fixed?0:t.firstCol(),o=this._fixed?_-1:t.lastCol(),this._fixed||t.lastCol()==t.lastCol2()||"none"==u.vscrollBar().barIndent()||(o=t.lastCol2()),this._endCol=o,e=r;e<=o;e++)i=t.getColumn(e),n=P1.temp(this._item.index(),i),t.getMergedCell(n)||(a=d.getCell(n),(s=this._cells[i.$_hash])||(this._cells[i.$_hash]=s=this._createCell(i),this.addElement(s)),s.setVisible(!0),s._rowView=this,s._rowBottom=this.$_wBottom,s instanceof l4&&(h=!1,g&&m&&i instanceof L2&&i.mergeGrouped()&&(h=1<(l=this._item.parent()).count()-(p?0:1)&&l.firstLeaf()==this._item),s.setExpanderVisible(h)),f&&!s._recycling||(s.setDeleted(w),s.updateCell(a)),s.setMouseEntered(!1),s instanceof y3&&s.setFocused(!1))},_layoutColumnRects:function(t){var e,i,n,s=this.grid(),r=(s._rootColumn,s.isHorzScrolling()),o=(t.fixedColCount(),this._fixed?0:t.firstCol()),a=this._endCol;for(e=o;e<=a;e++)(i=this._cells[t.getColumn(e).$_hash])&&i.visible()&&((n=t.getColumnBounds(e)).height=this.height(),i.index().column._layoutRect.copy(n),!(i instanceof O7)||r&&i._recycling||i.layoutColumnRects(t))},_layoutCells:function(t){for(var e,i,n,s,r,o,a,h,l=this.grid(),u=t._leftPos,d=u+t._nonfixedBounds.width,c=(l._rootColumn,l.isHorzScrolling()),_=(t.fixedColCount(),this._fixed?0:t.firstCol()),f=this._endCol,g=_;g<=f;)if(e=t.getColumn(g),(n=this._cells[e.$_hash])&&n.visible()){if(1<(s=1)){for(o=g+(r=1);o<g+s&&o<=f;o++)(a=this._cells[t.getColumn(o).$_hash])&&a.setVisible(!1),r++;s=r,i=t.getColumnBounds(g),h=t.getColumnBounds(g+s-1),i.setRight(h.right())}else i=t.getColumnBounds(g),s=1;i.height=this.height(),n._colspan=s,n._fixed=this._fixed,n.setRect(i),n instanceof N0&&(this._fixed||g!=_&&g!=f?n.$_needScr=!1:(n.$_needScr=!0,n.$_scrLeft=u,n.$_scrRight=d,n.$_scrX=i.x)),c&&n._recycling||n.layoutContent(t),g+=s}else g++},$_requestFill:function(t,e,i){this._parent.$_requestFill(t,e,i);var n=this._background,s=this._borderBottom;(n||s)&&(i=this.clientRectByChild(t,this._drawRect),n&&e.drawRectI(n,null,i),s&&e.drawHLineI(this._borderBottom,i.bottom()-B1((s.width()+1)/2),i.x,i.right()))},$_clearSelections:function(){var t,e,i=this._cells;for(t in i)(e=i[t]).$_setSelected(!1),e instanceof O7&&e.$_clearSelections()},$_setSelections:function(t,e){var i,n,s,r,o=t.length,a=this._cells;for(i in a){for(n=a[i],s=!1,r=o;r--;)if(t[r].contains(n._index)){s=!0;break}n.$_setSelected(s),n instanceof O7&&n.$_setSelections(t,e)}}}),f37=I1("RowGroupLevel",null,{init:function(t,e){this._super(),this._headerStyles=new o1(this,"rowGroupLevelHeaderStyles"),this._expanderStyles=new o1(this,"rowGroupLevelExpanderStyles"),this._footerStyles=new o1(this,"rowGroupLevelFooterStyles"),e&&this.assign(e),(this._owner=t)&&(this._headerStyles.setParent(t.headerStyles(),!1),this._expanderStyles.setParent(t.expanderStyles(),!1),this._footerStyles.setParent(t.footerStyles(),!1))},stylesChanged:function(){this._changed()},expanderVisible:void 0,headerHeight:void 0,footerHeight:void 0,headerStatement:void 0,headerStyles:null,expanderStyles:null,footerStyles:null,setExpanderVisible:function(t){return t!==this._expanderVisible&&(this._expanderVisible=t,this._changed()),this},setHeaderHeight:function(t){return t!==this._headerHeight&&(this._headerHeight=t,this._changed()),this},setFooterHeight:function(t){return t!==this._footerHeight&&(this._footerHeight=t,this._changed()),this},setHeaderStatement:function(t){return t!==this._headerStatement&&((this._headerStatement=t)&&!this._headerExp&&(this._headerExpr=new b8),this._headerExpr.setSource(t),this._changed()),this},setHeaderStyles:function(t){return t!==this._headerStyles&&(this._headerStyles.extend(t),this._changed()),this},setExpanderStyles:function(t){return t!==this._expanderStyles&&(this._expanderStyles.extend(t),this._changed()),this},setFooterStyles:function(t){return t!==this._footerStyles&&(this._footerStyles.extend(t),this._changed()),this},getExpanderVisible:function(){return void 0===this._expanderVisible&&this._owner?this._owner._expanderVisible:this._expanderVisible},getHeaderHeight:function(){return void 0===this._headerHeight&&this._owner?this._owner._headerHeight:this._headerHeight},getFooterHeight:function(){return void 0===this._footerHeight&&this._owner?this._owner._footerHeight:this._footerHeight},getHeaderText:function(t){var e=this._owner;if(e&&this._headerExpr)return e._headerRuntime.setGrid(e._grid),e._headerRuntime.setGroup(t),this._headerExpr.evaluate(e._headerRuntime)},_changed:function(){this._owner&&this._owner.levelChanged(this)}}),u37=I1("RowGroup",C5,{init:function(t){this._super(t),this._levels=[],this._headerItems=new S8(t,m9.HEADER),this._footerItems=new S8(t,m9.FOOTER),this._headStyles=new o1(this,"rowGroupHead"),this._headerStyles=new o1(this,"rowGroupHeader"),this._expanderStyles=new o1(this,"rowGroupExpander"),this._footerStyles=new o1(this,"rowGroupFooter"),this._indentStyles=new o1(this,"rowGroupIndent"),this._panelStyles=new o1(this,"rowGroupPanel"),this._barStyles=new o1(this,"rowGroupBar"),this._headerBarStyles=new o1(this,"rowGroupHeaderBar"),this._footerBarStyles=new o1(this,"rowGroupFooterBar"),this._headerCell=new G78(t,this),this._expanderCell=new M78(t),this._footerCell=new w6(t),this._indentCell=new W78(t),this._barCell=new J78(t),this._itemBarCell=new y78(t),this._headCell=new c78(t),this._footerRuntime=new Y3,this._runStyles=new o1(this,"rowGroupRuntimeStyles",null,!1),this._headerExpr=new b8(this._headerStatement),this._headerRuntime=new t3},stylesChanged:function(){this._changed()},levelChanged:function(t){this._changed()},levels:null,headerItems:null,footerItems:null,headerStyles:null,expanderStyles:null,footerStyles:null,indentStyles:null,panelStyles:null,barStyles:null,headerBarStyles:null,footerBarStyles:null,headStyles:null,headerStatement:"${groupField}: ${groupValue} - ${rowCount} rows",headerTextCallback:null,levelIndent:20,minHeaderIndent:8,headerHeight:0,minHeaderHeight:10,footerHeight:0,minFooterHeight:10,displayMode:u1(k6,k6.BANDED),expanderVisible:!0,createFooterCallback:null,expandedAdornments:u1(X2,X2.BOTH),collapsedAdornments:u1(X2,X2.HEADER),summaryHeader:!1,inheritsLevel:!0,mergedWhenUpdating:!1,summaryMode:u1(z4,z4.AGGREGATE),setMinHeaderIndent:function(t){return t=parseInt(t),isNaN(t)||(t=Math.max(0,t))!=this._minHeaderIndent&&(this._minHeaderIndent=t,this._changed()),this},setLevelIndent:function(t){return t=parseInt(t),isNaN(t)||(t=Math.max(0,t))!=this._levelIndent&&(this._levelIndent=t,this._changed()),this},levelCount:function(){return this._levels.length},levels_:function(){return this._levels.concat()},setLevels:function(t){if(t!==this._levels){var e,i;if(this._levels=[],t&&0<t.length)for(e=0;e<t.length;e++)(i=t[e])instanceof f37?this._levels.push(i):I4(i)?(i=new f37(this,i),this._levels.push(i)):this._levels.push(null);this._changed()}return this},setHeaderItems:function(t){return t!==this._headerItems&&(this._headerItems.assign(t),this._changed()),this},setFooterItems:function(t){return t!==this._footerItems&&(this._footerItems.assign(t),this._changed()),this},setHeaderStyles:function(t){return t!==this._headerStyles&&this._headerStyles.extend(t),this},setExpanderStyles:function(t){return t!=this._expanderStyles&&this._expanderStyles.extend(t),this},setFooterStyles:function(t){return t!=this._footerStyles&&this._footerStyles.extend(t),this},setIndentStyles:function(t){return t!=this._indentStyles&&this._indentStyles.extend(t),this},setHeadStyles:function(t){return t!==this._headStyles&&this._headStyles.extend(t),this},setHeaderStatement:function(t){return t!=this._headerStatement&&(this._headerStatement=t,this._headerExpr.setSource(t),this._changed()),this},setHeaderTextCallback:function(t){return b4(t)||(t=null),t!=this._headerTextCallback&&(this._headerTextCallback=t,this._changed()),this},setDisplayMode:function(t){return t!=this._displayMode&&(this._displayMode=t,this.owner()&&this.owner().$_rowGroupDisplayModeChanged()),this},setExpanderVisible:function(t){return t!=this._expanderVisible&&(this._expanderVisible=t,this._changed()),this},setCreateFooterCallback:function(t){if(b4(t)||(t=null),t!=this._createFooterCallback){this._createFooterCallback=t;var e=this.owner();e&&e.$_rowGroupAdornmentsChanged()}return this},setExpandedAdornments:function(t){if(t!=this._expandedAdornments){this._expandedAdornments=t;var e=this.owner();e&&e.$_rowGroupAdornmentsChanged()}return this},setCollapsedAdornments:function(t){if(t!=this._collapsedAdornments){this._collapsedAdornments=t;var e=this.owner();e&&e.$_rowGroupAdornmentsChanged()}return this},setSummaryHeader:function(t){if(t!=this._summaryHeader){this._summaryHeader=t;var e=this.owner();e&&e.$_rowGroupAdornmentsChanged()}return this},setSummaryMode:function(t){if(t!=this._summaryMode){this._summaryMode=t;var e=this.owner();e&&e.$_groupSummaryModeChanged()}return this},mergedWhenUpdating_:function(){var t=this.owner();return t&&t._editOptions.mergedWhenUpdating()},setMergedWhenUpdating:function(t){var e=this.owner();e&&e._editOptions.setMergedWhenUpdating(t)},isMergeMode:function(){return this._displayMode==k6.MERGED},mergeMode:function(){return this._displayMode==k6.MERGED},getLevel:function(t){var e=this._levels[t];if(!e&&this._inheritsLevel)for(;t--&&!(e=this._levels[t]););return e},registerGroupHeaderType:function(t,e){this._headerItems.registerType(t,e)},registerGroupFooterType:function(t,e){this._footerItems.registerType(t,e)},getHeaderCell:function(t){var e=this.owner().getRow(t),i=this.getLevel(e.level()-1);return this._runStyles.clearValues(),i?this._runStyles.setParent(i._headerStyles,!1):this._runStyles.setParent(this._headerStyles,!1),this._headerCell.setStyles(this._runStyles),this._headerCell.setIndex(P1.temp(t)),this._headerCell},getExpanderCell:function(t){var e=this.owner().getRow(t),i=this.getLevel(e.level()-1);return this._runStyles.clearValues(),i?this._runStyles.setParent(i._expanderStyles,!1):this._runStyles.setParent(this._expanderStyles,!1),this._expanderCell.setStyles(this._runStyles),this._expanderCell.setIndex(P1.temp(t)),this._expanderCell},getFooterCell:function(t){var e,i=this.owner().getRow(t.rowIndex).parent(),n=this.getLevel(i.level()-1),s=Q2(t.column,t2);return this._runStyles.clearValues(),s&&this._runStyles.extend(s.groupFooter().styles()),n?this._runStyles.setParent(n.footerStyles(),!1):this._runStyles.setParent(this._footerStyles,!1),this._footerCell.setIndex(t),this._footerCell.calculate(),s&&(e=s.groupFooter().dynamicStyles())&&0<e.count()&&(this._footerRuntime.setCell(this._footerCell),e.applyInternal(this._footerRuntime,this._runStyles)),this._footerCell.setStyles(this._runStyles),this._footerCell},getIndentCell:function(){return this._runStyles.clearValues(),this._runStyles.setParent(this._indentStyles,!1),this._indentCell.setStyles(this._runStyles),this._indentCell},getBarCell:function(t){this._barCell.setLevel(t);var e=this.getLevel(t-1);return e?this._barCell.setStyles(e.barStyles()):this._barCell.setStyles(this._barStyles),this._barCell},getHeaderBarCell:function(t){this._itemBarCell.setIndex(t);var e=this.getLevel(t.getRow(this._grid).level()-1);return e?this._itemBarCell.setStyles(e.headerBarStyles()):this._itemBarCell.setStyles(this._headerBarStyles),this._itemBarCell},getFooterBarCell:function(t){this._itemBarCell.setIndex(t);var e=t.getRow(this._grid).parent(),i=this.getLevel(e.level()-1);return i?this._itemBarCell.setStyles(i.footerBarStyles()):this._itemBarCell.setStyles(this._footerBarStyles),this._itemBarCell},getHeadCell:function(t){return this._headCell._level=t,this._headCell.setStyles(this._headStyles),this._headCell},getHeaderText:function(t){var e=this.getLevel(t.level()-1);if(e){var i=e.getHeaderText(t);if(void 0!==i)return i}return this._headerTextCallback?this._headerTextCallback(t):(this._headerRuntime.setGrid(this.owner()),this._headerRuntime.setGroup(t),this._headerExpr.evaluate(this._headerRuntime))},clearStyles:function(t){t&&(this._headStyles.clearValues(),this._headerStyles.clearValues(),this._expanderStyles.clearValues(),this._footerStyles.clearValues(),this._indentStyles.clearValues(),this._panelStyles.clearValues(),this._barStyles.clearValues(),this._headerBarStyles.clearValues(),this._footerBarStyles.clearValues())},getPopupMenu:function(){var t,e,i,n,s=this.owner(),r=this.mergeMode()?s.getDataRootColumns():s.getDataColumns();if(r&&0<r.length){for(t=r.length;t--;)for(e=0;e<t;e++)if(r[t].dataIndex()==r[e].dataIndex()){r.splice(t,1);break}for(n=[],t=0,cnt=r.length;t<cnt;t++)i=r[t],n.push({label:i.header().displayText(),checked:0<s.getGroupLevel(i.dataIndex()),tag:i.dataIndex(),callback:function(t){t.checked?s.removeGroupBy(t.tag):s.addGroupBy(1e5,t.tag)}});return new E4("rowGroup",s.popupMenuManager(),n)}return null}}),k9=I1("RowGroupExpandHandle",X3,{init:function(t,e){this._super(t,e,"rowGroupExpandHandle"),this.setClickable(!0)},expanded:!1,color:null,fill:null,_doDraw:function(t){var e=this.clientRect(),i=this.fill();i&&t.drawRectI(i,null,e),this.expanded()?$$_drawDownArrow(t,e,9,this.color()):$$_drawRightArrow(t,e,9,this.color())},_doDrawHtml:function(){this._doDraw(this.$_getGraphics(!0))}}),D47=I1("RowGroupExpanderElement",m4,{init:function(t,e){this._super(t,e||"rowGroupExpanderView"),this._handle=new k9(t,this),this.addElement(this._handle)},setIndent:function(t){this._indent=t},setHandleVisible:function(t){this._handle.setVisible(t)},getHandleWidth:function(){return 15},_doUpdateContent:function(t){if(this._super(t),this._handle.visible()){var e=t.index().getRow(this._grid),i=t.styles();this._handle.setColor(i.shapeColor()),this._handle.setFill(null),this._handle.setExpanded(e instanceof j2&&e.expanded())}},_doLayoutContent:function(t){this._handle.visible()&&this._handle.setBounds(0+this._indent,1,this.width()-this._indent,this.height()-2)},_doRender:function(t,e){var i=this.background();i&&t.drawRectI(i,null,e),this._drawBorders(t,e)},_doRenderHtml:function(t){var e=this.background();w4?this.$_setCssFill(e):this._css.background=e?e.css():"",this._drawHtmlBorders()}}),c3=I1("GroupRowElement",x5,{init:function(t,e){this._super(t,e)},background:null,borderBottom:null,_doUpdateElement:function(t){this.setBackground(t.background()),this.setBorderBottom(t.borderBottom()),this.$_wBottom=this._borderBottom?this._borderBottom.width():0},_doMesasure:function(t,e,i){return{width:e,height:i}},_doLayoutContent:function(t){},_doRender:function(t,e){this._background&&t.drawRectI(this._background,null,e);var i=this._borderBottom;i&&t.drawHLineI(this._borderBottom,e.bottom()-B1((i.width()+1)/2),e.x,e.right())},_doRenderHtml:function(t){var e=this._background;w4?this.$_setCssFill(e):this._css.background=e?e.css():"";var i=this._borderBottom;this._css.borderBottom=i?i.css():""}}),U9=I1("RowGroupFooterElement",c3,{init:function(t){this._super(t,"rowGroupFooterView"),this._fixed=!1,this._cells={}},fixed:function(){return this._fixed},setFixed:function(t){this._fixed=t},findCell:function(t){if(t){var e=t.root(),i=this._cells[e.$_hash];if(i&&i.visible())return e!=t&&(i=i.findCell(t)),i}return null},_doUpdateElement:function(t){this._super(t)},_doMeasure:function(t,e,i){return new J2(e,i)},_doLayoutContent:function(t){var e=t.grid();e.columnLayoutChanged()&&(this.clear(),this._cells={}),this._prepareCells(t,e),this._layoutCells(t,e)},_doRender:function(t,e){if(this._fixed){var i,n,s=this.grid(),r=s.displayOptions(),o=r.fixedColumnBarStyles().background(),a=r.fixedColumnBarStyles().borderRight();e.setLeft(e.right()-s.body().fixedColBarWidth()),o&&t.drawRectI(o,null,e),a&&(i=e.right()-1,n=e.bottom(),t.drawLineI(a,i,e.y(),i,n))}},_doDraw:function(t){},_doDrawHtml:function(t){},_createCellView:function(t,e,i){var n=P1.temp(e,i),s=t.getFooterCell(n),r=this._cells[i.$_hash];return r instanceof m4||(r=i instanceof O1?new Y7(this._dom):new b6(this._dom),this._cells[i.$_hash]=r,this.addElement(r)),r.setVisible(!0),r.updateCell(s),r},_prepareCells:function(t,e){var i,n,s=e.rowGroup(),r=this._item.index(),o=t.fixedColCount(),a=this._fixed?0:t.firstCol(),h=this._fixed?o-1:t.lastCol();for(this.hideAll(),i=a;i<=h;i++)n=t.getColumn(i),this._createCellView(s,r,n)},_layoutCells:function(t,e){var i,n,s,r,o,a,h=e.rowGroup(),l=this._item.index(),u=e.leftPos(),d=this.height(),c=this._cells,_=this._fixed,f=t.fixedColCount(),g=_?0:t.firstCol(),m=_?f-1:t.lastCol(),p=t.getColumn(g),w=p&&(p=p.parent()).$_groupFooterSpanned?p.$_groupFooterSpans:null;if(w)for(i=g;i<=m;){for(a=t.columnBounds(i),n=t.getColumn(i),s=w[i++],r=this._createCellView(h,l,s),n!==s&&(o=c[n.$_hash])&&o.setVisible(!1);i<=m&&(n=w[i])===s;i++)a.width+=t.getColumnBounds(i).width,(n=t.getColumn(i))!==s&&(o=c[n.$_hash])&&o.setVisible(!1);_||(a.x-=u),a.height=d,r.setRect(a),r.layoutContent(t)}else for(i=g;i<=m;i++)r=c[t.getColumn(i).$_hash],a=t.columnBounds(i),_||(a.x-=u),a.height=d,r.setRect(a),r.layoutContent(t)}}),Q47=I1("RowGroupElement",K0,{init:function(t,e,i){this._super(t,e,i)}}),F47=I1("RowGroupHeadCellElement",m4,{init:function(t,e){this._super(t,e||"rowGroupHeadCellView")},level:0,_doUpdateContent:function(t){this._super(t),this._level=t._level},_doMeasure:function(t,e,i){return new J2(e,t.header().minHeight())},_doRender:function(t,e){var i=this.background();i&&t.drawRectI(i,null,e),this._drawBorders(t,e)},_doRenderHtml:function(t){var e=this.background();w4?this.$_setCssFill(e):this._css.background=e?e.css():"",this._drawHtmlBorders()}}),K78=I1("RowGroupHeadElement",D4,{init:function(t){this._super(t,"rowGroupHeadView"),this._cells=[]},layoutContent:function(t){var e,i,n,s,r=t.grid(),o=r.rowGroup(),a=0,h=o.levelIndent(),l=t.headerBounds().height;for(this.$_prepareCells(r.getGroupLevels()),e=0,i=this.childCount();e<i;e++)(n=this._cells[e]).setBounds(a,0,h,l),a+=h,s=o.getHeadCell(e+1),n.updateCell(s),n.layoutContent(t)},$_prepareCells:function(t){for(;this._cells.length<t;){var e=new F47(this._dom);this._cells.push(e)}for(;this.childCount()<t;)this.addElement(this._cells[this.childCount()]);for(;this.childCount()>t;)this.removeChildAt(this.childCount()-1)}}),O3=I1("RowGroupHeaderCellElement",m4,{init:function(t){this._super(t,"rowGroupHeaderCellView")},text:null,borderLeft:function(){return null},_doPrepareValue:function(t){this._super(t),this.setText(t.displayText())},_doMeasure:function(t,e,i){return new J2(e,i)},_doRender:function(t,e){var i,n;(i=this.background())&&t.drawRect(i,null,e),n=this._getRenderRect(e),n=this.inflatePadding(n),t.drawTextRect(this.font(),this.color(),this.text(),n,this.textAlign()),this._drawBorders(t,e)},_doRenderHtml:function(t){var e,i,n,s;e=this.background(),w4?this.$_setCssFill(e):this._css.background=e?e.css():"",i=this.$_prepareSpan(),n=this.text(),s=this._getRenderRect(t),s=this.inflatePadding(s),w1.renderTextBounds(i,this.font(),this.color(),n,t.x,t.y,t.width,t.height,this.textAlign()),this._drawHtmlBorders()}}),j3=I1("BandedRowGroupHeaderCellElement",m4,{init:function(t){this._super(t,"bandedRowGroupHeaderCellView")},text:null,_doPrepareValue:function(t){this._super(t),this.setText(t.displayText())},_doMeasure:function(t,e,i){return new J2(e,i)},_doRender:function(t,e){var i,n;(i=this.background())&&t.drawRect(i,null,e),n=this._getRenderRect(e),n=this.inflatePadding(n),t.drawTextRect(this.font(),this.color(),this.text(),n,this.textAlign()),this._drawBorders(t,e)},_doRenderHtml:function(t){var e,i,n,s;e=this.background(),w4?this.$_setCssFill(e):this._css.background=e?e.css():"",i=this.$_prepareSpan(),n=this.text(),s=this._getRenderRect(t),s=this.inflatePadding(s),w1.renderTextBounds(i,this.font(),this.color(),n,s.x,s.y,s.width,s.height,this.textAlign()),this._drawHtmlBorders()}}),p47=I1("BandedRowGroupHeaderElement",c3,{init:function(t){this._super(t,"bandedRowGroupHeaderView"),this._expander=new D47(t),this.addElement(this._expander),this._cellView=new j3(t),this.addElement(this._cellView)},cellView:function(){return this._cellView},_doUpdateElement:function(t){this._super(t)},_doMeasure:function(t,e,i){return new J2(e,i)},_doLayoutContent:function(t){var e=this.grid().rowGroup(),i=this._item,n=e.getLevel(i.level()-1),s=(n?n.getExpanderVisible():e.expanderVisible())?this._expander.getHandleWidth():0,r=(i.level()-1)*Math.max(e.levelIndent(),e.minHeaderIndent())+s,o=this._expander;o.setHandleVisible(0<s),o.setIndent(r-s),o.updateCell(e.getExpanderCell(i.index())),o.setBounds(0,0,r,this.height()),o.layoutContent(t),(o=this._cellView)._header=i,o.updateCell(e.getHeaderCell(i.index())),o.setBounds(r,0,this.width()-r,this.height())},_doRender:function(t,e){},_doRenderHtml:function(t){}}),g37=I1("BandedRowGroupIndentCellElement",m4,{init:function(t){this._super(t,"bandedRowGroupIndentCellView")},text:null,_doPrepareValue:function(t){},_doUpdateContent:function(t){},_doMeasure:function(t,e,i){},_doRender:function(t,e){var i=this.background();i&&t.drawRect(i,null,e),this._drawBorders(t,e)},_doRenderHtml:function(t){var e=this.background();w4?this.$_setCssFill(e):this._css.background=e?e.css():"",this._drawHtmlBorders()}}),N78=I1("BandedRowGroupElement",Q47,{init:function(t,e){this._super(t,"bandedRowGroupLayer",e),this._headers=[],this._headerBuff=[],this._headerViews=[],this._footers=[],this._footerBuff=[],this._fixedFooterBuff=[],this._footerViews=[],this._fixedFooterViews=[],this._customHeaders=[],this._customHeaderBuff=[],this._customHeaderViews=[],this._customFooters=[],this._customFooterBuff=[],this._customFooterViews=[],this._fixedIndentView=null,this._indentViews=[],this._indentCount=0,this.setWidth(101),this.setHeight(101),this.setClickable(!1)},model:function(){return this._model},levelCount:function(){return this.grid().layoutManager().rowGroupLevels()},indentCount:function(){return this._indentCount},clearBody:function(){this._headers=[],this._footers=[],this._customHeaders=[],this._customFooters=[]},addHeader:function(t){this._headers.push(t)},addFooter:function(t){this._footers.push(t)},addCustomHeader:function(t){this._customHeaders.push(t)},addCustomFooter:function(t){this._customFooters.push(t)},findRowView:function(t){var e;for(e=this._headerViews.length;e--;)if(this._headerViews[e].rowIndex()==t)return this._headerViews[e];for(e=this._footerViews.length;e--;)if(this._footerViews[e].rowIndex()==t)return this._footerViews[e]},isLayer:function(){return!0},getCellView:function(t,e){var i=t.getRow(this.grid());if(i instanceof j2||i instanceof m7||i instanceof M3)for(var n=0,s=this.childCount();n<s;n++){var r=this.getChild(n);if(r instanceof p47&&r.visible()&&r.rowIndex()==t.rowIndex)return r.cellView();if(r instanceof U9&&r._fixed==e&&r.visible()&&r.rowIndex()==t.rowIndex)return r;if(i instanceof M3&&r instanceof c3&&r.rowIndex()==t.rowIndex)return r}return null},_doMeasure:function(t,e,i){return new J2(this.levelCount()*t.rowGroup().levelIndent(),i)},_doLayoutContent:function(t){var e=this.grid();this.$_layoutIndents(e,t),this.$_layoutHeaders(e,t),this.$_layoutCustomHeaders(e,t),this.$_layoutFooters(e,t),this.$_layoutCustomFooters(e,t)},_doDraw:function(t){},_doDrawHtml:function(t){},$_layoutIndents:function(t,e){var i,n,s,r,o,a,h,l,u,d,c,_=t.itemSource();for(i=0,n=this._indentViews.length;i<n;i++)this._indentViews[i].recycling=!1;for(s=e.fixedItemCount(),r=this._fixedIndentView,0<s?(r||(r=this._fixedIndentView=new g37(this._dom),this.addElement(r)),r.setVisible(!0)):r&&(r.setVisible(!1),r=null),o=e.itemCount(),a=e.topIndex(),h=null,n=i=0;i<o;i++)_.getItem(a+i+s)instanceof j2?h&&(h.$_tail=s+i-1,h=null):h?h.$_tail=s+i:(this._indentViews.length>n?h=this._indentViews[n]:(this._indentViews.push(h=new g37(this._dom)),this.addElement(h)),h.$_head=s+i,n++);for(i=0;i<n;i++)this._indentViews[i].setVisible(!0);for(i=n;i<this._indentViews.length;i++)this._indentViews[i].setVisible(!1);for(this._indentCount=n,l=t.rowGroup().getIndentCell(),u=e.rowGroupLevels()*t.rowGroup().levelIndent(),r&&(d=e.itemBounds(0).y,c=e.itemBounds(s-1).bottom()-d,r.updateCell(l),r.setBounds(0,d,u,c)),i=0;i<n;i++)h=this._indentViews[i],d=e.itemBounds(h.$_head).y,c=e.itemBounds(h.$_tail).bottom()-d,h.updateCell(l),h.setBounds(0,d,u,c)},$_layoutHeaders:function(t,e){var i,n,s,r,o,a=this.model(),h=(a.levelIndent(),this._headerViews.length);for(i=0;i<h;i++)this._headerViews[i].recycling=!1;for(;h<this._headers.length;)n=this.$_borrowHeaderView(this._headers[h++]),this.addElement(n),this._headerViews.push(n);for(;h>this._headers.length;)this.$_removeHeaderView(this._headerViews[--h]),this._headerViews.pop();for(i=0;i<h;i++)s=this._headers[i],r=(n=this._headerViews[i]).item()!==s,n.updateElement(s,a.headerStyles()),0,(o=e.itemBounds(s.index()-t.topIndex())).setLeft(0),o.width=this.width()-0-t.leftPos(),n.setRect(o),!r&&n.recycling||n.layoutContent(e)},$_removeHeaderView:function(t){var e=this.getChildIndex(t);0<=e&&(this.removeChildAt(e),t.validate(!0),this._headerBuff.push(t))},$_borrowHeaderView:function(t){var e;return(e=0<this._headerBuff.length?this._headerBuff.pop():this.grid().delegate().borrowItemView(t,!1)).recycling=!1,e},$_layoutCustomHeaders:function(t,e){var i,n,s,r,o,a,h=this.model().levelIndent(),l=this._customHeaderViews.length;for(i=0;i<l;i++)this._customHeaderViews[i].recycling=!1;for(;l<this._customHeaders.length;)n=this.$_borrowCustomHeaderView(this._customHeaders[l++]),this.addElement(n),this._customHeaderViews.push(n);for(;l>this._customHeaders.length;)this.$_removeCustomHeaderView(this._customHeaderViews[--l]),this._customHeaderViews.pop();for(i=0;i<l;i++)s=this._customHeaders[i],r=(n=this._customHeaderViews[i]).item()!==s,n.updateElement(s,s.model().styles()),o=e.itemBounds(s.index()-t.topIndex()),a=(s.level()-1)*h,o.setLeft(a),o.width=this.width()-a-t.leftPos(),n.setRect(o),!r&&n.recycling||n.layoutContent(e)},$_borrowCustomHeaderView:function(t){var e;return(e=0<this._customHeaderBuff.length?this._customHeaderBuff.pop():t.model().createRowView(this._dom)).recycling=!1,e},$_removeCustomHeaderView:function(t){var e=this.getChildIndex(t);0<=e&&(this.removeChildAt(e),t.validate(!0),this._customHeaderBuff.push(t))},$_layoutFooters:function(t,e){var i,n,s,r,o,a,h,l,u=this.width(),d=this.model(),c=d.footerStyles(),_=e.rowGroupLevels(),f=d.levelIndent(),g=0<e.fixedColCount(),m=e.fixedWidth(),p=t.topIndex(),w=t.leftPos();for(i=this._footerViews.length,n=0;n<i;n++)this._footerViews[n].recycling=!1;for(;i<this._footers.length;)s=this.$_borrowFooterView(this._footers[i]),this.addElement(s),this._footerViews.push(s),i++;for(;i>this._footers.length;)i--,this.$_removeFooterView(this._footerViews[i]),this._footerViews.pop();for(n=0;n<i;n++)r=this._footers[n],(s=this._footerViews[n])._fixed=!1,o=s.item()!==r,s.updateElement(r,c),h=_*f+m,(a=e.itemBounds(r.index()-p)).setLeft(h),a.width=u-h-w,s.setRect(a),!o&&s.recycling||s.layoutContent(e);if(g){for(i=this._fixedFooterViews.length,n=0;n<i;n++)this._fixedFooterViews[n].recycling=!1;for(;i<this._footers.length;)s=this.$_borrowFixedFooterView(this._footers[i]),this.addElement(s),this._fixedFooterViews.push(s),i++;for(;i>this._footers.length;)i--,this.$_removeFixedFooterView(this._fixedFooterViews[i]),this._fixedFooterViews.pop();for(l=t.body().fixedColumnBarWidth(),n=0;n<i;n++)r=this._footers[n],(s=this._fixedFooterViews[n])._fixed=!0,o=s.item()!==r,s.updateElement(r,d.footerStyles()),h=_*f,(a=e.itemBounds(r.index()-p)).setLeft(h),a.width=m-l,s.setRect(a),!o&&s.recycling||s.layoutContent(e)}},$_removeFooterView:function(t){var e=this.getChildIndex(t);0<=e&&(this.removeChildAt(e),t.validate(!0),this._footerBuff.push(t))},$_removeFixedFooterView:function(t){var e=this.getChildIndex(t);0<=e&&(this.removeChildAt(e),t.validate(!0),this._fixedFooterBuff.push(t))},$_borrowFooterView:function(t){var e;return(e=0<this._footerBuff.length?this._footerBuff.pop():this.grid().delegate().borrowItemView(t,!1)).recycling=!1,e},$_borrowFixedFooterView:function(t){var e;return(e=0<this._fixedFooterBuff.length?this._fixedFooterBuff.pop():this.grid().delegate().borrowItemView(t,!0)).recycling=!1,e},$_layoutCustomFooters:function(t,e){var i,n,s,r,o,a,h=this.model().levelIndent(),l=this._customFooterViews.length;for(i=0;i<l;i++)this._customFooterViews[i].recycling=!1;for(;l<this._customFooters.length;)n=this.$_borrowCustomFooterView(this._customFooters[l++]),this.addElement(n),this._customFooterViews.push(n);for(;l>this._customFooters.length;)this.$_removeCustomFooterView(this._customFooterViews[--l]),this._customFooterViews.pop();for(i=0;i<l;i++)s=this._customFooters[i],r=(n=this._customFooterViews[i]).item()!==s,n.updateElement(s,s.model().styles()),o=e.itemBounds(s.index()-t.topIndex()),a=(s.level()-1)*h,o.setLeft(a),o.width=this.width()-a-t.leftPos(),n.setRect(o),!r&&n.recycling||n.layoutContent(e)},$_borrowCustomFooterView:function(t){var e;return(e=0<this._customFooterBuff.length?this._customFooterBuff.pop():t.model().createRowView(this._dom)).recycling=!1,e},$_removeCustomFooterView:function(t){var e=this.getChildIndex(t);0<=e&&(this.removeChildAt(e),t.validate(!0),this._customFooterBuff.push(t))}}),r37=I1("GridMergeRule",null,{init:function(){this._super()},parseInit:function(t,e,i,n,s){y4()},parseBounds:function(t,e,i,n,s){y4()}}),k3=I1("RowGroupMergeRule",r37,{init:function(){this._super(),this._level=0,this._mergeMode=!1},parseInit:function(t,e,i,n,s){var r=t.rowCount(),o=e.dataIndex();(n=Math.min(r-i,n))<1||(this._mergeMode?this.$_parseMerged(t,o,i,n,s):this.$_parseNormal(t,o,i,n,s))},parseBounds:function(t,e,i,n,s){if(!(t.rowCount()<1)){var r,o=e.dataIndex();for(i=Math.max(0,i);0<=i&&s[i]<=0&&(r=t.getItem(i))!=this.$_getAncestor(r,this._level);)i--;for(i=Math.max(0,i);i<=n&&0<s[i];)i++;i<=n&&(this._mergeMode?this.$_parseMergedBounds(t,o,i,n,s):this.$_parseNormalBounds(t,o,i,n,s))}},$_getAncestor:function(t,e){var i=Q2(t,j2);for(i||(i=t.parent());i.level()>e;)i=i.parent();return i},$_parseNormal:function(t,e,i,n,s){var r=t.rowCount();if(!(r<1)){var o=t.getItem(i),a=o,h=i,l=h+1;for(s[h]=h+1;l<r;)(o=t.getItem(l)).level()==a.level()&&o.constructor===a.constructor||(h=l),s[l]=h+1,l++,a=o}},$_parseMerged:function(t,e,i,n,s){var r=t.rowCount();if(!(r<1))for(var o,a=t.getItem(i),h=this.$_getAncestor(a,this._level),l=i,u=s[l]=l+1;u<r;){if(a=t.getItem(u),(o=this.$_getAncestor(a,this._level))!=h){if(n<=u)break;h=o,l=u}s[u]=l+1,u++}},$_parseNormalBounds:function(t,e,i,n,s){var r=t.rowCount();if(!(r<1)){var o=t.getItem(i),a=o,h=i,l=h+1;for(s[h]=h+1;l<r;)(o=t.getItem(l)).level()==a.level()&&o.constructor===a.constructor||(h=l),s[l]=h+1,l++,a=o}},$_parseMergedBounds:function(t,e,i,n,s){var r=t.rowCount();if(!(r<1)){var o,a=t.getItem(i),h=this.$_getAncestor(a,this._level),l=i,u=l+1;for(s[l]=l+1;u<r;){if(a=t.getItem(u),(o=this.$_getAncestor(a,this._level))!=h){if(n<u)break;h=o,l=u}s[u]=l+1,u++}}}});k3.$_default=new k3,k3.INIT_COUNT=200,k3.getDefault=function(t,e){var i=k3.$_default;return i._level=t,i._mergeMode=e,i};var d9=I1("ColumnMergeRule",r37,{init:function(t){this._super(),this._runtime=d9.$_runtime=d9.$_runtime||new h0,this._exprNode=null,t&&this.setCriteria(t)},criteria:null,setCriteria:function(t){(t=t?t.trim():null)!=this._criteria&&(this._criteria=t,this._exprNode=t?J4.Default.parse(t,null):null,this._changed())},setCallback:function(t){(t=p4(t))!=this._callback&&(this._callback=t,this._changed())},active:function(){return this._exprNode||this._callback},$_isRow:function(t,e){var i,n=t instanceof v4;return n&&!e&&(n=(i=t.parent()).expanded()||i.firstLeaf()!=t),n},$_getValueFunc:function(t,e){var i,n;return this._callback?this._callback:e?t instanceof Q7?function(t,e){return e.getValue(t).join("")}:(n=t.dataIndex(),function(t,e){return t.getValue(n)}):(i=this,n=t.dataIndex?t.dataIndex():-1,function(t){return i._runtime.setItem(t,n),i._exprNode.evaluate(i._runtime)})},parseInit:function(t,e,i,n,s){var r=t.rowCount();if(!((n=Math.min(r-i,n))<1)){for(var o,a,h,l,u,d,c=null,_=i;_<r&&(c=t.getItem(_),!this.$_isRow(c,!1));)s[_]=_+1,_++;if(!(r<=_))for(this._runtime.setDataSource(t.dataSource(),e.grid()),o=!this._callback&&this._exprNode.isIdentifier("value"),a=this.$_getValueFunc(e,o),h=i=_,l=o&&e.valueType()==a1.DATETIME,s[h]=h+1,u=a(c,e),_=i+1;_<r;_++)if(c=t.getItem(_),this.$_isRow(c,!1)){if(d=a(c,e),!(l&&d&&u?d.getTime()==u.getTime():d==u)){if(n<=_)break;h=_,u=d}s[_]=h+1}else{if(n<=_)break;u=c2,s[h=_]=h+1}}},parseBounds:function(t,e,i,n,s){var r=t.rowCount();if(!(r<1)){var o,a,h,l,u,d=!this._callback&&this._exprNode.isIdentifier("value"),c=this.$_getValueFunc(e,d),_=c2,f=Math.max(0,i),g=f,m=-1,p=d&&e.valueType()==a1.DATETIME;if(0<f&&s[f]<=0)if(o=t.getItem(f),this.$_isRow(o,!1)){for(a=c(o,e),f--;0<=f&&(o=t.getItem(f),this.$_isRow(o,!1))&&(_=c(o,e),u=p&&_&&a?_.getTime()==a.getTime():_==a);)f--;for(h=g-1;f<h;h--)s[h]=f+2;f<g-1&&(m=f+1)}else{for(s[f]=f+1,h=g-1;f<h;h--)s[h]=f+2;for(f+1<g-1&&(m=f+2),f--;0<=f&&s[f]<=0&&!this.$_isRow(t.getItem(f),!1);)s[f]=f+1,f--}for(f=Math.max(0,i);f<=n&&0<s[f];)f++;for(;f<=n&&!this.$_isRow(t.getItem(f),!1);)s[f]=f+1,f++;if(f<=n&&f<r){for(g=f,a=c(o=t.getItem(f),e),f++;f<r;)if(o=t.getItem(f),this.$_isRow(o,!1)){if(_=c(o,e),u=p&&_&&a?_.getTime()==a.getTime():_==a)s[f]=g+1;else{for(l=g,0<=m&&(l=m,m=-1),h=g;h<f;h++)s[h]=l+1;if(n<=f)break;a=_,g=f}f++}else{for(l=g,0<=m&&(l=m,m=-1),h=g;h<f;h++)s[h]=l+1;for(s[f]=f+1,f++;f<r&&!this.$_isRow(t.getItem(f),!1);)s[f]=f+1,f++;if(n<=(g=f))break}if(u=p&&_&&a?_.getTime()==a.getTime():_==a,f==r&&u)for(l=0<=m?m:g,h=g;h<f;h++)s[h]=l+1}}},_changed:function(){}},{INIT_COUNT:200},function(t){t.$_runtime=null}),P78=I1("GridMergeRoom",null,{init:function(){this._super()},scope:function(){},group:function(){},headItem:function(){return-1},tailItem:function(){return-1},length:function(){return this.tailItem()-this.headItem()+1},getHead:function(t){},getTail:function(t){},isHead:function(t){},isTail:function(t){},contains:function(t){},containsRow:function(t){}}),L5=I1("ColumnMergeRoom",P78,{init:function(t){this._super(),this._column=t.C1(),this._head=t.top(),this._tail=t.bottom(),this._group=null},column:function(){return this._column},head:function(){return this._head},tail:function(){return this._tail},scope:function(){return this._column},group:function(){return this._group},setGroup:function(t){this._group=t},headItem:function(){return this._head},tailItem:function(){return this._tail},length:function(){return this._tail-this._head+1},getHead:function(t){return t?t.set(this._head,this._column):t=this._column.grid().getIndex(this._head,this._column),t},getTail:function(t){return t?t.set(this._tail,this._column):t=this._column.grid().getIndex(this._tail,this._column),t},isHead:function(t){return t.column==this._column&&t.rowIndex==this._head},isTail:function(t){return t.column==this._column&&t.rowIndex==this._tail},contains:function(t){return t.column==this._column&&t.rowIndex>=this._head&&t.rowIndex<=this._tail},containsRow:function(t){return t>=this._head&&t<=this._tail}},{$_rooms:[],$_roomCount:0,borrow:function(t){var e=L5.$_rooms.pop();return e?(e._head=t.top(),e._tail=t.bottom()):e=new L5(t),e},returnTo:function(t){var e,i,n;if(t){for(i=0,n=(e=L5.$_rooms).length;i<n;i++)if(e[i]===t)return;e.push(t)}}}),f4=I1("ColumnMergeManager",null,{init:function(t){this._super(),this._column=t,this._flags=null,this._rooms=[],this._inited=!1},count:function(){return this._rooms.length},clear:function(){this._flags=null,this._rooms.splice(0,this._rooms.length),this._inited=!1},initialize:function(t){if(!this._inited){var e,i,n=this._column,s=Q2(n,L2),r=n.grid(),o=r.rowGroup(),a=r.itemSource(),h=r.isGroupedColumn(s)?k3.getDefault(r.getGroupLevel(s.dataIndex()),o.mergeMode()):n.mergeRule();if(h){for(e=this._flags=new Array(a.rowCount()),i=a.rowCount();i--;)e[i]=0;h.parseInit(a,n,r.layoutManager().fixedItemCount(),t,e)}this._inited=!0}},refresh:function(t,e){if(this._inited&&this._flags&&!(e<t)){var i,n,s,r,o=this._column,a=Q2(o,L2),h=o.grid(),l=!o._canSplit()||h.editOptions().mergedWhenUpdating()&&!h.isColumnEdited(o),u=h.layoutManager().fixedItemCount(),d=h.itemSource(),c=a?h.getGroupLevel(a.dataIndex()):-1,_=0<c?k3.getDefault(c,h.rowGroup().mergeMode()):o.mergeRule(),f=t;for(this._rooms.length=0,_&&_.parseBounds(d,o,t,e,this._flags);f<=e;)if(i=this.$_checkMerge(d,o,f,0==this._rooms.length,u,l)){if(c<1)n=new L5(i),this._rooms.push(n);else if((s=d.getItem(i.top())).level()>=c){for(r=s instanceof j2?s:s.parent();r.level()>c;)r=r.parent();(n=new L5(i)).setGroup(r),this._rooms.push(n)}f=i.R2()+1}else f+=1}},getRooms:function(){return this._rooms.slice()},scroll:function(t){},getRoom:function(t){for(var e=this._rooms,i=e.length-1;0<=i;i--)if(e[i].contains(t))return e[i];return null},getRoomAtRow:function(t,e){var i,n,s=this._rooms,r=s.length;for(i=r-1;0<=i;i--)if((n=s[i]).containsRow(t))return n;if(e)for(this.refresh(i,this._column.grid().rowCount()-1),i=r;i<s.length;i++)if((n=s[i]).containsRow(t))return n},$_isEditing:function(t,e){var i=t.rowState();return i==T1.INSERTING||i==T1.APPENDING||i==T1.UPDATING&&!e},$_checkMerge:function(t,e,i,n,s,r){if(t&&e&&0<=i){var o,a,h,l,u=i,d=this._flags[u],c=t.getItem(u);if(d<=0||this.$_isEditing(c,r))return null;if(n)for(;s<u&&!(this._flags[u-1]<d||this.$_isEditing(t.getItem(u-1),r));)u--;for(o=t.rowCount(),a=i+1;a<o;){if(l=this.$_isEditing(t.getItem(a),r),this._flags[a]>d||this._flags[a]<=0||l)return u+1<a?L4.createRange(u,e,a-1,e):(c=t.getItem(u),h=e instanceof L2?e.groupLevel():-1,c instanceof P0&&c.collapsed()?L4.createRange(u,e,a-1,e):c instanceof o0&&c.parent().level()==h&&(a==i+1||c.parent().collapsed())?L4.createRange(u,e,a-1,e):c instanceof o0?null:(c instanceof P0||c instanceof o0)&&c.parent().level()>h?L4.createRange(u,e,a-1,e):null);a++}if(u<a)return u+1<a?L4.createRange(u,e,a-1,e):(c=t.getItem(u),h=e instanceof L2?e.groupLevel():-1,c instanceof P0&&c.collapsed()?L4.createRange(u,e,a-1,e):c instanceof o0&&c.parent().level()==h&&(a==i+1||c.parent().collapsed())?L4.createRange(u,e,a-1,e):c instanceof o0?null:(c instanceof P0||c instanceof o0)&&c.parent().level()>h?L4.createRange(u,e,a-1,e):null)}return null}},{MERGE_ROOMS:"mergeRooms"}),o0=I1("MergedGroupFooter",m7,{init:function(){this._super()},merged:function(){return!0}}),P0=I1("MergedGroupHeader",j2,{init:function(t,e){this._super(),this._groupField=t,this._value=e,this._footer=null},groupField:function(){return this._groupField},groupValue:function(){return this._groupValue},footer:function(){return this._footer},merged:function(){return!0},_addChild:function(t,e){this._super(t,e),t instanceof m7&&(this._footer=t)}}),Z78=I1("MergedDataCell",t37,{init:function(t,e){this._super(t,e||"mergedDataCell"),this._grid=t,this._runtime=null},value:function(){var t,e,i,n=this.index(),s=n.column,r=n.getRow(this._grid);return t=r instanceof v4?this._super():(r=(r instanceof j2?r:r.parent()).firstLeaf()).getValue(n.dataField()),(e=s.mergeValueCallback())?t=e(r,s,t):(i=this._exprNode)&&(this._runtime.setValue(r,s.dataIndex(),t),t=i.evaluate(this._runtime)),t},$_setMergeValue:function(t,e){return this._exprNode=t,this._runtime=e,this}}),h37=I1("MergedSeriesCell",R6,{init:function(t,e){this._super(t,e||"mergedSeriesCell"),this._room=null},room:function(){return this._room},merged:function(){return!0}}),z47=I1("MergedChartCell",h37,{init:function(t){this._super(t,"mergedChartCell")},chart:function(){var t=this._index.column.chart();return t?new O5(this._grid).loadChart(t):null}}),e0=I1("MergedDataCellElement",l4,{init:function(t){this._super(t,"mergedDataCellView"),this._topIndex=-1,this._bottomIndex=-1,this._hoverIndex=-1,this._selRanges=[],this._rowBottom=0},groupRow:function(){return this._mergeRoom&&this._mergeRoom._group},splittable:function(){return!0},mergeRoom:function(){return this._mergeRoom},$_setMergeRoom:function(t){this._mergeRoom=t},$_setHoverIndex:function(t,e,i){var n=this.$_calcInnerIndex(t,e,i);(n=0<=n?n-this._mergeRoom.headItem():n)!=this._hoverIndex&&(this._hoverIndex=n,this.invalidate(!1,!0))},_doDraw:function(t,e){this._rowView=this._fixed?this.grid()._fixedBodyView:this.grid()._bodyView,this._super(t,e)},_doRenderHtml:function(t){this._super(t)},$_canSelected:function(){return!0},$_calcInnerIndex:function(t,e,i){var n,s,r=t.lm();for(t.containerToElement(e,i),i-=r.bodyBounds().y,n=this._topIndex;n<=this._bottomIndex;n++)if(i>=(s=r.itemBounds(n)).y&&i<s.bottom())return n+t.topIndex();return n-1==this._bottomIndex&&i>=s.bottom()?n+t.topIndex():-1}}),m6=I1("MergedSeriesCellElement",j9,{init:function(t,e){this._super(t,e||"mergedSeriesCellView"),this._topIndex=-1,this._bottomIndex=-1,this._rowBottom=0},splittable:function(){return!0},mergeRoom:function(){return this._mergeRoom},_doDraw:function(t,e){this._rowView=this.grid()._bodyView,this._super(t,e)},_doRenderHtml:function(t){this._super(t)},$_setMergeRoom:function(t){this._mergeRoom=t},$_canSelected:function(){return!0},$_setHoverIndex:function(t,e,i){var n=this.$_calcInnerIndex(t,e,i);(n=0<=n?n-this._mergeRoom.headItem():n)!=this._hoverIndex&&(this._hoverIndex=n)},$_calcInnerIndex:function(t,e,i){var n,s,r=t.lm();for(t.containerToElement(e,i),i-=r.bodyBounds().y,n=this._topIndex;n<=this._bottomIndex;n++)if(i>=(s=r.itemBounds(n)).y&&i<s.bottom())return n+t.topIndex();return n-1==this._bottomIndex&&i>=s.bottom()?n+t.topIndex():-1}}),i78=I1("MergedChartCellElement",m6,{init:function(t){this._super(t,"mergedChartCellView")},canEditable:function(){return!1},splittable:function(){return!1},_doUpdateContent:function(t){this._super(t);var e=t.chart();e?(this._chartView||(this._chartView=new Y5(this._dom,this.container()),this.addChild(this._chartView)),e.setItemSource(t),this._chartView.setModel(e)):this._chartView&&(this.removeChild(this._chartView),this._chartView=null)},_doLayoutContent:function(t){if(this._super(t),this._chartView){var e=this._getRenderRect();this.deflatePadding2(e),this._chartView.setRectI(e),this._chartView.layoutContent(t)}},_doRenderCell:function(t,e){},$_canSelected:function(){return!0}}),n47=I1("MergedHeaderElement",x5,{init:function(t){this._super(t,"mergedHeaderView"),this._cellView=new O3(t),this.addElement(this._cellView)},cellView:function(){return this._cellView},setFixed:function(t){},_doUpdateElement:function(t){this._super(t)},_doMeasure:function(t,e,i){return new J2(e,i)},_doLayoutContent:function(t){this._cellView.updateCell(this.grid().rowGroup().getHeaderCell(this.rowIndex())),this._cellView.setRect(this.clientRect())},_doRender:function(t,e){}}),Y9=I1("MergedFooterElement",x5,{init:function(t,e){this._super(t,"mergedFooterView"),this._fixed=e,this._cells=[]},fixed:!1,setFixed:function(t){this._fixed=t},_doUpdateElement:function(t){this._super(t)},_doMeasure:function(t,e,i){return new J2(e,i)},_doLayoutContent:function(t){this.$_prepareCells(t),this.$_layoutCells(t)},_doRender:function(t,e){},$_prepareCells:function(t){var e,i,n,s,r,o=this.grid(),a=this.item().parent().level(),h=t.fixedColCount(),l=Math.max(a,this._fixed?0:t.firstCol()),u=this._fixed?h-1:t.lastCol(),d=o.rowGroup();for(o.columnLayoutChanged()&&(this.clear(),this._cells=[]),this.hideAll(),e=l;e<=u;e++)i=t.getColumn(e),(n=Q2(this._cells[i.$_hash],m4))||(n=i instanceof O1?new Y7(this._dom):new b6(this._dom),this._cells[i.$_hash]=n,this.addElement(n)),n.setVisible(!0),s=P1.temp(this.item().index(),i),r=d.getFooterCell(s),n.updateCell(r)},$_layoutCells:function(t){var e,i,n,s=this.item().parent().level(),r=t.fixedColCount(),o=Math.max(s,this._fixed?0:t.firstCol()),a=this._fixed?r-1:t.lastCol(),h=this.x(),l=this.height();for(e=o;e<=a;e++)i=this._cells[t.getColumn(e).$_hash],(n=t.columnBounds(e)).x-=h,n.height=l,i.setRect(n),i.layoutContent(t)}}),V78=I1("GridMergeHeaderElement",K0,{init:function(t){this._super(t,"mergedHeadersContainer",null),this._views=[],this._headerMap={}},clearHeaders:function(){var t,e;for(this._views=[],this._headerMap={},t=this.childCount()-1;0<=t;t--)(e=this.getChild(t)).setVisible(!1),this._views.push(e)},addHeader:function(t){var e=this._headerMap[t._id];e||((e=0<this._views.length?this._views.pop():null)||(e=new n47(this._dom),this.addElement(e)),e._item=t,this._headerMap[t._id]=e),e.setVisible(!0)},getHeaderView:function(t){return this._headerMap[t._id]},getCellView:function(t){var e=Q2(t.getRow(this._grid),P0);return e?this._headerMap[e._id]:null},isLayer:function(){return!0},_doAttached:function(t){this._super(t),this._headIndex=new P1,this._tailIndex=new P1},_doMeasure:function(t,e,i){return new J2(e,i)},_doLayoutContent:function(t){this.$_layoutHeaders(t)},_doDraw:function(t){},$_layoutHeaders:function(t){var e,i,n,s,r,o,a,h=this.grid(),l=h.rowGroup().headerStyles(),u=t.leftPos(),d=h.topIndex(),c=t.fixedColCount(),_=t.fixedItemCount(),f=t.fixedWidth(),g=this.width();for(e in this._headerMap)s=(n=(i=this._headerMap[e]).item()).index(),i.updateElement(n,l),s=s<_?s:s-d,(r=t.itemBounds(s)).width=g,o=n.level()-1,a=t.columnBounds(o).right(),0<c?c<=o?a=Math.max(a+f-u,f):o==c-1&&(a=f):0==c&&(a-=u),r.setLeft(a),r.width-=u,i.setRectI(r),i.layoutContent(t);this._views=null}}),D17=I1("GridMergeElement",K0,{init:function(t,e){this._super(t,"mergeLayer",null),this._fixed=e,this._footerLayer=new D4(t,"mergedFooterLayer"),this.addElement(this._footerLayer),this._cellLayer=new D4(t,"mergedCellLayer"),this.addElement(this._cellLayer),this._roomMap={},this._scopeViews={},this._footerMap={},this._footerViews=[]},fixed:function(){return this._fixed},clearFooters:function(){this._footerViews=[],this._footerMap={};for(var t=this._footerLayer.childCount();t--;){var e=this._footerLayer.getChild(t);e.setVisible(!1),this._footerViews.push(e)}},addFooter:function(t){var e=this._footerMap[t._id];e||((e=this._footerViews.pop())||(e=new Y9(this._dom,this._fixed),this._footerLayer.addElement(e)),e._item=t,this._footerMap[t._id]=e),e.setVisible(!0)},clearRooms:function(){var t,e,i,n;for(this._roomMap={},t=this._cellLayer.childCount()-1;0<=t;t--)(e=this._cellLayer.getChild(t)).setVisible(!1),i=e.mergeRoom(),(n=this.$_getViews(i.scope())).indexOf(e)<0&&n.push(e)},addColumnRooms:function(t,e){var i,n,s,r=this.$_getViews(t);for(i=e.length-1;0<=i;i--)n=e[i],0<r.length?s=r.pop():(s=this._createElement(n),this._cellLayer.addElement(s)),s.setVisible(!0),s.$_setMergeRoom(n),this._roomMap[n.$_hash]=s},getCellView:function(t){var e,i,n;for(i in this._roomMap)if((e=this._roomMap[i]).mergeRoom().contains(t))return e&&e.visible()?e:null;return(n=t.getRow(this._grid))instanceof o0?this._footerMap[n._id]:null},getFooterView:function(t){return this._footerMap[t._id]},findRowView:function(t){},isLayer:function(){return!0},_doAttached:function(t){this._super(t),this._headIndex=new P1,this._tailIndex=new P1},_doMeasure:function(t,e,i){return new J2(e,i)},_doLayoutContent:function(t){this.$_layoutCells(t),this.$_layoutFooters(t)},_doDraw:function(t){},$_getViews:function(t){var e=this._scopeViews[t.$_hash];return e||(e=[],this._scopeViews[t.$_hash]=e),e},_createElement:function(t){var e,i=null;return t instanceof L5&&((e=t.column())instanceof G5?i=new i78(this._dom):e instanceof Q7?i=new m6(this._dom):e instanceof L2&&(i=new e0(this._dom))),i},$_layoutFooters:function(t){var e,i,n,s,r,o,a,h=this.grid().rowGroup().footerStyles(),l=t.fixedColCount(),u=t.fixedItemCount(),d=t.topIndex(),c=t.itemCount(),_=this._fixed;for(e in 0<l&&t.leftPos(),this._footerMap){if(s=(n=(i=this._footerMap[e])._item).index(),i.updateElement(n,h),(s=s<u?s:s-d)<0||c+u<=s)throw new Error("Invalid MergedGroupFooter index: "+s);r=t.itemBounds(s,_),a=(o=_?n.parent().level():Math.max(l,n.parent().level()),t.columnBounds(o).x),r.setLeft(a),i.setRect(r),i.layoutContent(t)}this._footerViews=null},$_layoutCells:function(t){var e,i,n,s,r,o,a,h,l,u,d,c,_,f,g=this._roomMap,m=this.grid(),p=m.rowGroup().mergeMode(),w=m.rowGroup().expanderVisible(),v=m.topRow(),C=m.topIndex(),I=t.itemCount(),R=t.fixedItemCount();for(c in g)(f=(_=g[c]).mergeRoom()).getHead(this._headIndex),this._headIndex.rowIndex-v>I-1?(_.setVisible(!1),(d=this.$_getViews(f.column())).indexOf(_)<0&&d.push(_)):(f.getTail(this._tailIndex),e=m.body().getCell(this._headIndex,f),_._fixed=this._fixed,_.updateCell(e),(l=this._headIndex.column).group()?(i=l._layoutRect.clone()).x+=t.columnBounds(l._parent.displayIndex()).x:i=t.columnBounds(l.displayIndex()),n=i.x,s=i.width,r=Math.min(R+I-1,Math.max(R,this._headIndex.rowIndex-C)),i=t.itemBounds(r),_._topIndex=r,o=i.y,a=this._tailIndex.rowIndex,h=f.group(),a=Math.min(R+I-1,Math.max(R,a-C)),_._bottomIndex=a,u=(i=t.itemBounds(a)).bottom()-o,_.setBoundsI(n,o,s,u),_ instanceof e0&&_.setExpanderVisible(p&&w&&null!=h),_.layoutContent(t))},$_clearSelections:function(){var t,e=this._roomMap;for(t in e)e[t].$_setSelected(!1)},$_setSelections:function(t){var e,i,n,s,r,o,a,h,l,u,d,c,_,f,g,m,p=this.grid(),w=p.displayOptions().mergedSelection(),v=p.topIndex(),C=p.body(),I=p.bodyView(),R=p.lm(),y=R.itemCount(),x=t.length,E=this._roomMap,b=D17.$_index;for(e in E){for(m=(i=E[e]).$_canSelected(),n=!1,d=void 0,s=x;s--;)if((r=t[s]).intersects(i._index,b.assign(i._index).setRowIndex(i.mergeRoom().tailItem()))){if(n=!0,w&&m)break;d||(c=[],d=[],i.$_setSelStyles(D0()?C.mobileSelectionStyles():C.selectionStyles())),o=r.getBounds(),c.push({r1:l=o.R1(),r2:u=o.R2()}),v<=u&&l<v+y?(a=p.translateBy(i,I.boundsBy(p,R.getItemBounds(Math.max(0,l-v)))),h=p.translateBy(i,I.boundsBy(p,R.getItemBounds(Math.max(0,Math.min(y-1,u-v))))),d.push(a.y,h.bottom())):d.push(0,0)}if(d){if(g=i.mergeRoom(),1<(_=c.length)&&c.sort(function(t,e){return t.r1-e.r1}),(f=c[0].r1<=g.headItem()&&c[_-1].r2>=g.tailItem())&&1<_)for(f=!0,s=_-1;0<s;s--)if(a=c[s],h=c[s-1],a.r1>h.r2+1){f=!1;break}f&&(d=void 0)}i.$_setSelected(n&&m,d)}}},{$_index:new P1}),H5=I1("GridBaseOptions",null,{init:function(t){this._super(),this._grid=t},stylesChanged:function(){this._layoutOwner()},grid:function(){return this._grid},_invalidateOwner:function(){this._grid&&this._grid.invalidate()},_layoutOwner:function(){this._grid&&this._grid.invalidateLayout()},_refreshOwner:function(){this._grid&&this._grid.refreshView()},_invalidateEditor:function(){var t=this._grid&&this._grid.editController();t&&(t.invalidateEditor(),t.reprepareEditor(this._grid.$_focusedIndex()))},_refreshEditor:function(){this._refreshOwner(),this._invalidateEditor()}}),X37=I1("DisplayOptions",H5,{init:function(t){this._super(t),this._tooltipStyles=new o1(null,"tooltip"),this._rowHoverMask=new h48(t)},focusBorder:null,innerFocusBorder:null,summaryMode:u1(z4,z4.AGGREGATE),hideDeletedRows:!1,singleColumnIndices:!1,columnResizable:!0,checkChildColumnResizable:!0,columnMovable:!0,columnExcludable:!1,hideColumnWhenExcluded:!0,parentChangable:!1,defaultColumnWidth:120,fitStyle:u1(t0,t0.NONE),rowResizable:!1,rowHeight:0,minRowHeight:4,maxRowHeight:0,variableRowHeight:!1,liveScroll:!0,horzLiveScroll:!0,hintDuration:2e3,rowChangeDelay:0,horzScrollStep:8,emptyGridMessage:null,emptyDataMessage:null,checkDataInited:!1,heightMeasurer:null,fillWhenResized:!0,focusVisible:!0,bubbleWheelEvents:!0,wheelDelta:3,horzWheelDelta:16,customItemsVisible:!0,rightClickable:!0,fixedColumnCount:0,fixedRowCount:0,fixedColumnResizable:!1,fixedRowResizable:!1,fixedColumnMovable:!1,fixedColumnExcludable:!1,preventSystemMenu:!1,alertCellError:!0,focusable:!0,autoRowFocus:!0,hideBordersWhenFitted:!0,keepSelection:!0,rowHoverMask:null,cursorCallback:null,showTooltip:!0,tooltipStyles:null,tooltipLineBreak:!0,tooltipMaxWidth:L3,tooltipMinWidth:L3,tooltipDelay:U4(400),tooltipDuration:U4(4e3),tooltipAnimation:!1,includeHeaderWhenFitColumn:!1,nanText:null,innerSelectionVisible:!1,setFocusBorder:function(t){return t!==this._focusBorder&&(this._focusBorder=h4(t),this._refreshOwner()),this},setInnerFocusBorder:function(t){return t!==this._innerFocusBorder&&(this._innerFocusBorder=h4(t),this._refreshOwner()),this},setSummaryMode:function(t){return n3(z4,t)!=this._summaryMode&&(this._summaryMode=t,this._grid&&this._grid.$_summaryModeChanged()),this},hideDeletedRows_:function(){return this._grid&&this._grid.itemSource().hideDeleted()},setHideDeletedRows:function(t){return this._grid&&this._grid.itemSource().setHideDeleted(t),this},setSingleColumnIndices:function(t){t!=this._singleColumnIndices&&(this._singleColumnIndices=t,this._grid&&this._grid._resetColumnIndices())},showSingleSelection:{value:!1,set:function(t){return t!=this._showSingleSelection&&(this._showSingleSelection=t,this._grid&&this._grid.selections().isSingleCell()&&this._refreshOwner()),this}},mergedSelection:{value:!1,set:function(t){if(t!=this._mergedSelection){var e=this._grid;this._mergedSelection=t,e&&e.clearSelection(),e&&e.selections().isSingleCell()&&e.refreshView()}return this}},selectDisplay:{value:t8.MASK,set:function(t){if(t!=this._selectDisplay){var e=this._grid;e&&e.clearSelection(),this._selectDisplay=t,e&&e.selections().isSingleCell()&&e.refreshView()}return this}},selectMode:{value:G3.SINGLE,set:function(t){return this._selectMode=t,this._grid&&this._grid.clearSelection(),this}},selectStyle:{value:b2.BLOCK,set:function(t){if(t!=this._selectStyle){var e=this._grid;if(e){var i=e.selections();if(0<i.count()){var n=i.getItem(0).getBounds();i.clear(),t!=b2.NONE&&(i.setItemStyle(t),this._keepSelection?t==b2.SINGLE_ROW||t==b2.SINGLE_COLUMN||t==b2.SINGLE?i.add(e.focusedIndex().clone(),null,t):i.add(new P1(n.R1(),n.C1()),new P1(n.R2(),n.C2()),t):i.add(new P1(n.R1(),n.C1()),new P1(n.R1(),n.C1()),t))}}this._selectStyle=t}return this}},setFitStyle:function(t){return n3(t0,t)!=this._fitStyle&&(this._fitStyle=t,this._refreshOwner()),this},setRowHeight:function(t){return(t=Math.max(0,t))!=this._rowHeight&&(this._rowHeight=t,this._refreshOwner()),this},setMinRowHeight:function(t){return(t=Math.max(0,t))!=this._minRowHeight&&(this._minRowHeight=t,this._refreshOwner()),this},setMaxRowHeight:function(t){return(t=Math.max(0,t))!=this._maxRowHeight&&(this._maxRowHeight=t,this._refreshOwner()),this},setVariableRowHeight:function(t){return t!=this._variableRowHeight&&(this._variableRowHeight=t,this._refreshOwner()),this},setHeightMeasurer:function(t){return t!=this._heightMeasurer&&(this._heightMeasurer=t,this._grid.setHeightMeasurer(this._grid._createHeightMeasurer(t))),this},setFillWhenResized:function(t){return t!=this._setFillWhenResized&&(this._setFillWhenResized=t,this._refreshOwner()),this},setFocusVisible:function(t){return t!=this._focusVisible&&(this._focusVisible=t,this._refreshOwner()),this},setFixedColumnCount:function(t){return(t=Math.max(0,t))!=this._fixedColumnCount&&(this._fixedColumnCount=t,this._refreshOwner()),this},setFixedRowCount:function(t){return(t=Math.max(0,t))!=this._fixedRowCount&&(this._fixedRowCount=t,this._grid&&this._grid.fixedRowsChanged()),this},setHideBordersWhenFitted:function(t){return t!=this._hideBordersWhenFitted&&(this._hideBordersWhenFitted=t,this._refreshOwner()),this},setRowHoverMask:function(t){return t!==this._rowHoverMask&&(this._rowHoverMask.assign(t),this._refreshOwner()),this},setEmptyGridMessage:function(t){return t!==this._emptyGridMessage&&(this._emptyGridMessage=t,this._grid&&this._grid.isEmptyColumns()&&this._refreshOwner()),this},setEmptyDataMessage:function(t){return t!==this._emptyDataMessage&&(this._emptyDataMessage=t,this._grid&&this._grid.isEmptyData()&&this._refreshOwner()),this},setCheckDataInited:function(t){return t!==this._checkDataInited&&(this._checkDataInited=t,this._refreshOwner()),this},setNanText:function(t){return t!==this._nanText&&(this._nanText=t,this._refreshOwner()),this},setCursorCallback:function(t){b4(t)||(t=null),this._cursorCallback=t},setTooltipStyles:function(t){return t!==this._tooltipStyles&&this._tooltipStyles.extend(t),this},checkColumnExcludable:function(t){return t.fixed()?this._fixedColumnExcludable:this._columnExcludable}}),A67=I1("EditOptions",H5,{init:function(t){this._super(t),this._validations=new O37,this._dateWriter=null,this._boolWriter=null,this._numberWriter=null,this._boolReader=null,this._dateReaders=null,this._numberCharExp=V1(this._pasteNumberChars)?this.$_createNumberCharExp(this._pasteNumberChars):null},readOnly:!1,editable:!0,checkable:!0,updatable:!0,appendable:!1,insertable:!1,deletable:!1,erasable:!1,revertable:!1,undoable:!0,updateByCell:!1,insertByCell:!1,cancelWhenUndo:!0,fixedColumnEditable:!0,fixedRowEditable:!0,deletedRowEditable:!1,fixedColumnReadOnly:!1,fixedRowReadOnly:!1,deletedRowReadOnly:!0,editWhenFocused:!1,commitKey:null,commitWhenNoEdit:!1,commitOnLastCell:!1,crossWhenExitLast:!1,crossWhenExitFirst:!1,hideOnLastCell:!0,validateOnEdited:!0,validateOnExit:!1,hintOnError:!0,deleteMessage:null,confirmWhenDelete:!0,editWhenClickFocused:!1,commitLevel:u1(K4,K4.IGNORE),useTabKey:!0,moveByArrowKeys:!0,moveInSelection:!0,skipReadOnly:!1,keepFocusedWhenSelecting:!0,enterToTab:!0,enterToNextRow:!1,enterToEdit:!1,forceInsert:!1,forceAppend:!1,checkDiff:!1,checkCellDiff:!1,strictDiff:!1,deletableWhenEdit:!0,eraseWheDelete:!1,showCommitError:!0,validations:null,validateAtStart:!1,firstCellWhenInsert:!1,appendWhenInsertKey:!1,appendWhenExitLast:!1,showOnlyValidationMessage:!0,copyEnabled:!0,singleCopy:!1,copyDatetimeFormat:null,copyBooleanFormat:null,copyNumberFormat:null,useStyleFormats:!0,copyCallback:null,pasteEnabled:!0,singlePaste:!1,pasteByCell:!1,pasteDatetimeFormats:null,pasteBooleanFormat:null,pasteNumberChars:[","],pasteCallback:null,maskWhenPaste:!1,startEditWhenPaste:!0,commitWhenPaste:!0,commitWhenSort:!1,commitWhenBlur:!1,enableAppendWhenPaste:!0,fillFieldDefaultsWhenPaste:!1,fillColumnDefaultsWhenPaste:!1,forceRowValidationWhenPaste:!1,forceColumnValidationWhenPaste:!1,stopPasteOnError:!0,selectionBasePaste:!1,noEditEventWhenPaste:!1,noDataEventWhenPaste:!1,checkReadOnlyWhenPaste:!0,checkReadOnlyWhenErase:!0,fontName:"Tahoma",fontSize:"10pt",minEditorHeight:22,noSelectWhenEdit:!1,autoCommit:!1,aletInvalidFormatError:!0,invalidFormatMessage:void 0,alertMinLengthError:!0,minLengthMessage:void 0,rowEventsWhenCheckAll:!1,readOnlyCallback:null,editableCallback:null,hideEditorOnFailed:!1,showEditorWhenDblClicked:!0,mergedWhenUpdating:!1,useCopyKey:!0,forceButtonVisible:!1,allowKeysOnMenu:!1,pasteCellEvents:!1,setUpdatable:function(t){return t!=this._updatable&&(this._updatable=t,this._refreshEditor()),this},setAppendable:function(t){return t!=this._appendable&&(this._appendable=t,this._refreshEditor()),this},setInsertable:function(t){return t!=this._insertable&&(this._insertable=t,this._refreshEditor()),this},setReadOnly:function(t){return t!=this._readOnly&&(this._readOnly=t,this._refreshEditor()),this},setEditable:function(t){return t!=this._editable&&(this._editable=t,this._refreshEditor()),this},setFixedColumnEditable:function(t){return t!=this._fixedColumnEditable&&(this._fixedColumnEditable=t,this._refreshEditor()),this},setFixedRowEditable:function(t){return t!=this._fixedRowEditable&&(this._fixedRowEditable=t,this._refreshEditor()),this},setDeletedRowEditable:function(t){return t!=this._deletedRowEditable&&(this._deletedRowEditable=t,this._refreshEditor()),this},setFixedColumnReadOnly:function(t){return t!=this._fixedColumnReadOnly&&(this._fixedColumnReadOnly=t,this._refreshEditor()),this},setFixedRowReadOnly:function(t){return t!=this._fixedRowReadOnly&&(this._fixedRowReadOnly=t,this._refreshEditor()),this},setDeletedRowReadOnly:function(t){return t!=this._deletedRowReadOnly&&(this._deletedRowReadOnly=t,this._refreshEditor()),this},setEditableCallback:function(t){return(t=p4(t))!==this._editableCallback&&(this._editableCallback=t,this._refreshEditor()),this},setReadOnlyCallback:function(t){return(t=p4(t))!==this._readOnlyCallback&&(this._readOnlyCallback=t,this._refreshEditor()),this},setValidations:function(t){return this._validations.assign(t),this},setCheckDiff:function(t){this._checkDiff=t,this._diffsChanged()},setCheckCellDiff:function(t){this._checkCellDiff=t,this._diffsChanged()},setStrictDiff:function(t){this._strictDiff=t,this._diffsChanged()},setCopyDatetimeFormat:function(t){return t!=this._datetimeFormat&&(this._datetimeFormat=t,this._dateWriter=t?new M7(t):null),this},setCopyBooleanFormat:function(t){return t!=this._booleanFormat&&(this._booleanFormat=t,this._boolWriter=t?new v3(t):null),this},setCopyNumberFormat:function(t){return t!=this._numberFormat&&(this._numberFormat=t,this._numberWriter=t?new W7(t):null),this},setCopyCallback:function(t){b4(t)||(t=null),this._copyCallback=t},setPasteDatetimeFormats:function(t){if(t!=this._datetimeFormats)if(V1(t)?this._datetimeFormats=t.concat():this._datetimeFormats=t?[t]:null,this._datetimeFormats){this._dateReaders=[];for(var e=0;e<this._datetimeFormats.length;e++)this._dateReaders.push(new B7(this._datetimeFormats[e]))}else this._dateReaders=null;return this},setPasteBooleanFormat:function(t){return t!=this._booleanFormat&&(this._booleanFormat=t,this._boolReader=t?new l7(t):null),this},$_createNumberCharExp:function(t){for(var e="[",i=0;i<t.length;i++){var n=t[i];e+="\\"==n?"\\"+n:n}return e+="]",new RegExp(e,"g")},setPasteNumberChars:function(t){return t!=this._numberChars&&((this._numberChars=t)&&0<t.length?this._numberCharExp=this.$_createNumberCharExp(t):this._numberCharExp=null),this},setPasteCallback:function(t){b4(t)||(t=null),this._pasteCallback=t},canUpdate:function(){return!this._readOnly&&this._updatable},canInsert:function(){return!this._readOnly&&this._insertable},canAppend:function(){return!this._readOnly&&this._appendable},canDelete:function(){return!this._readOnly&&this._deletable},dateWriter:function(){return this._dateWriter},boolWriter:function(){return this._boolWriter},numberWriter:function(){return this._numberWriter},dateReaders:function(){return this._dateReaders},boolReader:function(){return this._boolReader},pasteNumberCharExp:function(){return this._numberCharExp},getDeleteRowsMessage:function(){return this._deleteMessage||E2._default.deleteRowsConfirm},$_getDateWriter:function(t){var e=this._dateWriter;if(!e&&t&&this._useStyleFormats){var i=t.styles().datetimeFormat();i&&(e=M7.getWriter(i))}return e},$_getBoolWriter:function(t){var e=this._boolWriter;if(!e&&t&&this._useStyleFormats){var i=t.styles().booleanFormat();i&&(e=v3.getFormatter(i))}return e},$_getNumberWriter:function(t){var e=this._numberWriter;if(!e&&t&&this._useStyleFormats){var i=t.styles().numberFormat();i&&(e=W7.getFormatter(i))}return e},_diffsChanged:function(){this._grid&&this._grid.$_checkDiffsChanged()}}),b67=I1("GroupingOptions",H5,{init:function(t,e){this._super(t),this._sortHandleRendererObj=new k78,this._filterHandleRendererObj=new O78,this._sortingToast=new I5({visible:!1,resourceId:"sortingToast"}),this._filterSelector=new S78,this._filteringToast=new I5({visible:!1,resourceId:"filteringToast"}),this._groupingToast=new I5({visible:!1,resourceId:"groupingToast"}),e&&this.assign(e)},sortMode:u1(O6,O6.AUTO),sortingEnabled:!0,sortStyle:u1(P7,P7.EXCLUSIVE),sortHandleVisibility:u1(n0,n0.VISIBLE),sortHandleRenderer:null,alwaysSorting:!0,triStateSorting:!0,exceptFixedRowsFromSorting:!0,commitBeforeSorting:!0,sortingToast:null,keepFocusedRowWhenSort:!1,sortTextCase:u1(g7,g7.SENSITIVE),filteringEnabled:!0,filterMode:u1(j6,j6.AUTO),dataStateFiltering:!0,dataTagFiltering:!1,passiveFiltering:!1,sortFirst:!1,filterHandleVisibility:u1(n0,n0.VISIBLE),filterHandleRenderer:null,commitBeforeFiltering:!0,filterSelector:null,filteringToast:null,exceptFixedRowsFromFiltering:!0,groupingEnabled:!0,expandWhenGrouping:!0,summarizeWhenGrouping:!0,commitBeforeGrouping:!0,commitBeforeExpand:!0,commitBeforeCollapse:!0,mergeGroupedColumnsFixed:!0,groupingToast:null,groupSorting:!0,groupSortDirection:u1(M4,M4.ASCENDING),groupSortCase:u1(g7,g7.SENSITIVE),pageSorting:!0,pageFiltering:!0,$_getRs:function(){return this._grid&&this._grid.rowSource()},sortMode_:function(){var t=this.$_getRs();return t?t.sortMode():this._sortMode},setSortMode:function(t){var e=this.$_getRs(),i=n3(O6,t);return e?e.setSortMode(i):this._sortMode=i,this},filterMode_:function(){var t=this.$_getRs();return t?t.filterMode():this._filterMode},setFilterMode:function(t){var e=this.$_getRs(),i=n3(j6,t);return e?e.setFilterMode(i):this._filterMode=i,this},dataStateFiltering_:function(){var t=this.$_getRs();return t?t.dataStateFiltering():this._dataStateFiltering},setDataStateFiltering:function(t){var e=this.$_getRs();return e?e.setDataStateFiltering(t):this._dataStateFiltering=v,this},dataTagFiltering_:function(){var t=this.$_getRs();return t?t.dataTagFiltering():this._dataTagFiltering},setDataTagFiltering:function(t){var e=this.$_getRs();return e?e.setDataTagFiltering(t):this._dataTagFiltering=v,this},passiveFiltering_:function(){var t=this.$_getRs();return t?t.passiveFiltering():this._passiveFiltering},setPassiveFiltering:function(t){var e=this.$_getRs();return e?e.setPassiveFiltering(t):this._passiveFiltering=t,this},sortFirst_:function(){var t=this.$_getRs();return t?t.sortFirst():this._sortFirst},setSortFirst:function(t){var e=this.$_getRs();return e?e.setSortFirst(t):this._sortFirst=t,this},pageSorting_:function(){var t=this.$_getRs();return t?t.pageSorting():this._pageSorting},setPageSorting:function(t){var e=this.$_getRs();return e?e.setPageSorting(t):this._pageSorting=t,this},pageFiltering_:function(){var t=this.$_getRs();return t?t.pageFiltering():this._pageFiltering},setPageFiltering:function(t){var e=this.$_getRs();return e?e.setPageFiltering(t):this._pageFiltering=t,this},setSortHandleRenderer:function(t){this._sortHandleRendererObj.assign(t)},setSortHandleVisibility:function(t){return n3(n0,t)!=this._sortHandleVisibility&&(this._sortHandleVisibility=t,this._refreshOwner()),this},alwaysSorting_:function(){var t=this.$_getRs();return t?t.alwaysSorting():this._alwaysSorting},setAlwaysSorting:function(t){var e=this.$_getRs();return e?e.setAlwaysSorting(t):this._alwaysSorting=t,this},setExceptFixedRowsFromSorting:function(t){return t!=this._exceptFixedRowsFromSorting&&(this._exceptFixedRowsFromSorting=t,this._grid&&this._grid.fixedRowsChanged()),this},setSortingToast:function(t){return t!=this._sortingToast&&this._sortingToast.assign(t),this},setFilterHandleRenderer:function(t){this._filterHandleRendererObj.assign(t)},setFilterSelector:function(t){return this._filterSelector.assign(t),this},setFilteringToast:function(t){return this._filteringToast.assign(t),this},setGroupingToast:function(t){return t!=this._groupingToast&&this._groupingToast.assign(t),this},setExceptFixedRowsFromFiltering:function(t){t!=this._exceptFixedRowsFromFiltering&&(this._exceptFixedRowsFromFiltering=t,this._grid&&this._grid.fixedRowsChanged())},propertyChanged:function(){this._grid&&this._grid.operateOptionsChanged(),this._layoutOwner()},$_sortHandleRenderer:function(){return this._sortHandleRendererObj},$_filterHandleRenderer:function(){return this._filterHandleRendererObj}}),S78=I1("FilterSelectorOptions",null,{init:function(t){this._super(),this._styles=new o1(null,"filterSelector"),t&&this.assign(t)},minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,styles:null,closeWhenClick:!1,setMinWidth:function(t){return this._minWidth=t?V4.createFrom(t):void 0,this},setMaxWidth:function(t){return this._maxWidth=t?V4.createFrom(t):void 0,this},setMinHeight:function(t){return this._minHeight=t?V4.createFrom(t):void 0,this},setMaxHeight:function(t){return this._maxHeight=t?V4.createFrom(t):void 0,this},setStyles:function(t){return t!==this._styles&&this._styles.extend(t),this},getMinWidth:function(t){return this._minWidth?this._minWidth.getSize(t):void 0},getMaxWidth:function(t){return this._maxWidth?this._maxWidth.getSize(t):void 0},getMinHeight:function(t){return this._minHeight?this._minHeight.getSize(t):void 0},getMaxHeight:function(t){return this._maxHeight?this._maxHeight.getSize(t):void 0}}),a78=I1("EffectOptions",H5,{init:function(t,e){this._super(t)},animationEnabled:!1,setAnimationEnabled:function(t){t!=this._animationEnabled&&((this._animationEnabled=t)||this.grid().stopAnimations()&&this._refreshOwner())}}),t2=I1("ValueColumn",k4,{init:function(t){this._super(t)},_initColumn:function(){this._super(),this._mergeRule=null,this._mergeValueNode=null,this._rendererChanged=!1,this._rendererObj=null},rendererChanged:function(t){t==this._rendererObj&&this._changed()},renderer:null,displayCallback:null,styleCallback:null,summaryCallback:null,mergeExpression:null,mergeCallback:null,mergeValueExpression:null,mergeValueCallback:null,cursor:null,ignoreRowDynamicStyles:!1,ignoreDefaultDynamicStyles:!1,blankWhenCopy:!1,blankWhenExport:!1,copyCallback:null,pasteCallback:null,tooltipCallback:null,valueType:null,mergeRule:function(){return this._mergeExpression||this._mergeCallback?this._mergeRule:null},rendererObj:function(){return this._rendererObj||this._defaultRenderer()},setRenderer:function(t){if(t!=this._renderer){var e=this._rendererObj;if(!e||!I4(t)||t.Type&&t.type!=e.$_type){if(e&&t==e.$_type)return;this._rendererChanged=!0}else e.assign(t);this._renderer=t,this._changed()}},setDisplayCallback:function(t){if((t=p4(t))!==this._displayCallback){this._displayCallback=t;var e=this.grid();e&&e.refreshView()}},setStyleCallback:function(t){t!==this._styleCallback&&(this._styleCallback=p4(t),this._changed())},setSummaryCallback:function(t){if(t!==this._summaryCallback){this._summaryCallback=p4(t);var e=this.grid();e&&e.clearRowSummary(),this._changed()}return this},setMergeExpression:function(t){if(t!=this._mergeExpression&&(t&&!this._mergeRule&&(this._mergeRule=new d9),this._mergeRule.setCriteria(t),this._mergeExpression=t,!this._mergeCallback)){var e=this.grid();e&&e._columnMergeRuleChanged(this)}},setMergeCallback:function(t){if((t=p4(t))!==this._mergeCallback){t&&!this._mergeRule&&(this._mergeRule=new d9),this._mergeRule.setCallback(t),this._mergeCallback=t;var e=this.grid();e&&e._columnMergeRuleChanged(this)}},setMergeValueExpression:function(t){if(t!=this._mergeValueExpression&&(this._mergeValueExpresson=t,this._mergeValueNode=t?J4.Default.parse(t,null):null,this._mergeRule&&this._mergeRule.active())){var e=this.grid();e&&e.refreshView()}},setMergeValueCallback:function(t){if((t=p4(t))!=this._mergeValueCallback&&(this._mergeValueCallback=t,this._mergeRule&&this._mergeRule.active())){var e=this.grid();e&&e.refreshView()}},setCopyCallback:function(t){b4(t)||(t=null),this._copyCallback=t},setPasteCallback:function(t){b4(t)||(t=null),this._pasteCallback=t},dataIndex:function(){return-1},assign:function(t){this._super(t)},canMerge:function(){return null!==this._mergeRule},prepareLayout:function(t,e){if(this._super(t,e),this.$_styleCallback=this._styleCallback||t._body._styleCallback,this._rendererChanged){var i=t.delegate();this._rendererObj=i.createRenderer(this._renderer,this),this._rendererChanged=!1}},clean:function(){this._super(),this._footer.clean()},_footerChanged:function(){this._changed()},_defaultRenderer:function(){return S6.Default}}),L2=I1("DataColumn",t2,{init:function(t){this._super(t)},_initColumn:function(){this._super(),this._dataIndex=-1,this._dataFieldName=null,this._valueType=a1.TEXT,this._sortOrder=-1,this._sortDirection=M4.ASCENDING,this._menu=null,this._images=null,this._lookupSource=null,this._lookupKeyFields=null,this._lookupKeyFieldIds=null,this._lookupMap=null,this._labelFieldIndex=-1,this._mergeGrouped=!1,this._editorOptions={},this._filters=new V48(this),this._filters.addListener(this),this._autoFilter=new d7(this),this._dynamicStyles=new g0(this),this._validations=new O37,this._animations=new i08(this),this._defExprNode=null,this._menuChanged=!1},editCallback:null,editTextCallback:null,fieldIndex:-1,fieldName:null,editable:!0,editableCallback:null,readOnlyCallback:null,readOnly:!1,erasable:!0,imeMode:u1(D9,D9.AUTO),emptyValue:void 0,sortable:!0,filterable:!0,groupable:!0,button:u1(Y0,Y0.NONE),buttonDisplayCallback:null,buttonVisibility:u1(c7,c7.DEFAULT),editorButtonVisibility:u1(c7,c7.DEFAULT),customButtons:null,popupMenu:null,popupMenuCallback:null,required:!1,requiredMessage:null,requiredLevel:u1(K4,K4.ERROR),defaultValue:void 0,defaultExpression:null,defaultCallback:null,minimum:NaN,maximum:NaN,maxLength:0,nanText:null,dynamicStyles:null,validations:null,animations:null,autoFilter:null,lookupDisplay:!1,lookupCase:u1(R07,R07.SENSITIVE),lookupValues:null,lookupLabels:null,labelField:null,lookupSourceId:null,lookupKeyFields:null,editor:null,editorCallback:null,imageList:null,groupLevel:-1,filters:null,error:null,errorLevel:u1(K4,K4.IGNORE),excelFormat:void 0,textInputCase:u1(z0,z0.NORMAL),setEditableCallback:function(t){if((t=p4(t))!==this._editableCallback){this._editableCallback=t;var e=this.grid();e&&e._editColumnChanged(this)}},setReadOnlyCallback:function(t){if((t=p4(t))!==this._readOnlyCallback){this._readOnlyCallback=t;var e=this.grid();e&&e._editColumnChanged(this)}},setEditable:function(t){if(t!=this._editable){this._editable=t;var e=this.grid();e&&e._editColumnChanged(this)}return this},setReadOnly:function(t){if(t!=this._readOnly){this._readOnly=t;var e=this.grid();e&&e._editColumnChanged(this)}return this},setDefaultExpression:function(t){(t=I27(t))!=this._defaultExpression&&(this._defaultExpression=t,this._defExprNode=t?J4.Default.parse(t):void 0,this._changed())},setDefaultCallback:function(t){t!==this._defaultCallback&&(this._defaultCallback=p4(t),this._changed())},setValidations:function(t){return t!=this._validations&&this._validations.assign(t),this},setAnimations:function(t){return t!=this._animations&&this._animations.assign(t),this},filters_:function(){return this._filters.items()},setFilters:function(t){return t!=this._filters&&this._filters.assign(t),this},setAutoFilter:function(t){return t!==this._autoFilter&&this._autoFilter.assign(t),this},setLookupValues:function(t){return t!=this._lookupValues&&(this._lookupValues=t&&t.slice(),this._lookupMap=null,this._changed()),this},setLookupLabels:function(t){return t!=this._lookupLabels&&(this._lookupLabels=t&&t.slice(),this._lookupMap=null,this._changed()),this},labelFieldIndex:function(){return this._labelFieldIndex},lookupSource:function(){return this._lookupSource},setLookupKeyFields:function(t){return t!=this._lookupKeyFields&&(t&&!e3(t)&&(t=[t]),this._lookupKeyFields=t,this._changed()),this},lookupKeyFieldIds:function(){return this._lookupKeyFieldIds},setDynamicStyles:function(t){return t!=this._dynamicStyles&&(this._dynamicStyles.setItems(t),this._changed()),this},setEditor:function(t){if("string"==typeof t)this._editor=t;else if(t)for(var e in t.hasOwnProperty("type")&&(this._editor=t.type),this._editorOptions=this._editorOptions||{},t){var i=t[e];void 0===i?delete this._editorOptions[e]:V1(i)?this._editorOptions[e]=i.slice():this._editorOptions[e]=i}return this._editorChanged(),this},setPopupMenu:function(t){return t!=this._popupMenu&&(this._popupMenu=t,this._menuChanged=!0),this},setPopupMenuCallback:function(t){return t!==this._popupMenuCallback&&(this._popupMenuCallback=p4(t)),this},setCustomButtons:function(t){if(t!==this._customButtons){var e,i,n=null;if(V1(t))for(e=0;e<t.length;e++)(i=t[e])instanceof s67||!I4(i)||(i=new s67(i)),i&&(n=n||[]).push(i);this._customButtons=n}},editorOptions:function(){return this._editorOptions},dataIndex:function(){return this._dataIndex},dataFieldName:function(){return this._dataFieldName},valueType:function(){return this._valueType},sortOrder:function(){return this._sortOrder},sortDirection:function(){return this._sortDirection},hasFilters:function(){return 0<this._filters.count()||this._autoFilter.active()},isFiltered:function(){return this.filtered()},filtered:function(){return 0<this._filters.activeCount()||0<this._autoFilter.checkedCount()},$_images:function(){return this._images},isMergeGrouped:function(){return this._mergeGrouped},mergeGrouped:function(){return this._mergeGrouped},getField:function(){return this.getDataField()},getDataField:function(){var t,e=this._dataIndex;return 0<=e&&(t=this.grid().dataSource())?t.getField(e):null},getLookupLabel:function(t){var e,i,n;if(!this._lookupMap&&(e=this._lookupValues,i=this._lookupLabels,e&&0<e.length))for(this._lookupMap={},n=0;n<e.length;n++)i&&i.length>n?this._lookupMap[e[n]]=i[n]:this._lookupMap[e[n]]=e[n];return(this._lookupMap?this._lookupMap[t]:void 0)||t},getLookupIndex:function(t){if(this._lookupValues&&0<this._lookupValues.length)for(var e=0,i=this._lookupValues.length;e<i;e++)if(this._lookupValues[e]==t)return e;return-1},getLookupValue:function(t){if(this._lookupValues&&0<this._lookupValues.length)return this._lookupValues[t]},getSourceValue:function(t){var e=this._lookupValues,i=this._lookupLabels;if(i&&e){var n=i.indexOf(t);if(0<=n&&e.length>n)return e[n];if(0<=(n=e.indexOf(t)))return e[n]}},clearFilters:function(){this.setFilters(null)},addFilters:function(t,e){t&&this._filters.addItems(t,e)},removeFilters:function(t){t&&this._filters.removeItems(E5(t))},activateFilters:function(t,e){t&&this._filters.activateItems(E5(t),e)},activateAllFilters:function(t){this._filters.activateAll(t)},toggleFilters:function(t){this._filters.toggleItems(E5(t))},toggleAllFilters:function(){this._filters.toggleAll()},getFilter:function(t){return this._filters.getItem(t)},getActiveFilters:function(t){return this._filters.getActiveItems(t)},assign:function(t){this._super(t)},clean:function(){this._super(),this._editorDirty=!1},canMerge:function(){return 0<=this.dataIndex()&&(this._mergeGrouped||this._super())},canEditable:function(){return!0},canEdit:function(){return this._editable},prepareLayout:function(t,e){var i,n,s=t.dataSource();if(this._super(t,e),this._menuChanged&&(this._menu=this._popupMenu?t.popupMenuManager().getMenu(this._popupMenu):null,this._menuChanged=!1),this._saveFieldName==this._fieldName&&this._saveLabelField==this._labelField||this._resetDataIndex(s),this._lookupKeyFields&&0<(i=this._lookupKeyFields.length)){for(this._lookupKeyFieldIds=new Array(i),n=0;n<i;n++)this._lookupKeyFieldIds[n]=s.getFieldIndex(this._lookupKeyFields[n]);this._lookupSourceId?this._lookupSource=t.lookupProvider().getSource(this._lookupSourceId):this._lookupSource=null}else this._lookupKeyFieldIds=null,this._lookupSource=null;this._images=t.getImageList(this._imageList)},$_getMenu:function(t){return this._popupMenuCallback?t.grid().popupMenuManager().getMenu(this._popupMenuCallback(t)):this._menu},_setSortOrder:function(t){this._sortOrder=t},_setSortDirection:function(t){this._sortDirection=t},_resetDataIndex:function(t){var e,i;this._dataIndex=-1,this._keyFn=this._keyPath=void 0,this._labelFieldIndex=-1,t&&(this._fieldName?this._dataIndex=t.getFieldIndex(this._fieldName):this._dataIndex=this._fieldIndex,0<=this._dataIndex?(this.$_field=e=t.getField(this._dataIndex),this._valueType=e._dataType,this._dataFieldName=e._fieldName,this._keyPath=e._keyPath,this._keyFn=e._keyCallback):(this._valueType=void 0,this._dataFieldName=null),this._labelFieldIndex=t.getFieldIndex(this._labelField),this._saveFieldName=this._fieldName,this._saveLabelField=this._labelField,(i=this.grid())&&i._columnMergeRuleChanged(this))},$_getDefaultValue:function(t){return this._defaultCallback?this._defaultCallback(this):this._defExprNode?(t.setColumn(this),this._defExprNode.evaluate(t)):this._defaultValue},_setMergeGrouped:function(t){this._mergeGrouped=t},_editorChanged:function(t){if(!this._editorDirty){this._editorDirty=!0;var e=this.grid();e&&e.$_invalidateEditor(this)}},$_autoFilterChecked:function(t,e,i){var n=this.grid();n&&n.$_columnFiltersChanged(this._autoFilter)},$_autoFilterChanged:function(t){var e=this.grid();e&&e.$_columnFiltersChanged(t)},$_buttonClicked:function(t,e){var i=this._customButtons[e].callback();if(i)return i(t),!0},onColumnFilterChanged:function(t){var e=this.grid();e&&e.$_columnFiltersChanged(t)}}),D6=I1("LabelColumn",t2,{init:function(t){this._super(t),this.setValueType(a1.TEXT)},_initColumn:function(){this._super()},text:"Label"},{$_columnType:"label"}),m67=I1("DerivedColumn",t2,{init:function(t){this._super(t)},_initColumn:function(){this._super()},editable:!0,setEditable:function(t){if(t!=this._editable){this._editable=t;var e=this.grid();e&&e._editColumnChanged(this)}return this},canEditable:function(){return!0},canEdit:function(){return this._editable}}),Q7=I1("SeriesColumn",m67,{init:function(t){this._super(t)},_initColumn:function(){this._super(),this._fieldArray=[]},cached:!1,fieldNames:null,setCached:function(t){if(t!=this._cached){this._cached=t;var e=this.grid();e&&e.$_seriesColumnChanged(this)}},setFieldNames:function(t){t!=this._fieldNames&&(this._fieldNames=t,this._fieldArray=t?t.split(","):[])},fieldCount:function(){return this._fields.length},fields:function(){return this._fields},fieldLabels:function(){return this._fieldLabels},resetIndices:function(t){if(this._fields=[],this._fieldLabels=[],t)for(var e=0,i=this._fieldArray.length;e<i;e++){var n=this._fieldArray[e],s=n.split("..");if(1<s.length){var r=t.getFieldIndex(s[0]),o=t.getFieldIndex(s[1]);if(0<=r&&0<=o)for(var a=Math.min(r,o),h=Math.max(r,o),l=a;l<=h;l++)this._fields.push(l),this._fieldLabels.push(t.getFieldLabel(l))}else{var u=t.getFieldIndex(n);0<=u&&(this._fields.push(u),this._fieldLabels.push(t.getFieldLabel(u)))}}var d=this.grid();d&&d.$_seriesColumnChanged(this)},getField:function(t){return this._fields[t]},getFieldName:function(t){return this._fields[t].fieldName()},getValue:function(t){if(t)if(this._cached&&!t.isEditing()){var e=this._dataTag;if(e)return e.getValues(t.dataIndex())}else{var i,n=this._fields;if(n&&0<(i=n.length)){for(var s=new Array(i),r=0;r<i;r++)0<=n[r]&&(s[r]=t.getValue(n[r]));return s}}return[]},clearCache:function(){this._dataTag&&this._dataTag.clearValues()},_defaultRenderer:function(){return M17.Default},$_setDataTag:function(t){this._dataTag=t}},{$_columnType:"series"}),h7=I1("CalculatedColumn",m67,{init:function(t){this._super(t)},_initColumn:function(){this._super(),this._runtime=new p7(this),this._dataTag=void 0,this._noRange=!0,this._dynamicStyles=new g0(this),this.setValueType(a1.NUMBER)},cached:!1,calcRange:H3.ROWS,calcBounds:Y27.GRID,nanText:null,nanValue:void 0,expression:null,valueExpression:null,valueCallback:null,dynamicStyles:null,styleCallback:null,excelFormat:void 0,setValueType:function(t){return t!=this._valueType&&(this._valueType=t,this._numeric=t==a1.NUMBER,this._changed()),this},setCached:function(t){if(t!=this._cached){this._cached=t;var e=this.grid();e&&e.$_calculatedColumnChanged(this)}return this},expression_:function(){return this.valueExpression()},setExpression:function(t){return this.setValueExpression(t)},setValueExpression:function(t){return t!=this._valueExpression&&(this._valueExpression=t,this._exprNode=t?J4.Default.parse(t,null):null,this._changed(),this.clearCache()),this},setValueCallback:function(t){(t=b4(t)?t:null)!=this._valueCallback&&(this._valueCallback=t,this._changed(),this.clearCache())},setDynamicStyles:function(t){return t!=this._dynamicStyles&&(this._dynamicStyles.setItems(t),this._changed()),this},setStyleCallback:function(t){return t!==this._styleCallback&&(this._styleCallback=p4(t),this._changed()),this},setCalcRange:function(t){return t!=this._calcRange&&(this._calcRange=t,this._noRange=!t||t==H3.ROWS,this.clearCache()),this},setNanValue:function(t){var e=Number(t);return isNaN(e)||e===this._nanValue||(this._nanValue=e,this._changed(),this.clearCache()),this},getValue:function(t){var e=this._cached&&!t.isEditing()&&this._dataTag;return e?e.getValue(this,t):this.$_calcValue(t)},$_calcValue:function(t){var e;return this._valueCallback?e=this._valueCallback(this,t):this._exprNode&&(this._runtime.setRow(t),e=this._exprNode.evaluate(this._runtime)),this._numeric&&isNaN(e)&&!isNaN(this._nanValue)&&(e=this._nanValue),e},$_calcRange:function(t,e){var i;return this._dataTag.$_setRange(t),this._valueCallback?i=this._valueCallback(this,t[e],t,e,this._dataTag):this._exprNode&&(this._runtime.setRange(t,e),i=this._exprNode.evaluate(this._runtime)),this._numeric&&isNaN(i)&&!isNaN(this._nanValue)&&(i=this._nanValue),i},clearCache:function(){this._dataTag&&this._dataTag.clearValues()},prepareLayout:function(t,e){this._super(t,e);var i,n,s,r=this._dataTag;!this._valueCallback&&this._runtime.prepare(),this._cached&&!this._noRange&&r.hasReqRow()&&(r.isAllRequested()?r.calcValues(t,this,null,null):(i=t.rowCount(),(n=Math.min(r.firstRequest(),i-1))<=(s=Math.min(r.lastRequest(),i-1))&&r.calcValues(t,this,t.getRow(n),t.getRow(s))),r.clearReqRows())},$_setDataTag:function(t){this._dataTag=t}},{$_columnType:"calced"}),G5=I1("ChartColumn",Q7,{init:function(t){this._super(t)},_initColumn:function(){this._super()},async:!1,chart:null,setChart:function(t){t!==this._chart&&(this._chart=t,this._changed())},refreshChart:function(){this._changed()},_canSplit:function(){return!1}},{$_columnType:"chart"}),M5=I1("ColumnGroupProxy",O1,{init:function(t){M5.Base.init.call(this),this._items=null,t&&this.assign(t)},build:function(t){var e=M5.buildColumns(t,this._items);M5.Base.setColumns.call(this,e)},setColumns:function(t){this._items=t}},{buildColumns:function(t,e){var i=[];if(e)for(var n=0,s=e.length;n<s;n++){var r,o=e[n];o instanceof M5?(o.build(t),i.push(o)):o instanceof k4?i.push(o):"string"==typeof o?(r=t.layoutColumnByName(o))&&(r.setVisible(!0),i.push(r)):o&&o.name&&(r=t.layoutColumnByName(o.name))&&(r.setVisible(!0),r.assign(o),i.push(r))}return i}}),x0=I1("ColumnLayout",null,{init:function(t,e){C4.init.call(this),this._name=t,this._items=e},name:null,items:null,build:function(t){var e=M5.buildColumns(t,this._items);return this.$_validate(e),e},$_validate:function(t){if(t&&0<t.length){this.$_validateColumns(t,[])}},$_validateColumns:function(t,e){for(var i=t.length-1;0<=i;i--){var n=t[i];if(0<=e.indexOf(n))throw new Error("Column is dupulicated: "+n.name());e.push(n),n instanceof O1&&this.$_validateColumns(n.columns(),e)}}},{create:function(t){if(t instanceof x0)return t;if(t){var e=V1(t)?t:t.columns;if(e=x0.$_parseColumns(e,{})){var i=new x0(V1(t)?null:t.name);return i.setItems(e),i}}return null},$_parseColumns:function(t,e){var i=[];if(t)for(var n=0,s=t.length;n<s;n++){var r=t[n],o=null;"string"==typeof r?e.hasOwnProperty(r)||(e[r]=1,o=r):r&&("group"==r.type?o=x0.$_parseGroup(r,e):r.hasOwnProperty("columns")&&V1(r.columns)&&0<r.columns.length?o=x0.$_parseGroup(r,e):r.name&&(e.hasOwnProperty(r.name)||(e[r.name]=1,o=r))),o&&i.push(o)}return i},$_parseGroup:function(t,e){var i=new M5(t),n=t.columns;return n&&(n=x0.$_parseColumns(n,e),i.setColumns(n)),i}}),q78=I1("ColumnLayoutCollection",null,{init:function(){C4.init.call(this),this._layouts=[]},items:function(){return this._layouts.concat()},count:function(){return this._layouts.length},getItem:function(t){if(t<0||t>=this._layouts.length)throw"Invalid ColumnLayoutCollection index: "+t;return this._layouts[t]},find:function(t){for(var e=0,i=this._layouts.length;e<i;e++)if(this._layouts[e].name()==t)return this._layouts[e];return null},clear:function(){this._layouts=[]},load:function(t){var e;if(t)if(V1(t))for(var i=0,n=t.length;i<n;i++)(e=x0.create(t[i]))&&this._layouts.push(e);else(e=x0.create(t))&&this._layouts.push(e)}}),l47=I1("GridDelegate",null,{init:function(t){this._super(),this._grid=t,this._dom=t._dom,this._defaultEditor=null,this._defaultButtonRenderer=new R3,this._defaultCustomButtonRenderer=new F38,this._defaultEditorButtonRenderer=new Q38,this._cellEditors={},this._selectionViews=[],this._rowViews=[],this._bandedHeaderViews=[],this._groupHeaderViews=[],this._groupFooterViews=[],this._mergedHeaderViews=[],this._mergedFooterViews=[],this._groupItemViews={},this._cellRenderers={text:S6,bar:b3,check:f67,icon:a6,shape:u67,signal:p38,image:g67,link:z38,button:n38,code39:F57,code128:p57,circleGauge:Q57,linearGauge:D57,seriesText:M17,sparkLine:l38,sparkColumn:I38,sparkWinLoss:C38,seriesLegend:o38}},isFixed:function(){return this._fixed},prepareResources:function(){this._defaultButtonRenderer.prepare(this._grid)},registerRenderer:function(t,e){t&&b4(e)&&(this._cellRenderers[t]=e)},createRenderer:function(t,e){var i,n,s,r=null;return t&&(i=null,S4(t)?n=t:(n=t.type||"text",i=t),(s=this._cellRenderers[n])&&(r=new s),r&&(r._owner=e,r.$_type=n,i&&r.assign(i))),r},borrowItemView:function(t,e){var i=null;if(t instanceof v4)(i=this._rowViews.pop()||new N6(this._dom)).setFixed(e);else if(t instanceof U6)this._grid.rowGroup().displayMode()==k6.BANDED&&(i=this._bandedHeaderViews.pop()||new p47(this._dom));else if(t instanceof o0)(i=this._mergedFooterViews.pop()||new Y9(this._dom)).setFixed(e);else if(t instanceof m7)(i=this._groupFooterViews.pop()||new U9(this._dom)).setFixed(e);else if(t instanceof P0)(i=this._mergedHeaderViews.pop()||new n47(this._dom)).setFixed(e);else if(t instanceof M3){var n=t.model().constructor.prototype.$name;(i=this._groupItemViews[n])||(this._groupItemViews[n]=i=t.model().createRowView(this._dom))}return i},returnItemView:function(t){if(t instanceof N6&&this._rowViews.indexOf(t)<0)this._rowViews.push(t);else if(t instanceof p47&&this._bandedHeaderViews.indexOf(t)<0)this._bandedHeaderViews.push(t);else if(t instanceof U9&&this._groupFooterViews.indexOf(t)<0)this._groupFooterViews.push(t);else if(t instanceof n47&&this._mergedHeaderViews.indexOf(t)<0)this._mergedHeaderViews.push(t);else if(t instanceof Y9&&this._mergedFooterViews.indexOf(t)<0)this._mergedFooterViews.push(t);else if(t instanceof c3){var e=t.item().model().constructor.prototype.$name;this._groupItemViews[e]=t}},borrowSelectionView:function(t){return this._selectionViews.pop()||(D0()?new P9(this._dom):new K9(this._dom))},returnSelectionView:function(t){t&&this._selectionViews.indexOf(t)<0&&this._selectionViews.push(t)},getDefaultCellRenderer:function(){return S6.Default},getCellButtonRenderer:function(){return this._defaultButtonRenderer},getCustomButtonRenderer:function(){return this._defaultCustomButtonRenderer},deleteCellEditors:function(){for(var t in this._defaultEditor instanceof X7&&(this._defaultEditor.dispose(),this._defaultEditor=null),this._cellEditors){var e=this._cellEditors[t];e instanceof X7&&e.dispose()}this._cellEditors={}},createDefaultCellEditor:function(){var t=this._grid._container._container,e=new n67(this._grid,t);return e.setController(this._grid._editController),e},getDefaultCellEditor:function(){if(!this._defaultEditor){var t=this._grid._container._container;this._defaultEditor=new n67(this._grid,t),this._defaultEditor.setController(this._grid._editController)}return this._defaultEditor},getCellEditor:function(t){var e=this.$_getCellEditorType(t),i=this._grid._container._container,n=this._cellEditors[e];if(!n){switch(e){case"list":n=new l67(this._grid,i);break;case"multiline":n=new T78(this._grid,i);break;case"number":n=new f78(this._grid,i);break;case"date":n=new I67(this._grid,i);break;case"search":n=new I47(this._grid,i);break;case"mask":n=new B78(this._grid,i);break;case"line":default:n=this.getDefaultCellEditor()}this._cellEditors[e]=n}return n},hasEditorButton:function(t){var e=this.$_getCellEditorType(t);if(e)switch(e){case"list":case"date":case"search":return!0;case"multiline":case"number":case"mask":case"line":default:return!1}return!1},getCellEditorButtonRenderer:function(t){var e,i=null;return t.dataColumn()&&(e=this.$_getCellEditorType(t),i=this._defaultEditorButtonRenderer,"date"==e?i.setButtonType(V6.CALENDAR):i.setButtonType(V6.COMBO)),i},createGridEventHandler:function(){return{onGridBaseRowCountChanged:function(t,e,i){t.onRowCountChanged&&t.onRowCountChanged(t,e,i)},onGridBaseDisplayRowCountChanged:function(t,e,i){t.onDisplayRowCountChanged&&t.onDisplayRowCountChanged(t,e,i)},onGridBaseDescendantRowCountChanged:function(t,e,i){t.onDescendantRowCountChanged&&t.onDescendantRowCountChanged(t,e,i)},onGridBaseDescendantDataCountChanged:function(t,e,i){t.onDescendantDataCountChanged&&t.onDescendantDataCountChanged(t,e,i)},onGridBaseCurrentChanging:function(t,e,i){if(t.onCurrentChanging)return t.onCurrentChanging(t,e,i)},onGridBaseCurrentChanged:function(t,e){t.onCurrentChanged&&t.onCurrentChanged(t,e)},onGridBaseCurrentRowChanged:function(t,e,i){t.onCurrentRowChanged&&t.onCurrentRowChanged(t,e,i)},onGridBaseTopIndexChanged:function(t,e,i){t.onTopIndexChanged&&t.onTopIndexChanged(t,e,i)},onGridBaseScrollToBottom:function(t){t.onScrollToBottom&&t.onScrollToBottom(t)},onGridBaseScrollToTop:function(t){t.onScrollToTop&&t.onScrollToTop(t)},onGridBaseLeftPosChanged:function(t,e,i){t.onLeftPosChanged&&t.onLeftPosChanged(t,e,i)},onGridBaseSelectionChanged:function(t,e){t.onSelectionChanged&&t.onSelectionChanged(t,e)},onGridBaseSelectionAdded:function(t,e){t.onSelectionAdded&&t.onSelectionAdded(t,e)},onGridBaseSelectionRemoved:function(t){t.onSelectionRemoved&&t.onSelectionRemoved(t)},onGridBaseSelectionCleared:function(t){t.onSelectionCleared&&t.onSelectionCleared(t)},onGridBaseSelectionResized:function(t,e){t.onSelectionResized&&t.onSelectionResized(t,e)},onGridBaseSelectionEnded:function(t,e){t.onSelectionEnded&&t.onSelectionEnded(t,e)},onGridBaseValidateCell:function(t,e,i,n){t.onValidateCell&&t.onValidateCell(t,e,i,n)},onGridBaseValidateRow:function(t,e,i,n){t.onValidateRow&&t.onValidateRow(t,e,i,n)},onGridBaseUpdating:function(t,e,i){if(t.onUpdating)return t.onUpdating(t,e,i)},onGridBaseInserting:function(t,e,i,n){if(t.onInserting)return t.onInserting(t,e,i,n)},onGridBaseDeleting:function(t,e){if(t.onDeleting)return t.onDeleting(t,e)},onGridBaseUpdateStarted:function(t,e){t.onUpdateStarted&&t.onUpdateStarted(t,e)},onGridBaseInsertStarted:function(t,e,i){t.onInsertStarted&&t.onInsertStarted(t,e,i)},onGridBaseKeyDown:function(t,e,i,n,s){if(t.onKeyDown)return t.onKeyDown(t,e,i,n,s)},onGridBaseShowEditor:function(t,e){if(t.onShowEditor)return t.onShowEditor(t,e)},onGridBaseEditChange:function(t,e,i){t.onEditChanged&&t.onEditChanged(t,e,i)},onGridBaseEditCommit:function(t,e,i,n){if(t.onEditCommitted)return t.onEditCommitted(t,e,i,n)},onGridBaseEditCanceled:function(t,e,i){return t.onEditCanceled&&t.onEditCanceled(t,e,i)},onGridBaseEditSearch:function(t,e,i){return t.onEditSearch&&t.onEditSearch(t,e,i)},onGridBaseEditCellUpdated:function(t,e,i,n,s){return t.onEditCellUpdated&&t.onEditCellUpdated(t,e,i,n,s)},onGridBaseEditRowCommitted:function(t,e,i){return t.onEditRowCommitted&&t.onEditRowCommitted(t,e,i)},onGridBaseEditRowCanceled:function(t,e,i){return t.onEditRowCanceled&&t.onEditRowCanceled(t,e,i)},onGridBaseCopy:function(t,e,i){return t.onCopy&&t.onCopy(t,e,i)},onGridBasePaste:function(t,e,i){return t.onPaste&&t.onPaste(t,e,i)},onGridBaseEditRowPasted:function(t,e,i,n,s){return t.onEditRowPasted&&t.onEditRowPasted(t,e,i,n,s)},onGridBasePasted:function(t,e,i,n){return t.onPasted&&t.onPasted(t,e,i,n)},onGridBaseRowChecked:function(t,e,i){return t.onRowChecked&&t.onRowChecked(t,e,i)},onGridBaseRowsChecked:function(t,e,i){return t.onRowsChecked&&t.onRowsChecked(t,e,i)},onGridBaseCheckedChanged:function(t,e){return t.onCheckedChanged&&t.onCheckedChanged(t,e)},onGridBaseAllCheck:function(t,e){if(t.onAllCheck)return t.onAllCheck(t,e)},onGridBaseAllChecked:function(t,e){return t.onAllChecked&&t.onAllChecked(t,e)},onGridBaseErrorClicked:function(t,e,i){return t.onErrorClicked&&t.onErrorClicked(t,e,i)},onGridBaseSorting:function(t,e,i){if(t.onSorting)return t.onSorting(t,e,i)},onGridBaseSorted:function(t){return t.onSorted&&t.onSorted(t)},onGridBaseFiltering:function(t,e){if(t.onFiltering)return t.onFiltering(t,e)},onGridBaseFiltered:function(t){return t.onFiltered&&t.onFiltered(t)},onGridBaseAutoFilling:function(t,e,i,n,s){if(t.onAutoFilling)return t.onAutoFilling(t,e,i,n,s)},onGridBaseAutoFilled:function(t,e,i,n,s){return t.onAutoFilled&&t.onAutoFilled(t,e,i,n,s)},onGridBaseMenuPopup:function(t,e,i){return t.onPopupMenuPopup&&t.onPopupMenuPopup(t,e,i)},onGridBaseMenuItemClicked:function(t,e){t.onPopupMenuClicked&&t.onPopupMenuClicked(t,e)},onGridBaseContextMenuPopup:function(t,e,i){if(t.onContextMenuPopup)return t.onContextMenuPopup(t,e,i)},onGridBaseContextMenuItemClicked:function(t,e,i){t.onContextMenuClicked&&t.onContextMenuClicked(t,e,i)},onGridBaseUndoStateChanged:function(t,e,i){t.onUndoStateChanged&&t.onUndoStateChanged(t,e,i)},onGridBaseColumnWidthChanged:function(t,e,i,n){return t.onColumnWidthChanged&&t.onColumnWidthChanged(t,e,i,n)},onGridBaseColumnHeaderClicked:function(t,e,i){return t.onColumnHeaderClicked&&t.onColumnHeaderClicked(t,e,i)},onGridBaseColumnHeaderDblClicked:function(t,e){t.onColumnHeaderDblClicked&&t.onColumnHeaderDblClicked(t,e)},onGridBaseColumnChecked:function(t,e,i){t.onColumnChecked&&t.onColumnChecked(t,e,i)},onGridBaseHeaderHeadClicked:function(t){return t.onHeaderHeadClicked&&t.onHeaderHeadClicked(t)},onGridBaseHeaderHeadDblClicked:function(t){return t.onHeaderHeadDblClicked&&t.onHeaderHeadDblClicked(t)},onGridBaseRowIndicatorCellClick:function(t,e){return t.onRowIndicatorCellClick&&t.onRowIndicatorCellClick(t,e)},onGridBaseRowIndicatorCellClicked:function(t,e){return t.onRowIndicatorCellClicked&&t.onRowIndicatorCellClicked(t,e)},onGridBaseRowIndicatorCellDblClicked:function(t,e){return t.onRowIndicatorCellDblClicked&&t.onRowIndicatorCellDblClicked(t,e)},onGridBaseStateCellClicked:function(t,e){return t.onStateCellClicked&&t.onStateCellClicked(t,e)},onGridBaseStateCellDblClicked:function(t,e){return t.onStateCellDblClicked&&t.onStateCellDblClicked(t,e)},onGridBaseCheckCellClicked:function(t,e){return t.onCheckCellClicked&&t.onCheckCellClicked(t,e)},onGridBaseCheckCellDblClicked:function(t,e){return t.onCheckCellDblClicked&&t.onCheckCellDblClicked(t,e)},onGridBaseCheckBarHeadClicked:function(t){return t.onCheckBarHeadClicked&&t.onCheckBarHeadClicked(t)},onGridBaseCheckBarHeadDblClicked:function(t){return t.onCheckBarHeadDblClicked&&t.onCheckBarHeadDblClicked(t)},onGridBaseFooterCellClicked:function(t,e){return t.onFooterCellClicked&&t.onFooterCellClicked(t,e)},onGridBaseFooterCellDblClicked:function(t,e){return t.onFooterCellDblClicked&&t.onFooterCellDblClicked(t,e)},onGridBaseFooterHeadClicked:function(t){return t.onFooterHeadClicked&&t.onFooterHeadClicked(t)},onGridBaseFooterHeadDblClicked:function(t){return t.onFooterHeadDblClicked&&t.onFooterHeadDblClicked(t)},onGridBaseHeaderSummaryCellClicked:function(t,e){return t.onHeaderSummaryCellClicked&&t.onHeaderSummaryCellClicked(t,e)},onGridBaseHeaderSummaryCellDblClicked:function(t,e){return t.onHeaderSummaryCellDblClicked&&t.onHeaderSummaryCellDblClicked(t,e)},onGridBaseHeaderSummaryHeadClicked:function(t){return t.onHeaderSummaryHeadClicked&&t.onHeaderSummaryHeadClicked(t)},onGridBaseHeaderSummaryHeadDblClicked:function(t){return t.onHeaderSummaryHeadDblClicked&&t.onHeaderSummaryHeadDblClicked(t)},onGridBaseRowGroupHeadCellClicked:function(t,e){t.onRowGroupHeadCellClicked&&t.onRowGroupHeadCellClicked(t,e)},onGridBaseRowGroupHeadCellDblClicked:function(t,e){t.onRowGroupHeadCellDblClicked&&t.onRowGroupHeadCellDblClicked(t,e)},onGridBaseRowGroupHeaderClicked:function(t,e){t.onRowGroupHeaderClicked&&t.onRowGroupHeaderClicked(t,e)},onGridBaseRowGroupHeaderDblClicked:function(t,e){t.onRowGroupHeaderDblClicked&&t.onRowGroupHeaderDblClicked(t,e)},onGridBaseRowGroupFooterCellClicked:function(t,e){t.onRowGroupFooterCellClicked&&t.onRowGroupFooterCellClicked(t,e)},onGridBaseRowGroupFooterCellDblClicked:function(t,e){t.onRowGroupFooterCellDblClicked&&t.onRowGroupFooterCellDblClicked(t,e)},onGridBaseCellButtonClicked:function(t,e,i){t.onCellButtonClicked&&t.onCellButtonClicked(t,e,i)},onGridBaseEditorButtonClicked:function(t,e){t.onEditorButtonClicked&&t.onEditorButtonClicked(t,e)},onGridBaseDataButtonClicked:function(t,e){t.onDataButtonClicked&&t.onDataButtonClicked(t,e)},onGridBaseClickableCellClicked:function(t,e,i,n){t.onClickableCellClicked&&t.onClickableCellClicked(t,e,i,n)},onGridBaseDataCellClick:function(t,e){t.onDataCellClick&&t.onDataCellClick(t,e)},onGridBaseDataCellClicked:function(t,e){t.onDataCellClicked&&t.onDataCellClicked(t,e)},onGridBaseDataCellDblClicked:function(t,e){t.onDataCellDblClicked&&t.onDataCellDblClicked(t,e)},onGridBaseColumnParentChanged:function(t,e,i,n){t.onColumnParentChanged&&t.onColumnParentChanged(t,e,i,n)},onGridBaseColumnMoved:function(t,e,i,n){t.onColumnMoved&&t.onColumnMoved(t,e,i,n)},onGridBaseColumnVisibleChanged:function(t,e){t.onColumnVisibleChanged&&t.onColumnVisibleChanged(t,e)},onGridBaseExcludeColumn:function(t,e){t.onExcludeColumn&&t.onExcludeColumn(t,e)},onGridBaseColumnResizing:function(t,e,i,n){if(t.onColumnResizing)return t.onColumnResizing(t,e,i,n)},onGridBaseColumnResized:function(t,e,i,n){t.onColumnResized&&t.onColumnResized(t,e,i,n)},onGridBaseRowResizing:function(t,e,i,n){if(t.onRowResizing)return t.onRowResizing(t,e,i,n)},onGridBaseRowResized:function(t,e,i,n){t.onRowResized&&t.onRowResized(t,e,i,n)}}},$_getCellEditorType:function(t){var e,i,n,s=t.dataColumn();return s?((n=s.editorCallback())&&(e=n(t),I4(i=this._grid.getCellEditor(e))&&(e=i.type||"")),void 0===e&&(e=s.editor()),e&&e.toLowerCase()):null},getCellEditorOptions:function(t){var e,i,n,s=t.dataColumn();return s?(n=s.editorCallback())&&(e=n(t),I4(i=this._grid.getCellEditor(e)))?i:s.editorOptions():null}}),$$_FONT_HEIGHT_EX=3,v78=I1("HeightMeasurer",null,{init:function(){this._super(),this._itemHeight=0,this._headerHeight=0,this._footerHeight=0,this._summaryHeight=0,this._groupHeaderHeight=0,this._groupFooterHeight=0},itemHeight:function(){return this._itemHeight},headerHeight:function(){return this._headerHeight},footerHeight:function(){return this._footerHeight},summaryHeight:function(){return this._summaryHeight},groupHeaderHeight:function(){return this._groupHeaderHeight},groupFooterHeight:function(){return this._groupFooterHeight},calculate:function(t,e,i,n,s,r){},getGroupHeaderHeight:function(t,e){if(t&&e){var i=e.getLevel(t.level()-1);if(i){var n=i.headerHeight();if(!isNaN(n)&&0<n)return n}}return this._groupHeaderHeight},getGroupFooterHeight:function(t,e){if(t&&e){var i=e.getLevel(t.level()-1);if(i){var n=i.footerHeight();if(!isNaN(n)&&0<n)return n}}return this._groupFooterHeight},$_calcLine:function(t){var e=t.fontSize()+$$_FONT_HEIGHT_EX;return e=e+Math.max(1,t.borderTopWidth())+Math.max(1,t.borderBottomWidth())+Math.max(1,t.paddingTop())+Math.max(1,t.paddingBottom()),Y1(e)},$_indicatorHeight:function(t){return t.styles().fontSize()+$$_FONT_HEIGHT_EX},_calcItemLine:function(t){var e=this.$_calcLine(t.body().cellStyles()),i=t.rowIndicator();return i.visible()&&(e=Math.max(e,this.$_indicatorHeight(i))),e},_calcHeaderLine:function(t){return this.$_calcLine(t.header().styles())},_calcFooterLine:function(t){return this.$_calcLine(t.footer().styles())},_calcSummaryLine:function(t){return this.$_calcLine(t.header().summary().styles())},_calcGroupHeaderLine:function(t){return this.$_calcLine(t.headerStyles())},_calcGroupFooterLine:function(t){return this.$_calcLine(t.footerStyles())},_setMeasuredHeight:function(t,e){t._measuredHeight=e},_getRootColumn:function(t){return t._rootGroup()}}),t9=I1("SimpleHeightsMeasurer",v78,{init:function(){this._super()},calculate:function(t,e,i,n,s,r){t.$_calcGroupLevels(),this._itemHeight=e?this.$_calcItemHeights(t,t.getDataLevel()):0,this._headerHeight=i?this.$_calcHeaderHeights(t,t.getHeaderLevel()):0,this._footerHeight=n?this.$_calcFooterHeights(t,t.getFooterLevel()):0,this._summaryHeight=s?this.$_calcSummaryHeights(t,t.getHeaderSummaryLevel()):0,this._groupHeaderHeight=r?this.$_calcGroupHeaderHeights(r,t.getGroupHeaderLevel()):0,this._groupFooterHeight=r?this.$_calcGroupFooterHeights(r,t.getGroupFooterLevel()):0},$_arrangeItemHeights:function(t,e){var i,n,s,r=0,o=t.visibleCount();if(t.vertical()){var a=Y1(e/t.dataLevel());for(i=0;i<o;i++)s=t.getVisibleItem(i),i==o-1?n=Math.max(0,e-r):r+=n=s instanceof O1?a*s.dataLevel():a,this._setMeasuredHeight(s,n),s instanceof O1&&this.$_arrangeItemHeights(s,n)}else for(i=0;i<o;i++)s=t.getVisibleItem(i),this._setMeasuredHeight(s,e),s instanceof O1&&this.$_arrangeItemHeights(s,e)},$_calcItemHeights:function(t,e,i){var n,s=t.displayOptions(),r=i?0:Y1(s.rowHeight());r<=0&&(r=e*(n=this._calcItemLine(t))),r=Y1(Math.max(s.minRowHeight(),r)),0<(n=s.maxRowHeight())&&n<r&&(r=n);var o=this._getRootColumn(t);return this.$_arrangeItemHeights(o,r),r},$_calcHeaderHeights:function(t,e){var i=t.header(),n=Y1(i.height());return n<=0&&(n=e*this._calcHeaderLine(t)),Y1(Math.max(i.minHeight(),n))},$_calcFooterHeights:function(t,e){var i=t.footer(),n=Y1(i.height());return n<=0&&(n=e*this._calcFooterLine(t)),Y1(Math.max(i.minHeight(),n))},$_calcSummaryHeights:function(t,e){var i=t.header().summary(),n=Y1(i.height());return n<=0&&(n=e*this._calcSummaryLine(t)),Y1(Math.max(i.minHeight(),n))},$_calcGroupHeaderHeights:function(t,e){var i=Y1(t.headerHeight());return i<=0&&(i=e*this._calcGroupHeaderLine(t)),Y1(Math.max(t.minHeaderHeight(),i))},$_calcGroupFooterHeights:function(t,e){var i=Y1(t.footerHeight());return i<=0&&(i=e*this._calcGroupFooterLine(t)),Y1(Math.max(t.minFooterHeight(),i))}});t9.Default=new t9;var Q67=I1("FixedHeightsMeasurer",t9,{init:function(){this._super()},calculate:function(t,e,i,n,s,r){this._super(t,null,i,n,s,r),this._itemHeight=e?this.$_calcItemHeights(t):0},$_checkHeight:function(t,e){for(var i=t.visibleCount(),n=0;n<i;n++){var s=t.getVisibleItem(n);s._value=0<s.height()?s.height():e,s instanceof O1&&this.$_checkHeight(s,e)}},$_calcGroupHeight:function(t){var e,i=0,n=t.visibleCount();if(t.vertical())for(var s=0;s<n;s++)i+=(e=t.getVisibleItem(s))instanceof O1?this.$_calcGroupHeight(e):e._value;else for(s=0;s<n;s++)i=(e=t.getVisibleItem(s))instanceof O1?Math.max(i,this.$_calcGroupHeight(e)):Math.max(i,e._value);return t._sum=i},$_arrangeHeights:function(t,e){var i,n,s,r=t.visibleCount();if(t.vertical()){var o=0;if(t._sum>e)for(i=0;i<r;i++){var a=t.getVisibleItem(i);i<r-1?o+=n=Y1(e*a._value/t._sum):n=Math.max(0,e-o),this._setMeasuredHeight(a,n),a instanceof O1&&this.$_arrangeHeights(a,n)}else if(t._sum<e){var h=0;for(i=0;i<r;i++)0<(s=(a=t.getVisibleItem(i)).fillHeight())&&(h+=s);if(0<h){var l=e-t._sum;for(i=0;i<r;i++)a=t.getVisibleItem(i),i<r-1?(n=a._value,0<(s=a.fillHeight())&&(n+=Y1(l*s/h)),o+=n):n=Math.max(0,e-o),this._setMeasuredHeight(a,n),a instanceof O1&&this.$_arrangeHeights(a,n)}else for(i=0;i<r;i++)a=t.getVisibleItem(i),i<r-1?o+=n=Y1(e*a._value/t._sum):n=Math.max(0,e-o),this._setMeasuredHeight(a,n),a instanceof O1&&this.$_arrangeHeights(a,n)}else for(i=0;i<r;i++)a=t.getVisibleItem(i),i<r-1?o+=n=a._value:n=Math.max(0,e-o),this._setMeasuredHeight(a,n),a instanceof O1&&this.$_arrangeHeights(a,a._value)}else for(i=0;i<r;i++)a=t.getVisibleItem(i),this._setMeasuredHeight(a,e),a instanceof O1&&this.$_arrangeHeights(a,e)},$_calcItemHeights:function(t){var e=this._calcItemLine(t),i=this._getRootColumn(t);this.$_checkHeight(i,e);var n=t.displayOptions(),s=this.$_calcGroupHeight(i),r=Y1(n.rowHeight());return 0<r&&(s=r),s=Y1(Math.max(s,n.minRowHeight())),0<(r=Y1(n.maxRowHeight()))&&r<s&&(s=r),this.$_arrangeHeights(i,s),s}}),Q17=new g1,F17=I1("GridLayoutManager",null,{init:function(t){this._super(),this._grid=t,this._options=t?t.displayOptions():null,this._items=t?t.itemSource():null,this._columnCount=0,this._columns=[],this._fixedColumnPoints=[],this._columnPoints=[],this._fixedItemCount=0,this._itemCount=0,this._fullItemCount=0,this._availableItemCount=0,this._fixedItemPoints=[],this._itemPoints=[],this._fixedCols=0,this._fixedRows=0,this._fixedWidth=0,this._fixedHeight=0,this._columnsLength=0,this._prevFirst=0,this._prevLast=0,this._firstCol=0,this._lastCol=0,this._lastCol2=0,this._leftPos=0,this._topIndex=0},heightMeasurer:null,grid:function(){return this._grid},columnMerged:function(){return this._columnMerged},itemCount:function(){return this._itemCount},fullItemCount:function(){return this._fullItemCount},columnCount:function(){return this._columnCount},hscrolled:function(){return this._hscrolled},vscrolled:function(){return this._vscrolled},isColumnsFitted:function(){return this._columnsFitted},columnsLength:function(){return this._columnsLength},topIndex:function(){return this._topIndex},leftPos:function(){return this._leftPos},prevFirst:function(){return this._prevFirst},prevLast:function(){return this._prevLast},firstCol:function(){return this._firstCol},lastCol:function(){return this._lastCol},lastCol2:function(){return this._lastCol2},fixedItemCount:function(){return this._fixedItemCount},fixedColCount:function(){return this._fixedCols},fixedRowCount:function(){return this._fixedRows},rowGrouped:function(){return!1},rowGroupView:function(){return this._grid.bandedGroupView()},rowGroupLevels:function(){return 0},panelBounds:function(){return this._panelBounds.clone()},groupPanelBounds:function(){return this._groupPanelBounds.clone()},rowIndicatorBounds:function(){return this._rowIndicatorBounds.clone()},stateBarBounds:function(){return this._stateBarBounds.clone()},checkBarBounds:function(){return this._checkBarBounds.clone()},rowGroupHeadBounds:function(){return this._rowGroupBounds.clone()},rowGroupBounds:function(){return this._rowGroupBounds.clone()},headerBounds:function(){return this._headerBounds.clone()},fixedHeaderBounds:function(){return this._fixedHeaderBounds.clone()},editBarBounds:function(){return this._editBarBounds.clone()},summaryBounds:function(){return this._summaryBounds.clone()},fixedSummaryBounds:function(){return this._fixedSummaryBounds.clone()},headerItemsBounds:function(){return this._headerItemsBounds.clone()},footerItemsBounds:function(){return this._footerItemsBounds.clone()},footerBounds:function(){return this._footerBounds.clone()},fixedFooterBounds:function(){return this._fixedFooterBounds.clone()},fixedBounds:function(){return this._fixedBounds.clone()},nonfixedBounds:function(){return this._nonfixedBounds.clone()},bodyBounds:function(){return this._bodyBounds.clone()},gridBounds:function(){return this._gridBounds.clone()},clientRect:function(){return this._clientRect.clone()},fixedWidth:function(){return this._fixedWidth},fixedHeight:function(){return this._fixedHeight},cellIsVisible:function(t){var e=this._topIndex,i=t.rowIndex,n=this._fixedItemCount;if(n<=i){if(i<e+n)return!1;if(0==this._fullItemCount&&i==e+n)return!0;if(i>=e+n+this._fullItemCount)return!1}var s=t.column,r=s.root(),o=r.displayIndex();if((n=this._fixedCols)<=o){for(var a=this.columnBounds(o).x;s!=r;)a+=s.displayOffset(),s=s.parent();if(a<this._leftPos)return!1;if(a+t.column.displayWidth()-this._leftPos>this._nonfixedBounds.width)return!1}return!0},makeCellVisible:function(t){this._focusIndex=t.clone()},makeRowVisible:function(t){this._focusRow=t},getColumn:function(t){return this._columns[t]},getColumnBounds:function(t){return this.columnBounds(t)},columnBounds:function(t){var e;return t<this._fixedCols?new g1(this._fixedColumnPoints[t],0,this._fixedColumnPoints[t+1]-this._fixedColumnPoints[t],0):(e=t-this._fixedCols,new g1(this._columnPoints[e],0,this._columnPoints[e+1]-this._columnPoints[e],0))},getDataColumnBounds:function(t){return this.dataColumnBounds(t)},dataColumnBounds:function(t){var e=t.root(),i=t.dataRoot(),n=this.columnBounds(e.displayIndex());return i!==e&&(n.x+=t.$_getOffset(),n.width=i.groupWidth()),n},yU:function(){return this._grid._feedbackLayer},getColumnRect:function(t){return this.columnRect(t)},columnRect:function(t){var e,i;return t<this._fixedCols?(e=this._gridBounds.x,i=t,new g1(this._fixedColumnPoints[i]+e,0,this._fixedColumnPoints[i+1]-this._fixedColumnPoints[i],0)):(e=this._bodyBounds.x,i=t-this._fixedCols,new g1(this._columnPoints[i]+e,0,this._columnPoints[i+1]-this._columnPoints[i],0))},getDataColumnRect:function(t){return this.dataColumnRect(t)},dataColumnRect:function(t){var e=t.root(),i=t.dataRoot(),n=this.columnRect(e.displayIndex());return i!==e&&(n.leftBy(t.$_getOffset()),n.width=i.groupWidth()),n},dataRootBounds:function(t){var e=t.root(),i=t.dataRoot(),n=this.columnBounds(e.displayIndex());return i!=e&&(this._getColumnRectInRoot(i,e,Q17),n.leftBy(Q17.x),n.width=i.displayWidth()),n},dataRootRect:function(t){var e=t.root(),i=t.dataRoot(),n=this.columnRect(e.displayIndex());return i!=e&&(this._getColumnRectInRoot(i,e,Q17),n.leftBy(Q17.x),n.width=i.displayWidth()),n},itemBounds:function(t,e){var i=e?this._fixedBounds:this._bodyBounds;return t<this._fixedItemCount?new g1(0,this._fixedItemPoints[t],i.width,this._fixedItemPoints[t+1]-this._fixedItemPoints[t]):new g1(0,this._itemPoints[t-this._fixedItemCount],i.width,this._itemPoints[t-this._fixedItemCount+1]-this._itemPoints[t-this._fixedItemCount])},getItemBounds:function(t,e){return this.itemBounds(t,e)},itemRect:function(t,e){var i=e?this._fixedBounds:this._bodyBounds,n=i.y;return t<this._fixedItemCount?new g1(0,this._fixedItemPoints[t]+n,i.width,this._fixedItemPoints[t+1]-this._fixedItemPoints[t]):new g1(0,this._itemPoints[t-this._fixedItemCount]+n,i.width,this._itemPoints[t-this._fixedItemCount+1]-this._itemPoints[t-this._fixedItemCount])},getItemRect:function(t,e){return this.itemRect(t,e)},dataCellRect:function(t){var e=this._grid;if(!e.isValidCell(t)||this._fixedItemCount+this._itemCount<1)return new g1;var i,n=t.column,s=n.root(),r=this.columnRect(s.displayIndex()),o=null;return s.displayIndex(),this._fixedCols,t.rowIndex<this._fixedItemCount?(o=this.getItemBounds(t.rowIndex),r.y=o.y+this._bodyBounds.y,r.height=o.height):(i=t.rowIndex-e.topIndex())<0||i>=this._itemCount+this._fixedItemCount?(r.y=this.getItemBounds(0).y+this._bodyBounds.y,r.height=0):(o=this.getItemBounds(i),r.y=o.y+this._bodyBounds.y,r.height=o.height),n!==s&&(o||(o=new g1),this._getColumnRectInRoot(n,s,o),o.offset(r.x,r.y),r.copy(o)),r},mouseToIndex:function(t,e,i){if(i.rowIndex=-1,i.column=null,this._columnCount<1)return i;var n,s=-1,r=this.grid(),o=this._summaryBounds.bottom();if(o<=e&&e<this._footerBounds.y){for(n=0;n<this._fixedItemCount;n++)if(e>=o+this._fixedItemPoints[n]&&e<o+this._fixedItemPoints[n+1]){s=n,e-=o+this._fixedItemPoints[n];break}if(s<0&&0<this._itemCount){for(n=0;n<this._itemCount;n++)if(e>=o+this._itemPoints[n]&&e<o+this._itemPoints[n+1]){s=n,e-=o+this._itemPoints[n];break}0<=s&&(s+=r.topRow())}}else e>=this._footerBounds.y?s=-2:e<this._headerBounds.y&&(s=-3);i.rowIndex=s;var a=-1,h=this._gridBounds.x;if(h<=t&&t<=this._clientRect.width){for(t-=h,n=0;n<this._fixedCols;n++)if(t>=this._fixedColumnPoints[n]&&t<this._fixedColumnPoints[n+1]){a=n,t-=this._fixedColumnPoints[n];break}if(a<0)for(t=t-this._fixedWidth+this._leftPos,n=this._firstCol;n<=this._lastCol;n++)if(t>=this._columnPoints[n-this._fixedCols]&&t<this._columnPoints[n-this._fixedCols+1]){a=n,t-=this._columnPoints[n-this._fixedCols];break}}if(0<=a&&a<r.visibleColumnCount()){i.column=r.getVisibleColumn(a);var l=Q2(i.column.root(),O1);l&&(i.column=l.columnAtPoint(t,e))}else i.rowIndex=-1,i.column=null;return i},mouseToIndexEx:function(t,e,i){if(this._columnCount<1)return i;var n,s=0,r=this.grid(),o=this._topIndex+this._fixedItemCount,a=this._bodyBounds.y;if(e<a)s=-1;else if(e>=this._bodyBounds.bottom()&&e<this._footerBounds.y)s=o+this._fullItemCount;else if(e>=this._footerBounds.y)s=o+this._fullItemCount;else{for(s=-1,n=0;n<this._fixedItemCount;n++)if(e>=a+this._fixedItemPoints[n]&&e<a+this._fixedItemPoints[n+1]){s=n;break}if(s<0&&0<this._itemCount){for(n=0;n<this._itemCount;n++)if(e>=a+this._itemPoints[n]&&e<a+this._itemPoints[n+1]){s=n;break}0<=s&&(s+=o)}}i.rowIndex=s;var h=-1,l=this._gridBounds.x;if(t<l)h=Math.max(0,this._firstCol-1);else if(t>=this._bodyBounds.right()&&t<this._clientRect.right())h=r.visibleColumnCount()-1;else if(t>this._clientRect.right())h=Math.min(r.visibleColumnCount()-1,this._lastCol+1);else{for(t-=l,n=0;n<this._fixedCols;n++)if(t>=this._fixedColumnPoints[n]&&t<this._fixedColumnPoints[n+1]){h=n;break}if(h<0)for(t=t-this._fixedWidth+this._leftPos,n=this._firstCol;n<=this._lastCol;n++)if(t>=this._columnPoints[n-this._fixedCols]&&t<this._columnPoints[n-this._fixedCols+1]){h=n;break}}return 0<=h&&h<r.visibleColumnCount()?i.column=r.getVisibleColumn(h):i.column=null,i},measure:function(t,e,i,n,s){this._items=this._grid.itemSource(),this._options=this._grid.displayOptions(),this._leftPos=e,this._topIndex=i,this._columnMerged=!1,this._vcolgrouped=this._grid._columnVerticalGrouped,this._leafCols=null,this._doMeasure(t,n,s),this._focusIndex=null,this._focusRow=-1},layout:function(t){this._doLayout(t)},fitColumnWidth:function(t,e,i,n,s){this._grid&&(t instanceof O1?this._doFitGroupWidth(t,e,i,n,s):t instanceof t2&&this._doFitColumnWidth(t,e,i,n,!1,s))},fitRowHeight:function(t,e,i){var n=this._leafCols;n||(n=this._leafCols=this._grid.getLeafColumns());var s,r,o,a=this._heightMeasurer.$_calcItemHeights(this._grid,1,!0),h=Math.max(e,a),l=0,u=t.index();i=0<i?i:1e6;for(var d=n.length;d--;)s=(r=n[d]).isRoot()?this.columnBounds(r.displayIndex()).width:this.dataColumnBounds(r).width,o=this._measureColumnHeight(this._grid,u,n[d],s,i),!isNaN(o)&&0<o&&(l=Math.max(l,o));return!isNaN(i)&&i&&(l=Math.min(l,i)),isNaN(e)||(l=Math.max(l,h)),l},isMergedCell:function(t){var e=this._grid;if(this._getRowGroup().mergeMode()&&e.isGroupedColumn(t.dataColumn()))return!0;var i=t.column;if(i instanceof t2&&i.canMerge()){var n=i.stateFor(f4.MERGE_ROOMS);if(n)return null!=n.getRoom(t)}return!1},getMergedCell:function(t){var e,i=t.column;return i.canMerge()&&(e=i.stateFor(f4.MERGE_ROOMS))?e.getRoom(t):null},scrollToNextColumn:function(){for(var t=0;t<this._columnCount;t++)if(this._columnPoints[t]>this._leftPos)return this._columnPoints[t];return this._leftPos},scrollToPrevColumn:function(){for(var t=this._columnCount-1;0<=t;t--)if(this._columnPoints[t]<this._leftPos)return this._columnPoints[t];return this._leftPos},getDataColumns:function(){for(var t=[],e=0;e<this._columns.length;e++){var i=this._columns[e];i instanceof L2?t.push(i):i instanceof O1&&$_collectDataColumns(i,t,!0)}return t},getDataColumnsOf:function(t){for(var e=[],i=0;i<this._columns.length;i++){var n=this._columns[i];n instanceof L2&&0<=n.dataIndex()?e.push(n):n instanceof O1&&$_collectDataColumnsOf(n,t,e,!0)}return e},containsDataRow:function(t){return null!=this._grid.bodyView().findRowViewById(t)},getCellValue:function(t,e){var i=this._grid.bodyView().findRowViewById(t);if(null!=i){var n=i.getCell(e);if(n)return n.value()}},_getRowGroup:function(){return null},_isColumnsDirty:function(){return this._grid._isColumnsDirty()},_isHeaderDirty:function(){return this._grid._isStylesDirty()||this._grid.header().dirty()||this._grid._isColumnsDirty()},_isFooterDirty:function(){return this._grid._isStylesDirty()||this._grid.footer().dirty()||this._grid._isColumnsDirty()},_getFixedRowCount:function(){var t=this._grid.itemSource();return t?Math.min(t.fixedCount(),t.rowCount()):0},_getItem:function(t){return this._items.getItem(t)},_doMeasure:function(t,e,i){var n,s,r,o,a=this._grid,h=a.displayOptions(),l=a.rowIndicator(),u=this.rowGrouped()?this._getRowGroup():null,d=t.clone();this._vscrolled=this._hscrolled=!1,this._prevFirst=this._firstCol,this._prevLast=this._lastCol,this._firstCol=0,this._lastCol=-1,u?a.bandedGroupView().setVisible(!0):a.bandedGroupView().setVisible(!1),this.$_calcFixedColumnPoints(),this.$_calcColumnPoints(),this._heightMeasurer.calculate(a,!0,a.header().visible(),a.footer().visible(),a.header().summary().visible(),u),this._panelBounds=d.clone(),this._groupPanelBounds=d.clone(),s=a.groupPanel().visible()&&(n=a.groupPanelView())?(n.setModel(a.groupPanel()),n.measure(a,d.width,d.height)):J2.EMPTY,this._groupPanelBounds.height=s.height,d.topBy(s.height),this._rowIndicatorBounds=d.clone(),s=l.$_indicatorVisible()?(n=a.rowIndicatorView()).measure(a,d.width,d.height):J2.EMPTY,this._rowIndicatorBounds.width=s.width,d.leftBy(s.width),this._stateBarBounds=d.clone(),s=l.$_stateVisible()?(n=a.stateBarView()).measure(a,d.width,d.height):J2.EMPTY,this._stateBarBounds.width=s.width,d.leftBy(s.width),this._checkBarBounds=d.clone(),s=a.checkBar().visible()?(n=a.checkBarView()).measure(a,d.width,d.height):J2.EMPTY,this._checkBarBounds.width=s.width,d.leftBy(s.width),this._rowGroupBounds=d.clone(),this._rowGroupHeadBounds=d.clone(),u?(s=this.rowGroupView().measure(a,d.width,d.height),this._rowGroupBounds.width=s.width,this._rowGroupHeadBounds.width=s.width,d.leftBy(s.width)):(this._rowGroupBounds.width=0,this._rowGroupHeadBounds.width=0),this._fixedBounds=d.clone(),this._fixedBounds.width=this._fixedWidth,d.leftBy(this._fixedWidth),this._headerBounds=d.clone(),a.header().visible()?(s=(n=a.headerView()).measure(a,d.width,d.height)).height=Math.max(s.height,this._heightMeasurer.headerHeight()):s=J2.EMPTY,this._headerBounds.height=s.height,this._headerBounds.width=s.width,this._fixedHeaderBounds=new g1(this._fixedBounds.x,this._headerBounds.y,this._fixedBounds.width,this._headerBounds.height),d.topBy(s.height),this._editBarBounds=d.clone(),a.editBar().visible()?((n=a.editBarRenderer()).setModel(a.editBar()),(s=n.measure(a,d.width,d.height)).height=Math.max(s.height,this._heightMeasurer.itemHeight(0))):s=J2.EMPTY,this._editBarBounds.height=s.height,this._editBarBounds.width=s.width,d.topBy(s.height),this._summaryBounds=d.clone(),a.header().summary().visible()?(s=(n=a.summaryView()).measure(a,d.width,d.height)).height=Math.max(s.height,this._heightMeasurer.summaryHeight()):s=J2.EMPTY,this._summaryBounds.height=s.height,this._summaryBounds.width=s.width,this._fixedSummaryBounds=new g1(this._fixedBounds.x,this._summaryBounds.y,this._fixedBounds.width,this._summaryBounds.height),d.topBy(s.height),this._headerItemsBounds=d.clone(),s=h.customItemsVisible()&&a.headerItems().visible()?(n=a.headerItemsView()).measure(a,d.width,d.height):J2.EMPTY,this._headerItemsBounds.height=s.height,this._headerItemsBounds.width=s.width,d.topBy(s.height),this._footerBounds=d.clone(),a.footer().visible()?(s=(n=a.footerView()).measure(a,d.width,d.height)).height=Math.max(s.height,this._heightMeasurer.footerHeight()):s=J2.EMPTY,this._footerBounds.y=d.bottom()-s.height,this._footerBounds.width=s.width,this._footerBounds.height=s.height,this._fixedFooterBounds=new g1(this._fixedBounds.x,this._footerBounds.y,this._fixedBounds.width,this._footerBounds.height),d.bottomBy(-s.height),this._footerItemsBounds=d.clone(),s=h.customItemsVisible()&&a.footerItems().visible()?(n=a.footerItemsView()).measure(a,d.width,d.height):J2.EMPTY,this._footerItemsBounds.y=d.bottom()-s.height,this._footerItemsBounds.width=s.width,this._footerItemsBounds.height=s.height,o=this._headerItemsBounds.bottom(),this._gridBounds=new g1(this._fixedBounds.x,o,t.right()-this._fixedBounds.x,this._footerItemsBounds.y-o);var c=new g1(this._headerBounds.x,o,this._headerBounds.width,this._footerItemsBounds.y-o+1);this.$_calcHorzScroll(i,c,this._gridBounds),this._hscrolled&&c.bottomBy(-i),this._calcItemPoints(c),this._bodyBounds=c.clone(),this.$_updateScrollInfo(t,e,i),this.$_checkColumnMerging(),this._fixedBounds.y=this._bodyBounds.y,this._fixedBounds.height=this._bodyBounds.height,this._nonfixedBounds=this._gridBounds.clone(),this._nonfixedBounds.leftBy(this._fixedWidth),0<this._fixedHeight&&this._nonfixedBounds.topBy(this._fixedHeight+a.body().fixedRowBarHeight()),this.$_measureFitting(this._nonfixedBounds,this._vscrolled?e:0),this._columnsFitted?(this.$_fitColumns(this._nonfixedBounds.width),this._bodyBounds.width=this._columnsLength):this._clearFitWidths(),this.$_calcLeftPos(),u&&(this._rowGroupBounds.setRight(this._bodyBounds.right()),this._rowGroupBounds.setTop(this._bodyBounds.y),this._rowGroupBounds.setBottom(this._footerItemsBounds.y)),r=this._bodyBounds.right(),this._bodyBounds.x-=this._leftPos,this._panelBounds.setRight(r-this._leftPos),this._groupPanelBounds.setRight(r-this._leftPos),this._headerBounds.x=this._bodyBounds.x,this._headerBounds.width=this._bodyBounds.width,this._editBarBounds.x=this._bodyBounds.x,this._editBarBounds.width=this._bodyBounds.width,this._summaryBounds.x=this._bodyBounds.x,this._summaryBounds.width=this._bodyBounds.width,this._headerItemsBounds.x=this._groupPanelBounds.x,this._headerItemsBounds.width=this._groupPanelBounds.width,this._footerItemsBounds.x=this._headerItemsBounds.x,this._footerItemsBounds.width=this._headerItemsBounds.width,this._footerBounds.x=this._bodyBounds.x,this._footerBounds.width=this._bodyBounds.width,this._rowGroupHeadBounds.y=this._headerBounds.y,this._rowGroupHeadBounds.height=this._headerBounds.height,o=Math.min(this._footerItemsBounds.y,this._bodyBounds.bottom()),this._rowIndicatorBounds.y=this._bodyBounds.y,this._rowIndicatorBounds.setBottom(o),this._stateBarBounds.y=this._bodyBounds.y,this._stateBarBounds.setBottom(o),this._checkBarBounds.y=this._bodyBounds.y,this._checkBarBounds.setBottom(o);var _,f=0,g=0;0==this._topIndex&&(0<this._headerItemsBounds.height||0<this._footerItemsBounds.height)&&0<(_=this._footerItemsBounds.y-this._bodyBounds.bottom())&&(f=a.headerItemsView().getFillHeights(),g=a.footerItemsView().getFillHeights(),0<f&&(f=0<g?Y1(f*_/(f+g)):_),0<g&&(g=_-f),0<f&&(this._bodyBounds.y+=f,this._fixedBounds.y+=f,this._rowIndicatorBounds.y+=f,this._stateBarBounds.y+=f,this._checkBarBounds.y+=f,this._headerItemsBounds.height+=f),0<g&&this._footerItemsBounds.topBy(-g)),a.headerItemsView().setFillHeights(f),a.footerItemsView().setFillHeights(g)},$_calcHorzScroll:function(t,e,i){this._hscrolled=this._options.fitStyle()!=t0.EVEN_FILL,this._hscrolled&&(this._fixedWidth>=i.width?this._hscrolled=0<this._columnsLength:this._hscrolled=this._columnsLength>i.width-this._fixedWidth),e.width=this._columnsLength},$_updateScrollInfo:function(t,e,i){var n,s,r,o,a,h=this._options.fitStyle()==t0.EVEN_FILL,l=this._bodyBounds,u=this._footerBounds,d=this._footerItemsBounds,c=!h&&0<this._columnsLength&&(0<this._leftPos||l.right()>t.right()),_=0<this._itemCount&&(0<this._topIndex||l.bottom()>d.y);if(c&&(s=_?e:0,this._columnsLength<this._gridBounds.width-this._fixedBounds.width-s&&(c=!1)),c!=_&&(c?_=0<this._itemCount&&l.bottom()>d.y-i:c=!h&&0<this._columnsLength&&l.right()>t.right()-e),c){if(!this._hscrolled&&0<this._itemCount){var f=l.clone();f.setBottom(u.y-i),this._calcItemPoints(f),0<this._itemCount&&(l.height=this._itemPoints[this._itemCount])}if(this._fixedFooterBounds.y=u.y-=i,d.y-=i,l.setBottom(Math.min(l.bottom(),d.y)),this._gridBounds.setBottom(d.y),0<this._itemCount){for(n=this._fullItemCount;0<n&&l.y+this._itemPoints[n]>d.y;)this._fullItemCount--,n--;for(n=this._itemCount;0<n&&l.y+this._itemPoints[n-1]>d.y;)this._itemCount--,this._itemPoints.pop(),n--}}else this._leftPos=0;if(o=l.bottom(),0<this._itemCount&&o<this._footerItemsBounds.y){var g=this.grid(),m=g.delegate();for(a=this._footerItemsBounds.y-o;0<this._topIndex&&0<a&&!((r=this.$_getItemHeight(g,m,this._topIndex+this._fixedItemCount-1))>a);){if(this._topIndex--,this._itemCount++,this._fullItemCount++,this._itemPoints.length<1)this._itemPoints.push(0,r);else{for(var p=this._itemPoints.length;0<p;p--)this._itemPoints[p]=this._itemPoints[p-1]+r;this._itemPoints[1]=r}l.bottomBy(r),a-=r}_&&0==this._topIndex&&0<a&&(_=!1,c&&(c=l.right()>t.right()),a/=r=this._heightMeasurer.itemHeight(0),this._availableItemCount=this._fullItemCount+a)}else this._availableItemCount=this._fullItemCount;this._hscrolled=c,this._vscrolled=_,this._scrollBarWidth=_?e:0,this._scrollBarHeight=c?i:0,this._clientRect=t.clone(),this._clientRect.width-=this._scrollBarWidth,this._clientRect.height-=this._scrollBarHeight,this._gridBounds.setRight(this._clientRect.right()),this._gridBounds.setBottom(this._footerItemsBounds.y)},$_calcLeftPos:function(){var t,e,i,n,s;if(0<this._leftPos&&(i=this._columnPoints.length-1,0<(n=this._nonfixedBounds.width-(this._columnPoints[i]-this._leftPos))&&(this._leftPos=Math.max(0,this._leftPos-n))),this._focusIndex&&(t=this._focusIndex.column)&&(i=(e=t.root()).displayIndex())>=this._fixedCols){for(s=this._columnPoints[i-this._fixedCols];t!=e;)s+=t.displayOffset(),t=t.parent();s<this._leftPos?this._leftPos=s:0<(n=s+this._focusIndex.column.displayWidth()-this._leftPos-this._nonfixedBounds.width)&&(this._leftPos=Math.min(s,this._leftPos+n))}var r=this._leftPos,o=this._clientRect.width;for(this._firstCol=this._fixedCols,this._lastCol2=this._lastCol=-1,i=this._fixedCols;i<this._columnCount;i++)if(this._columnPoints[i+1-this._fixedCols]>r){this._firstCol=i;break}for(o-=this._headerBounds.x,i=this._columnCount-1;i>=this._fixedCols;i--)if((s=this._columnPoints[i-this._fixedCols]-r)<o){this._lastCol2=this._lastCol=i,i<this._columnCount-1&&0<this._scrollBarHeight&&0<this._scrollBarWidth&&this._columnPoints[i+1-this._fixedCols]-r<o+this._scrollBarWidth&&this._lastCol2++;break}s=this._columnPoints[this._columnCount-this._fixedCols]-r,this._needVscrollIndent=s<=o+this._scrollBarWidth,this._allScrolled=s<=o},_doLayout:function(t){var e,i,n=this._gridBounds,s=this._grid,r=this._getRowGroup(),o=s.header(),a=o.summary(),h=s.footer(),l=s.rowIndicator(),u=s.checkBar(),d=0<this._fixedCols,c=this._vscrolled&&this._hscrolled?this._scrollBarWidth:0;(e=s.panelView())&&e.setVisible(!1),(e=s.groupPanelView())&&(e.setVisible(s.groupPanel().visible()),e.visible()&&(e.setRect(this._groupPanelBounds),e.setClipBounds(0,0,t.width,t.height),e.layoutContent(this))),(e=s.headerItemsView()).setVisible(0<this._headerItemsBounds.height),e.visible()&&(e.setRect(this._headerItemsBounds),e.layoutContent(this)),(e=s.rowIndicatorView()).setVisible(l.$_indicatorVisible()),e.visible()&&(e.setRect(this._rowIndicatorBounds),e.layoutContent(this)),(e=s.stateBarView()).setVisible(l.$_stateVisible()),e.visible()&&(e.setRect(this._stateBarBounds),e.layoutContent(this)),(e=s.checkBarView()).setVisible(u.visible()),e.visible()&&(e.setRect(this._checkBarBounds),e.layoutContent(this)),(e=r&&this.rowGroupView())&&(e.setVisible(this.rowGrouped()),e.visible()&&(e.setRect(i=this._rowGroupBounds),e.setClipBounds(i.x,i.y,n.right()-i.x+c,i.height))),(e=s.headerView()).setVisible(o.visible()),e.visible()&&(e.setRect(this._headerBounds),e.setClipBounds(this._nonfixedBounds.x,0,this._nonfixedBounds.width+c,t.height),e.layoutContent(this)),(e=s.fixedHeaderView()).setVisible(d&&o.visible()),e.visible()&&(e.setRect(this._fixedHeaderBounds),e.layoutContent(this)),(e=s.summaryView()).setVisible(a.visible()),e.visible()&&(e.setRect(this._summaryBounds),e.setClipBounds(this._nonfixedBounds.x,0,this._nonfixedBounds.width+c,t.height),e.layoutContent(this)),(e=s.fixedSummaryView()).setVisible(d&&a.visible()),e.visible()&&(e.setRect(this._fixedSummaryBounds),e.layoutContent(this)),(e=s.headerHeadView()).setVisible(o.visible()&&l.visible()&&o.head().visible()),e.visible()&&(e.updateCell(o.getHeadCell()),e.setBounds(this._rowIndicatorBounds.x,this._headerBounds.y,this._rowIndicatorBounds.width+this._stateBarBounds.width,this._headerBounds.height),e.layoutContent(this)),(e=s.checkBarHeadView()).setVisible(u.visible()&&o.visible()&&u.headVisible()),e.visible()&&(e.updateCell(u.getHeadCell()),e.setBounds(this._checkBarBounds.x,this._headerBounds.y,this._checkBarBounds.width,this._headerBounds.height),e.layoutContent(this)),(e=s.rowGroupHeadView()).setVisible(s.rowGrouped()&&!r.mergeMode()),e.visible()&&(e.setRect(this._rowGroupHeadBounds),e.layoutContent(this)),e=s.summaryHeadView(),i=0,a.visible()&&a.head().visible()&&(l.visible()&&(i+=this._rowIndicatorBounds.width+this._stateBarBounds.width),u.visible()&&(i+=this._checkBarBounds.width),i+=this._rowGroupHeadBounds.width),e.setVisible(0<i),e.visible()&&(e.updateCell(a.getHeadCell()),e.setBounds(this._rowIndicatorBounds.x,this._summaryBounds.y,i,this._summaryBounds.height),e.layoutContent(this)),(e=s.footerView()).setVisible(h.visible()),e.visible()&&(e.setRect(this._footerBounds),e.setClipBounds(this._nonfixedBounds.x,0,this._nonfixedBounds.width,this._footerBounds.bottom()),e.layoutContent(this)),(e=s.fixedFooterView()).setVisible(d&&h.visible()),e.visible()&&(e.setRect(this._fixedFooterBounds),e.layoutContent(this)),(e=s.footerItemsView()).setVisible(0<this._footerItemsBounds.height),e.visible()&&(e.setRect(this._footerItemsBounds),e.layoutContent(this)),e=s.footerHeadView(),i=0,h.visible()&&h.head().visible()&&(l.visible()&&(i+=this._rowIndicatorBounds.width+this._stateBarBounds.width),u.visible()&&(i+=this._checkBarBounds.width),i+=this._rowGroupHeadBounds.width),e.setVisible(0<i),e.visible()&&(e.updateCell(h.getHeadCell()),e.setBounds(this._rowIndicatorBounds.x,this._footerBounds.y,i,this._footerBounds.height),e.layoutContent(this));var _=s.fixedBodyView();e=s.bodyView(),0<this._fixedItemCount+this._itemCount?(0<this._fixedCols?(_.setVisible(!0),_.setRect(this._fixedBounds),_.setClipBounds(this._fixedBounds.x,this._gridBounds.y,this._fixedBounds.width,this._gridBounds.height)):_.setVisible(!1),e.setVisible(!0),e.setRect(this._bodyBounds),e.setClipBounds(this._nonfixedBounds.x,this._gridBounds.y,this._nonfixedBounds.width+c,this._gridBounds.height)):(_.setVisible(!1),e.setVisible(!1)),this._layoutItems(e,this._bodyBounds),(e=s.fixedMergeView()).setVisible(d),d&&(i=this._fixedBounds,e.setRect(i),e.setClipBounds(i.x,i.y,Math.min(i.width,n.right()-i.x),Math.min(i.height,n.bottom()-i.y))),e=s.mergeView(),i=this._bodyBounds,e.setRect(i),d?e.setClipBounds(Math.max(i.x,this._fixedBounds.right()),i.y,Math.min(i.width,n.right()-i.x),Math.min(i.height,n.bottom()-i.y)):e.setClipBounds(i.x,i.y,Math.min(i.width,n.right()-i.x),Math.min(i.height,n.bottom()-i.y)),i=this._fixedBounds,s.mergeHeaderView().setBounds(i.x,i.y,i.width+this._bodyBounds.width,i.height),s.mergeHeaderView().setClipBounds(i.x,i.y,Math.min(i.width+this._bodyBounds.width,n.right()-i.x),Math.min(i.height,n.bottom()-i.y)),this.$_layoutMerges()},$_calcFixedColumnPoints:function(){var t,e,i,n=this._grid;if(this._columns=[],this._columnCount=n.visibleColumnCount(),this._fixedCols=Math.min(n.displayOptions().fixedColumnCount(),this._columnCount),this._fixedColumnPoints=[],(this._fixedWidth=0)<this._fixedCols){for(e=0,this._fixedColumnPoints.push(e),t=0;t<this._fixedCols;t++)i=n.getVisibleColumn(t),this._columns.push(i),e+=i.width(),this._fixedColumnPoints.push(e);this._fixedWidth=this._fixedColumnPoints[this._fixedCols]+Math.max(0,n.body().fixedColumnBarWidth())}},$_calcColumnPoints:function(){var t=this._grid,e=this._columnCount-this._fixedCols,i=this._columnPoints=[];if((this._columnsLength=0)<e){var n,s,r=0;for(i.push(r),n=0;n<e;n++)s=t.getVisibleColumn(n+this._fixedCols),this._columns.push(s),r+=s.width(),i.push(r);this._columnsLength=r}},$_measureFitting:function(t){var e=this._grid;if(this._columnsFitted=this._options.fitStyle()!=t0.NONE,this._columnsFitted){var i=this._columnPoints.length;if(0<i){var n=t.width;this._options.fitStyle()==t0.EVEN_FILL||(this._columnsFitted=0<n-this._columnPoints[i-1])}else this._columnsFitted=!1}e.$_hideBorders=e.$_hideBorders&&this._columnsFitted},$_fitColumns:function(t){if(this._columnsFitted){var e=this._columns,i=this._columnPoints,n=i.length;if(0<n){var s,r,o,a,h,l=this._columnsLength,u=this._options.fitStyle();if(u==t0.EVEN||u==t0.EVEN_FILL)for(s=1;s<n;s++)i[s]=Y1(i[s]*t/l);else if(u==t0.FILL){for(s=h=a=0;s<n-1;s++)0<(r=e[s].fillWidth())?h+=r:a+=e[s].width();if(0<h)for(a=t-a,s=1;s<n;s++)0<(r=e[s-1].fillWidth())?i[s]=Y1(i[s-1]+r*a/h):i[s]=Y1(i[s-1]+e[s-1].width());else for(s=1;s<n;s++)i[s]=Y1(i[s]*t/l)}for(i[n-1]=t,s=0;s<n-1;s++)o=e[this._fixedCols+s],this._setFitWidth(o,i[s+1]-i[s])}this._columnsLength=t}},$_getItemHeight:function(t,e,i){var n,s,r,o,a,h=this._items.getItem(i);return this._vcolgrouped||(n=h.$_height(t),isNaN(n))?(r=!1,o=null,(s=e.borrowItemView(h,!1))instanceof c3&&(h instanceof j2?(o=this._getRowGroup().headerStyles(),r=!0):h instanceof m7?(o=this._getRowGroup().footerStyles(),r=!0):h instanceof M3&&(r=!0)),!o&&h instanceof g2&&(o=t.body().cellStyles()),s.updateElement(h,o),n=r?h instanceof m7?this._heightMeasurer.getGroupFooterHeight(h,t.rowGroup()):this._heightMeasurer.getGroupHeaderHeight(h,t.rowGroup()):this._heightMeasurer.itemHeight(),a=s.measure(t,1e4,n),e.returnItemView(s),a.height):n},$_compensateItems:function(t){var e,i,n,s,r,o=this.grid(),a=o.delegate(),h=this._fixedItemCount,l=this._focusIndex?this._focusIndex.rowIndex:this._focusRow;if(l>=this._topIndex+h+this._fullItemCount){for(this._topIndex=l-h-Math.max(0,this._fullItemCount-1),i=0<h?this._fixedHeight+o.body().fixedRowBarHeight():0,r=this._itemPoints=[i],this._itemCount=0,this._fullItemCount=0,this._availableItemCount=0,s=o.rowCount()-h,e=this._topIndex;e<s&&i<t.height;e++)i+=n=this.$_getItemHeight(o,a,e+h),this._itemCount++,r.push(i);if(l==this._topIndex+h+this._itemCount-1&&i>=t.height){for(;1<this._itemCount&&r[this._itemCount]>t.height;){for(n=r[1]-r[0],r.shift(),this._itemCount--,e=0;e<=this._itemCount;e++)r[e]-=n;this._topIndex++,i=r[this._itemCount]}for(;i<t.height&&this._topIndex+this._itemCount<s;)i+=n=this.$_getItemHeight(o,a,this._topIndex+this._itemCount+h),this._itemCount++,r.push(i)}return this._fullItemCount=this._itemCount-(i>=t.height?1:0),i}return-1},_calcItemPoints:function(t){var e,i,n,s,r=-1,o=this._grid,a=o.delegate(),h=0;if(this._fixedRows=this._getFixedRowCount(),this._fixedItemCount=0,this._fixedHeight=0,this._fixedItemPoints=[],0<this._fixedRows){for(this._fixedItemPoints.push(h),e=0;e<this._fixedRows&&h<t.height;e++)h+=n=this.$_getItemHeight(o,a,e),this._fixedItemPoints.push(h),this._fixedItemCount++;this._fixedHeight=h,h+=o.body().fixedRowBarHeight()}if(i=o.rowCount()-this._fixedItemCount,this._itemPoints=[],this._itemCount=0,this._fullItemCount=0,(this._availableItemCount=0)<i&&h<t.height){for(this._itemPoints.push(h),s=this._topIndex,(r=this._focusIndex?this._focusIndex.rowIndex:this._focusRow)>=this._fixedItemCount&&r<s+this._fixedItemCount&&(s=this._topIndex=r-this._fixedItemCount),e=s;e<i&&h<t.height;e++)h+=n=this.$_getItemHeight(o,a,e+this._fixedItemCount),this._itemCount++,this._itemPoints.push(h);this._fullItemCount=this._itemCount-(h>=t.height?1:0),0<=(n=this.$_compensateItems(t))&&(h=n)}t.height=h},$_checkMerging:function(t,e,i,n){var s,r;t instanceof t2&&t.canMerge()&&((s=t.stateFor(f4.MERGE_ROOMS))||(s=new f4(t),t.setState(f4.MERGE_ROOMS,s)),s.refresh(e,i),r=s.getRooms(),n.addColumnRooms(t,r),this._columnMerged=!0)},$_checkMergingGroup:function(t,e,i,n){for(var s=t.visibleCount();s--;)this.$_checkMerging(t.getVisibleItem(s),e,i,n)},$_checkColumnMerging:function(){var t,e,i,n=this._grid,s=n.mergeView(),r=n.fixedMergeView(),o=this._fixedItemCount+this._topIndex,a=Math.min(n.rowCount()-1,this._fixedItemCount+this._topIndex+this._itemCount-1),h=0<this._fixedCols;for(h&&r.clearRooms(),s.clearRooms(),t=0,e=this._fixedCols;t<e;t++)i=this._columns[t],this.$_checkMerging(i,o,a,r),i instanceof O1&&i.horizontal()&&this.$_checkMergingGroup(i,o,a,r);for(t=this._fixedCols,e=this._columns.length;t<e;t++)i=this._columns[t],this.$_checkMerging(i,o,a,s),i instanceof O1&&i.horizontal()&&this.$_checkMergingGroup(i,o,a,s);h&&r.clearFooters(),s.clearFooters(),n.mergeHeaderView().clearHeaders()},_layoutItems:function(t,e){var i,n,s,r=this._grid,o=this._getRowGroup(),a=o&&this.rowGroupView(),h=r.bodyView(),l=r.fixedBodyView(),u=0<this._fixedCols;for(a&&a.clearBody(),h.clearItems(),l.clearItems(),i=0;i<this._fixedItemCount;i++)(n=this._items.getItem(i))instanceof U6?a.addHeader(n):n instanceof m7&&a?a.addFooter(n):n.merged()||(n.$_state=n.dataState(),n.$_checked=n.$_isChecked(r),h.addItem(n),u&&l.addItem(n));for(s=this._topIndex+this._fixedRows,i=0;i<this._itemCount;i++)(n=this._items.getItem(i+s))instanceof U6?a.addHeader(n):n instanceof m7&&a?a.addFooter(n):n instanceof M3?n.model().isHeader()?a.addCustomHeader(n):a.addCustomFooter(n):n.merged()||(n.$_state=n.dataState(),n.$_checked=n.$_isChecked(r),h.addItem(n),u&&l.addItem(n));h.layoutContent(this),u&&l.layoutContent(this),o&&this.rowGrouped()&&a.layoutContent(this)},$_layoutMerges:function(){var t,e,i,n,s,r,o=this._grid,a=0<this._fixedCols;for(e=o.mergeView(),i=this._topIndex+this._fixedRows,t=0;t<this._itemCount;t++)(n=this._items.getItem(t+i))instanceof o0&&e.addFooter(n);if(e.layoutContent(this),a){for(s=o.fixedMergeView(),t=0;t<this._itemCount;t++)(n=this._items.getItem(t+i))instanceof o0&&s.addFooter(n);s.layoutContent(this)}for(r=o.mergeHeaderView(),t=0;t<this._itemCount;t++)(n=this._items.getItem(t+i))instanceof P0&&r.addHeader(n);r.layoutContent(this)},_doFitGroupWidth:function(t,e,i,n,s){var r,o,a,h,l=this._grid,u=s&&l.header().visible();if(l.rowCount()<1)return 2;for(maxw=0,r=t.visibleCount();r--;)a=(o=t.getVisibleItem(r))instanceof O1?this._doFitGroupWidth(o,e,i,n,u):this._doFitColumnWidth(o,e,i,n,!0,u),t.layout()==d0.HORIZONTAL?(O1.changeWidth(o,a-o.groupWidth(),!1),maxw+=a):maxw=Math.max(maxw,a);return u&&(h=l._headerView.findCell(o,!0))&&h.visible()&&(maxw=Math.max(maxw,h.measureWidth(l,0,Q0,Q0))),t.layout()==d0.VERTICAL&&(0<n&&(maxw=Math.min(maxw,n)),0<i&&(maxw=Math.max(maxw,i)),maxw=Math.max(maxw,2),O1.changeWidth(t,maxw-t.groupWidth(),!1)),maxw},_doFitColumnWidth:function(t,e,i,n,s,r){var o,a,h,l,u,d,c=2,_=this._grid,f=_.delegate(),g=_.body(),m=this._options.defaultColumnWidth(),p=_.rowCount();if(p<1)return c;if(u=t instanceof Q7?new p67(_):new F67(_),a=0,h=p,e&&(h=(a=_.topRow())+this.itemCount(),0<(p=this.fixedItemCount())))for(o=this.$_getItemHeight(_,f,0),l=0;l<p;l++)u.updateCell(g.getCell(P1.temp(l,t))),d=u.measureWidth(_,m,Q0,o),c=Math.max(c,d);if(a<h)for(o=this.$_getItemHeight(_,f,a),l=a;l<h;l++)u.updateCell(g.getCell(P1.temp(l,t))),d=u.measureWidth(_,m,Q0,o),c=Math.max(c,d);return 0<n&&(c=Math.min(c,n)),0<i&&(c=Math.max(c,i)),r&&_.header().visible()&&(u=(t.fixed()?_._fixedHeaderView:_._headerView).findCell(t))&&u.visible()&&(c=Math.max(c,u.measureWidth(_,0,Q0,Q0))),!s&&O1.changeWidth(t,c-t.groupWidth(),!1),c},_measureColumnHeight:function(t,e,i,n,s){var r=i instanceof Q7?new p67(t):new F67(t);return r.updateCell(t._body.getCell(P1.temp(e,i))),r.measureHeight(t,n,s)},_getColumnRectInRoot:function(t,e,i){var n=t.parent();for(i.copy(t._layoutRect);n!=e;)i.offset(n._layoutRect.x,n._layoutRect.y),n=n.parent()},_clearFitWidths:function(){this.grid()._clearFitWidths()},_getColumnWidth:function(t){return t<this._fixedCols?this._fixedColumnPoints[t+1]-this._fixedColumnPoints[t]:this._columnPoints[t-this._fixedCols+1]-this._columnPoints[t-this._fixedCols]},_setFitWidth:function(t,e){t._fitWidth=e;var i=Q2(t,O1);i&&i.resetFitWidths()}}),F67=I1("TestDataCellElement",l4,{init:function(t){this._super(t._dom),this._grid=t},grid:function(){return this._grid},container:function(){return this._grid.container()}}),p67=I1("TestSeriesCellElement",j9,{init:function(t){this._super(t._dom),this._grid=t},grid:function(){return this._grid},container:function(){return this._grid.container()}}),$$_EDITOR_THRESHOLD=l27?1:0,$$_EMPTY_TEXT_VALUE="***1-da*&23%^1//+)(lu%v\\3d!#~`{``~er",X7=I1("CellEditor",a2,{init:function(t,e){this._super(),this._grid=t,this._parentElement=e,this._editor=this._createEditor(e),(this._editor.$_owner=this)._editIndex=new P1,this._controller=null,this._started=!1,this._oldValue=void 0,this._dateConverter=z3.Default,this._saveDateConverter=null,this._boolConverter=l7.Default,this._saveBoolConverter=null,this._setCallback=null,this._getCallback=null,this._cellBounds=new g1,this._editor&&(this._editor.$$_grideditor=!0,this._editor.addEventListener?(this._editor.addEventListener("focus",function(t){this._grid.$_setEditFocused(!0)}.bind(this)),this._editor.addEventListener("focusin",function(t){this._grid.$_setEditFocused(!0)}.bind(this)),this._editor.addEventListener("blur",function(t){this._grid.$_setEditFocused(!1)}.bind(this)),this._editor.addEventListener("focusout",function(t){this._grid.$_setEditFocused(!1)}.bind(this)),this._editor.addEventListener("selectstart",function(t){return t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),!0}.bind(this))):(this._editor.attachEvent("onfocus",function(t){this._grid.$_setEditFocused(!0)}.bind(this)),this._editor.attachEvent("onfocusin",function(t){this._grid.$_setEditFocused(!0)}.bind(this)),this._editor.attachEvent("onblur",function(t){this._grid.$_setEditFocused(!1)}.bind(this)),this._editor.attachEvent("onfocusout",function(t){this._grid.$_setEditFocused(!1)}.bind(this)),this._editor.attachEvent("onselectstart",function(t){return t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.returnValue=!0}.bind(this)))),this.setVisible(!1,!0)},emptyValue:void 0,textCase:u1(z0,z0.DEFAULT),fontName:void 0,fontSize:void 0,datetimeFormat:null,booleanFormat:null,visible:!1,readOnly:!1,keyCallback:null,onSetEditValue:null,onGetEditValue:null,setReadOnly:function(t){d4&&!this.visible()?this._readOnly=t:this._editor.readOnly=this._readOnly=t},setDatetimeFormat:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._dateConverter=t?(this._saveDateConverter||(this._saveDateConverter=new z3(t)),this._saveDateConverter.setFormatString(t),this._saveDateConverter):z3.Default)},setBooleanFormat:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolConverter=t?(this._saveBoolConverter||(this._saveBoolConverter=new l7(t)),this._saveBoolConverter.setFormat(t),this._saveBoolConverter):l7.Default)},setOnSetEditValue:function(t){t!=this._onSetEditValue&&(this._onSetEditValue=t,this._setCallback=m0(t))},setOnGetEditValue:function(t){t!=this._onGetEditValue&&(this._onGetEditValue=t,this._getCallback=m0(t))},editor:function(){return this._editor},visible_:function(){return parseInt(this._container.style.width)>$$_EDITOR_THRESHOLD&&parseInt(this._container.style.height)>$$_EDITOR_THRESHOLD},setVisible:function(t,e){var i,n=this._grid,s=this._editor;t&&((i=this._fontName?this._fontName:n?n.editOptions().fontName():"")!=s.style.fontFamily&&(s.style.fontFamily=i||"Tahoma"),i=this._fontSize?this._fontSize:n?n.editOptions().fontSize():"",isNaN(i)||(i+="px"),i!=s.style.fontSize&&(s.style.fontSize=i||"10pt")),t&&s.value==$$_EMPTY_TEXT_VALUE?s.value="":t||null!=s.value&&null!=s.value&&""!=s.value||(s.value=$$_EMPTY_TEXT_VALUE,this._grid.$_editFocused&&this.selectAll()),t||w1.setSize(this._container,$$_EDITOR_THRESHOLD,$$_EDITOR_THRESHOLD),d4&&(s.readOnly=this._readOnly||this._textReadOnly,this._noIme||(t&&s.readOnly?s.style.imeMode="inactive":s.style.imeMode="auto"))},isEditing:function(){return this._started},editIndex:function(){return this._editIndex},hasButton:function(){return!1},maskable:function(){return!1},dispose:function(){this._deleteEditor()},initOptions:function(){this._emptyValue=void 0,this._booleanFormat=null,this._datetimeFormat=null,this._textCase=z0.DEFAULT,this._fontName=null,this._fontSize=null,this._keyCallback=null},applyOptions:function(t){t&&this.assign(t)},setController:function(t){this._controller=t},beginEdit:function(t,e){this._started||(this._started=this._doBeginEdit(),t&&this.clear(),e&&this.selectAll())},endEdit:function(){this._started&&(this._doEndEdit(),this._started=!1)},caretToLast:function(){},commit:function(){this._doCommit()},setEditIndex:function(t){this._editIndex.assign(t)},getEditValue:function(t,e){},setEditValue:function(t){this._oldValue=t},getEditText:function(){return""},clear:function(){this._editor.value=""},setFocus:function(){this._editor.focus()},selectAll:function(){this._grid.$_editFocused&&this._selectAll()},setBounds:function(t,e,i,n){},setCellBounds:function(t,e,i,n){this._cellBounds.set(t,e,i,n)},showList:function(t){},closeList:function(t){},buttonClicked:function(t){},_createEditor:function(t){return null},_deleteEditor:function(){},_selectAll:function(){},_editField:function(){return this._grid.dataSource()?this._grid.dataSource().getField(this._editIndex.dataField()):null},_isDateEditor:function(){return!1},_doBeginEdit:function(){return!0},_doEndEdit:function(){},_doBack:function(){},_doDelete:function(){},_doChar:function(t,e){},_doCopy:function(t){},_doCut:function(t){},_doPaste:function(t){},_requestStart:function(){return this._started||(this.selectAll(),this._controller.onEditorStart(this)),this._started},$_valToStr:function(t){var e,i,n=this.editIndex(),s="";try{if(t!==c2)if(e=n.grid().dataSource().getField(n.dataField()))switch(e.dataType()){case a1.DATETIME:t&&(s=this._dateConverter.getText(t));break;case a1.BOOLEAN:s=this._boolConverter.toText(t);break;case a1.NUMBER:isNaN(t)||(s=E7(t));break;case a1.OBJECT:t&&(s=(i=n.column)._keyFn?i._keyFn(e,t):l0.extractJson(t,i._keyPath,!0));break;default:s=t}else s=E7(t)}catch(e){I7(e),s=t}return null==s?"":s},$_strToVal:function(t){var e,i,n,s,r=this._editIndex,o=r.dataColumn()&&this._textCase==z0.DEFAULT?r.dataColumn().textInputCase():this._textCase;if(t=E7(t),e=r.grid().dataSource().getField(r.dataField())){if((i=e.dataType())==a1.DATETIME||t&&this._isDateEditor()&&i==a1.TEXT)return n=e.dataType()==a1.DATETIME,(s=null)||(s=this._dateConverter.getDate(t,r.getValue())),n?e.getZonedDate(s):this._dateConverter.getText(s);if(i==a1.BOOLEAN)return this._boolConverter.toBoolEx(t);if(i==a1.NUMBER)return parseFloat(t)}return o===z0.UPPER?t?t.toLocaleUpperCase():t:o===z0.LOWER&&t?t.toLocaleLowerCase():t},$_readEditValue:function(t,e){var i,n=this._editField(),s=this._emptyValue;if(i=n.dataType(),0<this._minLength&&(!t||t.length<this._minLength))return X7.ShortLength;if(i==a1.TEXT)t||void 0===this._emptyValue||(t=this._emptyValue),void 0===(s=this.$_strToVal(t))&&(s="");else if(o77(t))if(void 0!==this._emptyValue)s=this.$_strToVal(this._emptyValue);else switch(i){case a1.NUMBER:isNaN(this._oldValue)&&(s=NaN);break;case a1.DATETIME:null===this._oldValue&&(s=null);break;case a1.BOOLEAN:}else s=this.$_strToVal(t);return n.readValue(s)},_dispatchKeyDown:function(t,e,i,n){return this._controller,this._controller.onEditorKeyDown(this,t,e,i,n)},_dispatchKeyUp:function(t,e,i,n){return this._controller,this._controller.onEditorKeyUp(this,t,e,i,n)},_dispatchChange:function(){this._controller.onEditorChange(this)},_dispatchSearch:function(t){this._controller.onEditorSearch(this,t)},_dispatchCommit:function(){this._controller.onEditorCommit(this)},_ignoreHandler:function(t){A8(t)},_sendToParent:function(t,e){e&&t.stopImmediatePropagation(),G6&&(this._editor.oninput=null);var i=B4&&(t.metaKey||t.ctrlKey)||!B4&&t.ctrlKey;return!!this._dispatchKeyDown(t.keyCode,i,t.shiftKey,t.altKey)&&(G2(t),!0)},_pasteHandler:function(t){if(this.visible())!0===this._doPaste(t)&&G2(t),this._doChanged();else{t.preventDefault();try{var e=i17(t);e&&this._grid.pasteFromClipboard(e)}catch(t){if(!(t instanceof q0))throw t;O0(t.message),I7(t)}}},_cutHandler:function(t){this.visible()&&!0===this._doCut(t)&&G2(t)},_copyHandler:function(t){if(this.visible())!0===this._doCopy(t)&&G2(t);else{t.preventDefault();try{var e=this._grid.copyToClipboard();a0(e)&&I8(t,e)}catch(t){g97(t)}}},$_setInputCase:function(t,e){switch(e==z0.DEFAULT&&t.dataColumn()?t.dataColumn().textInputCase():e){case z0.LOWER:this._editor.style.textTransform="lowercase";break;case z0.UPPER:this._editor.style.textTransform="uppercase";break;default:this._editor.style.textTransform="none"}},_clearHanguls:function(){if(this.visible()){var t=this._editor.selectionStart;this._editor.value=this._editor.value.replace($$_HANGUL_REG,""),this._composing&&this._editor.setSelectionRange(t,t)}}},{Unselected:{},ShortLength:{},InvalidFormat:{}}),P6=I1("TextCellEditor",X7,{init:function(t,e){this._super(t,e),this._borderable=!0,this._modified=!1,this._inputValue=void 0,this._imeMode=D9.AUTO},noHangul:!1,minLength:0,maxLength:0,text:function(){return this._editor.value},setAlignment:function(t){this._container.style.textAlign="left"},setText:function(t){this._editor&&t!=this._editor.value&&(this._editor.value=t,this._doChanged())},initOptions:function(){this._super(),this._noHangul=!1,this._minLength=0,this._maxLength=0},_selectAll:function(){this._editor.select()},caretToLast:function(){var t=E7(this._editor.value).length;this._editor.setSelectionRange(t,t)},_doBeginEdit:function(t,e){return this._modified=!1,this.visible()&&(this._editor.value||this._editor.setSelectionRange(0,0)),!0},_doEndEdit:function(){this._modified=!1},_doCommit:function(){},setEditIndex:function(t){t&&(this._super(t),this.$_setInputCase(t,this._textCase),this._editor.maxLength=0<this._maxLength?this._maxLength:this._defMaxLength)},setEditValue:function(t){return this._super(t),this._editor.value=this.$_valToStr(t)},getEditValue:function(t,e){e=!(1<arguments.length)||e;try{return this.$_readEditValue(this._editor.value,t)}catch(t){if(e)throw t;return this._emptyValue}},getEditText:function(){return this._editor.value},isEdited:function(){return this._modified},setVisible:function(t,e){this._super(t,e),t&&this._borderable?(this._container.style.border="2px solid rgb(82, 146, 247)",this._container.style["box-shadow"]="rgba(0, 0, 0, 0.4) 1px 2px 5px"):(this._container.style.border="none",this._container.style["box-shadow"]="none")},_createContainer:function(){var t=document.createElement("div"),e=t.style;return t.spellcheck=!1,t["aria-hidden"]=!1,e.outline="none",e["aria-hidden"]=!1,e.position="absolute",e["z-index"]=2e3,e.boxSizing="border-box",e.overflow="hidden",e.border="none",e.width="0px",e.height="0px",e.padding="0px",e.margin="0px",e.border="2px solid rgb(82, 146, 247)",e.boxShadow="rgba(0, 0, 0, 0.4) 1px 2px 5px",e.resize="none",t},_createEditor:function(t){this._container=this._createContainer(),t&&t.appendChild(this._container);var e=document.createElement("input"),i=e.style;return e.autoComplete="off",i.position="absolute",i.margin="0px",i.padding="0px 1px 0px 2px",i.fontFamily="",i.fontStyle="normal",i.fontVariant="normal",i.fontWeight="normal",i.fontSize="",i.lineHeight="normal",i.wordWrap="normal",i.overflow="hidden",i.resize="none",i.border="none",i.outline="none",i.textAlign="left",i.color="rgb(68, 84, 106)",i.left="0px",i.top="0px",i.width="100%",i.height="100%",i.imeMode="auto",i.cursor="text",i["-webkit-user-modify"]="read-write-plaintext-only",i["white-space"]="pre-wrap",i["-webkit-transform"]="translateZ(0)",e.onmousedown=e.onmousemove=e.onmouseup=e.onclick=e.ondblclick=this._ignoreHandler.bind(this),e.onkeydown=this._keyDownHandler.bind(this),e.onkeyup=this._keyUpHandler.bind(this),e.onkeypress=this._keyPressHandler.bind(this),e.onchange=this._changeHandler.bind(this),e.onblur=this._blurHandler.bind(this),e.oninput=this._inputHandlerStock=this._inputHandler.bind(this),e.onpaste=this._pasteHandler.bind(this),e.oncut=this._cutHandler.bind(this),e.oncopy=this._copyHandler.bind(this),e.addEventListener?(e.addEventListener("compositionstart",this._compositionstartHandler.bind(this)),e.addEventListener("compositionupdate",this._compositionupdatetHandler.bind(this)),e.addEventListener("compositionend",this._compositionendHandler.bind(this)),e.addEventListener("text",this._textHandler.bind(this)),e.addEventListener("selectionchange",function(t){})):(e.attachEvent("oncompositionstart",this._compositionstartHandler.bind(this)),e.attachEvent("oncompositionupdate",this._compositionupdatetHandler.bind(this)),e.attachEvent("oncompositionend",this._compositionendHandler.bind(this)),e.attachEvent("ontext",this._textHandler.bind(this)),e.attachEvent("onselectionchange",function(t){})),this._container.appendChild(e),this._defMaxLength=0<e.maxLength?e.maxLength:1e6,e},_deleteEditor:function(){var t=this._container&&this._container.parentElement;t&&t.removeChild(this._container)},_disableIme:function(){this._noIme=!0,this._editor.style.imeMode="disabled",this._editor.style["-webkit-ime-mode"]="disabled",this._editor.style["-moz-ime-mode"]="disabled",this._editor.style["-ms-ime-mode"]="disabled"},_focusHandler:function(){},_keyDownHandler:function(t){var e=this._grid;if(e.popupShowing())return!1;if((229==t.keyCode||197==t.keyCode)&&this._imeMode==D9.DISABLED)return G2(t),!1;var i=this._editor,n=e.undoable()&&e.editOptions().undoable(),s=this._editField(),r=t.keyCode,o=t.shiftKey,a=t.ctrlKey,h=t.altKey;if(d4&&a&&(r==i1.Z||r==i1.Y))return!this.visible()||n&&e.isRowEditing()&&s&&s.sameValues(this.getEditValue(),this._oldValue)?(G2(t),this._sendToParent(t),!1):this.visible()&&(!s||!s.sameValues(this.getEditValue(),this._oldValue));if(this._inputValue=i.value,this.visible()&&o&&N3(r,i1.LEFT,i1.RIGHT,i1.UP,i1.DOWN,i1.HOME,i1.END,i1.PAGEUP,i1.PAGEDOWN))return A8(t),!0;switch(r){case i1.BACK:case i1.DELETE:if(d4&&(this._readOnly||this._textReadOnly)&&this.visible())return G2(t),!1;if(this._sendToParent(t))return!0;if(!this.visible()&&this._requestStart()&&(G2(t),!this._editor.readOnly&&this._editor.value&&this.setText("")),r==i1.BACK){if(!0===this._doBack())return G2(t),!0}else if(!0===this._doDelete())return G2(t),!0;break;case i1.TAB:return!this._sendToParent(t,!0);case i1.LEFT:if(!this.visible()||e.editOptions().moveByArrowKeys()&&0==i.selectionEnd&&i.selectionEnd==i.selectionStart)return t.stopImmediatePropagation(),!this._sendToParent(t);if(this._editor.readOnly&&o3)return!this._sendToParent(t);break;case i1.RIGHT:if(!this.visible()||e.editOptions().moveByArrowKeys()&&i.selectionEnd==i.value.length&&i.selectionEnd==i.selectionStart)return t.stopImmediatePropagation(),!this._sendToParent(t);if(this._editor.readOnly&&o3)return!this._sendToParent(t);break;case i1.HOME:case i1.END:if(t.stopImmediatePropagation(),!this.visible())return!this._sendToParent(t);break;case i1.SPACE:if(!this.visible())return t.stopImmediatePropagation(),!this._sendToParent(t);break;case i1.UP:case i1.DOWN:case i1.PAGEUP:case i1.PAGEDOWN:case i1.ENTER:case i1.ESCAPE:case i1.F2:case i1.INSERT:return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);case i1.I:case i1.D:if(B4&&h&&a)return G2(t),!this._sendToParent(t);case 229:break;default:if(d4&&(this._readOnly||this._textReadOnly)&&this.visible())return G2(t),!1;if(!a||r!=i1.Z&&r!=i1.Y){if(this._sendToParent(t))return!1}else if(!this.visible()||n&&e.isRowEditing()&&s&&s.sameValues(this.getEditValue(),this._oldValue))return G2(t),!this._sendToParent(t)}return q3?!a&&!h&&(0==r||32<=r)&&(r<112||130<r)&&this._requestStart():d4&&229==r&&t.char,!0},_keyUpHandler:function(t){var e=t.keyCode;if(e!=i1.BACK&&e!=i1.DELETE||!c4||!this.visible()||this._editor.readOnly||this._editor.value==this._inputValue){if(!this.isEditing()){var i=B4&&(t.metaKey||t.ctrlKey)||!B4&&t.ctrlKey;this._dispatchKeyUp(t.keyCode,i,t.shiftKey,t.altKey)}}else this._doChanged()},_keyPressHandler:function(t){if(d4&&(this._editor.readOnly=this._readOnly||this._textReadOnly),!this.visible()&&d4&&(this._readOnly||this._textReadOnly))return this._editor.readOnly=!0,G2(t),void this._requestStart();var e=t.which||t.keyCode,i=this._keyCallback;return i&&!1===i(this._editIndex,t.key,e,this._editor.selectionEnd,this._editor.value)?(G2(t),!0):(q3?!t.ctrlKey&&!t.altKey&&(0==e||32<=e)&&(e<112||130<e)&&this._requestStart():32<=e&&this._requestStart(),G6&&(this._editor.oninput=this._inputHandlerStock),!0===this._doChar(t.key,e)?(G2(t),!0):void 0)},_textHandler:function(){this._requestStart()},_compositionstartHandler:function(t){var e=this._editor;if(d4&&(this._readOnly||this._textReadOnly))return e.readOnly=!0,void(e.value=m8(this._oldValue,""));this._composing=!0,this._requestStart(),this._started&&!e.readOnly&&(this._modified=!0,this._dispatchChange())},_compositionupdatetHandler:function(t){this._composing=!0},_compositionendHandler:function(t){this._composing=!1},_changeHandler:function(t){},_blurHandler:function(t){this._editor;var e=this._grid;e&&this.isEditing()&&this.visible()&&e.editOptions().commitWhenBlur()&&(this.className&&"LineCellEditor"===this.className()?this._grid.commitEditor():(this.className&&"ListCellEditor"===this.className()||"DateCellEditor"===this.className())&&(this.isListing()||this._grid.commitEditor()))},_inputHandler:function(t){this._doChanged()},_doChanged:function(){var t=this._editor;D0()||this._requestStart(),this._started&&!t.readOnly&&(this._modified=!0,this._dispatchChange())},_dispatchChange:function(){this.visible()&&this._noHangul&&this._clearHanguls(),this._super()},setBounds:function(t,e,i,n){w1.setBounds(this._container,t,e,i,n)}}),n67=I1("LineCellEditor",P6,{init:function(t,e){this._super(t,e)}}),B78=I1("MaskCellEditor",P6,{init:function(t,e){this._super(t,e),this._me=new o07(this._editor,!0),this._me.setChangeCallback(function(){this._doChanged()}.bind(this)),this._disableIme()},mask:{get:function(){this._me.format()},set:function(t){this._me.setFormat(t)}},insertMode:{get:function(){this._me.insertMode()},set:function(t){this._me.setInsertMode(t)}},fillFromEnd:!1,includeSeparators:{get:function(){this._me.includeSeparators()},set:function(t){this._me.setIncludeSeparators(t)}},includeLiterals:{get:function(){this._me.includeLiterals()},set:function(t){this._me.setIncludeLiterals(t)}},stripBegin:{get:function(){this._me.stripBegin()},set:function(t){this._me.setStripBegin(t)}},stripEnd:{get:function(){this._me.stripEnd()},set:function(t){this._me.setStripEnd(t)}},stripInner:{get:function(){this._me.stripInner()},set:function(t){this._me.setStripInner(t)}},fitToSeparators:{get:function(){this._me.fitToSeparators()},set:function(t){this._me.setFitToSeparators(t)}},trimWhenCopy:{get:function(){this._me.trimWhenCopy()},set:function(t){this._me.setTrimWhenCopy(t)}},maskCallback:null,unmaskCallback:null,seiveText:function(t){var e="";return void 0!==t&&(e=this.$_maskedValue(t),e=this._me.seiveText(e)),e},setMinLength:function(){this._minLength=0},setMaxLength:function(){this._maxLength=0},maskable:function(){return!0},initOptions:function(){this._super(),this._mask=null,this._insertMode=!0,this._fillFromEnd=!1,this._includeSeparators=!0,this._includeLiterals=!1,this._stripBegin=!1,this._stripEnd=!1,this._stripInner=!1,this._fitToSeparators=!0,this._trimWhenCopy=!0,this._maskCallback=null,this._unmaskCallback=null},setEditValue:function(t){var e=this._super(t);v=this.$_maskedValue(t,e),void 0!==v&&(e=v),this._me.initValue(e,this._fillFromEnd)},getEditValue:function(t,e){var i,n=this._editField();try{return i=this.$_unmaskedValue(this._editor.value,!0),n.dataType(),i===X7.InvalidFormat?i:this.$_readEditValue(i,t)}catch(t){if(e)throw t;return this._emptyValue}},_doBack:function(){if(this._me._doBack())return!0},_doDelete:function(){if(this._me._doDelete())return!0},_doChar:function(t,e){if(d4&&32==e&&(t=" "),this._me._doChar(t,e))return!0},_doCopy:function(t){return this._me._doCopy(t)},_doCut:function(t){if(this._me._doCut(t))return!0},_doPaste:function(t){if(this._me._doPaste(t))return!0},_keyDownHandler:function(t){var e=t.keyCode,i=t.ctrlKey;return 229==e||197==e?(G2(t),!1):d4&&i&&(e==i1.Z||e==i1.Y)?(G2(t),!1):this._super(t)},_dispatchChange:function(){this.visible()&&(this._clearHanguls(),this._super())},_inputHandler:function(t){this._composing=!1,this._doChanged()},$_maskedValue:function(t,e){var i=this._maskCallback,n=void 0;return i&&(n=i(this._editIndex,t,e)),S4(n)||(n=e),n},$_unmaskedValue:function(t,e){var i=this._unmaskCallback,n=void 0;if(e){if(i)n=i(this._editIndex,this._me.getText(t));else if(!this._me.checkValid())return X7.InvalidFormat;void 0===n&&(n=this._me.unmaskText(t))}else n=this._me.getText(t);return n}}),T78=I1("MultiLineCellEditor",X7,{init:function(t,e){this._super(t,e),this._modified=!1,this._scrolled=!1},maxLength:0,minLength:0,useCtrlEnter:!1,text:function(){return this._editor.value},setAlignment:function(t){this._container.style.textAlign="left"},initOptions:function(){this._super(),this._maxLength=0,this._minLength=0},_selectAll:function(){this._editor.select()},caretToLast:function(){var t=E7(this._editor.value).length;this._editor.setSelectionRange(t,t)},_doBeginEdit:function(t,e){return this._modified=!1,this.visible()&&(this._editor.value||this._editor.setSelectionRange(0,0)),!0},_doEndEdit:function(){this._modified=!1},_doCommit:function(){},setEditIndex:function(t){t&&(this._super(t),this.$_setInputCase(t,this._textCase),this._editor.maxLength=0<this._maxLength?this._maxLength:2e9)},setEditValue:function(t){this._super(t),this._editor.value=this.$_valToStr(t)},getEditValue:function(t,e){e=!(1<arguments.length)||e;try{return this.$_readEditValue(this._editor.value,t)}catch(t){if(e)throw t;return this._emptyValue}},getEditText:function(){return this._editor.value},isEdited:function(){return this._modified},setVisible:function(t,e){this._super(t,e),this._container.style["box-shadow"]=t?(this._container.style.border="2px solid rgb(82, 146, 247)","rgba(0, 0, 0, 0.4) 1px 2px 5px"):this._container.style.border="none"},_createContainer:function(){var t=document.createElement("div"),e=t.style;return t.spellcheck=!1,e.position="absolute",e["z-index"]=2e3,e.boxSizing="border-box",e.overflow="hidden",e.border="none",e.width="0px",e.height="0px",e.padding="0px",e.margin="0px",e.backgroundColor="#fff",e.border="none",e.boxShadow="rgba(0, 0, 0, 0.4) 1px 2px 5px",e.resize="none",t},_createEditor:function(t){var e=document.createElement("textarea"),i=e.style;return this._container=this._createContainer(),t.appendChild(this._container),e.autoComplete="off",i.boxSizing="border-box",i.tabIndex=-1,i.position="absolute",i.margin="0px",i.padding="0px 2px 0px 1px",i.fontFamily="",i.fontStyle="normal",i.fontVariant="normal",i.fontWeight="normal",i.fontSize="",i.lineHeight="normal",i.wordWrap="normal",i.overflow="hidden",i.resize="none",i.border="none",i.outline="none",i.textAlign="left",i.color="rgb(68, 84, 106)",i.left="0px",i.top="0px",i.width="100%",i.height="100%",i.imeMode="auto",i.cursor="text",i["-webkit-user-modify"]="read-write-plaintext-only",i["white-space"]="pre",i["-webkit-transform"]="translateZ(0)",e.onmousedown=e.onmousemove=e.onmouseup=e.onclick=e.ondblclick=this._ignoreHandler.bind(this),e.onkeydown=this._keyDownHandler.bind(this),e.onkeyup=this._keyUpHandler.bind(this),e.onkeypress=this._keyPressHandler.bind(this),e.oninput=this._inputHandlerStock=this._inputHandler.bind(this),e.onpaste=this._pasteHandler.bind(this),e.oncut=this._cutHandler.bind(this),e.oncopy=this._copyHandler.bind(this),e.addEventListener?(e.addEventListener("compositionstart",this._compositionstartHandler.bind(this)),e.addEventListener("text",this._textHandler.bind(this))):(e.attachEvent("oncompositionstart",this._compositionstartHandler.bind(this)),e.attachEvent("ontext",this._textHandler.bind(this))),this._container.appendChild(e),e},_deleteEditor:function(){var t=this._container&&this._container.parentElement;t&&t.removeChild(this._container)},_keyDownHandler:function(t){var e=this._editor,i=this._grid,n=i.undoable()&&i.editOptions().undoable(),s=this._editField(),r=t.keyCode,o=t.altKey,a=t.ctrlKey,h=t.shiftKey;if(d4&&a&&(r==i1.Z||r==i1.Y))return!this.visible()||n&&i.isRowEditing()&&s&&s.sameValues(this.getEditValue(),this._oldValue)?(G2(t),this._sendToParent(t),!1):this.visible()&&(!s||!s.sameValues(this.getEditValue(),this._oldValue));if(d4&&!this.visible()&&a&&r==i1.V&&this.selectAll(),this.visible()&&h&&N3(r,i1.LEFT,i1.RIGHT,i1.UP,i1.DOWN,i1.HOME,i1.END,i1.PAGEUP,i1.PAGEDOWN))return A8(t),!0;switch(r){case i1.BACK:case i1.DELETE:if(d4&&(this._readOnly||this._textReadOnly)&&this.visible())return G2(t),!1;if(this._sendToParent(t))return!0;!this.visible()&&this._requestStart()&&(G2(t),!this._editor.readOnly&&this._editor.value&&(this._editor.value="",this._modified=!0,this._dispatchChange()));break;case i1.TAB:return!this._sendToParent(t,!0);case i1.LEFT:if(!this.visible()||0==e.selectionEnd&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t,!0);break;case i1.RIGHT:if(!this.visible()||e.selectionEnd==e.value.length&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t,!0);break;case i1.HOME:case i1.END:if(t.stopImmediatePropagation(),!this.visible())return!this._sendToParent(t);break;case i1.UP:case i1.PAGEUP:if(t.stopImmediatePropagation(),!this.visible())return!this._sendToParent(t);break;case i1.DOWN:case i1.PAGEDOWN:if(t.stopImmediatePropagation(),!this.visible())return!this._sendToParent(t);break;case i1.SPACE:if(!this.visible())return!this._sendToParent(t,!0);break;case i1.ENTER:if(!a&&!h&&!o)return!this._sendToParent(t,!0);if(a&&!h&&this._useCtrlEnter){t.stopImmediatePropagation();var l=e.value;if(l){var u=e.selectionEnd;if(l=l.substring(0,u)+"\r\n"+l.substring(u),e.value=l,e.setSelectionRange(u+1,u+1),this._doChanged(),B4)return!1}}A8(t);break;case i1.ESCAPE:case i1.F2:case i1.INSERT:return G2(t),!this._sendToParent(t);case 229:break;default:if(d4&&(this._readOnly||this._textReadOnly)&&this.visible())return G2(t),!1;if(!a||r!=i1.Z&&r!=i1.Y){if(this._sendToParent(t))return!1}else if(!this.visible()||n&&i.isRowEditing()&&s&&s.sameValues(this.getEditValue(),this._oldValue))return G2(t),!this._sendToParent(t)}return 0==r||d4&&229==r&&t.char&&this._requestStart(),!0},_keyUpHandler:function(t){var e=t.keyCode;if(e!=i1.BACK&&e!=i1.DELETE||!c4||!this.visible()||this._editor.readOnly||this._editor.value==this._inputValue){if(!this.isEditing()){var i=B4&&(t.metaKey||t.ctrlKey)||!B4&&t.ctrlKey;this._dispatchKeyUp(t.keyCode,i,t.shiftKey,t.altKey)}}else this._doChanged()},_keyPressHandler:function(t){if(!this.visible()&&d4&&(this._readOnly||this._textReadOnly))return this._editor.readOnly=!0,G2(t),void this._requestStart();var e=t.which||t.keyCode,i=this._keyCallback;if(i&&!1===i(this._editIndex,t.key,e,this._editor.selectionEnd,this._editor.value))return G2(t),!0;q3?!t.ctrlKey&&!t.altKey&&(0==e||32<=e)&&(e<112||130<e)&&this._requestStart():32<=e&&this._requestStart(),G6&&(this._editor.oninput=this._inputHandlerStock)},_textHandler:function(){this._requestStart()},_compositionstartHandler:function(){if(d4&&(this._readOnly||this._textReadOnly))return this._editor.readOnly=!0,void(this._editor.value=this._oldValue);this._composing=!0,this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange())},_compositionupdatetHandler:function(){this._composing=!0},_compositionendHandler:function(t){this._composing=!1},_inputHandler:function(t){this._doChanged()},setBounds:function(t,e,i,n,s){this._scrolled=s,w1.setBounds(this._container,t,e,i,n),this.$_resetBounds()},_doChanged:function(){this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this.$_resetBounds())},$_resetBounds:function(){var t,e,i,n,s,r=this._container,o=this._editor;this._scrolled||(this.visible()&&(r.style.border="2px solid rgb(82, 146, 247)",r.style["box-shadow"]="rgba(0, 0, 0, 0.4) 1px 2px 5px"),e=(t=w1.getBounds(r)).cx,i=t.cy,n=t.width,s=t.height,o.scrollWidth+4>t.width&&(n=o.scrollWidth+4),o.scrollHeight+4>t.height&&(s=o.scrollHeight+5),t=w1.getBounds(this._parentElement),n=Math.min(t.width,n),s=Math.min(t.height,s),e+n>t.width&&(e=t.width-n),i+s>t.height&&(i=t.height-s),w1.setBounds(r,Math.max(e,0),Math.max(i,0),n,s))}}),L0=A2("DropDownPosition",{BUTTON:"button",EDITOR:"editor"}),Z6=A2("DropDownSortStyle",{NONE:"none",ASCENDING:"ascending",DESCENDING:"descending"}),l67=I1("ListCellEditor",P6,{init:function(t,e){this._super(t,e),this._list=new H0(t._container),this._list.addListener(this),this._items=null,this._subItems=null,this._values=[],this._labeling=!1,this._lookup=!1,this._domain=null,this._closing=!1,this._value=void 0,this._selectedIndex=-1,this._borderable=!1,this._globalMouseHandler=function(t){for(var e=t.target;e;){if(e==this._list._element)return;e=e.parentNode}this.closeUp(!0)}.bind(this),this._itemStyles={fontSize:12,fontName:"Tahoma",color:"#000",hoveredColor:"#000",selectedColor:"#fff",background:"#fff",selectedBackground:"#333",hoveredBackground:"#10000000"},this._subStyles={hoveredBackground:null},this._listItemStyles=new o1(null,"listEditorItem"),this._subItemStyles=new o1(null,"listEditorSubItem"),this._subItemStyles.setParent(this._listItemStyles)},values:null,labels:null,listItemDisplay:u1(u3,u3.DEFAULT),listItemColumned:!1,listItemGap:10,listItemSeparator:null,itemsCallback:null,displayLabels:!0,domainOnly:!1,textReadOnly:!1,partialMatch:!1,narrowSearch:!1,insideSearch:!1,dropDownWidth:-1,dropDownPosition:u1(L0,L0.BUTTON),dropDownCount:8,dropDownMinLeft:void 0,listItemStyles:void 0,subItemStyles:void 0,itemSortStyle:u1(Z6,Z6.NONE),caseSensitive:!1,commitOnSelect:!0,setValues:function(t){return this._values=t?t.slice():[],this},setLabels:function(t){return this._labels=t?t.slice():[],this},setListItemStyles:function(t){return t!==this._listItemStyles&&this._listItemStyles.extend(t),this},setSubItemStyles:function(t){return t!==this._subItemStyles&&this._subItemStyles.extend(t),this},isListing:function(){return this._list.isListing()},listing:function(){return this._list.isListing()},dropDown:function(t){var e,i=this._list;return!(this.readOnly()||this.isListing()||this._closing||!(t||this._items&&0<this._items.length)||(e=w1.getBounds(this._container),i.setItems(this._items,this._subItems),this._saveIndex=this._selectedIndex,this._saveText=this._editor.value,i.setListItemStyles(this._listItemStyles),i.setSubItemStyles(this._subItemStyles),i.setListItemDisplay(this._listItemDisplay),i.setListItemGap(this._listItemGap),i.setListItemSeparator(this._listItemSeparator),i.setListItemColumned(this._listItemColumned),i.setPartialMatch(this._partialMatch),i.setNarrowSearch(this._narrowSearch),i.setCaseSensitive(this._caseSensitive),i.setInsideSearch(this._insideSearch),i.setDropDownCount(this._dropDownCount),i.setDropDownWidth(this._dropDownWidth),i.setDropDownPosition(this._dropDownPosition),i.setDropDownMinLeft(this._dropDownMinLeft),i.setSortStyle(this._itemSortStyle),i.setValueIndex(this._selectedIndex),i.show(this._grid.container()._popupOwner||u2.documentElement,e.cx-1,e.cy+e.height,this._cellBounds.width,w1.getBounds(this._editor)),i.$_search(this._editor.value,!0),w1.addWindowListener("mousedown",this._globalMouseHandler),0))},closeUp:function(t){var e;if(this.isListing()){this._closing=!0;try{w1.removeWindowListener("mousedown",this._globalMouseHandler),this._list.hide(),t&&this._list.isSelected()&&0<=(e=this._list.itemIndex())&&this._items&&this._items.length>e?(this._selectedIndex=this._list.valueIndex(),this._editor.value=this._items[e],this._selectedIndex==this._saveIndex&&this._editor.value==this._saveText||this._dispatchChange(),this._commitOnSelect&&this._dispatchCommit()):this._selectedIndex=-1}finally{this._closing=!1}return!0}return!1},$_valToStr:function(t){return"string"==typeof t&&this._labeling?t:this._super(t)},hasButton:function(){return!0},initOptions:function(){this._super(),this._values=[],this._labels=[],this._callbackItems=!1,this._displayLabels=!0,this._domainOnly=!1,this._textReadOnly=!1,this._partialMatch=!1,this._narrowSearch=!1,this._insidSearch=!1,this._dropDownWidth=-1,this._dropDownPosition=L0.BUTTON,this._dropDownCount=8,this._itemSortStyle=Z6.NONE,this._caseSensitive=!1,this._commitOnSelect=!0,this._listItemDisplay=u3.DEFAULT,this._listItemGap=10,this._listItemSeparator=null,this._listItemColumned=!1,this._listItemStyles.initialize(this._itemStyles),this._subItemStyles.initialize(this._subStyles),this._itemsCallback=null},_doBeginEdit:function(){return this.readOnly()||this._refreshItems(),this._super()},setEditIndex:function(t){this._super(t),this._lookup=!1,this._labeling=!1,this._domain=null,this._items=null,this._textReadOnly&&(this._editor.readOnly=!0),this._refreshItems()},setEditValue:function(t){var e,i,n,s,r=-1;if(this._value=n=t,this._lookup)(s=this._domain)?n=0<=(e=r=s.keys?s.keys.indexOf(t):-1)&&s.values&&s.values.length>e?s.values[e]:t:r=this._editIndex.dataColumn().getLookupIndex(t),this._labeling&&(n=s?0<=r&&s.values&&s.values.length>r?s.values[r]:t:0<=r?this._editIndex.dataColumn().getLookupLabel(t):t);else if(this._values){for(e=0,i=this._values.length;e<i;e++)if(t==this._values[e]){r=e;break}this._labeling&&this._labels&&(r<0||this._labels.length>r)&&(n=0<=r?this._labels[e]:t)}this._super(n),this._selectedIndex=r},isEdited:function(){var t=this._super();return t&&this.domainOnly()&&(t=void 0!==this.$_getEditValue(!1)),t},getEditValue:function(t,e){return!this.isEdited()&&this._selectedIndex<0?this._value:this.$_getEditValue(t,e)},setBounds:function(t,e,i,n){t+=2,e+=2,i-=4,n-=4,this._super(t,e,i,n)},_createContainer:function(){var t=this._super();return t.style.border="none",t.style.boxShadow="none",t},_createEditor:function(t){return this._super(t)},_deleteEditor:function(){this.closeUp(),this._super()},_textHandler:function(){this._requestStart()},_keyDownHandler:function(t){var e=this._list;switch(t.keyCode){case i1.ENTER:if(this.closeUp(!0))return!this._sendToParent(t);break;case i1.ESCAPE:if(this.closeUp(!1))return G2(t),!0;break;case i1.DOWN:if(t.altKey&&!this.isListing())return this._requestStart(),G2(t),!0;if(this.isListing())return this._list.setItemIndex(Math.min(e.itemCount()-1,e.itemIndex()+1)),G2(t),!0;break;case i1.PAGEDOWN:if(this.isListing())return this._list.setItemIndex(Math.min(e.itemCount()-1,e.itemIndex()+e.dropDownCount())),G2(t),!0;break;case i1.UP:if(t.altKey&&this.isListing())return this.closeUp(!1),G2(t),!0;if(this.isListing())return this._list.setItemIndex(Math.max(0,e.itemIndex()-1)),G2(t),!0;break;case i1.PAGEUP:if(this.isListing())return this._list.setItemIndex(Math.max(0,e.itemIndex()-e.dropDownCount())),G2(t),!0}return this._super(t)},_requestStart:function(){return!!this._super()&&(this.dropDown(),!0)},_doChanged:function(){this._super(),this.isListing()&&this._list.$_search(this._editor.value)},showList:function(t){this.dropDown(t)},closeList:function(t){this.closeUp(t)},buttonClicked:function(t){this.isListing()?this.closeUp(!1):this.dropDown()},_refreshItems:function(t,e){var i,n,s,r,o,a,h,l,u=this._editIndex,d=u.getRow(this._grid);if(this._labeling=!1,this._items=null,this._subItems=null,this._callbackItems=!1,"function"==typeof this._itemsCallback)i=this._itemsCallback(u.clone()),n=this._callbackLabels=i&&i.labels,(s=this._callbackValues=i&&i.values)&&(0<s.length||e)&&(this._items=s,this._callbackItems=!0);else if((s=this._values)&&(0<s.length||e))n=this._labels;else if(u.dataColumn()&&d&&(0<=u.getDataIndex(this._grid)||T1.isEditing(d.rowState())))if((r=u.dataColumn()).lookupSource()){for(o=r.lookupKeyFieldIds(),a=[],h=0;h<o.length-1;h++)a.push(d.getValue(o[h]));(l=r.lookupSource().getTextDomain(a))&&l.values&&0<l.values.length&&(s=l.values,this._labeling=!0,this._lookup=!0,this._domain=l)}else(s=r.lookupValues())&&0<s.length&&(n=r.lookupLabels(),this._lookup=!0);if(this._items=s,n&&n.length>=s.length)switch(this._listItemDisplay){case"valueLabel":this._items=s,this._subItems=n;break;case"labelValue":this._items=n,this._subItems=s,this._labeling=!0;break;default:this.displayLabels()&&(this._items=n,this._labeling=!0)}t&&this.isListing()&&(this._list.setItems(this._items,this._subItems),this._list.$_resetList())},$_getEditValue:function(t,e){var i,n,s,r=this.text(),o=P6.prototype.getEditValue.call(this,e),a=o,h=this._editIndex.dataColumn(),l=this._selectedIndex,u=0<=l;if(this._lookup){if(this._domain){if(this._labeling&&(a=0<=(i=u?l:this._domain.values?this._domain.values.indexOf(r):-1)&&this._domain.keys&&this._domain.keys.length>i?this._domain.keys[i]:a),this.domainOnly()&&(!this._domain.keys||this._domain.keys.indexOf(a)<0))return X7.Unselected}else if(this._labeling&&void 0===(a=u?h.getLookupValue(l):h.getSourceValue(r))&&(a=o),this.domainOnly()&&(!h.lookupValues()||h.lookupValues().indexOf(a)<0))return X7.Unselected}else if(n=this._callbackItems?this._callbackLabels:this._labels,s=this._callbackItems?this._callbackValues:this._values,this._labeling&&0<=(i=u?l:n?n.indexOf(r):-1)&&i<s.length&&(a=s[i]),this.domainOnly()&&(!s||s.indexOf(a)<0))return X7.Unselected;return a},onDropDownListCloseUp:function(t,e){this.closeUp(e),this.setFocus()}}),H0=I1("DropDownList",a2,{init:function(t){this._super(),this._container=t,this._containerElement=null,this._dom=new w1(this._element=this.$_createList()),this._firstChild=null,this._selected=!1,this._mouseoverHandler=function(t){var e=this._currDiv=t.currentTarget;w1.getChildIndex(e)!=this._itemIndex&&(e.style.background=this.$_getItemBackground(!1,!0),e.style.color=this.$_getItemColor(!1,!0),e.$_span.style.textDecoration=this.$_getTextDecoration(!1,!0),e.$_span2&&(e.$_span2.style.background=this.$_getSubBackground(!1,!0),e.$_span2.style.color=this.$_getSubColor(!1,!0)))}.bind(this),this._mouseoutHandler=function(t){var e=this._currDiv=t.currentTarget;w1.getChildIndex(e)!=this._itemIndex&&(e.style.background=this.$_getItemBackground(),e.style.color=this.$_getItemColor(),e.$_span.style.textDecoration=this.$_getTextDecoration(),e.$_span2&&(e.$_span2.style.background=this.$_getSubBackground(),e.$_span2.style.color=this.$_getSubColor()))}.bind(this),this._clickHandler=function(t){var e=t.currentTarget,i=w1.getChildIndex(e);0<=i&&(this._itemIndex=i,this.fireEvent(H0.CLOSE_UP,!0))}.bind(this),o3&&(this._needChromInit=!0),this._newItemArr=[]},minWidth:0,maxWidth:0,dropDownCount:8,caseSensitive:!1,partialMatch:!1,narrowSearch:!1,insideSearch:!1,listItemDisplay:u3.DEFAULT,listItemGap:10,listItemSeparator:null,listItemColumned:!1,listItemStyles:null,subItemStyles:null,sortStyle:Z6.NONE,items:null,subItems:null,itemIndex:-1,dropDownPosition:L0.BUTTON,dropDownMinLeft:void 0,dropDownWidth:-1,isListing:function(){return this._containerElement&&this._containerElement.contains(this._element)},setItems:function(t,e){if(this._items=[],t)for(var i=0,n=t.length;i<n;i++)this._items.push({label:t[i],subLabel:e&&e[i],index:i})},setItemIndex:function(t,e){var i=this._narrowSearch?this._newItemArr:this._items;(t=Math.max(-1,t))<i.length&&(e||t!=this._itemIndex)&&(this._itemIndex=t,this.isListing()&&this.$_refreshItems(),this._selected=0<=t)},itemCount:function(){return this._items&&this._items.length},displayItemCount:function(){return this._displayCount},valueIndex:function(){var t=this._items,e=this._itemIndex;return t&&0<=e&&e<t.length?t[e].index:-1},setValueIndex:function(t){if(t=Math.max(-1,t),this._itemIndex=-1,0<=t)for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].index==t){this._itemIndex=t;break}this.isListing()&&this.$_refreshItems(),this._selected=!0},isSelected:function(){return this._selected},show:function(t,e,i,n,s){this._containerElement=t,this.$_sortItems(),this.$_show(e,i,n,s),this._needChromInit&&(this._element.style.width=this._width+.1+"px")},hide:function(){this._dom.detach(),this._containerElement=null,this._editBounds=null},$_createList:function(){var t=document.createElement("div");return t.onkeydown=function(t){27==t.keyCode&&this.fireEvent(H0.CLOSE_UP,!1)}.bind(this),t},$_sortItems:function(){this._sortStyle==Z6.ASCENDING?this._items.sort(function(t,e){return t.label<e.label?-1:t.label>e.label?1:0}):this._sortStyle==Z6.DESCENDING&&this._items.sort(function(t,e){return t.label>e.label?-1:t.label<e.label?1:0})},$_show:function(t,e,i,n){var s=this._element;s&&(s=this._dom.element(),this._dom.setStyles({position:"absolute",float:"none",clear:"both",boxSizing:c4?"":"border-box",minWidth:"20px",minHeight:"10px",overflow:"auto",zIndex:3e3,background:"#fff",border:"1px solid rgb(50, 50, 50)",boxShadow:"rgba(0, 0, 0, 0.8) 1px 2px 5px",fontFamily:"Tahoma",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",fontSize:"10pt",padding:"0px",margin:"0px"}),this._firstChild=null,this._dom.clearChildren(),this._dom.disableSelection(),this._containerElement.appendChild(s),this.$_buildItems(),this.$_resetHeight(),this.$_resetWidth(this._cellWidth=i),this.$_resetPosition(this._editX=t,this._editY=e,i,this._editBounds=n),this._selected=!1)},$_resetHeight:function(){var t,e,i=this._dom.element();i.style.height="10px",newCount=this._items.length,this._firstChild&&(t=w1.getBounds(this._firstChild),this._narrowSearch&&(newCount=this._newItemArr.length),e=0<this._dropDownCount?Math.min(this._dropDownCount,newCount):this._items.length,i.style.overflowY=this._items.length>e?"auto":"hidden",i.style.height=t.height*e+4+"px")},$_resetWidth:function(t){var e,i,n,s=this._dom.element(),r=w1.getBounds(s),o=this._dropDownWidth;if(o<0?o=t:0==o&&(o=r.width),s.style.width=o+"px",e=0,this._firstChild&&s.scrollWidth>s.clientWidth){for(i=s.childNodes,n=0;n<i.length;n++)e=Math.max(e,i[n].scrollWidth);e+=s.offsetWidth-s.clientWidth+2}r=w1.getBounds(s),o=Math.max(o,r.width,e),r=q5(),o=Math.min(o,r.width),s.style.width=(this._width=o)+"px"},$_resetPosition:function(t,e,i,n){var s=q5(),r=w1.getBounds(this._containerElement),o=$_testing?{left:0,top:0}:w1.getBounds(this._container._container),a=s.width,h=s.height,l=this._dom.getBounds(),u=document.documentElement,d=window.pageXOffset||u.scrollLeft,c=window.pageYOffset||u.scrollTop;u.scrollWidth>u.clientWidth&&(h-=18),u.scrollHeight>u.clientHeight&&(a-=18),t+=o.left-r.left,e+=o.top-r.top,(G6||c4||D5)&&(t+=u.scrollLeft,e+=u.scrollTop),e+l.height>h+c&&(e=e-n.height-l.height)<0&&(e=h-l.height-2),this._dropDownPosition!=L0.EDITOR?t=Math.max(0,t+i-l.width):t+l.width>a+d&&(t=a-l.width),isNaN(this._dropDownMinLeft)||(t=Math.max(t,this._dropDownMinLeft+o.left)),this._dom.move(Math.max(0,t),Math.max(0,e))},$_resetList:function(){this._dom.clearChildren(),this._firstChild=null,this.$_buildItems(),this.$_resetHeight(),this.$_resetWidth(this._cellWidth),this.$_resetPosition(this._editX,this._editY,this._cellWidth,this._editBounds),this._needChromInit&&(this._element.style.width=this._width+.1+"px")},$_narrowSearch:function(t,e){return this._partialMatch?!t||0!=H0.checkHangul(t,e.label):0==e.label.indexOf(t)},$_getItemColor:function(t,e){var i,n=this._listItemStyles;return(i=t?n.selectedColor():e?n.hoveredColor():n.color())?i.css():""},$_getSubColor:function(t,e){var i,n=this._subItemStyles;return(i=t?n.selectedColor():e?n.hoveredColor():n.color())?i.css():""},$_getItemBackground:function(t,e){var i,n=this._listItemStyles;return(i=t?n.selectedBackground():e?n.hoveredBackground():n.background())?i.css():""},$_getSubBackground:function(t,e){var i,n=this._subItemStyles;return(i=t?n.selectedBackground():e?n.hoveredBackground():n.background())?i.css():""},$_getTextDecoration:function(t,e){return e?"underline":"none"},$_buildItems:function(t,e){var i,n,s,r,o,a,h,l,u,d,c,_,f,g,m,p,w,v,C=this._element,I=this._itemIndex;if(C.style.width=null,C.style.height=null,this._displayCount=0,t&&w1.clearChildren(this._element),(i=this._items)&&!(i.length<1)){for(n=this._newItemArr=[],(w=u3.subLabeled(this._listItemDisplay))&&(v=[],g=0),s=this._listItemStyles.font(),r=this._subItemStyles.font(),m=this._listItemGap+"px",p=this._listItemSeparator,o=0,a=i.length;o<a;o++)h=i[o],t&&!this.$_narrowSearch(e,h)||(l=o==I,u=w1.createElement("div",{position:"relative",float:"none",paddingTop:"1px",paddingBottom:"1px",paddingLeft:"2px",paddingRight:"2px",whiteSpace:"nowrap",cursor:"default",font:s.font,background:this.$_getItemBackground(l),color:this.$_getItemColor(l)}),w1.disableSelection(u),C.appendChild(u),this._firstChild||(this._firstChild=u),this._displayCount++,u.onmouseover=this._mouseoverHandler,u.onmouseout=this._mouseoutHandler,u.onclick=this._clickHandler,h?(d=h.label.toString().trim(),w?(c=h.subLabel)&&p&&(c=p+c):c=""):d=c="",(_=w1.createElement("span",{display:"inline-block",textDecoration:this.$_getTextDecoration(l)})).innerHTML=d?w1.htmlEncode(d):"&nbsp;",_.tabIndex=-1,w1.disableSelection(_),u.appendChild(_),c&&((f=w1.createElement("span",{display:"inline-block",font:r.font,background:this.$_getSubBackground(l),color:this.$_getSubColor(l),marginLeft:m,marginRight:"2px"})).innerHTML=c?w1.htmlEncode(c):"&nbsp;",f.tabIndex=-1,w1.disableSelection(f),u.appendChild(f)),u.$_span=_,u.$_span2=f,n.push(h),v&&(v.push(u),g=Math.max(g,_.offsetWidth)));var R,y;if(v){if(this._listItemColumned)for(g+="px",o=v.length;o--;)(_=(u=v[o]).$_span).style.minWidth=g;if(s.size>r.size)for(o=v.length;o--;)_=(u=v[o]).$_span,R=(f=u.$_span2).offsetLeft,y=_.offsetTop+(_.offsetHeight-f.offsetHeight)/2,f.style.position="absolute",f.style.left=R+"px",f.style.top=y+"px",f.style.marginLeft=0}}},$_refreshItems:function(){var t,e,i,n,s,r,o=this._element.childNodes;for(t=0,e=o.length;t<e;t++)r=t==this._itemIndex,(i=o[t]).style.background=this.$_getItemBackground(r),i.style.color=this.$_getItemColor(r),i.$_span2&&(i.$_span2.style.background=this.$_getSubBackground(r),i.$_span2.style.color=this.$_getSubColor(r));0<=(n=this._itemIndex)&&n<o.length&&((i=o[n]).offsetTop<this._element.scrollTop?this._element.scrollTop=i.offsetTop:(s=i.offsetTop+w1.getSize(i).height)>=this._element.scrollTop+this._element.clientHeight&&(this._element.scrollTop=s-this._element.clientHeight))},$_search:function(t,e){var i,n,s,r,o,a,h;try{if(this._narrowSearch&&(this._firstChild=null,this.$_buildItems(!0,t),this.$_resetHeight(),this.$_resetWidth(this._cellWidth),this.$_resetPosition(this._editX,this._editY,this._cellWidth,this._editBounds),this._needChromInit&&(this._element.style.width=this._width+.1+"px")),this._items&&t){for(n=(i=this._narrowSearch?this._newItemArr:this._items).length,s=this._caseSensitive?t:t.toLowerCase(),r=[],o=0;o<n;o++){if((a=i[o].label.toString())&&(a=this._caseSensitive?a:a.toLowerCase())==s)return void this.setItemIndex(o,e);r.push({i:o,s:a})}for(o=0;o<n;o++){if((a=r[o].s)&&0==a.indexOf(s))return void this.setItemIndex(r[o].i,this._narrowSearch||e);if(this._partialMatch&&(2==(h=H0.checkHangul(s,a))||1==h))return void this.setItemIndex(r[o].i,this._narrowSearch||e)}if(this._insideSearch)for(o=0;o<n;o++)if((a=r[o].s)&&0<a.indexOf(s))return void this.setItemIndex(r[o].i,e)}this.setItemIndex(-1)}finally{e&&(this._selected=!0)}}},{getHangulSyl:function(t){var e,i,n=t.charCodeAt(0);return n>="".charCodeAt(0)&&n<="".charCodeAt(0)?t:44032<=n&&n<=55203?(i=(((n-=44032)-(e=n%28))/28-(n-e)/28%21)/21,H0.HAN_CHOS[i]):0<=H0.HAN_CHOS.indexOf(t)?t:null},checkHangul:function(t,e){var i,n,s,r,o,a,h;if(t&&t.length<=e.length){for(i=[],n=0;n<t.length;n++)s=t.charAt(n),r=e.charAt(n),this._caseSensitive||(s=s.toLowerCase(),r=r.toLowerCase()),s!=r?(o=H0.getHangulSyl(s))==s?(a=H0.getHangulSyl(r),o&&a&&o==a?i.push(1):i.push(0)):i.push(0):i.push(2);for(h=i[0],n=1;n<i.length;n++)i[n]<h&&(h=i[n]);return h}return 0}});H0.HAN_CHOS=["","","","","","","","","","","","","","","","","","",""],H0.CLOSE_UP="onDropDownListCloseUp";var I47=I1("SearchCellEditor",l67,{init:function(t,e){this._super(t,e),this._searchKey=null,this._timer=void 0},keyLength:1,searchDelay:1e3,requestWhenCtrlEnter:!1,requestWhenEnter:!1,setKeyLength:function(t){this._keyLength=isNaN(t)?1:Math.max(1,t)},setSearchDelay:function(t){this._searchDelay=isNaN(t)?0:Math.max(0,t)},fillItems:function(t,e,i){return!(!this.isListing()||t!=this.getEditText()||(this.setValues(e),this.setLabels(i),this._refreshItems(!0,!0),this._list.$_search(this._editor.value),0))},initOptions:function(){this._super(),this._keyLength=1,this._searchDelay=1e3,this._requestWhenCtrlEnter=!1,this._requestWhenEnter=!1},_keyDownHandler:function(t){var e=t.keyCode==i1.ENTER;return e&&(e=this.requestWhenCtrlEnter()&&t.ctrlKey||this.requestWhenEnter()),e&&this.isEditing()?(G2(t),this.$_stopTimer(),this.$_requestItems(),!0):this._super(t)},_keyUpHandler:function(t){this._super(t),o3&&this.$_search()},_inputHandler:function(t){this._super(t),o3||this.$_search()},_doEndEdit:function(){this._super(),this.$_stopTimer(),this._searchKey=null},dropDown:function(){this._super(!0)},$_search:function(){var t=this.getEditText();t&&t.length>=this._keyLength?this.$_startTimer():this.$_stopTimer()},$_startTimer:function(){this.$_stopTimer(),this._timer=setInterval(function(){this.$_requestItems()&&this.$_stopTimer()}.bind(this),this._searchDelay)},$_stopTimer:function(){this._timer&&clearInterval(this._timer)},$_requestItems:function(){var t=this.getEditText();return!(!t||t==this._searchKey||(this._searchKey=t,this._dispatchSearch(t),0))}});I47.SEARCH="onSearchCellEditorSearch";var $$_HANGUL_REG=/[---]/g,f78=I1("NumberCellEditor",P6,{init:function(t,e){this._super(t,e),this._regxNumber=/[0-9]|,|\.|\-|\+/,this._regxAll=/[0-9]|,|\.|\-|\+|e|E/,this._regxPos=/[0-9]|,|\.|\+/,this._regxPosAll=/[0-9]|,|\.|\+|e|E/,this._regxInt=/[0-9]|,|\+|\-/,this._regxIntAll=/[0-9]|,|\+|\-|\+|e|E/,this._regxPosInt=/[0-9]|,|\+/,this._regxPosIntAll=/[0-9]|,|\+|e|E/,this._regx=this._regxAll,this._disableIme()},positiveOnly:!1,scientific:!0,maxDigits:NaN,minValue:NaN,maxValue:NaN,checkMaxValue:!0,setPositiveOnly:function(t){t!=this._positiveOnly&&(this._positiveOnly=t,this.$_resetRistrict())},setScientific:function(t){t!=this._scientific&&(this._scientific=t,this.$_resetRistrict())},setMaxDigits:function(t){(t=Number(t))!=this._maxDigits&&(this._maxDigits=t,this.$_resetRistrict())},initOptions:function(){this._super(),this.setPositiveOnly(!1),this.setScientific(!0),this.setMaxDigits(NaN),this.setMinValue(NaN),this.setMaxValue(NaN)},_keyDownHandler:function(t){return 229==t.keyCode||197==t.keyCode?(G2(t),!1):this._super(t)},_keyPressHandler:function(t){var e,i,n,s,r,o,a;q3&&t.ctrlKey?this._super(t):(e=String.fromCharCode(t.keyCode||t.charCode),this._regx.test(e)?(i=this._editor.value,s=(n=this._editor.selectionEnd)-this._editor.selectionStart,r=this._checkMaxValue&&n==this._editor.selectionStart,0<(o=this._maxDigits)&&"0"<=e&&e<="9"&&0<=(a=i?i.indexOf("."):-1)&&i.length-a>o&&a<n&&s<1?t.preventDefault():!isNaN(this._maxValue)&&r&&(i=i.substring(0,n)+e+i.substr(n),o=parseFloat(i),!isNaN(o)&&!isNaN(this._maxValue)&&o>this._maxValue)?t.preventDefault():this._super(t)):t.preventDefault())},_dispatchChange:function(){this.visible()&&(this._clearHanguls(),this._super())},setEditValue:function(t){var e=this._oldValue=parseFloat(t);this._editor.value=isNaN(e)?"":e},getEditValue:function(t,e){var i,n;this._clearHanguls(),this._editField(),i=void 0;try{(n=(n=this._editor.value)&&n.trim())&&(n=(n=(n=(n=(n=(n=n.replace(/,/g,"")).replace(/[.]+/g,".")).replace(/\++/g,"+")).replace(/\-+/g,"-")).replace(/\+\-/g,"+")).replace(/\-\+/g,"-")),i=n?parseFloat(n):this.emptyValue(),isNaN(i)||(isNaN(this._maxValue)||(i=Math.min(i,this._maxValue)),isNaN(this._minValue)||(i=Math.max(i,this._minValue)))}catch(t){if(e)throw t}return i},$_resetRistrict:function(){var t=!isNaN(this._maxDigits)&&this._maxDigits<=0;this._positiveOnly&&t?this._regx=this._scientific?this._regxPosIntAll:this._regxPosInt:this._positiveOnly?this._regx=this._scientific?this._regxPosAll:this._regxPos:this._regx=t?this._scientific?this._regxIntAll:this._regxInt:this._scientific?this._regxAll:this._regxNumber}}),z17=I1("Holiday",null,{init:function(t){this._super(),this.setBackground("#f5f5f5"),this.setColor("#ccc"),this.setBorder("#eee"),t&&this.load(t)},background:null,color:null,border:null,description:null,setBackground:function(t){this._background=t?new U1(t):null},setColor:function(t){this._color=t?new U1(t):null},setBorder:function(t){this._border=t?new Z1(t):null},contains:function(t){return!1},load:function(t){t&&this.assign(t)},prepare:function(t){},compare:function(t,e){return new Date(t).setHours(0,0,0,0)-new Date(e).setHours(0,0,0,0)}}),u78=I1("DateHoliday",z17,{init:function(t){this._super(t)},dates:null,setDates:function(t){t!=this._dates&&(V1(t)||(t=[t]),this._dates=t)},contains:function(t){for(var e=0;e<this._preparedDates.length;e++)if(0==this.compare(t,this._preparedDates[e]))return!0;return!1},prepare:function(t){var e=this._dates;if(e){this._preparedDates=[];for(var i=0;i<e.length;i++){var n=e6(e[i],t._dateConverter);this._preparedDates.push(n)}}}}),g78=I1("RangeHoliday",z17,{init:function(t){this._super(t),this._dateConverter=z3.Default},startDate:null,endDate:null,contains:function(t){if(this._psDate&&this._peDate){if(this._psDate>this._peDate){if(this.compare(this._psDate,t)<=0||0<=this.compare(this._peDate,t))return!0}else if(this.compare(this._psDate,t)<=0&&0<=this.compare(this._peDate,t))return!0}else if(this._psDate){if(this.compare(this._psDate,t)<=0)return!0}else if(this._peDate&&0<=this.compare(this._peDate,t))return!0;return!1},prepare:function(t){this._psDate=e6(this._startDate,t._dateConverter),this._peDate=e6(this._endDate,t._dateConverter)}}),r78=I1("DayHoliday",z17,{init:function(t){this._super(t)},days:null,setDays:function(t){t!=this._days&&(V1(t)||(t=[t]),this._days=t)},contains:function(t){var e=t.getDay();return 0<=this._dayValues.indexOf(e)||this._enValues&&0<=this._enValues.indexOf(e)},prepare:function(){var t=X1._default.shortWeekDays;for(this._dayValues=[],e=0;e<this._days.length;e++)this._dayValues.push(t.indexOf(this._days[e]));if(X1._default!==X1.en){t=X1.en.shortWeekDays,this._enValues=[];for(var e=0;e<this._days.length;e++)this._enValues.push(t.indexOf(this._days[e]))}}}),h78=I1("BaseHoliday",z17,{init:function(t){this._super(t),this._dateConverter=z3.Default},baseDate:null,prevDays:0,nextDays:0,contains:function(t){var e=this._prevDate,i=this._nextDate;if(e&&i)return this.compare(e,t)<=0&&0<=this.compare(i,t)},prepare:function(t){var e,i;e=e6(this._baseDate,t._dateConverter),i=e6(this._baseDate,t._dateConverter),e.setDate(e.getDate()-this._prevDays),i.setDate(i.getDate()+this._nextDays),this._prevDate=e,this._nextDate=i}}),X78=I1("HolidayCollection",null,{init:function(){this._super(),this._items=[]},count:function(){return this._items.length},load:function(t){var e,i,n;if(this._items=[],t)for(V1(t)||(t=[t]),e=0;e<t.length;e++){if((i=t[e]).hasOwnProperty("type"))switch(i.type){case"day":n=new r78(i);break;case"range":n=new g78(i);break;case"date":n=new u78(i);break;case"base":n=new h78(i)}this._items.push(n)}},contains:function(t,e){var i,n,s;for(void 0!==e&&(t=new Date(t.getFullYear(),t.getMonth(),t.getDate()+e)),i=0,n=this.count();i<n;i++)if((s=this.getItem(i)).contains(t))return s;return null},getItem:function(t){return this._items[t]},add:function(t){},clear:function(){this._items=[]},prepare:function(t){for(var e=this.count();e--;)this.getItem(e).prepare(t)}}),I67=I1("DateCellEditor",P6,{init:function(t,e){this._super(t,e),this._list=new C47(t._container,this),this._list.addListener(this),this._closing=!1,this._date=void 0,this._borderable=!1,this._regx=/[0-9]|\.|\-|\//,this._regxtime=/[0-9]|\.|\-|\/|a|A|p|P|m|\s|:/,this._globalMouseHandler=function(t){for(var e=t.target;e;){if(e===this._list._element)return void this._list._monthPicker.hide();if(e===this._list._monthPicker._dom._element)return;e=e.parentNode}this.closeUp(!0)}.bind(this),this._holidays=new X78},minDate:new Date(1970,0,1),maxDate:new Date(2100,11,31),yearNavigation:!1,textReadOnly:!1,dropDownPosition:u1(L0,L0.BUTTON),showToday:!0,commitOnSelect:!0,hasTime:!1,holidays:null,setMinDate:function(t){this._minDate=e6(t,this._dateConverter)},setMaxDate:function(t){this._maxDate=e6(t,this._dateConverter)},setHolidays:function(t){t!==this._holidays&&this._holidays.load(t)},isListing:function(){return this._list.isListing()},listing:function(){return this._list.isListing()},isMonthListing:function(){return this._list.isMonthListing()},dropDown:function(){var t,e;return!(this.readOnly()||this.isListing()||this._closing||(t=this._list,e=w1.getBounds(this._container),this._holidays.prepare(this),t._minDate=this._minDate,t._maxDate=this._maxDate,t.setYearNavigation(this._yearNavigation),t.setDropDownPosition(this._dropDownPosition),t.setShowToday(this._showToday),t.setHolidays(this._holidays),this.$_setListDate(),t.show(this._grid.container()._popupOwner||u2.documentElement,e.cx-1,e.cy+e.height,this._cellBounds.width,w1.getBounds(this._editor)),w1.addWindowListener("mousedown",this._globalMouseHandler),0))},closeUp:function(t){if(this.isListing()){this._closing=!0;try{if(w1.removeWindowListener("mousedown",this._globalMouseHandler),this._list.hide(),t&&this._list.isSelected()){var e=this._list.date();if(!this._textReadOnly){var i=this.$_getEditDate();i&&e.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())}this.$_selectDate(e),this._commitOnSelect&&this._dispatchCommit()}}finally{this._closing=!1}return!0}return!1},initOptions:function(){this._super(),this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._yearNavigation=!1,this._textReadOnly=!1,this._dropDownPosition=L0.BUTTON,this._showToday=!0,this._commitOnSelect=!0,this._holidays.clear()},_isDateEditor:function(){return!0},hasButton:function(){return!0},setEditIndex:function(t){this._super(t),this._textReadOnly&&(this._editor.readOnly=!0)},setEditValue:function(t){this._super(t),this._date=t,this._editor.value=this.$_valToStr(t)},getEditValue:function(t,e){var i=this._super(t,e);return i&&t&&(this._minDate&&(i=Math.max(this._minDate,i)),this._maxDate&&(i=Math.min(this._maxDate,i))),i},_createContainer:function(){var t=this._super();return t.style.border="none",t.style.boxShadow="none",t},_createEditor:function(t){return this._super(t)},_deleteEditor:function(){this.closeUp(),this._super()},_textHandler:function(){this._requestStart()},_oncompositionstartHandler:function(){this._requestStart()},_keyDownHandler:function(t){var e,i,n,s=this._list;if(s.isMonthListing())return t.keyCode==i1.ESCAPE&&(this.closeMonthList(),G2(t),!0);switch(n=(i=this.isListing())&&s.isFocused(),t.keyCode){case i1.ENTER:if(this.closeUp(!0))return G2(t),!this._sendToParent(t);break;case i1.ESCAPE:if(this.closeUp(!1))return G2(t),!0;break;case i1.HOME:if(n)return G2(t),this.$_selectDate(s.firstDay()),!0;break;case i1.END:if(n)return G2(t),this.$_selectDate(s.lastDay()),!0;break;case i1.LEFT:if(n)return G2(t),this.$_selectDate(s.incDay(-1)),!0;break;case i1.RIGHT:if(n)return G2(t),this.$_selectDate(s.incDay(1)),!0;break;case i1.PAGEDOWN:if(i)return G2(t),n?this.$_selectDate(t.altKey?s.incMonth(12):s.incMonth(1)):(this._list.setFocused(!0),this.$_setListDate()),!0;break;case i1.PAGEUP:if(i)return G2(t),n?(e=s.date(),!t.altKey&&e.getDate()<=7?this._list.setFocused(!1):this.$_selectDate(t.altKey?s.incMonth(-12):s.incMonth(-1))):this._list.setFocused(!1),!0;break;case i1.DOWN:if(t.altKey&&!i)return this._requestStart(),G2(t),!0;if(i)return G2(t),n?this.$_selectDate(s.incDay(7)):(this._list.setFocused(!0),this.$_setListDate()),!0;break;case i1.UP:if(t.altKey&&i)return this.closeUp(!1),G2(t),!0;if(i)return G2(t),n?(e=s.date(),t.shiftKey?this._list.setFocused(!1):this.$_selectDate(s.incDay(-7))):this._list.setFocused(!1),!0;break;case i1.T:(t.altKey||t.altKey&&t.ctrlKey)&&i&&(G2(t),this._list.setDate(new Date),this.$_selectDate(this._list._date))}return I67.Base._keyDownHandler.call(this,t)},_keyPressHandler:function(t){this._list;var e=String.fromCharCode(t.keyCode||t.charCode);if((this.hasTime()?this._regxtime:this._regx).test(e))return this._super(t);t.preventDefault()},_dispatchChange:function(){this.visible()&&(this._clearHanguls(),this._super())},_requestStart:function(){return!!this._super()&&(this.dropDown(),!0)},setBounds:function(t,e,i,n){t+=2,e+=2,i-=4,n-=4,this._super(t,e,i,n)},closeList:function(t){this.closeUp(t)},closeMonthList:function(){this._list.closeMonth()},buttonClicked:function(t){this.isListing()?this.closeUp(!1):this.dropDown()},$_selectDate:function(t){t&&t!=this._date&&(this._date=t,this._editor.value=this._dateConverter.getText(this._date),this._dispatchChange())},$_getEditDate:function(){return this._dateConverter.getDateNull(this._editor.value)},$_setListDate:function(){var t=this.$_getEditDate();t&&this._list.setDate(t)},onDatePickerCloseUp:function(t,e){this.closeUp(e),this.setFocus()}}),C47=I1("DatePicker",a2,{init:function(t,e){this._super(),this._container=t,this._editor=e,this._containerElement=null,this._headerElement=null,this._headElement=null,this._todayElement=null,this._monthPicker=new o47,this._monthPicker.addListener({onMonthPickerCloseUp:function(t,e){var i=e-this._currDate.getMonth();i&&(l8(this._currDate,i),this.$_buildCalendar()),this._editor.setFocus()}.bind(this)}),this._date=new Date,this._currDate=null,this._today=null,this._selected=!1,this._cellBackground="#f5f5f5",this._todayBackground="#d5d5d5",this._focusedBackground="rgba(255, 255, 0, 0.3)",this._hoveredBackground="",this._cellBorder="1px solid #eee",this._nullBorder="1px solid #fff",this._focusedBorder="1px solid #aaa",this._todayBorder="1px solid #aaa",this._hoveredBorder="1px solid #111",this._cellColor="#222",this._nullColor="#ccc",this._focused=!0,this._mouseoverHandler=function(t){var e=t.currentTarget;e.style.background=this._hoveredBackground,e.style.border=this._hoveredBorder}.bind(this),this._mouseoutHandler=function(t){var e=this._currDate,i=e.getFullYear(),n=e.getMonth(),s=$$_month_days[v5(i)?1:0][n],r=t.currentTarget,o=r.style,a=r.$_day;if(a<0||s<=a)o.background="",o.border=this._nullBorder,o.color=this._nullColor;else if(this.$_isFocusedDay(this._currDate,a+1))o.background=this._focusedBackground,o.border=this._focusedBorder,o.color=this._cellColor;else if(this.$_isToday(this._currDate,a+1))o.background=this._todayBackground,o.border=this._todayBorder,o.color=this._cellColor;else if(t.currentTarget.$_holiday){var h=t.currentTarget.$_holiday;o.background=h._background&&h._background.css(),o.border=h._border&&h._border.css(),o.color=h._color&&h._color.css()}else t.currentTarget.$_outed?(o.background="",o.border=this._nullBorder,o.color=this._nullColor):(o.background=this._cellBackground,o.border=this._cellBorder,o.color=this._cellColor)}.bind(this),this._clickHandler=function(t){if(!t.currentTarget.$_holiday&&!t.currentTarget.$_outed){var e=t.currentTarget.$_day;this._date=new Date(this._currDate),this._date.setDate(e+1),this._selected=!0,this.fireEvent(C47.CLOSE_UP,!0)}}.bind(this),this._dom=new w1(this._element=this.$_createPicker())},minWidth:0,maxWidth:0,yearNavigation:!1,dropDownPosition:u1(L0,L0.BUTTON),showToday:!0,minDate:null,maxDate:null,holidays:null,date:function(){return this._date},setDate:function(t){return t.getTime()!=this._date.getTime()&&(this._currDate=new Date(t),this._date=new Date(t),this.isListing()&&this.$_buildCalendar()),this._date},isListing:function(){return this._containerElement&&this._containerElement.contains(this._element)},isMonthListing:function(){return this._monthPicker.isListing()},closeMonth:function(){this._monthPicker.hide(0)},isSelected:function(){return this._selected},isFocused:function(){return this._focused},setFocused:function(t){t!=this._focused&&(this._focused=t,this._element.style.border=t?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=t?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px",this._headerElement.style.backgroundColor=t?"rgba(0, 200, 200, 0.1)":"#e8e8e8",this._headElement.style.opacity=t?"1.0":"0.5")},show:function(t,e,i,n,s){this._containerElement=t,this.$_show(e,i,n,s)},hide:function(){this.setFocused(!1),this._monthPicker.hide(),this._dom.detach(),this._containerElement=null},today:function(){return this.setDate(new Date)},incDay:function(t,e){var i;if(this._date.getMonth()==this._currDate.getMonth()){if((i=new Date(this._date)).setDate(this._date.getDate()+t),e&&i.getMonth()!=this._date.getMonth())return}else i=this._currDate,i=new Date(i.getFullYear(),i.getMonth(),1);return this.setDate(i)},incMonth:function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&l8(e,t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.setDate(e)},firstDay:function(){var t=new Date(this._currDate);return this._date&&t.setDate(1),this.setDate(t)},lastDay:function(){var t=new Date(this._currDate);if(this._date){var e=t.getFullYear(),i=t.getMonth(),n=$$_month_days[v5(e)?1:0][i];t.setDate(n)}return this.setDate(t)},$_createPicker:function(){var t=w1.createElement("div",{position:"absolute",float:"none",clear:"both",boxSizing:"border-box",margin:"0px",cursor:"default",fontFamily:"Verdana",fontSize:"11px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",overflow:"auto",zIndex:3e3,background:"#fff",border:"1px solid rgba(50, 50, 50, 0.5)",boxShadow:"rgba(0, 0, 0, 0.5) 1px 2px 5px",padding:"0px"});return t.id="$dl_datepicker",t.class="$dl_datepicker",this._header=this.$_createHeader(),t.appendChild(this._header),this._calendar=this.$_createCalendar(),t.appendChild(this._calendar),t.addEventListener("keydown",function(t){27==t.keyCode&&(this.isMonthListing()?this.closeMonth():this.fireEvent(H0.CLOSE_UP,!1))}.bind(this)),t.addEventListener("mouseup",function(t){this._editor.setFocus()}.bind(this)),t},$_createHeader:function(){var t,e,i,n,s,r,o,a=X1._default,h=this,l=this._headerElement=w1.createElement("div",{position:"relative",paddingLeft:"4px",paddingRight:"4px",paddingTop:"4px",paddingBottom:"0px",fontFamily:"Verdana",fontSize:"12px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",backgroundColor:"#e8e8e8",margin:"0px"});return t=w1.createElement("span",{position:"absolute",left:"4px",top:"3px",minWidth:"17px",minHeight:"17px",backgroundImage:P4("cal_prev.png"),backgroundRepeat:"no-repeat",backgroundPosition:"center center"}),l.appendChild(l.$_prev=t),t.onclick=function(t){w1.setStyles(t.currentTarget,{backgroundImage:P4("cal_prev_hover.png")}),l8(this._currDate,-1),this.$_buildCalendar()}.bind(this),t.onmouseover=function(t){w1.setStyles(t.currentTarget,{backgroundImage:P4("cal_prev_hover.png")})},t.onmousedown=function(t){w1.setStyles(t.currentTarget,{backgroundImage:P4("cal_prev_active.png")})},t.onmouseout=function(t){w1.setStyles(t.currentTarget,{backgroundImage:P4("cal_prev.png")})},e=w1.createElement("span",{position:"absolute",right:"4px",top:"3px",minWidth:"17px",minHeight:"17px",backgroundImage:P4("cal_next.png"),backgroundRepeat:"no-repeat",backgroundPosition:"center center"}),l.appendChild(l.$_next=e),e.onclick=function(t){w1.setStyles(t.currentTarget,{backgroundImage:P4("cal_next_hover.png")}),l8(this._currDate,1),this.$_buildCalendar()}.bind(this),e.onmouseover=function(t){w1.setStyles(t.currentTarget,{backgroundImage:P4("cal_next_hover.png")})},e.onmousedown=function(t){w1.setStyles(t.currentTarget,{backgroundImage:P4("cal_next_active.png")})},e.onmouseout=function(t){w1.setStyles(t.currentTarget,{backgroundImage:P4("cal_next.png")})},i=this._todayElement=w1.createElement("span",{position:"absolute",right:"18px",top:"2px",padding:"2px",fontSize:"10px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",border:"1px solid transparent",borderRadius:"3px"}),l.appendChild(i),i.innerHTML="Today",i.onclick=function(t){h.setFocused(!0),h.setDate(new Date),h._editor.$_selectDate(h._currDate)},i.onmouseover=function(t){w1.setStyles(t.currentTarget,{color:"#00f",border:"1px solid #aaa",backgroundColor:"#fff",textDecoration:"underline"})},i.onmouseup=function(t){w1.setStyles(t.currentTarget,{color:"#00f",border:"1px solid #aaa",backgroundColor:"#fff"})},i.onmousedown=function(t){w1.setStyles(t.currentTarget,{color:"#800",backgroundColor:"#eee"})},i.onmouseout=function(t){w1.setStyles(t.currentTarget,{color:"",border:"1px solid transparent",backgroundColor:"",textDecoration:""})},n=w1.createElement("div",{position:"relative",textAlign:"center",marginLeft:"20px",marginRight:"50px"}),l.appendChild(l.$_title=n),s=w1.createElement("span",{fontFamily:"Verdana",fontSize:"11px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",verticalAlign:"top",height:"16px"}),n.appendChild(n.$_year=s),s.innerHTML="2015"+a.year,s.onclick=function(t){},r=this.$_createYearSpin(),n.appendChild(n.$_yearSpin=r),o=w1.createElement("span",{fontFamily:"Verdana",fontSize:"11px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",verticalAlign:"top"}),n.appendChild(n.$_month=o),o.innerHTML=a.shortMonths[0],o.onmousedown=function(t){G2(t);var e=w1.getOffset(this._headerElement.$_title.$_month);this._monthPicker.show(this._containerElement,e.x,e.y)}.bind(this),l},$_createYearSpin:function(){var t,e,i;return t=w1.createElement("div",{display:"inline-block",visibility:"hidden",position:"relative",width:"15px",height:"16px",marginLeft:"-4px",marginRight:"2px"}),e=w1.createElement("span",{position:"absolute",top:"0px",left:"0px",width:"15px",height:"9px",backgroundImage:P4("cal_up.png"),backgroundRepeat:"no-repeat",backgroundPosition:"center center"}),t.appendChild(e),e.onclick=function(t){w1.setStyles(t.currentTarget,{backgroundImage:P4("cal_up_hover.png")}),this._currDate.setFullYear(this._currDate.getFullYear()+1),this.$_buildCalendar()}.bind(this),e.onmouseover=function(t){w1.setStyles(t.currentTarget,{backgroundImage:P4("cal_up_hover.png")})},e.onmousedown=function(t){w1.setStyles(t.currentTarget,{backgroundImage:P4("cal_up_active.png")})},e.onmouseout=function(t){w1.setStyles(t.currentTarget,{backgroundImage:P4("cal_up.png")})},i=w1.createElement("span",{position:"absolute",top:"7px",left:"0px",width:"15px",height:"9px",backgroundImage:P4("cal_down.png"),backgroundRepeat:"no-repeat",backgroundPosition:"center center"}),t.appendChild(i),i.onclick=function(t){w1.setStyles(t.currentTarget,{backgroundImage:P4("cal_down_hover.png")}),this._currDate.setFullYear(this._currDate.getFullYear()-1),this.$_buildCalendar()}.bind(this),i.onmouseover=function(t){w1.setStyles(t.currentTarget,{backgroundImage:P4("cal_down_hover.png")})},i.onmousedown=function(t){w1.setStyles(t.currentTarget,{backgroundImage:P4("cal_down_active.png")})},i.onmouseout=function(t){w1.setStyles(t.currentTarget,{backgroundImage:P4("cal_down.png")})},t},$_createCalendar:function(){var t,e,i,n,s,r,o,a,h,l,u,d=X1._default;for((t=w1.createElement("table",{margin:"2px",borderCollapse:"separate",borderSpacing:"3px"})).cellSpacing=3,e=this._headElement=w1.createElement("thead",{}),t.appendChild(t.$_head=e),i=w1.createElement("tr"),e.appendChild(i),r=[],s=0;s<7;s++)o=w1.createElement("th",{minWidth:"20px",textAlign:"center"}),e.appendChild(o),(a=w1.createElement("span",{fontFamily:"Verdana",fontSize:"11px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal"})).innerHTML=w1.htmlEncode(d.shortWeekDays[s]),o.appendChild(a),r.push(a);for(e.$_cells=r,l=w1.createElement("tbody",{fontSize:"10px"}),t.appendChild(t.$_body=l),u=l.$_rows=[],h=0;h<6;h++)for(i=w1.createElement("tr",{}),l.appendChild(i),u.push(i),i.$_cells=r=[],s=0;s<7;s++)n=w1.createElement("td",{padding:"1px",textAlign:"right",color:this._cellColor,background:"#f0f0f0",borderRadius:"1px"}),i.appendChild(n),r.push(n),n.onmouseover=this._mouseoverHandler,n.onmouseout=this._mouseoutHandler,n.onclick=this._clickHandler,a=w1.createElement("span",{fontFamily:"Verdana",fontSize:"11px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal"}),n.appendChild(n.$_span=a);return t},$_show:function(t,e,i,n){var s,r,o,a,h,l,u,d,c,_,f=document.documentElement;this.setFocused(!1),this._selected=!1,this._header.$_title.$_yearSpin.style.visibility=this._yearNavigation?"visible":"hidden",this._todayElement.style.display=this._showToday?"initial":"none",this._header.$_title.style.marginRight=this._showToday?"50px":"20px",(s=this._date)instanceof Date&&"Invalid Date"!=s||(s=null),this._currDate=s?new Date(s):new Date,this._today=new Date,this.$_buildCalendar(),this._dom.disableSelection(),this._containerElement.appendChild(this._dom.element()),r=this._container._container,o=q5(),a=w1.getBounds(this._containerElement),h=w1.getBounds(r),l=o.width,u=o.height,d=this._dom.getBounds(),c=window.pageXOffset||f.scrollLeft,_=window.pageYOffset||f.scrollTop,f.scrollWidth>f.clientWidth&&(u-=18),f.scrollHeight>f.clientHeight&&(l-=18),t+=h.left-a.left,e+=h.top-a.top,(G6||c4||D5)&&(t+=f.scrollLeft,e+=f.scrollTop),e+d.height>u+_&&(e=e-n.height-d.height)<0&&(e=u-d.height-2),this._dropDownPosition!=L0.EDITOR?t=Math.max(0,t+i-d.width):t+d.width>l+c&&(t=l-d.width),this._dom.move(Math.max(0,t),Math.max(0,e))},$_isFocusedDay:function(t,e){var i=d77(this._date);return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},$_isToday:function(t,e){var i=d77(this._today);return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},$_isOutedDay:function(t){return t&&this._minDate&&this._maxDate&&(t<this._minDate||t>this._maxDate)},$_buildCalendar:function(){var t,e,i,n,s,r,o,a,h,l,u,d,c,_,f=X1._default,g=this._header,m=this._currDate,p=g.$_prev,w=g.$_next,v=g.$_title,C=m.getFullYear(),I=m.getMonth();for(v.$_year.innerHTML=C+f.year+"&nbsp;",v.$_month.innerHTML=f.shortMonths[I],p.title=0==I?C-1+"/12":C+"/"+c0(I),w.title=11==I?C+1+"/01":C+"/"+c0(I+2),e=this._calendar.$_head.$_cells,t=0;t<7;t++)e[t].innerHTML=w1.htmlEncode(f.shortWeekDays[t]);if(n=(i=this._calendar.$_body).$_rows,s=$$_month_days[v5(C)?1:0][I],(r=new Date(m)).setDate(1),o=r.getDay(),30==s&&6==o||31==s&&5<=o?w1.addChild(i,n[5]):w1.removeChild(i,n[5]),28==s&&0==o?w1.removeChild(i,n[4]):w1.addChild(i,n[4]),e=n[h=0].$_cells,0<o){l=C,(u=I-1)<0&&(l--,u=11);var R=$$_month_days[v5(l)?1:0][u];for(t=0;t<o;t++)a=e[t],d=this._holidays.contains(r,h),a.$_holiday=d,a.$_outed=this.$_isOutedDay(r),a.$_day=t-o,a.$_span.innerHTML=R-o+t+1,d&&d.description()&&(a.title=d.description()),w1.setStyles(a,{background:"",border:this._nullBorder,color:this._nullColor})}for(t=o;t<7;t++)a=e[t],d=this._holidays.contains(r,h),a.$_holiday=d,a.$_outed=this.$_isOutedDay(r),a.$_day=h++,a.$_span.innerHTML=h,d&&d.description()&&(a.title=d.description()),this.$_isFocusedDay(m,h)?w1.setStyles(a,{background:this._focusedBackground,border:this._focusedBorder,color:this._cellColor}):this.$_isToday(m,h)?w1.setStyles(a,{background:this._todayBackground,border:this._todayBorder,color:this._cellColor}):d?w1.setStyles(a,{background:d._background&&d._background.css(),border:d._boarder&&d._border.css(),color:d._color&&d._color.css()}):a.$_outed?w1.setStyles(a,{background:"",border:this._nullBorder,color:this._nullColor}):w1.setStyles(a,{background:this._cellBackground,border:this._cellBorder,color:this._cellColor});for(c=1;c<6&&h<s;c++)for(e=n[c].$_cells,t=0;t<7;t++)if(h<s)a=e[t],d=this._holidays.contains(r,h),a.$_holiday=d,a.$_outed=this.$_isOutedDay(r),a.$_day=h++,a.$_span.innerHTML=h,d&&d.description()&&(a.title=d.description()),this.$_isFocusedDay(m,h)?w1.setStyles(a,{background:this._focusedBackground,border:this._focusedBorder,color:this._cellColor}):this.$_isToday(m,h)?w1.setStyles(a,{background:this._todayBackground,border:this._todayBorder,color:this._cellColor}):d?w1.setStyles(a,{background:d._background&&d._background.css(),border:d._border&&d._border.css(),color:d._color&&d._color.css()}):a.$_outed?w1.setStyles(a,{background:"",border:this._nullBorder,color:this._nullColor}):w1.setStyles(a,{background:this._cellBackground,border:this._cellBorder,color:this._cellColor});else for(_=1;t<7;t++)(a=e[t]).$_day=h++,a.$_span.innerHTML=_++,w1.setStyles(a,{background:"",border:this._nullBorder,color:this._nullColor})},$_refreshItems:function(){},$_search:function(t){}});C47.CLOSE_UP="onDatePickerCloseUp";var o47=I1("DatePicker",a2,{init:function(){this._super(),this._mouseoverHandler=function(t){var e=t.currentTarget;e.style.background="rgba(0, 0, 0, 0.9)",e.style.color="#fff"}.bind(this),this._mouseoutHandler=function(t){var e=t.currentTarget;e.style.background="",e.style.color=""}.bind(this),this._clickHandler=function(t){G2(t);var e=t.currentTarget,i=w1.getChildIndex(e);0<=i&&(this._month=i,this.fireEvent(o47.CLOSE_UP,this._month)),this.hide()}.bind(this),this._dom=new w1(this.$_createPicker()),this._container=null},month:-1,show:function(t,e,i){var n,s,r;(this._container=t)&&(n=this._dom._element,s=this._dom.getBounds(),r=w1.getScrolled(),e=Math.max(r.sx,e-s.width-2),i=Math.max(r.sy,i-s.height/2+13),w1.visitChildren(n,function(t,e){e.style.background="",e.style.color=""}),t.appendChild(n),this._dom.move(e,i))},hide:function(){this._dom.detach(),this._container=null},isListing:function(){return this._container&&this._container.contains(this._dom._element)},$_createPicker:function(){var t,e,i,n;for((t=w1.createElement("div",{position:"absolute",float:"none",clear:"both",boxSizing:"border-box",margin:"0px",cursor:"default",zIndex:3001,background:"#fff",border:"1px solid rgba(50, 50, 50, 0.5)",boxShadow:"rgba(0, 0, 0, 0.5) 1px 2px 5px",fontFamily:"Verdana",fontSize:"11px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal"})).onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),e=1;e<=12;e++)i=w1.createElement("div",{position:"relative",float:"none",paddingTop:"1px",paddingBottom:"1px",paddingLeft:"4px",paddingRight:"4px",fontFamily:"Verdana",fontSize:"11px",textAlign:"center",cursor:"default"}),w1.disableSelection(i),t.appendChild(i),i.onclick=this._clickHandler,i.onmouseup=this._clickHandler,i.onmouseover=this._mouseoverHandler,i.onmouseout=this._mouseoutHandler,(n=w1.createElement("span",{fontSize:"11px"})).innerHTML=w1.htmlEncode(e+" "),n.tabIndex=-1,w1.disableSelection(n),i.appendChild(n);return t}});o47.CLOSE_UP="onMonthPickerCloseUp";var C67=I1("GridEditController",null,{init:function(t){this._super(),this._grid=t,this._editIndex=new P1,this._editor=null,this._editable=!1,this._readOnly=!1,this._dirty=!1,this._starting=!1,this._modified=!1,this._commiting=!1,this._canceling=!1,this._resetting=!1,this._defaultEditor=t.delegate().getDefaultCellEditor(),this._defaultEditor.setController(this),this._internalHideEditor(this._defaultEditor)},editIndex:function(){return this._editIndex.clone()},isEditing:function(){return this._editor&&this._editor.isEditing()},reactivate:function(t){this._grid.isValidCell(t)&&this._prepareEditor(t)},deactivate:function(){this._grid.delegate().deleteCellEditors()},setFocus:function(t){this.$_focusToEditor(t)},getEditable:function(t){return P1.areEqual(t,this._editIndex)?this._editable:this.$_getEditable(t)},closeList:function(t){this._editor&&this._editor.closeList(t)},reprepareEditor:function(t){P1.areEqual(t,this._editIndex)&&(this.isEditing()?this._editor.selectAll():this._prepareEditor(t))},invalidateEditor:function(){this._dirty=!0},focusedIndexChanging:function(){return!this.isEditing()||(this.closeList(!0),this.commitEditor())},focusedIndexChanged:function(t,e,i){this.resetIndex(),i||P1.areEqual(e,this._editIndex)||(this._unprepareEditor(),this._grid.isValidCell(e)&&this._prepareEditor(e))},editColumnChanged:function(t){if(t&&this._editor&&this._editIndex&&this._editIndex.dataColumn()===t){var e=this.$_getReadOnly(this._grid,this._editIndex);e!=this._readOnly&&(this.isEditing()?this._editor.setReadOnly(e):this._prepareEditor(this._editIndex))}},fillSearchItems:function(t,e,i,n){this.isEditing()&&this._editIndex.column===t&&this._editor instanceof I47&&this._editor.fillItems(e,i,n)},showEditList:function(t){this.isEditing()&&this._editor.showList(t)},resetIndex:function(t){this.isEditing()&&(t=t||this._grid.getEditingRow(),this._editIndex.rowIndex=t.index(),this._resetBounds())},resetEditor:function(t){var e,i;if(this.isEditing())if(this._grid.isValidCell(this._editIndex)){if(this._resetBounds(),t&&this.isEditing()){i=this._editIndex,e=this.getData(i),this._resetting=!0;try{e=grid.setEditValue(this._editor,i,e),this._editor.setEditValue(e),this._editor.beginEdit(!1,!0)}finally{this._resetting=!1}}}else this.hideEditor();else this._editor&&this._editor.visible()&&this._resetBounds()},showEditor:function(t){var e=this._grid;if(e&&e.isValidCell(t)){if(this._editor&&this._editor.isEditing())return e.makeCellVisible(t),!0;if(this._prepareEditor(t,!0),this._editor&&this._editable)return e.makeCellVisible(t),this._activateEditor(!1,!0)}return!1},hideEditor:function(){if(this.isEditing()){this._modified=!1,this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}else this._prepareEditor(this._editIndex)},commitEditor:function(t,e,i){if(!this.isEditing()||this._commiting)return!0;var n,s,r,o=this._grid,a=o.editOptions(),h=this._editIndex,l=h.dataColumn(),u=this._editor,d=!0;this._commiting=!0;try{if(u.commit(),(this._modified||u.isEdited())&&l&&0<=l.dataIndex())try{try{(n=u.getEditValue(!0,!0))===X7.InvalidFormat?(d=!1,s=a.invalidFormatMessage()||E2._default.invalidInputFormat,!i&&a.aletInvalidFormatError()&&(O0(s),s=null)):n===X7.ShortLength?(d=!1,s=(s=a.minLengthMessage()||E2._default.minLengthRequired).replace("${length}",u.minLength()),!i&&a.alertMinLengthError()&&(O0(s),s=null)):d=n!==X7.Unselected&&(r={text:u.getEditText(),value:n},o.getEditValue(u,h,r),n=r.value,o.editorCommit(u,h,this._getData(h),n))}catch(t){n77((s=t).message||t),d=!1}o.isRowEditing()?(h.rowIndex=o.getEditingRow().index(),o.isRowEditing(h.getRow(o))&&d&&(this.$_setData(h,n,this.$_cellEditing()),o.isRowEditing()?(h.rowIndex=o.getEditingRow().index(),this._grid.isRowEditing(h.getRow(o))&&(n=this._getData(h),o.validateCellCommit(h,n))):d=!1)):d=!1,this._modified=!1}catch(t){s=t,d=!1}if(t||a.hideEditorOnFailed()||d){this._resetting=!0;try{this._internalHideEditor(u),this._prepareEditor(h)}finally{this._resetting=!1}}if(s){if(n77(s.message||s),e)throw s;i||O0((s.message||s)+" during commit editing."),I7(s)}}finally{this._commiting=!1}return d&&this.$_cellEditing()&&!o.itemSource().commit(h.dataField())?(o.itemSource().cancel(),!0):d},cancelEditor:function(t){if(this.isEditing()){this._canceling=!0;try{try{this._grid.editorCancel(this._editor,this._editIndex,this._modified)}catch(t){throw t}finally{this._modified=!1}this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}finally{this._canceling=!1,this._grid.editorCanceled()}this._grid.editOptions().updateByCell()&&this._grid.itemSource().cancel()}},caretToLast:function(){this._editor&&this._editor.caretToLast()},buttonClicked:function(t){this._editor&&P1.areEqual(this._editIndex,t)&&this._editor.hasButton()&&this._editor.buttonClicked(this._editIndex)},getEditText:function(){return this.isEditing()?this._editor.getEditText():void 0},_needPrepare:function(t){return!0},_getData:function(t){var e=t.getRow(this._grid);if(e){if(t.column instanceof h7)return t.column.getValue(e);if(t.column instanceof Q7)return t.column.getValue(e);var i=t.column.dataIndex();if(0<=i)return e.getValue(i)}},$_setData:function(t,e,i){var n=t.getRow(this._grid);if(n){var s=t.column.dataIndex();0<=s&&this._grid.execute(new D08(n,s,e,t.column,i))}},$_getCellEditor:function(t){var e=this._grid.delegate().getCellEditor(t);return e&&e.setController(this),e},$_getEditorOptions:function(t){return this._grid.delegate().getCellEditorOptions(t)},$_focusToEditor:function(t){(t||this._grid.$_editFocused)&&(this._grid._container._setFocusAndScroll(this._editor||this._defaultEditor),this.isEditing()||this._editor&&this._editor.selectAll())},$_focusToContainer:function(){},$_freezeEdit:function(t,e){e&&(e.setReadOnly(this._readOnly=!0),e.setEditIndex(t),e.setVisible(!1),this._editorActivated(null),this.$_focusToEditor())},$_getReadOnly:function(t,e,i){return t.getReadOnlyAt(e.rowIndex,e.column,i)},$_getEditable:function(t){var e,i,n,s,r,o=this._grid,a=o.editOptions(),h=t.column,l=Q2(h,L2);return!(o.readMode()||!a.editable())&&!(!(n=t.getRow(o))||!n.canEdit())&&!((s=n.dataIndex())<0&&!n.isEditing())&&!!h.canEditable()&&(l&&(e=l.editableCallback())&&Q3(i=e(t))?i:(e=a.editableCallback())&&Q3(i=e(t))?i:l&&0<=s&&(r=o.getCellStyle(s,h.dataIndex()))&&Q3(i=r.editable())?i:!(!h.canEdit()||j1.isDeleted(n.dataState())&&!a.deletedRowEditable()||o.isFixedRowIndex(n.index())&&!a.fixedRowEditable()||o.isFixedColumn(h)&&!a.fixedColumnEditable()))},$_cellEditing:function(){var t=this._grid,e=t.editOptions(),i=t.itemSource();return e.updateByCell()&&i.isUpdating()||e.insertByCell()&&(i.isInserting()||i.isAppending())},_editorActivated:function(t){this._grid.editorActivated(null)},_unprepareEditor:function(){if(this._editor)try{this._editor.clear(),this._editor.setVisible(!1),this._editorActivated(null)}finally{this._editor.endEdit(),this._editor=null,this._editable=!1,this._readOnly=!0,this.$_focusToEditor()}},_prepareEditor:function(t,e){var i,n,s=this._grid,r=s.editOptions();(e||this._needPrepare(t))&&(this._dirty=!1,s.isValidCell(t)&&(this._editIndex.assign(t),this._unprepareEditor(),s.readMode()&&s.isEmpty()||(i=this._editor=this.$_getCellEditor(t))&&(this._editable=this.$_getEditable(t),this._editable?(this._readOnly=this.$_getReadOnly(s,t),i.setReadOnly(this._readOnly),i.initOptions(),i.applyOptions(this.$_getEditorOptions(t)),i.setEditIndex(t),i.clear(),n=this._getData(t),n=s.setEditValue(i,t,n),i.setEditValue(n),i.selectAll(),r.editWhenFocused()?(i.setVisible(!0),this._resetBounds()):i.setVisible(!1),this.$_focusToEditor(!1,!0)):this.$_freezeEdit(t,i))))},_resetBounds:function(){var t,e,i=this._grid,n=this._editor,s=this._editIndex;i&&n&&((t=i.getEditBounds(s)).x--,t.y--,t.width++,t.height++,e=Y1(i.editOptions().minEditorHeight()),isNaN(e)&&(e=0),e=Math.max(t.height,e),d4&&t.right()>i.width()+3?n.setBounds(t.x+1e4,t.y,0,0,t.scrolled):n.setBounds(t.x,t.y,t.width,e,t.scrolled),t=i.getEditCellBounds(s),n.setCellBounds(t.x,t.y,t.width,e))},_initEditor:function(t,e){this._dirty&&(this._dirty=!1,this._starting||this._prepareEditor(this._editIndex,!0));var i=this._editor;i&&(i.endEdit(),this._resetBounds(),i.setVisible(!0),i.beginEdit(t,e),t&&i.clear(),e&&i.selectAll(),i.setFocus())},$_canShowEditor:function(t){return this._grid.isValidCell(t)&&this._grid._fireShowEditor(t)},_activateEditor:function(t,e){var i=this._grid,n=this._editor,s=this._editIndex,r=s.getRow(i);return!(!this._editable||!n||n.isEditing()||!this.$_canShowEditor(s)||(this._initEditor(t,e),T1.isEditing(r.rowState())||i.$_canUpdate(r,!0)||this._editor.setReadOnly(this._readOnly=!0),this._modified=!1,this._editorActivated(this._editor),0))},_internalHideEditor:function(t){this.closeList(!1),t.setVisible(!1),t.endEdit(),this._editorActivated(null)},onEditorStart:function(t){t.visible()||this._commiting||this._canceling||this._activateEditor(!1,!1)},onEditorKeyDown:function(t,e,i,n,s){return this._grid.activeTool().keyDown(e,i,n,s)},onEditorKeyUp:function(t,e,i,n,s){return this._grid.activeTool().keyUp(e,i,n,s)},onEditorChange:function(t){this._modified||(this._modified=!0,this._grid._editorStarted(this._editor,this._editIndex)),this.isEditing()&&(this._grid.makeCellVisible(this._editIndex),this._grid._editorChange(this._editor,this._editIndex,this._editor.getEditValue(!1,!1)))},onEditorSearch:function(t,e){this._grid._editorSearch(this._editor,this._editIndex,e)},onEditorCommit:function(t){this.commitEditor()}}),A08=I1("DefaultEditController",C67,{init:function(t){this._super(t)}}),b08=I1("DummyEditController",null,{init:function(t){this._super(),this._grid=t,this._editIndex=new P1},editIndex:function(){return this._editIndex.clone()},isEditing:function(){return!1},getEditable:function(t){return!1},reactivate:function(t){},deactivate:function(){},setFocus:function(){this._grid.container().setFocus()},resetEditor:function(t){},reprepareEditor:function(t){},invalidateEditor:function(){},closeList:function(){},focusedIndexChanging:function(){return!0},focusedIndexChanged:function(t,e){},showEditor:function(t){},hideEditor:function(){},commitEditor:function(t,e){return!0},cancelEditor:function(t){},fillSearchItems:function(t,e,i,n){},buttonClicked:function(t){},editColumnChanged:function(t){},onEditorStart:function(t){},onEditorKeyDown:function(t,e,i,n){},onEditorChange:function(t){},onEditorSearch:function(t,e){}}),m08=I1("EditRowCommand",g5,{init:function(t,e){this._super(),this._grid=t,this._row=e},undo:function(){this._grid.cancel()},redo:function(){}}),D08=I1("SetValueCommand",g5,{init:function(t,e,i,n,s){this._super(),this._row=t,this._field=e,this._value=i,this._column=n,this._noCalc=s,this._oldValue=t.getValue(e)},undo:function(){this._row.setValue(this._field,this._oldValue,this._noCalc),this.$_focus()},redo:function(){this._row.setValue(this._field,this._value,this._noCalc),this.$_focus()},$_focus:function(){var t=this._column,e=t.grid();t&&e&&e.setFocusedColumn(t).makeColumnVisible(t)}}),Q08=I1("GridTool",F5,{init:function(t,e){this._super(t,e),this._grid=t.gridView(),this._focusView=this._createFocusView(this._grid._dom,this._grid),this._innerFocusView=null},focused:null,grid:function(){return this._grid},focused_:function(){return this._grid.$_focusedIndex()},setFocused:function(t,e){return!!this._grid.isValidCell(t)&&this._grid.setFocusedIndex(t,!0,e)},layoutChanged:function(){this._doLayoutChanged&&this._doLayoutChanged()},resetFocus:function(){this._resetFocusView()},focusedIndexChanged:function(t,e){this._doFocusedIndexChanged&&this._doFocusedIndexChanged(t,e)},columnHeaderDblClicked:function(t){this._grid._fireColumnHeaderDblClicked(t)},headerHeadDblClicked:function(){this._grid._fireHeaderHeadDblClicked()},footerCellDblClicked:function(t){this._grid._fireFooterCellDblClicked(t)},footerHeadDblClicked:function(){this._grid._fireFooterHeadDblClicked()},headerSummaryCellDblClicked:function(t){this._grid._fireHeaderSummaryCellDblClicked(t)},headerSummaryHeadDblClicked:function(){this._grid._fireHeaderSummaryHeadDblClicked()},checkBarFootDblClicked:function(){this._grid._fireCheckBarFootDblClicked()},rowIndicatorCellClick:function(t){this._grid._fireRowIndicatorCellClick(t)},rowIndicatorCellClicked:function(t){this._grid._fireRowIndicatorCellClicked(t)},rowIndicatorCellDblClicked:function(t){this._grid._fireRowIndicatorCellDblClicked(t)},stateBarCellDblClicked:function(t){this._grid._fireStateCellDblClicked(t)},checkBarCellDblClicked:function(t){this._grid._fireCheckCellDblClicked(t)},checkBarHeadDblClicked:function(){this._grid._fireCheckBarHeadDblClicked()},rowGroupHeadCellDblClicked:function(t){this._grid._fireRowGroupHeadCellDblClicked(t)},rowGroupHeaderDblClicked:function(t){this._grid._fireRowGroupHeaderDblClicked(t)},rowGroupFooterCellDblClicked:function(t){this._grid._fireRowGroupFooterCellDblClicked(t)},rowGroupBarDblClicked:function(t){this._grid._fireRowGroupBarDblClicked(t)},panelDblClicked:function(){this._grid._firePanelDblClicked()},rowGroupPanelDblClicked:function(t){this._grid._fireRowGroupPanelDblClicked(t)},dataCellClick:function(t){this._grid._fireDataCellClick(t)},dataCellClicked:function(t){this._grid._fireDataCellClicked(t)},dataCellDblClicked:function(t){this._grid._fireDataCellDblClicked(t)},cellButtonClicked:function(t){var e,i,n,s,r=this._grid,o=t.dataColumn();if(o)switch(o.button()){case Y0.POPUP:(e=o.$_getMenu(t))&&((i=Q2(r.getCellView(null,t),m4))?r.showPopupMenu(t.clone(),e,i):(i=(n=o.fixed()?r.fixedMergeView():r.mergeView())&&n.getCellView(t))&&((s=i.boundsByContainer()).y=r.lm().itemBounds(t.rowIndex-r.topIndex()).bottom()+r.bodyView().y(),r.showPopupMenuAt(t.clone(),e,s.x,s.y,s.width)));break;case Y0.ACTION:r._doCellButtonClicked(t,-1)}},customCellButtonClicked:function(t,e){t.column.$_buttonClicked(t,e)||this._grid._doCellButtonClicked(t,e)},editorButtonClicked:function(t){this._grid._fireEditorButtonClicked(t)},dataButtonClicked:function(t){this._grid._fireDataButtonClicked(t)},getFocusRect:function(){return this._focusView.visible()?this._focusView.bounds():null},rowEditStarted:function(t){},rowEditEnded:function(t,e){},_createFocusView:function(t,e){return new e67(t,e)},_doSetFocus:function(){this._grid.editController().setFocus(!0)},_resetFocusView:function(){var t,e,i,n,s,r,o,a,h=this._grid,l=h._rootElement,u=this.focused(),d=!1,c=!1;h.displayOptions().focusVisible()&&h.isValidCell(u)&&(t=h.getFocusedCellView(u))&&(r=(s=h.lm()).fixedColCount(),o=h.isEditing(),a=t.boundsBy(l),t instanceof U9&&(!t.fixed()&&r?(h._bandedGroupView.visible()&&(e=h.getCellView(h._bandedGroupView,u,!0)),e&&(n=e.boundsBy(l),a.setLeft(n.x))):t.fixed()&&(h._bandedGroupView.visible()&&(e=h.getCellView(h._bandedGroupView,u,!1)),e&&(n=e.boundsBy(l),a.setRight(n.right())))),t instanceof Y9&&r&&(a.setRight(s.bodyBounds().right()),t.fixed()||(a.x=s.fixedBounds().right())),0<a.width&&0<a.height&&(h._container.$_rich&&(a.x++,a.y++),this._focusView.setRect(a),d=!0,(t instanceof e0||t instanceof m6)&&(t.setInnerIndex(u.rowIndex-t.mergeRoom().headItem()),t.canEditable()&&(this._innerFocusView||(this._innerFocusView=new p08(h._dom,h),h.addFocusElement(this._innerFocusView)),i=s.itemBounds(t._topIndex),n=s.itemBounds(u.rowIndex-h.topIndex()),a.y+=n.y-i.y,a.height=n.height,!o&&a.setBy(2,2,-5,-5),h.displayOptions().innerSelectionVisible()&&this._innerFocusView.setRect(a),this._innerFocusView.setEditing(o,t.getButtonWidth?t.getButtonWidth():0),c=!0)),c?this._focusView.setEditing(!1,0):this._focusView.setEditing(o,t.getButtonWidth?t.getButtonWidth():0),h._resetFocusMask())),this._focusView.setVisible(d),this._innerFocusView&&this._innerFocusView.setVisible(c)},$_updateHoverView:function(t,e,i){var n,s,r,o,a=t._rootElement,h=t.displayOptions().rowHoverMask(),l=this._rowHoverView;if(this._rowHoverPos=e.y(),l.updateElement(h),l.$_cellView=i,l.visible()){switch(n=e.boundsBy(a),r=(s=t.lm()).checkBarBounds().x,h.extent()){case T0.CHECK_AND_FILL:n.x=s.checkBarBounds().x,n.setRight(s.nonfixedBounds().right());break;case T0.DATA:n.x=s.checkBarBounds().right(),n.setRight(Math.min(s.nonfixedBounds().right(),s.bodyBounds().right()));break;case T0.FILL:n.x=s.checkBarBounds().right(),n.setRight(s.nonfixedBounds().right());break;case T0.INDICATOR_AND_DATA:n.x=s.rowIndicatorBounds().x,n.setRight(Math.min(s.nonfixedBounds().right(),s.bodyBounds().right())),r=s.rowIndicatorBounds().x;break;case T0.INDICATOR_AND_FILL:n.x=s.rowIndicatorBounds().x,n.setRight(s.nonfixedBounds().right()),r=s.rowIndicatorBounds().x;break;case T0.CELL:if(i instanceof l4){n=i.boundsBy(a);break}default:n.x=s.checkBarBounds().x,n.setRight(Math.min(s.nonfixedBounds().right(),s.bodyBounds().right()))}l.setRectI(n),(o=t._bodyView.getBounds()).x=0,o.width=Math.min(n.width,s.gridBounds().right()-r),o.y=0,o.height=Math.min(n.height,t.lm().gridBounds().bottom()-l.y()),t._dom?l._css.clip=w1.getClipRect(o):l._mask=o,l.invalidate()}},_resetHoverView:function(){var t,e,i=this._rowHoverView;i&&i.visible()&&(t=this._rowHoverPos,(e=this._grid.bodyView().findRowViewAt(this._rowHoverPos))?(this.$_updateHoverView(this._grid,e,i.$_cellView),this._rowHoverPos=t):i.setVisible(!1))},_checkCellClicked:function(t,e,i){var n,s,r=this._grid,o=t.item();r.editOptions().checkable()&&(n=r.checkBar(),!r.isCheckable(o)&&n.checkableOnly()||!(n.showGroup()||0<=o.dataIndex())||(s=t.containerToElement(e,i),t.checkableAt(s.x,s.y)&&(r.makeRowVisible(o.index()),r.setChecked(o,!r.isChecked(o),n.exclusive())))),r._fireCheckCellClicked(o.index())},_checkAllClicked:function(t,e,i){var n,s=this._grid,r=s.editOptions(),o=s.checkBar();!s.isEmpty()&&r.checkable()&&o.showAll()&&!o.exclusive()&&(n=t.containerToElement(e,i),t.checkableAt(n.x,n.y)&&s._fireAllCheck(!t.checked())&&(t.setChecked(!t.checked()),s.checkAll(t.checked(),o.visibleOnly(),o.checkableOnly(),o.$_getCheckAllCallback(),r.rowEventsWhenCheckAll()))),s._fireCheckBarHeadClicked()}}),F08=I1("GridRowHoverElement",D4,{init:function(t){this._super(t,"rowHoverView")},background:null,border:null,updateElement:function(t){this.setVisible(t.visible()),this.setBackground(t.styles().background()),this.setBorder(t.styles().border())},_doDraw:function(t,e){t.drawBoundsI(this._background,this._border,0,0,this.width(),this.height())},_doDrawHtml:function(){this._dom.style.background=this._background?this._background.css():""}}),o67=I1("GridEditTool",Q08,{init:function(t,e){this._super(t,e),this._clickElement=null,this._clickHandle=null,this._clickCell=null},_doEnter:function(t,e,i,n,s){var r,o,a,h=t.isEditing();if(h&&!e.enterToTab())return t.commitEditor();if(r=i.clone(),skip=e.skipReadOnly(),o=!1,e.enterToEdit())t.isValidCell(r)&&!h&&r&&r.column.canEditable()&&t.$_showEditor(i);else if(t.isValidCell(r)){if(e.enterToNextRow()){if(r.rowIndex<t.rowCount()-1)r.down();else if(r.rowIndex==t.rowCount()-1&&r.isBottomColumn()){switch(r.getRow(t).rowState()){case T1.INSERTING:return t.commit(e.forceInsert())||t.cancel(!0),!0;case T1.APPENDING:return t.commit(e.forceAppend())||t.cancel(!0),!0;case T1.UPDATING:return t.commit(e.commitWhenNoEdit())||t.cancel(!0),!0}t.append()}}else if(e.enterToTab())if(a=t.getSelection(),s)e.moveInSelection()&&a&&!a.isSingleCell()&&a.contains(r)?(r=a.getBounds().moveToPrev(r),o=!0):e.crossWhenExitFirst()&&r.isFirstColumn()&&0<r.rowIndex?(r.up(),r.end()):r.prev(),e.skipReadOnly()&&!this.$_skipReadOnly(r,-1)&&r.assign(i);else if(e.moveInSelection()&&a&&!a.isSingleCell()&&a.contains(r))r=a.getBounds().moveToNext(r),o=!0,skip&&!this.$_skipReadOnly(r,1)&&r.assign(i);else if(r.isLastColumn()){if(e.commitOnLastCell()&&t.isRowEditing())t.commit(e.commitWhenNoEdit());else if(r.rowIndex==t.rowCount()-1){if(e.appendWhenExitLast())t.append(!0),t.isRowEditing()&&(r.down(),r.home());else if(e.hideOnLastCell())return t.commitEditor()}else if(e.crossWhenExitLast())r.down(),r.home(),skip&&this.$_skipReadOnly(r,1);else if(e.hideOnLastCell())return t.commitEditor()}else{if(h&&!t.commitEditor())return!1;r.next(),skip&&!this.$_skipReadOnly(r,1)&&r.assign(i)}}else r.normalize(t);return P1.areEqual(r,i)||this.setFocused(r,!o),!0},$_checkReadOnly:function(t){return this.grid().isReadOnlyCell(t)},$_skipReadOnly:function(t,e){var i,n,s,r=!1,o=this._grid,a=o.getSelection();if(o.editOptions().skipReadOnly()&&((i=this._skipIndex).assign(t),!(r=!this.$_checkReadOnly(i))))if(n=a&&!a.isSingleCell()&&a.contains(i),s=i.clone(),n){if(0<e){for(;a.getBounds().moveToNext(i)&&!P1.areEqual(i,s);)if(!this.$_checkReadOnly(i)){t.assign(i),r=!0;break}}else for(;a.getBounds().moveToPrev(i)&&!P1.areEqual(i,s);)if(!this.$_checkReadOnly(i)){t.assign(i),r=!0;break}}else if(0<e){for(;i.next();)if(!this.$_checkReadOnly(i)){t.assign(i),r=!0;break}}else for(;i.prev();)if(!this.$_checkReadOnly(i)){t.assign(i),r=!0;break}return r},$_skipReadOnlyCell:function(t,e){}}),e47=I1("GridSelectionTool",o67,{init:function(t,e){this._super(t,e||"selectionTool"),this._clickPos=J0.empty(),this._tmpIndex=new P1,this._skipIndex=new P1,this._tipCell=null,this._tipOptions=new O27,this._scrollTool=new B67,this._rightClicked=null,this._keySelecting=!1,this._rowHoverView=new F08(this._grid._dom),this._rowHoverPos=-1,this._tipCloseCallback=function(){this._tipCell=null}.bind(this)},hoveredCell:null,setHoveredCell:function(t){var e,i,n,s,r,o,a=this._grid,h=a.displayOptions(),l=this._tipOptions,u=t;if(t!=this._hoveredCell&&(this._hoveredCell&&this._hoveredCell.setMouseEntered(!1),this._hoveredCell=t,this._hoveredCell&&this._hoveredCell.setMouseEntered(!0)),u&&a.canHovering()){if(e=u.index(),u instanceof l4&&(i=e.valueColumn())&&((r=h._cursorCallback)&&(o=r(e)),o||(o=i.cursor()),o&&a.container().setCursor(o)),h.showTooltip()){if(u instanceof x7?b4(r=a.header().tooltipCallback())&&(s=r(e.column)):u instanceof y9?b4(r=a.footer().tooltipCallback())&&(s=r(e.column,u.value())):u instanceof W9&&b4(r=a.header().summary().tooltipCallback())&&(s=r(e.column,u.value())),!s&&u instanceof y3){u instanceof l4&&((i=e.dataColumn())&&a.isRowEditing(e.getRow(a))&&a.editOptions().hintOnError()&&i.error()?s=i.error().message||i.error():(n=u.renderer())&&(s=n.getTooltip(u)));var d=a._validationManager._validateCellList;if(d){var c=e.getDataIndex(),_=e.column.dataIndex();d[c]&&d[c][_]&&(s=d[c][_].message)}s||b4(r=(i=e.valueColumn())&&(i.tooltipCallback()||a.body().tooltipCallback()))&&(s=r(e))}s&&(l.setLineBreak(h.tooltipLineBreak()).setMaxWidth(h.tooltipMaxWidth()).setMinWidth(h.tooltipMinWidth()).setDelay(h.tooltipDelay()).setDuration(h.tooltipDuration()).setStyles(h.tooltipStyles()).setAnimation(h.tooltipAnimation()).setMessage(E7(s)),this._showTooltip(u,l))}s||this._hideTooltip()}else!h.tooltipAnimation()&&this._hideTooltip()},isEditing:function(){return this._grid.isEditing()},_doActivate:function(){this._super(),this._grid.addFocusElement(this._focusView),this._innerFocusView&&this._grid.addFocusElement(this._innerFocusView),this._grid.addFeedbackElement(this._rowHoverView)},_doDeactivate:function(){this._grid.removeFeedbackElement(this._rowHoverView),this._grid.removeFocusElement(this._focusView),this._innerFocusView&&this._grid.removeFocusElement(this._innerFocusView),this._super()},_doCancel:function(t){this._dragTracker&&this._dragTracker.cancelable()?(this._dragTracker.cancel(),t.refreshView()):(t.closeFilterSelector(),t.isEditing()?t.cancelEditor(!0):t.cancel())},_doTab:function(t,e,i,n,s){var r,o,a=i.clone(),h=t.isEditing(),l=e.skipReadOnly();if(t.isValidCell(a)){if(e.useTabKey()){if(r=t.getSelection(),o=!1,s)e.moveInSelection()&&r&&!r.isSingleCell()&&r.contains(a)?(a=r.getBounds().moveToPrev(a),o=!0):e.crossWhenExitFirst()&&a.isFirstColumn()&&0<a.rowIndex?(a.up(),a.end()):a.prev(),e.skipReadOnly()&&!this.$_skipReadOnly(a,-1)&&a.assign(i);else if(e.moveInSelection()&&r&&!r.isSingleCell()&&r.contains(a))a=r.getBounds().moveToNext(a),o=!0,l&&!this.$_skipReadOnly(a,1)&&a.assign(i);else if(a.isLastColumn()){if(e.commitOnLastCell()&&t.isRowEditing())t.commit(e.commitWhenNoEdit());else if(a.rowIndex==t.rowCount()-1){if(e.appendWhenExitLast())t.append(!0),t.isRowEditing()&&(a.down(),a.home());else if(e.hideOnLastCell())return t.commitEditor()}else if(e.crossWhenExitLast())a.down(),a.home(),l&&this.$_skipReadOnly(a,1);else if(e.hideOnLastCell())return t.commitEditor()}else{if(h&&!t.commitEditor())return!1;a.next(),l&&!this.$_skipReadOnly(a,1)&&a.assign(i)}return P1.areEqual(a,i)||this.setFocused(a,!o),!0}}else a.normalize(t),this.$_skipReadOnly(a,1);return!1},_doKeyDown:function(t,e,i,n){var s=this.grid();if(s.popupShowing())return!1;var r,o,a,h,l,u,d,c=s.lm(),_=s.editOptions(),f=s.selections(),g=_.skipReadOnly(),m=this.focused(),p=m.clone(),w=s.isEditing();if(!s._fireKeyDown(t,e,i,n))return!0;if(this._keySelecting=!1,t7.consumeKey(p,t,e,i))return!0;if(s.closeFilterSelector(),d=(u=s.$_getMergeCell(p))&&u.mergeRoom?u.mergeRoom():null,t==i1.ESCAPE)s.closePopups(),this._doCancel(s);else{if(t==i1.ENTER)return this._doEnter(s,_,p,e,i);if(t==i1.TAB)return this._doTab(s,_,p,e,i);if(t==i1.F2)!s.isEditing()&&p&&p.column.canEditable()&&s.$_showEditor(p,i);else if(t==i1.QUOT&&_.useCopyKey()&&!s.isEditing()&&s.isRowEditing())!this.$_checkReadOnly(p)&&s.copyCellValue(p)&&(p.next(),g&&this.$_skipReadOnly(p,1),this.setFocused(p,!0));else{if(t==i1.Z&&e&&_.undoable())return s.undo();if(t==i1.Y&&e&&_.undoable())return s.redo();if(t==i1.INSERT||B4&&e&&n&&t==i1.I)_.appendWhenInsertKey()||0==s.rowCount()?s.append():s.insert(i,e);else{if(t==i1.DELETE||B4&&e&&n&&t==i1.D)return e&&i?(s.revertSelection(),!0):e?(s.deleteSelection(),!0):!!_.erasable()&&(s.eraseSelection(),!0);if(t==i1.BACK)return!1;if(N3(t,i1.HOME,i1.END,i1.RIGHT,i1.LEFT,i1.DOWN,i1.UP,i1.PAGEDOWN,i1.PAGEUP)){if(r=s.rowCount(),t==i1.DOWN&&0==r)return void s.append();if(!s.isValidCell(p))return p.normalize(s),this.setFocused(p,!0),!0;if((N3(t,i1.DOWN,i1.PAGEDOWN)||t==i1.END&&e)&&p.isBottomColumn()&&this.$_checkAppending(p,!0))return!0;if((N3(t,i1.UP,i1.PAGEUP)||t==i1.HOME&&e)&&p.isTopColumn()&&this.$_checkAppending(p,!0))return!0;switch(s.bodyView().findRowView(p.rowIndex),w=s.isEditing(),o=i&&0<s.selections().count(),a=_.keepFocusedWhenSelecting(),t){case i1.HOME:!w&&o&&a?e?f.getItem(0).getAnchor(p).firstRow(s):f.getItem(0).getAnchor(p).home():e?p.firstRow(s):(p.home(),this.$_skipReadOnly(p,1));break;case i1.END:!w&&o&&a?e?f.getItem(0).getAnchor(p).lastRow(s):f.getItem(0).getAnchor(p).end():e?p.lastRow(s):(p.end(),this.$_skipReadOnly(p,-1));break;case i1.RIGHT:if(l=s.getRow(p.rowIndex),!w&&o&&a)f.getItem(0).getAnchor(p).right();else if(l instanceof P0)p.down();else if(!l.isEditing()&&l instanceof j2&&l.dataIndex()<0)l.collapsed()?s.expand(l,!1,!1):p.down();else if(!l.isEditing()&&l.dataIndex()<0)p.down();else if(p.right(),g&&this.$_checkReadOnly(p)&&!this.$_skipReadOnly(p,1)){p.assign(m);break}break;case i1.LEFT:if(l=s.getRow(p.rowIndex),!w&&o&&a)f.getItem(0).getAnchor(p).left();else if(l instanceof P0)0<=(h=l.level()-1)&&h<s.visibleColumnCount()?p.column=s.getVisibleColumn(h):p.up();else if(!l.isEditing()&&l instanceof j2&&l.dataIndex()<0)l.expanded()?s.collapse(l,!1):p.up();else if(!l.isEditing()&&p.isFirstColumn())l.parent()instanceof n5||p.setRow(l.parent());else if(!l.isEditing()&&l.dataIndex()<0)p.up();else if(p.left(),g&&this.$_checkReadOnly(p)&&!this.$_skipReadOnly(p,-1)){p.assign(m);break}break;case i1.DOWN:if(!w&&o&&a)n&&d?f.getItem(0).getAnchor(p).rowIndex+=Math.min(s.rowCount()-1,d.tailItem()+1):f.getItem(0).getAnchor(p).down();else{if(e)return s.setTopIndex(s.topIndex()+1),!0;if(p.rowIndex==s.rowCount()-1&&p.isBottomColumn()){switch(p.getRow(s).rowState()){case T1.INSERTING:return s.commit(_.forceInsert())||s.cancel(!0),!0;case T1.APPENDING:return s.commit(_.forceAppend())||s.cancel(!0),!0;case T1.UPDATING:return s.commit(_.commitWhenNoEdit())||s.cancel(!0),!0}s.append(),p.down()}else n&&d?p.rowIndex=Math.min(s.rowCount()-1,d.tailItem()+1):p.down()}break;case i1.UP:if(!w&&o&&a)f.getItem(0).getAnchor(p).up();else{if(e)return s.setTopIndex(s.topIndex()-1),!0;if(0==p.rowIndex&&p.isTopColumn()){switch(p.getRow(s).rowState()){case T1.INSERTING:return s.commit(_.forceInsert())||s.cancel(!0),!0;case T1.APPENDING:return s.commit(_.forceAppend())||s.cancel(!0),!0;case T1.UPDATING:return s.commit(_.commitWhenNoEdit())||s.cancel(!0),!0}p.up()}else n&&d?p.rowIndex=Math.max(0,d.headItem()-1):p.up()}break;case i1.PAGEUP:!w&&o&&a?f.getItem(0).getAnchor(p).incRow(s,-c.fullItemCount()):p.incRow(s,-c.fullItemCount());break;case i1.PAGEDOWN:if(!w&&o&&a)f.getItem(0).getAnchor(p).incRow(s,c.fullItemCount());else if(p.rowIndex==s.rowCount()-1&&p.isBottomColumn()){if(T1.isInserting(p.getRow(s).rowState()))return s.commit(_.forceAppend()),!0}else p.incRow(s,c.fullItemCount())}return o?b2.isSingle(s.displayOptions().selectStyle())||(a?s.makeCellVisible(p):this.setFocused(p,!1),f.getItem(0).resizeTo(p),this._keySelecting=!0):this.setFocused(p,!0),!0}if(t==i1[0]&&e&&s.$_restoreEditValue())return!0}}}return!1},_doKeyUp:function(t,e,i){var n,s=this._grid;this._super(t,e,i),this._keySelecting&&(this._keySelecting=!1,(n=s.getSelection())&&s._fireSelectionEnded(n))},_doClick:function(t,e){if(this.isDragging())return!1;var i,n,s=this._grid,r=this.focused();if(r&&((i=this.findElementAt(t,e,!0))&&(n=Q2(i,m4)||i.getParentAs(m4)),this._clickElement===i))if(n&&n.isDataCell())n instanceof l4&&(r=n.innerCellIndex()),this.dataCellClicked(r),s.isEditing()||(this._reclickCell?this._performRendererClick(r,this._reclickCell,t,e,!1,!1):this._performRendererClick(r,i,t,e,!1,!0));else if(i instanceof C0)this.rowIndicatorCellClicked(i.index().rowIndex);else if(i instanceof M9){var o=i.owner();o instanceof X8?s.showPopupMenu(s.header().head(),s.header().head().popupMenuName(),o,4,-4):o instanceof m17?s.showPopupMenu(s.footer().head(),s.footer().head().popupMenuName(),o,4,-4):o instanceof h8?s.showPopupMenu(s.header().summary().head(),s.header().summary().head().popupMenuName(),o,4,-4):o instanceof Z67&&s.showPopupMenu(s.rowGroup(),s.rowGroup().getPopupMenu(),i,4,-4)}else i instanceof A47&&s.showPopupMenu(i.column().header(),i.column().header().popupMenuName(),i,4,-4)},$_calcInnerIndex:function(t,e,i,n){if(t instanceof e0||t instanceof m6){var s=t.$_calcInnerIndex(this._grid,i,n);0<=s&&(e.rowIndex=s)}},_doDblClick:function(t,e){if(this.isDragging())return!1;var i,n,s,r=this._grid,o=this.focused(),a=this._clickCell,h=a?a.index():null,l=this.findElementAt(t,e,!0);l&&l===this._clickElement&&(i=Q2(l,m4)||l.getParentAs(m4),(n=this._getEditRequest(l,t,e,!1,!1))instanceof U3?r.fitRowHeight(n.rowIndex()):n instanceof n17?r.lm().fitColumnWidth(n.cell().index().column,0,0,!1,r.displayOptions().includeHeaderWhenFitColumn()):i&&i.isDataCell()&&this.dataCellDblClicked(i instanceof l4?i.innerCellIndex():i.index()),l instanceof O3||l instanceof j3?(s=Q2(l.item(),j2))&&x77(this.rowGroupHeaderDblClicked,this,s.index())&&s.setExpanded(!s.expanded()):l instanceof x7?h.column&&this.columnHeaderDblClicked(h.column):a instanceof X8?this.headerHeadDblClicked():r.isValidCell(o)&&!r.isEditing()&&a&&a.canEditable()?(this._performRendererClick(o,this._reclickCell,t,e,!0,!1),a instanceof e0&&(h=h.clone(),this.$_calcInnerIndex(a,h,t,e)),r.editOptions().showEditorWhenDblClicked()&&P1.areEqual(h,o)&&a.canEditableAt(a.containerToElement(t,e))&&r.$_showEditor(h)):a instanceof y9?a.error()||a.errorDetail()?r.alertCellError(a,a.errorDetail()||a.error()):this.footerCellDblClicked(h.column):a instanceof m17?this.footerHeadDblClicked():a instanceof W9?a.error()?r.alertCellError(a,a.errorDetail()||a.error()):this.headerSummaryCellDblClicked(h.column):a instanceof h8?this.headerSummaryHeadDblClicked():a instanceof b6?x77(this.rowGroupFooterCellDblClicked,this,h)&&(a.error()||a.errorDetail())&&r.alertCellError(a,a.errorDetail()||a.error()):a instanceof C0?this.rowIndicatorCellDblClicked(o.rowIndex):a instanceof O9?this.stateBarCellDblClicked(l.index().rowIndex):a instanceof K6?this.checkBarCellDblClicked(l.index().rowIndex):a instanceof A17?this.checkBarHeadDblClicked():a instanceof F47?this.rowGroupHeadCellDblClicked(a.level()):a instanceof j3?this.rowGroupHeaderDblClicked(h.rowIndex):a instanceof O3?this.rowGroupHeaderDblClicked(h.rowIndex):a instanceof k9?this.rowGroupBarDblClicked(-1):a instanceof D47&&this.rowGroupBarDblClicked(-2))},_doMouseDown:function(t,e,i,n,s,r){var o,a,h,l,u,d,c,_,f,g,m,p,w,v,C=this._grid,I=C.displayOptions();if(this._hideTooltip(),C.closePopups(),C.setFocus(),C.autoFill().stop(),this._scrollTool.stop(),o=this._clickElement=null,a=this._clickCell=null,h=null,this._reclickCell=null,this._clickHandle=null,this._rightClicked=1<s,0==s||I.rightClickable()){if(o=this._clickElement=this.findElementAt(t,e,!1)){if(this._scrollTool.start(o,t,e))return;this._clickHandle=Q2(o,u8),(a=this._clickCell=Q2(o,m4))||(a=o&&o.getParentAs(l4)),a||(h=o.getParentAs(c3))}if(this._clickPos.set(t,e),this._clickHandle&&this._clickHandle.clickable())return void this.$_handleClicked(this._clickHandle)}if(o instanceof m4&&o.isDataCell()?this.dataCellClick(o.index()):o instanceof C0&&this.rowIndicatorCellClick(o.index().rowIndex),!(a instanceof l4&&this.$_checkAppending(C.$_focusedIndex(),!0,a))){if(a||h){if(d=C._selections,c=!1,f=_=null,g=a?a.index().clone():new P1(h.rowIndex()),!(l=this._getEditRequest(a,t,e,i,n))||l.isSelectable()){if(n){if(a instanceof x7);else if(m=d.lastItem())return v=!b2.isSingle(I.selectStyle()),void((a instanceof l4||a instanceof C0)&&v&&m.resizeTo(a.index()))}else w=!(I.selectMode()==G3.EXTENDED&&(i||r))&&(!this._rightClicked||!d.contains(a.index())||!C.getContextMenu()&&I.preventSystemMenu()),a instanceof y3&&g.getRow(C)&&w?C._selections.clear():a instanceof C0&&w&&C.rowIndicator().selectable()?C._selections.clear():a instanceof O3&&w?C._selections.clear():a instanceof j3&&w?C._selections.clear():a instanceof K6&&C.checkBar().draggable()&&w?C._selections.clear():h?C._selections.clear():null!=(_=this.$_getGroupFooterView(a))&&w?C._selections.clear():null!=(f=this.$_getMergedFooterView(a))&&w&&C._selections.clear();(a instanceof e0||a instanceof m6)&&this.$_calcInnerIndex(a,g,t,e),a&&a.canEditable()?(P1.areEqual(g,this.focused())&&(this._reclickCell=this._clickCell),l instanceof W5||!this._reclickCell||!C.editOptions().editWhenClickFocused()?c=!0:C.$_showEditor(g)):a instanceof y3||a instanceof N0?c=null!=a.index().getRow(C):a instanceof C0?C.rowIndicator().selectable()&&((p=this._tmpIndex).assign(C.$_focusedIndex()),p.rowIndex=g.rowIndex,null==p.column&&p.getRow(C)instanceof v4&&(p.column=C.getFirstColumn()),g=p,c=!0):a instanceof O3||a instanceof j3?(g.column=C.getVisibleColumn(g.getRow(C).level()),c=!0):_?((p=this.focused().clone()).rowIndex=_.item().index(),g=p,c=!0):f?c=!0:h&&((p=this.focused().clone()).rowIndex=h.item().index(),g=p,c=!0),c&&this.setFocused(g.normalize(C),w)}0==s&&(u=this._getDragTracker(l,t,e,i,n,r),this.setDragTracker(u))}else o&&(l=this._getEditRequest(o,t,e,!1,!1))&&this.setDragTracker(this._getDragTracker(l,t,e,i,n));(u=this.dragTracker())&&u.isStartWhenCreated()&&this._startDragTracker(t,e)}},_doMouseMove:function(t,e,i,n){var s,r,o,a,h,l=this._grid;this._scrollTool.isScrolling()?this._scrollTool.move(t,e):this.dragTracker()?this._hideTooltip():(l.container().restoreCursor(),s=this.findElementAt(t,e,!0),l.toolTipManager().setTarget(s),l.canHovering()?(this.setHoveredCell(Q2(s,m4)),this._hoveredCell&&this._hoveredCell.$_setHoverIndex(l,t,e)):(this._hoveredCell&&s&&this._hoveredCell!==s&&this.setHoveredCell(Q2(s,m4)),this._hideTooltip()),s&&(o=l.displayOptions().rowHoverMask(),a=this._rowHoverView,o.visible()?(r=s.getParentAs(N6))&&(o.extent()==T0.CELL&&s!==a.$_cellView||r.y()!=this._rowHoverPos)&&this.$_updateHoverView(l,r,s):a.setVisible(!1)),(h=this._getEditRequest(s,t,e,i,n))&&h.cursor()&&l.container().setCursor(h.cursor()))},_doMouseUp:function(t,e){var i,n=this.findElementAt(t,e,!0);this._scrollTool.isScrolling()?this._scrollTool.stop(t,e):this.dragTracker()&&this.dragTracker().isCompleted()||!n||n!=this._clickElement||(n instanceof x7&&n.clickable()?(i=this._getEditRequest(this._clickElement,t,e,!1,!1))&&i.isDblClickable()||(n.parent()instanceof f8||n.parent()instanceof E6)&&this.$_columnHeaderClicked(n.index().column,this._rightClicked):n instanceof G9?n.cellView().column().setChecked(!n.cellView().column().checked()):n instanceof X8?this._headerHeadClicked():n instanceof K6?this._checkCellClicked(n,this._clickX,this._clickY):n instanceof A17?this._checkAllClicked(n,this._clickX,this._clickY):n instanceof C0||(n instanceof O9?this._stateBarCellClicked(n.index().rowIndex):n instanceof y9?this._footerCellClicked(n.index().column):n instanceof m17?this._footerHeadClicked():n instanceof W9?this._headerSummaryCellClicked(n.index().column):n instanceof h8?this._headerSummaryHeadClicked():n instanceof F47?this._rowGroupHeadCellClicked(n.level()):n instanceof O3||n instanceof j3?this._rowGroupHeaderClicked(n.index().rowIndex):n instanceof b6?this._rowGroupFooterCellClicked(n.index()):n instanceof k9?this._rowGroupBarClicked(-1):n instanceof D47?this._rowGroupBarClicked(-2):n!==this._clickHandle||n.clickable()?n.clickable()&&this.$_elementClicked(n):this.$_handleClicked(n))),this.setDragTracker(null)},_doMouseOutside:function(){this.setHoveredCell(null),this._grid._validateScrollBars()},_doMouseWheel:function(t,e,i,n){var s,r,o=this._grid,a=o.displayOptions(),h=o.lm();if(this._scrollTool.stop(),(s=a.wheelDelta())&&o.rowCount()>h.fullItemCount()){if(r=o.topIndex(),(s=B4&&0==n?0:0<=n?-s:s)<0&&0<r||0<s&&h.itemCount()>h.fullItemCount())return o.setTopIndex(r+s),!0}else if((s=a.horzWheelDelta())&&0<o.maxHorzPos()&&(r=o.leftPos(),(s=B4&&0==n?0:0<=n?-s:s)<0&&0<r||0<s&&0<o.maxHorzPos()))return o.setLeftPos(r+s),!0;return!a.bubbleWheelEvents()||this._super(t,e,i,n)},_doMouseEnter:function(t,e){},_doMouseLeave:function(){!this._grid.displayOptions().tooltipAnimation()&&this._hideTooltip()},_doMouseOver:function(t,e){},_doLayoutChanged:function(t,e){this._resetFocusView(),this._resetHoverView()},_doFocusedIndexChanged:function(t,e){this._resetFocusView()},editorButtonClicked:function(t){var e=this._grid;e.makeCellVisible(),e.$_showEditor(t)&&e.$_editorButtonClick(t),this._super(t)},$_checkAppending:function(t,e,i){var n,s,r=this._grid;if(!r.isValidCell(t))return!1;if(t.rowIndex!=r.rowCount()-1||!T1.isInserting(t.getRow(r).rowState())||(n=T1.isInserting(t.getRow(r).rowState())&&t.rowIndex==r.rowCount()-1,s=t.rowIndex,i&&i.index().rowIndex===s))return!1;try{r.commit(r.editOptions().forceAppend(),!0)?((t=t.clone()).rowIndex=s,r.isValidCell(t)||(t.rowIndex=r.getRowIndexOfDataIndex(r.dataSource().rowCount()-1)),this.setFocused(t,!0)):e&&r.itemSource()&&!r.itemSource().isEdited()&&r.cancel(!0)}catch(t){if(t instanceof n7)return O0(t),I7(t),!0;if(t instanceof q0)return I7(t),!0;throw t}return n},$_getGroupFooterView:function(t){for(var e=t.parent();e;){if(e instanceof U9)return e;e=e.parent()}return null},$_getMergedFooterView:function(t){for(var e=t.parent();e;){if(e instanceof Y9)return e;e=e.parent()}return null},_getEditRequest:function(t,e,i,n,s){var r,o,a,h,l,u,d,c,_=this._grid,f=_.selections();if(t instanceof x47)return new j67;if(_.visibleColumnCount()<1)return null;if(!(t instanceof m4))return null;if(l=t,u=_.lm(),d=_.displayOptions(),c=this.$_getRowResizeRequest(_,u,d,l,e,i,n,s))return c;if(_.header().resizable()&&(c=this.$_getHeaderResizeRequest(e,i)))return c;if(_.footer().resizable()&&(c=this.$_getFooterResizeRequest(e,i)))return c;if(_.header().summary().resizable()&&(c=this.$_getHeaderSummaryResizeRequest(e,i)))return c;if(a=d.selectMode(),h=d.selectStyle(),l instanceof C0){if(_.rowIndicator().selectable()&&a!=G3.NONE&&h!=b2.NONE&&h!=b2.SINGLE_ROW)return new d3(f,l,b2.ROWS)}else if(l instanceof K6){if(_.checkBar().draggable()&&_.editOptions().checkable())return new L67(l)}else if(l instanceof x7)if(s||n){if(_.header().selectable()&&a!=G3.NONE&&h!=b2.NONE&&h!=b2.SINGLE_COLUMN)return new d3(f,l,b2.COLUMNS)}else{if(c=this.$_getColumnResizeRequest(_,u,d,l,e,i))return c;if(r=l.getDelegateParent().index().column,d.columnMovable()&&r.movable()&&(!r.isRoot()||_.canMoveIndex(r.root().displayIndex())))return new x67(l);if(d.checkColumnExcludable(r))return new l17(r)}else if(l instanceof O3||l instanceof j3||this.$_getGroupFooterView(l)||this.$_getMergedFooterView(l)){if(a!=G3.NONE&&h!=b2.NONE&&!b2.isSingle(h)){if(0<f.count()&&s)return new d3(f,l,f.itemStyle());if(h!=b2.NONE)return new d3(f,l,h)}}else if(l instanceof l4){if(e=l.mouseX(),i=l.mouseY(),l.setButtonState(-1,-1),l.setEditorButtonState(!1,!1),l.ptInButton(e,i))return l.setButtonState(0,-1),new W5(l,0);if(0<=(o=l.ptInCustomButton(e,i)))return new W5(l,o+1);if(l.ptInEditorButton(e,i))return l.setEditorButtonState(!0,!1),new H67(l);if(l.ptInDataButton(e,i))return new G67(l);if(a!=G3.NONE&&h!=b2.NONE){if(0<f.count()&&s)return new d3(f,l,f.itemStyle());if(h!=b2.NONE)return new d3(f,l,h)}}else if(null!=l.index().getRow(_)&&a!=G3.NONE&&h!=b2.NONE){if(0<f.count()&&s)return new d3(f,l,f.itemStyle());if(h!=b2.NONE)return new d3(f,l,h)}return this._super(t,e,i,n,s)},$_getHeaderResizeRequest:function(t,e){var i,n=this._grid.lm(),s=n.rowIndicatorBounds().width;return s<=0&&(s=n.stateBarBounds().width),s<=0&&(s=n.checkBarBounds().width),s<=0&&(0<n.fixedColCount()||0<n.columnCount())&&(s=20),s<=0||s<=t?null:e>(i=n.headerBounds()).bottom()-3&&e<=i.bottom()?new M67:null},$_getHeaderSummaryResizeRequest:function(t,e){var i,n=this._grid.lm(),s=n.rowIndicatorBounds().width;return s<=0&&(s=n.stateBarBounds().width),s<=0&&(s=n.checkBarBounds().width),s<=0&&(0<n.fixedColCount()||0<n.columnCount())&&(s=20),s<=0||s<=t?null:e>(i=n.summaryBounds()).bottom()-3&&e<=i.bottom()?new W67:null},$_getFooterResizeRequest:function(t,e){var i,n=this._grid.lm(),s=n.rowIndicatorBounds().width;return s<=0&&(s=n.stateBarBounds().width),s<=0&&(s=n.checkBarBounds().width),s<=0&&(0<n.fixedColCount()||0<n.columnCount())&&(s=20),s<=0||s<=t?null:e>=(i=n.footerBounds()).y&&e<=i.y+3?new J67:null},$_isResizable:function(t,e,i,n){var s=!0;if(n.checkChildColumnResizable()&&t.group()&&(s=t.group().resizable()),s&&n.columnResizable()&&t.resizable()&&(e.displayOptions().fixedColumnResizable()||t.root().displayIndex()>=i.fixedColCount()))return!0},$_getColumnResizeRequest:function(t,e,i,n,s,r){if(t.visibleColumnCount()<1)return null;var o,a=n.getDelegateParent().index().column,h=this.$_isResizable(a,t,e,i),l=n.localToContainer(J0.EMPTY);return h&&s>=l.x+n.width()-3?new n17(n):s<l.x+3&&(o=n,(n=this.findElementAt(l.x-1,r))instanceof x7&&n!==o&&(a=n.getDelegateParent().index().column,this.$_isResizable(a,t,e,i)))?new n17(n):void 0},$_getRowResizeRequest:function(t,e,i,n,s,r,o,a){if(t.rowCount()<1)return null;var h,l,u,d,c,_,f,g,m,p,w,v=-1;if(n instanceof C0||n instanceof i37?v=n.index().rowIndex:n instanceof K6?t.rowIndicator().visible()||(v=n.index().rowIndex):n instanceof l4&&!t.rowIndicator().visible()&&!t.checkBar().visible()&&s<50&&(v=n.index().rowIndex),v<0)return null;if(c=i.variableRowHeight()&&!t._columnVerticalGrouped&&!o,_=e.fixedItemCount(),f=n.localToContainer(J0.EMPTY),(g=n.width())<=0||s<f.x||s>=f.x+g)return null;if(r-=t.y(),c&&i.fixedRowResizable()||!c&&i.rowResizable())for(h=0;h<(c?_:1);h++)if(t.getRow(h).isResizable()&&v==h){if(r>=(l=e.getItemRect(h)).bottom()-3)return new U3(h,c);if(0<m&&r<=l.y+2){if(m--,t.getRow(m).isResizable())return new U3(m,c);break}if(u=e.footerBounds(),l.bottom()>=u.y&&r>=u.y-2&&r<=u.y+2)return new U3(h,c)}if(0<_&&!c)return null;if(i.rowResizable()){if(p=e.itemCount(),w=t.topIndex(),(0==p&&0<_||1==p&&0==e.fullItemCount()&&t.getRow(0).isResizable())&&(l=e.getItemRect(0),u=e.footerBounds(),l.bottom()>=u.y&&r>=u.y-5&&r<=u.y+2))return new U3(0,c);for(h=d=0;h<p;h++){if(m=h+w+_,t.getRow(m)&&t.getRow(m).isResizable()&&(d++,v===m)){if(r>=(l=e.getItemRect(h+_)).bottom()-3)return new U3(m,c);if(0<m&&r<=l.y+2){if(m--,t.getRow(m).isResizable()&&(_<=m||i.fixedRowResizable()))return new U3(m,c);break}if(u=e.footerBounds(),l.bottom()>=u.y&&r>=u.y-2&&r<=u.y+2)return new U3(m,c)}if(0<d&&!c)break}}return null},_getDragTracker:function(t,e,i,n,s,r){var o=this._grid;if(t instanceof j67)return new y08(o,t);if(t instanceof n17)return new n08(t,e,i);if(t instanceof x67)return this._grid.displayOptions().parentChangable()?new x08(t,e,i):new e08(t,e,i);if(t instanceof l17)return new O67(o,t);if(t instanceof M67)return new I08(o,t,e,i);if(t instanceof W67)return new C08(o,t,e,i);if(t instanceof J67)return new o08(o,t,e,i);if(t instanceof U3)return new l08(o,t,e,i);if(t instanceof l17)return new O67(o,t,e,i);if(t instanceof L67)return new L08(t,e,i,n);if(t instanceof d3){var a=(n||r)&&o.displayOptions().selectMode()==G3.EXTENDED;switch(t.selectStyle()){case b2.SINGLE_ROW:case b2.ROWS:return new O08(t,a);case b2.SINGLE_COLUMN:case b2.COLUMNS:return new j08(t,a);case b2.SINGLE:case b2.BLOCK:return new c08(t,a)}}else{if(t instanceof G67)return new M08(t);if(t instanceof H67)return new G08(t);if(t instanceof W5)return new H08(t)}return null},editorActivated:function(t){this._resetFocusView()},$_columnHeaderClicked:function(t,e){e=1<arguments.length&&e,this._grid._fireColumnHeaderClicked(t,e),this._doColumnHeaderClicked(t,e)},_doColumnHeaderClicked:function(t){},_headerHeadClicked:function(){this._grid._fireHeaderHeadClicked()},_footerCellClicked:function(t){this._grid._fireFooterCellClicked(t)},_footerHeadClicked:function(){this._grid._fireFooterHeadClicked()},_headerSummaryCellClicked:function(t){this._grid._fireHeaderSummaryCellClicked(t)},_headerSummaryHeadClicked:function(){this._grid._fireHeaderSummaryHeadClicked()},_stateBarCellClicked:function(t){this._grid._fireStateCellClicked(t)},_rowGroupHeadCellClicked:function(t){this._grid._fireRowGroupHeadCellClicked(t)},_rowGroupHeaderClicked:function(t){this._grid._fireRowGroupHeaderClicked(t)},_rowGroupFooterCellClicked:function(t){this._grid._fireRowGroupFooterCellClicked(t)},_rowGroupBarClicked:function(t){this._grid._fireRowGroupBarClicked(t)},_panelClicked:function(){this._grid._firePanelClicked()},_rowGroupPanelClicked:function(t){this._grid._fireRowGroupPanelClicked(t)},$_elementClicked:function(t){this._doElementClicked(t)},_doElementClicked:function(t){},$_handleClicked:function(t){this._doHandleClicked(t)},_doHandleClicked:function(t){var e=this._grid,i=t.cellView().index().dataColumn();t instanceof r0&&e.selectColumnFilters(i)},_showTooltip:function(t,e){var i=this._grid.toolTipManager();this._tipCell!==t&&(e.animation()||this._hideTooltip(),t&&e&&(i.show(e,t,this._tipCloseCallback),this._tipCell=t))},_hideTooltip:function(){this._grid.toolTipManager().close(),this._tipCell=null},_performRendererClick:function(t,e,i,n,s,r){var o,a,h=this._grid;!h.isEditing()&&h.isValidCell(t)&&e&&(o=t.dataColumn())&&(a=e.renderer(),e.ptInClick(e.mouseX(),e.mouseY())&&(a.editable()&&(!s&&!a.dblClickEditable()||s&&a.dblClickEditable())&&(!r||a.editOnClick())?h.getReadOnlyAt(t.rowIndex,o)||h.edit()&&a.performEdit(t):!s&&a.isClickable(e)&&a.performClick(e,i,n)))}}),e67=I1("FocusView",D4,{init:function(t,e,i){this._super(t,i||"focusView"),this._grid=e,this._border=new Z1(4281545523,2),this._editBorder=new Z1(4283601655,2),this._editing=!1},setEditing:function(t,e){this._editing=t,this._buttonWidth=e,this.invalidate()},_doDraw:function(t){var e=this.width()-(this._editing?this._buttonWidth:0),i=this._editing?0:1;t.drawBoundsI(null,this._editing?this._editBorder:this._getGridBorder()||this._border,-1,-1,e-i,this.height()-1)},_doDrawHtml:function(){var t=this._editing?this._editBorder:this._border;this._css.background="",this._css.border=t.css()},_getGridBorder:function(){return this._grid.displayOptions().focusBorder()}}),p08=I1("InnerFocusView",e67,{init:function(t,e){this._super(t,e,"innerFocusView"),this._border=new Z1(2150839091,1,[1,1])},_getGridBorder:function(){return this._grid.displayOptions().innerFocusBorder()}}),m98=I1("RowController",a2,{init:function(){this._super()},currentIndex:-1}),R9=I1("CellRequest",y27,{init:function(t){this._super(),this._cell=t},cell:function(){return this._cell},cursor:function(){return null},source:function(){return this._cell},isSelectable:function(){return!0},isDblClickable:function(){return!1}}),i6=I1("GridEditRequest",y27,{init:function(){this._super()},cursor:function(){return null},source:function(){return null},isSelectable:function(){return!0},isDblClickable:function(){return!1}}),i7=I1("GridDragTracker",c27,{init:function(t,e){this._super(t.container(),e),this._grid=t},grid:function(){return this._grid}}),n17=I1("ColumnResizeRequest",R9,{init:function(t){this._super(t)},delta:0,headerCell:function(){return this._cell},cursor:function(){return U0.HORZ_RESIZE},isSelectable:function(){return!1},isDblClickable:function(){return!0}}),x67=I1("ColumnMoveRequest",R9,{init:function(t){this._super(t)}}),L67=I1("CheckCellRequest",R9,{init:function(t,e){this._super(t)}}),z08=I1("DataCellRequest",y27,{init:function(t){this._super(),this._index=t},cursor:function(){return null},source:function(){return null},isSelectable:function(){return!0},isDblClickable:function(){return!1}}),W5=I1("CellButtonRequest",z08,{init:function(t,e){this._super(t.index()),this._cell=t,this._button=e},cell:function(){return this._cell}}),H67=I1("EditorButtonRequest",W5,{init:function(t){this._super(t)}}),G67=I1("EditorButtonRequest",W5,{init:function(t){this._super(t)}}),M67=I1("HeaderResizeRequest",i6,{init:function(){this._super()},cursor:function(){return U0.VERT_RESIZE}}),W67=I1("HeaderSummaryResizeRequest",i6,{init:function(){this._super()},cursor:function(){return U0.VERT_RESIZE}}),J67=I1("FooterResizeRequest",i6,{init:function(){this._super()},cursor:function(){return U0.VERT_RESIZE}}),U3=I1("RowResizeRequest",i6,{init:function(t,e){this._super(),this._itemIndex=t,this._variable=e},rowIndex:function(){return this._itemIndex},cursor:function(){return U0.VERT_RESIZE},isSelectable:function(){return!1}}),l17=I1("ColumnExcludeRequest",i6,{init:function(t){this._super(),this._column=t},column:function(){return this._column},isSelectable:function(){return!1}}),n08=I1("ColumnResizeTracker",i7,{init:function(t){this._super(t.cell().grid(),"columnResizeTracker"),this._request=t;var e=this._request.headerCell().getDelegateParent();this._column=e.index().column,this._startWidth=e.width(),this._offset=this.container().mouseX()-this._startWidth,this._oldWidth=this._column.displayWidth()},isStartWhenCreated:function(){return!0},_doStart:function(t,e){return!0},_doDrag:function(t,e){var i,n,s=this._column;if(2<=(t=this.container().mouseX()-this._offset)){if(n=t-this._startWidth,i=s.displayWidth(),!this.grid()._columnResizing(s,i+n,i))return!1;O1.changeWidth(s,n,!1,2),this._startWidth=t}return!0},_doCompleted:function(){var t=this._column.displayWidth();t!=this._oldWidth&&this.grid()._columnResized(this._column,t,this._oldWidth)}}),l08=I1("RowResizeTracker",i7,{init:function(t,e,i,n){this._super(t,"rowResizeTracker"),this._request=e,this._rowIndex=e._itemIndex;var s=t.lm().itemBounds(this._rowIndex-t.topIndex());s.x+=t.x(),s.y+=t.y(),this._rowTop=s.y,this._rowBottom=s.bottom(),this._offset=n-s.bottom(),this._oldHeight=t.getRowHeight(this._rowIndex)},isStartWhenCreated:function(){return!0},_doStart:function(t,e){return!0},_doDrag:function(t,e){var i=this._grid,n=i.getRowHeight(this._rowIndex),s=e-this._offset-this._rowTop;if(2<=s){if(!i._rowResizing(this._rowIndex,s,n))return!1;this._request._variable?this._grid.setRowHeight(this._rowIndex,s):this._grid.displayOptions().setRowHeight(s)}return!0},_doCompleted:function(){var t=this._grid.getRowHeight(this._rowIndex);t!=this._oldHeight&&this._grid._rowResized(this._rowIndex,t,this._oldHeight)}}),I08=I1("HeaderResizeTracker",i7,{init:function(t,e,i,n){this._super(t,"headerResizeTracker"),this._request=e;var s=t.lm().headerBounds();this._headerTop=s.y,this._headerBottom=s.bottom(),this._offset=n-s.bottom()},_doStart:function(t,e){return!0},_doDrag:function(t,e){if(this._grid.footer().visible()&&e>=this._grid.lm().footerBounds().y)return!1;if(e>=this._grid.lm().gridBounds().bottom())return!1;var i=e-this._offset-this._headerTop;return 2<=i&&this._grid.header().setHeight(i),!0}}),C08=I1("HeaderSummaryResizeTracker",i7,{init:function(t,e,i,n){this._super(t,"headerResizeTracker"),this._request=e;var s=t.lm().summaryBounds();this._summaryTop=s.y,this._summaryBottom=s.bottom(),this._offset=n-s.bottom()},_doStart:function(t,e){return!0},_doDrag:function(t,e){if(this._grid.footer().visible()&&e>=this._grid.layoutManager().footerBounds().y)return!1;if(e>=this._grid.lm().gridBounds().bottom())return!1;var i=e-this._offset-this._summaryTop;return 2<=i&&this._grid.header().summary().setHeight(i),!0}}),o08=I1("FooterResizeTracker",i7,{init:function(t,e,i,n){this._super(t,"footerResizeTracker"),this._request=e;var s=t.lm().footerBounds();this._footerTop=s.y,this._footerBottom=s.bottom(),this._offset=n-s.y},_doStart:function(t,e){return!0},_doDrag:function(t,e){if(this._grid.header().visible()&&e<this._grid.lm().headerBounds().bottom())return!1;if(this._grid.panel()&&this._grid.panel().visible()&&e<this._grid.lm().panelBounds().bottom())return!1;if(e<0)return!1;var i=this._footerBottom-e+this._offset;return 2<=i&&this._grid.footer().setHeight(i),!0}}),y67=I1("ColumnMoveTracker",i7,{init:function(t,e){this._super(t.cell().grid(),e),this._request=t,this._sourceFeedback=new x7(this._grid._dom,"columnMoveFeedback"),this._sourceFeedback.setAlpha(.7),this._targetFeedback=new c67(this._grid._dom,"columnMoveTargetFeedback"),this._targetFeedback.setAlpha(.9),this.setNeedRedraw(!0),this.setCancelable(!0)},_doStart:function(t,e){var i=this._request.cell(),n=this.grid(),s=n._rootElement,r=i.boundsBy(s);return n.addFeedbackElement(this._sourceFeedback),n.addFeedbackElement(this._targetFeedback),this._sourceFeedback.setBounds(r.x,r.y,i.width(),i.height()),this._sourceFeedback.updateCell(n.header().getCell(i.index())),this.$_setTarget(null),!0},_doEnded:function(){var t=this.grid();t.removeFeedbackElement(this._targetFeedback),t.removeFeedbackElement(this._sourceFeedback)},getNextRequest:function(t,e){var i=this.grid(),n=i.lm(),s=this._request.cell(),r=s.index().column;return n=i.lm(),(e-=i.y())>n.headerBounds().bottom()&&i.displayOptions().checkColumnExcludable(r)?new l17(r):i.operateOptions().groupingEnabled()&&!i.isRowEditing()&&i.groupPanel().visible()&&r instanceof L2&&r.groupable()&&e<n.headerBounds().y&&e>=n.groupPanelBounds().y?new M47(s):null}}),e08=I1("ColumnMoveTracker2",y67,{init:function(t,e,i){this._super(t,"columnMoveTracker2"),t.cell().index().column.parent().horizontal()?(this._startPos=e,this._orgPos=t.cell().boundsByContainer().x):(this._startPos=i,this._orgPos=t.cell().boundsByContainer().y)},_doDrag:function(t,e){var i,n,s,r,o=this._request.cell(),a=o.getDelegateParent().index().column,h=null,l=this.grid(),u=l.lm();return!((e-=l.y())>u.headerBounds().bottom()&&l.displayOptions().checkColumnExcludable(o.index().column)||l.groupPanel().visible()&&e>=u.groupPanelBounds().y&&e<u.groupPanelBounds().bottom()||(a.group()?(h=o,a instanceof O1&&(h=h.parent()),a.parent().horizontal()?this._sourceFeedback.setX(this._orgPos+(this._currentX-this._startPos)):this._sourceFeedback.setY(this._orgPos+(this._currentY-this._startPos)),t-=(n=(i=Q2(h.parent(),E6)).boundsByContainer()).x,e-=n.y,h=i.getCellAt(t,e)):(a.parent().horizontal()?this._sourceFeedback.setX(this._orgPos+(t-this._startPos)):this._sourceFeedback.setY(this._orgPos+(e-this._startPos)),t-=(n=(s=l.headerView()).boundsByContainer()).x,e-=n.y,null==(h=s.getCellAt(t,e))&&0<u.fixedColCount()&&l.displayOptions().fixedColumnMovable()&&(t+=n.x,e+=n.y,t-=(n=(s=l.fixedHeaderView()).boundsByContainer()).x,e-=n.y,h=s.getCellAt(t,e))),r=h?h.index().column:null,h&&r.isRoot()&&!l.canMoveToIndex(r.root().displayIndex())&&(h=null),h&&r.group()!=a.group()||this.$_setTarget(h),0))},_doCompleted:function(){this._target&&this._request.cell().getDelegateParent().index().column.setDisplayIndex(this._target.index().column.displayIndex())},$_setTarget:function(t){if(t!=this._target){var e,i,n,s,r,o,a,h,l,u=this._request.cell().getDelegateParent(),d=u.index().column,c=Q2(d,O1),_=this._target=t;_?(l=(r=this.grid())._rootElement,o=r.lm(),a=r.leftPos(),r.makeCellVisible(_.index()),r.leftPos()!=a&&(r.refreshView(),r.container().updateNow()),h=_.boundsBy(l),_===u?this._targetFeedback._direction="none":c&&c===_.index().column?this._targetFeedback.direction="none":!d.group()||d.group().horizontal()?(i=0<o.fixedColCount()&&r.displayOptions().fixedColumnMovable()?(e=_.boundsBy(l).x,c?u.parent().boundsBy(l).x:u.boundsBy(l).x):(e=_.x(),c?u.parent().x():u.x()),this._targetFeedback._direction="horz",this._targetFeedback._reversed=i<e):(n=_.y(),s=c?u.parent().y():u.y(),this._targetFeedback._direction="vert",this._targetFeedback._reversed=s<n),this._targetFeedback.setBounds(h.x,h.y,_.width(),_.height()),this._targetFeedback.setVisible(!0),this._targetFeedback.invalidate()):this._targetFeedback.setVisible(!1)}}}),x08=I1("ColumnMoveTracker3",y67,{init:function(t,e,i){this._super(t,"columnMoveTracker3");var n=t.cell().boundsByContainer();this._startX=i,this._startY=i,this._orgX=n.x,this._orgY=n.y,this._target=null,this._dir=null},_doDrag:function(t,e){var i,n,s,r,o=this._request.cell(),a=this.grid(),h=a.lm();return!(e>h.headerBounds().bottom()&&a.displayOptions().checkColumnExcludable(o.index().column)||a.groupPanel().visible()&&e>=h.groupPanelBounds().y&&e<h.groupPanelBounds().bottom()||!(o.index().column.parent().count()<2)&&(this._sourceFeedback.setX(t),this._sourceFeedback.setY(e),t-=(n=(i=a.headerView()).boundsByContainer()).x,e-=n.y,null==(s=i.getCellAt(t,e,!0))&&0<h.fixedColCount()&&a.displayOptions().fixedColumnMovable()&&(t+=n.x,e+=n.y,t-=(n=(i=a.fixedHeaderView()).boundsByContainer()).x,e-=n.y,s=i.getCellAt(t,e)),r=s?s.index().column:null,s&&r.isRoot()&&!a.canMoveToIndex(r.root().displayIndex())&&(s=null),this.$_setTarget(s),0))},_doCompleted:function(){if(this._target){var t=this._request.cell().getDelegateParent().index().column,e=this._target.index().column;e.parent()===t.parent()?t.setDisplayIndex(e.displayIndex()):(t.setParent(e.parent()),t.setDisplayIndex(e.displayIndex()+("r"==this._dir?1:0)))}},$_setTarget:function(t){var e,i,n,s,r,o,a,h,l,u,d,c,_=this.currentX(),f=this.currentY(),g=this._request.cell().getDelegateParent(),m=g.index().column,p=t?t.index().column:null;m instanceof O1&&m.isAncestorOf(p)||(e=t==this._target,(i=this._target=t)?(s=(n=this.grid())._rootElement,r=n.layoutManager(),o=n.leftPos(),e||(n.makeCellVisible(i.index()),n.leftPos!=o&&(n.refreshView(),n.updateNow())),h=i.boundsBy(s),i===g?this._targetFeedback._direction="none":!p.group()||p.group().horizontal()?(this._targetFeedback._direction="horz",p.parent()!=m.parent()||p instanceof O1?(l=i.width()/2,a=(u=_-h.x)>l?"r":"n",e&&a==this._dir||(this._dir=a,p instanceof O1&&(h.height=i.parent().height()),this._targetFeedback._reversed="r"==a)):e||(u=0<r.fixedColCount()&&n.displayOptions().fixedColumnMovable()?(l=i.boundsBy(s).x,m instanceof O1?g.parent().boundsBy(s).x:g.boundsBy(s).x):(l=i.x(),m instanceof O1?g.parent().x():g.x()),this._targetFeedback._reversed=u<l)):(this._targetFeedback._direction="vert",p.parent()!=m.parent()||p instanceof O1?(d=i.height()/2,a=(c=f-h.y)>d?"r":"n",e&&a==this._dir||(this._dir=a,p instanceof O1&&(h.width=i.parent().width(),h.height=i.parent().height()),this._targetFeedback._reversed="r"==a)):(d=i.y(),c=m instanceof O1?g.parent().y():g.y(),this._targetFeedback._reversed=c<d)),this._targetFeedback.setRect(h),this._targetFeedback.setVisible(!0)):this._targetFeedback.setVisible(!1))}}),c67=I1("ColumnMoveFeedback",W2,{init:function(t,e){this._super(t,e),this._direction="none",this._reversed=!1,this._lineNone=new Z1("rgba(0, 0, 0, 0.7)",2),this._fillNone=new U1("rgba(0, 0, 0, 0.2)"),this._line=new Z1(4278190080,2),this._fill=new U1(4278190080)},_doDraw:function(t){var e,i,n=this.getClientRect(this._drawRect);switch(this._direction){case"horz":this._reversed?(e=n.width,i=n.height-2,t.drawBoundsI(this._fill,null,e-3,1,3,i).drawLineI(this._line,e-1,1,e-7,1).drawLineI(this._line,e-1,i,e-7,i)):(i=n.height-2,t.drawBoundsI(this._fill,null,0,1,3,i).drawLineI(this._line,1,1,7,1).drawLineI(this._line,1,i,7,i));break;case"vert":this._reversed?(e=n.width-2,i=n.height,t.drawBoundsI(this._fill,null,1,i-3,e,3).drawLineI(this._line,1,i-1,1,i-7).drawLineI(this._line,e,i-1,e,i-7)):(w=n.width-2,t.drawBoundsI(this._fill,null,1,0,w,3).drawLineI(this._line,1,1,1,7).drawLineI(this._line,w,1,w,7));break;default:t.drawRectI(this._fillNone,this._lineNone,n)}},_doDrawHtml:function(){this._doDraw(this.$_getGraphics(!0))}}),O67=I1("ColumnExcludeTracker",i7,{init:function(t,e){this._super(t,"columnExcludeTracker"),this._request=e,this._columnView=null,this._border=new Z1(4288256409,1,[2,2]),this._border2=new Z1(4287102976,3,[2,2]),this.setNeedRedraw(!0),this.setCancelable(!0)},request:function(){return this._request},_doStart:function(t,e){return!0},_canAccept:function(t,e){var i=this.grid(),n=i.lm();return(e-=i.y())>n.headerBounds().bottom()},_doCompleted:function(){var t=this.grid(),e=this._request.column();t.excludeColumn(e)},_showFeedback:function(t,e){var i=this.grid(),n=(i.lm(),this._columnView),s=P1.temp(-1,this._request.column());n||(n=this._columnView=new V67(i._dom,i)),n.updateCell(i.header().getCell(s)),n.setBorder(this._border2),n.setBounds(0,0,110,22),n.invalidate(),i.addFeedbackElement(this._columnView),n.move(i.containerToGridX(t)-4,i.containerToGridY(e)-2)},_moveFeedback:function(t,e){var i=this.grid(),n=(i.lm(),this._columnView);e-=i.y(),n.setBorder(this._canAccept(t,e)?this._border2:this._border),n.move(i.containerToGridX(t)-4,i.containerToGridY(e)-2)},_hideFeedback:function(){this.grid().removeFeedbackElement(this._columnView)}}),L08=I1("CheckBarCellTracker",i7,{init:function(t,e,i,n){this._super(t.cell().grid(),"checkCellTracker"),this._request=t,this._prevRow=null,this._ctrlKey=n},_doStart:function(t,e){return this._super(),Boolean(this._request.cell().index().getRow(this.grid()))},_doDrag:function(t,e){var i,n,s=this.grid(),r=s.layoutManager();return this._currX=t=s.containerToGridX(t),this._currY=e=s.containerToGridY(e),t>r.checkBarBounds().x&&t<r.checkBarBounds().right()&&e>r.checkBarBounds().y&&e<r.checkBarBounds().bottom()&&(i=s.pointToIndex(t,e,!1).getRow(s),n=s.checkBar().exclusive(),i!=this._prevRow&&(this._ctrlKey&&s.isChecked(i)?s.setChecked(i,!1,n):s.setChecked(i,!0,n),this._prevRow=i),!0)}}),H08=I1("CellButtonTracker",i7,{init:function(t){this._super(t.cell().grid(),"cellButtonTracker"),this._request=t,this._button=t._button},isStartWhenCreated:function(){return!0},_doStart:function(t,e){return this._request.cell().setButtonState(this._button,this._button),!0},_doDrag:function(t,e){var i=this._request.cell(),n=-1;return 0==this._button?i.ptInButton(i.mouseX(),i.mouseY())&&(n=0):i.ptInCustomButton(i.mouseX(),i.mouseY())==this._button-1&&(n=this._button),i.setButtonState(n,n),!0},_canAccept:function(t,e){var i=this._request.cell(),n=i.containerToElement(t,e);return i.ptInButton(n.x,n.y)||0<=i.ptInCustomButton(n.x,n.y)},_doCompleted:function(){var t=this.grid().activeTool(),e=this._request.cell().innerCellIndex();0==this._button?t.cellButtonClicked(e):t.customCellButtonClicked(e,this._button-1)},_doEnded:function(){this._request.cell().setButtonState(-1,-1)}}),G08=I1("EditorButtonTracker",i7,{init:function(t){this._super(t.cell().grid(),"editorButtonTracker"),this._request=t},isStartWhenCreated:function(){return!0},_doStart:function(t,e){return this._request.cell().setEditorButtonState(!0,!0),!0},_doDrag:function(t,e){var i=this._request.cell(),n=i.ptInButton(i.mouseX(),i.mouseY());return i.setEditorButtonState(n,n),!0},_canAccept:function(t,e){var i=this._request.cell(),n=i.containerToElement(t,e);return i.ptInEditorButton(n.x,n.y)},_doCompleted:function(){this.grid().activeTool().editorButtonClicked(this._request.cell().innerCellIndex())},_doEnded:function(){this._request.cell().setEditorButtonState(!1,!1)}}),M08=I1("DataButtonTracker",i7,{init:function(t){this._super(t.cell().grid(),"dataButtonTracker"),this._request=t},isStartWhenCreated:function(){return!0},_doStart:function(t,e){return this._request.cell().setPressed(!0),!0},_doDrag:function(t,e){var i=this._request.cell(),n=i.ptInDataButton(i.mouseX(),i.mouseY());return i.setPressed(n),!0},_canAccept:function(t,e){var i=this._request.cell(),n=i.containerToElement(t,e);return i.ptInDataButton(n.x,n.y)},_doCompleted:function(){this._request.cell().clickable()&&this.grid().activeTool().dataButtonClicked(this._request.cell().index())},_doEnded:function(){this._request.cell().setPressed(!1)}}),W08=I1("AutoFillOptions",H5,{init:function(t,e){this._super(t)},enabled:!1,checkReadOnly:!1,includeSeries:!1,stop:function(){this.grid().stopAutoFill()},assignSimple:function(t){this.setEnabled(t)}}),x47=I1("AutoFillHandle",u8,{init:function(t,e){x47.Base.init.call(this,t,e,"autoFillhandle"),this._fill=new U1(4281545523),this._stroke=new Z1(4294967295,2),t&&(this._css.background=this._fill.css(),this._css.borderLeft=this._css.borderTop=this._stroke.css()),this._clientRect=new g1,this.setSize(8,8)},grid:function(){return this._owner},_hoveredChanged:function(){},_doDraw:function(t){var e=this.getClientRect(this._clientRect);t.drawRect(this._fill,null,e),t.drawVLineI(this._stroke,e.x+1,e.bottom(),e.y),t.drawHLineI(this._stroke,e.y+1,e.x,e.right())}}),J08=I1("AutoFillView",D4,{init:function(t){this._super(t,"autoFillView"),this._fill=new U1(134252799),this._border=new Z1(4278190080,1,[3,3]),this._direction=void 0,this._drawRect=new g1},refresh:function(t,e){t!=this._direction&&(this._direction=t,this.invalidate()),this.setRect(e)},_doDraw:function(t){var e,i,n=this.getClientRect(this._drawRect);if(!(n.height<=0))switch(t.drawRectI(this._fill,null,n),e=n.right()-1,i=n.bottom()-1,this._direction){case"up":t.drawLinesI(this._border,n.x,i,n.x,n.y,e,n.y,e,i);break;case"down":default:t.drawLinesI(this._border,n.x,n.y,n.x,i,e,i,e,n.y)}},_doDrawHtml:function(){var t=this._css;switch(t.background=this._fill.css(),this._direction){case"up":t.borderBottom=null,t.borderLeft=t.borderRight=t.borderTop=this._border.css();break;case"down":default:t.borderTop=null,t.borderLeft=t.borderRight=t.borderBottom=this._border.css()}}}),j67=I1("AutoFillRequest",i6,{init:function(){this._super()},cursor:function(){return U0.CROSSHAIR},isSelectable:function(){return!1}}),y08=I1("AutoFillTracker",i7,{init:function(t,e){this._super(t,e,"autoFillTracker"),this._direction=void 0,this._startIndex=new P1,this._endIndex=new P1,this._feedback=void 0,this._rect=new g1,this._eltIndex=new P1,this._selStart=null,this._selEnd=null,this._timer=null,this._currx=NaN,this._curry=NaN,this._rowPrevLoop=0,this._rowLoop=0,this._colPrevLoop=0,this._colLoop=0,this._interval=0,this.setCancelable(!0)},isStartWhenCreated:function(){return!0},_doStart:function(t,e){var i=this._grid,n=this.$_getSelection(i);return i._autoFillHandle.setMouseEnabled(!1),this._feedback=new J08(i._dom),i.addAutoFillElement(this._feedback),this._selStart=n.startIndex().clone(),this._selEnd=n.endIndex().clone(),this._startIndex.assign(this._selStart),!0},_doDrag:function(t,e){var i,n,s,r=this._grid,o=r.lm();return this._currx=t=r.containerToGridX(t),this._curry=e=r.containerToGridY(e),e>o.footerBounds().y||e<o.gridBounds().y||t<o.gridBounds().x||t>o.clientRect().right()?this.$_startTimer():(this.$_stopTimer(),(i=this._findElementAt(t,e))instanceof m4?(s=this._eltIndex.assign(i.index()),i instanceof l4&&i.mergeRoom()&&0<=(n=i.$_calcInnerIndex(r,t,e))&&(s.rowIndex=n),this.$_resizeTo(s)):(s=r.pointToIndex(this._currx,this._curry,!1)).column&&0<=s.rowIndex&&(s.rowIndex=Math.min(Math.max(s.rowIndex,r.topIndex()),r.rowCount()-1),this.$_resizeTo(this._eltIndex.assign(s)))),!0},_canAccept:function(t,e){return!0},_doCanceled:function(){},_doCompleted:function(){if(this._direction){var t,e=this._startIndex,i=this._endIndex,n=this._grid,s=n.dataSource(),r=this.$_getSelection(n);if(!1===n.$_autoFillComplete(r,this._direction,e,i))return;s.beginUpdate();try{s.beginActions();try{t=r.isSingleCell()?this.$_copySingleCell(n,this._direction,e,i):this.$_copyRows(n,this._direction,e,i)}catch(t){throw s.endActions(!0),t}finally{s.endActions()}}finally{s.endUpdate()}e.rowIndex=t.row1,i.rowIndex=t.row2,n.$_autoFillCompleted(r,this._direction,e,i)}},_doEnded:function(){var t=this._grid;this.$_stopTimer(),t.removeAutoFillElement(this._feedback),t._autoFillHandle.setMouseEnabled(!0)},$_startTimer:function(){this._timer||(this._rowLoop=this._rowPrevLoop=this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),30))},$_stopTimer:function(){this._timer&&(clearInterval(this._timer),this._timer=null)},$_timerHandler:function(){var t,e=this._grid,i=e.lm(),n=this._currx,s=this._curry,r=0,o=0,a=!1;s>i.footerBounds().y?(o=Math.max(0,Math.min(3,(s-i.footerBounds().y)/40)),this._interval=4-o,this._rowLoop++):s<i.gridBounds().y&&(o=Math.max(0,Math.min(3,(i.gridBounds().y-s)/40)),this._interval=4-o,this._rowLoop++),n>i.clientRect().right()?(r=Math.max(0,Math.min(3,(n-i.clientRect().right())/40)),this._interval=4-r,this._colLoop++):n<i.gridBounds().x&&(r=Math.max(0,Math.min(3,(i.gridBounds().x-n)/40)),this._interval=4-r,this._colLoop++),0<Math.max(r,o)&&(this._interval=4-Math.max(r,o)),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,s>i.footerBounds().y?e.topRow()+i.fullItemCount()<e.rowCount()&&(e.setTopIndex(e.topIndex()+1),a=!0):s<i.gridBounds().y&&e.topRow()>i.fixedItemCount()&&(e.setTopIndex(e.topIndex()-1),a=!0)),a||this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,n>i.clientRect().right()?(e.setLeftCol(e.leftCol()+1),a=!0):n<i.gridBounds().x&&0<e.leftPos()&&(e.setLeftCol(e.leftCol()-1),a=!0)),a&&(t=e.pointToIndex(this._currx,this._curry,!1)).column&&(t.rowIndex=Math.min(Math.max(0,t.rowIndex,e.topIndex()),e.rowCount()-1),this.$_resizeTo(t))},$_getSelection:function(t){return t.selections().lastItem()},$_calcDirection:function(t){var e,i=this._grid,n=this.$_getSelection(i),s=this._startIndex;t=this._endIndex.assign(t),n.isSingleCell()?(t.rowIndex>s.rowIndex?e="down":t.rowIndex<s.rowIndex&&(0<=t.rowIndex||s.rowIndex>=i.topIndex())&&(e="up"),t.column=s.column):(t.rowIndex>this._selEnd.rowIndex?e="down":t.rowIndex<this._selStart.rowIndex&&(e="up"),t.column=this._selEnd.column),this._direction=e},$_rowIsVisible:function(t){var e=this._grid,i=e.lm(),n=e.topIndex(),s=t.rowIndex,r=i.fixedRowCount(),o=i.fullItemCount();if(r<=s){if(s<n+r)return!1;if(0==o&&s==n+r)return!0;if(n+r+o<=s)return!1}return!0},$_resizeTo:function(t){if(t=t.clone(),this.$_calcDirection(t),this._direction){var e=this._grid,i=e.layoutManager(),n=this.$_getSelection(e),s=n.isSingleCell(),r=this._rect,o=this._eltIndex;switch(this._feedback.setVisible(!0),this._direction){case"up":o.assign(this._selStart),o.rowIndex--,e.$_getSelectionRangeRect(i,L4.temp(o,this._endIndex),r,!1),s&&(o=e.focusedIndex(),this.$_rowIsVisible(o)?r.setBottom(i.dataCellRect(o).y):r.setBottom(i.gridBounds().bottom()));break;case"down":default:o.assign(this._selStart),o.rowIndex=n.endIndex().rowIndex+1,e.$_getSelectionRangeRect(i,L4.temp(o,this._endIndex),r,!1),s&&(o=e.focusedIndex(),this.$_rowIsVisible(o)?r.setTop(i.dataCellRect(o).bottom()):r.setTop(i.gridBounds().y))}this._direction||(r.width=0),this._feedback.refresh(this._direction,r)}else this._feedback.setVisible(!1)},$_canCopy:function(t,e,i){return!t.getReadOnlyAt(e,i)},$_copySingleCell:function(t,e,i,n){var s,r=t.autoFill().checkReadOnly(),o=i.column,a={row1:-1,row2:-1},h=i.getValue();switch(e){case"up":for(s=P1.temp(n),a.row2=s.rowIndex;s.rowIndex<i.rowIndex;)r&&!this.$_canCopy(t,s.getDataIndex(t),o)||s.setValue(h),a.row1=s.rowIndex,s.rowIndex++;break;case"down":default:for(s=P1.temp(i),a.row1=s.rowIndex+1;s.rowIndex<n.rowIndex;)s.rowIndex++,r&&!this.$_canCopy(t,s.getDataIndex(t),o)||s.setValue(h);a.row2=s.rowIndex}return t.setSelection(i,n,b2.BLOCK),a},$_getCopyVals:function(t,e,i,n,s){var r,o,a,h={};for(r=n.length;r--;)o=n[r],this.$_canCopy(e,i.dataIndex(),o)&&(h[a=t.getFieldName(o.dataIndex())]=s[a]);return h},$_copyRows:function(t,e,i,n){var s,r,o,a,h,l,u=t.autoFill().checkReadOnly(),d=this.$_getSelection(t).getBounds(),c=[],_=[],f=t.collectDataColumns(d.C1(),d.C2()),g=t.dataSource(),m={row1:-1,row2:-1},p=[];for(s=f.length;s--;)0<=(r=f[s].dataIndex())&&(r=g.getFieldName(r),p.indexOf(r)<0&&p.push(r));if("up"==e){for(o=n.rowIndex;o<d.R1();o++)0<=(a=t.getRow(o)).dataIndex()&&_.push(a);for(0<_.length&&(m.row2=_[0].index(),m.row1=_[_.length-1].index()),o=d.R1();o<=d.R2();o++)0<=(a=t.getRow(o)).dataIndex()&&c.push(a.getRowProps(p));for(o=_.length-1;0<=o;o-=c.length)for(s=0;s<c.length&&0<=o-s;s++)a=_[o-s],h=c[c.length-s-1],u?(l=this.$_getCopyVals(g,t,a,f,h),a.setRowProps(l)):a.setRowProps(h);i.rowIndex=d.R2(),t.setSelection(n,i,b2.BLOCK)}else{for(o=d.R2()+1;o<=n.rowIndex;o++)0<=(a=t.getRow(o)).dataIndex()&&_.push(a);for(0<_.length&&(m.row1=_[0].index(),m.row2=_[_.length-1].index()),o=d.R1();o<=d.R2()&&c.length<_.length;o++)0<=(a=t.getRow(o)).dataIndex()&&c.push(a.getRowProps(p));for(o=0;o<_.length;o+=c.length)for(s=0;s<c.length&&o+s<_.length;s++)a=_[o+s],h=c[s],u?(l=this.$_getCopyVals(g,t,a,f,h),a.setRowProps(l)):a.setRowProps(h);t.setSelection(i,n,b2.BLOCK)}return m}}),d3=I1("SelectRequest",R9,{init:function(t,e,i){this._super(e),this._manager=t,this._style=i},manager:function(){return this._manager},selectStyle:function(){return this._style}}),I17=I1("SelectTracker",i7,{init:function(t,e,i){this._super(t.cell().grid(),e),this._request=t,this._single=b2.isSingle(t.selectStyle()),this._extended=i},isStartWhenCreated:function(){var t=this._request.cell();return!(t instanceof O9||t instanceof b6||t instanceof O3||t instanceof j3)},_doStart:function(){},_doEnded:function(){var t=this._getItem();t&&this.grid().selections()._itemEnded(t)},_getItem:function(){return null},$_calcInnerIndex:function(t,e,i,n){if(t instanceof e0||t instanceof m6){var s=t.$_calcInnerIndex(this._grid,i,n);0<=s&&((e=e.clone()).rowIndex=s)}return e}}),c08=I1("BlockSelectTracker",I17,{init:function(t,e){this._super(t,"blockSelectTracker",e),this._item=null,this._timer=null,this._currx=NaN,this._curry=NaN,this._rowPrevLoop=0,this._rowLoop=0,this._colPrevLoop=0,this._colLoop=0,this._interval=0},_getItem:function(){return this._item},_doStart:function(t,e,i){this._super();var n,s,r=this._request.cell(),o=this._request.manager();return s=r.index().clone(),(r instanceof e0||r instanceof m6)&&(s.rowIndex+=r._innerIndex),o.setItemStyle(b2.BLOCK,!this._extended),this._extended?this._item=o.add(s,s,b2.BLOCK):o.isSingleCell()&&(n=o.getItem(0))instanceof C17&&n.contains(s)?this._item=n:(o.clear(),this._item=o.add(s,s,b2.BLOCK)),Boolean(this._item)},_doDrag:function(t,e){if(this._single)return!0;var i,n,s=this.grid(),r=s.layoutManager(),o=this._item;return!!o&&(this._currx=t=s.containerToGridX(t),this._curry=e=s.containerToGridY(e),e>r.footerBounds().y||e<r.gridBounds().y||t<r.gridBounds().x||t>r.clientRect().right()?this._startTimer():(this._stopTimer(),(i=this._findElementAt(t,e))&&((i=i.getParentAs(m4))?(n=i.index()).column&&0<=n.rowIndex&&(n=this.$_calcInnerIndex(i,n,t,e),o.resizeTo(n)):(n=s.pointToIndex(this._currx,this._curry,!1)).column&&0<=n.rowIndex&&(n.rowIndex=Math.min(Math.max(n.rowIndex,s.topIndex()),s.rowCount()-1),this._item.resizeTo(n)))),!0)},_doEnded:function(){this._stopTimer(),this._super()},_startTimer:function(){this._timer||(this._rowLoop=this._rowPrevLoop=this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this._timerHandler.bind(this),30),this._grid.selections().lock())},_stopTimer:function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections().unlock())},_timerHandler:function(){var t,e,i=this._grid,n=i.layoutManager(),s=this._currx,r=this._curry,o=0,a=0;r>n.footerBounds().y?(a=Math.max(0,Math.min(3,(r-n.footerBounds().y)/40)),this._interval=4-a,this._rowLoop++):r<n.gridBounds().y&&(a=Math.max(0,Math.min(3,(n.gridBounds().y-r)/40)),this._interval=4-a,this._rowLoop++),s>n.clientRect().right()?(o=Math.max(0,Math.min(3,(s-n.clientRect().right())/40)),this._interval=4-o,this._colLoop++):s<n.gridBounds().x&&(o=Math.max(0,Math.min(3,(n.gridBounds().x-s)/40)),this._interval=4-o,this._colLoop++),t=!1,0<Math.max(o,a)&&(this._interval=4-Math.max(o,a)),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,r>n.footerBounds().y?i.topRow()+n.fullItemCount()<i.rowCount()&&(i.setTopIndex(i.topIndex()+1),t=!0):r<n.gridBounds().y&&i.topRow()>n.fixedItemCount()&&(i.setTopIndex(i.topIndex()-1),t=!0)),t||this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,s>n.clientRect().right()?(i.setLeftCol(i.leftCol()+1),t=!0):s<n.gridBounds().x&&0<i.leftPos()&&(i.setLeftCol(i.leftCol()-1),t=!0)),t&&(e=i.pointToIndex(this._currx,this._curry,!1)).column&&(e.rowIndex=Math.min(Math.max(0,e.rowIndex,i.topIndex()),i.rowCount()-1),this._item.resizeTo(e))}}),O08=I1("RowsSelectTracker",I17,{init:function(t,e){this._super(t,"rowsSelectTracker",e),this._item=null,this._timer=null,this._currx=NaN,this._curry=NaN,this._prevLoop=0,this._loop=0,this._colPrevLoop=0,this._colLoop=0,this._interval=0},_getItem:function(){return this._item},_doStart:function(t,e,i){this._super();var n,s,r=this._request.cell(),o=this._request.manager();return s=r.index().clone(),r instanceof e0&&(s.rowIndex+=r._innerIndex),o.setItemStyle(b2.ROWS,!this._extended),this._extended?this._item=o.add(s,s,b2.ROWS,this._single):1==o.count()&&(n=o.getItem(0))instanceof w9&&n._single==this._single&&n.contains(s)?this._item=n:(o.clear(),this._item=o.add(s,s,b2.ROWS,this._single)),Boolean(this._item)},_doDrag:function(t,e){if(this._single)return!0;if(this._item){var i,n=this.grid(),s=n.layoutManager();return this._currx=t=n.containerToGridX(t),this._curry=e=n.containerToGridY(e),e>s.footerBounds().y||e<s.gridBounds().y||t<0||t>s.clientRect().right()?this._startTimer():(this._stopTimer(),(i=n.pointToIndex(t,e,!1)).getRow(n)&&this._item.resizeTo(i)),!0}return!1},_doEnded:function(){this._stopTimer(),this._super()},_startTimer:function(){this._timer||(this._loop=this._prevLoop=this._colLoop=this._colPrevLoop=0,this._interval=1,this._timer=setInterval(this._timerHandler.bind(this),30),this._grid.selections().lock())},_stopTimer:function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections().unlock())},_timerHandler:function(){var t,e,i=this._grid,n=this._currx,s=this._curry,r=i.layoutManager();s>r.footerBounds().y?(t=Math.max(0,Math.min(3,(s-r.footerBounds().y)/40)),this._interval=4-t,this._loop++):s<r.gridBounds().y&&(t=Math.max(0,Math.min(3,(r.gridBounds().y-s)/40)),this._interval=4-t,this._loop++),this._loop-this._prevLoop>=this._interval?(this._prevLoop=this._loop,s>r.footerBounds().y?i.setTopIndex(i.topIndex()+1):s<r.gridBounds().y&&i.setTopIndex(i.topIndex()-1),(e=i.pointToIndex(this._currx,this._curry,!1)).rowIndex=Math.min(Math.max(0,e.rowIndex,i.topIndex()),i.rowCount()-1),this._item.resizeTo(e)):(n>r.clientRect().right()?(t=Math.max(0,Math.min(3,(n-r.clientRect().right())/40)),this._interval=4-t,this._colLoop++):n<0&&(t=Math.max(0,Math.min(3,(r.gridBounds().x-n)/40)),this._interval=4-t,this._colLoop++),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,n>r.clientRect().right()?i.setLeftCol(i.leftCol()+1):n<r.gridBounds().x&&0<i.leftPos()&&i.setLeftCol(i.leftCol()-1),0<=(e=i.pointToIndex(this._currx,this._curry,!1)).rowIndex&&(e.rowIndex=Math.min(Math.max(0,e.rowIndex,i.topIndex()),i.rowCount()-1),this._item.resizeTo(e))))}}),j08=I1("ColumnsSelectTracker",I17,{init:function(t,e){this._super(t,"columnsSelectTracker",e),this._single=b2.isSingle(t.selectStyle()),this._item=null,this._timer=null,this._currx=NaN,this._curry=NaN,this._prevLoop=0,this._loop=0,this._rowPrevLoop=0,this._rowLoop=0,this._interval=0},_getItem:function(){return this._item},_doStart:function(t,e,i){this._super();var n,s=this._request.cell().index(),r=this._request.manager();return r.setItemStyle(b2.COLUMNS,!this._extended),this._extended?this._item=r.add(s,s,b2.COLUMNS):1==r.count()&&(n=r.getItem(0))instanceof E9&&n.contains(s)?this._item=n:(r.clear(),this._item=r.add(s,s,b2.COLUMNS)),Boolean(this._item)},_doDrag:function(t,e){if(this._single)return!0;if(this._item){var i=this.grid(),n=i.layoutManager();if(this._currx=t=i.containerToGridX(t),this._curry=e=i.containerToGridY(e),t<n.gridBounds().x||t>n.clientRect().right()||e>n.footerBounds().y||e<0)this._startTimer();else{this._stopTimer();var s=i.pointToIndex(t,e,!1);s.column&&this._item.resizeTo(s)}return!0}return!1},_doEnded:function(){this._stopTimer(),this._super()},_startTimer:function(){this._timer||(this._loop=this._prevLoop=this._rowLoop=this._rowPrevLoop=0,this._interval=1,this._timer=setInterval(this._timerHandler.bind(this),30),this._grid.selections().lock())},_stopTimer:function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections().unlock())},_timerHandler:function(){var t,e,i=this._grid,n=this._currx,s=this._curry,r=i.layoutManager();n>r.clientRect().right()?(e=Math.max(0,Math.min(3,(n-r.clientRect().right())/40)),this._interval=4-e,this._loop++):n<r.gridBounds().x&&(e=Math.max(0,Math.min(3,(r.gridBounds().x-n)/40)),this._interval=4-e,this._loop++),this._loop-this._prevLoop>=2*this._interval?(this._prevLoop=this._loop,n>r.clientRect().right()?i.setLeftCol(i.leftCol()+1):n<r.gridBounds().x&&0<i.leftPos()&&i.setLeftCol(i.leftCol()-1),(t=i.pointToIndex(this._currx,this._curry,!1)).column&&this._item.resizeTo(t)):(s>r.footerBounds().y?(e=Math.max(0,Math.min(3,(s-r.footerBounds().y)/40)),this._interval=4-e,this._rowLoop++):s<0&&(e=Math.max(0,Math.min(3,(r.gridBounds().y-s)/40)),this._interval=4-e,this._rowLoop++),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,s>r.footerBounds().y?i.setTopIndex(i.topIndex()+1):s<r.gridBounds().y&&i.setTopIndex(i.topIndex()-1),(t=i.pointToIndex(this._currx,this._curry,!1)).column&&this._item.resizeTo(t)))}}),J5=I1("SelectionItem",null,{init:function(t){this._super(),this._manager=t,this._grid=t.grid()},manager:function(){return this._manager},grid:function(){return this._grid},style:function(){y4()},isSingleCell:function(){return!1},getBounds:function(){return null},contains:function(t){return!1},intersects:function(t,e){return!1},containedInFixedColumns:function(t){return!1},containedInFixedRows:function(t){return!1},resizeTo:function(t){},getAnchor:function(t){return t},intersectsWith:function(t){return this.getBounds().intersectsWith(t.getBounds())},mergeWith:function(t){y4()},getData:function(t){y4()},getRows:function(t){var e,i,n=this.grid(),s=[],r=this.getBounds(),o=Math.min(r.R1(),r.R2()),a=Math.max(r.R1(),r.R2());for(e=o;e<=a;e++)(i=n.getRow(e))&&(t||0<=i.dataIndex()||i.isEditing())&&s.push(i);return s},getRowIndices:function(t){var e,i,n,s=this.getRows(t),r=[];for(e=0,i=s.length;e<i;e++)(n=s[e])&&r.push(n.index());return r},getDataIndices:function(t){var e,i,n,s=this.getRows(t);for(indices=[],e=0,i=s.length;e<i;e++)(n=s[e])&&(r=n.dataIndex(),(0<=r||t)&&indices.push(r));return indices},setValue:function(t){},_mergedSel:function(){return this.grid()._displayOptions.mergedSelection()},_resized:function(){this._manager&&this._manager._itemResized(this)},_getRoom:function(t,e){return t.stateFor(f4.MERGE_ROOMS).getRoomAtRow(e,!0)}},{$_index:new P1}),L7=I1("SelectionManager",a2,{init:function(t){this._super(),this._grid=t,this._items=[],this._locked=!1},itemStyle:u1(b2,b2.BLOCK),setItemStyle:function(t,e){e=!(0<arguments.length)||e,t!=this._itemStyle&&(this._itemStyle=t,e&&this.clear())},grid:function(){return this._grid},count:function(){return this._items.length},items:function(){return this._items.concat()},lastItem:function(){var t=this._items.length;return t?this._items[t-1]:null},isSingleCell:function(){return 1==this._items.length&&this._items[0].isSingleCell()},lock:function(){this._locked=!0},unlock:function(){this._locked=!1},getItem:function(t){return this._items[t]},indexOf:function(t){return this._items.indexOf(t)},add:function(t,e,i,n){if(this._locked)return null;if(i==b2.NONE)return this.clear(),null;var s=null;switch(i){case b2.COLUMNS:t.column&&(s=new E9(this,t.column,e?e.column:t.column));break;case b2.SINGLE_COLUMN:t.column&&(s=new E9(this,t.column,t.column));break;case b2.ROWS:s=new w9(this,t.rowIndex,e.rowIndex,n);break;case b2.SINGLE_ROW:s=new w9(this,t.rowIndex,t.rowIndex,!0);break;case b2.BLOCK:s=new C17(this,t,e);break;case b2.SINGLE:s=new C17(this,t,t)}return this._addItem(s)},remove:function(t){if(!this._locked){var e=parseInt(t);isNaN(e)&&(e=this._items.indexOf(t)),0<=e&&e<this._items.length&&(t=this._items[e],this._items.splice(e,1),this.fireEvent(L7.REMOVED,t),this.fireEvent(L7.CHANGED,t))}},clear:function(){this._locked||0<this._items.length&&(this._items.length=0,this.fireEvent(L7.CLEARED),this.fireEvent(L7.CHANGED))},contains:function(t){return 0<this._items.length&&this._items[0].contains(t)},containsItem:function(t){return!1},containsColumn:function(t){return!1},normalize:function(){},getFirstCell:function(){return 0<this._items.length?this._items[0].getBounds().firstCell():null},_addItem:function(t){return t&&this._items.indexOf(t)<0&&(this._items.push(t),this.fireEvent(L7.ADDED,t),this.fireEvent(L7.CHANGED,t)),t},_itemResized:function(t){this.fireEvent(L7.RESIZED,t),this.fireEvent(L7.CHANGED,t)},_itemEnded:function(t){this.fireEvent(L7.ENDED,t)}});L7.CHANGED="onSelectionManagerChanged",L7.ADDED="onSelectionManagerAdded",L7.REMOVED="onSelectionManagerRemoved",L7.CLEARED="onSelectionManagerCleared",L7.RESIZED="onSelectionManagerResized",L7.ENDED="onSelectionManagerEnded";var C17=I1("BlockSelection",J5,{init:function(t,e,i){this._super(t),this._startIndex=e.clone(),this._endIndex=i.clone(),this.$_fitMerged()},startIndex:function(){return this._startIndex},endIndex:function(){return this._endIndex},rowCount:function(){return Math.abs(this._startIndex.rowIndex-this._endIndex.rowIndex)+1},style:function(){return b2.BLOCK},isSingleCell:function(){return P1.areEqual(this._startIndex,this._endIndex)},getBounds:function(){var t,e,i=this._startIndex,n=this._endIndex,s=this.grid();return i.normalize(s),n.normalize(s),t=i.column?i.column.dataRoot():null,e=n.column?n.column.dataRoot():null,L4.createRange(i.rowIndex,t,n.rowIndex,e)},contains:function(t){return this.getBounds().containsIndex(t)},intersects:function(t,e){return this.getBounds().intersects(t,e)},containedInFixedColumns:function(t){return this._startIndex.column.root().displayIndex()<t||this._endIndex.column.root().displayIndex()<t},containedInFixedRows:function(t){return this._startIndex.rowIndex<t||this._endIndex.rowIndex<t},getAnchor:function(t){return(t=t||new P1).assign(this._endIndex),t},resizeTo:function(t){var e;this.grid().isValidCell(t)&&!P1.areEqual(t,this._endIndex)&&(this._mergedSel()?(e=this._endIndex.copyTo(J5.$_index),this._endIndex.assign(t),this.$_fitMerged(),P1.areEqual(e,this._endIndex)||this._resized()):(this._endIndex.assign(t),this._resized()))},mergeWith:function(t){},getData:function(t){if(0==(t=0<arguments.length?t:-1))return null;var e,i,n,s,r,o,a,h,l,u,d=this.grid(),c=d.collectDataColumns(this._startIndex.column,this._endIndex.column);if(!c||(e=c.length)<1)return null;for(i=Math.min(this._startIndex.rowIndex,this._endIndex.rowIndex),n=Math.max(this._startIndex.rowIndex,this._endIndex.rowIndex),s=[],r=i;r<=n;r++)if((o=d.getRow(r))&&0<=o.dataIndex()){for(a={},h=0;h<e;h++)(u=(l=c[h]).dataFieldName())&&(a[u]=o.getValue(l.dataIndex()));if(s.push(a),0<t&&s.length==t)break}return s},toString:function(){var t=Math.min(this._startIndex.rowIndex,this._endIndex.rowIndex),e=Math.max(this._startIndex.rowIndex,this._endIndex.rowIndex);return this._startIndex.column&&this._endIndex.column?"("+t+", "+this._startIndex.column.name()+") ~ ("+e+", "+this._endIndex.column.name()+")":""},$_fitMerged:function(){var t,e,i,n,s,r,o,a,h,l,u,c,_,f,g,m=this.grid(),p=this._startIndex,w=this._endIndex;if(this._mergedSel()&&(t=p&&p.column,e=w&&w.column,t&&e)){for(u=t.distance(),c=e.distance(),(r=t.root().displayIndex())>(o=e.root().displayIndex())&&(i=r,r=o,o=i,d=u,u=c,c=d),g=(h=p.rowIndex)>(l=w.rowIndex),n=r;n<=o;n++)if((i=0<=n?m.getVisibleColumn(n):null)instanceof t2&&i.canMerge())_=this._getRoom(i,p.rowIndex),f=this._getRoom(i,w.rowIndex),g?(_&&(h=Math.max(h,_.tailItem())),f&&(l=Math.min(l,f.headItem()))):(_&&(h=Math.min(h,_.headItem())),f&&(l=Math.max(l,f.tailItem())));else if(i instanceof O1)for(s=i.visibleCount();s--;)(a=i.getVisibleItem(s))instanceof t2&&a.canMerge()&&a.distance()>=u&&a.distance()<=c&&(_=this._getRoom(a,p.rowIndex),f=this._getRoom(a,w.rowIndex),g?(_&&(h=Math.max(h,_.tailItem())),f&&(l=Math.min(l,f.headItem()))):(_&&(h=Math.min(h,_.headItem())),f&&(l=Math.max(l,f.tailItem()))));p.rowIndex=h,w.rowIndex=l}}}),w9=I1("RowSelection",J5,{init:function(t,e,i,n){this._super(t),this._single=n,this._startRow=Math.min(e,i),this._endRow=Math.max(e,i),this._mergedSel()&&this.$_fitMerged()},startRow:function(){return this._startRow},endRow:function(){return this._endRow},topRow:function(){return Math.min(this._startRow,this._endRow)},bottomRow:function(){return Math.max(this._startRow,this._endRow)},startIndex:function(){return P1.create(this._startRow,this.grid().getFirstColumn())},endIndex:function(){return P1.create(this._endRow,this.grid().getLastColumn())},style:function(){return b2.ROWS},getBounds:function(){var t=this.grid(),e=t.rowCount();return this._startRow=Math.max(0,Math.min(e-1,this._startRow)),this._endRow=Math.max(0,Math.min(e-1,this._endRow)),this._startRow<=this._endRow?L4.createRange(this._startRow,t.getVisibleColumn(0),this._endRow,t.getVisibleColumn(t.visibleColumnCount()-1)):L4.createRange(this._endRow,t.getVisibleColumn(0),this._startRow,t.getVisibleColumn(t.visibleColumnCount()-1))},contains:function(t){var e=Math.min(this._startRow,this._endRow),i=Math.max(this._startRow,this._endRow);return t.rowIndex>=e&&t.rowIndex<=i},intersects:function(t,e){var i=Math.min(t.rowIndex,e.rowIndex),n=Math.max(t.rowIndex,e.rowIndex),s=Math.min(this._startRow,this._endRow);return i<=Math.max(this._startRow,this._endRow)&&s<=n},containedInFixedColumns:function(t){return!0},containedInFixedRows:function(t){return this._startRow<t||this._endRow<t},getAnchor:function(t){return(t=t||new P1).rowIndex=this._endRow,t},resizeTo:function(t){var e,i=Math.max(0,t.rowIndex);i!=this._endRow&&(e=this._endRow,this._endRow=Math.max(0,Math.min(this.grid().rowCount()-1,i)),this._mergedSel()?(this.$_fitMerged(),this._endRow!=e&&this._resized()):this._resized())},mergeWith:function(t){},getData:function(t){if(0==(t=0<arguments.length?t:-1))return null;var e,i,n,s,r,o,a,h,l,u,d=this.grid(),c=d.collectDataColumns(d.getVisibleColumn(0),d.getVisibleColumn(d.visibleColumnCount()-1));if(!c)return null;if((e=c.length)<1)return null;for(i=Math.max(0,Math.min(this._startRow,this._endRow)),n=Math.min(this.grid().rowCount()-1,Math.max(this._startRow,this._endRow)),s=[],r=i;r<=n;r++)if((o=d.getRow(r))&&0<=o.dataIndex()){for(a={},h=0;h<e;h++)(u=(l=c[h]).dataFieldName())&&(a[u]=o.getValue(l.dataIndex()));if(s.push(a),0<t&&s.length==t)break}return s},toString:function(){return"("+Math.max(0,Math.min(this._startRow,this._endRow))+" ~ "+Math.min(this.grid().rowCount()-1,Math.max(this._startRow,this._endRow))+")"},$_fitMerged:function(){if(!this._single&&this._mergedSel()){var t,e,i,n,s,r,o,a,h,l,u=this.grid(),d=this._startRow,c=this._endRow;for(l=(r=d)>(o=c),t=0,i=u.visibleColumnCount();t<i;t++)if((n=u.getVisibleColumn(t))instanceof t2&&n.canMerge())a=this._getRoom(n,d),h=this._getRoom(n,c),l?(a&&(r=Math.max(r,a.tailItem())),h&&(o=Math.min(o,h.headItem()))):(a&&(r=Math.min(r,a.headItem())),h&&(o=Math.max(o,h.tailItem())));else if(n instanceof O1)for(e=n.visibleCount();e--;)(s=n.getVisibleItem(e))instanceof t2&&s.canMerge()&&(a=this._getRoom(s,d),h=this._getRoom(s,c),l?(a&&(r=Math.max(r,a.tailItem())),h&&(o=Math.min(o,h.headItem()))):(a&&(r=Math.min(r,a.headItem())),h&&(o=Math.max(o,h.tailItem()))));this._startRow=r,this._endRow=o}}}),E9=I1("ColumnSelection",J5,{init:function(t,e,i){this._super(t),k4.compareLoc(e,i)<=0?(this._startColumn=e,this._endColumn=i):(this._startColumn=i,this._endColumn=e)},startColumn:function(){return this._startColumn},endColumn:function(){return this._endColumn},leftColumn:function(){return this._startColumn.distance()<=this._endColumn.distance()?this._startColumn:this._endColumn},rightColumn:function(){return this._startColumn.distance()>this._endColumn.distance()?this._startColumn:this._endColumn},style:function(){return b2.COLUMNS},getBounds:function(){return this._startColumn.distance()<=this._endColumn.distance()?L4.createRange(0,this._startColumn,this._startColumn.grid().rowCount()-1,this._endColumn):L4.createRange(0,this._endColumn,this._endColumn.grid().rowCount()-1,this._startColumn)},contains:function(t){var e=t.column;return this._startColumn.distance()<=this._endColumn.distance()?0<=I0(e,this._startColumn)&&I0(e,this._endColumn)<=0:0<=I0(e,this._endColumn)&&I0(e,this._startColumn)<=0},intersects:function(t,e){var i,n=t.column,s=e.column,r=this._startColumn,o=this._endColumn;return 0<I0(n,s)&&(i=n,n=s,s=i),0<I0(r,o)&&(i=r,r=o,o=i),I0(r,s)<=0&&I0(n,o)<=0},containedInFixedColumns:function(t){return this._startColumn.root().displayIndex()<t||this._endColumn.root().displayIndex()<t},containedInFixedRows:function(t){return!0},getAnchor:function(t){return(t=t||new P1).column=this._endColumn,t},resizeTo:function(t){t.column!==this._endColumn&&(this._endColumn=t.column,this._resized())},mergeWith:function(t){},getData:function(t){if(0==(t=0<arguments.length?t:-1))return null;var e,i,n,s,r,o,a,h,l=this.grid(),u=l.collectDataColumns(this._startColumn,this._endColumn);if(!u)return null;for(e=l.rowCount(),rows=[],i=0;i<e;i++)if((n=l.getRow(i))&&0<=n.dataIndex()){for(s={},r=0,o=u.length;r<o;r++)(h=(a=u[r]).dataFieldName())&&(s[h]=n.getValue(a.dataIndex()));if(rows.push(s),0<t&&rows.length==t)break}return rows},toString:function(){return"("+this._startColumn.name()+" ~ "+this._endColumn.name()+")"}}),K9=I1("SelectionView",D4,{init:function(t){this._super(t,"selectionView"),this._item=null,this._background=K9.$$_defBackground,this._border=K9.$$_defBorder},background:null,border:null,setBackground:function(t){t!==this._background&&(this._background=t,this.invalidate())},setBorder:function(t){t!=this._border&&(this._border=t,this.invalidate())},updateElement:function(t,e){this._item=t,this.setBackground(e.background()),this.setBorder(e.border())},_doDraw:function(t){if(0<this.width()&&0<this.height()){var e=this.container().gridView(),i=this.$_isTracking(e)?null:this._border,n=i?i.width():0,s=B1(n/2);n=i?B1((n+1)/2):0,t.clipRectEx(this.$_calcClipRect(e)),t.drawBoundsI(this._borderOnly?null:this._background,i,s,s,this.width()-n,this.height()-n)}},_doDrawHtml:function(t){if(0<this.width()&&0<this.height()){var e=this.container().gridView(),i=this.$_isTracking(e)?null:this._border,n=this._borderOnly?null:this._background;this._css.clip=w1.getClipRect(this.$_calcClipRect(e)),c4?this.$_setCssFill(n):this._css.background=n?n.css():"",this._css.border=i?i.css():"none"}},$_isTracking:function(t){return t.selections().lastItem()===this._item&&t.activeTool().dragTracker()instanceof I17},$_calcClipRect:function(t){var e=t.layoutManager(),i=e.gridBounds(),n=this._item,s=e.fixedColCount();return 0<s&&!n.containedInFixedColumns(s)&&i.setLeft(e.fixedBounds().right()),0<(s=e.fixedRowCount())&&!n.containedInFixedRows(s)&&i.setTop(e.bodyBounds().y+e.fixedHeight()),t._selectionLayer.translateBy(this,i)}});K9.$$_defBackground=new U1(790532351),K9.$$_defBorder=new Z1(2854129919,1);var k08=I1("ClipboardData",null,{init:function(){this._super()},lastColumn:function(){y4()},getText:function(t,e,i){y4()},getCellText:function(t,e,i){y4()},getRows:function(t,e,i){y4()},getCell:function(t,e,i){y4()}}),k67=I1("ClipboardSource",null,{init:function(t){this._super(),this._lines=[],this._colCount=0,this.$_parse(t)},rowCount:function(){return this._lines.length},colCount:function(){return this._colCount},isEmpty:function(){return 0==this._lines.length||0==this._colCount},isSingle:function(){return 1==this._lines.length&&1==this._colCount},get:function(t){return this._lines[t]},$_parse:function(t){for(var e,i,n,s=this._lines,r=[],o=t.length,a=0,h=0,l=!1;h<o;)e=t.charAt(h),l?'"'==e&&(l=!1):'"'==e?l=!0:"\t"==e?(n=t.substring(a,h),i&&(0<h&&'"'==t.charAt(h-1)&&(n=n.substring(1,n.length-1)),i=!1),r.push(n),a=h+1):"\r"==e&&h+1<o&&"\n"==t.charAt(h+1)?(n=t.substring(a,h),i&&(0<h&&'"'==t.charAt(h-1)&&(n=n.substring(1,n.length-1)),i=!1),r.push(n),s.push(r),r=[],a=++h+1):"\n"!=e&&"\r"!=e||(n=t.substring(a,h),i&&(0<h&&'"'==t.charAt(h-1)&&(n=n.substring(1,n.length-1)),i=!1),r.push(n),s.push(r),r=[],a=h+1),h++;for(a<o&&(n=t.substring(a,o),r.push(n),s.push(r)),h=s.length-1;0<=h;h--)for(r=s[h],this._colCount=Math.max(this._colCount,r.length),a=r.length-1;0<=a;a--)(n=r[a])&&1<(o=n.length)&&'"'==n.charAt(0)&&'"'==n.charAt(o-1)&&(r[a]=n.substring(1,o-1))}}),L47=I1("DefaultClipboardData",k08,{init:function(){this._super(),this._columns=null},lastColumn:function(){return this._columns?this._columns[this._columns.length-1]:null},$_getText:function(t,e,i,n){var s="";return e&&!e._blankWhenCopy&&(e instanceof L2?s=t.getData(i.index(),e,n):e instanceof Q7?s=e.getValue(i):e instanceof h7?s=e.getValue(i):e instanceof D6&&(s=e.text())),s},getText:function(t,e,i){var n,s,r,o,a,h,l,u,d=t.grid(),c=this.$_rangeToCells(t,null,e),_=[];for(this._calcedRuntime,n=e.R1();n<=e.R2();n++)if(0<=(s=d.getRow(n)).dataIndex()||T1.isInserting(s.rowState()))for(r=0;r<c.length;r++){for(o=c[r],a=[],h=0;h<o.length;h++)l=this.$_getText(t,o[h],s,i),a.push(l);u=a.join("\t")+"\r\n",_.push(u)}return _.join("")},getCellText:function(t,e,i){return this.$_getText(t,e.column,t.grid().getRow(e.rowIndex),i)},getRows:function(t,e,i){if(!e)return null;var n=new k67(e);if(n.isEmpty())return null;if(n.isSingle())return n.get(0)[0];for(var s,r,o,a,h,l,u,d=t.getDataRoots(),c=new P1(i.rowIndex,i.column.dataRoot()),_=new P1(i.rowIndex,d[d.length-1]),f=L4.create(c,_),g=this.$_rangeToCells(t,n,f),m=[],p=0,w=n.rowCount();p<w;){for((s={}).columns=[],s.values=[],r=0;r<g.length&&p<w;r++,p++)for(h=g[r],a=n.get(p),s.columns.push(h),s.values.push(u=[]),l=Math.min(a.length,h.length),o=0;o<l;o++)h[o]?u.push(a[o]):u.push("");m.push(s)}return m},getCell:function(t,e,i){if(e){var n=new k67(e);return n.isEmpty()?null:n.get(0)[0]}return null},setValue:function(t,e,i,n){var s,r,o,a,h,l,u=t.grid(),d=this.$_rangeToCells(t,null,e);for(s=e.R1();s<=e.R2();s++)if(0<=(r=u.getRow(s)).dataIndex()||T1.isInserting(r.rowState()))for(o=0;o<d.length;o++)for(a=d[o],h=0;h<a.length;h++)(l=a[h])instanceof L2&&(!n||u.$_isErasable(s,l))&&u.setValueAt(s,l,i)},$_rangeToCells:function(t,e,i){i.normalizeData();var n,s,r,o,a,h,l,u,d=i.C1(),c=i.C2(),_=[],f=t.getDataRoots(),g=this._columns=[],m=f.indexOf(d),p=f.indexOf(c);if(m<0)throw d.name+" is not data root column.";if(p<0)throw c.name+" is not data root column.";for(s=m;s<=p;s++)g.push(f[s]);for(a=g.length,s=h=0;s<g.length;s++)if(h+=this.$_calcWidth(g[s]),e&&h>=e.colCount()){h=Math.min(h,e.colCount()),a=s+1,g.length=a;break}for(l=1,s=u=0;s<a;s++)r=g[s],l=Math.max(l,this.$_calcHeight(r,h-u)),u+=r instanceof O1?r.$_dataWidth:1;for(n=0;n<l;n++)_.push([]);for(n=0;n<l;n++)for(o=0;o<h;o++)_[n].push(null);for(s=u=0;s<a;s++)r=g[s],this.$_setFields(r,_,u,0),u+=r instanceof O1?r.$_dataWidth:1;return _},$_calcHeight:function(t,e){if(e<1)return 0;var i,n,s,r=1,o=Q2(t,O1);if(o&&0<(n=o.count())){if(o.vertical())for(i=r=0;i<n;i++)r+=this.$_calcHeight(o.getItem(i),e);else for(i=0;i<n&&0<e;i++)s=o.getItem(i),r=Math.max(r,this.$_calcHeight(s,e)),e-=s instanceof O1?s.$_dataWidth:1;o.$_dataHeight=r}else o&&(o.$_dataHeight=1);return r},$_calcWidth:function(t){var e,i,n=1,s=Q2(t,O1);if(s&&0<(i=s.count())){if(s.horizontal())for(e=n=0;e<i;e++)n+=this.$_calcWidth(s.getItem(e));else for(e=0;e<i;e++)n=Math.max(n,this.$_calcWidth(s.getItem(e)));s.$_dataWidth=n}else s&&(s.$_dataWidth=1);return n},$_setFields:function(t,e,i,n){var s,r,o,a,h=Q2(t,O1);if(h)if(h.vertical())for(s=n,o=0;o<h.count();o++)a=h.getItem(o),this.$_setFields(a,e,i,s),s+=a instanceof O1?a.$_dataHeight:1;else for(r=i,o=0;o<h.count();o++)a=h.getItem(o),this.$_setFields(a,e,r,n),r+=a instanceof O1?a.$_dataWidth:1;else e[n].length>i&&(e[n][i]=t instanceof t2?t:null)}}),U08=I1("ClipboardItem",g2,{init:function(){this._super(),this._dataSource=null,this._values=null},setValues:function(t){this._values=t},id:function(){return NaN},index:function(){return-1},parent:function(){return null},root:function(){return this},childIndex:function(){return-1},level:function(){return 1},leaf:function(){return!0},isLeaf:function(){return!0},visible:function(){return!0},isVisible:function(){return!0},provider:function(){return null},dataSource:function(){return this._dataSource},setDataSource:function(t){this._dataSource=t},dataRow:function(){return-1},rowState:function(){return j1.NONE},itemState:function(){return T1.NORMAL},checked:function(){return!1},isChecked:function(){return!1},setChecked:function(t){},checkable:function(){return!0},isCheckable:function(){return!0},setCheckable:function(t){},isEditable:function(){return!1},readOnly:function(){return!1},isReadOnly:function(){return!1},setReadOnly:function(t){},resizable:function(){return!1},isResizable:function(){return!1},getRowData:function(){return null},getRowObject:function(){return null},canEdit:function(){return!1},makeVisible:function(){},getValue:function(t){return this._values[t]}}),d08=I1("ClipboardIndex",P1,{init:function(t){this._super(),this._row=t},getRow:function(t){return this._row}}),Y08=I1("ClipboardManager",null,{init:function(t){this._super(),this._grid=t,this._data=new L47,this._appendingItem=new U08,this._appendingIndex=new d08(this._appendingItem)},grid:function(){return this._grid},dataSource:function(){return this._dataSource},copyEmptyToClipboard:function(){return""},copyToClipboard:function(t){return this._data.getText(this,t,!0)},copyCellToClipboard:function(t){return this._data.getCellText(this,t,!0)},getPasteRows:function(t,e){if(e)return this._data.getRows(this,e,t)},pasteFromClipboard:function(t,e,i,n){var s=t.clone();if(this._dataLock=n,(t=this.$_checkIndex(t))&&this._grid.isValidCell(t)){if(!i&&e&&(i=this._data.getRows(this,e,t)),i)if("string"==typeof i)this.$_pasteSingleCell(t,i);else if(1==i.length)this.$_pasteSingleLine(t,i[0],!0);else if(1<i.length){this._grid.dataSource().beginActions();try{this.$_pasteMultiLines(t,i,!0)}finally{this._grid.dataSource().endActions()}}P1.areEqual(t,s)||this._grid.setFocusedIndex(s,!1,!1)}},pasteCellFromClipboard:function(t,e){if((t=this.$_checkIndex(t))&&this._grid.isValidCell(t)&&e){var i=this._data.getCell(this,e,t);this.$_pasteSingleCell(t,i)}},getDataRoots:function(){return this._grid.getDataRootColumns()},getData:function(t,e,i){var n,s,r,o,a,h,l=this._grid,u=l.getRow(t);if(!u||!(T1.isInserting(u.rowState())||0<=u.dataIndex()))return"";if(e&&null!=(n=l.dataSource().getField(e.dataIndex()))){if(o=u.getValue(e.dataIndex()),i)if(a=this._grid.editOptions(),h=e.copyCallback())s=h(u,n,o);else if(h=a.copyCallback())s=h(u,e,n,o);else switch(n.dataType()){case a1.DATETIME:s=o?(r=a.$_getDateWriter(e))?r.getText(o):o:"";break;case a1.BOOLEAN:s=void 0!==o?(r=a.$_getBoolWriter(e))?r.formatValue(o):o:"";break;case a1.NUMBER:s=void 0===o||isNaN(o)?"":(r=a.$_getNumberWriter(e))?r.format(o):o;break;case a1.OBJECT:s=I4(o)?JSON.stringify(o):o;break;default:s=o}else switch(n.dataType()){case a1.DATETIME:s=o||"";break;case a1.BOOLEAN:s=void 0!==o?o:"";break;case a1.NUMBER:s=void 0===o||isNaN(o)?"":o;break;default:s=o}return(s=s?String(s):s)&&(0<=s.indexOf("\n")||0<=s.indexOf("\r\n"))&&(s='"'+s+'"'),s}return""},$_checkIndex:function(t){if(t&&(t.normalize(this._grid),this._grid.isValidCell(t)&&this._grid.editOptions().selectionBasePaste()&&0<this._grid.selections().count())){var e=this._grid.selections().getItem(0).getBounds().firstCell();t.column=e.column,t.rowIndex=e.rowIndex}return t},$_createDate:function(){return new L47},$_readValue:function(t,e,i){var n=c2;switch(t.getField(e.dataIndex()).dataType){case a1.NUMBER:n=Number(i);break;case a1.DATETIME:n=new Date(i);break;case a1.BOOLEAN:n=Boolean(i);break;default:n=i}return n},$_convertText:function(t,e,i,n,s,r){var o,a,h,l,u,d,c,_=s.dataIndex(),f=t.getField(_);if(o=s.pasteCallback())a=o(n,f,r);else if(o=i.pasteCallback())a=o(n,s,f,r);else switch(f.dataType()){case a1.NUMBER:a=NaN,r&&((h=i.pasteNumberCharExp())&&(r=r.replace(h,"")),a=f.readValue(r));break;case a1.DATETIME:if(a=null,l=i.dateReaders(),r&&l)for(u=0;u<l.length&&!(a=l[u].toDate(r));u++);null===a&&(a=new Date(r),isNaN(a.getTime())&&(a=null)),null===a&&(a=f.readValue(r));break;case a1.BOOLEAN:a=void 0,d=i.boolReader(),r&&d&&(a=d.toBoolStrict(r)),void 0===a&&(a=f.readValue(r));break;default:a=r=String(r)}return void 0!==a&&a&&i._maskWhenPaste&&(c=e.delegate().getCellEditor(P1.temp(n.index(),s))).maskable()&&(a=c.seiveText(a)),a},$_removeChars:function(t,e){if(e)for(;;){var i=t.replace(e,"");if(i.length==t.length)break;t=i}return t},$_isPastable:function(t,e,i,n){var s=n instanceof L2?n:null,r=!e._checkReadOnlyWhenPaste&&s||!t.getReadOnlyAt(i,n,void 0,void 0,!0);return r&&s&&s._valueType==a1.OBJECT&&(r=!!s._pasteCallback),r},$_pasteSingleCell:function(t,e){var i,n,s,r,o,a,h=this._grid,l=h.editOptions(),u=h.dataSource(),d=t.dataColumn(),c=t.getRow(h);if(e&&u&&this.$_isPastable(h,l,c.index(),d)){if(e.lastIndexOf("\r\n")==e.length-1&&(e=e.substr(0,e.length-2)),e.lastIndexOf("\n")==e.length-1&&(e=e.substr(0,e.length-1)),i=this.$_convertText(u,h,l,c,d,e),h.isRowEditing()||!l.updateByCell()&&l.startEditWhenPaste()&&h.edit()||l.pasteCellEvents()){n=(c=t.getRow(h)).getValue(t.dataField()),h.setCellUpdateEventLock(l.noEditEventWhenPaste());try{c.setValue(d.dataIndex(),i)}finally{h.setCellUpdateEventLock(!1)}h.validateCellCommit(t,c.getValue(t.dataField())),h.$_editRowPasted(c,[t.dataField()],[n],[i]),h.$_pasted(c,0,0),h.refreshView()}else r=h.validationManager(),o=l.forceRowValidationWhenPaste()&&h.validationManager().hasRowValidation(),a=l.forceColumnValidationWhenPaste(),(s=o?c.getRowData():[])[d.dataIndex()]=i,this._appendingItem.setValues(s),o&&h.validationManager().validateRow(this._appendingItem,!1,!0),a&&(this._appendingIndex.column=d,r.validateCell(this._appendingIndex,!1)),h.updatePastedCell(c,d.dataIndex(),i),h.$_pasted(c,1,0);h.selections().clear(),h.selections().add(t,new P1(t.rowIndex,t.column),b2.BLOCK)}},$_pasteSingleLine:function(t,e){var i,n,s,r,o,a,h,l,u,d,c,_,f,g,m,p,w,v=this._grid,C=v.dataSource(),I=v.rowSource(),R=v.editOptions(),y=0;if(C&&I){if(s=t.getRow(v),l=Math.min(e.columns.length,e.values.length),v.isRowEditing()||R.startEditWhenPaste()&&v.edit()||R.pasteCellEvents()){for(_=[],f=[],g=t.column,s=t.getRow(v),h=[],u=0;u<l;u++)for(a=e.columns[u],o=e.values[u],d=0;d<o.length;d++)if(n=a[d],this.$_isPastable(v,R,t.rowIndex,n)){r=o[d],c=n.dataIndex(),f.push(s.getValue(c)),i=this.$_convertText(C,v,R,s,n,r),v.setCellUpdateEventLock(R.noEditEventWhenPaste());try{s.setValue(c,i)}finally{v.setCellUpdateEventLock(!1)}t.column=n,v.validateCellCommit(t,s.getValue(c)),_.push(c),h.push(i),y++}0<y&&(v.$_editRowPasted(s,_,f,h),v.$_pasted(s,0,0),t.column=g,v.refreshView())}else{for(m=v.validationManager(),p=R.forceRowValidationWhenPaste()&&m.hasRowValidation(),w=R.forceColumnValidationWhenPaste(),_=[],s=t.getRow(v),h=p?s.getRowData():[],u=0;u<l;u++)for(a=e.columns[u],o=e.values[u],d=0;d<o.length;d++)n=a[d],this.$_isPastable(v,R,t.rowIndex,n)&&(c=n.dataIndex(),i=this.$_convertText(C,v,R,s,n,o[d]),h[c]=i,_.push(c),y++);if(0<y){if(this._appendingItem.setValues(h),p&&m.validateRow(this._appendingItem,!1,!0),w)for(d=0;d<h.length;d++)this._appendingIndex.column=a[d],m.validateCell(this._appendingIndex,!1);if(R.pasteByCell())for(d=0;d<_.length;d++)c=_[d],v.updatePastedCell(s,c,h[c]);else v.updatePastedRow(s,h,!0);v.$_pasted(s,1,0)}}0<y&&(v.selections().clear(),v.selections().add(t,new P1(t.rowIndex,this._data.lastColumn()),b2.BLOCK))}},$_pasteMultiLines:function(t,e){var i=this._grid,n=i.dataSource();if(n){var s,r,o,a,h,l,u,d,c,_,f,g,m,p,w,v,C,I=e.length,R=t.rowIndex,y=i.editOptions(),x=y.pasteByCell(),E=n.fieldCount(),b=i.getDataColumns(!1),S=b.length,T=i.validationManager(),D=y.forceRowValidationWhenPaste()&&T.hasRowValidation(),k=y.forceColumnValidationWhenPaste(),A=y.fillColumnDefaultsWhenPaste(),$=y.fillFieldDefaultsWhenPaste(),V=this._appendingItem,L=this._appendingIndex,B=0,O=0,N=y.pasteCellEvents();for(y.commitWhenPaste()&&i.commit(!1)||i.cancel(),p=i.rowCount(),V.setDataSource(n),s=0;s<I&&R<p;s++)try{if(u=l=i.getRow(R),l.rowState()==T1.APPENDING)break;for(;l&&l.dataIndex()<0;)R++,(l=i.getRow(R))&&(u=l);if(null==l)break;for(f=[],g=[],d=e[s],c=D?l.getRowData():[],o=Math.min(d.columns.length,d.values.length),r=0;r<o;r++)for(v=d.columns[r],w=d.values[r],a=0;a<w.length;a++)m=v[a],this.$_isPastable(i,y,R,m)&&(h=this.$_convertText(n,i,y,l,m,w[a]),_=m.dataIndex(),g.push(l.getValue(_)),c[_]=h,f.push(_));try{if(V.setValues(c),D&&T.validateRow(V,!1,!0),k)for(r=0;r<o;r++)for(v=d.columns[r],a=0;a<w.length;a++)L.column=v[a],T.validateCell(L,!1);if(x)for(a=0;a<f.length;a++)_=f[a],i.updatePastedCell(l,_,c[_]);else i.updatePastedRow(l,c,!0),N&&i.$_editRowPasted(l,f,g,w);B++}catch(t){if(y.stopPasteOnError())throw t}R++}catch(e){throw R=Math.max(t.rowIndex,R-1),i.setFocusedIndex(t,!1,!1),i.selections().clear(),i.selections().add(t,new P1(R,this._data.lastColumn()),b2.BLOCK),e}if(s<I&&y.enableAppendWhenPaste()){for(;s<I;s++){d=e[s],o=Math.min(d.columns.length,d.values.length),c=[],f=[],C=[];try{for(r=0;r<o;r++){for(v=d.columns[r],w=d.values[r],a=0;a<w.length;a++)m=v[a],u&&this.$_isPastable(i,y,u.index(),m)?(_=m.dataIndex(),h=this.$_convertText(n,i,y,u,m,w[a]),c[_]=h,C[_]=C[_]&&!0):m&&(C[m.dataIndex()]=!1);if(A)for(a=0;a<S;a++)m=b[a],v.indexOf(m)<0&&void 0!==m.defaultValue()&&C[_=m.dataIndex()]&&void 0===c[_]&&(c[_]=m.defaultValue());if($)for(a=0;a<E;a++)void 0===c[a]&&C[_=n.getField(a)]&&void 0!==_.defaultValue()&&(c[a]=_.defaultValue())}try{if(V.setValues(c),D&&T.validateRow(V,!0,!0),k)for(a=0;a<S;a++)m=b[a],this._appendingIndex.column=m,T.validateCell(this._appendingIndex,!0);i.appendPastedRow(c),O++}catch(t){if(y.stopPasteOnError())throw t}}catch(e){throw R=Math.max(t.rowIndex,i.rowCount()-1),i.setFocusedIndex(t,!1,!1),i.selections().clear(),i.selections().add(t,new P1(R,this._data.lastColumn()),b2.BLOCK),e}}R=this._dataLock?-1:i.rowCount()}this._dataLock&&(n.endUpdate(),this._dataLock=!1,R<0&&(R=i.rowCount())),i.setFocusedIndex(t,!1,!1),i.selections().clear(),i.selections().add(t,new P1(R-1,this._data.lastColumn()),b2.BLOCK),i.$_pasted(t.getRow(i),B,O)}}}),t08=I1("MobileSelectionTool",o67,{init:function(t){this._super(t,"mobileSelectionTool"),this._editCommandBar=new w08(this._grid,[{name:"Submit",callback:function(t,e){t.commit()}},{name:"Cancel",callback:function(t,e){t.cancel()}}]),this._swipeTimer=null,this._swipeDistance=0,this._swipeDuration=0,this._swipeStarted=null,this._swipePrev=void 0,this._swipeAmount=0,this._tapX=this._tapY=NaN,this._tapTracker=null;var e=this._touchManager=new e28(t);e.setTouchHandler(function(t,e){return this.onTouch(t,e)}.bind(this)),e.setTapHandler(function(t,e){return this.onTap(t,e)}.bind(this)),e.setDoubleTapHandler(function(t,e){return this.onDoubleTap(t,e)}.bind(this)),e.setLongTapHandler(function(t,e){return this.onLongTap(t,e)}.bind(this)),e.setDragStartHandler(function(t,e,i,n){return this.onDragStart(t,e,i,n)}.bind(this)),e.setDragHandler(function(t,e,i,n){return this.onDrag(t,e,i,n)}.bind(this)),e.setDragEndHandler(function(t,e){return this.onDragEnd(t,e)}.bind(this)),e.setSwipeHandler(function(t,e,i){return this.onSwipe(t,e,i)}.bind(this))},touchManager:function(){return this._touchManager},_doKeyDown:function(t,e,i,n){var s=this.grid(),r=(s.lm(),s.editOptions()),o=this.focused().clone();return!s._fireKeyDown(t,e,i,n)||(t==i1.ENTER?this._doEnter(s,r,o,e,i):void 0)},_doMouseDown:function(t,e,i,n){},_doMouseMove:function(t,e){},_doMouseUp:function(t,e){},_doLayoutChanged:function(t,e){},_doFocusedIndexChanging:function(t){},_doFocusedIndexChanged:function(t,e){this._grid.hideEditor()},_doDblClick:function(t,e){this.onDoubleTap(t,e)},editorActivated:function(t){this._resetFocusView(),this._grid._layoutSelectionViews(),!t&&this._grid.isRowEditing()&&this._showEditCommander(this._grid.focusedRow()),this._grid.invalidate()},rowEditStarted:function(t){t&&!this._grid.isEditing()&&this._showEditCommander(t)},rowEditEnded:function(t,e){this._hideEditCommander()},_resetFocusView:function(){var t,e,i=this._grid,n=i._rootElement,s=this.focused();!i.isEditing()&&i.displayOptions().focusVisible()&&i.isValidCell(s)&&(t=i.getFocusedCellView())&&0<(e=t.boundsBy(n)).width&&0<e.height?(i._container.$_rich&&(e.x++,e.y++),this._focusView.setRect(e),this._focusView.setEditing(i.isEditing(),t.getButtonWidth?t.getButtonWidth():0),this._focusView.setVisible(!0)):this._focusView.setVisible(!1)},_stopTapTracker:function(t){if(this._tapTracker)try{t?this._tapTracker.drop(x,y):this._tapTracker.cancel()}finally{this._tapTracker=null}},_showEditCommander:function(t){var e=this._editCommandBar,i=new g1;grid=this._grid,lm=grid.lm(),view=grid.bodyView().findRowView(t.index()),view?(i.y=view.height(),i=view.boundsByContainer(i)):i.y=grid.height()-e.offsetHeight,i.x=lm.checkBarBounds().right(),i.width=Math.min(grid.width()-i.x,lm.bodyBounds().width),i=grid.container().toScreen(i),e.show(i.x,i.y+1,i.width,!1)},_hideEditCommander:function(){this._editCommandBar.hide()},onTouch:function(t,e){var i,n=this._grid;return n.setFocus(),clearInterval(this._swipeTimer),this._stopTapTracker(!1),this._clickCell=this._clickHandle=null,i=this._clickElement=this.findElementAt(t,e,!1),this._clickHandle=Q2(i,u8),this._clickCell=Q2(i,m4),i instanceof L17?new P08(n,i):i instanceof x17?new q67(i):void 0},onTap:function(t,e){var i=this._grid,n=i._selections,s=this._clickCell,r=this._clickElement,o=this._clickHandle,a=s?s.index():null,h=s?a.column:null;r instanceof d67?r.model().run(i,a):s instanceof l4?(a.normalize(i),this.setFocused(a,!0),this.dataCellClicked(a)):s instanceof x7&&s.clickable()?!i.isEmpty()&&h instanceof L2&&h.sortable()&&i.operateOptions().sortingEnabled()&&i.sortColumn(h):r instanceof C0?n.add(a,a,b2.ROWS):r instanceof K6?this._checkCellClicked(s,t,e):r instanceof A17?this._checkAllClicked(s,t,e):o&&o.clickable()&&this._handleClicked(o)},onLongTap:function(t,e){return!0},onDoubleTap:function(t,e){var i=this._grid,n=this.focused(),s=this._clickCell?this._clickCell.index():null;if(this.findElementAt(t,e,!0),this._clickCell instanceof l4)this.dataCellDblClicked(this._clickElement.index());else if(this._clickElement instanceof O3||this._clickElement instanceof j3){var r=Q2(this._clickElement.item(),j2);r&&r.setExpanded(!r.expanded())}i.isValidCell(n)&&!i.isEditing()&&this._clickCell&&this._clickCell.canEditable()&&P1.areEqual(s,n)&&i.$_showEditor(s)},onDragStart:function(t,e,i,n){var s=this._clickElement,r=null;s instanceof l4?r=new E08(this._grid):s instanceof C0?r=new K08(this._grid,s):s instanceof x7||s instanceof N9&&(r=new N08(this._grid,s)),r&&r.start(t,e,i,n)&&(this._tapTracker=r)},onDrag:function(t,e,i,n){var s=this._tapTracker;s&&(s.drag(t,e,i,n)||(s.cancel(),this._tapTracker=null))},onDragEnd:function(t,e){var i=this._tapTracker;if(i)try{i.drop(t,e)||i.cancel()}finally{this._tapTracker=null}},onSwipe:function(t,e,i){if(this._clickElement instanceof l4){var n=this._grid,s=1;switch(i){case"right":n.setLeftPos(n.leftPos()-e/20);break;case"left":n.setLeftPos(n.leftPos()+e/20);break;case"bottom":s=-1;case"top":this._swipeDistance=s*e/20,this._swipeDuration=t,this._swipePrev=this._swipeStarted=F0(),this._swipeAmount=0,this._swipeTimer=setInterval(this.$_scrollRow.bind(this),50)}}},_footerCellClicked:function(t){this._grid._fireFooterCellClicked(t)},_checkBarFootClicked:function(t){this._grid._fireCheckBarFootClicked(t)},_indicatorCellClicked:function(t){this._grid._fireIndicatorCellClicked(t)},_stateBarCellClicked:function(t){this._grid._fireStateBarCellClicked(t)},_rowGroupHeadFootClicked:function(t){this._grid._fireRowGroupHeadFootClicked(t)},_rowGroupHeaderFooterClicked:function(t){this._grid._fireRowGroupHeaderFooterClicked(t)},_rowGroupBarClicked:function(t){this._grid._fireRowGroupBarClicked(t)},_panelClicked:function(t){this._grid._firePanelClicked(t)},_rowGroupPanelClicked:function(t){this._grid._fireRowGroupPanelClicked(t)},$_scrollRow:function(){var t,e,i=F0();i-this._swipeStarted<this._swipeDuration?(t=F0()-this._swipePrev,e=(this._swipeDistance-this._swipeAmount)*t/this._swipeDuration,this._swipeAmount-=e,this._swipePrev=i,this._grid.setTopIndex(this._grid.topIndex()+e)):clearInterval(this._swipeTimer)},_handleClicked:function(t){var e,i,n=this._grid;t instanceof g47&&(e=t.cellView().row())&&e.setExpanded(!e.expanded()),t instanceof k9?(i=Q2(t.cellView().item(),U6))&&(i.expanded()?n.collapse(i):n.expand(i,!1,!1)):t instanceof m47&&(i=t.group())&&(i.expanded()?n.collapse(i):n.expand(i,!1,!1),i.expanded()||((!(e=0<=i.index()?i:i.firstLeaf())||e.index()<0)&&i.footer()&&(e=i.footer()),e&&n.makeRowVisible(e.index())))}}),N9=I1("MobileSelectionHandle",o7,{init:function(t,e){this._super(t._dom,"mobileSelectionHandle"),this._view=t,this._dir=e,this._background=new U1(4281545523),this._dom?(this._border=null,this.setWidth(11),this.setHeight(11)):(this._border=this._dom?new Z1(4294967295,5):new Z1(4292730333,1),this.setWidth(21),this.setHeight(21))},view:function(){return this._view},dir:function(){return this._dir},propertyChanged:function(){this.invalidate()},_doDraw:function(t){t.drawBounds(this._background,this._border,5,5,11,11)},_doDrawHtml:function(t){this._css.background=this._background.css(),this._css.border=this._border?this._border.css():"",this._css.padding=this._css.margin=0}}),P9=I1("MobileSelectionView",D4,{init:function(t){this._super(t,"mobileSelectionView"),this._item=null,this._background=P9.$$_defBackground,this._border=P9.$$_defBorder,this.addElement(this._leftHandle=new N9(this,"left")),this.addElement(this._rightHandle=new N9(this,"right")),this.addElement(this._topHandle=new N9(this,"top")),this.addElement(this._bottomHandle=new N9(this,"bottom"))},background:null,border:null,item:function(){return this._item},setBackground:function(t){t!==this._background&&(this._background=t,this.invalidate())},setBorder:function(t){t!=this._border&&(this._border=t,this.invalidate())},updateElement:function(t,e){var i,n,s,r,o=this.container().gridView(),a=o.isEditing()||o.isRowEditing(),h=this.width(),l=this.height(),u=this._leftHandle.width(),d=this._leftHandle.height();this._item=t,this.setBackground(e.background()),this.setBorder(e.border()),i=(h-(u+=this._dom?3:0))/2,n=(l-(d+=this._dom?3:0))/2,r=(s=t.style())==b2.BLOCK||s==b2.SINGLE,this._leftHandle._context=this._context,this._rightHandle._context=this._context,this._topHandle._context=this._context,this._bottomHandle._context=this._context,this._leftHandle.setVisible(!a&&(r||b2.isColumn(s))),this._rightHandle.setVisible(!a&&this._leftHandle.visible()),this._topHandle.setVisible(!a&&(r||b2.isRow(s))),this._bottomHandle.setVisible(!a&&this._topHandle.visible()),this._leftHandle.visible()&&this._leftHandle.move(-u/2,n),this._rightHandle.visible()&&this._rightHandle.move(h-u/2,n),this._topHandle.visible()&&this._topHandle.move(i,-d/2),this._bottomHandle.visible()&&this._bottomHandle.move(i,l-d/2),this._leftHandle.invalidate(),this._rightHandle.invalidate(),this._topHandle.invalidate(),this._bottomHandle.invalidate()},_doDraw:function(t){var e=this.container().gridView(),i=e.layoutManager().gridBounds();i=e._selectionLayer.translateBy(this,i),t.clipRectEx(i),t.drawBoundsI(this._background,this._border,0,0,this.width(),this.height())},_doDrawHtml:function(){this._css.background=this._background.css(),this._css.border=this._border.css()}});P9.$$_defBackground=new U1(268435456),P9.$$_defBorder=new Z1(4281545523,2);var U67=I1("MobileEditCommand",null,{init:function(t,e,i){this._super(),this._owner=t,this._name=e,this._label=i.label,this._styles=new o1(t,"mobileEditCommand",{line:Z1.WHITE,paddingLeft:11,paddingRight:11,paddingTop:9,paddingBottom:9}),i&&(this._callback=i.callback,this._renderer=i.renderer,i.styles&&this._styles.extend(i.styles))},run:function(t,e){var i=this._callback;i?i(t,e):this._doRun(t,e)},_doRun:function(t,e){}}),d67=I1("MobileEditCommandView",W2,{init:function(t,e){this._super(t,"mobileEditCommandView"),this._model=e},model:function(){return this._model},_doRender:function(t,e){var i=this._model,n=i._styles,s=n.background(),r=n.line()||Z1.WHITE,o=i._renderer;t.drawRectI(s,Z1.WHITE,e),n.deflatePaddings(e),o&&o(t,e,r),n.inflatePaddings(e)},_doRenderHtml:function(t){this._doRender(this.$_getGraphics(!0),t)}}),R08=I1("MobileEditCommander",D4,{init:function(t,e){this._super(t._dom,"mobileEditCommander"),this._grid=t,this._commands=[],this._views={},e&&this.addCommands(e)},itemWidth:41,itemHeight:35,addCommands:function(t){var e,i,n,s;if(V1(t)&&0<(e=t.length)){for(i=0;i<e;i++)(n=t[i])&&n.name&&b4(n.callback)&&b4(n.renderer)&&(s=new U67(this._grid,n.name,n),this._commands.push(s));this.updateElement()}},updateElement:function(){var t,e,i,n,s,r,o=this._views,a=this._commands.length;if(this.setVisible(0<a),this.visible()){for(this.clear(),n=this._itemWidth,s=this._itemHeight,t=r=0;t<a;t++)(i=o[(e=this._commands[t]).$_hash])||(i=new d67(this._dom,e),o[e.$_hash]=i),this.addChild(i),i.setBounds(r,0,n,s),r+=n;this.resize(r,s)}}}),w08=I1("MobileEditCommandBar",a2,{init:function(t,e){this._super(t._dom,"mobileEditCommander"),this._grid=t,this._commands=[],this._element=this._createElement(),this._upper=!1,e&&this.addCommands(e)},addCommands:function(t){var e,i,n,s;if(V1(t)&&0<(e=t.length)){for(i=0;i<e;i++)(n=t[i])&&n.name&&b4(n.callback)&&(s=new U67(this._grid,n.name,n),this._commands.push(s));this._updateElement()}},show:function(t,e,i,n){var s=this._element,r=s.style;this._updateElement(n),r.left=t+"px",r.top=e+"px",r.width=i+"px",document.documentElement.appendChild(s)},hide:function(){var t=this._element;t&&t.parentNode&&document.documentElement.removeChild(t)},_createElement:function(){document;var t=w1.createElement("div",{position:"absolute",textAlign:"center",zIndex:3002}),e=w1.createElement("div",{width:"100%",height:"5px",background:"#e5edf4",boxShadow:"2px 1px grey"}),i=w1.createElement("div",{display:"inline-block",background:"#e5edf4",marginTop:"-1px",padding:"6px 20px",borderBottomLeftRadius:"6px",borderBottomRightRadius:"6px",boxShadow:"2px 2px grey"});return i.$_buttons=[],t.appendChild(e),t.appendChild(i),t.$_anchor=e,t.$_panel=i,t},_updateElement:function(t){for(var e,i,n,s,r=this._grid,o=this._element.$_panel,a=o.$_buttons,h=this._commands;a.length<h.length;)i=w1.createElement("button",{marginLeft:"4px",marginRight:"4px",padding:"2px 5px"}),n=document.createTextNode(""),i.appendChild(n),i.$_text=n,a.push(i);for(;a.length>h.length;)o.removeChild(a[a.length-1]);for(s=0;s<h.length;s++)e=h[s],(i=a[s]).onclick=function(t){return function(){t.run(r)}}(e),i.$_text.textContent=e._label||e._name,i.parentNode!==o&&o.appendChild(i)}}),Z9=I1("TapDragTracker",null,{init:function(t,e){this._super(),this._grid=t,this._name=e},needRedraw:!1,grid:function(){return this._grid},name:function(){return this._name},start:function(t,e,i,n){return this._doStart(t,e,i,n)},drag:function(t,e,i,n){return this._doDrag(t,e,i,n)},drop:function(t,e){return this.needRedraw()&&this._grid.container().invalidate(),this._doDrop(t,e)},cancel:function(){this._doCancel()},_doStart:function(t,e,i,n){return!0},_doDrag:function(t,e,i,n){return!0},_doDrop:function(t,e){return!0},_doCancel:function(){}}),E08=I1("MobileScrollTracker",Z9,{init:function(t){this._super(t,"mobileScrollTracker"),this._tapX=this._tapY=NaN,this._vertical=!0},_doStart:function(t,e,i,n){var s=i-t,r=n-e;return this._vertical=Math.abs(r)>=Math.abs(s),this._vertical?this._grid.setTopIndex(this._grid.topIndex()+(0<r?-1:1)):this._grid.setLeftPos(this._grid.leftPos()-s),this._tapX=i,this._tapY=n,!0},_doDrag:function(t,e,i,n){var s=i-this._tapX,r=n-this._tapY,o=Math.abs(r)>=Math.abs(s);return o!=this._vertical&&(o&&Math.abs(r)>2*Math.abs(s)||!o&&Math.abs(s)>2*Math.abs(r))&&(this._vertical=o),this._vertical?5<Math.abs(r)&&(this._grid.setTopIndex(this._grid.topIndex()+(0<r?-1:1)),this._tapY=n):(this._grid.setLeftPos(this._grid.leftPos()-s),this._tapX=i),!0}}),K08=I1("MobileRowSelectTracker",Z9,{init:function(t,e){this._super(t,"mobileRowSelectTracker"),this._cell=e,this._item=null},_doStart:function(t,e,i,n){var s=this._grid._selections,r=this._cell.index();return s.clear(),this._item=s.add(r,r,b2.ROWS),!0},_doDrag:function(t,e,i,n){var s=this._grid.pointToIndex(i,n,!1);return 0<=s.rowIndex&&this._item.resizeTo(s),!0}}),D98=I1("MobileColumnSelectTracker",Z9,{init:function(t,e){this._super(t,"mobileColumnSelectTracker"),this._cell=e,this._item=null},_doStart:function(t,e,i,n){var s=this._grid._selections,r=this._cell.index();return s.clear(),this._item=s.add(r,r,b2.COLUMNS),!0},_doDrag:function(t,e,i,n){var s=this._grid.pointToIndex(i,n,!1);return s.column&&this._item.inflate(t<i?"right":"left",s),!0}}),N08=I1("MobileSelectHandleTracker",Z9,{init:function(t,e){this._super(t,"mobileSelectHandleTracker"),this._handle=e},_doStart:function(t,e,i,n){return!0},_doDrag:function(t,e,i,n){var s=this._grid.pointToIndex(i,n,!1);return 0<=s.rowIndex&&this._handle.view().item().inflate(this._handle.dir(),s),!0}}),Q98=I1("MobileColumnMoveTracker",Z9,{init:function(t,e){this._super(t.grid(),e),this._cell=t,this._sourceFeedback=new x7(this._grid._dom,"columnMoveFeedback"),this._sourceFeedback.setAlpha(.7),this._targetFeedback=new c67(this._grid._dom,"columnMoveTargetFeedback"),this._targetFeedback.setAlpha(.9),this.setNeedRedraw(!0)},_doStart:function(t,e,i,n){return!0},_doDrag:function(t,e,i,n){var s=this._grid.pointToIndex(i,n,!1);return 0<=s.rowIndex&&this._handle.view().item().inflate(this._handle.dir(),s),!0}}),P08=I1("TabScrollThumbTracker",null,{init:function(t,e){this._super(),this._grid=t,this._thumb=e},start:function(t,e){this._thumb.setPressed(!0);var i=this._thumb.scrollBar(),n=i.containerToElement(t,e);i.vertical()?this._offset=n.y-this._thumb.y():this._offset=n.x-this._thumb.x()},move:function(t,e){this.$_doScroll(t,e,Y4.THUMB_TRACK)},stop:function(t,e){this._thumb.setPressed(!1),this.$_doScroll(t,e,Y4.THUMB_END)},$_doScroll:function(t,e,i){var n=this._thumb.scrollBar(),s=n._maxPosition-n._min+1,r=n._buttonSize,o=n.containerToElement(t,e);n.vertical()?(o.y-=this._offset,o.y=(o.y-r)*s/(n.height()-2*r-this._thumb.height()),n._doScroll(i,0,Y1(o.y))):(o.x-=this._offset,o.x=(o.x-r)*s/(n.width()-2*r-this._thumb.width()),n._doScroll(i,0,Y1(o.x)))}}),F98=I1("MobileResizer",D4,{init:function(){this._super("focusView"),this._border=new Z1(4281545523,2),this._editBorder=new Z1(4283601655,2),this._editing=!1},setEditing:function(t,e){t!=this._editing&&(this._editing=t,this._buttonWidth=e,this.invalidate())},_doDraw:function(t){var e=this.width()-(this._editing?this._buttonWidth:0);t.drawBoundsI(null,this._editing?this._editBorder:this._border,-1,-1,e-1,this.height()-1)}}),Z08=I1("MobileEditController",C67,{init:function(t){this._super(t),this._commander=new R08(t,[{name:"cancel",callback:function(t,e){t.cancelEditor()},renderer:function(t,e,i){t.drawLine(i,e.x,e.y,e.right(),e.bottom()),t.drawLine(i,e.right(),e.y,e.x,e.bottom())},styles:{background:"#f00"}},{name:"commit",callback:function(t,e){t.commitEditor()},renderer:function(t,e,i){t.drawLines(i,e.x,e.y+2*e.height/3,e.x+e.width/3,e.bottom(),e.right(),e.y)},styles:{background:"#080"}}])},setFocus:function(t){this.$_focusToEditor(t,this._grid.isRowEditing())},$_focusToEditor:function(t,e){(e||this._needPrepare())&&this._super(e||t)},_needPrepare:function(t){return t&&this._grid.isRowEditing(t.getRow(this._grid))},showEditor:function(t){var e=this.isEditing(),i=this._super(t);return!e&&i&&this.caretToLast(),i},_editorActivated:function(t){this._super(t);var e,i,n,s,r,o=this._grid.container(),a=this._commander;t?(a.updateElement(),e=this._grid.getEditCellBounds(this._editIndex),i=a.width(),n=a.height(),s=e.right()-i,(r=e.y-n-5)<0&&(o.width()-i>=e.right()?(s=Math.min(o.width()-i,e.right()+2),r=Math.max(0,e.y-2)):e.x>=i?(s=Math.max(0,e.x-i-2),r=Math.max(0,e.y-2)):o.height()-n>=e.bottom()&&(r=Math.min(o.height()-n,e.bottom()+2))),a.setPosition(s,r),o.addFeedback(a)):o.removeFeedback(a),this._grid.invalidate()}}),Y67=I1("AnimationInfo",null,{init:function(t,e){this._super(),this.target=t,this.property=null,this.startValue="old",this.duration=1e3,e&&this.assign(e)},assign:function(t){return t&&(t.hasOwnProperty("property")&&(this.property=t.property),t.hasOwnProperty("startValue")&&(this.property=t.startValue),t.hasOwnProperty("duration")&&(this.duration=t.duration)),this}}),i08=I1("AnimationInfoCollection",null,{init:function(t){this._super(),this._target=t,this._items=[]},count:function(){return this._items.length},getItem:function(t){return this._items[t]},assign:function(t){if(V1(t))for(var e=0;e<t.length;e++){var i=t[e];i&&this._items.push(new Y67(this._target,i))}else t&&this._items.push(new Y67(this._target,t))}}),t67=I1("AnimationRun",null,{init:function(t,e,i){this._super(),this._info=t,this._startValue=e,this._started=i,this._current=0},isActive:function(){return this._current<=1},startValue:function(){return this._startValue},current:function(){return this._current},check:function(t){var e=this._info;return!(!e||(this._current=(t-this._started)/e.duration,1<this._current||e.target instanceof k4&&!e.target.visible()))},animate:function(t,e){return t.invalidate(),!0}}),R67=I1("ValueAnimation",t67,{init:function(t,e,i){this._super(t,e,i)}}),w67=I1("StyleAnimation",t67,{init:function(t,e,i){this._super(t,e,i)}}),V08=I1("AnimationManager",null,{init:function(t){this._super(),this._grid=t,this._runs={},this._interval=20,this._timer=void 0,this._timerHandler=this.doRun.bind(this),this._startTimer=void 0,this._saveRuns=0},active:function(){return void 0!==this._timer},enabled:function(){return this._grid&&this._grid.effectOptions().animationEnabled()},clear:function(){this.stop(),this._runs={}},clearTarget:function(t){var e=this._runs[t.$_hash];if(e){var i=!1;for(var n in e){i=!0;break}if(i)return delete this._runs[tarkget.$_hash],!0}return!1},add:function(t,e,i){if(this.enabled()){var n=this._runs[t.$_hash];n||(this._runs[t.$_hash]=n={}),n[e]=i}},getRuns:function(t,e){if(this._timer){var i=this._runs[t.$_hash];if(i)return i[e]}return null},start:function(t){if(!this._grid.effectOptions().animationEnabled())return this.stop(),!1;if(this.active()){if(!t)return!1;this.stop()}return this._timer=setInterval(this._timerHandler,this._interval),y0("Animation started: "+q4()),!0},stop:function(){return void 0!==this._timer&&(clearInterval(this._timer),this._timer=void 0,this._runs={},y0("Animation stopped: "+q4()),!0)},requestLoad:function(t){if(this.enabled()){this.clear();for(var e=t.getDataColumns(),i=t.topIndex(),n=t.itemCount(),s=q4(),r=e.length;r--;){var o=e[r],a=o.animations(),h=a.count();if(0<h)for(var l=0;l<h;l++)for(var u=a.getItem(l),d=0;d<n;d++){var c=t.grid().getRow(d+i).dataIndex();if(0<=c){var _="value"==u.value?new R67(u,0,s):new w67(u,0,s);this.add(o,c,_)}}}this.start()}},requestNew:function(t,e){this.enabled()&&this.start()},requestUpdate:function(t,e,i){var n;if(this.enabled()&&t.containsDataRow(e)&&((n=i<0?t.getDataColumns():t.getDataColumnsOf(i))&&0<n.length)){for(var s=0,r=q4(),o=n.length;o--;)for(var a=n[o],h=a.animations(),l=h.count();l--;){var u=h.getItem(l),d=t.getCellValue(e,a),c="value"==u.value?new R67(u,d,r):new w67(u,d,r);this.add(a,e,c),s++}0<s&&this.start()}},doRun:function(){var t=this._grid;if(t.effectOptions().animationEnabled()){var e=t.layoutManager(),i=this._runs,n=q4(),s=0;for(var r in i){var o=i[r];if(o){var a=0;for(var h in o){var l=o[h];l.check(n)?l.animate(t,e)?a++:delete o[h]:(l.animate(t,e),delete o[h])}s+=a,a<1&&delete i[r]}}0<(this._saveRuns=s)?y0("Animation run: "+s):this.stop()}else this.stop()}}),E67=s0.module,H47=I1("GridComponent",W27,{init:function(t,e,i){b77&&(l3(b77),b77=void 0),this._super(t,e),this._createBackgroundElements(t),this._gridView=this._createGridView(this.$_dom,this,i),this._addGridView(this._gridView),this._prepareLayers(t),this.setDefaultTool(this._createDefaultTool())},gridView:function(){return this._gridView},_createChildren:function(t){},_layoutChildren:function(t){},_blockContextMenu:function(){return this._gridView.displayOptions().preventSystemMenu()},_beforeRender:function(t){this._gridView._beforeRender(t)},_afterRender:function(t){this._gridView._afterRender(t)},_doLayout:function(t){var e,i,n=this._gridView,s=t.clone();this.$_dom||(e=n._styles.border())&&(i=e.width())&&s.inflate(-i,-i),n.setRect(s),s.x=s.y=0,n._doLayout(s)},_doDrawBorder:function(t,e){var i,n,s,r,o=this._gridView._styles.border();o&&0<(i=o.width())&&(n=e.x+Y1(i/2),s=e.y+Y1(i/2),this._invalidated||o.opaque()||(r=1<i?new Z1(4294967295,i):Z1.WHITE,t.drawBoundsI(null,r,n,s,e.width-i,e.height-i)),t.drawBoundsI(null,o,n,s,e.width-i,e.height-i))},_doDrawBorderHtml:function(t){var e=this._gridView._styles.border();e?this._container.style.border=e.css():(this._container.style.border="",this._container.style.borderStyle="none")},_focusHandler:function(t){this._gridView._focusHandler(t)},onImageLoaded:function(t){this._super(t),this._gridView._imageLoaded=!0},_createBackgroundElements:function(t){},_addGridView:function(t){this.addElement(t)},_createGridView:function(t,e,i){return new A0(t,e,i)},_prepareLayers:function(t){},_createDefaultTool:function(){return $_mobileEnabled&&D0()?new t08(this):new q08(this)}}),$_INVISIBLE_EDIT_BOUNDS=new g1(-1e4,-1e4,100,100),q1=I1("GridBase",D4,{init:function(t,e,i){this._super(t,"gridView"),this._container=e,this._readMode=i,this._offsetX=0,this._offsetY=0,this._gridRect=new g1,e.$_rich&&(this._context=e._context,this._toolContext=new M27("toolContext"),e.addContext(this._toolContext)),this._loading=!0,this._userMode=!1,this._userModeError=null,this._gridObjects=[],this._addGridObject(this._panel=this._createPanelModel()),this._addGridObject(this._groupPanel=this._createGroupPanelModel()),this._addGridObject(this._header=new q27(this)),this._addGridObject(this._editBar=new d37(this)),this._addGridObject(this._footer=this._createFooterModel()),this._addGridObject(this._rowIndicator=new B27(this)),this._addGridObject(this._checkBar=new v8(this)),this._addGridObject(this._body=new B8(this)),this._addGridObject(this._rowGroup=new u37(this)),this._addGridObject(this._hscrollBar=new T27(this)),this._addGridObject(this._vscrollBar=new T27(this)),this._headerItems=new Y37(this,R8.HEADER),this._footerItems=new Y37(this,R8.FOOTER);var n=this._rootElement=new D4(t,"grid root view",!0);this.addChild(n),this._rootLayer=new D4(t,"grid layer root view",!0),this.addChild(this._rootLayer),this._bordersLayer=new Y78(t,this),this.addChild(this._bordersLayer),(n=this._emptyView=this._createEmptyView(t)).setVisible(!1),this.addChild(n),this._panelView=this._createPanelView(t,this._panel),this._groupPanelView=this._createGroupPanelView(t,this._groupPanel),this._bodyView=this._createBodyView(t,this._body,!1),this._fixedBodyView=this._createBodyView(t,this._body,!0),this._mergeView=new D17(t),this._fixedMergeView=new D17(t,!0),this._mergeHeaderLayer=new V78(t),this._headerView=new f8(t,this._header),this._fixedHeaderView=new f8(t,this._header,!0),this._summaryView=new P37(t,this._header.summary()),this._fixedSummaryView=new P37(t,this._header.summary(),!0),this._headerItemsView=new S37(t,this._headerItems),this._rowIndicatorView=new d78(t,this._rowIndicator),this._stateBarView=new i37(t,this._rowIndicator),this._checkBarView=new V37(t,this._checkBar),this._footerItemsView=new S37(t,this._footerItems),this._footerView=this._createFooterView(t,this._footer,!1),this._fixedFooterView=this._createFooterView(t,this._footer,!0),this._bandedGroupView=new N78(t,this._rowGroup),this._summaryHeadView=new h8(t),this._checkBarHeadView=new A17(t),this._rowGroupHeadView=new K78(t),this._headerHeadView=new X8(t),this._footerHeadView=new m17(t),this._panelView&&this.addElement(this._panelView),this._groupPanelView&&this.addElement(this._groupPanelView),this._linesLayer=new t78(t,this),this._rootElement.addChildren([this._bodyView,this._mergeView,this._fixedBodyView,this._fixedMergeView,this._mergeHeaderLayer,this._headerView,this._fixedHeaderView,this._summaryView,this._fixedSummaryView,this._headerItemsView]),this._addGroupView(),this._rootElement.addChildren([this._rowIndicatorView,this._stateBarView,this._checkBarView,this._linesLayer,this._footerItemsView,this._footerView,this._fixedFooterView,this._summaryHeadView,this._headerHeadView,this._checkBarHeadView,this._rowGroupHeadView,this._footerHeadView]),this._selectionLayer=new D4(t,"selectionLayer"),this.addLayer(this._selectionLayer),this._focusLayer=new D4(t,"focusLayer"),this.addLayer(this._focusLayer),$_mobileEnabled&&D0()||(this._autoFillLayer=new D4(t,"autoFillLayer"),this.addLayer(this._autoFillLayer),this._autoFillHandle=new x47(t,this).setVisible(!1),this._autoFillLayer.addElement(this._autoFillHandle,this._toolContext)),this._scrollLayer=new D4(t,"scrollLayer"),this.addLayer(this._scrollLayer),this._hscrollView=null,this._vscrollView=null,this._feedbackLayer=new D4(t,"feedbackLayer"),this.addLayer(this._feedbackLayer),this._rootColumn=new G47(this),this._dataRoots=new S08,this._columnLayouts=new q78,this._columnLayout=null,this._orgColumns=[],this._orgColumned=!0,this._columnLayoutChanged=!1,this._columnsLock=!1,this._columnWidthsDirty=!1,this._columnsDirty=!1,this._columnSpansDirty=!1,this._rowSource=null,this._lookupProvider=null,this._dataTags=this._createDataTagManager(),this._displayOptions=new X37(this),this._editOptions=new A67(this),this._operateOptions=new b67(this),this._effectOptions=new a78(this),this._autoFill=new W08(this),this._delegate=this._createDelegate(),this._eventHandler=this._delegate.createGridEventHandler(),this._eventHandler&&this.addListener(this._eventHandler),this._layoutManager=this._createLayoutManager(),this._heightMeasurer=null,this._toolTipManager=new j07(this),this._clipboardManager=new Y08(this),this._progressManager=new x07(this._container._container),this._selections=new L7(this),this._selections.addListener(this),this._selectionViews=new x6,this._editController=this._createEditController(),this._validationManager=new B48(this),this._columnSummaryRuntime=new H17,this._columnDefaultRuntime=new T67(this),this._rowGroupSummaryRuntime=new G17(this),this._columnValidationRuntime=new t6,this._rowValidationRuntime=new h3,this._seriesValueRuntime=new G0(this),this._cellRendererRuntime=new k7(this),this._defaultStyles=new o1(this,"gridDefault"),this._styles=new o1(this,"grid",{background:null}),this._styles.setParent(this._defaultStyles,!1),this._stylesDirty=!1,this._headerItemStyles=new o1(this,"headerItem"),this._footerItemStyles=new o1(this,"footerItem"),this._scrollEdgeStyles=new o1(this,"scrollEdge"),this.initStyles(),this._styleRegionMap=null,this._columnStyles={},this._ownedStyleManager=this._styleManager=new l5(this),this._styleManager.addListener(this),this._palettes=new m28(this),this._animations=this._createAnimationManager(),this._resetting=!1,this._layouted=!1,this._focusing=!1,this._focusedColumn=null,this._shadowIndex=new P1,this._oldFocusIdx=new P1,this._newFocusIdx=new P1,this._tmpIndex=new P1,this._currentRow=-1,this._currentRowId=-1,this._currentRowChanged=q4(),this._vertScroll=0,this._horzScroll=0,this._imageLists={},this._delegate.prepareResources(),this._filterSelector=new L9(this._container._popupOwner||this._container._container),this._toastManager=new q48(this),this._popupMenuManager=new J6(this.container(),this).addListener(this),this._contextMenu=null,this._defaultContextMenu=null,this.$_prepareContextMenu(),this._dataCellRenderers=new M97(this._delegate),this._dataCellEditors=new W97(this._delegate),this._topIndex=0,this._prevTopIndex=0,this._prevLeftPos=0,this._prevRowCount=0,this._dataChanged=!1,this._imageLoaded=!1,this._cellUpdateEventLock=!1,this._updateLock=0,this._rowChangeTimer=void 0,this._rowChangeTimerCallback=function(){this.$_checkCurrentRow(!0)}.bind(this),this.$_fixedColCount=this.$_fixedRowCount=0,this._productName="SMART datagrid v1.4, 2014-2017."},clearWindowEventListeners:function(){P87(this._container)},onPaletteChanged:function(t){this.refreshView()},stylesChanged:function(t){this._stylesDirty||(this._stylesDirty=!0,this.refreshView())},cellStyleAdded:function(t,e){e&&this.invalidateEditor()},cellStyleChanged:function(t,e){e&&(t==this.getFocusedCellStyle()&&this.invalidateEditor(),this.invalidateLayout())},cellStyleRemoved:function(t,e,i){this.itemSource().removeCellStyle(e),i&&(t==this.getFocusedCellStyle()&&this.invalidateEditor(),this.invalidateLayout())},cellStylesCleared:function(t){this.itemSource().clearCellStyles(),t&&(this.invalidateEditor(),this.invalidateLayout())},onCellStyleManagerStyleChanged:function(t){this.invalidateEditor(),this.invalidateLayout()},onCellStyleManagerCellChanged:function(t,e,i){if(void 0!==e||void 0!==i)this.invalidateEditor();else{var n=this.$_focusedIndex(),s=n.dataIndex(this);if(0<=s&&n.column){var r=n.column.dataIndex();s==e&&r==i?this.invalidateEditor():(s==e||V1(e)&&0<=e.indexOf(s))&&(r==i||V1(i)&&0<=i.indexOf(r))&&this.invalidateEditor()}}this.invalidateLayout()},viewId:"grid",columns:null,columnLayout:null,rowFilter:{get:function(){return this._items&&this._items.rowFilter()},set:function(t){return this._items&&this._items.setRowFilter(t),this}},maxRowCount:{get:function(){var t=this.rowSource();return t?t.maxItemCount():0},set:function(t){var e=this.rowSource();return e&&(t=Math.max(0,parseInt(t)),isNaN(t)||t==this.maxRowCount()||e.setMaxItemCount(t)),this}},body:null,panel:null,groupPanel:null,header:null,editBar:null,footer:null,rowIndicator:null,checkBar:null,rowGroup:null,hscrollBar:null,vscrollBar:null,headerItems:null,footerItems:null,displayOptions:null,editOptions:null,operateOptions:null,effectOptions:null,autoFill:null,defaultStyles:null,styles:null,headerItemStyles:null,footerItemStyles:null,scrollEdgeStyles:null,styleManager:null,topIndex:0,leftPos:0,undoable:!1,readMode:!1,userMode:!1,userModeError:null,userData:null,setReadMode:function(t){return t!=this._readMode&&(this._readMode=t,this._editController&&this._editController.deactivate(),this._editController=this._createEditController(),this._editController&&this._editController.reactivate(this.focusedIndex())),this},setStyleManager:function(t){return t!==this._styleManager&&(this._styleManager&&this._styleManager.removeListener(this),(this._styleManager=t)&&t.addListener(this),this.invalidateLayout()),this},setUserMode:function(t){return this._userMode=t,this},setUserModeError:function(t){return this._userModeError=t,this},setDefaultStyles:function(t){return t!==this._defaultStyles&&this._defaultStyles.extend(t),this},setStyles:function(t){return t!==this._styles&&this._styles.extend(t),this},setHeaderItemStyles:function(t){return t!==this._headerItemStyles&&this._headerItemStyles.extend(t),this},setFooterItemStyles:function(t){return t!==this._footerItemStyles&&this._footerItemStyles.extend(t),this},setScrollEdgeStyles:function(t){return t!==this._scrollEdgeStyles&&this._scrollEdgeStyles.extend(t),this},rowGrouped:function(){return!1},canShowGroupFooters:function(){return this.rowGrouped()},dataCellRenderers:function(){return this._dataCellRenderers},rowSource:function(){return this._rowSource},setRowSource:function(t){if(!t)throw new Error("RowProvider can not be null");return t!==this._rowSource&&(this._rowSource&&this._rowSource.removeListener(this),this._rowSource=t,this._rowSource&&this._rowSource.addListener(this)),this},itemSource:function(){return this._rowSource},setItemSource:function(t){return this.setRowSource(t)},dataSource:function(){return this._rowSource?this._rowSource.dataSource():null},setDataSource:function(t){var e=this.dataSource();this._rowSource&&this._rowSource.setDataSource(t);var i=this.dataSource();return i!==e&&(e&&e.removeTag(this._dataTags),i&&(i.addTag(this._dataTags),this.applyFilters())),this},undoable_:function(){var t=this.rowSource();return t&&t.undoable()},setUndoable:function(t){var e=this.rowSource();return e&&e.setUndoable(t),this},activeTool:function(){return this.container().activeTool()},toolTipManager:function(){return this._toolTipManager},tooltipManager:function(){return this._toolTipManager},validationManager:function(){return this._validationManager},editController:function(){return this._editController},cellStyles:function(){return this._cellStyles},setBody:function(t){return t!==this._body&&this._body.assign(t),this},setPanel:function(t){return t!==this._panel&&this._panel&&this._panel.assign(t),this},setGroupPanel:function(t){return t!==this._groupPanel&&this._groupPanel&&this._groupPanel.assign(t),this},setHeader:function(t){return t!==this._header&&this._header.assign(t),this},setEditBar:function(t){return t!==this._editBar&&this._editBar.assign(t),this},setFooter:function(t){return t!==this._footer&&this._footer.assign(t),this},setRowIndicator:function(t){return t!==this._rowIndicator&&this._rowIndicator.assign(t),this},setCheckBar:function(t){return t!==this._checkBar&&this._checkBar.assign(t),this},setRowGroup:function(t){return t!==this._rowGroup&&this._rowGroup.assign(t),this},setHscrollBar:function(t){return t!==this._hscrollBar&&this._hscrollBar.assign(t),this},setVscrollBar:function(t){return t!==this._vscrollBar&&this._vscrollBar.assign(t),this},setHeaderItems:function(t){return t!==this._headerItems&&this._headerItems.assign(t),this},setFooterItems:function(t){return t!==this._footerItems&&this._footerItems.assign(t),this},setDisplayOptions:function(t){return t!==this._displayOptions&&this._displayOptions.assign(t),this},setEditOptions:function(t){return t!==this._editOptions&&this._editOptions.assign(t),this},setOperateOptions:function(t){return t!==this._operateOptions&&this._operateOptions.assign(t),this},setEffectOptions:function(t){return t!==this._effectOptions&&this._effectOptions.assign(t),this},setAutoFill:function(t){return t!==this._autoFill&&this._autoFill.assign(t),this},panelView:function(){return this._panelView},groupPanelView:function(){return this._groupPanelView},mergeView:function(){return this._mergeView},fixedMergeView:function(){return this._fixedMergeView},mergeHeaderView:function(){return this._mergeHeaderLayer},rowIndicatorView:function(){return this._rowIndicatorView},stateBarView:function(){return this._stateBarView},checkBarView:function(){return this._checkBarView},headerView:function(){return this._headerView},fixedHeaderView:function(){return this._fixedHeaderView},summaryView:function(){return this._summaryView},fixedSummaryView:function(){return this._fixedSummaryView},headerItemsView:function(){return this._headerItemsView},footerItemsView:function(){return this._footerItemsView},footerView:function(){return this._footerView},fixedFooterView:function(){return this._fixedFooterView},rowGroupHeadView:function(){return this._rowGroupHeadView},bandedGroupView:function(){return this._bandedGroupView},summaryHeadView:function(){return this._summaryHeadView},headerHeadView:function(){return this._headerHeadView},checkBarHeadView:function(){return this._checkBarHeadView},footerHeadView:function(){return this._footerHeadView},bodyView:function(){return this._bodyView},fixedBodyView:function(){return this._fixedBodyView},delegate:function(){return this._delegate},layoutManager:function(){return this._layoutManager},lm:function(){return this._layoutManager},popupMenuManager:function(){return this._popupMenuManager},popupShowing:function(){return this._editOptions.allowKeysOnMenu()&&this._popupMenuManager.showing()},selections:function(){return this._selections},columnSummaryRuntime:function(){return this._columnSummaryRuntime},columnDefaultRuntime:function(){return this._columnDefaultRuntime},rowGroupSummaryRuntime:function(){return this._rowGroupSummaryRuntime},columnValidationRuntime:function(){return this._columnValidationRuntime},rowValidationRuntime:function(){return this._rowValidationRuntime},seriesValueRuntime:function(){return this._seriesValueRuntime},cellRendererRuntime:function(){return this._cellRendererRuntime},heightMeasurer:function(){return this._heightMeasurer||t9.Default},setHeightMeasurer:function(t){return t!==this._heightMeasurer&&(this._heightMeasurer=t,this.refreshView()),this},setTopIndex:function(t){return t=isNaN(t)?0:t,(t=Math.max(0,Math.min(parseInt(t),this.rowCount()-1,this._vscrollView?this._vscrollView.maxPosition():0)))!=this._topIndex&&(this._topIndex=t,this.refreshView(),this.closePopups()),this},topRow:function(){return this._topIndex+this.lm().fixedItemCount()},setTopRow:function(t){return this.setTopIndex(t-this.lm().fixedItemCount())},maxHorzPos:function(){return this._hscrollView?this._hscrollView.maxPosition():0},setLeftPos:function(t){return t=isNaN(t)?0:t,(t=Math.max(0,Math.min(parseInt(t),this.maxHorzPos())))!=this._leftPos&&(this._leftPos=t,this.refreshView(),this.closePopups()),this},leftCol:function(){var t=this._layoutManager;return t?t.firstCol():0},setLeftCol:function(t){var e=this._layoutManager;return e?(t=Math.max(e.fixedColCount(),Math.min(t,e.columnCount()-1)),this.setLeftPos(e.columnBounds(t).x)):this},isEmptyColumns:function(){return 0==this.visibleColumnCount()},isEmptyRows:function(){return 0==this.rowCount()},isEmpty:function(){return 0==this.rowCount()||0==this.visibleColumnCount()},isEmptyData:function(){var t=this.dataSource();return!t||0==t.rowCount()},lookupProvider:function(){return this._lookupProvider},setLookupProvider:function(t){return t!=this._lookupProvider&&(this._lookupProvider&&this._lookupProvider.removeListener(this),!t||t instanceof a8||(t=new j37(t)),this._lookupProvider=t,this._lookupProvider&&this._lookupProvider.addListener(this),this.refreshView()),this},getHeaderLevel:function(){return this._rootColumn.headerLevel()},getDataLevel:function(){return this._rootColumn.dataLevel()},getFooterLevel:function(){return this._rootColumn.footerLevel()},getHeaderSummaryLevel:function(){return this._rootColumn.headerSummaryLevel()},getGroupHeaderLevel:function(){return this._rootColumn.groupHeaderLevel()},getGroupFooterLevel:function(){return this._rootColumn.groupFooterLevel()},dataRowCount:function(){var t=this.dataSource();return t?t.rowCount():0},rowCount:function(){return this._rowSource?this._rowSource.rowCount():0},descendantCount:function(){return this.descendantDataCount()},descendantDataCount:function(){return this._rowSource?this._rowSource.descendantCount():0},descendantRowCount:function(){return this._rowSource?this._rowSource.descendantRowCount():0},getDescendantRows:function(t,e){return this._rowSource?this._rowSource.getDescendantRows(t,e):[]},columnCount:function(){return this._rootColumn.count()},visibleColumnCount:function(){return this._rootColumn.visibleCount()},columns_:function(){return this._rootColumn.columns()},setColumns:function(t,e){this._checkEditing(),this._columnsLock=!0;try{this._rootColumn.setColumns(t,e),this._orgColumns=this._rootColumn.columns(),this._orgColumned=!0,this._columnLayoutChanged=!0}finally{this._columnsLock=!1,this._columnsReset(this._rootColumn),this.dataSource()&&this.applyFilters()}return this},columnLayouts:function(){return this._columnLayouts.items()},setColumnLayout:function(t){this._checkEditing();var e=Q2(t,x0);if(e||(e="string"==typeof t?this._columnLayouts.find(t):x0.create(t)),e!=this._columnLayout)if(this._columnLayout=e){this._columnsLock=!0;try{this._orgColumned&&(this._saveOrgWidths(),this._orgColumned=!1),this._rootColumn.setColumns(e.build(this)),this._columnLayoutChanged=!0}finally{this._columnsLock=!1,this._columnsRestore(),this._rootColumn._clearSavedWidths()}}else this.restoreColumns(!0);return this},firstRow:function(){var t=this.rowCount();return 0<t?this._rowSource.getItem(t-1):null},lastRow:function(){return 0<this.rowCount()?this._rowSource.getItem(0):null},focusedIndex:function(){var t=this.itemSource();return t?P1.create(t.current(),this._focusedColumn):null},$_focusedIndex:function(){var t=this.itemSource();return this._shadowIndex.set(t?t.current():-1,this._focusedColumn)},focusedRow:function(){var t=this.itemSource();return t?t.currentRow():null},focusedRowIndex:function(){var t=this.itemSource();return t?t.current():-1},focusedDataRow:function(){var t=this.itemSource();return t?t.currentDataRow():null},focusedDataIndex:function(){var t=this.focusedRow();return t?t.dataIndex():-1},focusedGroupRow:function(){return Q2(this.focusedRow(),j2)},focusedColumn:function(){return this._focusedColumn},$_getVisibleRow:function(t){if(t&&!t.visible()){var e=t.dataIndex();0<=e&&(t.makeVisible(),t=this.getRowOfDataIndex(e))}return t},setFocusedRow:function(t,e,i){if(e=1<arguments.length&&e,i=!(2<arguments.length)||i,t instanceof g2){var n=this.$_getVisibleRow(t);t=n?n.index():-1}var s=this.$_focusedIndex().clone();return s.rowIndex=t,this.setFocusedIndex(s,e,i)},setFocusedDataRow:function(t,e,i){t=0<arguments.length?t:0,e=1<arguments.length&&e,i=!(2<arguments.length)||i;var n=t.rowId?t.rowId():t;return(n=this.getRowOfDataIndex(n))&&this.setFocusedRow(n.index(),e,i),this},requestFocusedDataRow:function(t){this._requestedFocusedDataRow=t},setFocusedColumn:function(t,e,i){e=1<arguments.length&&e,i=!(2<arguments.length)||i;var n=this.$_focusedIndex().clone();return n.column=t,this.setFocusedIndex(n,e,i)},setFocusedCell:function(t,e,i,n){if(i=2<arguments.length&&i,n=!(3<arguments.length)||n,t instanceof g2){var s=this.$_getVisibleRow(t);t=s?s.index():-1}"string"==typeof e&&(e=this.columnByName(e));var r=P1.create(t,e);return this.setFocusedIndex(r,i,n)},clearFocused:function(){this.isValidCell(this.$_focusedIndex())&&(this._focusedColumn=null,this._loading||this._updateLock||(this.invalidateLayout(),this.clearSelection(),this._layoutSelectionViews()))},setFocusedIndex:function(t,e,i){if(e=1<arguments.length&&e,i=!(2<arguments.length)||i,!this._focusing&&this._displayOptions.focusable()){this._focusing=!0;try{this._doSetFocusedIndex(t,e,i)}finally{this._focusing=!1}}return this},_doSetFocusedIndex:function(t,e,i){if(!t)return!1;var n=this.itemSource();if(!n)return!1;if(t&&!this.isValidCell(t)&&(t=t.clone()).normalize(this),t.column instanceof O1&&(t.column=t.column.first()),!this.isValidCell(t)){var s=this.dataSource();return s&&0!=s.rowCount()&&0!=this.rowCount()||(this._focusedColumn=this.getFirstColumn(),n.setCurrent(-1)),!1}var r=this.$_focusedIndex(),o=this.focusedIndex();return t&&P1.areEqual(t,o)?(e&&this.$_makeFocusIndexVisible(),!0):!(!this._fireCurrentChanging(t,o)||!this.isValidCell(t)||(o.rowIndex=n.current(),o.column=this._focusedColumn,P1.areEqual(t,o)?(e&&this.$_makeFocusIndexVisible(),0):(this.closePopups2(),!this._editController.focusedIndexChanging()||(o.rowIndex=n.current(),o.column=this._focusedColumn,P1.areEqual(t,o)?e&&this.$_makeFocusIndexVisible():(n.setCurrent(t.rowIndex),t.rowIndex=n.current(),this._focusedIndexChanged(r,t,i,e),this._focusing=!1,this._fireCurrentChanged(this._shadowIndex.assign(t))),0))))},$_checkDiffsChanged:function(){var t,e=this.itemSource();e&&(t=this.editOptions(),e.setDiffs(t.checkDiff(),t.checkCellDiff(),t.strictDiff()))},_focusedIndexChanged:function(t,e,i,n,s){var r,o,a=this.itemSource(),h=this.editOptions(),l=this.container().activeTool(),u=this.lm();this.isValidCell(t)&&(o=u.getMergedCell(t),(r=this.getCellView(o?this._mergeView:null,t))&&r.setFocused(!1)),this._focusedColumn=e.column,a.setDiffs(h.checkDiff(),h.checkCellDiff(),h.strictDiff()),this._editController.focusedIndexChanged(t,e,s),l&&l.focusedIndexChanged(t,e,s),this.isValidCell(e)&&(o=u.getMergedCell(e),(r=this.getCellView(o?this._mergeView:null,e))&&r.setFocused&&r.setFocused(!0),this._rowIndicatorView.visible()&&this._rowIndicatorView.refresh(),this._headerView.visible()&&this._headerView.refresh(),this._fixedHeaderView.visible()&&this._fixedHeaderView.refresh()),i&&this.clearSelection(),n&&this.$_makeFocusIndexVisible(),this._layoutAutoFillHandle(),this.$_checkCurrentRow()||this.$_checkLastCellCommit(t)},$_makeFocusIndexVisible:function(){var t=this.$_focusedIndex();this.isValidCell(t)&&this.makeCellVisible(t)},isScrolling:function(){return this._scrolling},isHorzScrolling:function(){return this._horzScrolling},toastManager:function(){return this._toastManager},setCellUpdateEventLock:function(t){this._cellUpdateEventLock=t},displayRowCount:function(){return this._layoutManager.itemCount()},fullDisplayRowCount:function(t){return this._layoutManager.fullItemCount()},sorted:function(){return this.rowSource().isSorted()},filtered:function(){return this.rowSource().isFiltered()},onRowCountChanged:E1,onDisplayRowCountChanged:E1,onDescendantRowCountChanged:E1,onDescendantDataCountChanged:E1,onCurrentChanging:E1,onCurrentChanged:E1,onCurrentRowChanged:E1,onValidateCell:E1,onValidateRow:E1,onTopIndexChanged:E1,onScrollToBottom:E1,onScrollToTop:E1,onSelectionChanged:E1,onSelectionAdded:E1,onSelectionRemoved:E1,onSelectionCleared:E1,onSelectionResized:E1,onSelectionEnded:E1,onUpdating:E1,onUpdateStarted:E1,onInserting:E1,onInsertStarted:E1,onDeleting:E1,onKeyDown:E1,onShowEditor:E1,onEditChanged:E1,onEditCommitted:E1,onEditCanceled:E1,onEditSearch:E1,onEditCellUpdated:E1,onEditRowCommitted:E1,onEditRowCanceled:E1,onCopy:E1,onPaste:E1,onEditRowPasted:E1,onPasted:E1,onRowChecked:E1,onRowsChecked:E1,onCheckedChanged:E1,onAllChecked:E1,onAllCheck:E1,onErrorClicked:E1,onSorting:E1,onSorted:E1,onFiltering:E1,onFiltered:E1,onAutoFilling:E1,onAutoFilled:E1,onPopupMenuPopup:E1,onPopupMenuClicked:E1,onContextMenuPopup:E1,onContextMenuClicked:E1,onUndoStateChanged:E1,onColumnHeaderClicked:E1,onColumnHeaderDblClicked:E1,onColumnChecked:E1,onHeaderHeadClicked:E1,onHeaderHeadDblClicked:E1,onRowIndicatorCellClick:E1,onRowIndicatorCellClicked:E1,onRowIndicatorCellDblClicked:E1,onStateCellClicked:E1,onStateCellDblClicked:E1,onCheckCellClicked:E1,onCheckCellDblClicked:E1,onCheckBarHeadClicked:E1,onCheckBarHeadDblClicked:E1,onFooterCellClicked:E1,onFooterCellDblClicked:E1,onFooterHeadClicked:E1,onFooterHeadDblClicked:E1,onHeaderSummaryCellClicked:E1,onHeaderSummaryCellDblClicked:E1,onHeaderSummaryHeadClicked:E1,onHeaderSummaryHeadDblClicked:E1,onCellButtonClicked:E1,onEditorButtonClicked:E1,onDataButtonClicked:E1,onClickableCellClicked:E1,onDataCellClick:E1,onDataCellClicked:E1,onDataCellDblClicked:E1,onColumnParentChanged:E1,onColumnMoved:E1,onColumnVisibleChanged:E1,onExcludeColumn:E1,onColumnResizing:E1,onColumnResized:E1,onRowResizing:E1,onRowResized:E1,dispose:function(){},resetSize:function(){this.container().resetSize()},adjustSize:function(t){this.container().adjustSize(t)},setOptions:function(t){var e;t&&((e=t.display)&&this._displayOptions.assign(e),(e=t.edit)&&this._editOptions.assign(e),(e=t.operate)&&this._operateOptions.assign(e),(e=t.effect)&&this._effectOptions.assign(e),t.rowGroup&&(e=t.rowGroup.panel)&&this.setGroupPanel(e),(e=t.scrollBar)&&(this.setVscrollBar(e),this.setHscrollBar(e)),this.setProperties(t));return this},registerCustomGridItemType:function(t,e){this._headerItems.registerType(t,e),this._footerItems.registerType(t,e)},_createHeightMeasurer:function(t){return"fixed"==t?new Q67:null},loadStyles:function(t){for(var e=0;e<arguments.length;e++)M37.deserialize(arguments[e],this);return this},containerToGridRect:function(t){return t.x-=this._offsetX,t.y-=this._offsetY,t},containerToGridX:function(t){return t-this._offsetX},containerToGridY:function(t){return t-this._offsetY},setCursor:function(t){this.container().setDefaultCursor(t)},updateNow:function(){this.container().updateNow()},setColumnsProperty:function(t,e,i){this._rootColumn.setChildrenProperty(t,e,!0,i)},$_columnWidthChanged:function(t,e,i){this.fireEvent(q1.COLUMN_WIDTH_CHANGED,t,i,e)},invalidateColumnWidths:function(){this._columnWidthsDirty||(this._columnWidthsDirty=!0,this._columnsDirty=!0,this.refreshView())},invalidateColumns:function(){this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},getVisibleColumns:function(t){return(Q2(t,O1)||this._rootColumn).getVisibleColumns()},getHiddenColumns:function(t){return(Q2(t,O1)||this._rootColumn).getHiddenColumns()},getRow:function(t){return this._rowSource.getItem(t)},getRows:function(t,e){var i,n,s,r=this._rowSource;if(rows=null,all=null==t||void 0===t,all)for(rows=[],i=0,n=r.rowCount();i<n;i++)rows.push(r.getItem(i));else if(V1(t))for(rows=[],i=0,n=t.length;i<n;i++)((s=r.getItem(t[i]))||e)&&rows.push(s);return rows},getRowIndices:function(t,e){if(!t)return null;e=!(1<arguments.length)||e;var i,n,s=t.length,r=new Array(e?s:0);if(e)for(i=0;i<s;i++)r[i]=t[i].index();else for(i=0;i<s;i++)0<=(n=t[i].index())&&t.push(n);return r},getRowIndexOfDataIndex:function(t){return this._rowSource.getIndexOfRow(t)},getRowOfDataIndex:function(t,e){return this._rowSource.getItemOfRow(t,!e)},getRowIndicesOfDataIndices:function(t){return this._rowSource.getIndicesOfRows(t)},getAllRows:function(){return this._rowSource?this._rowSource.getAllItems():null},getTopRows:function(){return this._rowSource?this._rowSource.getTopItems():null},getLeafRows:function(t,e){return this._rowSource?this._rowSource.getLeafItems(t,e):null},visitRows:function(t,e,i){this._rowSource&&this._rowSource.visitRows(t,e,i)},getCellIndex:function(t,e){return t=0<arguments.length?t:0,e=1<arguments.length?"string"==typeof e?this.columnByName(e):e:this.getFirstColumn(),new P1(t,e)},isValidCell:function(t){return t&&0<=t.rowIndex&&t.rowIndex<this.rowCount()&&t.column&&t.column!==this._rootColumn&&t.column.grid()===this},isValidColumn:function(t){return t&&t.column&&t.column.grid()===this},isValidRow:function(t){return t&&0<=t.rowIndex&&t.rowIndex<this.rowCount()},beginUpdate:function(){this._updateLock++},endUpdate:function(t){0<this._updateLock&&(this._updateLock--,t=!(0<arguments.length)||t,0==this._updateLock&&t&&this.refreshView())},invalidateLayout:function(){this._updateLock||this._super()},refreshView:function(){this._loading||this._updateLock||(this.invalidateLayout(),this.setTopIndex(this.topIndex()),this.setLeftPos(this.leftPos()),this.setFocusedIndex(this.$_focusedIndex(),!1,!0))},resetGrid:function(){this._loading||this._updateLock||(this._resetting=!0,this.setTopIndex(0),this.setLeftPos(0),this.setFocusedIndex(new P1(0<this.rowCount()?0:-1,this.getFirstColumn()),!1,!0),this.refreshView())},isFixedRow:function(t){return t&&t.index()<this._layoutManager.fixedItemCount()},isFixedRowIndex:function(t){return 0<=t&&t<this._layoutManager.fixedItemCount()},isFixedColumn:function(t){return t&&t.root().displayIndex()<this._layoutManager.fixedColCount()},isFixedCell:function(t){return t&&(this.isFixedColumn(t.column)||this.isFixedRowIndex(t.rowIndex))},getFirstCell:function(){if(0<this.rowCount()){for(var t=-1,e=0,i=this.rowCount();e<i;e++)if(this.getRow(e)instanceof v4){t=e;break}return new P1(t,this.getFirstColumn())}return null},getFirstColumn:function(){return this._rootColumn.first()},getLastColumn:function(){return this._rootColumn.last()},getColumn:function(t){return this._rootColumn.getItem(t)},getVisibleColumn:function(t){return this._rootColumn.getVisibleItem(t)},$_getColumnGroup:function(t){return"string"==typeof(t=t||this._rootColumn)&&(t=this.columnByName("group")),t instanceof O1?t:null},$_getColumn:function(t){return"string"==typeof t&&(t=this.columnByName(t)),t instanceof k4?t:null},addColumn:function(t,e,i){return(t=this.$_getColumnGroup(t)).add(e,i)},removeColumn:function(t){if(t=this.$_getColumn(t)){var e=t.parent();if(e)return e.remove(t)}return!1},clearColumns:function(t){(t=this.$_getColumnGroup(t)).clear()},changeColumnIndex:function(t,e){if(t=this.$_getColumn(t)){var i=t.parent();if(i)return i.setChildIndex(t,e)}return!1},changeColumnDisplayIndex:function(t,e){if(t=this.$_getColumn(t)){var i=t.parent();if(i)return i.setChildDisplayIndex(t,e)}return!1},generateColumns:function(t){var e,i,n,s,r,o=this.dataSource();if(o){for(e=[],i=0,n=o.fieldCount();i<n;i++)s=new L2,r=o.getField(i).fieldName(),s.setName(r),s.setFieldName(r),e.push(s);t||(e=this.columns().concat(e)),this.setColumns(e)}},linearizeColumns:function(t,e){var i,n,s,r,o,a,h,l=this.getLeafColumns(!0);if(l&&0<(n=l.length)){if(t&&0<t.length)for(s=e?-1:1,i=0;i<t.length;i++)r=t[i],l.sort(function(t,e){var i=t.getProperty(r),n=e.getProperty(r);return(i<n?-1:n<i?1:0)*s});else e&&l.reverse();for(o=[],a=new x0,i=0;i<n;i++)(h=l[i])._saveWidth=h.width(),o.push(h);a.setItems(o),this.setColumnLayout(a)}return this},collectColumns:function(t){var e=[];return this._rootColumn.collectColumns(e,t),e},collectGroups:function(){var t=[];return this._rootColumn.collectGroups(t),t},getColumnNames:function(t){return this._rootColumn.collectColumnNames([],t)},columnByHash:function(t){return this._rootColumn._columnMap[t]},columnByName:function(t,e){return this._rootColumn.columnByName(t,e)},layoutColumnByName:function(t,e){var i,n,s;for(i=0,n=this._orgColumns.length;i<n;i++)if((s=this._orgColumns[i])instanceof O1){if(s=s.valueColumnByName(t,e))return s}else if(b5(s.name(),t,e))return s;return this._rootColumn.valueColumnByName(t)},columnByField:function(t,e,i){var n=parseInt(Number(t));if(isNaN(n)){var s=this.dataSource();s&&(n=s.getFieldIndexEx(t,e))}return 0<=n?this._rootColumn.columnByField(n,i):null},columnsByField:function(t,e){var i=this.dataSource();if(i){var n=i.getFieldIndexEx(t,e);if(0<=n){var s=[];return this._rootColumn.collectColumnsByField(n,s),0<s.length?s:null}}return null},columnByTag:function(t){return this._rootColumn.columnByTag(t)},columnsByTag:function(t){var e=[];return this._rootColumn.collectColumnsByTag(t,e),0<e.length?e:null},setColumnsVisible:function(t,i){var e=O1.getColumnMap(this,t);e&&e.each(function(t,e){t.setChildrenVisible(e,i)})},getLeafColumns:function(t){return t=!(0<arguments.length)||t,this._rootColumn.getLeafColumns(t)},getValueColumns:function(t){return t=!(0<arguments.length)||t,this._rootColumn.getValueColumns(t)},getDataColumns:function(t){return t=!(0<arguments.length)||t,this._rootColumn.getDataColumns(t)},getDataRootColumns:function(){return this._dataRoots.roots()},collectDataColumns:function(t,e,i){return this._dataRoots.collectDataColumns(t,e,i)},visitAllColumns:function(t){b4(t)&&this._rootColumn.visitAllChildren(t)},visitColumns:function(t){b4(t)&&this._rootColumn.visitChildren(t)},clearColumnTags:function(t,e){this._rootColumn.visitAllChildren(function(t){e&&t.tag()!=e||t.setTag(void 0)}),t&&this.refreshView()},getLeftColumn:function(t){},getRightColumn:function(t){},excludeColumn:function(t){t&&(this._displayOptions.hideColumnWhenExcluded()?t.setVisible(!1):this._fireExcludeColumn(t))},columnLayoutChanged:function(){return this._columnLayoutChanged},registerColumnLayouts:function(t){return t!=this._columnLayouts&&(this._columnLayouts.clear(),this._columnLayouts.load(t)),this},restoreColumns:function(t){this._checkEditing(),this._columnsLock=!0;try{t&&this._restoreOrgWidths(),this._rootColumn.setColumns(this._orgColumns),this._orgColumned=!0,this._columnLayout=null,this._columnLayoutChanged=!0}finally{this._columnsLock=!1,this._columnsRestore()}},saveColumnLayout:function(){function r(t){var e={name:t.name(),layout:t.layout(),childHeadersVisible:t.childHeadersVisible(),childFootersVisible:t.childFootersVisible(),childGroupFootersVisible:t.childGroupFootersVisible(),childSummariesVisible:t.childSummariesVisible(),saveWidth:t.saveWidth(),columns:[]};t.header&&t.header()&&(e.header=t.header().text());for(var i=0,n=t.visibleCount();i<n;i++){var s=t.getVisibleItem(i);s.visible()&&(s instanceof O1?e.columns.push(r(s)):s.name&&e.columns.push(o(s)))}return e}function o(t){return{name:t.name(),saveWidth:t.saveWidth()}}for(var t=[],e=0,i=this.visibleColumnCount();e<i;e++){var n=this.getVisibleColumn(e);n.visible()&&(n instanceof O1?t.push(r(n)):n.name&&t.push(o(n)))}return t},registerColumnStyles:function(t){var e=!1;if(I4(t)){for(var i in t){var n=t[i];I4(n)&&(this._columnStyles[i]=n instanceof o1?n:new o1(null,null,n),e=!0)}e&&(this.$_initColumnStylesMap(this._rootColumn),this.refreshView())}},unregisterColumnStyles:function(t){var e,i=!1;if(V1(t))for(var n=t.length;n--;)e=t[n],this._columnStyles.hasOwnProperty(e)&&(delete this._columnStyles[e],i=!0);else this._columnStyles.hasOwnProperty(t)&&(i=!0,delete this._columnStyles[t]);i&&(this.$_initColumnStylesMap(this._rootColumn),this.refreshView())},clearColumnStyles:function(){m27(this._columnStyles)||(this._columnStyles={},this.$_initColumnStylesMap(this._rootColumn),this.refreshView())},$_initColumnStylesMap:function(t){if(t=t||this._rootColumn,this.$_columnStyleNameChanged(t),t instanceof O1){var e=this;t.visitAllChildren(function(t){e.$_columnStyleNameChanged(t)})}},editorActivated:function(t){if(!this._loading){var e=this.activeTool();e&&e.editorActivated(t),this._layoutAutoFillHandle()}},getFieldValues:function(t,e){var i=this.dataSource();if(!i)return null;if((t=t instanceof k4?t.dataIndex():i.getFieldIndexEx(t,!0))<0)return null;var n,s,r,o,a=[];if(V1(e))for(n=0,s=e.length;n<s;n++)(r=e[n])instanceof g2||(r=this.getRow(r)),r instanceof g2&&0<=(o=r.dataIndex())&&a.push(i.getValue(o,t));else for(n=0,s=this.rowCount();n<s;n++)(r=this.getRow(n))instanceof g2&&0<=(o=r.dataIndex())&&a.push(i.getValue(o,t));return a},cancelEditor:function(t){t=!(0<arguments.length)||t,this._editController.cancelEditor(t)},cancel:function(t){var e=this.$_focusedIndex(),i=Q2(this.itemSource(),k2);return!!(i&&i.isEditing(e.getRow(this))&&i.cancel())&&((e=e.clone()).normalize(this),this.setFocusedIndex(e),t&&this.$_makeFocusIndexVisible(),!0)},commitEditor:function(t,e,i){return this.editController().commitEditor(t,e,i)},commit:function(t,e,i){e=!(1<arguments.length)||e,i=!(2<arguments.length)||i;var n,s,r=this.$_focusedIndex();if(!this.isValidCell(r))return!1;if(!(n=Q2(this.itemSource(),k2)))return!1;try{if(s=r.getRow(this),n.isEditing(s)){if(t)return n.commit();if(this.isEditing()){if(!this.editController().commitEditor())return!1;this.editController().invalidateEditor()}if(n.isEdited(s))return n.commit()}}catch(t){if(t instanceof n7)return i&&O0(t.message?t.message:t.toString()),I7(t),!1;if(t instanceof q0);else if(e)throw t}return!1},commitOrCancel:function(t){this.isRowEditing()&&(this.commit(t)||this.cancel())},isCheckable:function(t){return(t=this._parseRow(t))&&this._checkBar.$_isCheckable(t)},setCheckable:function(t,e,i){return!(!(t=this._parseRow(t))||!t.$_setCheckable(this,e)||(!i&&this.refreshView(),0))},isChecked:function(t){return(t=this._parseRow(t))&&t.$_isChecked(this)},$_clearChecked:function(){this._rowSource&&this._rowSource.visitAll(function(t){t.$_setChecked(this,!1)}.bind(this))},setChecked:function(t,e,i,n){var s=!1;return(t=this._parseRow(t))&&(i?(this.$_clearChecked(),e&&(s=t.$_setChecked(this,!0))):s=t.$_setChecked(this,e)),s&&!n&&(this.refreshView(),this._fireRowChecked(t,e)),s},checkRows:function(t,e,i){var n,s,r,o=[];if(V1(t)&&0<t.length){for(n=0,s=t.length;n<s;n++)(r=this._parseRow(t[n]))&&r.$_setChecked(this,e)&&(o.push(r),i&&this._fireRowChecked(r,e));0<o.length&&(this.refreshView(),this._fireRowsChecked(o,e))}return o},checkAll:function(e,t,i,n,s){if(this._rowSource&&0<this.rowCount()){var r=this,o=!1,a=r.checkBar();this._rowSource.visitAll(function(t){i&&!r._checkBar.$_isCheckable(t)||t.$_isChecked(r)==e||n&&!n(t)||!(a.showGroup()||0<=t.dataIndex())||(t.$_setChecked(r,e),s&&r._fireRowChecked(t,e),o=!0)},t),o&&(this.refreshView(),this._fireAllChecked(e))}},toggleChecked:function(t,e,i,n){if(this._rowSource&&0<this.rowCount()){var s,r,o=this,a=o._checkBar,h=[];if(t){for(s=t.length;s--;)if((r=this._parseRow(t[s]))&&(!e||0<=r.index())&&(!i||a.$_isCheckable(r))){var l=!r.$_isChecked(o);r.$_setChecked(o,l),n&&this._fireRowChecked(r,l),h.push(r)}}else this._rowSource.visitAll(function(t){if(!i||a.$_isCheckable(t)){var e=!t.$_isChecked(o);t.$_setChecked(o,e),n&&o._fireRowChecked(t,e),h.push(t)}},e);0<h.length&&(this.refreshView(),this._fireCheckedChanged(h))}},setAllChecked:function(t){this._checkBarHeadView.setChecked(t)},isAllChecked:function(){return this._checkBarHeadView.checked()},getCheckedRows:function(t){var e=[];return this._rowSource&&this._rowSource.visitAll(function(t){t.$_isChecked(this)&&e.push(t)}.bind(this),t),e},getCheckedRowIndices:function(t){for(var e=this.getCheckedRows(t),i=e.length;i--;)e[i]=e[i].index();return e},getCheckedDataIndices:function(t){for(var e=this.getCheckedRows(t),i=e.length;i--;)e[i]=e[i].dataIndex();return e},getLookupSource:function(t){return this._lookupProvider&&this._lookupProvider.getSource(t)},addLookupSource:function(t,e){if(t){var i=t instanceof H9?t.id():t.id;if(i){var n=this._lookupProvider;if(!n||e||!n.getSource(i))return n||(n=this._lookupProvider=new j37).addListener(this),(t=n.add(t))?t.id():null}}},removeLookupSource:function(t){return!!this._lookupProvider&&this._lookupProvider.remove(t)},existsLookupData:function(t,e){if(t&&e){var i=this._lookupProvider&&this._lookupProvider.getSource(t);if(!i)throw"Invalid lookup source id: "+t;return V1(e)||(e=[e]),i.exists(e)}return!1},fillLookupValues:function(t,e,i){if(t&&i){var n=this._lookupProvider&&this._lookupProvider.getSource(t);if(!n)throw"Invalid lookup source id: "+t;n.fill(e,i)}},fillLookupRows:function(t,e){if(t&&e){var i=this._lookupProvider&&this._lookupProvider.getSource(t);if(!i)throw"Invalid lookup source id: "+t;i.fillRows(e)}},clearLookupData:function(t){if(t){var e=this._lookupProvider&&this._lookupProvider.getSource(t);if(!e)throw"Invalid lookup source id: "+t;e.clear()}},getIndicatorIndex:function(t){return t.index()},canHovering:function(){return!this.isEditing()},$_calcGroupLevels:function(){this._rootColumn.calcHeaderLevels(),this._rootColumn.calcDataLevels(),this._rootColumn.calcFooterLevels(),this._rootColumn.calcHeaderSummaryLevels(),this._rootColumn.calcGroupHeaderLevels(),this._rootColumn.calcGroupFooterLevels()},showToast:function(t,e,i){this._toastManager.show(t,e,i)},hideToast:function(t){this._toastManager.close(),t&&t()},isEditing:function(t){return this._editController.isEditing()&&(!t||P1.areEqual(t,this._editController.editIndex()))},isRowEditing:function(t){return(t=t||this.$_focusedIndex().getRow(this))&&this.itemSource()instanceof k2&&this.itemSource().isEditing(t)},isRowEdited:function(t){return(t=t||this.$_focusedIndex().getRow(this))&&this.itemSource()instanceof k2&&this.itemSource().isEdited(t)},isColumnEdited:function(t){if(t instanceof L2){var e=t.dataIndex();if(0<=e)return row=this.$_focusedIndex().getRow(this),row&&this.itemSource()instanceof k2&&this.itemSource().isCellEdited(row,e)}},$_canUpdate:function(t,e){var i=!this.readMode()&&this.editOptions().canUpdate()&&0<this.visibleColumnCount()&&this.itemSource()&&this.itemSource().canUpdate(t);if(i)try{if(!this._fireUpdating(t.index(),!!e))return!1}catch(t){return E3(t.message||t),I7(t),!1}return i},$_canAppend:function(){var t=!this.readMode()&&this.editOptions().canAppend()&&0<this.visibleColumnCount()&&this.itemSource()&&this.itemSource().canAppend();if(t)try{if(!this._fireInserting(this.itemSource().rowCount()))return!1}catch(t){return E3(t.message||t),I7(t),!1}return t},$_canInsert:function(t,e,i){var n=!this.readMode()&&this._doCanInsert(t,e,i)&&this.editOptions().canInsert()&&0<this.visibleColumnCount()&&this.itemSource()&&this.itemSource().canInsert(t);if(n)try{if(!this._fireInserting(t.index(),e,i))return!1}catch(t){return E3(t.message||t),I7(t),!1}return n},_doCanInsert:function(t,e,i){return!0},canDelete:function(t){return 0<this.visibleColumnCount()&&this.rowSource()&&(this.isRowEditing(t)||this.rowSource().canDelete(t))},canCommit:function(t){return!this.readMode()&&this.isRowEditing(t)&&(this.isRowEdited()||this.editOptions().commitWhenNoEdit())},canCancel:function(t){return this.isRowEditing(t)},append:function(t){var e=this.itemSource();if(!(e instanceof k2))return!1;if(e.isAppending())return!0;var i=this.$_getInsertDefaults(null);return e.append(i,!1)},insert:function(t,e){var i=this.itemSource();if(!(i instanceof k2))return!1;if(i.isInserting())return!0;var n=this.$_getInsertDefaults(null);return this.itemSource().insert(n,!1,t,e)},update:function(){var t=this.itemSource();return t instanceof k2&&(!!t.isUpdating()||t.update())},edit:function(){var t=this.itemSource();return t instanceof k2&&(!!t.isEditing()||t.update())},fillEditSearchItems:function(t,e,i,n){this._editController.fillSearchItems(t,e,i,n)},$_showEditor:function(t,e){return t=t||this.$_focusedIndex(),!!this._editController.showEditor(t)&&((e||this._editOptions.noSelectWhenEdit())&&this._editController.caretToLast(),!0)},showEditor:function(t,e,i){return!!this.$_showEditor(t,i)&&(e&&this._editController.showEditList(),!0)},hideEditor:function(){this._editController.closeList(!1),this._editController.hideEditor()},reprepareEditor:function(){this._editController.reprepareEditor(this.$_focusedIndex())},prepareEditor:function(){this._editController._prepareEditor(this.$_focusedIndex())},invalidateEditor:function(){this._editController.invalidateEditor(),this._editController.reprepareEditor(this.$_focusedIndex())},$_editorButtonClick:function(t){this._editController.buttonClicked(t)},getEditingRow:function(){var t=Q2(this.itemSource(),k2);return t?t.editingItem():null},getSortFieldCount:function(){return this.rowSource().getSortFieldCount()},getSortFields:function(){return this.rowSource().getSortFields()},getSortDirections:function(){return this.rowSource().getSortDirections()},getSortCases:function(){return this.rowSource().getSortCases()},addFocusElement:function(t){return!(!t||this._focusLayer.contains(t)||(this._focusLayer.addElement(t,this._toolContext),0))},removeFocusElement:function(t){return!!this._focusLayer.contains(t)&&(this._focusLayer.removeElement(t),!0)},addAutoFillElement:function(t){return!(!t||this._autoFillLayer.contains(t)||(this._autoFillLayer.addElement(t,this._toolContext),0))},removeAutoFillElement:function(t){return!!this._autoFillLayer.contains(t)&&(this._autoFillLayer.removeElement(t),!0)},addFeedbackElement:function(t){return!(!t||this._feedbackLayer.contains(t)||(this._feedbackLayer.addElement(t,this._toolContext),0))},removeFeedbackElement:function(t){return!!this._feedbackLayer.contains(t)&&(this._feedbackLayer.removeElement(t),!0)},getEditCellBounds:function(t){var e,i,n,s,r=this.lm(),o=r.getMergedCell(t),a=this.getCellView(o?this._mergeView:null,t);return a?((e=a.getBounds()).x=e.y=0,e=a.boundsByContainer(e),o&&((i=t.rowIndex)>=r.topIndex()+r.fixedRowCount()&&i<r.topIndex()+r.itemCount()+r.fixedRowCount()?(n=r.itemBounds(a._topIndex),s=r.itemBounds(t.rowIndex-this._topIndex),e.y+=s.y-n.y,e.height=s.height):e=$_INVISIBLE_EDIT_BOUNDS.clone()),e):$_INVISIBLE_EDIT_BOUNDS.clone()},getEditBounds:function(t){var e,i,n,s,r=this.lm(),o=r.getMergedCell(t),a=this.getCellView(o?this._mergeView:null,t,t.isFixedCol(this));return a?(e=a.getBounds(),a instanceof l4&&(e.width-=a.getButtonsWidth()),e.x=e.y=0,e=a.boundsByContainer(e),o&&((i=t.rowIndex)>=r.topIndex()+r.fixedRowCount()&&i<r.topIndex()+r.itemCount()+r.fixedRowCount()?(n=r.itemBounds(a._topIndex),s=r.itemBounds(t.rowIndex-this._topIndex),e.y+=s.y-n.y,e.height=s.height):(e=$_INVISIBLE_EDIT_BOUNDS.clone()).scrolled=!0)):(e=$_INVISIBLE_EDIT_BOUNDS.clone()).scrolled=!0,e},getCellView:function(t,e,i){if(void 0===i&&(i=e.column&&e.column.fixed()),null==t||t instanceof X27){var n=e.getRow(this);if(n&&n.isEditable()){var s=i?this._fixedBodyView.findRowView(n.index()):this._bodyView.findRowView(n.index());if(s&&s.visible())return s.findCell(e.column)}}else{if(t===this._bandedGroupView)return this._bandedGroupView.getCellView(e,!!i);if(t instanceof D17)return(i?this._fixedMergeView:this._mergeView).getCellView(e);if(t===this._mergeHeaderLayer)return this._mergeHeaderLayer.getCellView(e)}return null},getFocusedCellView:function(t){var e=(t=t||this.$_focusedIndex()).getRow(this),i=e&&e.merged(),n=t.isFixedCol(this),s=n?this.getCellView(this._fixedMergeView,t,!0):null;return s||n||(s=this.getCellView(this._mergeView,t,!1)),!s&&i&&(s=this.getCellView(this._mergeHeaderLayer,t)),s||(s=this.getCellView(null,t,n)),s||i||(s||(s=this.getCellView(this._bandedGroupView,t,!1)),s||(s=this.getCellView(this._bandedGroupView,t,!0))),s},pointToIndex:function(t,e,i){var n=P1.temp(-1,null);return i?this._layoutManager.mouseToIndex(t,e,n):this._layoutManager.mouseToIndexEx(t,e,n),n},getDataCellRect:function(t){if(this.isValidCell(t)){var e=this.isFixedColumn(t.column),i=this.getCellView(null,t,e)||this.getCellView(this._mergeView,t,e);return i?i.boundsByContainer():null}return null},$_deleteRows:function(t,n){var e,i,s,r=this.editOptions(),o=this.rowSource();if((!n||r.deletable())&&o instanceof k2){if(this.isRowEditing(null)&&!r.deletableWhenEdit()){var a="Commit or cancel editing before deteting.";return E3(a),void I7(a)}if(this.commitEditor(!0,!1,!0),!function(t,e){if(1!=e.length)return!1;var i=e[0];if(t.canDelete(i))if(n)if(t.editOptions().confirmWhenDelete()){if(confirm(t.editOptions().getDeleteRowsMessage())){if(!t._fireDeleting([i.dataIndex()]))return!0;t.cancel(),T1.isInserting(i.rowState())||t.rowSource().remove(i)}}else{if(!t._fireDeleting([i.dataIndex()]))return!0;t.cancel(),T1.isInserting(i.rowState())||t.rowSource().remove(i)}else t.cancel(),T1.isInserting(i.rowState())||t.rowSource().remove(i);return!0}(this,t=t.concat())){for(t.sort(function(t,e){return t.index()-e.index()}),i=-1,e=t.length;e--;)0<=(s=t[e]).dataIndex()||s.isEditing()?s.index()==i?t.splice(e,1):i=s.index():t.splice(e,1);0<t.length&&this.canDelete(t[0])&&(n&&r.confirmWhenDelete()&&!confirm(r.getDeleteRowsMessage())||n&&!function(t,e){try{var i,n,s,r;if(e&&0<(i=e.length)){for(n=[],s=0;s<i;s++)(r=e[s])&&0<=r.dataIndex()&&n.push(r.dataIndex());if(0<n.length&&!t._fireDeleting(n))return!1}}catch(t){E3(t),c77(t)}return!0}(this,t)||(function(t,e){var i,n,s,r,o=null;for(i=e.length;i--;)if(s=(n=e[i]).rowState(),T1.isEditing(s)){o=n,T1.isInserting(s)&&e.splice(i,1);break}if(r=[],0<e.length){for(i=0;i<e.length;i++)r.push(e[i].index());r=t.rowSource().getRemovableRows(r)}r&&0<r.length&&(o&&t.cancel(),t.rowSource().removeRows(r))}(this,t),this.clearSelection()))}}},deleteRows:function(t,e){var i,n,s;if(V1(t)&&0<t.length){for(i=this.rowSource(),n=(t=t.concat()).length;n--;)(s=t[n])instanceof g2||((s=i.getItem(s))?t[n]=s:t.splice(n,1));this.$_deleteRows(t,!e)}},deleteCheckedRows:function(t,e){var i=this.getCheckedRows(e);i&&0<i.length&&this.$_deleteRows(i,!t)},getSelection:function(t){return 0<this._selections.count()?(t=0<arguments.length?t:-1)<0?this._selections.lastItem():this._selections.getItem(t):null},getSelectionCount:function(){return this._selections.count()},getSelections:function(){return this._selections.items()},setSelection:function(t,e,i,n){return idx1=this._getValidIndex(t),idx2=this._getValidIndex(e),i=i||this._displayOptions.selectStyle(),n&&idx1 instanceof P1&&(this.isValidCell(t)?this.setFocusedIndex(idx1,!1,!1):b2.isRow(i)?this.setFocusedRow(idx1.rowIndex,!1,!1):b2.isColumn(i)?this.setFocusedColumn(idx1.column,!1,!1):this.setFocusedIndex(idx1,!1,!1)),this._selections.clear(),this._selections.add(idx1,idx2,i)},addSelection:function(t,e,i){return this._selections.add(t,e,i||this._displayOptions.selectStyle())},removeSelection:function(t){this._selections.remove(t)},$_collectSelectedRows:function(t,e,i){var n,s,r,o=this.selections(),a=[];for(n=0,s=o.count();n<s;n++)(r=o.getItem(n)).style()!=b2.ROWS&&r.style()!=b2.BLOCK||(t?a=a.concat(r.getRows()):e?a=a.concat(r.getRowIndices()):i&&(a=a.concat(r.getDataIndices())));return a},getSelectedRows:function(){return this.$_collectSelectedRows(!0)},getSelectedRowIndices:function(){return this.$_collectSelectedRows(!1,!0)},getSelectedDataIndices:function(){return this.$_collectSelectedRows(!1,!1,!0)},clearSelection:function(t){t=!(0<arguments.length)||t;var e=this.$_focusedIndex();this._selections.clear(),t&&this.isValidCell(e)&&0<this.rowCount()&&0<this.visibleColumnCount()&&this._selections.add(e,e,this.displayOptions().selectStyle())},$_isErasable:function(t,e){return e._erasable&&(!this._editOptions._checkReadOnlyWhenErase||!this.getReadOnlyAt(t,e))},eraseSelection:function(n){n=!(0<arguments.length)||n;var t,e,i,s,r,o=this.editOptions(),a=this.selections(),h=this.itemSource();if(this.readMode()||o.readOnly()||!o.updatable())return!1;if(!(h instanceof k2))return!1;if(this.isRowEditing(null)&&!o.erasableWhenEdit())return i=E2._default.completeEditing,E3(i),I7(i),!1;if(function(t,e){if(0==e.count()&&n||1==e.count()&&e.getItem(0).isSingleCell()){var i=t.$_focusedIndex();return t.$_isErasable(i.rowIndex,i.column)&&t.setCellValue(i,void 0),!0}}(this,a))return!0;if((s=a.count())<1)return!1;for(r=[],t=0;t<s;t++)(e=a.getItem(t)).style()!=b2.ROWS&&e.style()!=b2.BLOCK||(r=r.concat(e.getRows()));if(0==r.length)return!1;for(1<r.length&&r.sort(function(t,e){return t.index()-e.index()}),(1<r.length||!r[0].isEditing())&&this.commitEditor(!0,!1,!0),t=0;t<s;t++){e=a.getItem(t),this.dataSource().beginActions();try{(new L47).setValue(this._clipboardManager,e.getBounds(),void 0,!0)}finally{this.dataSource().endActions()}}return!0},restoreErase:function(){},deleteSelection:function(s){s=!(0<arguments.length)||s;var t,e,i,n,r,o,a=this.editOptions(),h=this.selections(),l=this.itemSource();if(this.readMode()||a.readOnly()||!a.deletable())return!1;if(!(l instanceof k2))return!1;if(this.isRowEditing(null)&&!a.deletableWhenEdit())return t=E2._default.completeEditing,E3(t),I7(t),!1;if(this.commitEditor(!0,!1,!0),function(t,e){if(0==e.count()&&s||1==e.count()&&e.getItem(0).isSingleCell()){var i,n;if(0<=(n=0==e.count()?t.$_focusedIndex().rowIndex:e.getItem(0).getBounds().R1())&&t.canDelete(i=t.getRow(n)))if(t.editOptions().confirmWhenDelete()){if(confirm(t.editOptions().getDeleteRowsMessage())){if(!t._fireDeleting([i.dataIndex()]))return!0;t.cancel(),T1.isInserting(i.rowState())||t.rowSource().remove(i)}}else{if(!t._fireDeleting([i.dataIndex()]))return!0;t.cancel(),T1.isInserting(i.rowState())||t.rowSource().remove(i)}return!0}return!1}(this,h))return!0;if((e=h.count())<1)return!1;for(o=[],i=0;i<e;i++)(r=h.getItem(i)).style()!=b2.ROWS&&r.style()!=b2.BLOCK||(o=o.concat(r.getRows()));if(0==o.length)return!1;for(1<o.length&&o.sort(function(t,e){return t.index()-e.index()}),n=-1,i=o.length;i--;)o[i].index()==n?o.splice(i,1):n=o[i].index();if(0<o.length&&this.canDelete(o[0])&&(!a.confirmWhenDelete()||confirm(a.getDeleteRowsMessage()))&&function(t,e){try{if(e&&0<e.length){for(var i=[],n=0,s=e.length;n<s;n++){var r=e[n];r&&0<=r.dataIndex()&&i.push(r.dataIndex())}if(0<i.length&&!t._fireDeleting(i))return!1}}catch(t){E3(t),c77(t)}return!0}(this,o)){this.dataSource().beginActions();try{!function(t,e){var i,n,s,r,o=null;for(i=e.length;i--;)if(s=(n=e[i]).rowState(),T1.isEditing(s)){o=n,T1.isInserting(s)&&e.splice(i,1);break}0<(r=t.getRowIndices(e)).length&&(r=t.itemSource().getRemovableRows(r)),o&&t.cancel(),r&&0<r.length&&t.itemSource().removeRows(r)}(this,o)}finally{this.dataSource().endActions(),this.clearSelection()}}return!0},revertSelection:function(t){var e,i,n,s,r,o,a,h,l,u=this.editOptions(),d=this.selections(),c=this.itemSource();if((t||u.revertable())&&c instanceof k2&&(this.commitEditor(!0,!1,!0),!function(t,e){if(0==e.count()||1==e.count()&&e.getItem(0).isSingleCell()){var i;0<=(i=0==e.count()?t.$_focusedIndex().rowIndex():e.getItem(0).getBounds().R1())&&t.itemSource().revert(i)}}(this,d))){for(h=d.count(),l=[],e=0;e<h;e++)if((i=d.getItem(e)).style()==b2.ROWS||i.style()==b2.BLOCK)for(n=i.getBounds(),s=Math.min(n.R1(),n.R2()),r=Math.max(n.R1(),n.R2()),o=s;o<=r;o++)(0<=(a=this.getRow(o)).dataIndex()||a.isEditing())&&l.push(o);for(l.sort(function(t,e){return e-e}),o=-1,e=l.length;e--;)l[e]==o?l.splice(e,1):o=l[e];0<l.length&&this.itemSource().revertAll(l)}},registerImageList:function(t){if(e=null,t instanceof z8&&t.name()&&!this._imageLists.hasOwnProperty(t.name()))e=t;else if(t&&t.name&&!this._imageLists.hasOwnProperty(t.name)){var e=new z8(t.name,t.root||t.rootUrl);t.items&&e.addUrls(t.items||t.images)}e&&((this._imageLists[e.name()]=e).addListener(this),this._assignImageList(e))},unregisterImageList:function(t){if(t&&this._imageLists.hasOwnProperty(t)){var e=this._imageLists[t];delete this._imageLists[t],e.removeListener(this),this._assignImageList(e,!0)}},getImageList:function(t){return t&&this._imageLists[t]},getListImage:function(t,e){return t instanceof z8?t.getImage(e):t?(t=this._imageLists[t])?t.getImage(e):null:void 0},_assignImageList:function(t,e){for(var i=this.getDataColumns(),n=0,s=i.length;n<s;n++){var r=i[n];r.imageList()==t.name()&&(r._images=e?null:t)}},getImage:function(t){return this._container.getImage(t)},getAssetImage:function(t,e){return this._container.getImage($$_rootContext+$$_assets+t+(e||".png"))},loadPalettes:function(t){return t&&(this._palettes.clear(!0),this._palettes.addPalettes(t)),this},registerFillPalette:function(t,e){return this._palettes.addFill(t,e)},registerStrokePalette:function(t,e){return this._palettes.addStroke(t,e)},unregisterPalette:function(t){return this._palettes.remove(t)},clearRowSummary:function(){var t=this.rowSource();t&&t.clearSummary()},getSummarizer:function(){return null},getSummary:function(t,e){var i=this.dataSource();if(i&&(e=e&&e.trim().toLowerCase())){var n=this.getSummarizer();if(n){var s=i.getFieldIndexEx(t,!0);if(0<=s&&s<i.fieldCount())switch(e){case"count":return n.getCount(s);case"sum":return n.getSum(s);case"max":return n.getMax(s);case"min":return n.getMin(s);case"avg":return n.getAvg(s);case"var":return n.getVar(s);case"varp":return n.getVarp(s);case"stdev":return n.getStdev(s);case"stdevp":return n.getStdevp(s)}}}return NaN},$_canOrderBy:function(t,e,i){var n=this.itemSource();return n&&n.canSorting(t,e,i)},orderBy:function(t,e,i){var n,s,r,o=[];if(t&&0<(n=t.length))for(s=0;s<n;s++)(r=t[s])instanceof k4||(r=this.columnByName(r)),r&&o.push(r.dataIndex());this.orderByFields(o,e,i)},orderByFields:function(t,e,i){var n,s,r,o,a,h,l;if(!t||t.length<1)this.$_canOrderBy(null,null,null)&&this._sortRows([],[],[]);else{for(n=t.length,s=this.dataSource(),r=[],o=[],a=[],h=0;h<n;h++)0<=(l=s.getFieldIndexEx(t[h],!0))&&(r.push(l),e&&o.push(e[h]),i&&a.push(i[h]));this.$_canOrderBy(r,o,a)&&this._sortRows(r,o,a)}},sortColumn:function(t){t&&this.sortColumnWithStyle(this.operateOptions().sortStyle(),t)},unsortColumn:function(t){t&&this.unsortColumnWithStyle(this.operateOptions().sortStyle(),t)},$$_addSort:function(t,e,i,n){var s,r=this.getSortFields(),o=this.getSortDirections(),a=this.getSortCases(),h=-1,l=r.length;for(s=0;s<l;s++)if(r[s]==t){h=s;break}0<=h?(o[h]=e,a[h]=i):n?(r.splice(0,0,t),o.splice(0,0,e),a.splice(0,0,i)):(r.push(t),o.push(e),a.push(i)),this._sortRows(r,o)},sortColumnWithStyle:function(t,e){if(this.isRowEditing(null)){if(!this.editOptions().commitWhenSort())return;this.commit()}if(e instanceof k4||(e=this.columnByName(e)),!e)throw new Error("column is null");if(!(e.dataIndex()<0)){var i=this._operateOptions.sortTextCase();t==P7.EXCLUSIVE?e.sortOrder()<0?this.orderBy([e],[M4.ASCENDING],[i]):e.sortDirection()==M4.ASCENDING?this.orderBy([e],[M4.DESCENDING],[i]):this.isGroupedColumn(e,!0)?this.orderBy([e],[M4.ASCENDING],[i]):this._operateOptions.triStateSorting()?this.unsortColumnWithStyle(t,e):this.orderBy([e],[M4.ASCENDING],[i]):t!=P7.INCLUSIVE&&t!=P7.REVERSE||(e.sortOrder()<0?this.$$_addSort(e.dataIndex(),M4.ASCENDING,i,t==P7.REVERSE):e.sortDirection()==M4.ASCENDING?this.$$_addSort(e.dataIndex(),M4.DESCENDING,i,t==P7.REVERSE):this.isGroupedColumn(e,!0)?this.$$_addSort(e.dataIndex(),M4.ASCENDING,i,t==P7.REVERSE):this._operateOptions.triStateSorting()?this.unsortColumnWithStyle(t,e):this.$$_addSort(e.dataIndex(),M4.ASCENDING,i,t==P7.REVERSE))}},unsortColumnWithStyle:function(t,e){var i,n,s,r,o,a;if(!this.isRowEditing(null)&&(e instanceof k4||(e=this.columnByName(e)),e&&!(e.dataIndex()<0))){for(i=this.getSortFields(),n=this.getSortDirections(),s=this.getSortCases(),r=-1,o=i.length,a=0;a<o;a++)if(i[a]==e.dataIndex()){r=a;break}r<0||(t==P7.EXCLUSIVE?this.orderBy([],[],[]):t!=P7.INCLUSIVE&&t!=P7.REVERSE||(i.splice(r,1),n.splice(r,1),s.splice(r,1),this._sortRows(i,n,s)))}},applyFilters:function(){return!this.isRowEditing(null)&&(this._toastManager.show(this.operateOptions().filteringToast(),!0,function(){this.$_doApplyFilters()}.bind(this)),!0)},$_doApplyFilters:function(){this._items.beginFiltering();try{this._items.clearAllFilters(),this.$_addFilters(this._rootColumn)}finally{this._items.endFiltering()}this.setTopIndex(this.topIndex())},$_addFilters:function(t){var e,i,n,s,r,o,a=t.count();for(e=0;e<a;e++)if((i=t.getItem(e))instanceof L2){if(n=i.filters())for(r=n.length,s=0;s<r;s++)(o=n[s]).active()&&this._items.addFilter(i.dataIndex(),o.expression());(o=i.autoFilter())&&o.active()&&this._items.addFilter(i.dataIndex(),o)}else i instanceof O1&&this.$_addFilters(i)},isGroupedField:function(t){return!1},isGroupedColumn:function(t){return!1},getGroupLevel:function(t){return-1},getGroupLevels:function(){return 0},clearColumnMergeGrouped:function(){this._rootColumn.clearMergeGrouped()},isDeletedRow:function(t){var e,i=this.getRow(t);return i instanceof v4&&(e=this.dataSource().getRowState(i.dataIndex()),j1.isDeleted(e))},$_makeRowInView:function(t){var e,i,n=this.lm();if(t>=n.fixedItemCount())if(e=t,0==(i=n.fullItemCount()))0<n.itemCount()?this.setTopItem(e):this.seTopIndex(0);else{if(e>=this.topRow()&&e<this.topRow()+i)return;e>=this.topRow()+i&&(e=e-i+1),this.setTopItem(Math.max(0,e))}},$_makeColumnInView:function(t){var e,i,n,s=this.lm(),r=t.root(),o=r.displayIndex();if(o>=s.fixedColCount()){for(i=s.columnBounds(o).x,e=t;e!=r;)i+=e.displayOffset(),e=e.parent();i<this.leftPos()?this.setLeftPos(i):0<(n=i+t.displayWidth()-this.leftPos()-s.nonfixedBounds().width)&&this.setLeftPos(Math.min(i,this.leftPos()+n))}},makeColumnVisible:function(t){var e=new P1(-1,t);this.makeCellVisible(e)},makeRowVisible:function(t){t instanceof g2&&(t=t.index()),0<=t&&(this.lm().makeRowVisible(t),this.invalidateLayout())},makeCellVisible:function(t){this.isValidCell(t)?this.lm().cellIsVisible(t)||(this.lm().makeCellVisible(t),this.invalidateLayout()):t&&t.column&&(this.lm().makeCellVisible(t),this.invalidateLayout())},revealRow:function(t,e,i){t instanceof g2&&(this._doRevealRow(t),0<=t.index()&&(e&&this.setFocusedRow(t,!0),i&&this.makeRowVisible(t)))},copyToClipboard:function(){var t,e,i,n=this.selections();return this._editOptions.copyEnabled()&&(this._editOptions.singleCopy()||0==n.count()||n.isSingleCell()?(e=this.$_focusedIndex(),this.isValidCell(e)&&(t=this._clipboardManager.copyCellToClipboard(e))):(i=n.lastItem().getBounds())&&(t=this._clipboardManager.copyToClipboard(i))),void 0===t&&(t=this._clipboardManager.copyEmptyToClipboard()),this._fireCopy(e||i,t)?t:null},pasteFromClipboard:function(t){var e,i,n,s=this._clipboardManager,r=this._editOptions,o=this.$_focusedIndex().clone();if(o.normalize(this),this.isValidCell(o)&&o.dataColumn()&&!r.readOnly()&&r.pasteEnabled()&&this._firePaste(o.clone(),t)){if(r.singlePaste())this._clipboardManager.pasteCellFromClipboard(o,t);else{n=s.getPasteRows(o,t),e=(e=r.noDataEventWhenPaste()&&V1(n)&&1<n.length)&&this.dataSource().beginUpdate();try{s.pasteFromClipboard(o,null,n,e)}finally{e&&s._dataLock&&this.dataSource().endUpdate()}o.getRow(this)&&T1.isEditing(o.getRow(this).rowState())&&(i=o.getRow(this).getValue(o.dataField()),this.validateCellCommit(o,i),this.refreshView())}this._editController.reprepareEditor(o)}},$_editRowPasted:function(t,e,i,n){this._fireEditRowPasted(t,e,n,i)},$_pasted:function(t,e,i){this._firePasted(t,e,i)},$_sortColumnByUser:function(t){!this.isEmpty()&&t instanceof L2&&t.sortable()&&this.operateOptions().sortingEnabled()&&this._fireSorting(t)&&this.sortColumn(t)},selectColumnFilters:function(t){var e;if(!this.isRowEditing(null)&&t&&t.filterable()&&this.operateOptions().filteringEnabled()&&this._fireFiltering(t))if(e=t.$_fixed?this._fixedHeaderView.getView(t):this._headerView.getView(t),t.autoFilter().customFilter()){if(this.onCustomFilterAction){var i=e.boundsByScreen();this.onCustomFilterAction(this,t,i.x,i.y)}}else this._filterSelector.show(e,this.operateOptions().filterSelector())},closeFilterSelector:function(){this._filterSelector.hide()},closePopups:function(){this._filterSelector.hide(),this._popupMenuManager.close(),this._editController.closeList()},closePopups2:function(){this._popupMenuManager.close(),this._editController.closeList()},isFilterSelecting:function(t){return this._filterSelector.opened()&&this._filterSelector.column()===t},isReadOnlyCell:function(t,e){return this.getReadOnlyAt(t.rowIndex,t.column,e,!0)},getReadOnlyAt:function(t,e,i,n,s){var r,o,a,h,l,u,d;if(this.readMode())return!0;if(!(e instanceof L2))return!0;if(t<0)return!0;if((r=this._editOptions).readOnly())return!0;if(u=e.dataIndex(),!(l=this.dataSource())||u<0||(d=l.getField(u)).readOnly())return!0;if(!s&&d.dataType()===a1.OBJECT)return!0;if(!((a=this.getRow(t))&&a.canEdit()&&(T1.isInserting(a.rowState())||r.updatable()&&this._rowSource.canUpdateField(a,u))))return!0;if(!n){if((o=e.readOnlyCallback())&&Q3(h=o(P1.temp(t,e))))return h;if((o=r.readOnlyCallback())&&Q3(h=o(P1.temp(t,e))))return h}return(i=i instanceof x9?i:this.getCellStyle(a.dataIndex(),u))&&Q3(h=i.readOnly())?h:!!(e.readOnly()||j1.isDeleted(a.dataState())&&r.deletedRowReadOnly()||this.isFixedRowIndex(a.index())&&r.fixedRowReadOnly()||this.isFixedColumn(e)&&r.fixedColumnReadOnly())},getValueAt:function(t,e){var i=this.dataSource(),n=t instanceof g2?t:this.getRow(t);if(i&&n)return e=e instanceof L2?e.dataIndex():i.getFieldIndexEx(e),n.getValue(e)},getCellValue:function(t){if(this.isValidCell(t))return this.getValueAt(t.rowIndex,t.dataField())},setValueAt:function(t,e,i){var n=t instanceof g2?t:this.getRow(t);if(n){if("string"==typeof e){var s=this.dataSource();if(!s)return;e=s.getFieldIndexEx(e)}else e instanceof L2&&(e=e.dataIndex());n.isEditing()?n.setEditValue(e,i):n.setValue(e,i)}},setCellValue:function(t,e){this.isValidCell(t)&&this.setValueAt(t.rowIndex,t.dataField(),e)},copyCellValue:function(t){if(!this.isEditing()&&this.isRowEditing(t.getRow(this)))for(var e=t.rowIndex;0<e--;)if(0<=this.getRow(e).dataIndex()){var i=t.dataField();return this.setValueAt(t.rowIndex,i,this.getValueAt(e,i)),!0}},getDistinctValues:function(t,e){return this.rowSource().getDistinctValues(t,e)},searchRow:function(t,e,i,n,s,r){var o=-1,a=t&&e?Math.min(t.length,e.length):0;if(a<1)return o;var h=this.rowSource();if(!h)return o;var l=h.dataSource();if(!l)return o;var u,d,c=[],_=[];for(u=0;u<a;u++)0<=(d=l.getFieldIndexEx(t[u]))&&(_.push(d),c.push(e[u]));return _.length<1||(n=3<arguments.length?n:0,s=!(4<arguments.length)||s,r=5<arguments.length&&r,i=i instanceof y77?i:i?new y77(i):null,a=h.rowCount(),(o=(n=Math.max(0,n))<a?h.findItem(_,c,i,n,a-1):-1)<0&&s&&0<n&&(o=h.findItem(_,c,i,0,n-1)),0<=o&&r&&this.setFocusedRow(o,!0,!0)),o},searchCell:function(t,e,i,n,s,r,o){var a=null,h=t?t.length:0;if(t&&h<1)return a;var l=this.rowSource();if(!l)return a;var u=l.dataSource();if(!u)return a;if(void 0===e)return a;n=3<arguments.length?n:0,s=4<arguments.length?s:0,r=!(5<arguments.length)||r,o=6<arguments.length&&o,i=i instanceof l77?i:i?new l77(i):null;var d,c,_=[];if(t)for(d=0;d<h;d++)0<=(c=u.getFieldIndexEx(t[d]))&&_.push(c);else for(h=u.fieldCount(),d=0;d<h;d++)_.push(d);return 0<_.length&&(h=l.rowCount(),n=Math.max(0,n),s=Math.max(0,s),!(a=n<h?l.findCell(_,e,i,n,h-1,s):null)&&r&&0<n&&(a=l.findCell(_,e,i,0,n-1,0)),a&&(a.fieldName=u.getFieldName(a.fieldIndex))),a&&o&&(c=this.columnByField(a.fieldIndex,!0),this.setFocusedCell(a.rowIndex,c,!0,!0)),a},registerCellRenderers:function(t){this._dataCellRenderers.addRenderers(t),this.refreshView()},unregisterCellRenderers:function(t){this._dataCellRenderers.removeRenderers(t),this.refreshView()},registerCellEditors:function(t){this._dataCellEditors.addEditors(t),this.refreshView()},unregisterCellEditors:function(t){this._dataCellEditors.removeEditors(t),this.refreshView()},getCellEditor:function(t){return this._dataCellEditors.getEditor(t)},createCellStyleMap:function(){return new h08},existsCellStyle:function(t){return this._styleManager.hasStyle(t)},registerCellStyle:function(t,e,i){this._styleManager.registerStyle(t,e,i)},registerCellStyles:function(t,e){this._styleManager.registerStyles(t,e)},unregisterCellStyle:function(t){this._styleManager.unregisterStyles(t)},unregisterCellStyles:function(t){this._styleManager.unregisterStyles(t)},unregisterAllCellStyles:function(){this._styleManager.unregisterAll()},setCellStyle:function(t,e,i,n){this._styleManager.setStyleAt(t,e,i,n)},getCellStyle:function(t,e){return this._styleManager.getStyleAt(t,e)},getCellStyleId:function(t,e){var i=this._styleManager.getStyleAt(t,e);return i?i.id():null},getFocusedCellStyle:function(){var t=this.$_focusedIndex();if(t.column){var e=this._styleManager.getStyleAt(t.getDataIndex(this),t.column.dataIndex());return e?e.id():null}},setCellStyles:function(t,e,i){this._styleManager.setStylesAt(t,e,i)},setCellStyleRows:function(t,e,i,n){this._styleManager.loadStyleRows(t,e,i,n)},loadCellStyleRows:function(t,e,i,n){this._styleManager.loadStyleRows(t,e,i,n)},clearCellStyles:function(){this._styleManager.clear()},clearStyles:function(t){this._defaultStyles.clearValues(),this._styles.clearValues(),t&&(this.body().clearStyles(!0),this.panel().clearStyles(!0),this.groupPanel().clearStyles(!0),this.rowGroup().clearStyles(!0),this.header().clearStyles(!0),this.footer().clearStyles(!0),this.rowIndicator().clearStyles(!0),this.checkBar().clearStyles(!0))},alertCellError:function(t,e){this.displayOptions().alertCellError()&&O0(e),this._fireErrorClicked(t,e)},canMoveIndex:function(t){return this.displayOptions().fixedColumnMovable()||t>=this.lm().fixedColCount()},canMoveToIndex:function(t){return t>=(this.displayOptions().fixedColumnMovable()?0:this.lm().fixedColCount())},showProgress:function(t,e,i){this._progressManager.show(null,t,e,i)},setProgress:function(t,e,i,n){this._progressManager.setProperties(t,e,i,n)},closeProgress:function(){this._progressManager.close()},measureText:function(t,e){return this._container.measureText(t,e)},measureTextRect:function(t,e,i,n,s,r,o,a,h){return this._container.measureTextRect(t,e,i,n,s,r,o,a,h)},$_prepareContextMenu:function(){this.$_contextMenuHandler=function(t){var e=t.target||t.srcElement,i=w1.getBounds(e),n=t.clientX-i.left,s=t.clientY-i.top;if(this._fireContextMenuPopup(n,s)){var r=this._contextMenu||this._defaultContextMenu;r&&(t.preventDefault(),this._popupMenuManager.showContext(r,n,s))}}.bind(this),$_evl?this._container._canvas.addEventListener("contextmenu",this.$_contextMenuHandler):this._container._canvas.attachEvent("contextmenu",this.$_contextMenuHandler)},setDefaultContextMenu:function(t){return"string"==typeof t&&(t=this.getPopupMenu(t)),this._defaultContextMenu=t instanceof E4?t:t?new E4("gridContextMenu",this,t):null,this},getContextMenu:function(){return this._contextMenu||this._defaultContextMenu},setContextMenu:function(t){return this._contextMenu="string"==typeof t?this._popupMenuManager.getMenu(t):t instanceof E4?t:t?new E4("gridContextMenu",this,t):null,this._contextMenu},registerPopupMenu:function(t,e,i){return e instanceof E4?this._popupMenuManager.addMenu(t||e.name(),e,i):t&&e&&0<e.length&&this._popupMenuManager.addMenu(t,e,i),this},unregisterPopupMenu:function(t){return t&&this._popupMenuManager.removeMenu(t),this},getPopupMenu:function(t){return this._popupMenuManager.getMenu(t)},showPopupMenu:function(t,e,i,n,s,r){return e&&!1!==this._fireMenuPopup(t,e)&&this._popupMenuManager.show(e,i,n,s,r),this},showPopupMenuAt:function(t,e,i,n,s,r){return e&&!1!==this._fireMenuPopup(t,e)&&this._popupMenuManager.showAt(e,i,n,s,r),this},stopAutoFill:function(){return this._autoFillHandle.setMouseEnabled(!0),this},requestLoadAnimation:function(t){return t?this._animationRequests="*":this._animations.requestLoad(this.lm()),this},getRowHeight:function(t){return(t=this._parseRow(t))?t.$_height(this):NaN},setRowHeight:function(t,e,i){return(t=this._parseRow(t))&&t.isResizable()&&(t.$_setHeight(this,e),!i&&this.refreshView()),this},setRowHeights:function(t,e){if((t=t?this._parseRows(t):this.getAllRows())&&0<t.length){for(var i=t.length;i--;)t[i].$_setHeight(this,e);this.refreshView()}return this},clearRowHeights:function(){if(rows=this.getAllRows(),rows&&0<rows.length){for(var t=rows.length;t--;)rows[t].$_setHeight(this,void 0);this.refreshView()}return this},container:function(){return this._container},addElement:function(t,e){this._rootElement.addChild(t,e)},addLayer:function(t,e){this._rootLayer.addChild(t,e)},invalidate:function(){this._container.invalidate()},_beforeRender:function(t){this._linesLayer.invalidate(),this._scrollEdge&&this._scrollEdge.visible()&&this._scrollEdge.invalidate()},_afterRender:function(){this._imageLoaded=!1},$_setEditFocused:function(t){if(t!=this.$_editFocused&&(this.$_editFocused=t)){var e=this.$_focusedIndex();e&&this.isValidCell(e)||(e=this._selections.getFirstCell()||this.getFirstCell())&&this.setFocusedIndex(e,!1,!this._selections.contains(e))}},_resetFocusMask:function(){var t=this._layoutManager,e=t.gridBounds(),i=this.$_focusedIndex(),n=i.getRow(this);!t.rowGrouped()||this.mergedRowGrouped()||n instanceof v4?!(this.isValidCell(i)&&0<t.fixedColCount())||n instanceof j2||n instanceof m7||(i.column.root().displayIndex()<t.fixedColCount()?e.copyHorz(t.fixedBounds()):e.copyHorz(t.nonfixedBounds())):e.setLeft(t.rowGroupBounds().x),e.topBy(-1),e.leftBy(-1),this._dom?this._focusLayer._css.clip=w1.getClipRect(e):this._focusLayer._mask=e},$_requestFill:function(t,e,i){var n=this._styles.background();e.drawRectI(U1.WHITE,null,i),n instanceof U1?e.drawRectI(n,null,i):n&&(i=this.clientRectByChild(t,this._drawRect),e.drawRectI(n,null,i))},_doDraw:function(t){var e,i,n,s,r,o=this.dataSource(),a=this._displayOptions,h=this.clientRect();t.clipRect(h),this.isEmpty()?this.isEmptyData()&&!this.isEmptyColumns()&&(!a.checkDataInited()||o&&o.dataInited())&&((i=(e=this._body._emptyDataStyles).background())&&(U1.areEqual(i,U1.WHITE)||t.drawRectI(i,null,h)),(n=m8(a.emptyDataMessage(),E2._default.emptyDataMessage))&&(i=e.color(),s=e.font(),r=this.lm(),h.setTop(r._summaryBounds.bottom()),h.setBottom(r._footerBounds.y),e.deflatePaddings(h),t.drawTextRectExplicit(s,i,n,h,e.textAlignment(),e.lineAlignment()))):(i=this._styles.background())&&(U1.areEqual(i,U1.WHITE)||t.drawRectI(i,null,h))},_doDrawHtml:function(){var t,e,i,n,r;this._span&&(this._span.style.display="none"),this.isEmpty()?this.isEmptyData()&&!this.isEmptyColumns()&&((t=(e=this._body._emptyDataStyles).background())&&(this._dom.style.background=t.css()),s=m8(this._displayOptions.emptyDataMessage(),E2._default.emptyDataMessage),s&&(t=e.color(),i=e.font(),n=this.lm(),(r=this.clientRect()).setTop(n._summaryBounds.bottom()),r.setBottom(n._footerBounds.y),e.deflatePaddings(r),this._span?this._span.style.display="inline-block":this._span=w1.createSimpleSpan(this._dom),w1.renderTextRect(this._span,i,t,s,r,e.textAlignment(),e.lineAlignment(),"explicit"))):(t=this._styles.background())&&(c4?this.$_setCssFill(t):this._css.background=t?t.css():"")},setFocus:function(){this._editController.setFocus(!0)},getEditorText:function(){return this._editController.getEditText()},$_columnSpanChanged:function(t){this._columnSpansDirty||(this._columnSpansDirty=!0,this.invalidateLayout())},$_columnStyleNameChanged:function(t){t._runStyles=t._styleName?this._columnStyles[t._styleName]:void 0,this.invalidateLayout()},$_setPosition:function(t,e){var i,n;if(t._layoutRect.y=e,t instanceof O1&&0<(n=t.visibleCount()))if(t.vertical())if(1<n)for(i=0;i<n;i++)this.$_setPosition(t.getVisibleItem(i),e+1);else this.$_setPosition(t.getVisibleItem(0),e);else for(i=0;i<n;i++)this.$_setPosition(t.getVisibleItem(i),e)},$_setRoot:function(t){var e,i,n;if(0==t._layoutRect.y)t._dataRoot=t;else{for(n=t.group();n&&0!=n._layoutRect.y;)n=n.group();t._dataRoot=n}if(t instanceof O1)for(i=t.visibleCount(),e=0;e<i;e++)this.$_setRoot(t.getVisibleItem(e))},$_setDistance:function(t,e){t._distance=e;var i=1,n=Q2(t,O1);if(n){var s,r,o=n.visibleCount();if(n.vertical())for(s=0;s<o;s++)r=n.getVisibleItem(s),i=Math.max(i,this.$_setDistance(r,e));else for(s=i=0;s<o;s++)r=n.getVisibleItem(s),i+=this.$_setDistance(r,e+i)}return i},_resetColumnPositions:function(){for(var t=0,e=this.visibleColumnCount();t<e;t++){var i=this.getVisibleColumn(t);this.$_setPosition(i,0),this.$_setRoot(i),this.$_setDistance(i,1e6*t)}this._dataRoots.collect(this._rootColumn)},_resetColumnIndices:function(){this._rootColumn.resetIndices(this),this._resetVisibleColumns(),this._resetColumnPositions(),this._resetColumnStates()},_resetVisibleColumns:function(){this._rootColumn.resetVisibles()},_resetColumnStates:function(){this._rootColumn.resetStates()},_isColumnsDirty:function(){return this._columnsDirty},_isStylesDirty:function(){return this._stylesDirty},_rootGroup:function(){return this._rootColumn},stopAnimations:function(){return this._animations.stop()},fitColumnWidth:function(t,e,i,n,s){if(this._layouted){var r=this.lm();if(t)(t=t instanceof k4?t:this.columnByName(t))&&r.fitColumnWidth(t,n,i,e,s);else for(var o=this.visibleColumnCount();o--;)r.fitColumnWidth(this.getVisibleColumn(o),n,i,e,s)}else this.$_fitColumnWidthRequest=function(){this.fitColumnWidth(t,e,i,n,s)}},fitRowHeight:function(t,e,i){var n=this._displayOptions;(t=this._parseRow(t))&&t.isResizable()&&!this._columnVerticalGrouped&&n.variableRowHeight()&&(e=isNaN(e)?n.minRowHeight():e,i=isNaN(i)?n.maxRowHeight():i,h=this.lm().fitRowHeight(t,e,i),!isNaN(h)&&h&&this.setRowHeight(t,h))},execute:function(t){var e=this.rowSource();return e&&e.execute(t)},canUndo:function(){var t=this.rowSource();return t&&t.canUndo()},canRedo:function(){var t=this.rowSource();return t&&t.canRedo()},undo:function(){this._editController.cancelEditor();var t=this.rowSource();return t&&(t.setCancelWhenUndo(this.editOptions().cancelWhenUndo()),t.undo()),this},redo:function(){var t=this.rowSource();return t&&t.redo(),this},clearUndo:function(t){var e=this.rowSource();return e&&e.clearUndo(t),this},_createDataTagManager:function(){},_checkEditing:function(){if(this.itemSource()instanceof k2&&this.itemSource().isEditing())throw"Item is editing"},_focusHandler:function(t){this._editController.setFocus()},_validateScrollBars:function(){this._hscrollView&&this._hscrollView._mouseOut(),this._vscrollView&&this._vscrollView._mouseOut()},_addGroupView:function(){this.addElement(this._bandedGroupView)},_addGridObject:function(t){this._gridObjects.push(t)},_cleanGridObjects:function(){for(var t=0,e=this._gridObjects.length;t<e;t++)this._gridObjects[t].clean();this._stylesDirty=!1},_visualObjectChanged:function(t){t instanceof k37?this._panelView.invalidate():t instanceof a27?this._groupPanelView&&this._groupPanelView.invalidate():t instanceof B8?this._bodyView.invalidate():t instanceof B27?this._rowIndicatorView.invalidate():t instanceof v8?this._checkBarView.invalidate():t instanceof q27?this._headerView.invalidate():t instanceof v27&&this._footerView.invalidate()},_doLayout:function(t){var e,i,n,s=this.lm(),r=this.activeTool(),o=this._gridRect;if(o.copy(t),this._bordersLayer.updateElement(),this._bordersLayer.setRect(o),this._bordersLayer.deflate(o),this._rootElement.setRect(o),this._rootLayer.setRect(o),o.x=o.y=0,void 0!==this._requestedFocusedDataRow)try{this.setFocusedDataRow(this._requestedFocusedDataRow,!0)}catch(t){I7(t)}finally{this._requestedFocusedDataRow=void 0}this._resetting=!1;try{this.$_doLayoutWmv(this._wmv,o),this.$_doLayout(o)}finally{this._loading?(this._loading=!1,this._animations.requestLoad(s)):this._animationRequests&&this._animations.requestLoad(s),this._animationRequests=void 0,this._dataChanged=!1}this._cleanGridObjects(),(this._columnsDirty||this._dirtyEditor)&&(this._columnsDirty=!1,this._rootColumn.clean(),this._dirtyEditor&&(this.reprepareEditor(),this._dirtyEditor=void 0)),this._columnLayoutChanged=!1,this._columnSpansDirty=!1,0<(e=s.itemCount()+s.fixedItemCount())&&((i=s.topIndex()+e)==this._prevLast||i!=this.rowCount()||r.mousePressing()||(r.mousePressed()&&r.setMousePressing(!0),setTimeout(function(){this._fireScrollToBottom()}.bind(this),0)),this._prevLast=i),this._topIndex!=this._prevTopIndex&&(0!=(i=this._prevTopIndex)&&0==this._topIndex&&this._fireScrollToTop(),this._prevTopIndex=this._topIndex,this._fireTopIndexChanged(this._topIndex,i)),this._leftPos!=this._prevLeftPos&&(i=this._prevLeftPos,this._prevLeftPos=this._leftPos,this._fireLeftPosChanged(this._leftPos,i)),e!=this._prevRowCount&&(i=this._prevRowCount,this._prevRowCount=e,this._fireDisplayRowCountChanged(e,i)),this.$_checkCurrentRow(),(n=this.$_fitColumnWidthRequest)&&(this.$_fitColumnWidthRequest=null,n.call(this),this._doLayout(o))},$_doLayoutWmv:function(t,e){var i;!t&&S67&&(e.width=.3*e.height),(i=this.activeTool()).mousePressed()&&i.mousePressing(),i=this.activeTool(),this.lm()&&i.mousePressing()},$_prepareColumns:function(t,e,i,n,s,r,o,a,h,l){var u=t.visibleCount(),d=i.sysDefault(),c=n.sysDefault(),_=s.sysDefault(),f=r.sysDefault(),g=o.sysDefault(),m=a.sysDefault(),p=h.sysDefault(),w=l.sysDefault();t.styles().setParent(i,!1),t.header().styles().setParentAndDefault(n,c),t.footer().styles().setParentAndDefault(h,p),t.header().summary().styles().setParentAndDefault(o,g);for(var v=0;v<u;v++){var C=t.getVisibleItem(v);if(C.prepareLayout(this,t.$_fixed||v<e,e),C.styles().setSysDefault(d,!1),C instanceof t2){var I=C.header();C.styles().setParent(i,!1),I.styles().setParentAndDefault(s,_),I.subStyles().setParentAndDefault(r,f),I.summary().styles().setParentAndDefault(a,m),C.footer().styles().setParentAndDefault(l,w),C instanceof L2&&C.dynamicStyles().prepare()}else C instanceof O1&&this.$_prepareColumns(C,0,i,n,s,r,o,a,h,l)}},$_doLayout:function(t){var e,i,n,s,r,o=this._displayOptions,a=this._rootColumn.visibleCount(),h=Math.max(0,Math.min(a,o.fixedColumnCount())),l=this._body.cellStyles(),u=this._header.styles(),d=this._header.groupStyles(),c=this._header.subStyles(),_=this._header.summary().groupStyles(),f=this._header.summary().styles(),g=this._footer.styles(),m=this._footer.groupStyles(),p=this._rowGroup,w=this._layoutManager,v=(w.yU(),t.clone());if(this.$_fixedColCount=h,this.$_fixedRowCount=this._displayOptions.fixedRowCount(),this.$_hideBorders=this._displayOptions.hideBordersWhenFitted(),this.$_sortFieldCount=this.getSortFieldCount(),1<this.$_sortFieldCount){var C=this._header.sortOrderStyles();this.$_sortOrderFont=C.font(),this.$_sortOrderColor=C.color()}if(this.$_nanText=this._displayOptions._nanText,this._header.$_prepareUpdate(),this._body.$_prepareUpdate(),this._rowIndicator.$_prepareUpdate(),this._checkBar.$_prepareUpdate(),this._rootColumn.prepareLayout(this,!1,h),this.$_prepareColumns(this._rootColumn,h,l,d,u,c,_,f,m,g),this.$_buttonRenderer=this._delegate.getCellButtonRenderer(),this.$_customButtonRenderer=this._delegate.getCustomButtonRenderer(),this.rowGrouped())for(e=0,n=p.levelCount();e<n;e++)(i=p.getLevel(e))&&(i.headerStyles().setParent(p.headerStyles(),!1),i.footerStyles().setParent(p.footerStyles(),!1),i.expanderStyles().setParent(p.expanderStyles(),!1));this._linesLayer.invalidate(),this._columnWidthsDirty&&(this._columnWidthsDirty=!1,this.$_resetColumnWidths()),Y8<K77&&delete this._body,a<1?(this._rootElement.setVisible(!1),this._emptyView.setVisible(!0),this._emptyView.setSize(v.width,v.height),this._emptyView.invalidate()):(this._emptyView.setVisible(!1),this._rootElement.setVisible(!0)),w.setHeightMeasurer(this.heightMeasurer()),w.measure(v,this._leftPos,this._topIndex,this._vscrollBar.displayWidth(),this._hscrollBar.displayWidth()),this._topIndex=w.topIndex(),s=this._leftPos=w.leftPos(),w.layout(v),(r=this.activeTool())&&r.layoutChanged(),this._updateScrollBars(w,v),this._footerView.visible()&&(w.rowGrouped()&&0<s?((v=w.footerBounds()).x=s,v.y=0,this._footerView.setMask(v)):this._footerView.setMask(null)),this._layoutSelectionViews(),this._layoutAutoFillHandle(),this._layouted=!0;var I=this.getCellView(null,this.$_focusedIndex());I&&I.setFocused(!0),this._editController.resetEditor()},fixedRowsChanged:function(){this.rowSource()&&(this.rowSource().setFixed(this.displayOptions().fixedRowCount(),!this.operateOptions().exceptFixedRowsFromSorting(),!this.operateOptions().exceptFixedRowsFromFiltering()),this.$_invalidateEditor(this.focusedColumn()))},operateOptionsChanged:function(){this._doOperateOptionsChanged()},_doOperateOptionsChanged:function(){},_createEmptyView:function(t){return new U78(t)},_createPanelModel:function(){return new k37(this)},_createPanelView:function(t,e){return new K37(t,e)},_createGroupPanelModel:function(){return new a27(this)},_createGroupPanelView:function(t,e){return null},_createFooterModel:function(){return new v27(this)},_createFooterView:function(t,e,i){return new Z37(t,e,i)},_createBodyView:function(t,e,i){return new X27(t,e,i)},_createDelegate:function(){return 0<=E67.indexOf("grid")?new l47(this):null},_createLayoutManager:function(){return new F17(this)},_createEditController:function(){return this.readMode()?new b08(this):D0()?new Z08(this):new A08(this)},_createAnimationManager:function(){return new V08(this)},_columnIndexChanged:function(t,e){this.clearSelection(),this._resetColumnIndices(),this.refreshView(),t&&this._displayOptions._singleColumnIndices&&this._fireColumnMoved(t,t.displayIndex(),e)},_columnDisplayIndexChanged:function(t,e,i){this.clearSelection(),this._resetVisibleColumns(),this._resetColumnPositions(),this.refreshView(),t&&this._fireColumnMoved(t,i,e)},_columnParentChanged:function(t,e,i){t&&this._fireColumnParentChanged(t,i,e)},_columnVisibleChanged:function(t){t&&this._fireColumnVisibleChanged(t)},_columnChecked:function(t,e){this._fireColumnChecked(t,e)},_editColumnChanged:function(t){this.refreshView(),this._editController&&this._editController.editColumnChanged(t)},_updateScrollBars:function(t,e){var i,n,s,r,o,a,h=this._hscrollBar,l=this._vscrollBar;(i=this._hscrollView)||(i=this._hscrollView=new y5(this._dom,!1),this._scrollLayer.addElement(i),i.addListener(this)),i.updateElement(h),n=t.bodyBounds().width,s=Math.min(e.width-t.gridBounds().x-t.fixedWidth()-(t._vscrolled?l.displayWidth():0),t.columnsLength()-t.leftPos()),i.setProperties(0,n,s),i.setPosition(t.leftPos()),i.setVisible(t._hscrolled&&h.visible()),(i=this._vscrollView)||(i=this._vscrollView=new y5(this._dom,!0),this._scrollLayer.addElement(i),i.addListener(this)),i.updateElement(l),o=(r=this.rowCount())-t.fixedItemCount(),a=Math.min(t.fullItemCount(),r-t.topIndex()),i.setProperties(0,o,a),i.setPosition(t.topIndex()),i.setVisible(t._vscrolled&&l.visible()),this._layoutScrollBars(t,e),this._scrollEdge||(this._scrollEdge=new W47(!0),this._scrollLayer.addElement(this._scrollEdge));var u=!1;if(!this.isEmpty()){h=this._hscrollView,l=this._vscrollView;var d,c,_,f=h&&h.visible(),g=l&&l.visible();f&&l&&g&&(d=l.width(),c=h.height(),this._scrollEdge.updateElement(this._scrollEdgeStyles),this._scrollEdge.setBounds(e.width-d,e.height-c,d,c),u=!0),_=this._hscrollIndenter,f&&0<h.x()?(c=h.height(),_||(_=this._hscrollIndenter=new W47(!0),this._scrollLayer.addElement(_)),_.updateElement(this.hscrollBar().indentStyles()),_.setBounds(0,h.y(),h.x(),c),_.setVisible(!0)):_&&_.setVisible(!1),_=this._vscrollIndenter,g&&0<l.y()&&this._layoutManager._allScrolled?(d=l.width(),_||(_=this._vscrollIndenter=new W47(!0),this._scrollLayer.addElement(_)),_.updateElement(this.vscrollBar().indentStyles()),_.setBounds(l.x(),0,d,l.y()),_.setVisible(!0)):_&&_.setVisible(!1)}this._scrollEdge.setVisible(u)},_layoutScrollBars:function(t,e){this._scrollLayer.setRect(e);var i,n=this._hscrollBar,s=this._vscrollBar,r=n.barWidth(),o=s.barWidth(),a=this._hscrollView,h=this._vscrollView;if(a.visible()){switch(i=0,n.barIndent()){case c6.HEADER:i+=t.checkBarBounds().right()-e.x;break;case c6.FIXED:i+=t.nonfixedBounds().x-e.x}a.setBounds(i,e.height-r,e.width-(h.visible()?o:0)-i,r),a.layoutContent()}if(h.visible()){switch(i=0,s.barIndent()){case c6.HEADER:i+=t.bodyBounds().y-e.y;break;case c6.FIXED:i+=t.nonfixedBounds().y-e.y}h.setBounds(e.width-o,i,o,e.height-(a.visible()?r:0)-i,o),h.layoutContent()}},_addSelectionElement:function(t){return!(!t||this._selectionLayer.contains(t)||(this._selectionLayer.addElement(t,this._toolContext),0))},_removeSelectionElement:function(t){return!!this._selectionLayer.contains(t)&&(this._selectionLayer.removeElement(t),!0)},_addSelectionView:function(t){var e=null;return this._selectionViews.get(t)||(e=this._delegate.borrowSelectionView(t),this._selectionViews.set(t,e),this._addSelectionElement(e)),e},_removeSelectionView:function(t,e){var i=this._selectionViews.get(t);i&&(this._removeSelectionElement(i),this._delegate.returnSelectionView(i),this._selectionViews.unset(t),e&&this._selectionLayer.invalidate(!0,!0))},_clearSelectionViews:function(t){this._selectionViews.isEmpty()||(this._selectionViews.each(function(t,e){this._removeSelectionElement(e),this._delegate.returnSelectionView(e)}.bind(this)),this._selectionViews.clear(),t&&this._selectionLayer.invalidate(!0,!0))},_layoutAutoFillHandle:function(){if(this._layouted){var t=!1,e=this._autoFillHandle;if(e){if(this._autoFill.enabled()&&!this.isEditing()&&!this.isRowEditing()){var i,n,s,r,o,a=this._selections.lastItem(),h=this.lm(),l=this.activeTool(),u=this._dom?6:7,d=this._dom?6:7;if(!a||a.isSingleCell())0<=this.focusedDataIndex()&&(i=l.getFocusRect())&&(i.right()>=h.gridBounds().right()&&(u=9),i.bottom()>=h.gridBounds().bottom()&&(d=9),e.setPosition(i.right()-u,i.bottom()-d),t=!0);else{for(s=!1,i=(r=a.getBounds()).R1();i<=r.R2();i++)if((n=this.getRow(i))&&0<=n.dataIndex()){s=!0;break}s&&(o=this._selectionViews.get(a))&&o.visible()&&a.getBounds().bottomIsVisible(this)&&(i=o.boundsBy(this._selectionLayer),(h.fixedColCount()<=0||r.firstCell().column.root().displayIndex()<h.fixedColCount()||i.right()>this.fixedBodyView().boundsByContainer().right())&&(i.right()>=h.gridBounds().right()&&(u=10),i.bottom()>=h.gridBounds().bottom()&&(d=10),e.setPosition(i.right()-u+1,i.bottom()-d+1),t=!0))}this._autoFillLayer.setMask(this.lm().gridBounds())}e.setVisible(t)}}},_layoutSelectionViews:function(){if(this._layouted&&!this._resetting){var t=this._displayOptions.selectDisplay(),h=!1;if(t==t8.CELL||t==t8.CELL_AND_BORDER){if(this._selectCellViews(),!this._body._selectionStyles.border())return void this._clearSelectionViews(!0);h=!0}else this._clearCellSelections();this._selectionViews.each(function(t,e){var i,n,s=D0(),r=this._displayOptions.showSingleSelection(),o=this._selections.isSingleCell(),a=this.lm();!o||s||r?(this.$_singleSelected=!1,n=new g1,i=t instanceof w9?this.$_getSelectionRowsRect(a,t,n):t instanceof E9?this.$_getSelectionColumnsRect(a,t,n):this.$_getSelectionRangeRect(a,t,n,o),e._dom&&!e.visible()&&(e._css.left=n.x+"px",e._css.top=n.y+"px",e._css.width=0,e._css.height=0),e.setVisible(i),e._borderOnly=h,e.visible()&&(e.setRectI(n),e.updateElement(t,s?this._body.mobileSelectionStyles():this._body.selectionStyles()),e.invalidate())):(e.setVisible(!1),this.$_singleSelected=!0)}.bind(this))}},_clearCellSelections:function(){var t=this._bodyView,e=this._fixedBodyView.visible()?this._fixedBodyView:null,i=this._mergeView.visible()?this._mergeView:null,n=this._fixedMergeView.visible()?this._fixedMergeView:null;t&&t.$_clearSelections(),e&&e.$_clearSelections(),i&&i.$_clearSelections(),n&&n.$_clearSelections()},$_setCellSelections:function(t){var e,i,n=[],s=this._bodyView,r=this._fixedBodyView.visible()?this._fixedBodyView:null,o=this._mergeView.visible()?this._mergeView:null,a=this._fixedMergeView.visible()?this._fixedMergeView:null,h=this._selections,l=h.count();for(e=0;e<l;e++)i=h.getItem(e),n.push(i);s&&s.$_setSelections(n,t),r&&r.$_setSelections(n,t),o&&o.$_setSelections(n),a&&a.$_setSelections(n)},_selectCellViews:function(){this._selections.isSingleCell()?(this.$_singleSelected&&this._clearCellSelections(),this.$_singleSelected=!0,(D0()||this._displayOptions.showSingleSelection())&&this.$_setCellSelections(!0)):(this.$_singleSelected=!1,this.$_setCellSelections())},$_getSelectionRowsRect:function(t,e,i){var n,s,r,o=t.itemCount(),a=t.fixedItemCount(),h=e instanceof J5?e.getBounds():e,l=h.R1(),u=h.R2(),d=this.topIndex();if(0<a){if(d+a+o<=l||u<0||a<=l&&u<d+a)return!1;r=t.fixedHeight(),n=l<a?t.itemBounds(Math.max(0,l)):t.itemBounds(Math.max(0,l-d)),u<a?s=t.itemBounds(u):d<=u?(s=t.itemBounds(Math.min(o+a-1,u-d))).y=Math.max(s.y,r):s=n}else{if(!(0<o))return!1;if(d+o<=l||u<d)return!1;n=t.itemBounds(Math.max(0,l-d)),l<d&&(n.y-=n.height),s=t.itemBounds(Math.min(o-1,u-d))}return i.copy(n.union(s)),i.offset(0,t.bodyBounds().y),i.setRight(t.bodyBounds().right()),!0},$_getSelectionColumnsRect:function(t,e,i,n){var s,r,o=e instanceof J5?e.getBounds():e,a=t.fixedColCount();return this.leftPos(),n||(s=t.dataRootRect(o.C1()),r=t.dataRootRect(o.C2()),i.setLeft(s.x),0<a&&o.C2().root().displayIndex()>=a?i.setRight(Math.max(r.right(),t.fixedBounds().right())):i.setRight(r.right())),n||(r.setBottom(t.itemRect(t.itemCount()-1).bottom()),i.setTop(t.headerBounds().y),i.setBottom(r.bottom())),!0},$_getSelectionRangeRect:function(t,e,i,n){var s=new g1;return!!this.$_getSelectionRowsRect(t,e,s)&&(n?i.copy(t.dataCellRect(e._startIndex)):(i.setTop(s.y),i.setBottom(s.bottom()),this.$_getSelectionColumnsRect(t,e,s),i.setLeft(s.x),i.setRight(s.right())),!0)},initStyles:function(){var t=this.panel(),e=this.groupPanel(),i=this.rowIndicator(),n=this.checkBar(),s=this.header(),r=this.footer(),o=this.body(),a=this.rowGroup(),h=(this.headerItems(),this.footerItems(),this.vscrollBar()),l=this.hscrollBar(),u=this.defaultStyles(),d=this.styles(),c=e.styles(),_=(o.styles(),s.styles()),f=s.summary().styles(),g=r.styles(),m=a.headerStyles(),p=o2.Default,w=p.scrollBar();t.styles().$_spd(u,p.panel()),c.$_spd(u,p.groupPanel()),e.itemStyles().$_spd(c,p.groupPanelItem()),e.itemInnerStyles().$_spd(c,p.groupPanelItemInner()),e.head().styles().$_spd(c,p.groupPanelHead()),e.head().innerStyles().$_spd(c,p.groupPanelHeadInner()),o.styles().$_spd(u,p.body()),o.emptyStyles().$_spd(u,p.bodyEmpty()),o.emptyDataStyles().$_spd(u,p.bodyEmptyData()),o.rowStyles().$_spd(u,p.bodyRow()),o.fixedRowStyles().$_spd(u,p.bodyFixedRow()),o.cellStyles().$_spd(u,p.bodyCell()),o.fixedCellStyles().$_spd(o.cellStyles(),p.bodyFixedCell()),o.mergedStyles().$_spd(o.cellStyles(),p.bodyMerged()),o.fixedMergedStyles().$_spd(o.fixedCellStyles(),p.bodyFixedMerged()),o.fixedColumnBarStyles().$_spd(u,p.bodyFixedColumnBar()),o.fixedRowBarStyles().$_spd(u,p.bodyFixedRowBar()),s.styles().$_spd(u,p.header()),s.head().styles().$_spd(_,p.headerHead()),s.groupStyles().$_spd(u,p.headerGroup()),s.subStyles().$_spd(_,p.headerSub()),s.menuHandleStyles().$_spd(u,p.headerMenuHandle()),s.filterHandleStyles().$_spd(u,p.headerFilterHandle()),s.sortHandleStyles().$_spd(u,p.headerSortHandle()),s.sortOrderStyles().$_spd(u,p.headerSortOrder()),s.summary().styles().$_spd(u,p.headerSummary()),s.summary().head().styles().$_spd(f,p.headerSummaryHead()),s.summary().groupStyles().$_spd(u,p.headerSummaryGroup()),r.styles().$_spd(u,p.footer()),r.groupStyles().$_spd(u,p.footerGroup()),r.head().styles().$_spd(g,p.footerHead()),i.styles().$_spd(u,p.rowIndicator()),i.stateStyles().$_spd(u,p.rowIndicatorState()),n.styles().$_spd(u,p.checkBar()),n.headStyles().$_spd(_,p.checkBarHead()),a.headStyles().$_spd(_,p.rowGroupHead()),m.$_spd(u,p.rowGroupHeader()),a.expanderStyles().$_spd(m,p.rowGroupExpander()),a.footerStyles().$_spd(u,p.rowGroupFooter()),a.indentStyles().$_spd(u,p.rowGroupIndent()),a.barStyles().$_spd(m,p.rowGroupBar()),a.headerBarStyles().$_spd(m,p.rowGroupHeaderBar()),a.footerBarStyles().$_spd(a.footerStyles(),p.rowGroupFooterBar()),this._headerItemStyles.$_spd(u,p.headerItem()),this._footerItemStyles.$_spd(u,p.footerItem()),h.styles().$_spd(w),h.buttonStyles().$_spd(p.scrollBarButton(),w),h.thumbStyles().$_spd(p.scrollBarThumb(),w),h.indentStyles().$_spd(p.scrollBarIndent(),w),l.styles().$_spd(w),l.buttonStyles().$_spd(p.scrollBarButton(),w),l.thumbStyles().$_spd(p.scrollBarThumb(),w),l.indentStyles().$_spd(p.scrollBarIndent(),w),this._scrollEdgeStyles.$_spd(p.scrollEdge(),w),u.$_ssd(p.default(),!1),d.$_ssd(p.grid(),!1),o.selectionStyles().$_ssd(p.bodySelection(),!1),o.mobileSelectionStyles().$_ssd(p.bodyMobileSelection(),!1),this._displayOptions.rowHoverMask().styles().$_ssd(p.bodyRowHover(),!1),i.createdStyles().$_ssd(p.rowIndicatorCreated(),!1),i.updatedStyles().$_ssd(p.rowIndicatorUpdated(),!1),i.deletedStyles().$_ssd(p.rowIndicatorDeleted(),!1),this._displayOptions.tooltipStyles().$_ssd(p.tooltip(),!1)},$_resetColumnWidths:function(){for(var t=this._rootColumn.visibleCount();t--;){var e=this._rootColumn.getVisibleItem(t);e._displayWidth=e._groupWidth=e._width=Y1(e.width()),e instanceof O1&&e.resetGroupWidths()}},_canMerge:function(){return!1},$_populateColMerges:function(t,e){var i=t.stateFor(f4.MERGE_ROOMS);i||(i=new f4(t),t.setState(f4.MERGE_ROOMS,i)),i.clear(),e&&i.initialize(d9.INIT_COUNT)},_populateMerges:function(){var t,e,i,n,s;if(this._canMerge()&&this.dataSource())for(cnt=this.visibleColumnCount(),t=0;t<cnt;t++)if((i=this.getVisibleColumn(t))instanceof O1)for(e=i.visibleCount();e--;)(n=i.getVisibleItem(e)).canMerge()&&this.$_populateColMerges(n,!0);else i.canMerge()&&(s=!(i instanceof L2&&i.mergeGrouped())||0<this.getGroupLevel(i.dataIndex()),this.$_populateColMerges(i,s))},_sortRows:function(e,t,i){var n=this.dataSource();if(n){var s,r=n.fieldCount(),o=e?e.concat():[],a=t?t.concat():[],h=i?i.concat():[];for(s=o.length;s--;)(isNaN(o[s])||o[s]<0||o[s]>=r)&&(o.splice(s,1),a.length>s&&a.splice(s,1),h.length>s&&h.splice(s,1));this._toastManager.show(this.operateOptions().sortingToast(),!0,function(){var t=!this.operateOptions().keepFocusedRowWhenSort()&&this.$_focusedIndex()?this.$_focusedIndex().getDataIndex(this):-1;this.leftPos(),this._doSortRows(e,a,h),0<=t&&(this.setFocusedDataRow(t,!1,!0),(t=this.getRowOfDataIndex(t))&&this.makeRowVisible(t.index()))}.bind(this))}},_doSortRows:function(t,e,i){var n=this.itemSource();n&&n.orderBy(t,e,i)},_clearFitWidths:function(){this._rootColumn.clearFitWidths()},_doOperateOptionsChanged:function(){},$_rowGroupDisplayModeChanged:function(){this._doRowGroupDisplayModeChanged()},_doRowGroupDisplayModeChanged:function(){},$_rowGroupAdornmentsChanged:function(){this._doRowGroupAdornmentsChanged()},_doRowGroupAdornmentsChanged:function(){},$_summaryModeChanged:function(){this._doSummaryModeChanged()},_doSummaryModeChanged:function(){},$_groupSummaryModeChanged:function(){this._doGroupSummaryModeChanged()},_doGroupSummaryModeChanged:function(){},_columnMergeRuleChanged:function(t){this._populateMerges(),this.refreshView()},$_columnFiltersChanged:function(t){this._doColumnFiltersChanged(t)},_doColumnFiltersChanged:function(t){this.applyFilters()},_editorStarted:function(t,e){this.edit(e)},_editorChange:function(t,e,i){this._fireEditChange(e,i)},getEditValue:function(t,e,i){this._doGetEditValue(e,i)},_doGetEditValue:function(t,e){var i=t.column.editCallback();i&&i(t,e)},setEditValue:function(t,e,i){return this._doSetEditValue(e,i)},_doSetEditValue:function(t,e){if(!t.column.editTextCallback)return e;var i,n=t.column.editTextCallback();return n&&(i=n(t,e)),void 0===i?e:i},editorCommit:function(t,e,i,n){return this._doCellCommit(e,i,n)},_doCellCommit:function(t,e,i){return this._fireEditCommit(t,i,e)},editorCancel:function(t,e,i){return this._fireEditCanceled(e,i)},editorCanceled:function(){this.activeTool().resetFocus()},_editorSearch:function(t,e,i){this._fireEditSearch(e,i)},$_validateCell:function(t,e,i){try{this._fireValidateCell(t,i,e)}catch(e){if(e instanceof n7&&e.level!==K4.IGNORE)throw e.column=t.column,e;throw e}},$_validateRow:function(t,e){var i,n,s,r,o,a=this.getDataColumns();for(i=0,cnt=a.length;i<cnt;i++)n=a[i],s=P1.temp(t.index(),n),r=t.getValue(n.dataIndex()),this.$_validateCell(s,r,e);try{o=t.getRowObject(),this._fireValidateRow(t,e,o)}catch(t){if(!(t instanceof n7))throw t;if(K4.compare(t.level,this.editOptions().commitLevel())<0)throw t}},$_validateCellValue:function(t,e){try{var i=T1.isInserting(t.getRow(this).rowState());this._validationManager.validateCell(t,i),this.$_validateCell(t,e,i),t.dataColumn().setError(null),t.dataColumn().setErrorLevel(K4.IGNORE);var n=t.getDataIndex(),s=t.dataColumn().dataIndex(),r=this._validationManager._validateCellList&&this._validationManager._validateCellList[n];return r&&r[s]&&delete r[s],!0}catch(e){if(!(e instanceof n7))throw e;t.dataColumn().setError(e.message||e),t.dataColumn().setErrorLevel(e.level||K4.ERROR),this._validationManager._userValidations&&this._validationManager.addInvalidateCell(t,e)}return!1},validateCellCommit:function(t,e){this.editOptions().validateOnEdited()&&this.$_validateCellValue(t,e)},checkValidateCells:function(){return this._validationManager.checkValidateCells()},clearInvalidateList:function(){this._validationManager.$_clearInvalidateList()},scrollRow:function(t){var e=this.topIndex();this.setTopIndex(e+t),t=this.topIndex()-e},$_getFieldDefaults:function(t){return t?t.getDefaultValues():[]},$_getColumnDefaults:function(t,e){for(var i=0,n=t.count();i<n;i++){var s=t.getItem(i);if(s instanceof L2){var r=s.$_getDefaultValue(this._columnDefaultRuntime);r!==c2&&(e[s.dataIndex()]=r)}else s instanceof O1&&this.$_getColumnDefaults(s,e)}},$_getInsertDefaults:function(t){var e=this.$_getFieldDefaults(this.itemSource().dataSource());return this.$_getColumnDefaults(this._rootColumn,e),e},_clearColumnErrors:function(){!function t(e){for(var i=0,n=e.count();i<n;i++){var s=e.getItem(i);s instanceof L2?s.setError(null):s instanceof O1&&t(s)}}(this._rootColumn)},$_checkCurrentRow:function(t){var e=this.$_focusedIndex();if(e){var i=e.getDataId(this),n=e.getDataIndex(this);if(t||i!=this._currentRowId){clearTimeout(this._rowChangeTimer);var s=this._currentRow,r=this._displayOptions.rowChangeDelay(),o=q4(),a=t||r<=0||o-this._currentRowChanged>=r;return this._currentRowId=i,this._currentRow=n,this._currentRowChanged=o,a?this._fireCurrentRowChanged(n,s):0<r&&(this._rowChangeTimer=setTimeout(this._rowChangeTimerCallback,r)),!0}}return!1},$_checkLastCellCommit:function(t){t&&t.isLastColumn()},$_restoreEditValue:function(t){if(t=t||this.$_focusedIndex()){var e=t.getRow(this);if(e&&this.isRowEditing(e)&&e.rowState()==T1.UPDATING&&!this.isEditing(t)){var i=t.column.dataIndex();return e.setValue(i,this.dataSource().getValue(e.dataIndex(),i)),!0}}return!1},$_seriesColumnChanged:function(t){t.cached()?this._dataTags.addSeries(t):this._dataTags.removeSeries(t)},$_calculatedColumnChanged:function(t){t.cached()?this._dataTags.addCalculated(t):this._dataTags.removeCalculated(t)},_doColumnsReset:function(t,e){},_columnsReset:function(t,e){if(!this._columnsLock){this._rootColumn.initVisibles(),this._resetColumnIndices(),this._columnVerticalGrouped=!1;for(var i=0,n=this._rootColumn.count();i<n;i++){var s=this._rootColumn.getItem(i);s instanceof O1&&(s.initGroupWidths(),this._columnGrouped=!0,this._columnVerticalGrouped||(this._columnVerticalGrouped=s.$_isVeritcalGrouped()))}this._columnWidthsDirty=!0,this._columnsDirty=!0,this.$_initColumnStylesMap(e||t),this.refreshView(),this._doColumnsReset(t)}},_columnsRestore:function(t){if(!this._columnsLock){this._rootColumn.initVisibles(),this._resetColumnIndices();for(var e=0,i=this._rootColumn.count();e<i;e++){var n=this._rootColumn.getItem(e);isNaN(n._saveWidth)||(n._width=n._displayWidth=n._groupWidth=n._saveWidth),n instanceof O1&&0<n.count()&&n.restoreGroupWidths()}this._columnWidthsDirty=!0,this._columnsDirty=!0,this.refreshView(),this._doColumnsReset(t)}},_saveOrgWidths:function(){for(var t=0,e=this._orgColumns.length;t<e;t++){var i=this._orgColumns[t];i._orgWidth=i.saveWidth(),i instanceof O1&&i._saveOrgWidths()}},_restoreOrgWidths:function(){for(var t=0,e=this._orgColumns.length;t<e;t++){var i=this._orgColumns[t];i.setSaveWidth(i._orgWidth),i instanceof O1&&i._restoreOrgWidths()}},$_customGridItemChanged:function(t){this.refreshView()},$_invalidateEditor:function(t){t!==this.focusedColumn()||this._dirtyEditor||(this._dirtyEditor=t,this.invalidateLayout())},_parseRow:function(t){return t instanceof g2||(t=this.getRow(t)),t},_parseRows:function(t,e){if(t){var i,n,s=[];for(i=t.length;i--;)(n=t[i])instanceof g2||(n=this.getRow(n)),(n||e)&&s.push(n);return s}},$_getMergeCell:function(t){var e=null;return this._mergeView&&this._mergeView.visible()&&(e=this._mergeView.getCellView(t)),!e&&this._fixedMergeView&&this._fixedMergeView.visible()&&(e=this._fixedMergeView.getCellView(t)),e},_doRevealRow:function(t){},$_autoFilling:function(t,e,i,n){},$_autoFillComplete:function(t,e,i,n){},$_autoFillCompleted:function(t,e,i,n,s){this._fireAutoFilled(t,e,i,n,s)},_getValidIndex:function(t){return t instanceof P1?t:Z17(t)?new P1(t,this.focusedColumn()||this.getFirstColumn()):t instanceof k4?new P1(K3(this.focusedRowIndex()),t):null},_doCellButtonClicked:function(t,e){this._fireCellButtonClicked(t,e)},_columnResizing:function(t,e,i){return this._fireColumnResizing(t,e,i)},_columnResized:function(t,e,i){this._fireColumnResized(t,e,i)},_rowResizing:function(t,e,i){return this._fireRowResizing(t,e,i)},_rowResized:function(t,e,i){this._fireRowResized(t,e,i)},_fireRowCountChanged:function(t,e){return this.fireEvent(q1.ROW_COUNT_CHANGED,t,e)},_fireDisplayRowCountChanged:function(t,e){return this.fireEvent(q1.DISPLAY_ROW_COUNT_CHANGED,t,e)},_fireDescendantRowCountChanged:function(t,e){return this.fireEvent(q1.DESCENDANT_ROW_COUNT_CHANGED,t,e)},_fireDescendantDataCountChanged:function(t,e){return this.fireEvent(q1.DESCENDANT_DATA_COUNT_CHANGED,t,e)},_fireCurrentChanging:function(t,e){return this.fireConfirmEvent(q1.CURRENT_CHANGING,t,e)},_fireCurrentChanged:function(t){return this.fireEvent(q1.CURRENT_CHANGED,t)},_fireCurrentRowChanged:function(t,e){return this.fireEvent(q1.CURRENT_ROW_CHANGED,t,e)},_fireValidateCell:function(t,e,i){return this.fireEvent(q1.VALIDATE_CELL,t,e,i)},_fireValidateRow:function(t,e,i){return this.fireEvent(q1.VALIDATE_ROW,t,e,i)},_fireTopIndexChanged:function(t,e){return this.fireEvent(q1.TOP_INDEX_CHANGED,t,e)},_fireLeftPosChanged:function(t,e){return this.fireEvent(q1.LEFT_POS_CHANGED,t,e)},_fireScrollToBottom:function(){return this.fireEvent(q1.SCROLL_TO_BOTTOM)},_fireScrollToTop:function(){return this.fireEvent(q1.SCROLL_TO_TOP)},_fireMenuPopup:function(t,e){return this.fireConfirmEvent(q1.MENU_POPUP,t,e)},_fireMenuItemClicked:function(t){return this.fireEvent(q1.MENU_ITEM_CLICKED,t)},_fireContextMenuPopup:function(t,e){return this.fireConfirmEvent(q1.CONTEXT_MENU_POPUP,t,e)},_fireContextMenuItemClicked:function(t,e){return this.fireEvent(q1.CONTEXT_MENU_ITEM_CLICKED,t,e)},_fireUndoStateChanged:function(t,e){return this.fireEvent(q1.UNDO_STATE_CHANGED,t,e)},_fireCellButtonClicked:function(t,e){return this.fireEvent(q1.CELL_BUTTON_CLICKED,t,e)},_fireEditorButtonClicked:function(t){return this.fireEvent(q1.EDITOR_BUTTON_CLICKED,t)},_fireDataButtonClicked:function(t){return this.fireEvent(q1.DATA_BUTTON_CLICKED,t)},_fireSelectionChanged:function(t){return this.fireEvent(q1.SELECTION_CHANGED,t)},_fireSelectionAdded:function(t){return this.fireEvent(q1.SELECTION_ADDED,t)},_fireSelectionRemoved:function(){return this.fireEvent(q1.SELECTION_REMOVED)},_fireSelectionCleared:function(){return this.fireEvent(q1.SELECTION_CLEARED)},_fireSelectionResized:function(t){return this.fireEvent(q1.SELECTION_RESIZED,t)},_fireSelectionEnded:function(t){return this.fireEvent(q1.SELECTION_ENDED,t)},_fireUpdating:function(t,e){return this.fireConfirmEvent(q1.UPDATING,t,e)},_fireInserting:function(t,e,i){return this.fireConfirmEvent(q1.INSERTING,t,e,i)},_fireDeleting:function(t){return this.fireConfirmEvent(q1.DELETING,t)},_fireUpdateStarted:function(t){return this.fireEvent(q1.UPDATE_STARTED,t)},_fireInsertStarted:function(t,e){return this.fireEvent(q1.INSERT_STARTED,t,e)},_fireKeyDown:function(t,e,i,n){return this.fireConfirmEvent(q1.KEY_DOWN,t,!!e,!!i,!!n)},_fireShowEditor:function(t){return this.fireConfirmEvent(q1.SHOW_EDITOR,t)},_fireEditChange:function(t,e){return this.fireEvent(q1.EDIT_CHANGE,t,e)},_fireEditCommit:function(t,e,i){return this.fireConfirmEvent(q1.EDIT_COMMIT,t,e,i)},_fireEditCanceled:function(t,e){return this.fireEvent(q1.EDIT_CANCELED,t,e)},_fireEditSearch:function(t,e){this.fireEvent(q1.EDIT_SEARCH,t,e)},_fireEditCellUpdated:function(t,e,i,n){this.fireEvent(q1.EDIT_CELL_UPDATED,t,e,i,n)},_fireEditRowCommitted:function(t,e){this.fireEvent(q1.EDIT_ROW_COMMITTED,t,e)},_fireEditRowCanceled:function(t,e){this.fireEvent(q1.EDIT_ROW_CANCELED,t,e)},_fireCopy:function(t,e){return this.fireConfirmEvent(q1.COPY,t,e)},_firePaste:function(t,e){return this.fireConfirmEvent(q1.PASTE,t,e)},_fireEditRowPasted:function(t,e,i,n){this.fireEvent(q1.EDIT_ROW_PASTED,t,e,i,n)},_firePasted:function(t,e,i){this.fireEvent(q1.PASTED,t,e,i)},_fireRowChecked:function(t,e){this.fireEvent(q1.ROW_CHECKED,t,e)},_fireRowsChecked:function(t,e){this.fireEvent(q1.ROWS_CHECKED,t,e)},_fireCheckedChanged:function(t){this.fireEvent(q1.CHECKED_CHANGED,t)},_fireAllCheck:function(t){return this.fireConfirmEvent(q1.ALL_CHECK,t)},_fireAllChecked:function(t){this.fireEvent(q1.ALL_CHECKED,t)},_fireErrorClicked:function(t,e){this.fireEvent(q1.ERROR_CLICKED,t.index(),e)},_fireFiltering:function(t){return this.fireConfirmEvent(q1.FILTERING,t)},_fireSorting:function(t){return this.fireConfirmEvent(q1.SORTING,t)},_fireAutoFilling:function(t,e,i,n){return this.fireConfirmEvent(q1.AUTO_FILLING,t,e,i,n)},_fireAutoFilled:function(t,e,i,n,s){return this.fireEvent(q1.AUTO_FILLED,t,e,i,n,s)},_fireColumnHeaderClicked:function(t,e){return this.fireEvent(q1.COLUMN_HEADER_CLICKED,t,e)},_fireColumnHeaderDblClicked:function(t){return this.fireEvent(q1.COLUMN_HEADER_DBL_CLICKED,t)},_fireColumnChecked:function(t,e){return this.fireEvent(q1.COLUMN_CHECKED,t,e)},_fireHeaderHeadClicked:function(){return this.fireEvent(q1.HEADER_HEAD_CLICKED)},_fireHeaderHeadDblClicked:function(){return this.fireEvent(q1.HEADER_HEAD_DBL_CLICKED)},_fireFooterCellClicked:function(t){return this.fireEvent(q1.FOOTER_CELL_CLICKED,t)},_fireFooterCellDblClicked:function(t){return this.fireEvent(q1.FOOTER_CELL_DBL_CLICKED,t)},_fireFooterHeadClicked:function(){return this.fireEvent(q1.FOOTER_HEAD_CLICKED)},_fireFooterHeadDblClicked:function(){return this.fireEvent(q1.FOOTER_HEAD_DBL_CLICKED)},_fireHeaderSummaryCellClicked:function(t){return this.fireEvent(q1.HEADER_SUMMARY_CELL_CLICKED,t)},_fireHeaderSummaryCellDblClicked:function(t){return this.fireEvent(q1.HEADER_SUMMARY_CELL_DBL_CLICKED,t)},_fireHeaderSummaryHeadClicked:function(){return this.fireEvent(q1.HEADER_SUMMARY_HEAD_CLICKED)},_fireHeaderSummaryHeadDblClicked:function(){return this.fireEvent(q1.HEADER_SUMMARY_HEAD_DBL_CLICKED)},_fireRowIndicatorCellClick:function(t){return this.fireEvent(q1.ROW_INDICATOR_CELL_CLICK,t)},_fireRowIndicatorCellClicked:function(t){return this.fireEvent(q1.ROW_INDICATOR_CELL_CLICKED,t)},_fireRowIndicatorCellDblClicked:function(t){return this.fireEvent(q1.ROW_INDICATOR_CELL_DBL_CLICKED,t)},_fireStateCellClicked:function(t){return this.fireEvent(q1.STATE_CELL_CLICKED,t)},_fireStateCellDblClicked:function(t){return this.fireEvent(q1.STATE_CELL_DBL_CLICKED,t)},_fireCheckCellClicked:function(t){return this.fireEvent(q1.CHECK_CELL_CLICKED,t)},_fireCheckCellDblClicked:function(t){return this.fireEvent(q1.CHECK_CELL_DBL_CLICKED,t)},_fireCheckBarHeadClicked:function(){return this.fireEvent(q1.CHECK_BAR_HEAD_CLICKED)},_fireCheckBarHeadDblClicked:function(){return this.fireEvent(q1.CHECK_BAR_HEAD_DBL_CLICKED)},_fireRowGroupHeadCellClicked:function(t){return this.fireEvent(q1.ROWGROUP_HEAD_CELL_CLICKED,t)},_fireRowGroupHeadCellDblClicked:function(t){return this.fireEvent(q1.ROWGROUP_HEAD_CELL_DBL_CLICKED,t)},_fireRowGroupHeaderClicked:function(t){return this.fireEvent(q1.ROWGROUP_HEADER_CLICKED,t)},_fireRowGroupHeaderDblClicked:function(t){return this.fireEvent(q1.ROWGROUP_HEADER_DBL_CLICKED,t)},_fireRowGroupFooterCellClicked:function(t){return this.fireEvent(q1.ROWGROUP_FOOTER_CELL_CLICKED,t)},_fireRowGroupFooterCellDblClicked:function(t){return this.fireEvent(q1.ROWGROUP_FOOTER_CELL_DBL_CLICKED,t)},_fireRowGroupBarClicked:function(t){return this.fireEvent(q1.ROWGROUP_BAR_CLICKED,t)},_fireRowGroupBarDblClicked:function(t){return this.fireEvent(q1.ROWGROUP_BAR_DBL_CLICKED,t)},_firePanelClicked:function(){return this.fireEvent(q1.PANEL_CLICKED)},_firePanelDblClicked:function(){return this.fireEvent(q1.PANEL_DBL_CLICKED)},_fireRowGroupPanelClicked:function(t){return this.fireEvent(q1.ROWGROUP_PANEL_CLICKED,t)},_fireRowGroupPanelDblClicked:function(t){return this.fireEvent(q1.ROWGROUP_PANEL_DBL_CLICKED,t)},_fireDataCellClick:function(t){return this.fireEvent(q1.DATA_CELL_CLICK,t)},_fireDataCellClicked:function(t){return this.fireEvent(q1.DATA_CELL_CLICKED,t)},_fireDataCellDblClicked:function(t){return this.fireEvent(q1.DATA_CELL_DBL_CLICKED,t)},_fireColumnParentChanged:function(t,e,i){return this.fireEvent(q1.COLUMN_PARENT_CHANGED,t,e,i)},_fireColumnMoved:function(t,e,i){return this.fireEvent(q1.COLUMN_MOVED,t,e,i)},_fireColumnVisibleChanged:function(t){return this.fireEvent(q1.COLUMN_VISIBLE_CHANGED,t)},_fireExcludeColumn:function(t){return this.fireEvent(q1.EXCLUDE_COLUMN,t)},_fireColumnResizing:function(t,e,i){return this.fireConfirmEvent(q1.COLUMN_RESIZING,t,e,i)},_fireColumnResized:function(t,e,i){return this.fireEvent(q1.COLUMN_RESIZED,t,e,i)},_fireRowResizing:function(t,e,i){return this.fireConfirmEvent(q1.ROW_RESIZING,t,e,i)},_fireRowResized:function(t,e,i){return this.fireEvent(q1.ROW_RESIZED,t,e,i)},onPopupMenuManagerMenuItemClicked:function(t,e){this._fireMenuItemClicked(e)},onScrollBarScrolled:function(t,e,i,n){if(t.vertical())switch(e){case Y4.LINE_DOWN:case Y4.LINE_UP:this.scrollRow(i);break;case Y4.PAGE_DOWN:case Y4.PAGE_UP:this.setTopIndex(this.topIndex()+i*t._page);break;case Y4.THUMB_TRACK:this.displayOptions().liveScroll()?this.setTopIndex(n):this._vscrollView.setPosition(n,!0);break;default:this.setTopIndex(n)}else switch(e){case Y4.LINE_RIGHT:case Y4.LINE_LEFT:var s=Math.max(0,this.displayOptions().horzScrollStep())||8;this.setLeftPos(this.leftPos()+i*s);break;case Y4.PAGE_RIGHT:this._layoutManager?this.setLeftPos(this._layoutManager.scrollToNextColumn()):this.setLeftPos(this.leftPos()+t._page);break;case Y4.PAGE_LEFT:this._layoutManager?this.setLeftPos(this._layoutManager.scrollToPrevColumn()):this.setLeftPos(this.leftPos()-t._page);break;case Y4.THUMB_TRACK:this.displayOptions().horzLiveScroll()?this.setLeftPos(n):this._hscrollView.setPosition(n,!0);break;default:this.setLeftPos(n)}},onImageListImageLoaded:function(t,e){var i=t.getImage(e);S3&&y0(t.name()+"'s image loaded at "+e+" ["+i.width+","+i.height+"]"),this._imageLoaded=t,this.invalidateLayout()},$_resetEditFocused:function(){this.itemSource().isEditing()?this._focusing||(this.isEditing()?(this._editController.resetIndex(this.itemSource().editingItem()),this.$_makeFocusIndexVisible()):this.invalidateEditor()):this.hideEditor()},$_restoreFocusedRow:function(t){(this.dataSource().redoing()||this.dataSource().undoing())&&(this.itemSource().isEditing()||(this.setFocusedRow(t),this.makeRowVisible(t.index())))},onRowProviderReset:function(t){this._ownedStyleManager===this._styleManager&&this._styleManager.setDataSource(this.dataSource()),this._dataChanged=!0,this._resetColumnIndices(),this._populateMerges(),this.resetGrid(),this.$_resetEditFocused()},onRowProviderRefresh:function(t){this._dataChanged=!0,this._resetColumnIndices(),this._populateMerges(),this.refreshView(),this.$_resetEditFocused()},onRowProviderUndoStateChanged:function(t,e,i){this._fireUndoStateChanged(e,i)},onRowProviderCountChanged:function(t,e,i){i<1&&this._selections.clear(),this._fireRowCountChanged(i,e)},onRowProviderRowCountChanged:function(t,e,i){this._fireDescendantRowCountChanged(i,e)},onRowProviderDataCountChanged:function(t,e,i){this._fireDescendantDataCountChanged(i,e)},onRowProviderDataCalculated:function(t,e){this.refreshView()},onRowProviderItemInserted:function(t,e){this._dataChanged=!0,this._populateMerges(),this.refreshView(),this.$_resetEditFocused(),this.$_restoreFocusedRow(e)},onRowProviderItemDeleted:function(t,e){this.$_restoreFocusedRow(e),this._dataChanged=!0,this._populateMerges(),this.refreshView(),this.$_resetEditFocused()},onRowProviderItemUpdated:function(t,e){this._dataChanged=!0,this._populateMerges(),this.refreshView(),this.$_resetEditFocused()},onRowProviderRowStateChanged:function(t,e){this.refreshView(),this.$_resetEditFocused()},onRowProviderRowStatesChanged:function(t,e){this.refreshView(),this.$_resetEditFocused()},onRowProviderRowStatesCleared:function(t){this.refreshView(),this.$_resetEditFocused()},onRowProviderRowTagChanged:function(t,e){this.refreshView(),this.$_resetEditFocused()},onRowProviderRowTagsChanged:function(t,e){this.refreshView(),this.$_resetEditFocused()},onRowProviderRowTagsCleared:function(t){this.refreshView(),this.$_resetEditFocused()},onRowProviderSorting:function(t,e,i,n){},onRowProviderSorted:function(t){this.refreshView(),this.fireEvent(q1.SORTED)},onRowProviderFilterAdded:function(t){},onRowProviderFilterRemoved:function(t){},onRowProviderFilterCleared:function(t){},onRowProviderFilterAllCleared:function(t){},onRowProviderFiltering:function(t){},onRowProviderFiltered:function(t){this.refreshView(),this.fireEvent(q1.FILTERED)},$_focusEditRow:function(t){var e=new P1(t.index(),this.$_focusedIndex()?this.$_focusedIndex().column:null);!e.column&&0<this.visibleColumnCount()&&(e._column=this.getVisibleColumn(0)),this.setFocusedIndex(e,!1,!0),this.makeCellVisible(this.$_focusedIndex())},onItemEditCurrentChanging:function(t,e,i){if(!this._focusing){var n=this.$_focusedIndex(),s=P1.create(i,n.column);if(!this._fireCurrentChanging(s,n))return!1}},onItemEditCurrentChanged:function(t,e,i,n){this._focusing||(this._oldFocusIdx.set(e,this._focusedColumn),this._newFocusIdx.set(i,this._focusedColumn),this._focusedIndexChanged(this._oldFocusIdx,this._newFocusIdx,!0,this.displayOptions().autoRowFocus(),n),this._fireCurrentChanged(this._shadowIndex.assign(this.$_focusedIndex())))},onItemEditUpdating:function(t,e){if(!this.$_canUpdate(e))return!1},$_prepareEditing:function(t,e){t.setAutoCommit(this.editOptions().autoCommit()),t.clearUndo(),this.execute(new m08(this,e))},onItemEditUpdateStarted:function(t,e){this.$_prepareEditing(t),this._clearColumnErrors(),this.refreshView(),this.clearSelection(),this._fireUpdateStarted(e);var i=this.activeTool();i&&i.rowEditStarted(e)},$_prepareDefaults:function(t){var e=this.dataSource();if(e){var i=this.$_getInsertDefaults();if(i)for(var n=Math.min(e.fieldCount(),Math.max(i.length,t.length));n--;)i[n]!==c2&&(t[n]=i[n])}},onItemEditAppending:function(t,e){if(!this.$_canAppend())return!1;e&&this.$_prepareDefaults(e)},onItemEditAppendStarted:function(t,e){this.$_prepareEditing(t),this.hideEditor(),this.prepareEditor(),this._clearColumnErrors(),this._populateMerges(),this.refreshView(),this.$_focusEditRow(e);var i=this.activeTool();i&&i.rowEditStarted(e),this._fireInsertStarted(e,!0)},onItemEditInserting:function(t,e,i,n,s){if(!this.$_canInsert(e,n,s))return!1;i&&this.$_prepareDefaults(i)},onItemEditInsertStarted:function(t,e){this.$_prepareEditing(t),this.hideEditor(),this.reprepareEditor(),this._clearColumnErrors(),this._populateMerges(),this.refreshView(),this.$_focusEditRow(e);var i=this.activeTool();i&&i.rowEditStarted(e),this._fireInsertStarted(e,!1)},onItemEditCellUpdated:function(t,e,i,n,s){this.refreshView(),!this._cellUpdateEventLock&&this._fireEditCellUpdated(e,i,s,n)},onItemEditCommitting:function(t,e,i){this.editController().commitEditor(!0,!1,!0),this.editController().invalidateEditor();var n=this.editOptions(),s=this.$_focusedIndex(),r=!1;switch(i){case T1.INSERTING:r=n.forceInsert();break;case T1.APPENDING:r=n.forceAppend();break;case T1.UPDATING:r=n.commitWhenNoEdit()}if(!r&&!t.isEdited(e))return!1;var o=T1.isInserting(i);try{this._validationManager._userValidations?(this._validationManager.validateCell(s,!1),this.$_validateCell(s,!1)):(this._validationManager.validateRow(e,o),this.$_validateRow(e,o))}catch(t){throw t instanceof n7&&t.column instanceof L2&&(t.column.setError(t.message||t),t.column.setErrorLevel(t.level||K4.ERROR)),t}},onItemEditCommitted:function(t,e,i){this.hideEditor(),this.refreshView();var n=this.activeTool();n&&n.rowEditEnded(e),this._fireEditRowCommitted(e,i)},onItemEditCanceling:function(t,e,i){this._toolTipManager.close(),this.editController().cancelEditor(!0),this.editController().invalidateEditor()},onItemEditCanceled:function(t,e,i){this.hideEditor(),this._populateMerges(),this.refreshView();var n=this.activeTool();n&&n.rowEditEnded(e,!0),this._fireEditRowCanceled(e,i)},onItemEditCommitRequest:function(t){this.commit(!1)},onItemEditCancelReuqest:function(t){this.cancel()},onLookupSourceProviderChanged:function(t){this.refreshView()},onSelectionManagerChanged:function(t,e){this._fireSelectionChanged(e)},onSelectionManagerAdded:function(t,e){this._addSelectionView(e),this._layoutSelectionViews(),this._layoutAutoFillHandle(),this._fireSelectionAdded(e)},onSelectionManagerRemoved:function(t,e){this._removeSelectionView(e,!0),this._layoutSelectionViews(),this._layoutAutoFillHandle(),this._fireSelectionRemoved(e)},onSelectionManagerCleared:function(t){this._clearSelectionViews(!0),this._clearCellSelections(),this._layoutAutoFillHandle(),this._fireSelectionCleared()},onSelectionManagerResized:function(t,e){this._layoutSelectionViews(),this._layoutAutoFillHandle(),this._fireSelectionResized(e)},onSelectionManagerEnded:function(t,e){this._layoutSelectionViews(),this._layoutAutoFillHandle(),this._fireSelectionEnded(e)},onMenuItemClick:function(t){var e=P1.temp(-1,null);this._layoutManager.mouseToIndex(this._container._currentX,this._container._currentY,e),this._fireContextMenuItemClicked(t,e)}},{createColumn:function(t,e){if(t){var i=null,n=t.type;if(n&&(n=n.trim()),i="group"===n||V1(t.columns)?new O1:"chart"===n||I4(t.chart)?new G5:"series"===n||t.fieldNames?new Q7:"label"===n?new D6:"calced"===n?new h7:new L2,e&&(t[e]=i),i.assign(t),i instanceof O1&&t.columns){var s=q1.createColumns(t.columns,e);i.setColumns(s)}return i}return null},createColumns:function(t,e){if(V1(t)){for(var i=[],n=0,s=t.length;n<s;n++){var r=q1.createColumn(t[n],e);r&&i.push(r)}return i}return null},ROW_COUNT_CHANGED:"onGridBaseRowCountChanged",DISPLAY_ROW_COUNT_CHANGED:"onGridBaseDisplayRowCountChanged",DESCENDANT_ROW_COUNT_CHANGED:"onGridBaseDescendantRowCountChanged",DESCENDANT_DATA_COUNT_CHANGED:"onGridBaseDescendantDataCountChanged",CURRENT_CHANGING:"onGridBaseCurrentChanging",CURRENT_CHANGED:"onGridBaseCurrentChanged",CURRENT_ROW_CHANGED:"onGridBaseCurrentRowChanged",TOP_INDEX_CHANGED:"onGridBaseTopIndexChanged",SCROLL_TO_BOTTOM:"onGridBaseScrollToBottom",SCROLL_TO_TOP:"onGridBaseScrollToTop",LEFT_POS_CHANGED:"onGridBaseLeftPosChanged",SELECTION_ADDED:"onGridBaseSelectionAdded",SELECTION_CHANGED:"onGridBaseSelectionChanged",SELECTION_REMOVED:"onGridBaseSelectionRemoved",SELECTION_CLEARED:"onGridBaseSelectionCleared",SELECTION_RESIZED:"onGridBaseSelectionResized",SELECTION_ENDED:"onGridBaseSelectionEnded",VALIDATE_CELL:"onGridBaseValidateCell",VALIDATE_ROW:"onGridBaseValidateRow",UPDATING:"onGridBaseUpdating",INSERTING:"onGridBaseInserting",DELETING:"onGridBaseDeleting",INSERT_STARTED:"onGridBaseInsertStarted",UPDATE_STARTED:"onGridBaseUpdateStarted",KEY_DOWN:"onGridBaseKeyDown",SHOW_EDITOR:"onGridBaseShowEditor",HIDE_EDITOR:"onGridBaseHideEditor",EDIT_CHANGE:"onGridBaseEditChange",EDIT_COMMIT:"onGridBaseEditCommit",EDIT_CANCELED:"onGridBaseEditCanceled",EDIT_SEARCH:"onGridBaseEditSearch",EDIT_CELL_UPDATED:"onGridBaseEditCellUpdated",EDIT_ROW_COMMITTED:"onGridBaseEditRowCommitted",EDIT_ROW_CANCELED:"onGridBaseEditRowCanceled",COPY:"onGridBaseCopy",PASTE:"onGridBasePaste",EDIT_ROW_PASTED:"onGridBaseEditRowPasted",PASTED:"onGridBasePasted",ROW_CHECKED:"onGridBaseRowChecked",ROWS_CHECKED:"onGridBaseRowsChecked",CHECKED_CHANGED:"onGridBaseCheckedChanged",ALL_CHECKED:"onGridBaseAllChecked",ALL_CHECK:"onGridBaseAllCheck",ERROR_CLICKED:"onGridBaseErrorClicked",SORTING:"onGridBaseSorting",SORTED:"onGridBaseSorted",FILTERING:"onGridBaseFiltering",FILTERED:"onGridBaseFiltered",AUTO_FILLING:"onGridBaseAutoFilling",AUTO_FILLED:"onGridBaseAutoFilled",MENU_POPUP:"onGridBaseMenuPopup",MENU_ITEM_CLICKED:"onGridBaseMenuItemClicked",CONTEXT_MENU_POPUP:"onGridBaseContextMenuPopup",CONTEXT_MENU_ITEM_CLICKED:"onGridBaseContextMenuItemClicked",UNDO_STATE_CHANGED:"onGridBaseUndoStateChanged",COLUMN_WIDTH_CHANGED:"onGridBaseColumnWidthChanged",COLUMN_HEADER_CLICKED:"onGridBaseColumnHeaderClicked",COLUMN_HEADER_DBL_CLICKED:"onGridBaseColumnHeaderDblClicked",COLUMN_CHECKED:"onGridBaseColumnChecked",HEADER_HEAD_CLICKED:"onGridBaseHeaderHeadClicked",HEADER_HEAD_DBL_CLICKED:"onGridBaseHeaderHeadDblClicked",ROW_INDICATOR_CELL_CLICK:"onGridBaseRowIndicatorCellClick",ROW_INDICATOR_CELL_CLICKED:"onGridBaseRowIndicatorCellClicked",ROW_INDICATOR_CELL_DBL_CLICKED:"onGridBaseRowIndicatorCellDblClicked",STATE_CELL_CLICKED:"onGridBaseStateCellClicked",STATE_CELL_DBL_CLICKED:"onGridBaseStateCellDblClicked",CHECK_CELL_CLICKED:"onGridBaseCheckCellClicked",CHECK_CELL_DBL_CLICKED:"onGridBaseCheckCellDblClicked",CHECK_BAR_HEAD_CLICKED:"onGridBaseCheckBarHeadClicked",CHECK_BAR_HEAD_DBL_CLICKED:"onGridBaseCheckBarHeadDblClicked",FOOTER_CELL_CLICKED:"onGridBaseFooterCellClicked",FOOTER_CELL_DBL_CLICKED:"onGridBaseFooterCellDblClicked",FOOTER_HEAD_CLICKED:"onGridBaseFooterHeadClicked",FOOTER_HEAD_DBL_CLICKED:"onGridBaseFooterHeadDblClicked",HEADER_SUMMARY_CELL_CLICKED:"onGridBaseHeaderSummaryCellClicked",HEADER_SUMMARY_CELL_DBL_CLICKED:"onGridBaseHeaderSummaryCellDblClicked",HEADER_SUMMARY_HEAD_CLICKED:"onGridBaseHeaderSummaryHeadClicked",HEADER_SUMMARY_HEAD_DBL_CLICKED:"onGridBaseHeaderSummaryHeadDblClicked",ROWGROUP_HEAD_CELL_CLICKED:"onGridBaseRowGroupHeadCellClicked",ROWGROUP_HEAD_CELL_DBL_CLICKED:"onGridBaseRowGroupHeadCellDblClicked",ROWGROUP_HEADER_CLICKED:"onGridBaseRowGroupHeaderClicked",ROWGROUP_HEADER_DBL_CLICKED:"onGridBaseRowGroupHeaderDblClicked",ROWGROUP_FOOTER_CELL_CLICKED:"onGridBaseRowGroupFooterCellClicked",ROWGROUP_FOOTER_CELL_DBL_CLICKED:"onGridBaseRowGroupFooterCellDblClicked",ROWGROUP_BAR_CLICKED:"onGridBaseRowGroupBarClicked",ROWGROUP_BAR_DBL_CLICKED:"onGridBaseRowGroupBarDblClicked",PANEL_CLICKED:"onGridBasePanelClicked",PANEL_DBL_CLICKED:"onGridBasePanelDblClicked",ROWGROUP_PANEL_CLICKED:"onGridBaseRowGroupPanelClicked",ROWGROUP_PANEL_DBL_CLICKED:"onGridBaseRowGroupPanelDblClicked",CELL_BUTTON_CLICKED:"onGridBaseCellButtonClicked",DATA_BUTTON_CLICKED:"onGridBaseDataButtonClicked",EDITOR_BUTTON_CLICKED:"onGridBaseEditorButtonClicked",CLICKABLE_CELL_CLICKED:"onGridBaseClickableCellClicked",DATA_CELL_CLICK:"onGridBaseDataCellClick",DATA_CELL_CLICKED:"onGridBaseDataCellClicked",DATA_CELL_DBL_CLICKED:"onGridBaseDataCellDblClicked",COLUMN_PARENT_CHANGED:"onGridBaseColumnParentChanged",COLUMN_MOVED:"onGridBaseColumnMoved",COLUMN_VISIBLE_CHANGED:"onGridBaseColumnVisibleChanged",EXCLUDE_COLUMN:"onGridBaseExcludeColumn",COLUMN_RESIZING:"onGridBaseColumnResizing",COLUMN_RESIZED:"onGridBaseColumnResized",ROW_RESIZING:"onGridBaseRowResizing",ROW_RESIZED:"onGridBaseRowResized"});y6._mod_=E67;var G47=I1("RootColumn",O1,{init:function(t){this._super(),this._owner=t,this._header._visible=!1,this.$_last=!0},grid:function(){return this._owner},_columnAdded:function(t){this._super(t);var e=Q2(t,O1);e&&this.$_groupAdded(e)},_columnRemoved:function(t){},$_groupAdded:function(t){var e,i,n,s;for(e=0,i=t.count();e<i;e++)n=t.getItem(e),(s=Q2(n,O1))&&this.$_groupAdded(s)},first:function(){return $_getFirstColumn(this)||null},last:function(){return $_getLastColumn(this)||null}}),S08=I1("DataRootCollection",null,{init:function(){this._super(),this._root=null,this._dataRoots=[],this._list=[]},roots:function(){return this._dataRoots},collect:function(t){this._root=t,(this._dataRoots.length=0)<t.visibleCount()&&(this.$_collectGroup(t),this.$_checkValid(t))},collectDataColumns:function(t,e,i){var n,s,r,o,a,h,l;if(!(t instanceof k4&&e instanceof k4))return[];for(i=j0(i)||[],t.dataRoot()!==t&&(t=t.dataRoot()),e.dataRoot()!=e&&(e=e.dataRoot()),(n=Q2(t,O1))&&(t=O1.getFirstDataRoot(n)),(n=Q2(e,O1))&&(e=O1.getLastDataRoot(n)),(s=this._dataRoots.indexOf(t))>(r=this._dataRoots.indexOf(e))&&(l=s,s=r,r=l),l=s;l<=r;l++)if((o=this._dataRoots[l]).visible())if(n=Q2(o,O1))for(this._list.length=0,this.$_collectDataColumns(n,this._list),a=0,h=this._list.length;a<h;a++)i.push(this._list[a]);else o instanceof L2&&i.push(o);return i},$_collectGroup:function(t){var e,i,n,s=t.visibleCount();if(s<1)this._dataRoots.push(t);else if(1==s)e=t.getVisibleItem(0),(i=Q2(e,O1))?this.$_collectGroup(i):this._dataRoots.push(e);else if(t.vertical())this._dataRoots.push(t);else for(n=0;n<s;n++)e=t.getVisibleItem(n),(i=Q2(e,O1))?this.$_collectGroup(i):this._dataRoots.push(e)},$_collectDataColumns:function(t,e){var i,n,s;for(i=0,n=t.visibleCount();i<n;i++)(s=t.getVisibleItem(i))instanceof L2?e.push(s):s instanceof O1&&this.$_collectDataColumns(s,e)},$_checkValid:function(t){}}),K67=I1("DataTagManager",E8,{init:function(t){this._super(),this._grid=t,this._dataSource=void 0,this._series={},this._calcs={}},addSeries:function(t){if(t){var e=this._series[t.$_hash];return e||(e=this._series[t.$_hash]=this._createSeriesTag(t)),e.clearValues(),this._dataSource&&e.connect(this._dataSource),t.$_setDataTag(e),e}return null},removeSeries:function(t){var e=this._series[t.$_hash];e&&(e.disconnect(),delete this._series[t.$_hash])},addCalculated:function(t){if(t){var e=this._calcs[t.$_hash];return e||(e=this._calcs[t.$_hash]=this._createCalculatedTag(t)),this._dataSource&&e.connect(this._dataSource),t.$_setDataTag(e),e}return null},removeCalculated:function(t){var e=this._calcs[t.$_hash];e&&(e.disconnect(),delete this._calcs[t.$_hash])},saveValue:function(e,i,n){this._visitTags(function(t){t.saveValue(e,i,n)})},restoreValue:function(e,i,n){this._visitTags(function(t){t.restoreValue(e,i,n)})},saveRow:function(e,i,n){this._visitTags(function(t){t.saveRow(e,i,n)}),this._dataSource.redoing()&&this._grid.requestFocusedDataRow(i)},restoreRow:function(e,i,n){this._visitTags(function(t){t.restoreRow(e,i,n)}),this._grid.requestFocusedDataRow(i,!0)},saveRows:function(e,i,n){(i===i2.ALL_ROWS||i&&0<i.length)&&(this._visitTags(function(t){t.saveRows(e,i,n)}),this._dataSource.redoing()&&(n?this._grid.requestFocusedDataRow(i[0]):this._grid.requestFocusedDataRow(i[i.length-1])))},restoreRows:function(e,i,n){(i===i2.ALL_ROWS||i&&0<i.length)&&(this._visitTags(function(t){t.restoreRows(e,i,n)}),i===i2.ALL_ROWS?0<this._dataSource.rowCount()&&this._grid.requestFocusedDataRow(0):this._grid.requestFocusedDataRow(i[0],!0))},_createSeriesTag:function(t){},_createCalculatedTag:function(t){},_visitTags:function(t){var e;for(e in this._series)t(this._series[e]);for(e in this._calcs)t(this._calcs[e])}}),N67=I1("SeriesValueTag",null,{init:function(t){this._super(),this._column=t,this._exprNode=void 0,this._runtime=void 0},column:function(){return this._column},clearValues:function(){},getValues:function(t){},saveValue:function(t,e,i){this.saveRow(t,e)},restoreValue:function(t,e,i){this.restoreRow(t,e)},saveRow:function(t,e){},restoreRow:function(t,e,i){},saveRows:function(t,e){},restoreRows:function(t,e,i){},$_calculate:function(t){var e,i,n,s,r=this._dataSource;if(r&&(e=this._column._fields)&&0<(i=e.length)){for(n=new Array(i),s=0;s<i;s++)0<=e[s]&&(n[s]=r.getValue(t,e[s]));return n}}}),$$_CVT_ALL={},P67=I1("CalcluatedValueTag",null,{init:function(t){this._super(),this._column=t,this._reqRows=null},column:function(){return this._column},clearValues:function(){},hasValue:function(t){return!1},getValue:function(t,e){var i=e.dataIndex(),n=this._values[i];return void 0===n&&(n=this._values[i]=t.$_calcValue(e)),n},$_nextDataRow:function(t,e){for(var i=e.index()+1,n=t.rowCount();i<n;i++)if(0<=(e=t.getRow(i)).dataIndex())return e;return null},$_prevDataRow:function(t,e){for(var i=e.index()-1;0<=i;i--)if(0<=(e=t.getRow(i)).dataIndex())return e;return null},$_getParent:function(t){return t&&t.parent()},calcValues:function(t,e,i,n){var s=(!i||i&&n)&&e._calcBounds==Y27.GROUP;switch(e._calcRange){case H3.FIRST:this._calcFirst(e,i,s);break;case H3.LAST:this._calcLast(e,n,s);break;case H3.LOWER:this._calcLower(e,i,s);break;case H3.UPPER:this._calcUpper(e,n,s);break;case H3.LOWER_BOUNDS:this._calcLowerBounds(e,i,n,s);break;case H3.UPPER_BOUNDS:this._calcUpperBounds(e,i,n,s);break;default:this._values[row.dataIndex()]=e.$_calcValue(i)}},_calcFirst:function(t,e,i){var n,s,r,o,a,h=t.grid();if(i&&this._isGrouped(h))for((e=e||h.getRow(0)).dataIndex()<0&&(e=this.$_nextDataRow(h,e));e&&(s=this.$_getParent(e));){for(n=0,o=(a=s.getDescendants(!1,!0)).length;n<o;n++)this._values[a[n].dataIndex()]=t.$_calcRange(a,n);e=a[o-1],e=this.$_nextDataRow(h,e)}else if((a=h.getDescendantRows(!1,!0))&&0<a.length){if(r=e?e.dataIndex():-1,o=a.length,(n=0)<=r)for(;n<o&&a[n].dataIndex()!=r;)n++;for(;n<o;n++)this._values[a[n].dataIndex()]=t.$_calcRange(a,n)}},_calcLast:function(t,e,i){var n,s,o,a=t.grid();if(i&&this._isGrouped(a))for((e=e||a.getRow(a.rowCount()-1)).dataIndex()<0&&(e=this.$_prevDataRow(a,e));e&&(s=this.$_getParent(e));){for(n=(o=s.getDescendants(!1,!0)).length;n--;)this._values[o[n].dataIndex()]=t.$_calcRange(o,n);e=o[0],e=this.$_prevDataRow(a,e)}else if((o=a.getDescendantRows(!1,!0))&&0<o.length){if(r=e?e.dataIndex():-1,n=o.length-1,0<=r)for(;0<=n&&o[n].dataIndex()!=r;)n--;for(;0<=n;n--)this._values[o[n].dataIndex()]=t.$_calcRange(o,n)}},_calcLower:function(t,e,i){this._calcFirst(t,e,i)},_calcUpper:function(t,e,i){this._calcLast(t,e,i)},_calcLowerBounds:function(t,e,i,n){this._calcFirst(t,e,n)},_calcUpperBounds:function(t,e,i,n){this._calcFirst(t,i,n)},$_setRange:function(t){this._rows=t},get:function(t){return this._values[this._rows[t].dataIndex()]},$_get:function(t){return this._values[t.dataIndex()]},clearReqRows:function(){this._reqRows=null},hasReqRow:function(){return this._reqRows},firstRequest:function(){return this._reqRows[0]},lastRequest:function(){return this._reqRows[this._reqRows.length-1]},requestAll:function(){this._reqRows=$$_CVT_ALL},requestRow:function(t){if(t===$$_CVT_ALL||t<0)this._reqRows=t;else if(this._reqRows!==$$_CVT_ALL){var e,i;0<=(e=this._column.grid().getRowIndexOfDataIndex(t))&&(rows=this._reqRows=this._reqRows||[],0<(i=rows.length)?e<rows[0]?rows.splice(0,0,e):e>rows[i-1]&&rows.push(e):rows.push(e))}},isAllRequested:function(){return this._reqRows===$$_CVT_ALL},saveValue:function(t,e,i){this.saveRow(t,e)},restoreValue:function(t,e,i){this.restoreRow(t,e)},saveRow:function(t,e){},restoreRow:function(t,e,i){},saveRows:function(t,e){},restoreRows:function(t,e,i){}}),A0=I1("GridView",q1,{init:function(t,e,i){this._super(t,e,i),this.registerCustomGridItemType("chart",m68);var n=this.rowGroup();n.registerGroupHeaderType("chart",E47),n.registerGroupFooterType("chart",E47),this._groupHeaderItems=n.headerItems(),this._groupFooterItems=n.footerItems(),this.setRowSource(this._createItemSource()),this.operateOptionsChanged()},customGroupItemChanged:function(t){this._items&&this._items.resetCustomGroupItems(t)},getCustomHeaderRows:function(t,e){this._groupHeaderItems.getRows(t,e)},getCustomFooterRows:function(t,e){this._groupFooterItems.getRows(t,e)},onPaged:E1,onPageCountChanged:E1,onPageIndexChanging:E1,onPageIndexChanged:E1,onGrouping:E1,onGrouped:E1,onExpanding:E1,onExpanded:E1,onCollapsing:E1,onCollapsed:E1,onRowGroupHeadCellClicked:E1,onRowGroupHeadCellDblClicked:E1,onRowGroupHeaderClicked:E1,onRowGroupHeaderDblClicked:E1,onRowGroupFooterCellClicked:E1,onRowGroupFooterCellDblClicked:E1,pageSize:10,pageCount:0,pageIndex:-1,pageOffset:0,pageRows:null,rowGroupLevels:{get:function(){return this._items.groupLevels()},set:null},rowGroupFields:{get:function(){return this._items.groupByFields()},set:null},paged:{get:function(){return this._items.isPaging()},set:null},rowGrouped:{get:function(){return this._items.isGrouped()},set:null,value:!1},mergedRowGrouped:{get:function(){return this._items.isMergedRowGrouped()},set:null,value:!1},pageSize_:function(){return this._items.pageSize()},setPageSize:function(t){return this._items.setPageSize(t),this},pageCount_:function(){return this._items.pageCount()},setPageCount:function(t){return this._items.setPageCount(t),this},pageIndex_:function(){return this._items.pageIndex()},setPageIndex:function(t){return this._items.setPageIndex(t),this},pageOffset_:function(){return this._items.pageOffset()},setPageOffset:function(t){return this._items.setPageOffset(t),this},setPageAndOffset:function(t,e){return this._items.setPageAndOffset(t,e),this},pageRows:function(){return this._items.pageRows()},setPageRows:function(t){return this._items.setPageRows(t),this},setPageAndRows:function(t,e){return this._items.setPageAndRows(t,e),this},getDataRow:function(t){return this._items.getDataRow(t)},getDataIndicesOfRows:function(t,e){if(t){var i,n,s=t.length;for(ids=[],i=0;i<s;i++)(n=t[i])instanceof g2||(n=this.getRow(n)),(0<=(n=n?n.dataIndex():-1)||e)&&ids.push(n);return ids}},getRowsOfDataIndices:function(t,e){return this.rowSource().getRowsOfDataRows(t,e)},isGrouped:function(t){return t instanceof L2&&0<t.groupLevel()},$_getVisibleRootByField:function(t){var e,i,n=this.visibleColumnCount();for(e=0;e<n;e++)if((i=Q2(this.getVisibleColumn(e),L2))&&i.dataIndex()==t)return i;return null},groupBy:function(t,e,i,n){e=!(1<arguments.length)||e,i=2<arguments.length?i:M4.ASCENDING,n=n||g7.SENSITIVE;var s,r,o,a,h,l,u=this.dataSource();if(this._items&&!(Y8<K77)&&u)if(this.clearColumnMergeGrouped(),0<(s=(t=E5(t)).length)){for(r=[],o=u.fieldCount(),a=0;a<s;a++)0<=(h=u.getFieldIndexEx(t[a]))&&h<o&&r.push(h);if(0<r.length){if(this.rowGroup().isMergeMode())for(a=r.length-1;0<=a;a--)(l=this.$_getVisibleRootByField(r[a]))?l._setMergeGrouped(!0):r.splice(a,1);0<r.length&&this._toastManager.show(this.operateOptions().groupingToast(),!0,function(){this._items.groupBy(r,e,i,n)}.bind(this))}}else this._toastManager.show(this.operateOptions().groupingToast(),!0,function(){this._items.groupBy(null,!0,M4.ASCENDING)}.bind(this))},clearGroupBy:function(){this._items&&this._items.isGrouped()&&this._items.groupBy(null,!0,M4.ASCENDING)},addGroupBy:function(t,e,i,n,s){var r=this.operateOptions();i=void 0===i?r.groupSorting():i,n=void 0===n?r.groupSortDirection():n,s=void 0===s?r.groupSortCase():s,"number"==typeof e&&(e=this.columnByField(e)),e instanceof L2&&(this.isGrouped(e)||!e.isRoot()&&this.rowGroup().isMergeMode()||0<=e.dataIndex()&&(e._setMergeGrouped(this.rowGroup().isMergeMode()),this._toastManager.show(r.groupingToast(),!0,function(){try{this._items.addGroupBy(t,e.dataIndex(),i,n,s)}catch(t){throw e._setMergeGrouped(!1),t}}.bind(this))))},removeGroupBy:function(t){t instanceof k4?this.isGrouped(t)&&this._items.removeGroupBy(t.dataIndex()):"number"==typeof t&&this._items.removeGroupBy(t)},expand:function(t,e,i){(!t||t instanceof j2)&&this._items.expand(t,e,i)},collapse:function(t,e,i){(!t||t instanceof j2)&&this._items.collapse(t,e,i)},expandAll:function(t){t=0<arguments.length?t:0,this._items.expand(null,!0,!0,t)},collapseAll:function(){this._items.collapse(null,!0,!0)},setPaging:function(t,e,i,n){this.isRowEditing(null)||t!=this.paged()&&(e=1<arguments.length?e:10,i=2<arguments.length?i:-1,n=3<arguments.length?n:0,this._items.setPaging(t,e,i,n))},setHidden:function(t,e){return t instanceof g2&&(t=t.dataIndex()),0<=(t=Math.floor(t))&&this._items.setHiddenRow(t,e)},setHiddenRows:function(t,e){if(V1(t)){var i,n,s=[];for(i=t.length;i--;)(n=t[i])instanceof g2&&(n=n.dataIndex()),0<=(n=Math.floor(n))&&s.push(n);return 0<s.length&&this._items.setHiddenRows(s,e)}return 0},getHiddenRows:function(){return this._items.getHiddenRows()},isHidden:function(t){return this._items.isRowHidden(t)},hiddenRowCount:function(){return this._items.hiddenRowCount()},unhideAllRows:function(){return this._items.unhideAllRows()},setRowSource:function(t){return t!=this.rowSource()&&(this._super(t),(this._items=t)instanceof d6&&(t.setCustomRowProvider(this),t.setSummaryMode(this.displayOptions().summaryMode()),t.setRowGroupSummaryMode(this.rowGroup().summaryMode()),this._doOperateOptionsChanged())),this},_createLayoutManager:function(){return new a08(this)},_createItemSource:function(){return new d6(!0)},_createDataTagManager:function(){return new f08(this)},_createPanelView:function(){return new v08(this._dom)},_createGroupPanelView:function(t,e){return new B08(t,e)},_doColumnsReset:function(t,e){this.clearGroupBy(),this._super(t,e)},getSummarizer:function(){return this._items.summarizer()},isGroupedField:function(t){return this._items.isGroupedField(t)},isGroupedColumn:function(t,e){return t&&this._items.isGroupedField(t.dataIndex())&&(e||t.root().displayIndex()<this._items.getGroupLevels())},getGroupLevels:function(){return this._items.getGroupLevels()},getGroupLevel:function(t){if("number"==typeof t)return this._items.getGroupLevel(t);if(t){var e=this.dataSource();if(e)return t=e.getFieldIndexEx(t),this._items.getGroupLevel(t)}return-1},_canMerge:function(){return!0},_doRowGroupAdornmentsChanged:function(){var t=this.rowGroup();this._items.setGroupedStyle(t.expandedAdornments(),t.collapsedAdornments(),t.createFooterCallback())},_doRowGroupDisplayModeChanged:function(){if(this.clearColumnMergeGrouped(),this.rowGroup().mergeMode()){var t,e=this._items.groupByFields();if(e&&0<e.length)for(t=e.length-1;0<=t;t--){var i=this.$_getVisibleRootByField(e[t]);i?i._setMergeGrouped(!0):e.splice(t,1)}e&&0<e.length?this._items.groupByMode(e,!0):this._items.groupByMode(null,!0)}else this._items.setMergeMode(!1)},_doSummaryModeChanged:function(){this._items.setSummaryMode(this.displayOptions().summaryMode())},_doGroupSummaryModeChanged:function(){this._items.setRowGroupSummaryMode(this.rowGroup().summaryMode())},_doOperateOptionsChanged:function(){this._items.setExpandWhenGrouping(this.operateOptions().expandWhenGrouping())},getIndicatorIndex:function(t){return this._items.getDisplayItemIndex(t)},updatePastedRow:function(t,e,i){var n=t.dataIndex();if(0<=n){var s=this.dataSource();s&&s.updateRow(n,e,!1,!1,i)}},updatePastedCell:function(t,e,i){var n=t.dataIndex();if(0<=n){var s=this.dataSource();s&&s.setValue(n,e,i)}},appendPastedRow:function(t){var e=this.dataSource();e&&e.appendRow(t)},canMoveIndex:function(t){var e=this._super(t);return e&&this.mergedRowGrouped()&&this.operateOptions().mergeGroupedColumnsFixed()&&(e=t>=this.rowGroupLevels()),e},canMoveToIndex:function(t){var e=this._super(t);return e&&this.mergedRowGrouped()&&this.operateOptions().mergeGroupedColumnsFixed()&&(e=t>=this.rowGroupLevels()),e},_doRevealRow:function(t){return this._items.reveal(t)},_parseDataRows:function(t){if(t){var e,i,n=[];for(e=t.length;e--;)(i=t[e])instanceof g2||(i=this.getRow(i)),i instanceof v4&&n.push(i);return n}},_firePaged:function(t){this.onPaged&&this.onPaged(this,t),this.fireEvent(A0.PAGED,t)},_firePageCountChanged:function(t,e){this.onPageCountChanged&&this.onPageCountChanged(this,t,e),this.fireEvent(A0.PAGE_COUNT_CHANGED,t,e)},_firePageIndexChanging:function(t,e){return(!this.onPageIndexChanging||!1!==this.onPageIndexChanging(this,t,e))&&this.fireConfirmEvent(A0.PAGE_INDEX_CHANGING,t,e)},_firePageIndexChanged:function(t,e){this.onPageIndexChanged&&this.onPageIndexChanged(this,t,e),this.fireEvent(A0.PAGE_INDEX_CHANGED,t,e)},_fireGrouping:function(t){return(!this.onGrouping||!1!==this.onGrouping(this,t))&&this.fireConfirmEvent(A0.GROUPING,t)},_fireGrouped:function(){this.onGrouped&&this.onGrouped(this),this.fireEvent(A0.GROUPED)},_fireExpanding:function(t){return(!this.onExpanding||!1!==this.onExpanding(this,t))&&this.fireConfirmEvent(A0.EXPANDING,t)},_fireExpanded:function(t){this.onExpanded&&this.onExpanded(this,t),this.fireEvent(A0.EXPANDED,t)},_fireCollapsing:function(t){return(!this.onCollapsing||!1!==this.onCollapsing(this,t))&&this.fireConfirmEvent(A0.COLLAPSING,t)},_fireCollapsed:function(t){return this.onCollapsed&&this.onCollapsed(this,t),this.fireEvent(A0.COLLAPSED,t)},onRowProviderPaged:function(t,e){this._firePaged(e)},onRowProviderPageCountChanged:function(t,e,i){this._firePageCountChanged(i,e)},onRowProviderPageIndexChanging:function(t,e,i){return this._firePageIndexChanging(i,e)},onRowProviderPageIndexChanged:function(t,e,i){return this._firePageIndexChanged(i,e)},onGroupedRowProviderGrouping:function(t,e){return this._fireGrouping(e)},$_clearGroupedIndex:function(t){for(var e=t.count()-1;0<=e;e--){var i=t.getItem(e),n=Q2(i,L2);n&&n.setGroupLevel(-1),i instanceof O1&&this.$_clearGroupedIndex(i)}},$_setGroupedIndex:function(t){for(var e=t.count()-1;0<=e;e--){var i=t.getItem(e),n=Q2(i,L2);n&&n.setGroupLevel(this._items.getGroupLevel(n.dataIndex())),i instanceof O1&&this.$_setGroupedIndex(i)}},onGroupedRowProviderGrouped:function(t){this.selections().clear(),this.$_clearGroupedIndex(this._rootGroup());var e,i,n,s,r,o=this._items.groupByFields();if(o&&0<o.length&&this.$_setGroupedIndex(this._rootGroup()),this.rowGroup().mergeMode()){for(e=[],i=this.visibleColumnCount(),n=0;n<i;n++)(s=Q2(this.getVisibleColumn(n),L2))&&(s.mergeGrouped()&&s.groupLevel()<=0?((r=Q2(s.stateFor(f4.MERGE_ROOMS),f4))&&r.clear(),s._setMergeGrouped(!1)):s.mergeGrouped()&&((r=Q2(s.stateFor(f4.MERGE_ROOMS),f4))||(r=new f4(s),s.setState(f4.MERGE_ROOMS,r)),e.push(s)));if(0<(i=e.length))for(e=e.sort(function(t,e){return t.groupLevel()-e.groupLevel()}),n=0;n<i;n++)e[n].setDisplayIndex(n),(r=e[n].stateFor(f4.MERGE_ROOMS)).clear(),r.initialize(k3.INIT_COUNT);for(i=this.visibleColumnCount(),n=0;n<i;n++)(s=Q2(this.getVisibleColumn(n),L2))&&!s.mergeGrouped()&&(r=s.stateFor(f4.MERGE_ROOMS))&&(r.clear(),r.initialize(k3.INIT_COUNT))}return this._fireGrouped()},onGroupedRowProviderExpand:function(t,e){return this._fireExpanding(e)},onGroupedRowProviderExpanded:function(t,e){return this._fireExpanded(e)},onGroupedRowProviderCollapse:function(t,e){return this._fireCollapsing(e)},onGroupedRowProviderCollapsed:function(t,e){return this._fireCollapsed(e)},$$_uncheckAll:function(){this.checkAll(!1)},onGridRowProviderSaveRow:function(t,e,i,n){i.$_saveChecked(e,this,n,this.checkBar().exclusive())},onGridRowProviderSaveRows:function(t,e,i){var n,s,r=this.checkBar().exclusive();if(i)for(n=i.length;n--;)i[n].$_saveChecked(e,this,i[n].dataIndex(),r);else for(n=this.rowCount();n--;)(s=this.getRow(n))instanceof v4&&s.$_saveChecked(e,this,s.dataIndex(),r)},onGridRowProviderRestoreRow:function(t,e,i,n){i.$_restoreChecked(e,this,n,this.$$_uncheckAll)},onGridRowProviderRestoreRows:function(t,e,i){var n;if(i)for(n=i.length;n--;)i[n].$_restoreChecked(e,this,i[n].dataIndex(),this.$$_uncheckAll);else for(n=this.rowCount();n--;)r=this.getRow(n),r instanceof v4&&r.$_restoreChecked(e,this,r.dataIndex(),this.$$_uncheckAll)}},null,function(t){t.PAGED="onGridViewPaged",t.PAGE_COUNT_CHANGED="onGridViewPageCountChanged",t.PAGE_INDEX_CHANGING="onGridViewPageIndexChanging",t.PAGE_INDEX_CHANGED="onGridViewPageIndexChanged",t.GROUPING="onGridViewGrouping",t.GROUPED="onGridViewGrouped",t.EXPANDING="onGridViewExpanding",t.EXPANDED="onGridViewExpanded",t.COLLAPSING="onGridViewCollapsing",t.COLLAPSED="onGridViewCollapsed"}),a08=I1("GridViewLayoutManager",F17,{init:function(t){this._super(t)},_getRowGroup:function(){return this._grid.rowGroup()},rowGrouped:function(){return this._grid.rowGrouped()&&this._grid.rowGroup().displayMode()!=k6.MERGED},rowGroupLevels:function(){return this._grid.rowGroupLevels()}}),q08=I1("GridViewSelectionTool",e47,{init:function(t){this._super(t)},_doKeyDown:function(t,e,i,n){var s,r=this.grid(),o=(r.layoutManager(),r.editOptions(),this.focused()),a=o.clone(),h=(a.isFixed(r)?r._fixedMergeView:r._mergeView).getCellView(o);return h instanceof e0&&(t==i1.LEFT||t==i1.RIGHT)?((s=h.groupRow())&&e?(t==i1.LEFT?s.expanded()?r.collapse(s,!1,!1):a.left():t==i1.RIGHT&&(s.collapsed()?r.expand(s,!1,!1):a.right()),a.setRow(s),r.setFocusedIndex(a,!0),r.makeCellVisible(a)):(t==i1.LEFT?a.left():t==i1.RIGHT&&a.right(),i&&0<r.selections().count()?(this.setFocused(a,!1),r.selections().getItem(0).resizeTo(a),this._keySelecting=!0):this.setFocused(a,!0)),!0):this._super(t,e,i,n)},_getEditRequest:function(t,e,i,n,s){var r,o=this.grid();return this._super(t,e,i,n,s)||(t instanceof x7&&((r=t.index().dataColumn())&&r.groupable()&&o.operateOptions().groupingEnabled()&&o.groupPanel().visible())?new M47(t):null)},_getDragTracker:function(t,e,i,n,s,r){return t instanceof M47?new s08(this.grid(),t):this._super(t,e,i,n,s,r)},_doClick:function(t,e){var i=this.findElementAt(t,e,!0);i instanceof i67&&this._grid.removeGroupBy(i.field()),this._super(t,e)},_doColumnHeaderClicked:function(t,e){this._super(t),e||this.grid().$_sortColumnByUser(t)},_doHandleClicked:function(t){var e,i,n,s=this.grid();t instanceof A6?(e=s.leftPos(),s.$_sortColumnByUser(t.cellView().index().dataColumn()),s.setLeftPos(e)):t instanceof k9?(i=Q2(t.cellView().item(),U6))&&(i.expanded()?s.collapse(i):s.expand(i,!1,!1)):t instanceof m47?(i=t.group())&&(i.expanded()?s.collapse(i):s.expand(i,!1,!1),i.expanded()||((!(n=0<=i.index()?i:null)||n.index()<0)&&i.footer()&&(n=i.footer()),n&&s.makeRowVisible(n.index()))):this._super(t)}}),v08=I1("GridPanelElement",K37,{init:function(t){this._super(t),this.setElementContext(!0)},_doMeasure:function(t,e,i){return{width:e,height:i}},_doLayoutContent:function(t){}}),B08=I1("GroupPanelElement",K0,{init:function(t,e){this._super(t,"groupPanelView",e),this._headView=new Z67(t,e),this._fields=null,this._fieldViews=[],this.setElementContext(!0)},fieldCount:function(){return this._fields?this._fields.length:0},getFieldView:function(t){for(var e=0;e<this._fieldViews.length;e++)if(this._fieldViews[e].fieldIndex()==t)return this._fieldViews[e];return null},_doMeasure:function(t,e,i){var n,s=this.model(),r=s.height();return this._fields=this.container().gridView().rowGroupFields(),this.$_prepareColumnViews(this._fields),n=s.minHeight(),!isNaN(r)&&0<r?!isNaN(n)&&0<n&&(r=Math.min(r,n)):!isNaN(n)&&0<n&&(r=n),r=isNaN(r)&&0<r?i:Math.max(0,r),J2.create(e,r)},_doLayoutContent:function(t){this.$_layoutColumnViews(this._fields)},_doRender:function(t,e){var i=this.model().styles(),n=i.background();n&&n.opqaue||t.drawRectI(U1.WHITE,null,e),n&&t.drawRectI(n,null,e),W2.drawStyledBorders(t,e,i)},_doRenderHtml:function(t){var e=this.model().styles(),i=e.background();this._dom.style.background=i?i.css():"#fff",W2.drawStyledHtmlBorders(this._dom.style,e)},$_prepareColumnViews:function(t){var e,i,n=this.model();if(t&&0<(e=t.length))for(;this._fieldViews.length<e;)i=new T08(this._dom,n),this.addElement(i),this._fieldViews.push(i)},$_layoutColumnViews:function(t){var e,i,n,s,r,o,a=this.grid(),h=a.lm(),l=this.model().styles(),u=this.width(),d=this.height()-1,c=this._headView,_=c.measure(this,u,d);if(this.hideAll(),this.addElement(c),c.setBounds(0,0,_.width,d),c.layoutContent(h),c.setVisible(!0),t&&(e=a.dataSource()))for(i=_.width,n=l.background(),s=0;s<t.length;s++)o=(r=a.columnByField(t[s]))&&r.header().text()||e.getField(t[s]).displayText(),(c=this._fieldViews[s]).setFieldIndex(t[s]),c.setText(o),c.setOwnerBackground(s==t.length-1?n:null),_=c.measure(a),c.setBounds(i,0,_.width,d),c.layoutContent(h),c.setVisible(!0),i+=_.width}},{NORMAL:0,GROUPING:1,UNGROUPING:2}),p98=I1("GroupPanelMenuElement",W2,{init:function(t){this._super(t,"panelMenuView")},background:null,color:null,hoveredColor:null,expanded:!1,setColor:function(t){t!=this._color&&(this._color=t,this._stroke=t?new Z1(t.color(),2):null)},setHoveredColor:function(t){t!=this._hoveredColor&&(this._hoveredColor=t,this._hoveredStroke=t?new Z1(t.color(),2):null)},_doMeasure:function(t){return{width:11,height:11}},_doRender:function(t,e){var i=this._background;i&&t.drawRectI(i,null,e);var n=this._hovered?this._hoveredStroke:this._stroke;if(n){var s=e.y+(e.height-10)/2,r=Math.min(9,e.width),o=e.x+(e.width-r)/2;s+=1,t.drawHLine(n,s,o,o+r),s+=3.5,t.drawHLine(n,s,o,o+r),s+=3.5,t.drawHLine(n,s,o,o+r)}},_doRenderHtml:function(t){this._doRender(this.$_getGraphics(!0),t)},_hoveredChanged:function(){this.invalidate()},propertyChanged:function(){this.invalidate()}}),Z67=I1("GroupPanelHeadElement",W2,{init:function(t,e){this._super(t,"panelHeadView"),this._panel=e,this._dom&&this.addElement(this._backView=new J27),this.addElement(this._menuView=new M9(t,this)),this._borderRect=new g1,this._menuSize=null,this._menuPadding=5,this._expanded=!0},background:U1.WHITE,borderTop:null,borderLeft:null,borderBottom:null,borderRight:U1.GRAY,paddingLeft:0,innerBorderTop:U1.WHITE,innerBorderLeft:null,innerBorderBottom:null,innerBorderRight:U1.WHITE,color:U1.DIMGRAY,shapeColor:U1.DKGRAY,shapeHoveredColor:U1.DIMGRAY,_doMeasure:function(t,e,i){return this._expanded=t.fieldCount()<=0,this._menuView.setVisible(this._panel.head().showMenu()),this._menuSize=this._menuView.visible()?this._menuView.measure(t.grid()):null,this._expanded?J2.create(e,i):this._menuSize?J2.create(this._menuSize.width+2*this._menuPadding,i):J2.create(0,i)},_doLayoutContent:function(t){var e=this._menuSize,i=this._panel.head(),n=this._menuView,s=i.styles(),r=i.innerStyles();this.setBackground(s.background()),this.setBorderTop(s.borderTop()),this.setBorderLeft(s.borderLeft()),this.setBorderBottom(s.borderBottom()),this.setBorderRight(s.borderRight()),this.setPaddingLeft(s.paddingLeft()),this.setInnerBorderTop(r.borderTop()),this.setInnerBorderLeft(r.borderLeft()),this.setInnerBorderBottom(r.borderBottom()),this.setInnerBorderRight(r.borderRight()),this.setColor(s.color()),this.setShapeColor(s.shapeColor()),this.setShapeHoveredColor(s.shapeHoveredColor()),n.visible()&&(n.setBoundsI(this._menuPadding,(this.height()-e.height+1)/2,e.width,e.height),n.setBackground(this._background),n.setColor(this._shapeColor),n.setHoveredColor(this._shapeHoveredColor))},_doRender:function(t,e){var i,n,s,r,o,a;(i=this._background)&&t.drawRectI(i,null,e),n=this._panel.prompt(),this._expanded&&n&&this._color&&(a=this._menuSize?this._menuSize.width+2*this._menuPadding:this._paddingLeft,this._dom?(s=this.$_prepareSpan(),w1.renderTextBounds(s,null,this._color,n,a,this._borderTop,e.width-a,e.height-this._borderTop-this._borderBottom-1)):t.drawTextBounds(null,this._color,n,a,this._borderTop,e.width-a,e.height-this._borderTop-this._borderBottom-1)),this._expanded||(r=this._borderRect.copy(e),(o=this._borderLeft)&&0<(a=o.width())&&(r.leftBy(a),a=B1(a/2),t.drawVLineI(o,e.x+a,e.y,e.bottom())),(o=this._borderRight)&&0<(a=o.width())&&(r.rightBy(-a),a=B1((a+1)/2),t.drawVLineI(o,e.right()-a,e.y,e.bottom())),(o=this._borderTop)&&0<(a=o.width())&&(r.topBy(a),a=B1(a/2),t.drawHLineI(o,e.y+a,e.x,e.right())),(o=this._borderBottom)&&0<(a=o.width())&&(r.bottomBy(-a),a=B1((a+1)/2),t.drawHLineI(o,e.bottom()-a,e.x,e.right())),(o=this._innerBorderLeft)&&0<(a=o.width())&&(a=B1(a/2),t.drawVLineI(o,r.x+a,r.y,r.bottom())),(o=this._innerBorderRight)&&0<(a=o.width())&&(a=B1((a+1)/2),t.drawVLineI(o,r.right()-a,r.y,r.bottom())),(o=this._innerBorderTop)&&0<(a=o.width())&&(a=B1(a/2),t.drawHLineI(o,r.y+a,r.x,r.right())),(o=this._innerBorderBottom)&&0<(a=o.width())&&(a=B1((a+1)/2),t.drawHLineI(o,r.bottom()-a,r.x,r.right())))},_doRenderHtml:function(t){this._doRender(this._backView.$_getGraphics(!0,t),t)},propertyChanged:function(){this.invalidate()}}),i67=I1("GroupPanelFieldCloseElement",W2,{init:function(t){this._super(t,"groupPanelCloseView"),this._grid=null},field:-1,_doMeasure:function(t){return this._grid=t,this._dirty=this._dirty||t._imageLoaded,{width:13,height:13}},_doDraw:function(t){var e,i,n=this.getClientRect(this._drawRect),s=this._grid.getAssetImage("group_close"),r=this._grid.getAssetImage("group_close_hover"),o=this._hovered?r:s;o&&0<(e=o.width)&&0<(i=o.height)&&t.drawImageI(o,(n.width-e)/2,(n.height-i)/2,e,i)},_doDrawHtml:function(){this._doDraw(this.$_getGraphics(!0))},propertyChanged:function(){this.invalidate()}}),T08=I1("GroupPanelFieldElement",W2,{init:function(t,e){this._super(t,"panelHeadView",e),this._panel=e,this.addElement(this._closeView=new i67(t)),this._borderRect=new g1,this._closeSize=null},fieldIndex:-1,text:null,ownerBackground:null,background:U1.WHITE,borderTop:null,borderLeft:null,borderBottom:null,borderRight:U1.GRAY,innerBorderTop:null,innerBorderLeft:null,innerBorderBottom:null,innerBorderRight:U1.WHITE,paddingLeft:0,paddingRight:0,color:U1.GRAY,font:null,_doMeasure:function(t,e,i){var n=this._panel.itemStyles(),s=this._panel.itemInnerStyles();this.setBackground(n.background()),this.setBorderTop(n.borderTop()),this.setBorderLeft(n.borderLeft()),this.setBorderBottom(n.borderBottom()),this.setBorderRight(n.borderRight()),this.setInnerBorderTop(s.borderTop()),this.setInnerBorderLeft(s.borderLeft()),this.setInnerBorderBottom(s.borderBottom()),this.setInnerBorderRight(s.borderRight()),this.setPaddingLeft(n.paddingLeft()),this.setPaddingRight(n.paddingRight()),this.setFont(n.font()),this.setColor(n.color());var r=this._paddingLeft+this._paddingRight;return r+=t.measureText(this._font,this._text)+20,this._closeSize=this._closeView.measure(t),this._closeView.setField(this._fieldIndex),J2.create(r+this._closeSize.width,i)},_doLayoutContent:function(t){this._closeView.setBounds(this.width()-14-this._closeSize.width,3,this._closeSize.width,this._closeSize.height)},$_renderCell:function(t,e){(d=this._background)&&t.drawPolygonArray(d,null,[e.x,e.y,e.right()-14-1,e.y,e.right()-1,e.bottom(),e.x,e.bottom()]);var i=this._borderTop,n=i?i.width():0,s=this._borderBottom,r=s?s.width():0,o=this._innerBorderTop,a=o?o.width():0,h=this._innerBorderBottom,l=h?h.width():0,u=this._text,d=this._color;if(u&&d){var c=this._font,_=e.x+this._paddingLeft,f=e.y+n+a-1,g=e.width-this._paddingLeft-this._paddingRight-15,m=e.height-(n+a+r+l);if(this._dom){var p=this.$_prepareSpan();w1.renderTextBounds(p,c,d,u,_,f,g,m)}else t.drawTextBounds(c,d,u,_,f,g,m)}var w,v=this._borderRect.copy(e);(w=this._borderLeft)&&0<(g=w.width())&&(v.leftBy(g),g=B1(g/2),t.drawVLineI(w,e.x+g,e.y,e.bottom())),(w=this._borderRight)&&0<(g=w.width())&&(v.rightBy(-g),g=B1((g+1)/2),t.drawLine(w,e.right()-g-14,e.y,e.right(),e.bottom())),0<(g=n)&&(v.topBy(g),g=B1(g/2),t.drawHLineI(i,e.y+g,e.x,e.right())),0<(g=r)&&(v.bottomBy(-g),g=B1((g+1)/2),t.drawHLineI(s,e.bottom()-g,e.x,e.right())),(w=this._innerBorderLeft)&&0<(g=w.width())&&(g=B1(g/2),t.drawVLineI(w,v.x+g,v.y,v.bottom())),(w=this._innerBorderRight)&&0<(g=w.width())&&(g=B1((g+1)/2),t.drawLine(w,v.right()-g-14,v.y,v.right(),v.bottom())),0<(g=a)&&(g=B1(g/2),t.drawHLineI(o,v.y+g,v.x,v.right())),0<(g=l)&&(g=B1((g+1)/2),t.drawHLineI(h,v.bottom()-g,v.x,v.right()))},_doRender:function(t,e){var i=this._ownerBackground||this._background;i&&t.drawRectI(i,null,e),this.$_renderCell(t,e)},_doRenderHtml:function(t){var e=this._ownerBackground||this._background;w4?this.$_setCssFill(e):this._css.background=e?e.css():"",this.$_renderCell(this.$_getGraphics(!0,t,this._closeView._dom),t)},_hoveredChanged:function(){this.invalidate(!1,!0)},propertyChanged:function(){this.invalidate(!1,!0)}}),V67=I1("ColumnView",x7,{init:function(t,e){this._super(t,"columnView"),this._grid=e,this._stroke=new Z1(2281701376,3),this.setShowHandles(!1)},acceptable:!0,setAcceptable:function(t){t!=this._acceptable&&(this._acceptable=t,this.invalidate())},grid:function(){return this._grid},_doMeasure:function(t,e,i){var n=this.container().measureText(this.font(),this.text())+this.paddingHorz()+2*this.borderWidth();return new J2(n,i)},_doRender:function(t,e){var i=null,n=this.border(),s=n?n.width():0;(i=this._acceptable?this.background():U1.LTGRAY)&&t.drawRectI(i,null,e),0<s&&e.inflate(s,s),i=null,(i=this._acceptable?this.color():U1.WHITE)&&t.drawTextRect(this.font(),i,this.text(),e,T2.CENTER),this._acceptable||(n=Z1.GRAY),n&&(e.inflate(-s,-s),t.drawBoundsI(null,n,e.x,e.y,e.right()-1,e.bottom()-1))}}),M47=I1("RowGroupingRequest",R9,{init:function(t){this._super(t)},groupIndex:-1,column:function(){return Q2(this.cell().index().column,L2)},cursor:function(){return null}}),s08=I1("RowGroupingTracker2",i7,{init:function(t,e){this._super(t,"rowGroupingTracker"),this._request=e,this._columnView=null,this._border=new Z1(4291611852,1),this._border2=new Z1(4283782485,1),this.setNeedRedraw(!0),this.setCancelable(!0)},request:function(){return this._request},_doStart:function(t,e){return!0},_canAccept:function(t,e){var i=this.grid().lm();return e-2<i.headerBounds().y&&e>i.groupPanelBounds().y},_doCompleted:function(){var t=this.grid();t.isGrouped(this._request.column())||t.addGroupBy(1e4,this._request.column())},_doEnded:function(){},_showFeedback:function(t,e){var i=this.grid(),n=this._request.column(),s=!i.isGrouped(n),r=this._columnView,o=P1.temp(-1,n);r||(r=this._columnView=new V67(i._dom,i)),r.setAcceptable(s),r.updateCell(i.header().getCell(o)),r._border=s?this._border:null,r.setBounds(0,0,110,22),r.invalidate(),i.addFeedbackElement(this._columnView),r.move(i.containerToGridX(t)-4,i.containerToGridY(e)-2)},_moveFeedback:function(t,e){var i=this.grid(),n=(i.lm(),this._columnView);n.acceptable()&&n.setBorder(this._canAccept(t,e)?this._border2:this._border),n.move(i.containerToGridX(t)-4,i.containerToGridY(e)-2)},_hideFeedback:function(){this.grid().removeFeedbackElement(this._columnView)}}),f08=I1("GridDataTagManager",K67,{init:function(t){this._super(t)},_createSeriesTag:function(t){return new u08(t)},_createCalculatedTag:function(t){return new g08(t)},connect:function(e){this._dataSource=e,this._lm=this._grid.layoutManager(),this._anis=this._grid._animations,this._visitTags(function(t){t.connect(e)})},disconnect:function(){this._dataSource=void 0,this._visitTags(function(t){t.disconnect()})},clearRows:function(){this._visitTags(function(t){t.clearRows()}),this._anis.clear()},setRows:function(){this._visitTags(function(t){t.setRows()}),this._grid.requestLoadAnimation(!0)},setRowCount:function(e){this._visitTags(function(t){t.setRowCount(e)})},insertRow:function(e){this._visitTags(function(t){t.insertRow(e)})},insertRows:function(e,i){this._visitTags(function(t){t.insertRows(e,i)})},removeRow:function(e){this._visitTags(function(t){t.removeRow(e)})},removeRows:function(e){this._visitTags(function(t){t.removeRows(e)})},updateRow:function(e){this._visitTags(function(t){t.updateRow(e)}),this._anis.requestUpdate(this._lm,this._dataSource.getRowId(e),-1)},updateRows:function(e){this._visitTags(function(t){t.updateRows(e)})},setValue:function(e,i){this._visitTags(function(t){t.setValue(e,i)}),this._anis.requestUpdate(this._lm,this._dataSource.getRowId(e),i)},moveRow:function(e,i){this._visitTags(function(t){t.moveRow(e,i)})},moveRows:function(e,i,n){this._visitTags(function(t){t.moveRows(e,i,n)})}}),u08=I1("GridSeriesValueTag",N67,{init:function(t){this._super(t),this._rows=[]},clearValues:function(){this._rows=[]},getValues:function(t){var e=this._rows[t];return void 0===e&&(e=this.$_calculate(t),this._rows[t]=e),e},connect:function(t){this._dataSource=t,this._rows=[]},disconnect:function(){this._dataSource=void 0,this._rows=void 0},clearRows:function(){this._rows=[]},setRows:function(){this._rows=[]},setRowCount:function(t){this._rows.length=Math.min(this._rows.length,t)},insertRow:function(t){var e=this.$_calculate(t);this._rows.splice(t,0,e)},insertRows:function(t,e){var i,n,s;for(this._column,i=0;i<e;i++)n=t+i,s=this.$_calculate(n),this._rows.splice(n,0,s)},removeRow:function(t){this._rows.splice(t,1)},removeRows:function(t){for(var e=t.length;e--;)this._rows.splice(t[e],1)},updateRow:function(t){this._rows[t]=this.$_calculate(t)},updateRows:function(t){var e,i;for(this._column,e=t.length;e--;)i=t[e],this._rows[i]=this.$_calculate(i)},setValue:function(t,e){this._rows[t]=this.$_calculate(t)},moveRow:function(t,e){var i=this._rows,n=i[t];i.splice(t,1),i.splice(e,0,n)},moveRows:function(t,e,i){var n,s,r=this._rows,o=r.splice(t,e);for(n=0,s=o.length;n<s;n++)r.splice(i+n,0,o[n])},saveRow:function(t,e){},restoreRow:function(t,e,i){this._rows[e]=this.$_calculate(e)},saveRows:function(t,e){},restoreRows:function(t,e,i){}}),g08=I1("GridCalcluatedValueTag",P67,{init:function(t){this._super(t),this._values=[]},clearValues:function(){this._values=[]},hasValue:function(t){return this._values[t]!==c2},_isGrouped:function(t){return t.rowGrouped()},_indexOfRow:function(t,e){for(var i=t.length;i--;)if(t[i].dataIndex()==e)return i;return-1},connect:function(t){this._values=[],this.requestAll()},disconnect:function(){this._values=void 0},clearRows:function(){this._values=[]},setRows:function(){this._values=[],this.requestAll()},setRowCount:function(t){this._values.length=Math.min(this._values.length,t),this.requestAll()},insertRow:function(t){this._values.splice(t,0,void 0),this.requestRow(t)},insertRows:function(t,e){for(var i=0;i<e;i++)this._values.splice(t+i,0,void 0);this.requestRow(t)},removeRow:function(t){this._values.splice(t,1),this.requestRow(t)},removeRows:function(t){for(var e=t.length;e--;)this._values.splice(t[e],1);this.requestRow(t[0])},updateRow:function(t){t<this._values.length&&(this._values[t]=void 0,this.requestRow(t))},updateRows:function(t){var e,i;for(e=0;e<t.length;e++)(i=t[e])<this._values.length&&(this._values[i]=void 0);this.requestRow(t[0])},setValue:function(t,e){t<this._values.length&&(this._values[t]=void 0,this.requestRow(t))},moveRow:function(t,e){var i=this._values;t<i.length&&(i[t]=void 0),e<i.length&&(i[t]=void 0),this.requestRow(t)},moveRows:function(t,e,i){var n,s=this._values;for(n=0;n<e;n++)t+n<s.length&&(s[t]=void 0);for(n=0;n<e;n++)i+n<s.length&&(s[t]=void 0);this.requestRow(t)},saveRow:function(t,e){},restoreRow:function(t,e,i){this._values.length>e&&(this._values[e]=void 0)},saveRows:function(t,e){},restoreRows:function(t,e,i){}}),r08=I1("GridRowSource",d6,{init:function(){this._super(!0)}}),h08=I1("GridCellStyleMap",J37,{init:function(){this._super()},connect:function(t){this._ds=t},disconnect:function(){this._ds=null},clearRows:function(){this._styleMap=[]},setRows:function(){this._ds&&(this._styleMap.length=Math.min(this._styleMap.length,this._ds.rowCount()))},setRowCount:function(t){this._styleMap.length=t},insertRow:function(t){this._styleMap.splice(t,0,null)},insertRows:function(t,e){for(var i=0;i<e;i++)this._styleMap.splice(t,0,null)},removeRow:function(t){this._styleMap.splice(t,1)},removeRows:function(t){for(var e=t.length-1;0<=e;e--)this._styleMap.splice(t[e],1)},updateRow:function(){},updateRows:function(t){},setValue:function(t,e){},moveRow:function(t,e){var i=this._styleMap.splice(t,1);this._styleMap.splice(e,i[0])},moveRows:function(t,e,i){for(var n=this._styleMap.splice(t,e),s=0;s<e;s++)this._styleMap.splice(i+s,0,n[s])},saveRow:function(t,e,i){if(i){var n=this.$_hash+"_"+e,s=this._styleMap[e];t.set(n,s)}},restoreRow:function(t,e,i){if(i){var n=this.$_hash+"_"+e,s=t.get(n);t.unset(n),this._styleMap[e]=s}},saveRows:function(t,e,i){var n,s,r,o,a=this.$_hash,h=this._styleMap;if(i)if(e===i2.ALL_ROWS)for(s=Math.min(this._ds.rowCount(),h.length);s--;)r=a+"_"+s,o=h[s],t.set(r,o);else for(n=e.length;n--;)r=a+"_"+(s=e[n]),o=h[s],t.set(r,o)},restoreRows:function(t,e,i){var n,s,r,o,a=this.$_hash,h=this._styleMap;if(i)if(e===i2.ALL_ROWS)for(s=this._ds.rowCount();s--;)r=a+"_"+s,o=t.get(r),t.unset(r),h[s]=o;else for(n=e.length;n--;)r=a+"_"+(s=e[n]),o=t.get(r),t.unset(r),h[s]=o}}),Y4={LINE_UP:"lineUp",LINE_DOWN:"lineDown",LINE_LEFT:"lineLeft",LINE_RIGHT:"lineRight",PAGE_UP:"pageUp",PAGE_DOWN:"pageDown",PAGE_LEFT:"pageLeft",PAGE_RIGHT:"pageRight",THUMB_TRACK:"thumbTrack",THUMB_END:"thumbEnd"},S67="prod"!=s0.product,W47=I1("ScrollEdgeElement",W2,{init:function(t,e){this._super(t,"scrollEdge"),this._fill=U1.SCROLL},fill:null,updateElement:function(t){this.setFill(t.background())},_doRender:function(t,e){t.drawRectI(this._fill,null,e)},_doRenderHtml:function(t){var e=this._fill;c4?this.$_setCssFill(e):this._css.background=e?e.css():""}}),y5=I1("ScrollBarElement",W2,{init:function(t,e){this._super(t,"scrollBarView"),this._nearButton=new x17(t,this,!1),this.addElement(this._nearButton),this._farButton=new x17(t,this,!0),this.addElement(this._farButton),this._thumb=new L17(t,this),this.addElement(this._thumb),this._vertical=e,this._buttonSize=20,this._min=0,this._max=0,this._pos=0,this._page=0,this._maxPosition=0,this.setElementContext(!0,!1)},buttonLocation:p0.NORMAL,lineScrollSize:1,pageScrollSize:1,minThumbSize:20,vertical:function(){return this._vertical},maxPosition:function(){return this._maxPosition},setProperties:function(t,e,i){t=Y1(Math.max(0,t)),e=Y1(Math.max(t,e)),t==this._min&&e==this._max&&i==this._page||(this._min=t,this._max=e,this._page=i,this._pos=Math.min(this._max,Math.max(this._min,this._pos)),this._maxPosition=Math.max(0,this._max-this._page),this.invalidate(!0,!0))},setPosition:function(t,e){(t=Y1(Math.min(this._maxPosition,Math.max(this._min,t))))!=this._pos&&(this._pos=t,this.invalidate(!0,!0),e&&this._doLayoutContent())},updateElement:function(t){this._buttonLocation=t.buttonLocation(),this._lineScrollSize=t.lineScrollSize(),this._pageScrollSize=t.pageScrollSize(),this._minThumbSize=t.minThumbSize(),this._fill=t.styles().background(),this._nearButton.updateElement(t.buttonStyles()),this._farButton.updateElement(t.buttonStyles()),this._thumb.updateElement(t.thumbStyles())},ptInTrack:function(t,e,i){var n=this._thumb,s=this.containerToElement(t,e);switch(this._buttonLocation){case p0.NEAR:if(this._vertical){if(s.y>=this._farButton.bottom()&&s.y<this.height())return!i&&s.y<n.y()||i&&s.y>n.bottom()}else if(s.x>=this._farButton.right()&&s.x<this.width())return!i&&s.x<n.x()||i&&s.x>n.right();break;case p0.FAR:if(this._vertical){if(0<=s.y&&s.y<this._nearButton.y())return!i&&s.y<n.y()||i&&s.y>=n.bottom()}else if(0<=s.x&&s.x<this._nearButton.x())return!i&&s.x<n.x()||i&&s.x>=n.right();break;case p0.HIDDEN:if(this._vertical){if(0<=s.y&&s.y<this.height())return!i&&s.y<n.y()||i&&s.y>=n.bottom()}else if(0<=s.x&&s.x<this.width())return!i&&s.x<n.x()||i&&s.x>=n.right();break;case p0.NORMAL:default:if(this._vertical){if(s.y>=this._nearButton.height()&&s.y<this._farButton.y())return!i&&s.y<n.y()||i&&s.y>=n.bottom()}else if(s.x>=this._nearButton.width()&&s.x<this._farButton.x())return!i&&s.x<n.x()||i&&s.x>=n.right()}return!1},_doLayoutContent:function(){var t=this._vertical,e="hidden"==this._buttonLocation?0:this._buttonSize,i=(t?this._height:this._width)-2*e,n=Math.min(i,Math.max(this._minThumbSize,Y1(i*this._page/Math.max(1,this._max-this._min+1)))),s=e+Math.min(i-n,Math.max(0,(i-n)*this._pos/Math.max(1,this._maxPosition-this._min)));if(this._nearButton.setVisible(0<e),this._farButton.setVisible(0<e),0<e&&(this._nearButton.setEnabled(this._pos>this._min),this._farButton.setEnabled(this._pos<this._maxPosition)),t){if(0<e)switch(this._buttonLocation){case"near":this._nearButton.setBounds(0,0,this._width,e),this._farButton.setBounds(0,e,this._width,e),s+=e;break;case"far":this._farButton.setBounds(0,this._height-e,this._width,e),this._nearButton.setBounds(0,this._height-e-e,this._width,e),s-=e;break;default:this._nearButton.setBounds(0,0,this._width,e),this._farButton.setBounds(0,this._height-e,this._width,e)}n<=i&&this._thumb.setBounds(1,s,this._width-2,n)}else{if(0<e)switch(this._buttonLocation){case"near":this._nearButton.setBounds(0,0,e,this._height),this._farButton.setBounds(e,0,e,this._height),s+=e;break;case"far":this._farButton.setBounds(this._width-e,0,e,this._height),this._nearButton.setBounds(this._width-e-e,0,e,this._height),s-=e;break;default:this._nearButton.setBounds(0,0,e,this._height),this._farButton.setBounds(this._width-e,0,e,this._height)}n<=i&&this._thumb.setBounds(s,1,n,this._height-2)}},_doRender:function(t,e){t.drawRectI(this._fill,null,e)},_doRenderHtml:function(t){var e=this._fill;c4?this.$_setCssFill(e):this._css.background=e?e.css():""},_doScroll:function(t,e,i){this.fireEvent(y5.SCROLLED,t,e,i)},_mouseOut:function(){this._nearButton.setPressed(!1),this._farButton.setPressed(!1),this._thumb.setPressed(!1)}},{SCROLLED:"onScrollBarScrolled"}),x17=I1("ScrollButton",o7,{init:function(t,e,i){this._super(t),this._scrollBar=e,this._far=i,this._enabled=!0},background:null,hoveredBackground:null,selectedBackground:null,border:null,shapeColor:null,shapeSelectedColor:null,shapeInactiveColor:null,pressed:!1,enabled:!0,vertical:function(){return this._scrollBar._vertical},far:function(){return this._far},scrollBar:function(){return this._scrollBar},setPressed:function(t){t!=this._pressed&&(this._pressed=t,this._scrollBar.invalidate(!0,!0))},setEnabled:function(t){t!=this._enabled&&(this._enabled=t,this._scrollBar.invalidate(!0,!0))},updateElement:function(t){this.setBackground(t.background()),this.setHoveredBackground(t.hoveredBackground()),this.setSelectedBackground(t.selectedBackground()),this.setBorder(t.border()),this.setShapeColor(Z1.fromFill(t.shapeColor())),this.setShapeSelectedColor(Z1.fromFill(t.shapeSelectedColor())),this.setShapeInactiveColor(Z1.fromFill(t.shapeInactiveColor()))},_hoveredChanged:function(){this._scrollBar.invalidate(!0,!0)},$_drawTrianlge:function(t,e,i,n){this._scrollBar._vertical?this._far?(t.drawVLineI(e,i,n-1,n+3),t.drawHLineI(e,n-1,i-3,i+4),t.drawHLineI(e,n,i-2,i+3),t.drawHLineI(e,n+1,i-1,i+2)):(t.drawVLineI(e,i,n-2,n+1),t.drawHLineI(e,n+1,i-3,i+4),t.drawHLineI(e,n,i-2,i+3),t.drawHLineI(e,n-1,i-1,i+2)):this._far?(t.drawHLineI(e,n,i-1,i+3),t.drawVLineI(e,i-1,n-3,n+4),t.drawVLineI(e,i,n-2,n+3),t.drawVLineI(e,i+1,n-1,n+2)):(t.drawHLineI(e,n,i-2,i+1),t.drawVLineI(e,i+1,n-3,n+4),t.drawVLineI(e,i,n-2,n+3),t.drawVLineI(e,i-1,n-1,n+2))},_doDraw:function(t){var e=this.getClientRect(),i=Y1(e.width/2),n=Y1(e.height/2);this.$_getDrawings(),t.drawRectI(this._fill,null,e),this._border&&(e.rightBy(-1),e.bottomBy(-1),t.drawRectI(null,this._border,e)),this.$_drawTrianlge(t,this._stroke,i,n)},_doDrawHtml:function(){var t=this.getClientRect(),s=Y1(t.width/2),r=Y1(t.height/2);this.$_getDrawings(),c4?this.$_setCssFill(this._fill):this._css.background=this._fill?this._fill.css():"",this._css.border=this._border?this._border.css():"",this._svg||(this._svg=new b7(this,this.container()));var o=this;this._svg.render(function(t,e,i,n){o.$_drawTrianlge(e,o._stroke,s,r)})},$_getDrawings:function(){this._fill=this._pressed?this._selectedBackground:this.hovered()?this._hoveredBackground:this._background,this._stroke=this._pressed?this._shapeSelectedColor:this._enabled?this._shapeColor:this._shapeInactiveColor}}),L17=I1("ScrollThumb",o7,{init:function(t,e){this._scrollBar=e,this._super(t)},borderRadius:0,background:null,hoveredBackground:null,selectedBackground:null,border:null,pressed:!1,setBorderRadius:function(t){this._borderRadius=Math.max(0,K3(t))},setPressed:function(t){t!=this._pressed&&(this._pressed=t,this._scrollBar.invalidate(!0,!0))},scrollBar:function(){return this._scrollBar},vertical:function(){return this._scrollBar._vertical},updateElement:function(t){this.setBorderRadius(t.borderRadius()),this.setBackground(t.background()),this.setHoveredBackground(t.hoveredBackground()),this.setSelectedBackground(t.selectedBackground()),this.setBorder(t.border())},_hoveredChanged:function(){this._scrollBar.invalidate(!0,!0)},_doDraw:function(t){var e,i,n,s=this.getClientRect(),r=this._borderRadius;fill=this._pressed?this._selectedBackground:this.hovered()?this._hoveredBackground:this._background,0<r&&(e=this.vertical(),i=this.width(),n=this.height(),r=Math.min(r,(e?i:n)-2,Y1((e?n:i)/2-1))),0<r?t.drawRoundRectI(fill,this._border,s,r,r,r,r):t.drawRectI(fill,this._border,s)},_doDrawHtml:function(t){this.getClientRect();var e=this._borderRadius;fill=this._pressed?this._selectedBackground:this.hovered()?this._hoveredBackground:this._background,c4?this.$_setCssFill(fill):this._css.background=fill?fill.css():"",this._css.border=this._border?this._border.css():"",this._css.borderRadius=0<e?e+"px":0}}),X08=I1("ScrollThumbRequest",i6,{init:function(t){this._super(),this._thumb=t},thumb:function(){return this._thumb},scrollBar:function(){return this._thumb.scrollBar()},cursor:function(){return U0.ARROW},isSelectable:function(){return!1}}),a67=I1("ScrollThumbTracker",c27,{init:function(t,e,i){this._super(t.scrollBar().container(),"scrollThumbTracker"),this._request=t,this._thumb=t.thumb(),this._scrollBar=t.scrollBar(),this._vertical=this._scrollBar.vertical();var n=this._scrollBar.containerToElement(e,i);this._scrollBar.vertical()?this._offset=n.y-this._thumb.y():this._offset=n.x-this._thumb.x()},isStartWhenCreated:function(){return!0},_doStart:function(t,e){return this._thumb.setPressed(!0),!0},_doDrag:function(t,e){return this.$_doScroll(t,e,Y4.THUMB_TRACK)},_doCompleted:function(t,e){return this.$_doScroll(t,e,Y4.THUMB_END)},_doCanceled:function(t,e){},_doEnded:function(){this._thumb.setPressed(!1)},$_doScroll:function(t,e,i){var n,s,r,o=this._scrollBar,a=o._maxPosition-o._min+1,h=o._buttonSize,l=o.containerToElement(t,e);switch(r=o.vertical()?(n=o.height(),s=this._thumb.height(),l.y-this._offset):(n=o.width(),s=this._thumb.width(),l.x-this._offset),o.buttonLocation()){case p0.FAR:r*=a;break;case p0.NEAR:r=(r-2*h)*a;break;case p0.HIDDEN:h=0;case p0.NORMAL:default:r=(r-h)*a}return r/=n-2*h-s,o._doScroll(i,0,Y1(r)),!0}}),q67=I1("ScrollButtonTimer",a2,{init:function(t){this._super(),this._button=t,this._scrollBar=t.scrollBar(),this._active=!1,this._timer=c2,this._ready=!1},start:function(){this._button.setPressed(!0),this._active=!0,this.$_fireEvent(),setTimeout(function(){this._ready&&(this._ready=!1,this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),50))}.bind(this),200),this._ready=!0},move:function(t,e){var i=this._button.containerToElement(t,e);this._active=this._button.containsInClient(i.x,i.y)},stop:function(t,e){this._ready=!1,this._timer&&clearInterval(this._timer),this._button.setPressed(!1)},$_fireEvent:function(){var t=null,e=1;this._scrollBar.vertical()?this._button.far()?t=Y4.LINE_DOWN:(t=Y4.LINE_UP,e=-1):this._button.far()?t=Y4.LINE_RIGHT:(t=Y4.LINE_LEFT,e=-1),this._scrollBar._doScroll(t,this._scrollBar.lineScrollSize()*e,0)}}),v67=I1("ScrollTrackTimer",a2,{init:function(t,e){this._super(t),this._scrollBar=t,this._isFar=e,this._active=!1,this._timer=c2,this._ready=!1},start:function(){this._active=!0,this.$_fireEvent(),setTimeout(function(){this._ready&&(this._ready=!1,this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),50))}.bind(this),200),this._ready=!0},move:function(t,e){var i=this._scrollBar.containerToElement(t,e);this._active=this._scrollBar.ptInTrack(i.x,i.y,this._isFar)},stop:function(t,e){this._ready=!1,this._timer&&clearInterval(this._timer)},$_fireEvent:function(){var t=null,e=0,i=this._scrollBar._thumb;if(this._scrollBar.vertical()){var n=this._scrollBar.mouseY();this._isFar&&n>i.bottom()?(t=Y4.PAGE_DOWN,e=1):n<i.y()&&(t=Y4.PAGE_UP,e=-1)}else{var s=this._scrollBar.mouseX();this._isFar&&s>i.right()?(e=1,t=Y4.PAGE_RIGHT):s<i.x()&&(t=Y4.PAGE_LEFT,e=-1)}0!=e&&this._scrollBar._doScroll(t,this._scrollBar.pageScrollSize()*e,0)}});Y8=Y8||new Date(s0.expiration);var B67=I1("GridScrollTool",null,{init:function(t){this._super(t,"gridScrollTool"),this._tracker=null,this._scrollTimer=null},isScrolling:function(){return null!=this._tracker||null!=this._scrollTimer},stop:function(t,e){if(this._tracker&&this._tracker.isDragging())try{this._tracker.drop(t,e),this._tracker.deactivate()}finally{this._tracker=null}else this._scrollTimer&&(this._scrollTimer.stop(t,e),this._scrollTimer=null)},start:function(t,e,i){return t instanceof L17?(this._tracker=new a67(new X08(t),e,i),this._tracker.activate(),!!this._tracker.start(e,i)||(this._tracker=null,!1)):t instanceof x17?(t.enabled()&&(this._scrollTimer=new q67(t),this._scrollTimer.start()),!0):!!(t instanceof y5&&(t.ptInTrack(e,i,!0)?this._scrollTimer=new v67(t,!0):t.ptInTrack(e,i,!1)&&(this._scrollTimer=new v67(t,!1)),this._scrollTimer))&&(this._scrollTimer.start(),!0)},move:function(t,e){if(this._tracker&&this._tracker.isDragging()){if(!this._tracker.drag(t,e))try{this._tracker.cancel(t,e),this._tracker.deactivate()}finally{this._tracker=null}}else this._scrollTimer&&this._scrollTimer.move(t,e)}}),u4=I1("DataRowExpressionRuntime",e4,{init:function(t){this._super(),this._grid=t},setDataSource:function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount():0},setItem:function(t){this._item=t,this._group=Q2(t,j2)},scope:function(){return this._item},isIdentifier:function(t){return t=t.toLowerCase(),u4.IDENTS.hasOwnProperty(t)?u4.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case u4.ID_ROW:return this._item.index();case u4.ID_DATA_ROW:return this._item.dataIndex();case u4.ID_CHECKED:return this._grid.isChecked(this._item);case u4.ID_STATE:switch(this._item.dataState()){case j1.CREATED:return"c";case j1.UPDATED:return"u";case j1.DELETED:return"d";case j1.CREATE_AND_DELETED:return"x"}return c2;case u4.ID_COUNT:return this._group?this._group.count():0;case u4.ID_DCOUNT:return this._group?this._group.descendantCount():0;case u4.ID_TAG:return this._dataSource.getRowTag(this._item.dataIndex())}return this._super(t)},evaluateIndexerI:function(t,e){if(this._item)return t==u4.ID_VALUES?((e<0||e>=this._fieldCount)&&B2(e),this._item.getValue(e)):this._super(t,e)},evaluateIndexerS:function(t,e){if(t!=u4.ID_VALUES)return this._super(t,e);if(this._dataSource){var i=this._dataSource.getFieldIndex(e);return(i<0||i>=this._fieldCount)&&B2(e),this._item.getValue(i)}}},{ID_ROW:0,ID_DATA_ROW:1,ID_CHECKED:2,ID_VALUES:3,ID_STATE:4,ID_COUNT:5,ID_DCOUNT:6,ID_TAG:7},function(t){t.IDENTS={row:t.ID_ROW,datarow:t.ID_DATA_ROW,checked:t.ID_CHECKED,values:t.ID_VALUES,state:t.ID_STATE,count:t.ID_COUNT,dcount:t.ID_DCOUNT,tag:t.ID_TAG}}),F7=I1("DataCellExpressionRuntime",e4,{init:function(t){this._super(),this._grid=t,this._cell=null,this._row=null,this._dataSource=null,this._fieldCount=0},setDataSource:function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount():0},setCell:function(t){this._cell=t,this._row=t.row()},scope:function(){return this._cell},isIdentifier:function(t){return t=t.toLowerCase(),F7.IDENTS.hasOwnProperty(t)?F7.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case F7.ID_VALUE:return this._cell.value();case F7.ID_ROW:return this._row.index();case F7.ID_DATA_ROW:return this._row.dataIndex();case F7.ID_INDEX:return this._cell.index().column.index();case F7.ID_FIELD:return this._cell.index().dataField();case F7.ID_CHECKED:return this._grid.isChecked(this._row);case F7.ID_STATE:switch(this._row.dataState()){case j1.CREATED:return"c";case j1.UPDATED:return"u";case j1.DELETED:return"d";case j1.CREATE_AND_DELETED:return"x"}return;case F7.ID_TAG:return this._cell.index().column.tag();case F7.ID_COUNT:return this._row instanceof j2?this._row.count():0;case F7.ID_DCOUNT:return this._row instanceof j2?this._row.descendantCount():0;case F7.ID_ROWTAG:return this._row.dataTag();case F7.ID_UPDATED:var e=this._row.dataIndex();return 0<=e&&this._dataSource.isUpdated(e,this._cell.index().dataField());case F7.ID_MERGED:return this._cell.merged()}return this._super(t)},evaluateIndexerI:function(t,e){return this._row?t==F7.ID_VALUES?((e<0||e>=this._fieldCount)&&B2(e),this._row.getValue(e)):this._super(t,e):void 0},evaluateIndexerS:function(t,e){if(t!=F7.ID_VALUES)return this._super(t,e);if(this._dataSource){var i=this._dataSource.getFieldIndex(e);return(i<0||i>=this._fieldCount)&&B2(e),this._row.getValue(i)}}},{ID_VALUE:0,ID_ROW:1,ID_DATA_ROW:2,ID_INDEX:3,ID_FIELD:4,ID_CHECKED:5,ID_STATE:6,ID_TAG:7,ID_BASE:8,ID_VALUES:9,ID_COUNT:10,ID_DCOUNT:11,ID_ROWTAG:12,ID_UPDATED:13,ID_MERGED:14},function(t){t.IDENTS={value:t.ID_VALUE,row:t.ID_ROW,datarow:t.ID_DATA_ROW,index:t.ID_INDEX,field:t.ID_FIELD,checked:t.ID_CHECKED,state:t.ID_STATE,tag:t.ID_TAG,base:t.ID_BASE,values:t.ID_VALUES,count:t.ID_COUNT,dcount:t.ID_DCOUNT,rowtag:t.ID_ROWTAG,updated:t.ID_UPDATED,merged:t.ID_MERGED}}),Y3=I1("FooterExpressionRuntime",e4,{init:function(){this._super(),this._cell=null},setCell:function(t){this._cell=t},scope:function(){return this._cell},isIdentifier:function(t){return t=t.toLowerCase(),Y3.IDENTS.hasOwnProperty(t)?Y3.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case Y3.ID_VALUE:return this._cell.value();case Y3.ID_FIELD:return this._cell.index().dataField();case Y3.ID_LEVEL:return this._cell.level()}return this._super(t)},evaluateIndexerI:function(t,e){},evaluateIndexerS:function(t,e,i){}},{ID_VALUE:0,ID_FIELD:1,ID_LEVEL:2},function(t){t.IDENTS={value:t.ID_VALUE,field:t.ID_FIELD,level:t.ID_LEVEL}}),t3=I1("RowGroupStatementRuntime",e4,{init:function(){this._super()},setGrid:function(t){this._grid=t},setGroup:function(t){this._group=t},scope:function(){return this._group},isIdentifier:function(t){return t=t.toLowerCase(),t3.IDENTS.hasOwnProperty(t)?t3.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){var e,i,n,s;switch(t){case t3.ID_GROUP_FIELD:return(e=this._group.dataSource().getField(this._group.groupField()))?e.fieldName():"";case t3.ID_FIELD_HEADER:return(e=this._group.dataSource().getField(this._group.groupField()))?e.header():"";case t3.ID_GROUP_COLUMN:return(i=this._grid?this._grid.columnByField(this._group.groupField()):null)?i.displayText():this._group.dataSource().getFieldName(this._group.groupField());case t3.ID_COLUMN_HEADER:return(i=this._grid?this._grid.columnByField(this._group.groupField()):null)?(n=i.header())?n.text():i.displayText():this._group.dataSource().getFieldName(this._group.groupField());case t3.ID_GROUP_VALUE:return(s=this._group.firstLeaf())?s.getValue(this._group.groupField()):void 0;case t3.ID_ROW_COUNT:return this._group.descendantDataCount()}return this._super(t)}},{ID_GROUP_FIELD:0,ID_FIELD_HEADER:1,ID_GROUP_COLUMN:2,ID_COLUMN_HEADER:3,ID_GROUP_VALUE:4,ID_ROW_COUNT:5},function(t){t.IDENTS={groupfield:t.ID_GROUP_FIELD,fieldheader:t.ID_FIELD_HEADER,groupcolumn:t.ID_GROUP_COLUMN,columnheader:t.ID_COLUMN_HEADER,groupvalue:t.ID_GROUP_VALUE,rowcount:t.ID_ROW_COUNT}}),h0=I1("ColumnMergeRuntime",e4,{init:function(){this._super(),this._grid=null,this._item=null,this._field=-1,this._dataSource=null,this._fieldCount=0,this._scope={item:null,field:-1}},scope:function(){return this._scope=this._item,this._scope=this._field,this._scope},setDataSource:function(t,e){this._dataSource=t,this._grid=e,this._fieldCount=t?t.fieldCount():0},setItem:function(t,e){this._item=t,this._field=e},isIdentifier:function(t){return t=t.toLowerCase(),h0.IDENTS.hasOwnProperty(t)?h0.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){if(this._item){switch(t){case h0.ID_VALUE:return this._item.getValue(this._field);case h0.ID_ROW:return this._item.index();case h0.ID_DATA_ROW:return this._item.dataIndex();case h0.ID_CHECKED:return this._grid.isChecked(this._item);case h0.ID_GROUP:return this._item.parent()}return this._super(t)}},evaluateIndexerI:function(t,e){return this._item?t==h0.ID_VALUES?((e<0||e>=this._fieldCount)&&B2(e),this._item.getValue(e)):this._super(t,e):void 0},evaluateIndexerS:function(t,e){if(this._item&&this._dataSource){if(t!=h0.ID_VALUES)return this._super(t,e);var i=this._dataSource.getFieldIndex(e);return(i<0||i>=this._fieldCount)&&B2(e),this._item.getValue(i)}}},{ID_ROW:0,ID_DATA_ROW:1,ID_CHECKED:2,ID_VALUE:3,ID_VALUES:4,ID_GROUP:5},function(t){t.IDENTS={row:t.ID_ROW,datarow:t.ID_DATA_ROW,checked:t.ID_CHECKED,value:t.ID_VALUE,values:t.ID_VALUES,group:t.ID_GROUP}}),X0=I1("ColumnMergeValueRuntime",e4,{init:function(t){this._super(),this._grid=t,this._value=void 0,this._item=null,this._field=-1,this._dataSource=null,this._fieldCount=0},setDataSource:function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount():0},setValue:function(t,e,i){this._item=t,this._field=e,this._value=i},isIdentifier:function(t){return t=t.toLowerCase(),X0.IDENTS.hasOwnProperty(t)?X0.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){if(this._item){switch(t){case X0.ID_VALUE:return this._value;case X0.ID_ROW:return this._item.index();case X0.ID_DATA_ROW:return this._item.dataIndex();case X0.ID_CHECKED:return this._grid.isChecked(this._item);case X0.ID_GROUP:return this._item.parent()}return this._super(t)}},evaluateIndexerI:function(t,e){return this._item?t==X0.ID_VALUES?((e<0||e>=this._fieldCount)&&B2(e),this._item.getValue(e)):this._super(t,e):void 0},evaluateIndexerS:function(t,e){if(this._item&&this._dataSource){if(t!=X0.ID_VALUES)return this._super(t,e);var i=this._dataSource.getFieldIndex(e);return(i<0||i>=this._fieldCount)&&B2(e),this._item.getValue(i)}}},{ID_ROW:0,ID_DATA_ROW:1,ID_CHECKED:2,ID_VALUE:3,ID_VALUES:4,ID_GROUP:5},function(t){t.IDENTS={row:t.ID_ROW,datarow:t.ID_DATA_ROW,checked:t.ID_CHECKED,value:t.ID_VALUE,values:t.ID_VALUES,group:t.ID_GROUP}}),A3=I1("ColumnFilterRuntime",e4,{init:function(){this._super(),this._field=-1,this._fieldCount=0},setDataSource:function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount():0},setData:function(t,e){this._item=t,this._field=e},isIdentifier:function(t){return t=t.toLowerCase(),A3.IDENTS.hasOwnProperty(t)?A3.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case A3.ID_VALUE:return this._item.getValue(this._field);case A3.ID_FIELD:return this._field;case A3.ID_MAX:case A3.ID_MIN:case A3.ID_AVG:return 0}return this._super(t)},evaluateIndexerI:function(t,e){return this._item?t==A3.ID_VALUES?((e<0||e>=this._fieldCount)&&B2(e),this._item.getValue(e)):this._super(t,e):void 0},evaluateIndexerS:function(t,e){if(this._item&&this._dataSource){if(t!=A3.ID_VALUES)return this._super(t,e);var i=this._dataSource.getFieldIndex(e);return(i<0||i>=this._fieldCount)&&B2(e),this._item.getValue(i)}}},{ID_VALUE:0,ID_FIELD:1,ID_VALUES:2,ID_MAX:3,ID_MIN:4,ID_AVG:5},function(t){t.IDENTS={value:t.ID_VALUE,field:t.ID_FIELD,values:t.ID_VALUES,min:t.ID_MAX,max:t.ID_MIN,mean:t.ID_AVG}}),V7=I1("RowFilterRuntime",e4,{init:function(){this._super(),this._field=-1,this._fieldCount=0},setDataSource:function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount():0},setRow:function(t){return this._row=t,this},isIdentifier:function(t){return t=t.toLowerCase(),V7.IDENTS.hasOwnProperty(t)?V7.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case V7.ID_ROW:return this._row.dataIndex();case V7.ID_STATE:switch(this._row.dataState()){case j1.CREATED:return"c";case j1.UPDATED:return"u";case j1.DELETED:return"d";case j1.CREATE_AND_DELETED:return"x"}return;case V7.ID_TAG:return this._row.dataTag();case V7.ID_ROWCOUNT:return this._dataSource.rowCount();case V7.ID_LEVEL:return this._row.level();case V7.ID_CHILDINDEX:return this._row.childIndex();case V7.ID_CHILDCOUNT:return this._row.count();case V7.ID_SIBLINGCOUNT:return this._row.parent().count()}return this._super(t)},evaluateIndexerI:function(t,e){return this._row?t==V7.ID_VALUES?((e<0||e>=this._fieldCount)&&B2(e),this._row.getValue(e)):this._super(t,e):void 0},evaluateIndexerS:function(t,e){if(this._row&&this._dataSource){if(t!=V7.ID_VALUES)return this._super(t,e);var i=this._dataSource.getFieldIndex(e);return(i<0||i>=this._fieldCount)&&B2(e),this._row.getValue(i)}}},{ID_ROW:0,ID_STATE:1,ID_TAG:2,ID_ROWCOUNT:3,ID_LEVEL:4,ID_CHILDINDEX:5,ID_CHILDCOUNT:6,ID_SIBLINGCOUNT:7,ID_VALUES:8},function(t){t.IDENTS={row:t.ID_ROW,state:t.ID_STATE,tag:t.ID_TAG,rowcount:t.ID_ROWCOUNT,level:t.ID_LEVEL,childindex:t.ID_CHILDINDEX,childcount:t.ID_CHILDCOUNT,siblingcount:t.ID_SIBLINGCOUNT,values:t.ID_VALUES}}),T67=I1("ColumnDefaultRuntime",e4,{init:function(t){T67.Base.init.call(this),this._grid=t},setColumn:function(t){},scope:function(){return this._scope},_createScope:function(){}}),U2=I1("SummaryExpressionRuntime",e4,{init:function(){this._super()},isIdentifier:function(t){return t=t.toLowerCase(),U2.IDENTS.hasOwnProperty(t)?U2.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case U2.ID_COUNT:return this._getCount();case U2.ID_SUM:return this._getSum();case U2.ID_MAX:return this._getMax();case U2.ID_MIN:return this._getMin();case U2.ID_AVG:return this._getAvg();case U2.ID_VAR:return this._getVar();case U2.ID_VARP:return this._getVarp();case U2.ID_STDEV:return this._getStdev();case U2.ID_STDEVP:return this._getStdevp()}return this._super(t)},evaluateIndexerI:function(t,e){return this._super(t,e)},evaluateIndexerS:function(t,e,i){return this._super(t,e)},_getCount:function(){return NaN},_getSum:function(){return NaN},_getMax:function(){return NaN},_getMin:function(){return NaN},_getAvg:function(){return NaN},_getVar:function(){return NaN},_getVarp:function(){return NaN},_getStdev:function(){return NaN},_getStdevp:function(){return NaN}},{ID_COUNT:0,ID_SUM:1,ID_MAX:2,ID_MIN:3,ID_AVG:4,ID_VAR:5,ID_VARP:6,ID_STDEV:7,ID_STDEVP:8,ID_LAST:8},function(t){t.IDENTS={count:t.ID_COUNT,sum:t.ID_SUM,max:t.ID_MAX,min:t.ID_MIN,avg:t.ID_AVG,var:t.ID_VAR,varp:t.ID_VARP,stdev:t.ID_STDEV,stdevp:t.ID_STDEVP}}),J47=I1("ColumnSummaryScope",null,{init:function(){J47.Base.init.call(this),this._dataSource=null,this._fieldCount=0,this._column=null,this._summarizer=null},column:function(){return this._column},count:function(t){return this._summarizer?this._summarizer.getCount(void 0===t?this._column.dataIndex():this.$_getFieldIndex(t)):0},sum:function(t){return this._summarizer?this._summarizer.getSum(void 0===t?this._column.dataIndex():this.$_getFieldIndex(t)):0},max:function(t){return this._summarizer?this._summarizer.getMax(void 0===t?this._column.dataIndex():this.$_getFieldIndex(t)):NaN},min:function(t){return this._summarizer?this._summarizer.getMin(void 0===t?this._column.dataIndex():this.$_getFieldIndex(t)):NaN},avg:function(t){return this._summarizer?this._summarizer.getAvg(void 0===t?this._column.dataIndex():this.$_getFieldIndex(t)):NaN},var:function(t){return this._summarizer?this._summarizer.getVar(void 0===t?this._column.dataIndex():this.$_getFieldIndex(t)):NaN},varp:function(t){return this._summarizer?this._summarizer.getVarp(void 0===t?this._column.dataIndex():this.$_getFieldIndex(t)):NaN},stdev:function(t){return this._summarizer?this._summarizer.getStdev(void 0===t?this._column.dataIndex():this.$_getFieldIndex(t)):NaN},stdevp:function(t){return this._summarizer?this._summarizer.getStdevp(void 0===t?this._column.dataIndex():this.$_getFieldIndex(t)):NaN},$_getFieldIndex:function(t){return"number"!=typeof t&&(t=this._dataSource.getFieldIndex(t)),(t<0||t>=this._fieldCount)&&B2(t),t}}),H17=I1("ColumnSummaryRuntime",U2,{init:function(){H17.Base.init.call(this),this._grid=null,this._dataSource=null,this._fieldCount=0,this._column=null,this._summarizer=null,this._scope=this._createScope()},setColumn:function(t,e){var i=this._grid=t&&t.grid();this._scope._column=this._column=t,this._scope._dataSource=this._dataSource=i?i.dataSource():null,this._scope._fieldCount=this._fieldCount=this._dataSource?this._dataSource.fieldCount():0,this._scope._summarizer=this._summarizer=i?e:null},scope:function(){return this._scope},_getCount:function(){return this._summarizer?this._summarizer.getCount(this._column.dataIndex()):0},_getSum:function(){return this._summarizer?this._summarizer.getSum(this._column.dataIndex()):0},_getMax:function(){return this._summarizer?this._summarizer.getMax(this._column.dataIndex()):NaN},_getMin:function(){return this._summarizer?this._summarizer.getMin(this._column.dataIndex()):NaN},_getAvg:function(){return this._summarizer?this._summarizer.getAvg(this._column.dataIndex()):NaN},_getVar:function(){return this._summarizer?this._summarizer.getVar(this._column.dataIndex()):NaN},_getVarp:function(){return this._summarizer?this._summarizer.getVarp(this._column.dataIndex()):NaN},_getStdev:function(){return this._summarizer?this._summarizer.getStdev(this._column.dataIndex()):NaN},_getStdevp:function(){return this._summarizer?this._summarizer.getStdevp(this._column.dataIndex()):NaN},evaluateIndexerI:function(t,e){if(this._summarizer){switch((e<0||e>=this._fieldCount)&&B2(e),t){case U2.ID_SUM:return this._summarizer.getSum(e);case U2.ID_COUNT:return this._summarizer.getCount(e);case U2.ID_MAX:return this._summarizer.getMax(e);case U2.ID_MIN:return this._summarizer.getMin(e);case U2.ID_AVG:return this._summarizer.getAvg(e);case U2.ID_VAR:return this._summarizer.getVar(e);case U2.ID_VARP:return this._summarizer.getVarp(e);case U2.ID_STDEV:return this._summarizer.getStdev(e);case U2.ID_STDEVP:return this._summarizer.getStdevp(e)}return this._super(idKey,e)}switch(t){case U2.ID_SUM:case U2.ID_COUNT:return 0;case U2.ID_MAX:case U2.ID_MIN:case U2.ID_AVG:case U2.ID_VAR:case U2.ID_VARP:case U2.ID_STDEV:case U2.ID_STDEVP:return NaN}},evaluateIndexerS:function(t,e){if(this._summarizer&&this._dataSource){var i=this._dataSource.getFieldIndex(e);switch((i<0||i>=this._fieldCount)&&B2(e),t){case U2.ID_SUM:return this._summarizer.getSum(i);case U2.ID_COUNT:return this._summarizer.getCount(i);case U2.ID_MAX:return this._summarizer.getMax(i);case U2.ID_MIN:return this._summarizer.getMin(i);case U2.ID_AVG:return this._summarizer.getAvg(i);case U2.ID_VAR:return this._summarizer.getVar(i);case U2.ID_VARP:return this._summarizer.getVarp(i);case U2.ID_STDEV:return this._summarizer.getStdev(i);case U2.ID_STDEVP:return this._summarizer.getStdevp(i)}return this._super(idKey,e)}switch(t){case U2.ID_SUM:case U2.ID_COUNT:return 0;case U2.ID_MAX:case U2.ID_MIN:case U2.ID_AVG:case U2.ID_VAR:case U2.ID_VARP:case U2.ID_STDEV:case U2.ID_STDEVP:return NaN}},_createScope:function(){return new J47}}),A38=I1("RowGroupSummaryScope",J47,{init:function(){this._super(),this._item=null},row:function(){return this._item},count:function(t){return this._item?this._item.getNumber(void 0===t?this._column.dataIndex():this.$_getFieldIndex(t)):0},sum:function(t){return this._item?this._item.getSum(void 0===t?this._column.dataIndex():this.$_getFieldIndex(t)):0},max:function(t){return this._item?this._item.getMax(void 0===t?this._column.dataIndex():this.$_getFieldIndex(t)):NaN},min:function(t){return this._item?this._item.getMin(void 0===t?this._column.dataIndex():this.$_getFieldIndex(t)):NaN},avg:function(t){return this._item?this._item.getAvg(void 0===t?this._column.dataIndex():this.$_getFieldIndex(t)):NaN},var:function(t){return this._item?this._item.getVar(void 0===t?this._column.dataIndex():this.$_getFieldIndex(t)):NaN},varp:function(t){return this._item?this._item.getVarp(void 0===t?this._column.dataIndex():this.$_getFieldIndex(t)):NaN},stdev:function(t){return this._item?this._item.getStdev(void 0===t?this._column.dataIndex():this.$_getFieldIndex(t)):NaN},stdevp:function(t){return this._item?this._item.getStdevp(void 0===t?this._column.dataIndex():this.$_getFieldIndex(t)):NaN},$_getFieldIndex:function(t){return"number"!=typeof t&&(t=this._dataSource.getFieldIndex(t)),(t<0||t>=this._fieldCount)&&B2(t),t}}),G17=I1("RowGroupSummaryRuntime",H17,{init:function(){this._super(),this._item=null},item:null,setItem:function(t){this._scope._item=this._item=t},isIdentifier:function(t){return t=t.toLowerCase(),G17.IDENTS.hasOwnProperty(t)?G17.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){var e;switch(t){case G17.ID_VALUE:return(e=this._item.firstLeaf())?e.getValue(this._column.dataIndex()):void 0}return this._super(t)},_createScope:function(){return new A38},_getCount:function(){return this._item.getNumber(this._column.dataIndex())},_getSum:function(){return this._item.getSum(this._column.dataIndex())},_getMax:function(){return this._item.getMax(this._column.dataIndex())},_getMin:function(){return this._item.getMin(this._column.dataIndex())},_getAvg:function(){return this._item.getAvg(this._column.dataIndex())},_getVar:function(){return this._item.getVar(this._column.dataIndex(),1)},_getVarp:function(){return this._item.getVar(this._column.dataIndex(),0)},_getStdev:function(){return this._item.getStdev(this._column.dataIndex(),1)},_getStdevp:function(){return this._item.getStdev(this._column.dataIndex(),0)}},{ID_VALUE:U2.ID_LAST+1},function(t){t.IDENTS=R4({value:t.ID_VALUE},U2.IDENTS)}),b38=I1("CheckableExpressionRuntime",u4,{init:function(){this._super()}}),j7=I1("DataCellRendererRuntime",e4,{init:function(){this._super(),this._grid=null,this._target=null,this._item=null,this._dataSource=null,this._fieldCount=0},setDataSource:function(t,e){this._dataSource=t,this._grid=e,this._fieldCount=t?t.fieldCount():0},setTarget:function(t){this._target=t,this._item=this._grid.getRow(t.index().rowIndex)},isIdentifier:function(t){return t=t.toLowerCase(),j7.IDENTS.hasOwnProperty(t)?j7.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(v77(null!=this._target,"target is null"),t){case j7.ID_VALUE:return this._target.value();case j7.ID_ROW:return this._item.index();case j7.ID_DATA_ROW:return this._item.dataIndex();case j7.ID_INDEX:return this._target.index().column.index();case j7.ID_FIELD:return this._target.index().dataField();case j7.ID_CHECKED:return this._grid.isChecked(this._item);case j7.ID_STATE:if(this._item)switch(this._item.dataState()){case j1.CREATED:return"c";case j1.UPDATED:return"u";case j1.DELETED:return"d";case j1.CREATE_AND_DELETED:return"x"}return c2;case j7.ID_TAG:return this._target.index().column.tag();case j7.ID_COUNT:return this._target.index().childCount();case j7.ID_DCOUNT:return this._target.index().descendantCount();case j7.ID_ROWTAG:return this._item.dataTag()}return this._super(t)},evaluateIndexerI:function(t,e){if(t!=j7.ID_VALUE)return t==j7.ID_VALUES?this._dataSource?((e<0||e>=this._fieldCount)&&B2(e),this._item.getValue(e)):void 0:this._super(t,e);var i=this._target.value();if(V1(i)&&0<=e&&e<i.length)return i[e];throw new o4(E2._default.valueIndexOutOfBounds+": "+e)},evaluateIndexerS:function(t,e){if(t!=j7.ID_VALUES)return this._super(t,e);if(this._dataSource){var i=this._dataSource.getFieldIndex(e);return(i<0||i>=this._fieldCount)&&B2(e),this._item.getValue(i)}}},{ID_VALUE:0,ID_ROW:1,ID_DATA_ROW:2,ID_INDEX:3,ID_FIELD:4,ID_CHECKED:5,ID_STATE:6,ID_TAG:7,ID_BASE:8,ID_VALUES:9,ID_COUNT:10,ID_DCOUNT:11,ID_ROWTAG:12},function(t){t.IDENTS={value:t.ID_VALUE,row:t.ID_ROW,datarow:t.ID_DATA_ROW,index:t.ID_INDEX,field:t.ID_FIELD,checked:t.ID_CHECKED,state:t.ID_STATE,tag:t.ID_TAG,base:t.ID_BASE,values:t.ID_VALUES,count:t.ID_COUNT,dcount:t.ID_DCOUNT,rowtag:t.ID_ROWTAG}}),m38=I1("LinkCellRendererRuntime",e4,{init:function(){this._super(),this._item=null,this._dataSource=null},setIndex:function(t){var e=t.column.grid();this._item=t.getRow(e),this._dataSource=e.dataSource()},isIdentifier:function(t){if(this._dataSource){var e=this._dataSource.getFieldIndex(t);if(0<=e)return e}return this._super(t)},evaluateIdentifier:function(t){return 0<=t?this._item.getValue(t):this._super(t)}}),Q6=I1("DataRowRuntime",e4,{init:function(t){this._super(),this._dataSet=t,this._row=void 0,this._values=null,this._state=void 0,this._fieldMap={}},setRow:function(t,e){this._row=t,this._values=e},scope:function(){return this._values},isIdentifier:function(t){return t=t.toLowerCase(),Q6.IDENTS.hasOwnProperty(t)?Q6.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case Q6.ID_ROW:return this._row;case Q6.ID_STATE:switch(null==this._rowState&&(this._rowState=this._dataSet.getRowState(this._row)),this._rowState){case j1.CREATED:return"c";case j1.UPDATED:return"u";case j1.DELETED:return"d";case j1.CREATE_AND_DELETED:return"x"}return;case Q6.ID_TAG:return this._dataSet.getRowTag(this._row)}return this._super(t,index)},evaluateIndexerI:function(t,e){return t==Q6.ID_VALUES?((e<0||e>=this._values.length)&&B2(e),this._values[e]):this._super(t,e)},evaluateIndexerS:function(t,e){if(t==Q6.ID_VALUES&&this._dataSet){var i=this._fieldMap[e];return void 0===i&&(i=this._dataSet.getFieldIndex(e),this._fieldMap[e]=i),(i<0||i>=this._values.length)&&B2(e),this._values[i]}return this._super(t)}},{ID_ROW:0,ID_VALUES:1,ID_STATE:2,ID_TAG:3},function(t){t.IDENTS={row:t.ID_ROW,state:t.ID_STATE,tag:t.ID_TAG,values:t.ID_VALUES}}),i9=I1("GridRowStyleRangeRuntime",e4,{init:function(){this._super(),this._rowCount=0,this._row=-1},setGrid:function(t){this._rowCount=t.rowCount()},setRow:function(t){this._row=t},isIdentifier:function(t){return t=t.toLowerCase(),i9.IDENTS.hasOwnProperty(t)?i9.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case i9.ID_ROW:return this._row;case i9.ID_ROWCOUNT:return this._rowCount}return this._super(t)}},{ID_ROW:0,ID_ROWCOUNT:1},function(t){t.IDENTS={row:t.ID_ROW,rowcount:t.ID_ROWCOUNT}}),G0=I1("SeriesValueRuntime",e4,{init:function(){this._super()},setCell:function(t,e){this._column=t,this._row=e,this._values=void 0},isIdentifier:function(t){return t=t.toLowerCase(),G0.IDENTS.hasOwnProperty(t)?G0.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case G0.ID_SUM:return this.$_getSum();case G0.ID_MAX:return this.$_getMax();case G0.ID_MIN:return this.$_getMin();case G0.ID_AVG:return this.$_getAvg();case G0.ID_VAR:return this.$_getVar();case G0.ID_VARP:return this.$_getVarp();case G0.ID_STDEV:return this.$_getStdev();case G0.ID_STDEVP:return this.$_getStdevp()}return this._super(t)},evaluateIndexerI:function(t,e){return t==G0.ID_VALUES?this.$_getValues()[e]:this._super(t,e)},evaluateIndexerS:function(t,e){return this._super(t,e)},$_getValues:function(){if(!this._values){var t,e=column._fields;if(e&&0<(t=e.length)){for(var i=new Array(t),n=0;n<t;n++)0<=e[n]&&(i[n]=this._row.getValue(e[n]));this._values=i}}return this._values},$_getSum:function(){for(var t=this.$_getValues(),e=0,i=t.length;i--;);var n=t[i];return isNaN(n)||(e+=n),e}},{ID_VALUES:0,ID_SUM:1,ID_MAX:2,ID_MIN:3,ID_AVG:4,ID_VAR:5,ID_VARP:6,ID_STDEV:7,ID_STDEVP:8},function(t){t.IDENTS={values:t.ID_VALUES,sum:t.ID_SUM,max:t.ID_MAX,min:t.ID_MIN,avg:t.ID_AVG,var:t.ID_VAR,varp:t.ID_VARP,stdev:t.ID_STDEV,stdevp:t.ID_STDEVP}}),p7=I1("CalculatedColumnRuntime",e4,{init:function(t){this._super(),this._column=t},prepare:function(){var t=this._grid=this._column.grid(),e=this._dataSource=t.dataSource();this._tag=this._column._dataTag,this._rowCount=t.rowCount(),this._fieldCount=e.fieldCount()},setRow:function(t){this._rows=void 0,this._row=t},setRange:function(t,e){this._rows=t,this._index=e,this._row=t[e]},isIdentifier:function(t){var e=this._dataSource.getFieldIndex(t,!0);return 0<=e?e+p7.ID_FIELD:(t=t.toLowerCase(),p7.IDENTS.hasOwnProperty(t)?p7.IDENTS[t]:this._super(t))},evaluateIdentifier:function(t){if(t>=p7.ID_FIELD)return this._row.getValue(t-p7.ID_FIELD);var e;switch(t){case p7.ID_PREVVAL:return this._rows?0<this._index?this._tag.get(this._index-1):0:0<(e=this._row.index())?this._tag.$_get(this._grid.getRow(e-1)):0;case p7.ID_NEXTVAL:return this._rows?this._index<this._rows.length-1?this._tag.get(this._index+1):0:(e=this._row.index())<this._rowCount-1?this._tag.$_get(this._grid.getRow(e+1)):0;case p7.ID_TAG:return this._row.dataTag();case p7.ID_DATA_ROW:return this._row.dataIndex();case p7.ID_ROW:return this._row.index();case p7.ID_STATE:switch(this._row.dataState()){case j1.CREATED:return"c";case j1.UPDATED:return"u";case j1.DELETED:return"d";case j1.CREATE_AND_DELETED:return"x"}return c2}return this._super(t)},evaluateIndexerI:function(t,e){var i;switch(t){case p7.ID_VALUES:return(e<0||e>=this._fieldCount)&&B2(e),this._row.getValue(e);case p7.ID_PREVVALS:return(e<0||e>=this._fieldCount)&&B2(e),this._rows?0<this._index?this._rows[this._index-1].getValue(e):0:0<(i=this._row.index())?this._grid.getRow(i-1).getValue(e):0;case p7.ID_NEXTVALS:return(e<0||e>=this._fieldCount)&&B2(e),this._rows?this._index<this._rows.length-1?this._rows[this._index+1].getValue(e):0:(i=this._row.index())<this._rowCount-1?this._grid.getRow(i+1).getValue(e):0}return this._super(t,e)},evaluateIndexerS:function(t,e){var i,n;switch(t){case p7.ID_VALUES:return((i=this._dataSource.getFieldIndex(e))<0||i>=this._fieldCount)&&B2(e),this._row.getValue(i);case p7.ID_PREVVALS:return i=this._dataSource.getFieldIndex(e),(e<0||e>=this._fieldCount)&&B2(e),this._rows?0<this._index?this._rows[this._index-1].getValue(e):0:0<(n=this._row.index())?this._grid.getRow(n-1).getValue(e):0;case p7.ID_NEXTVALS:return i=this._dataSource.getFieldIndex(e),(e<0||e>=this._fieldCount)&&B2(e),this._rows?this._index<this._rows.length-1?this._rows[this._index+1].getValue(e):0:(n=this._row.index())<this._rowCount-1?this._grid.getRow(n+1).getValue(e):0}return this._super(t,e)}},{ID_VALUES:0,ID_PREVVAL:1,ID_PREVVALS:2,ID_NEXTVAL:3,ID_NEXTVALS:4,ID_TAG:5,ID_DATA_ROW:6,ID_ROW:7,ID_STATE:8,ID_FIELD:10},function(t){t.IDENTS={value:t.ID_VALUE,values:t.ID_VALUES,prevval:t.ID_PREVVAL,prevvals:t.ID_PREVVALS,nextval:t.ID_NEXTVAL,nextvals:t.ID_NEXTVALS,tag:t.ID_TAG,datarow:t.ID_DATA_ROW,row:t.ID_ROW,state:t.ID_STATE}}),k7=I1("CellRendererExpressionRuntime",e4,{init:function(t){this._super(),this._grid=t,this._cell=null,this._row=null,this._dataSource=null,this._fieldCount=0},setDataSource:function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount():0},setCell:function(t){return this._cell=t,this._row=t.row(),this},scope:function(){return this._cell},isIdentifier:function(t){return t=t.toLowerCase(),k7.IDENTS.hasOwnProperty(t)?k7.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case k7.ID_VALUE:return this._cell.value();case k7.ID_ROW:return this._row.index();case k7.ID_DATA_ROW:return this._row.dataIndex();case k7.ID_INDEX:return this._cell.index().column.index();case k7.ID_FIELD:return this._cell.index().dataField();case k7.ID_CHECKED:return this._grid.isChecked(this._row);case k7.ID_STATE:switch(this._row.dataState()){case j1.CREATED:return"c";case j1.UPDATED:return"u";case j1.DELETED:return"d";case j1.CREATE_AND_DELETED:return"x"}return;case k7.ID_TAG:return this._cell.index().column.tag();case k7.ID_COUNT:return this._row instanceof j2?this._row.count():0;case k7.ID_DCOUNT:return this._row instanceof j2?this._row.descendantCount():0;case k7.ID_ROWTAG:return this._row.dataTag()}return this._super(t)},evaluateIndexerI:function(t,e){return this._row?t==k7.ID_VALUES?((e<0||e>=this._fieldCount)&&B2(e),this._row.getValue(e)):this._super(t,e):void 0},evaluateIndexerS:function(t,e){if(t!=k7.ID_VALUES)return this._super(t,e);if(this._dataSource){var i=this._dataSource.getFieldIndex(e);return(i<0||i>=this._fieldCount)&&B2(e),this._row.getValue(i)}}},{ID_VALUE:0,ID_ROW:1,ID_DATA_ROW:2,ID_INDEX:3,ID_FIELD:4,ID_CHECKED:5,ID_STATE:6,ID_TAG:7,ID_BASE:8,ID_VALUES:9,ID_COUNT:10,ID_DCOUNT:11,ID_ROWTAG:12},function(t){t.IDENTS={value:t.ID_VALUE,row:t.ID_ROW,datarow:t.ID_DATA_ROW,index:t.ID_INDEX,field:t.ID_FIELD,checked:t.ID_CHECKED,state:t.ID_STATE,tag:t.ID_TAG,base:t.ID_BASE,values:t.ID_VALUES,count:t.ID_COUNT,dcount:t.ID_DCOUNT,rowtag:t.ID_ROWTAG}}),D38=I1("CellButtonRenderer",null,{init:function(t){this._super(),this._name=t},name:function(){return this._name},measure:function(t,e,i){return this._doMeasure(t,e,i)},render:function(t,e,i,n,s,r){this._doRender(t,e,i,n,s,r)},hitTest:function(t,e,i,n){return this._doHitTest(t,e,i,n)},toString:function(){return this._name},_doMeasure:function(t,e,i){return new J2(e,i)},_doRender:function(t,e,i,n,s,r){},_doHitTest:function(t,e,i,n){return!0}}),R3=I1("DefaultCellButtonRenderer",D38,{init:function(t){this._super(t),this._inited=!1,this._imageUrls=this._getImageUrls(),this._images={}},prepare:function(t){if(!this._inited){for(var e in this._imageUrls)t.getImage($$_rootContext+$$_assets+this._imageUrls[e]);this._inited=!0}},_doMeasure:function(t,e,i){return new J2(R3.BUTTON_WIDTH+4,i)},_doRender:function(t,e,i,n,s,r){if(t.column instanceof L2){var o=i.clone();r&&t.grid().isEditing()?(o.leftBy(2),o.rightBy(-2)):(o.leftBy(1),o.rightBy(-3)),this._drawButton(t,e,o,n,s)}},_getImageUrls:function(){return{ed:"ellipsis_down.png",eh:"ellipsis_hover.png",eu:"ellipsis_up.png",dd:"dropdown_down.png",dh:"dropdown_hover.png",du:"dropdown_up.png",pd:"popup_down.png",ph:"popup_hover.png",pu:"popup_up.png",cd:"calendar_down.png",ch:"calendar_hover.png",cu:"calendar_up.png"}},_drawButton:function(t,e,i,n,s){var r=t.column.button();r==Y0.ACTION?this.$_drawEllipsisButton(t.grid(),e,i,!0,n,s):r==Y0.POPUP&&this.$_drawMenuButton(t.grid(),e,i,!0,n,s)},$_getUrl:function(t){return $$_rootContext+$$_assets+t},$_getImage:function(t,e,i){var n=this._images[e];return n||(n=t.getImage(this.$_getUrl(i)))&&(this._images[e]=n),n},$_drawButton:function(t,e,i,n){var s,r,o,a;(n=this.$_getImage(t,n,this._imageUrls[n]))&&0<(s=n.width)&&0<(r=n.height)&&(o=Y1(i.x+(i.width-s)/2),a=Y1(i.y+(i.height-r)/2),e.drawImage(n,o,a,s,r))},$_drawEllipsisButton:function(t,e,i,n,s,r){this.$_drawButton(t,e,i,r?"ed":s?"eh":"eu")},$_drawDropDownButton:function(t,e,i,n,s,r){this.$_drawButton(t,e,i,r?"dd":s?"dh":"du")},$_drawMenuButton:function(t,e,i,n,s,r){this.$_drawButton(t,e,i,r?"pd":s?"ph":"pu")},$_drawCalendarButton:function(t,e,i,n,s,r){this.$_drawButton(t,e,i,r?"cd":s?"ch":"cu")}});R3.BUTTON_WIDTH=16,R3.BUTTON_HEIGHT=14;var V6=A2("EditorButtonType",{COMBO:"combo",ELLIPSIS:"ellipsis",CALENDAR:"calendar"}),Q38=I1("EditorButtonRenderer",R3,{init:function(t){this._super(t)},buttonType:u1(V6,V6.COMBO),_doRender:function(t,e,i,n,s,r){if(t.dataColumn()){var o=i.clone();switch(o.leftBy(1),o.rightBy(-3),o.topBy(Math.max(1,Y1((i.height-R3.BUTTON_HEIGHT)/2))),o.setBottom(Math.min(o.y+R3.BUTTON_HEIGHT,o.bottom()-3)),this._buttonType){case V6.COMBO:this.$_drawDropDownButton(t.grid(),e,o,!0,n,s);break;case V6.ELLIPSIS:this.$_drawEllipsisButton(t.grid(),e,o,!0,n,s);break;case V6.CALENDAR:this.$_drawCalendarButton(t.grid(),e,o,!0,n,s)}}}}),s67=I1("CustomButton",null,{init:function(t){this._super(),t&&this.assign(t)},visibility:u1(c7,c7.DEFAULT),callback:null,displayCallback:null,enabledCallback:null,assetImages:!1,imageUrl:null,hoverUrl:null,downUrl:null,position:u1(t07,t07.DEFAULT),imageWidth:16}),F38=I1("CustomButtonRenderer",R3,{init:function(){this._super("customButtonRenderer")},button:null,setButton:function(t){if(t!=this._button){var e=this._imageUrls={},i=this._button=t;this._images={},e.u=i._imageUrl,e.d=i._downUrl,e.h=i._hoverUrl}},prepare:function(t){},_getImageUrls:function(){return null},$_getUrl:function(t){return this._button._assetImages?this._super(t):t},_doMeasure:function(t,e,i){var n=this._button;return new J2(n?n.imageWidth()+4:R3.BUTTON_WIDTH+4,i)},_drawButton:function(t,e,i,n,s){this.$_drawButton(t.grid(),e,i,s?"d":n?"h":"u")}}),t7=I1("DataCellRenderer",C5,{init:function(){this._super(),this._rect=new g1,this._runtime=null},owner:null,showTooltip:!1,minWidth:4,editable:function(){return!1},isEditable:function(){return!1},editOnClick:function(){return!1},isEditOnClick:function(){return!1},isDblClickEnabled:function(){return!1},isClickable:function(t){return!1},isButton:function(){return!1},canAnimate:function(){return!1},measure:function(t,e,i,n){return this._doMeasure(t,e,this.minWidth(),n)},measureHeight:function(t,e,i,n){return this._doMeasureHeight(t,e,i,n)},render:function(t,e,i){},renderHtml:function(t,e){},getButtonRenderer:function(){return null},isEditableKey:function(t,e){return!1},performEdit:function(t){},performClick:function(t,e,i){return!1},getTooltip:function(t){if(this.showTooltip())return this._getTooltipText(t)||void 0},assign:function(t){this._super(t),t&&!t.hasOwnProperty("dynamicOptions")&&t.hasOwnProperty("dynamicStyles")&&this.setDynamicOptions(t.dynamicStyles)},propertyChanged:function(t,e){this._changed()},renderHtml:function(t,e){(e=this._getRenderRect(t,e))&&t._renderText(null,this._getText(t),t._textColor,e)},_doMeasure:function(t,e,i,n){return new J2(Math.max(this._minWidth,i),n)},_doMeasureHeight:function(t,e,i,n){return 0},_getRenderRect:function(t,e){return e=this._rect.copy(e),t.deflatePadding2(e),0<e.width&&0<e.height?e:null},_getText:function(t){var e,i=t.text()||"";return i&&((e=t.prefix())&&(i=e+i),(e=t.suffix())&&(i+=e)),i},_getTooltipText:function(t){return this._getText(t)},_changed:function(){this._owner&&this._owner.rendererChanged(this)},_checkCellCommit:function(t){if(t){var e=t.editOptions(),i=t.itemSource();(e.updateByCell()&&i.isUpdating()||e.insertByCell()&&(i.isInserting()||i.isAppending()))&&t.commit()}}},{consumeKey:function(t,e,i,n){var s,r,o,a=t?t.grid():null;return!!(a&&a.isValidCell(t)&&t.column instanceof t2&&!a.isEditing()&&((o=(r=(s=a.body().getCell(t))?s.styles().renderer():null)?a.dataCellRenderers().getRenderer(r):t.column.rendererObj())&&o.editable()&&o.isEditableKey(t,e,i,n)&&!a.getReadOnlyAt(t.rowIndex,t.column)&&a.edit()))&&(a.makeCellVisible(t,!0),o.performEdit(t),!0)}}),S6=I1("TextCellRenderer",t7,{init:function(){this._super()},_doMeasure:function(t,e,i,n){var s=e._measureText(this._getText(e),1e6,n);return s.width+=e.paddingHorz(),s},_doMeasureHeight:function(t,e,i,n){return e._measureText(this._getText(e),i,n).height+e.paddingVert()},render:function(t,e,i){if(i=this._getRenderRect(t,i)){var n=this._getText(t);n&&t._renderText(e,n,t._textColor,i)}},renderHtml:function(t,e){this.render(t,null,e)}});S6.Default=new S6;var b3=I1("BarCellRenderer",t7,{init:function(){this._super(),this.setMinWidth(100)},minimum:0,maximum:100,integral:!1,showLabel:!1,origin:"left",$_drawBar:function(t,e,i){if(this._maximum>this._minimum){var n=t.value(),s=Math.min(1,(n-this._minimum)/(this._maximum-this._minimum)),r=t._selected&&t._shapeSelectedBorder||t._shapeBorder,o=t._selected&&t._shapeSelectedColor||t._shapeColor;if(r||o)switch(this._origin){case b3.ORIGIN_LEFT:this.$_drawLeft(t,e,o,r,i,s);break;case b3.ORIGIN_RIGHT:this.$_drawRight(t,e,o,r,i,s);break;case b3.ORIGIN_TOP:this.$_drawTop(t,e,o,r,i,s);break;case b3.ORIGIN_BOTTOM:this.$_drawBottom(t,e,o,r,i,s);break;default:this.$_drawLeft(t,e,o,r,i,s)}}},render:function(t,e,i){if((i=this._getRenderRect(t,i))&&(this.$_drawBar(t,e,i),this._showLabel)){var n=this._getText(t);n&&t._renderText(e,n,t._textColor,i)}},renderHtml:function(t,e){this.render(t,t.$_getGraphics(!0,e),e)},$_drawLeft:function(t,e,i,n,s,r){var o,a,h=s.width*r;0<=h&&(o=s.height,(a=t.shapeSize())&&(o=a.getDimension(o)),0<=o&&(this._integral&&(h=Math.floor(h),o=Math.floor(o)),e.drawBoundsI(i,n,s.x,s.y+(s.height-o)/2,h,o)))},$_drawRight:function(t,e,i,n,s,r){var o,a,h=s.width*r;0<=h&&(o=s.height,(a=t.shapeSize())&&(o=a.getDimension(o)),0<=o&&(this._integral&&(h=Math.floor(h),o=Math.floor(o)),e.drawBoundsI(i,n,s.right()-h,s.y+(s.height-o)/2,h,o)))},$_drawTop:function(t,e,i,n,s,r){var o,a,h=s.height*r;0<=h&&(o=s.width,(a=t.shapeSize())&&(o=a.getDimension(o)),0<=o&&(this._integral&&(h=Math.floor(h),o=Math.floor(o)),e.drawBoundsI(i,n,s.x+(s.width-o)/2,s.y,o,h)))},$_drawBottom:function(t,e,i,n,s,r){var o,a,h=s.height*r;0<=h&&(o=s.width,(a=t.shapeSize())&&(o=a.getDimension(o)),0<=o&&(this._integral&&(h=Math.floor(h),o=Math.floor(o)),e.drawBoundsI(i,n,s.x+(s.width-o)/2,s.bottom()-h,o,h)))}});b3.ORIGIN_LEFT="left",b3.ORIGIN_RIGHT="right",b3.ORIGIN_TOP="top",b3.ORIGIN_BOTTOM="bottom";var f67=I1("CheckCellRenderer",t7,{init:function(){this._super(),this._values={},this._falseValue=void 0,this._trueValue=void 0,this._trect=new g1},trueValues:null,falseValues:null,spaceKey:!0,editable:!1,dblClickEditable:!1,editOnClick:!1,threeStates:!1,setTrueValues:function(t){t!==this._trueValues&&(this._trueValues=t,this.$_resetValues())},falseValues:null,setFalseValues:function(t){t!==this._falseValues&&(this._falseValues=t,this.$_resetValues())},_doMeasure:function(t,e,i,n){var s,r,o=K87(e.paddingHorz(),n),a=12,h=e.shapeSize();return h&&(a=h.getDimension(12)),o.width+=a,(s=e.iconLocation())!=n2.LEFT&&s!=n2.RIGHT||(r=this._getText(e))&&(o.width+=e.iconOffset()+e._measureText(r,1e6,n).width),o},render:function(t,e,s){var i;if(i=this._getRenderRect(t,s)){var n,r,o,a,h,l,u,d,c,_=t.value(),f=this.$_getValue(_),g=this._threeStates&&void 0===f,m=g?null:t._selected&&t._shapeSelectedBorder||t._shapeBorder,p=g?null:f?t._selected&&t._shapeSelectedColor||t._shapeColor:t._shapeInactiveColor,w=t.iconOffset();if(p||m){switch(o=12,a=10,(u=t.shapeSize())&&(a=10*(o=u.getDimension(o))/12),h=null,t.iconLocation()){case n2.LEFT:n=i.x+w,r=i.y+(i.height-a)/2,(h=this._trect).copy(i),h.leftBy(w+o+t.iconPadding());break;case n2.RIGHT:n=i.right()-w-o,r=i.y+(i.height-a)/2,(h=this._trect).copy(i),h.rightBy(-w-o-t.iconPadding());break;case n2.TOP:n=i.x+(i.width-o)/2,r=i.y+w,(h=this._trect).copy(i),h.topBy(a+t.iconPadding());break;case n2.BOTTOM:n=i.x+(i.width-o)/2,r=i.bottom()-w-a,(h=this._trect).copy(i),h.bottomBy(-a-t.iconPadding());break;default:n=i.x+(i.width-o)/2,r=i.y+(i.height-a)/2}h&&(l=this._getText(t))&&t._renderText(e,l,t._textColor,h);var v=[n+1.25*o/8,r+2.65*a/7,n+0*o,r+4.25*a/7,n+3.95*o/8,r+7*a/7,n+8*o/8,r+1.2*a/7,n+6.3*o/8,r+0*a,n+3.45*o/8,r+4.25*a/7];t._dom?((d=t.$_prepareSvg()).setBounds(s.x,s.y,s.width,s.height),d.render(function(t,e,i,n){e.drawPolygonArray(p,m,v)})):e.drawPolygonArray(p,m,v)}this.editable()&&t.focused()&&(c=t.grid())&&!c.isReadOnlyCell(t.index())&&(s.inflate(-3,-3),i.isEmpty()||(t._dom?d?d.renderAdd(function(t,e,i,n){e.drawRectI(null,Z1.FOCUS,s)}):(d=t.$_prepareSvg(),s.inflate(3,3),d.setBounds(s.x,s.y,s.width,s.height),s.inflate(-3,-3),d.render(function(t,e,i,n){e.drawRectI(null,Z1.FOCUS,s)})):e.drawRect(null,Z1.FOCUS,s)),s.inflate(3,3))}},renderHtml:function(t,e){this.render(t,null,e)},isEditableKey:function(t,e){return this.spaceKey()&&e==i1.SPACE},performEdit:function(t){var e=this.$_getValue(t.getValue()),i=t.dataField(),n=t.column.grid(),s=n.dataSource(),r=t.getRow(n);e=0<=i&&s.getValueType(i)==a1.BOOLEAN?this._threeStates&&void 0!==e&&!e?void 0:!e:e?!!this._falseValue&&this._falseValue:void 0!==e&&this._threeStates?void 0:!this._trueValue||this._trueValue,r.setValue(i,e),this._checkCellCommit(n),n&&n.validateCellCommit(t,e)},$_resetValues:function(){var t,e,i;if(this._values={},this._falseValues)if(t=this._falseValues.split(","))for(this._falseValue=0<(e=t.length)?t[0]:void 0,i=0;i<e;i++)this._values[t[i]]=!1;else this._falseValue=void 0;if(this._trueValues)if(t=this._trueValues.split(","))for(this._trueValue=0<(e=t.length)?t[0]:void 0,i=0;i<e;i++)this._values[t[i]]=!0;else this._trueValue=void 0},$_getValue:function(t){if("boolean"==typeof t)return t;var e=String(t);return this._values.hasOwnProperty(e)?this._values[e]:!this._threeStates||""!=t&&null!=t?Boolean(t):void 0}}),u67=I1("ShapeCellRenderer",t7,{init:function(){this._super(),this._ellipse=null,this._polygon=null,this._rect=new g1,this._size={w:0,h:0}},textVisible:!0,sizeRate:.6,scaleX:1,scaleY:1,setSizeRate:function(t){t=parseFloat(t),isNaN(t)||t===this._sizeRate||(this._sizeRate=t,this._changed())},setScaleX:function(t){t=parseFloat(t),isNaN(t)||t===this._scaleX||(this._scaleX=t,this._changed())},setScaleY:function(t){t=parseFloat(t),isNaN(t)||t===this._scaleY||(this._scaleY=t,this._changed())},_doMeasure:function(t,e,i,n){var s,r=e._measureText(this._getText(e),1e6,n),o=k0.getShape(this,e.shapeName()),a=this.$_getSize(e,i,n);return r.width+=e.paddingHorz(),o&&!isNaN(a.w)&&n2.isHorz(s=e.shapeLocation())&&(r.width+=a.w,s!=n2.CENTER&&(r.width+=e.shapePadding()+e.shapeOffset())),r},_doMeasureHeight:function(t,e,i,n){var s,r=e._measureText(this._getText(e),i,n).height,o=k0.getShape(this,e.shapeName()),a=e.shapeSize();return o&&a&&a.fixed()&&(s=e.shapeLocation(),n2.isStrictVert(s)?r+=a._value+e.shapePadding()+e.shapeOffset():n2.isCenter(s)&&(r=Math.max(r,a._value))),r+e.paddingVert()},render:function(t,e,i){if(i=this._getRenderRect(t,i)){var n,s,r,o,a,h,l,u,d,c,_=t.shapeName(),f=k0.getShape(this,_),g=this._textVisible?this._getText(t):void 0,m=t.shapeOffset(),p=t.shapePadding(),w=t.shapeLocation(),v=t.textAlignment(),C=t.lineAlignment(),I=i.x,R=i.y,y=i.width,x=i.height;if(g&&(n=t.font(),s=t._textColor),f){switch(l=I,u=R,d=(h=this.$_getSize(t,i.width,i.height)).w,c=h.h,w){case n2.RIGHT:case n2.RIGHT_SIDE:switch(l=i.right()-d-m,t.shapeAlignment()){case v1.CENTER:u+=(x-c+1)/2;break;case v1.FAR:u+=x-c}if(y-=m+d+p,w===n2.RIGHT&&g)switch(v){case v1.NEAR:0<(r=y-(a=t._calcTextRect(e,n,g,I,R,y,x)).width)&&(l-=r);break;case v1.FAR:break;case v1.CENTER:a=t._calcTextRect(e,n,g,I,R,y,x),0<(r=Y1((y-a.width)/2))&&(I=(l-=r)-p-a.width,y=a.width)}break;case n2.TOP:case n2.TOP_SIDE:switch(u+=m,t.shapeAlignment()){case v1.CENTER:l+=(y-d)/2;break;case v1.FAR:l+=y-d}if(R+=o=m+c+p,x-=o,w===n2.TOP&&g)switch(C){case v1.NEAR:break;case v1.FAR:0<(o=x-(a=t._calcTextRect(e,n,g,I,R,y,x)).height)&&(u+=o);break;case v1.CENTER:a=t._calcTextRect(e,n,g,I,R,y,x),0<(o=Y1((x-a.height)/2))&&(R=(u+=o)+c+p,x=a.height)}break;case n2.BOTTOM:case n2.BOTTOM_SIDE:switch(u=i.bottom()-c-m,t.shapeAlignment()){case v1.CENTER:l+=(y-d)/2;break;case v1.FAR:l+=y-d}if(x-=m+c+p,w===n2.BOTTOM&&g)switch(C){case v1.NEAR:0<(o=x-(a=t._calcTextRect(e,n,g,I,R,y,x)).height)&&(u-=o);break;case v1.FAR:break;case v1.CENTER:a=t._calcTextRect(e,n,g,I,R,y,x),0<(o=Y1((x-a.height)/2))&&(R=(u-=o)-p-a.height,x=a.height)}break;case n2.LEFT:case n2.LEFT_SIDE:switch(l+=m,t.shapeAlignment()){case v1.CENTER:u+=(x-c+1)/2;break;case v1.FAR:u+=x-c}if(I+=r=m+d+p,y-=r,w===n2.LEFT&&g)switch(v){case v1.NEAR:break;case v1.FAR:0<(r=y-(a=t._calcTextRect(e,n,g,I,R,y,x)).width)&&(l+=r);break;case v1.CENTER:a=t._calcTextRect(e,n,g,I,R,y,x),0<(r=Y1((y-a.width)/2))&&(I=(l+=r)+d+p,y=a.width)}break;case n2.CENTER:l+=(y-d)/2,u+=(x-c)/2,g=null;break;case n2.CENTER_BACK:l+=(y-d)/2,u+=(x-c)/2;break;default:f=null}f&&(this._rect.set(l,u,d,c),t._selected?f.draw(e,this._rect,t._shapeSelectedColor||t._shapeColor,t._shapeSelectedBorder||t._shapeBorder,t._shapeRotate):f.draw(e,this._rect,t._shapeColor,t._shapeBorder,t._shapeRotate))}g&&t._renderTextBounds(e,g,s,I,R,y,x)}},renderHtml:function(t,e){this.render(t,t.$_getGraphics(!0),e)},$_getSize:function(t,e,i){var n,s,r=this._size;return sw=Math.min(e,i),n=sw,(s=t.shapeSize())?(sw=s.getDimension(sw),n=s.getDimension(n)):(sw*=this._sizeRate,n*=this._sizeRate),r.w=sw*this._scaleX,r.h=n*this._scaleY,r}}),p38=I1("SignalBarCellRenderer",t7,{init:function(){this._super(),this.setMinWidth(100)},barCount:10,barGap:2,barRate:1,minimum:0,maximum:100,startRate:.4,endRate:1,detailed:!1,setBarCount:function(t){(t=Math.max(1,t))!=this._barCount&&(this._barCount=t,this._changed())},setStartRate:function(t){t=parseFloat(t),isNaN(t)||(t=Math.max(0,Math.min(1,t)))!=this._startRate&&(this._startRate=t,this._changed())},setEndRate:function(t){t=parseFloat(t),isNaN(t)||(t=Math.max(0,Math.min(1,t)))!=this._endRate&&(this._endRate=t,this._changed())},render:function(t,e,i){if(i=this._getRenderRect(t,i)){var n,s,r,o,a,h,l,u,d,c,_,f,g,m,p=t.value(),w=t._selected&&t._shapeSelectedBorder||t._shapeBorder,v=t._selected&&t._shapeSelectedColor||t._shapeColor,C=this._barCount,I=0;if(!isNaN(this._minimum)&&!isNaN(this._maximum)&&this._maximum>this._minimum&&(I=C*(p-this._minimum)/(this._maximum-this._minimum)),w||v)for(n=i.height*this._barRate,i.y+=(i.height-n)/2,i.height=n,s=t.shapeInactiveColor(),r=i.width,o=i.x,i.y,h=(r-(C-1)*(a=this._barGap))/C,l=o,u=i.bottom(),d=n*(this._endRate-this._startRate)/(C-1),c=n*this._startRate,_=Math.floor(I),f=this._detailed&&I!=_,g=0;g<C;g++)f&&g==_?(r=h*(I-_),e.drawBoundsI(v,w,l,u,r,-c),e.drawBoundsI(s,w,l+r,u,h-r,-c)):(m=g<I?v:s,e.drawBoundsI(m,w,l,u,h,-c)),l+=h+a,c+=d}},renderHtml:function(t,e){this.render(t,t.$_getGraphics(!0),e)}}),a6=I1("IconCellRenderer",t7,{init:function(){this._super()},textVisible:!0,_doMeasure:function(t,e,i,n){return a6.measure(t,e,this._getText(e),i,n)},_doMeasureHeight:function(t,e,i,n){return a6.measureHeight(t,e,this._getText(e),i,n)},render:function(t,e,i){if(i=this._getRenderRect(t,i)){var n=this._textVisible?this._getText(t):void 0;a6.renderBitmapText(t,n,e,i)}},renderHtml:function(t,e){this.render(t,t.$_getGraphics(!0),e)}},{measure:function(t,e,i,n,s){var r,o,a=e._measureText(i,1e6,s);return(r=e.getIcon())&&!isNaN(r.width)&&n2.isHorz(o=e.iconLocation())&&(a.width+=r.width,o!=n2.CENTER&&(a.width+=e.iconPadding()+e.iconOffset())),a.width+=e.paddingHorz(),a},measureHeight:function(t,e,i,n,s){var r,o,a=e._measureText(i,n,s).height;return(r=e.getIcon())&&!isNaN(r.height)&&(o=e.iconLocation(),n2.isStrictVert(o)?a+=r.height+e.iconPadding()+e.iconOffset():n2.isCenter(o)&&(a=Math.max(a,r.height))),a+e.paddingVert()},renderBitmapText:function(t,e,i,n,s,r){var o,a,h,l,u,d,c=t.iconOffset(),_=t.iconPadding(),f=t.iconLocation(),g=t.textAlignment(),m=t.lineAlignment(),p=n.x,w=n.y,v=n.width,C=n.height;if(e&&(o=t.font(),a=s?t._hoveredColor:t._textColor),h=t.getIcon()){var I=p,R=w,y=h.width,x=h.height;switch(f){case n2.RIGHT:case n2.RIGHT_SIDE:switch(I=n.right()-y-c,t.iconAlignment()){case v1.CENTER:R+=(C-x+1)/2;break;case v1.FAR:R+=C-x}if(v-=c+y+_,f===n2.RIGHT&&e)switch(g){case v1.NEAR:0<(l=v-(d=t._calcTextRect(i,o,e,p,w,v,C)).width)&&(I-=l);break;case v1.FAR:break;case v1.CENTER:d=t._calcTextRect(i,o,e,p,w,v,C),0<(l=Y1((v-d.width)/2))&&(p=(I-=l)-_-d.width,v=d.width)}break;case n2.TOP:case n2.TOP_SIDE:switch(R+=c,t.iconAlignment()){case v1.CENTER:I+=(v-y)/2;break;case v1.FAR:I+=v-y}if(w+=u=c+x+_,C-=u,f===n2.TOP&&e)switch(m){case v1.NEAR:break;case v1.FAR:0<(u=C-(d=t._calcTextRect(i,o,e,p,w,v,C)).height)&&(R+=u);break;case v1.CENTER:d=t._calcTextRect(i,o,e,p,w,v,C),0<(u=Y1((C-d.height)/2))&&(w=(R+=u)+x+_,C=d.height)}break;case n2.BOTTOM:case n2.BOTTOM_SIDE:switch(R=n.bottom()-x-c,t.iconAlignment()){case v1.CENTER:I+=(v-y)/2;break;case v1.FAR:I+=v-y}if(C-=c+x+_,f===n2.BOTTOM&&e)switch(m){case v1.NEAR:0<(u=C-(d=t._calcTextRect(i,o,e,p,w,v,C)).height)&&(R-=u);break;case v1.FAR:break;case v1.CENTER:d=t._calcTextRect(i,o,e,p,w,v,C),0<(u=Y1((C-d.height)/2))&&(w=(R-=u)-_-d.height,C=d.height)}break;case n2.LEFT:case n2.LEFT_SIDE:switch(I+=c,t.iconAlignment()){case v1.CENTER:R+=(C-x+1)/2;break;case v1.FAR:R+=C-x}if(p+=l=c+y+_,v-=l,f===n2.LEFT&&e)switch(g){case v1.NEAR:break;case v1.FAR:0<(l=v-(d=t._calcTextRect(i,o,e,p,w,v,C)).width)&&(I+=l);break;case v1.CENTER:d=t._calcTextRect(i,o,e,p,w,v,C),0<(l=Y1((v-d.width)/2))&&(p=(I+=l)+y+_,v=d.width)}break;case n2.CENTER:I+=(v-y)/2,R+=(C-x)/2,e=null;break;case n2.CENTER_BACK:I+=(v-y)/2,R+=(C-x)/2;break;default:h=null}h&&i.drawImageAlphaI(h,t.iconAlpha(),I,R,y,x)}e?(t._renderTextBounds(i,e,a,p,w,v,C),r&&r.copy(t._calcTextRect(i,o,e,p,w,v,C))):r&&(h?r.set(I,R,h.width,h.height):r.width=r.height=0)}}),g67=I1("ImageCellRenderer",t7,{init:function(){this._super(),this.setMinWidth(100)},imageDisplay:u1(e7,e7.NORMAL),_doMeasure:function(t,e,i,n){var s=e.value();if(s){var r=e.grid().getImage(s);if(r&&0<(w=r.width)&&0<(h=r.height))return{width:r.width+e.paddingHorz(),height:n}}return this._super(t,e,i,n)},_doMeasureHeight:function(t,e,i,n){var s=0,r=e.value();if(r){var o=e.grid().getImage(r);s+=o?o.height:0}return s+e.paddingVert()},render:function(t,e,i){if(i=this._getRenderRect(t,i)){var n,s,r,o,a,h,l,u,d=t.value();if(d&&(n=t.grid().getImage(d))&&0<(s=n.width)&&0<(r=n.height)){switch(o=i.x,a=i.y,this._imageDisplay){case e7.CENTER:o+=(i.width-s)/2,a+=(i.height-r)/2;break;case e7.BOTH:s=i.width,r=i.height;break;case e7.WIDTH:s=i.width,a+=(i.height-r)/2;break;case e7.HEIGHT:r=i.height,o+=(i.width-s)/2;break;case e7.AUTO:l=i.width/s,u=i.height/r,s*=h=Math.min(i.width/s,i.height/r),r*=h,u<l?o+=(i.width-s)/2:a+=(i.height-r)/2;break;case e7.DEFAULT:}e.save(),e.clipRect(i),e.drawImageAlpha(n,t.iconAlpha(),o,a,s,r),e.restore()}}},renderHtml:function(t,e){this.render(t,t.$_getGraphics(!0,e),e)}}),V9=I1("ClickableCellRenderer",t7,{init:function(){this._super()},alwaysRedraw:!1,isClickable:function(t){return!0},performClick:function(t,e,i){return this._doClick(t.index())},render:function(t,e,i){},_getClickSource:function(){return null},_getClickData:function(){return null},_doClick:function(t,e,i){var n=this._getClickData(t);return!!n&&(this._fireClicked(t,this._getClickSource(),n),!0)},_fireClicked:function(t,e,i){var n=t.grid();n&&n.fireEvent(q1.CLICKABLE_CELL_CLICKED,t,e,i)}});V9.LINKABLE_CELL="linkableCell",V9.DATA_BUTTON_CELL="dataButtonCell";var z38=I1("LinkCellRenderer",V9,{init:function(){this._super(),this._urlFunc=null,this._reqFields=null,this._urlStatement=new b8(null,!0),this._urlRuntime=new m38,this._textRect=new g1,this.setShowTooltip(!0)},urlCallback:null,urlField:null,url:null,requiredFields:null,showUrl:!0,showUrl_:function(){return this.showTooltip()},setShowUrl:function(t){this.setShowTooltip(t)},setUrlCallback:function(m){m!==this._urlCallback&&(this._urlCallback=m,this._urlFunc="function"==typeof m?m:"string"==typeof m?eval("({func: function(ds, index){"+m+"}})").func:null)},setUrl:function(t){t!=this._url&&(this._url=t,this._urlStatement.setSource(t),this._changed())},setRequiredFields:function(t){t!=this._requiredFields&&(this._requiredFields=t,this._reqFields=t?t.split(","):null)},_doMeasure:function(t,e,i,n){return a6.measure(t,e,this._getText(e),i,n)},render:function(t,e,i){if(i=this._getRenderRect(t,i)){var n=t.iconLocation()!=n2.CENTER?this._getText(t):null;a6.renderBitmapText(t,n,e,i,t._hovered,this._textRect),t.$_clickRect=this._textRect.clone()}},renderHtml:function(t,e){this.render(t,t.$_getGraphics(!0),e)},_getClickSource:function(){return V9.LINKABLE_CELL},_getClickData:function(t){return this._getUrl(t)},_getTooltipText:function(t){return this._getUrl(t.index())},_getUrl:function(t){if(!t||!t.column)return null;var e=t.column.grid(),i=t.getRow(e);if(!i)return null;var n=i.dataSource();if(n&&this.$_checkRequiredFields(n,i)){if(!this._urlField)return"function"==typeof this._urlFunc?this._urlFunc.call(window,e,n,t):this._url?(this._urlRuntime.setIndex(t),this._urlStatement.evaluate(this._urlRuntime)):t.getValue();var s=n.getFieldIndex(this._urlField);if(0<=s)return i.getValue(s)}return null},$_checkRequiredFields:function(t,e){if(this._reqFields){var i=t.getValidFields(this._reqFields);if(i&&0<i.length)for(var n=i.length;n--;){var s=i[n],r=e.getValue(s.index());if(s.isEmpty(r))return!1}}return!0}}),n38=I1("ButtonCellRenderer",V9,{init:function(){this._super(),this._exprNode=null,this._alwaysRedraw=!0},imageUrl:null,disabledImageUrl:null,hoveredImageUrl:null,disableHoveredImageUrl:null,activeImageUrl:null,text:null,hoveredText:void 0,disabledText:void 0,disableHoveredText:void 0,textVisible:!0,enabledExpression:null,enabledCallback:null,textOnImage:!0,textPadding:5,downOffset:L3,imageDisplay:u1(e7,e7.CENTER),setEnabledExpression:function(t){(t=i0(t))!=this._enabledExpression&&(this._enabledExpression=t,this._exprNode=t?J4.Default.parse(t):c2,this._changed())},setEnabledCallback:function(t){(t=p4(t))!==this._enabledCallback&&(this._enabledCallback=t,this._changed())},ptInButton:function(t,e,i){var n,s,r,o,a,h=this._rect;if(h.x,h.y,(s=(n=this._hoveredImageUrl||this._imageUrl)&&t._grid.getImage(n))&&0<(r=s.width)&&0<(o=s.height))return e>=(a=this.$_calcBounds(h,r,o)).x&&e<=a.x+a.w&&i>=a.y&&i<=a.y+a.h},isButton:function(){return!0},isClickable:function(t){return this._getEnabled(t)},_doMeasure:function(t,e,i,n){var s,r=0,o=e.grid().getImage(this._imageUrl);return o&&o.width&&(r=o.width),(s=e._measureText(this._getText(e),1e6,n)).width=Math.max(r,s.width),s},_getEnabled:function(t){if(t){if(this._enabledCallback)return this._enabledCallback(t.index());if(this._exprNode)return this._exprNode.evaluate(t._grid.cellRendererRuntime().setCell(t))}return!0},render:function(t,e,i){if(i=this._getRenderRect(t,i)){var n,s,r,o,a,h,l=this._textVisible,u=t._grid,d=this._getEnabled(t);t.setClickable(d),o=this._imageUrl,l&&(n=a0(this._text)?this._text:this._getText(t)),d?t.pressed()?o=this._activeImageUrl||o:t.hovered()&&(o=this._hoveredImageUrl||o,n=l&&a0(this._hoveredText)?this._hoveredText:n):(n=l&&a0(this._disabledText)?this._disabledText:n,o=this._disabledImageUrl||o,t.hovered()&&(o=this._disableHoveredImageUrl||o,n=l&&a0(this._disableHoveredText)?this._disableHoveredText:n)),(a=u.getImage(o)||u.getImage(this._imageUrl))&&0<(s=a.width)&&0<(r=a.height)&&(h=this.$_calcBounds(i,s,r),t.pressed()&&d&&(h.x+=this._downOffset,h.y+=this._downOffset),e.drawImage(a,h.x,h.y,h.w,h.h),this._textOnImage&&(h.x+=this._textPadding,h.w-=2*this._textPadding,i.set(h.x,h.y,h.w,h.h))),n&&t._renderTextBounds(e,n,t._textColor,i.x,i.y,i.width,i.height)}},renderHtml:function(t,e){this.render(t,t.$_getGraphics(!0),e)},$_calcBounds:function(t,e,i){var n=t.x,s=t.y;switch(this._imageDisplay){case e7.CENTER:n+=(t.width-e)/2,s+=(t.height-i)/2;break;case e7.BOTH:e=t.width,i=t.height;break;case e7.WIDTH:e=t.width,s+=(t.height-i)/2;break;case e7.HEIGHT:i=t.height,n+=(t.width-e)/2;break;case e7.AUTO:rw=t.width/e,rh=t.height/i,ratio=Math.min(t.width/e,t.height/i),e*=ratio,i*=ratio,rw>rh?n+=(t.width-e)/2:s+=(t.height-i)/2;break;case e7.DEFAULT:default:n+=(t.width-e)/2,s+=(t.height-i)/2}return{x:n,y:s,w:e,h:i}}}),M17=I1("SeriesTextCellRenderer",S6,{init:function(){this._super()},_getText:function(t){var e=t.value();return V1(e)?R6.getText(e):this._super(t)}});M17.Default=new M17;var r67=I1("SeriesCellRenderer",t7,{init:function(){this._super(),this.setMinWidth(100)},_getValues:function(t){var e=t.value();return V1(e)?e:[e]},_getLabels:function(t){var e=t.labels();return V1(e)?e:[e]}}),y47=I1("SparkChartRenderer",r67,{init:function(){this._super()},baseValue:NaN,firstColor:null,lastColor:null,highColor:null,lowColor:null,belowColor:null,setFirstColor:function(t){t!=this._firstColor&&(this._firstBrush=t?new U1(this._firstColor=t):null,this._changed())},setLastColor:function(t){t!=this._lastColor&&(this._lastBrush=t?new U1(this._lastColor=t):null,this._changed())},setHighColor:function(t){t!=this._highColor&&(this._highBrush=t?new U1(this._highColor=t):null,this._changed())},setLowColor:function(t){t!=this._lowColor&&(this._lowBrush=t?new U1(this._lowColor=t):null,this._changed())},setBelowColor:function(t){t!=this._belowColor&&(this._belowBrush=t?new U1(this._belowColor=t):null,this._changed())},render:function(t,e,i){if(i=this._getRenderRect(t,i)){var n,s,r,o,a,h,l=this._getValues(t);if(l&&0<l.length){for(o=l.length,a=l[0],h=l[0],n=1;isNaN(a)&&n<o;)h=a=l[n++];for(;n<o;n++)s=Number(l[n]),isNaN(s)||(s<a&&(a=s),h<s&&(h=s));r=isNaN(this._baseValue)?a:this._baseValue,isNaN(a)||this._renderChart(t,e,i,l,a,h,r)}}},renderHtml:function(t,e){this.render(t,t.$_getGraphics(!0),e)},_renderChart:function(t,e,i,n,s,r,o){},_getPoints:function(t,e,i,n,s){var r,o,a,h,l=i.length,u=[],d=e.x,c=e.width,_=e.y,f=e.height,g=s-n;for(r=0;r<l;r++)h=Number(i[r]),o=d+r/(l-1)*c,a=_+(isNaN(h)||0==g?f:(1-(h-n)/g)*f),u.push(o,a);return u},_getBasePoint:function(t,e,i,n,s){var r=e.height,o=n-i;return e.y+(isNaN(s)||0==o?r:(1-(s-i)/o)*r)}}),l38=I1("SparkLineRenderer",y47,{init:function(){this._super(),this._stroke=new Z1(this._lineColor),this._selStroke=new Z1(this._selectedLineColor)},curved:!1,lineColor:"#808080",selectedLineColor:"#fff",setLineColor:function(t){t!=this._lineColor&&(this._lineColor=t,this._stroke=t?new Z1(t):null)},setSelectedLineColor:function(t){t!=this._selectedLineColor&&(this._selectedLineColor=t,this._selStroke=t?new Z1(t):null)},_renderChart:function(t,e,i,n,s,r,o){var a,h,l,u,d=t._selected&&this._selStroke||this._stroke||t._line,c=r,_=s,f=this._getPoints(t,i,n,_,c),g=n.length;if(d)for(a=0;a<g-1;a++)e.drawLine(d,f[2*a],f[2*a+1],f[2*(a+1)],f[2*(a+1)+1]);if((u=this._firstBrush)&&(h=f[0],l=f[1],e.drawCircle(u,null,h,l,2)),(u=this._lastBrush)&&(h=f[2*(g-1)],l=f[2*(g-1)+1],e.drawCircle(u,null,h,l,2)),u=this._highBrush)for(a=0;a<g;a++)n[a]>=r&&(h=f[2*a],l=f[2*a+1],e.drawCircle(u,null,h,l,2));if(u=this._lowBrush)for(a=0;a<g;a++)n[a]<=s&&(h=f[2*a],l=f[2*a+1],e.drawCircle(u,null,h,l,2))}}),I38=I1("SparkColumnRenderer",y47,{init:function(){this._super()},barWidth:.8,_renderChart:function(t,e,i,n,s,r,o){var a,h,l,u,d,c,_,f,g,m,p,w,v,C,I=t._selected&&t._shapeSelectedColor||t._shapeColor;if(I)for(a=r,l=s,isNaN(o)||(l=o,a=Math.max(a,o)),l-=.1*(a-(h=l)),u=n.length,g=a-l,d=Y1(this._getBasePoint(t,i,l,a)),c=i.width/u,_=i.height,f=i.x+c/2,m=Y1(c*this._barWidth),p=0;p<u;p++)w=n[p],!isNaN(w)&&h<=w&&(v=w<=s&&this._lowBrush?this._lowBrush:r<=w&&this._highBrush?this._highBrush:I,C=0==g?1:Math.max(1,Y1((w-l)*_/g)),e.drawBoundsI(v,null,Y1(f-m/2),d,m,-C)),f+=c}}),C38=I1("SparkWinLossRenderer",y47,{init:function(){this._super(),this.setBaseValue(0)},barWidth:.8,belowHeight:.4,_renderChart:function(t,e,i,n,s,r,o){var a=t._selected&&t._shapeSelectedColor||t._shapeColor;if(a){var h,l,u,d,c=n.length,_=i.width/c,f=i.height,g=i.x+_/2,m=i.y,p=_*this._barWidth,w=m+f*(1-this._belowHeight);for(h=0;h<c;h++)l=n[h],isNaN(l)||l==o||(u=a,l<o&&this._belowBrush&&(u=this._belowBrush),d=l<o?m+f:m,e.drawBoundsI(u,null,Y1(g-p/2),Y1(d),Y1(p),Y1(w-d))),g+=_}}}),o38=I1("SeriesLegendRenderer",r67,{init:function(){this._super()},labels:null,direction:"horizontal",displayCount:L3,itemGap:U4(10),lineGap:U4(2),wrapable:!1,setLabels:function(t){t!==this._labels&&(this._labels=V1(t)?t:null)},render:function(t,e,i){var n=this._labels||this._getLabels(t);if(n){var s=Math.min(t.fieldCount(),0<this._displayCount?Math.min(this._displayCount,n.length):n.length);0<s&&(t.deflatePadding2(i),"vertical"===this._direction?this.$_renderVert(t,e,i,n,s):this.$_renderHorz(t,e,i,n,s),t.inflatePadding2(i))}},renderHtml:function(t,e){this.render(t,t.$_getGraphics(!0),e)},$_renderHorz:function(t,e,i,n,s){var r,o,a,h,l,u,d,c,_,f,g,m,p=t.font(),w=t.color(),v=t.shapeColor(),C=t.shapeColors(),I=t.shapeBorder(),R=t.shapePadding(),y=p.size,x=t.shapeSize()||DEF_SIZE,E=Y1(x.getDimension(y)),b=Y1(1.2*E),S=Math.max(y,E),T=this._itemGap,D=this._lineGap,k=i.y+(i.height-y)/2,A=k+y-E,$=0,V=s*(b+R)+(s-1)*T,L=[];for(r=0;r<s;r++)o=n[r],a=t._calcTextRectEx(e,p,o,0,0,1e4,1e4,null,null,!1),V+=L[r]=a.width;if(V>i.width&&this.wrapable){for(h=[],l=[],f=r=V=0;r<s;)0==V?(V=L[r]+b+R,h.push(r),r++):V+(g=L[r]+b+R+T)>i.width?(f=Math.max(f,V),l.push(V),V=0):(V+=g,r++);for(f=Math.max(f,V),l.push(V),u=h.length,_=Math.max(i.y,i.y+(i.height-S*u-D*(u-1))/2),d=r=0;d<u;d++)for(c=d<h.length-1?h[d+1]:s,$=Math.max(i.x,i.x+(i.width-l[d])/2),0<d&&(_+=S+D),k=_+(S-y)/2,A=_+y-E;r<c;)((m=C?C.getItem(r):v)||I)&&(e.drawBoundsI(m,I,$,A,b,E),$+=b+R),e.drawText(p,w,n[r],$,k),$+=L[r]+T,r++}else for($=i.x+Y1((i.width-V)/2),r=0;r<s;r++)((m=C?C.getItem(r):v)||I)&&(e.drawBoundsI(m,I,$,A,b,E),$+=b+R),e.drawText(p,w,n[r],$,k),$+=L[r]+T},$_renderVert:function(t,e,i,n,s){var r,o,a,h,l,u,d,c,_,f,g,m,p,w,v,C=t.font(),I=t.color(),R=t.shapeColor(),y=t.shapeColors(),x=t.shapeBorder(),E=t.shapePadding(),b=C.size,S=t.shapeSize()||DEF_SIZE,T=Y1(S.getDimension(b)),D=Y1(1.2*T),k=Math.max(b,T),A=this._itemGap,$=this._lineGap,V=0,L=[],B=s*k+(s-1)*A,O=0;if(B>i.height&&this.wrapable){for(d=[],c=[],r=B=0;r<s&&!((B+=k+A)>i.height);)r++;for(m=Math.ceil(s/Math.max(r,1)),g=0;g<m;g++)d[g]=g*r;for(d.push(s),B=k*d[1]+A*(d[1]-1),f=d.length-1,g=v=r=0;g<f;g++){for(O=0,m=d[g];m<d[g+1]&&r<s;m++,r++)o=n[r],a=t._calcTextRectEx(e,C,o,0,0,1e4,1e4,null,null,!1),O=Math.max(O,a.width);v+=c[g]=O+D+E}for(v+=$*(f-1),V=Math.max(i.x,i.x+(i.width-v)/2),u=Math.max(i.y,i.y+(i.height-B)/2),g=r=0;g<f;g++){for(p=g<d.length-1?d[g+1]:s,l=u;r<p;)((_=y?y.getItem(r):R)||x)&&(w=l+b-T,e.drawBoundsI(_,x,V,w,D,T)),w=l+(k-b)/2,e.drawText(C,I,n[r],V+D+E,w),l+=k+A,r++;V+=c[g]+$}}else{for(r=0;r<s;r++)o=n[r],a=t._calcTextRectEx(e,C,o,0,0,1e4,1e4,null,null,!1),O=Math.max(O,L[r]=a.width);for(O+=D+E,h=(V=Math.max(i.x,i.x+Y1((i.width-O)/2)))+D+E,w=i.y+(i.height-B)/2,r=0;r<s;r++)u=(l=w+(k-b)/2)+b-T,((_=y?y.getItem(r):R)||x)&&e.drawBoundsI(_,x,V,u,D,T),e.drawText(C,I,n[r],h,l),w+=k+A}}},{DEF_SIZE:new W3("80%")}),c5=A2("GaugeDirection",{LEFT:"left",RIHGT:"right",TOP:"top",BOTTOM:"bottom"}),F6=A2("",{DEFAULT:"default",INNER:"innder",TOP:"top",BOTTOM:"bottom",LEFT:"left",TOP:"top"}),m3=A2("GaugeLabelLocation",{NONE:"none",DEFAULT:"default",START:"start",END:"end",CENTER:"center",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",TOP_LEFT:"topLeft",TOP_RIGHT:"topRight",BOTTOM_LEFT:"bottomLeft",BOTTOM_RIGHT:"bottomRight"}),c47=A2("GaugeBodyShape",{DEFAULT:"default",INCLINED:"incremental",REVERED:"reversed"}),h67=A2("ValueHandShape",{TRIANGLE:"triangle"}),X67=A2("",{NONE:"none",DEFAULT:"default",TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"}),A57=I1("GaugeRange",null,{init:function(){this._super()},startValue:void 0,endValue:void 0,label:null,background:U1.LTGRAY,border:null,thickness:1,setBackground:function(t){t!==this._background&&(this._background=X4(t))},setBorder:function(t){t!==this._border&&(this._border=h4(t))}}),O47=I1("GaugeRangeCollection",null,{init:function(){this._super(),this._items=[]},count:function(){return this._items.length},getItem:function(t){return this._items[t]},clear:function(){},assign:function(t){var e,i,n=this._items=[];if(t instanceof O47)for(e=0;e<t.count();e++)(i=t.getItem(e))instanceof A57&&n.push(i.clone());else if(V1(t))for(e=0;e<t.length;e++)(i=t[e])&&n.push((new A57).assign(i))}}),W17=I1("GaugeScale",null,{init:function(){this._super(),this._font=this.$_parseFont()},ticks:null,tickLength:3,fontName:null,fontSize:10,lineStroke:Z1.GRAY,tickStroke:Z1.GRAY,color:U1.GRAY,labelVisible:!0,labelForamt:null,setTicks:function(t){t!==this._ticks&&(this._ticks=V1(t)?t.concat():null)},setFontName:function(t){t!=this._fontName&&(this._fontName=t,this._font=this.$_parseFont())},setFontSizee:function(t){t!=this._fontSize&&(this._fontSize=t,this._font=this.$_parseFont())},setLineStroke:function(t){t!==this._lineStroke&&(this._lineStroke=h4(t))},setTickStroke:function(t){t!==this._tickStroke&&(this._tickStroke=h4(t))},setColor:function(t){t!==this._color&&(this._color=X4(t))},font:function(){return this._font},visible:function(){return this._ticks&&0<this._ticks.length},getHeight:function(){return this._tickLength+(this._labelVisible?this._font.size:0)},$_parseFont:function(){return{font:(this._fontSize||10)+"px "+(this._fontName||"Tahoma"),size:this._fontSize}}}),z98=I1("ValueHand",null,{init:function(){this._super()},shape:u1(h67,h67.TRIANGLE),location:u1(X67,X67.DEFAULT),width:9,height:11,offset:0,background:U1.LTGRAY,border:Z1.DIMGRAY,setBackground:function(t){t!=this._background&&(this._background=X4(t))},setBorder:function(t){t!=this._border&&(this._border=h4(t))}}),J17=I1("GaugeDrawing",null,{init:function(){this._super(),this.valueLocation=F6.DEFAULT,this.labelLocation=m3.DEFAULT,this.labelOffset=2,this.ranges=null,this.scale=null,this.subScale=null,this.rangeScale=null,this.bodyShape=c47.DEFAULT,this.thickness=5,this.valueThickness=1,this.valueOffset=2,this.baseBorder=null,this.baseFill=U1.LTGRAY,this.valueBorder=Z1.LTGRAY,this.valueFill=U1.GRAY,this.labelOffset=0,this.font=null,this.color=U1.BLACK,this.baseValue=void 0,this.startValue=0,this.endValue=100,this.value=0,this.text=null},draw:function(t,e,i){}},{DefFont:{font:"12px Tahoma",size:12}}),b57=I1("LinearGauge",J17,{init:function(){this._super(),this.direction=c5.RIGHT},draw:function(t,e,i){switch(this.direction){case c5.RIGHT:this.$_drawRight(t,e,i);break;case c5.LEFT:case c5.BOTTOM:case c5.TOP:break;default:this.$_drawRight(t,e,i)}},$_drawRight:function(t,e,i){var n,s,r,o,a,h,l,u,d,c,_,f,g,m,p,w,v,C,I=this.$_runtime,R=I&&!isNaN(I.startValue)?I.startValue:this.startValue,y=I&&!isNaN(I.endValue)?I.endValue:this.endValue,x=this.text,E=i.width,b=(i.x,i.y+i.height/2),S=i.x,T=y-R,D=T&&!isNaN(this.value)?Math.max(0,Math.min(E,(this.value-R)/T*E)):this.startValue,k=this.thickness,A=this.valueThickness*k,$=this.valueOffset,V=this.font||J17.DefFont,L=V.size+this.labelOffset,B=this.labelOffset,O=this.scale&&this.scale.visible()?this.scale:null,N=O?O.getHeight():0;switch(this.valueLocation){case F6.TOP:b+=A/2+$;break;case F6.BOTTOM:b-=A/2+$}switch(this.labelLocation){case m3.DEFAULT:case m3.TOP:b+=L/2;break;case m3.BOTTOM:b-=L/2}switch(n=(b-=N/2)-k/2,this.valueLocation){case F6.TOP:r=n-$-A;break;case F6.BOTTOM:r=n+k+N+$;break;default:r=b-A/2}switch(O&&(s=Math.max(r+A,n+k)),this.labelLocation){case m3.DEFAULT:case m3.TOP:o=Math.min(r,n)-B;break;case m3.BOTTOM:o=Math.max(r+A,n+k)+N+B;break;default:o=Math.min(r,n)-B}if(e.drawBoundsI(this.baseFill,null,S,n,E,k),(_=this.ranges)&&0<(h=_.count()))for(a=0;a<h;a++)(f=_.getItem(a))&&(u=f.background())&&!isNaN(c=f.endValue())&&(l=S+((g=isNaN(f.startValue())?R:f.startValue())-R)/T*E,e.drawBoundsI(u,null,l,n,(c-g)/T*E,k));if(e.drawBoundsI(this.valueFill,null,S,r,D,A),this.baseBorder&&e.drawBoundsI(null,this.baseBorder,S,n,E,k),O&&(m=O.ticks(),p=O.tickLength(),w=O.font(),v=O.color(),(d=O.lineStroke())&&e.drawHLineI(d,s,S,S+E),0<p&&(d=O.tickStroke()),0<p&&d||O.labelVisible()))for(a=0;a<m.length;a++)l=S+(m[a]-R)/T*E,0<p&&d&&e.drawVLineI(d,Y1(l),s,s+p),C=t._dom?t.$_prepareItemSpan(a):e,0==a?t._renderTextBoundsEx(C,m[a]+"",w,v,S,s+p,E,1e3,"left","top"):a==m.length-1?t._renderTextBoundsEx(C,m[a]+"",w,v,S,s+p,E,1e3,"right","top"):t._renderTextBoundsEx(C,m[a]+"",w,v,l-1e3,s+p,2e3,1e3,"center","top");(x=this.text)&&t._renderTextBounds2(e,x,V,this.color,S,i.y,E,o-i.y,"left","bottom")}}),m57=I1("CircleGauge",J17,{init:function(){this._super(),this.startAngle=0},draw:function(t,e,i){var n,s=this.value,r=i.x+i.width/2,o=i.y+i.height/2,a=Math.min(i.width/2,i.height/2),h=Math.min(a,this.thickness),l=(s-this.startValue)/(this.endValue-this.startValue)*Math.PI*2;e.drawDounut(this.baseFill,null,r,o,a,h),e.drawArcSector2(this.valueFill,null,r,o,a-h,a-h,a,a,0,l,0),(n=this.text)&&(a-=this.thickness,t._renderTextBounds2(e,n,this.font,this.color,r-a,o-a,2*a,2*a,"center","center"))}}),e38=I1("BulletGraph",J17,{init:function(){this._super(),this.direction=c5.RIGHT,this.baseBorder=Z1.LTGRAY,this.targetValue=77,this.targetFill=U1.DIMGRAY,this.targetWidth=.7},draw:function(t,e,i){var n,s,r,o,a=this.value,h=i.width,l=(i.x,i.y+i.height/2),u=this.thickness,d=l-u/2,c=(a-this.startValue)/(this.endValue-this.startValue)*h;e.drawBoundsI(this.baseFill,null,i.x,d,h,u),s=this.valueThickness*u,e.drawBoundsI(this.valueFill,null,i.x,l-s/2,c,s),!isNaN(this.targetValue)&&this.targetFill&&(3,r=i.x+(this.targetValue-this.startValue)/(this.endValue-this.startValue)*h,n=this.targetWidth*u,e.drawBoundsI(this.targetFill,null,r-1.5,l-n/2,3,n)),this.baseBorder&&e.drawBoundsI(null,this.baseBorder,i.x,d,h,u-1),(o=this.text)&&(2,t._renderTextBoundsEx(e,o,this.font,this.color,i.x,i.y,h,d-i.y-2,"left","bottom"))}}),j47=I1("GaugeCellRenderer",t7,{init:function(){this._super(),this._gauge=this._createDrawing(),this._valueLocation=F6.DEFAULT,this._labelLocation=m3.DEFAULT,this._labelMask=null,this._labelOffset=2,this._ranges=null,this._scale=null,this._subScale=null,this._rangeScale=null,this.setMinWidth(100)},valueLocation:F6.DEFAULT,labelLocation:m3.DEFAULT,labelOffset:2,ranges:null,scale:null,subScale:null,rangeScale:null,bodyShape:c47.DEFAULT,thickness:5,valueThickness:1,baseValue:void 0,startValue:0,endValue:100,minValue:0,maxValue:0,valueLocation_:function(){return this._gauge.valueLocation},setValueLocation:function(t){t!=this._gauge.valueLocation&&(this._gauge.valueLocation=t,this._changed())},labelLocation_:function(){return this._gauge.labelLocation},setLabelLocation:function(t){t!=this._gauge.labelLocation&&(this._gauge.labelLocation=t,this._changed())},labelOffset_:function(){return this._gauge.labelOffset},setLabelLocation:function(t){t!=this._gauge.labelOffset&&(this._gauge.labelOffset=t,this._changed())},setRanges:function(t){t!=this._ranges&&(t&&!this._ranges&&(this._ranges=new O47),this._ranges&&this._ranges.assign(t),this._gauge.ranges=this._ranges,this._changed())},setScale:function(t){t!=this._scale&&(t&&!this._scale&&(this._scale=new W17),this._scale&&this._scale.assign(t),this._gauge.scale=this._scale,this._changed())},setSubScale:function(t){t!=this._subScale&&(t&&!this._subScale&&(this._subScale=new W17),this._subScale&&this._subScale.assign(t),this._changed())},setRangeScale:function(t){t!=this._rangeScale&&(t&&!this._rangeScale&&(this._rangeScale=new W17),this._rangeScale&&this._rangeScale.assign(t),this._changed())},bodyShape_:function(){return this._gauge.bodyShape},setBodyShape:function(t){t!=this._gauge.bodyShape&&(this._gauge.bodyShape=t,this._changed())},thickness_:function(){return this._gauge.thickness},setThickness:function(t){t!=this._gauge.thickness&&(this._gauge.thickness=t,this._changed())},valueThickness_:function(){return this._gauge.valueThickness},setValueThickness:function(t){t!=this._gauge.valueThickness&&(this._gauge.valueThickness=t,this._changed())},baseValue_:function(){return this._gauge.baseValue},setBaseValue:function(t){t!=this._gauge.baseValue&&(this._gauge.baseValue=t,this._changed())},startValue_:function(){return this._gauge.startValue},setStartValue:function(t){t!=this._gauge.startValue&&(this._gauge.startValue=t,this._changed())},endValue_:function(){return this._gauge.endValue},setEndValue:function(t){t!=this._gauge.endValue&&(this._gauge.endValue=t,this._changed())},minValue_:function(){return this._gauge.startValue},setMinValue:function(t){t!=this._gauge.startValue&&(this._gauge.startValue=t,this._changed())},maxValue_:function(){return this._gauge.endValue},setMaxValue:function(t){t!=this._gauge.endValue&&(this._gauge.endValue=t,this._changed())},canAnimate:function(){return!0},render:function(t,e,i){this._rect.copy(i),t.inflatePadding(i);var n=this._gauge,s=t.getAnimations();this._doRender(t,e,i,n,s)},renderHtml:function(t,e){this.render(t,t.$_getGraphics(!0),e)},_createDrawing:function(){},_doRender:function(t,e,i,n,s){var r,o,a=s?s.current():1;o=a<1?(r=s.startValue(),r+=(t.value()-r)*a,t.numberFormatter().format(r)):(r=t.value(),t.text()),n.$_runtime=this._runtimeOptions,n.baseFill=t.shapeInactiveColor(),n.valueFill=t.shapeColor(),n.baseBorder=t.shapeBorder(),n.font=t.font(),n.color=t.color(),n.value=r,n.text=o,n.draw(t,e,i)}}),D57=I1("LinearGaugeCellRenderer",j47,{init:function(){this._super(),this.setThickness(11)},_createDrawing:function(){return new b57}}),Q57=I1("CircleGaugeCellRenderer",j47,{init:function(){this._super()},startAngle:0,startAngle_:function(){return this._gauge.startAngle},setStartAngle:function(t){t!=this._gauge.startAngle&&(this._gauge.startAngle=t,this._changed())},_createDrawing:function(){return new m57}}),n98=I1("BulletGraphCellRenderer",j47,{init:function(){this._super(),this.setThickness(13),this.setvalueThickness(.3)},targetValue:0,targetValue_:function(){return this._gauge.targetValue},setTargetValue:function(t){t!=this._gauge.targetValue&&(this._gauge.targetValue=t,this._changed())},targetWidth:.7,targetWidth_:function(){return this._gauge.targetWidth},setTargetWidth:function(t){t!=this._gauge.targetWidth&&(this._gauge.targetWidth=t,this._changed())},_createDrawing:function(){return new e38}}),F57=I1("Code39CellRenderer",t7,{init:function(){this._super(),this._barcode=new J28,this.setMinWidth(100)},render:function(t,e,i){if(i=this._getRenderRect(t,i)){var n=String(t.value());if(n){var s=t._selected&&t._shapeSelectedColor||t._shapeColor;s&&(this._barcode.setValue(n.toUpperCase()),this._barcode.setBarFill(s),this._barcode.render(e,i))}}},renderHtml:function(t,e){this.render(t,t.$_getGraphics(!0),e)}}),p57=I1("Code128CellRenderer",t7,{init:function(){this._super(),this._barcode=new W28,this.setMinWidth(100)},render:function(t,e,i){if(i=this._getRenderRect(t,i)){var n=t.value();if(n){var s=t._selected&&t._shapeSelectedColor||t._shapeColor;s&&(this._barcode.setValue(n),this._barcode.setBarFill(s),this._barcode.render(e,i))}}},renderHtml:function(t,e){this.render(t,t.$_getGraphics(!0),e)}}),q6=A2("ChartDataDirection",{DEFAULT:"default",VERTICAL:"vertical",HORIZONTAL:"horizontal"}),Z0=A2("ChartDataSyncMode",{INHERIT:"inherit",NONE:"none",CELL:"cell",COLUMN:"column",ROW:"row",ROWGROUP:"rowgroup",SELECTION:"selection"}),v6=A2("ChartItemPosition",{LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",FLOATING:"floating",ANCHORING:"anchoring",FILL:"fill"}),N4=A2("ChartStackMode",{NONE:"none",NORMAL:"normal",FILL:"fill",OVERLAPPED:"overlapped"}),A4=A2("ChartAxisOrientation",{HORIZONTAL:"horizontal",VERTICAL:"vertical"}),W4=A2("ChartAxisLocation",{NORMAL:"normal",OPPOSITE:"opposite",BETWEEN:"between"}),z57=A2("NumericAxisBase",{NONE:"none",BOTTOM:"bottom",CENTER:"center"}),p6=A2("ChartLineType",{STRAIGHT:"straight",CURVED:"curved",STEPPED:"stepped"}),s2=A2("ChartLabelPosition",{DEFAULT:"default",FAR:"far",CENTER:"center",NEAR:"near"}),H7=A2("ChartHorizontalAlign",{DEFAULT:"default",LEFT:"left",CENTER:"center",RIGHT:"right"}),g4=A2("ChartVerticalAlign",{DEFAULT:"default",TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"}),y17=A2("ChartLegendDirection",{VERTICAL:"vertical",HORIZONTAL:"horizontal"}),c17=A2("ChartOverflowPolicy",{NONE:"none",JUSTIFY:"justify"}),O17=A2("ChartItemDisplayOrder",{FIRST:"first",LAST:"last",MAX:"max",MIN:"min"}),n57=I1("ChartDataSynchronizer",null,{init:function(t){this._super(),this._parent=t,this._inherited=!0},mode:u1(Z0,Z0.INHERIT),setMode:function(t){t!==this._mode&&(this._mode=t,this._inherited=!t||t===Z0.INHERIT)},chart:function(){return this._parent&&this._parent.chart()},dirty:function(){return this._inherited&&this._parent?this._parent.dirty():this._dirty},setFocused:function(t,e){this._column,this._row,this._grid=t,this._row=e?(this._column=e.column,e.getRow(t)):this._column=null},getValue:function(t){if(this._inherited)return this._parent.getValue(t);if(this._grid)switch(this._mode){case Z0.CELL:case Z0.COLUMN:case Z0.ROWGROUP:case Z0.SELECTION:case Z0.ROW:return this._grid.getValueAt(this._row,t)}}}),x38=I1("RootDataSynchronizer",n57,{init:function(t){this._super(null),this._chart=t},chart:function(){return this._chart}}),j17=I1("AxisIndicatorStatementRuntime",e4,{init:function(){this._super()},setIndicator:function(t){return this._indicator=t,this},isIdentifier:function(t){return t=t.toLowerCase(),j17.IDENTS.hasOwnProperty(t)?j17.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case j17.ID_VALUE:return this._indicator.getCalcedValue("value")}return this._super(t)}},{ID_VALUE:5},function(t){t.IDENTS={value:t.ID_VALUE},t.Default=new t}),S7=I1("ChartSeriesFilterRuntime",e4,{init:function(){this._super()},prepare:function(t,e){this._dataSource=t,this._fieldCount=t?t.fieldCount():0,this._synchronizer=e},setRow:function(t){return this._item=t,this},scope:function(){return this._item},isIdentifier:function(t){return t=t.toLowerCase(),S7.IDENTS.hasOwnProperty(t)?S7.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case S7.ID_ROW:return this._item.index();case S7.ID_DATA_ROW:return this._item.dataIndex();case S7.ID_CHECKED:return this._grid.isChecked(this._item);case S7.ID_STATE:switch(this._item.dataState()){case j1.CREATED:return"c";case j1.UPDATED:return"u";case j1.DELETED:return"d";case j1.CREATE_AND_DELETED:return"x"}return c2;case S7.ID_TAG:return this._item.dataTag()}return this._super(t)},evaluateIndexerI:function(t,e){return this._item?t===S7.ID_VALUES?((e<0||e>=this._fieldCount)&&B2(e),this._item.getValue(e)):t===S7.ID_CURR?this._synchroizer?this._synchroizer.getValue(e):void 0:this._super(t,e):void 0},evaluateIndexerS:function(t,e){if(t!=S7.ID_VALUES)return t===S7.ID_CURR?this._synchroizer?this._synchroizer.getValue(e):void 0:this._super(t,e);if(this._dataSource){var i=this._dataSource.getFieldIndex(e);return(i<0||i>=this._fieldCount)&&B2(e),this._item.getValue(i)}}},{ID_ROW:0,ID_DATA_ROW:1,ID_CHECKED:2,ID_STATE:3,ID_TAG:4,ID_VALUES:5,ID_CURR:6},function(t){t.IDENTS={row:t.ID_ROW,datarow:t.ID_DATA_ROW,checked:t.ID_CHECKED,state:t.ID_STATE,tag:t.ID_TAG,values:t.ID_VALUES,curr:t.ID_CURR},t.Default=function(){return t.$_Default||(t.$_Default=new t)}}),B6=I1("ChartSeriesValueRuntime",e4,{init:function(){this._super()},setSeries:function(t){this._series=t,this._summary=t&&t._summary},isIdentifier:function(t){return t=t.toLowerCase(),B6.IDENTS.hasOwnProperty(t)?B6.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){if(this._summary)switch(t){case B6.ID_MIN:return this._summary.min;case B6.ID_MAX:return this._summary.max;case B6.ID_AVG:return this._summary.avg;case B6.ID_SUM:return this._summary.sum}return NaN}},{ID_MIN:0,ID_MAX:1,ID_AVG:2,ID_SUM:3},function(t){t.IDENTS={min:t.ID_MIN,max:t.ID_MAX,avg:t.ID_AVG,sum:t.ID_SUM},t.Default=function(){return t.$_Default||(t.$_Default=new t)}}),R7=I1("ChartSeriesItemRuntime",e4,{init:function(){this._super(),this._item=null,this._series=null},setItem:function(t){this._item=t,this._series=t._series},isIdentifier:function(t){return t=t.toLowerCase(),R7.IDENTS.hasOwnProperty(t)?R7.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case R7.ID_INDEX:return this._item.index();case R7.ID_VALUE:return this._item.getProp(this._series.valueField());case R7.ID_SUM:return this._series._summary&&this._series._summary.sum;case R7.ID_MIN:return this._series._summary&&this._series._summary.min;case R7.ID_MAX:return this._series._summary&&this._series._summary.max;case R7.ID_AVG:return this._series._summary&&this._series._summary.avg;case R7.ID_VAR:return this._series._summary&&this._series._summary.var;case R7.ID_VARP:return this._series._summary&&this._series._summary.varp}return this._super(t)},evaluateIndexerI:function(t,e){if(t!=R7.ID_VALUE)return t==R7.ID_VALUES?this._dataSource?((e<0||e>=this._fieldCount)&&B2(e),this._item.getValue(e)):void 0:this._super(t,e);var i=this._target.value();if(V1(i)&&0<=e&&e<i.length)return i[e];throw new o4(E2._default.valueIndexOutOfBounds+": "+e)},evaluateIndexerS:function(t,e){if(t!=R7.ID_VALUES)return this._super(t,e);if(this._dataSource){var i=this._dataSource.getFieldIndex(e);return(i<0||i>=this._fieldCount)&&B2(e),this._item.getValue(i)}}},{ID_INDEX:0,ID_VALUE:1,ID_SUM:2,ID_MIN:3,ID_MAX:4,ID_AVG:5,ID_VAR:6,ID_VARP:7},function(t){t.IDENTS={index:t.ID_INDEX,value:t.ID_VALUE,sum:t.ID_SUM,min:t.ID_MIN,max:t.ID_MAX,avg:t.ID_AVG,var:t.ID_VAR,varp:t.ID_VARP},t.Default=new t}),O5=I1("GridChart",null,{init:function(t){this._super(),this._owner=t,this._palettes=t?t._palettes:null,this._plotArea=new L38(this),this._legend=new c38,this._axes=[],this._xAxes=[],this._yAxes=[],this._series=[],this._seriesAll=[],this._seriesDirty=!1,this._styles=new o1(this,"chart"),this._synchronizer=new x38(this),this._styles.setPaddingLeft(2),this._styles.setPaddingRight(6),this._styles.setPaddingTop(6),this._styles.setPaddingBottom(2)},stylesChanged:function(t){this._changed()},getPaletteScope:function(){return this},getPalette:function(t){return this._palettes?this._palettes._palettes[t]:null},getPaletteIndex:function(t){return t},dataSync:u1(Z0,Z0.NONE),plotArea:null,legend:null,xAxes:null,yAxes:null,styles:null,hovering:!1,crosshair:null,setPlotArea:function(t){return t!==this._plotArea&&this._plotArea.assign(t),this},setLegend:function(t){return t!==this._legend&&this._legend.assign(t),this},xAxes_:function(){return this._xAxes.slice()},setXAxes:function(t){var e,i,n,s=this._xAxes=[];if(t instanceof j5)this.$_addAxis(t,s);else if(V1(t))for(e=0,i=t.length;e<i;e++)(n=t[e])instanceof j5&&this.$_addAxis(n,s);return this},yAxes_:function(){return this._yAxes.slice()},setYAxes:function(t){var e,i,n,s=this._yAxes=[];if(t instanceof j5)this.$_addAxis(t,s);else if(V1(t))for(e=0,i=t.length;e<i;e++)(n=t[e])instanceof j5&&this.$_addAxis(n,s);return this},setStyles:function(t){return t!=this._styles&&this._styles.extend(t),this},owner:function(){return this._owner},isPolar:function(){return this._series&&0<this._series.length&&this._series[0].isPolar()},seriesDirty:function(){return this._seriesDirty},seriesCount:function(){return this._series.length},loadChart:function(t){return U17.Default.load(t,this)},setItemSource:function(t){var e,i;for(e=this._series.length;e--;)(i=this._series[e])&&i.loadItems(t)},invalidate:function(){},getAxes:function(t,e,i){var n,s,r,o=[];if(i){for(n=0,s=this._xAxes.length;n<s;n++)(r=this._xAxes[n])instanceof U5&&o.push(r);for(n=0,s=this._yAxes.length;n<s;n++)(r=this._yAxes[n])instanceof w3&&o.push(r)}else if(t==A4.HORIZONTAL)for(n=0,s=this._xAxes.length;n<s;n++)(r=this._xAxes[n])instanceof w3&&r.location()==e&&o.push(r);else if(t==A4.VERTICAL)for(n=0,s=this._yAxes.length;n<s;n++)(r=this._yAxes[n])instanceof w3&&r.location()==e&&o.push(r);return o},setSeries:function(t){var e,i=this._series.length;if(this._series=[],t instanceof z7||t instanceof M0)this.addSeries(t);else for(e=0,i=t.length;e<i;e++)this.addSeries(t[e])},addSeries:function(t){var e,i;if(t){if(0<(i=this._series.length))for(e=0;e<i;e++)if(this._series[e]===t||!this._series[e].mixableWith(t))return!1;return this._series.push(t),!0}return!1},getLegendItems:function(){var t,e,i,n,s,r=[];for(t=0,i=this._series.length;t<i;t++)if((s=this._series[t])instanceof z7)if(s.itemsLegend())for(e=0,n=s.itemCount();e<n;e++)r.push(s.getItem(e));else r.push(s);else if(s instanceof M0)for(e=0,n=s.count();e<n;e++)r.push(s.getItem(e));return r},setFocused:function(t,e){this._synchronizer.setFocused(t,e);for(var i=this._seriesAll.length;i--;)this._seriesAll.setFocused(t,e)},_changed:function(){},$_addAxis:function(t,e){if(t&&e){for(var i=e.length;i--;)if(e[i]===t)return;e.push(t),this.invalidate()}},$_resetAxisTicks:function(t,e,i,n,s){if(t.update(this,i||n))if(t instanceof w3){var r;r=this.isPolar()?Math.min(s.height,s.width)*this.plotArea().polarSize():e==A4.VERTICAL?s.height:s.width,t.refreshTicks(this,e,r)}else t.refreshTicks(this,e,0)},$_updateModels:function(t,e){var i,n,s=this._seriesDirty,r=this._xAxes,o=this._yAxes;if(this.$_collectAxes(),this.$_collectSeries(),this.$_connectSeries(),r&&0<(n=r.length))for(i=0;i<n;i++)axis=r[i],axis._series instanceof S9?axis.setVisible(!1):axis.update(this),this.$_resetAxisTicks(axis,A4.HORIZONTAL,e,s,t);if(o&&0<(n=o.length))for(i=0;i<n;i++)axis=o[i],axis._series instanceof S9&&axis.setVisible(!1),this.$_resetAxisTicks(axis,A4.VERTICAL,e,s,t);this._legend.setSource(this),this._legend.update(this,!0)},$_collectAxes:function(){this._topAxes=this._bottomAxes=this._leftAxes=this._rightAxes=[],this._axes=this._xAxes.concat(this._yAxes)},$_collectSeries:function(){function r(t,e,i){var n,s;for(e.update(t),n=0;n<e.count();n++)(s=e.getItem(n))instanceof M0?r(t,s,i):(s.update(t)&&(this._seriesDirty=!0),i.push(s))}var t,e,i,n=[];if(this._seriesDirty=!1,n)for(t=0,e=this._series.length;t<e;t++)(i=this._series[t])instanceof M0?r(this,i,n):(i.update(this)&&(this._seriesDirty=!0),n.push(i));return this._seriesAll=n},$_connectSeries:function(){var t,e,i=this._series;for(t=0,e=i.length;t<e;t++)i[t].disconnectFromAxis(),i[t].connectToAxes(this._xAxes,this._yAxes);return i},$_getSeries:function(t){return this._seriesAll}}),z6=I1("ChartObject",null,{init:function(t,e){this._super(),this._owner=t,this._palettes=t?t._palettes:null,this._createChildren(),this._styles=new o1(this,e||"chartObject"),this._needUpdate=!0},stylesChanged:function(t){this._changed()},getPaletteScope:function(){return this},getPalette:function(t){return this._palettes?this._palettes._palettes[t]:null},getPaletteIndex:function(t){return t},styles:null,visible:!0,setStyles:function(t){return t!=this._styles&&this._styles.extend(t),this},invalidate:function(){this._needUpdate=!0},update:function(t,e){return!(!this._needUpdate&&!e||(this._doUpdate(t),this._needUpdate=!1))},assignSimple:function(t){Q3(t)&&this.setVisible(t)},propertyChanged:function(){this._changed()},_createChildren:function(){},_changed:function(){this.invalidate()},_doUpdate:function(t){}}),l57=I1("ChartLabelBase",z6,{init:function(t,e,i){this._super(t,e||"label"),i&&this._styles.setParent(i),this._styles.setBorder(null),this._styles.setBackground(null)},position:s2.DEFAULT,offsetX:U4(0),offsetY:U4(0),horizontalAlign:H7.DEFAULT,verticalAlign:g4.DEFAULT,_changed:function(){this._owner&&this._owner.labelChanged(this)}}),l98=I1("ChartLayout",null,{init:function(){this._super()}}),L38=I1("ChartPlotArea",z6,{init:function(t){this._super(t)},polarSize:.8}),H38=I1("ChartAxisTitle",z6,{init:function(t){this._super(t)},caption:null,assignSimple:function(t){this.setCaption(t)}}),I57=I1("ChartAxisGrid",z6,{init:function(t){this._super(t),this._baseStyles=new o1(null,"axisGridBase"),this._styles.setLine("#20000000"),this._baseStyles.setLine("#60000000")},baseStyles:null,setBaseStyles:function(t){return t!==this._baseStyles&&this._baseStyles.extend(t),this}}),G38=I1("ChartAxisIndicatorLabel",l57,{init:function(t,e){this._super(t,"indicatorLabel",e),this._runtime=j17.Default},text:null,setText:function(t){return t!=this._text&&(this._text=t,this._statement=t?new b8(t):null),this},getText:function(){return this._statement?this._statement.evaluate(this._runtime.setIndicator(this._owner)):this._label},assignSimple:function(t){this.setText(t)}}),C57=I1("ChartAxisIndicator",z6,{init:function(t){this._super(),this._label=new G38(this,this._styles),t&&this.assign(t)},label:null,front:!1,value:void 0,series:null,setLabel:function(t){return t!==this._label&&(this._label.assign(t),this._changed()),this},setValue:function(t){return t!=this._value&&(this._value=t,this._valueNode=S4(t)&&t?J4.Default.parse(t,null):null),this},getValue:function(t){return this._calcedValue=this._valueNode?this._evaluate(this._valueNode):this._value},labelChanged:function(t){this._changed()},getCalcedValue:function(t){var e,i;return((e=this._label._styles.numberFormat())!=this._format||this._formatter)&&(this._formatter=e?new W7(e):null,this._format=e),i=this._calcedValue,this._formatter?this._formatter.format(i):i},_evaluate:function(t){var e=B6.Default(),i=axis.getSeries(this._series,!0);return e.setSeries(i),t.evaluate(e)}}),o57=I1("ChartAxisBandIndicator",C57,{init:function(t){this._super(t)},startValue:void 0,endValue:void 0,setStartValue:function(t){return t!=this._startValue&&(this._startValue=t,this._startNode=S4(t)&&t?J4.Default.parse(t,null):null),this},setEndValue:function(t){return t!=this._endValue&&(this._endValue=t,this._endNode=S4(t)&&t?J4.Default.parse(t,null):null),this},getStartValue:function(t){return this._startNode?this._evaluate(this._startNode):this._startValue},getEndValue:function(t){return this._endNode?this._evaluate(this._endNode):this._endValue}}),e57=I1("ChartAxisLineIndicator",C57,{init:function(t){this._super(t)}}),j5=I1("ChartAxis",z6,{init:function(t){this._super(),this._name=t,this._title=new H38(this),this._grid=new I57(this),this._frontGrid=new I57(this),this._tickStyles=new o1(null,"axisTick"),this._tickStyles.setFontSize(10),this._sources=[],this._indicators=[],this._series=null,this._seriesAll=[],this._styles.setLine("#ccc"),this._tickStyles.setLine("#ccc")},name:null,title:null,grid:null,frontGrid:null,indicators:null,tickStyles:null,orientation:A4.VERTICAL,locationRate:1,labelInterval:1,labelCallback:null,useNumberSymbols:!0,numberSymbols:null,tickLength:5,setTitle:function(t){return t!==this._title&&this._title.assign(t),this},setGrid:function(t){return t!==this._grid&&this._grid.assign(t),this},setFrontGrid:function(t){return t!==this._frontGrid&&this._frontGrid.assign(t),this},indicators_:function(){return this._indicators.slice()},setIndicators:function(t){function e(t){var e=null;switch(t.type){case"band":e=new o57(t);break;case"line":default:e=new e57(t)}return e}var i,n,s,r=this.styles();if(t!==this._indicators){if(this._indicators=[],V1(t))for(n=0,s=t.length;n<s;n++)(i=e(t[n]))&&(this._indicators.push(i),i.styles().setParent(r));else t&&(i=e(t),this._indicators.push(i),i.styles().setParent(r));this.invalidate()}return this},setTickStyles:function(t){return t!==this._tickStyles&&this._tickStyles.extend(t),this},numberSymbols_:function(){return this._numberSymbols||j5.NumberSymbols},isValueAxis:function(){return this._series&&this._series.isValueAxis(this)},isVertical:function(){return this._orientation==A4.VERTICAL},isOppositeOf:function(t){return this._location===W4.OPPOSITE},getSeries:function(t,e){for(var i=this._seriesAll.length;i--;)if(this._seriesAll[i].name()==t)return this._seriesAll[i];return e?this._series:null},getSeriesAt:function(t){return this._serieslAll[t]},addSource:function(t){var e=this._sources;return!!(e.indexOf(t)<0&&this._connectableWith(t))&&(e.push(t),this._series||(this._series=t instanceof z7?t:t.getItem(0)),this.invalidate(),!0)},removeSource:function(t){var e=!1,i=this._sources,n=i.indexOf(t);return 0<=n&&(i.splice(n,1),(t===this._series||t instanceof M0&&t.getItem(0)==this._series)&&(this._series=null),this.invalidate(),e=!0),!this._seires&&0<i.length&&(this._series=i instanceof z7?t:t.getItem(0)),e},refreshTicks:function(t,e,i){this._orientation=e,this._doRefreshTicks(t,i)},getTickList:function(){},getTickNumber:function(){},getTick:function(t){},getTickPosition:function(t){},getGridPosition:function(t){return this.getTickPosition(t)},_calculateRange:function(t,e,i){var n,s,r,o,a,h,l,u,d,c,_=NaN,f=NaN;if(isNaN(e)||isNaN(i)){for(a=[],h=[],n=0,r=this._sources.length;n<r;n++)if((l=this._sources[n])instanceof z7&&(c=l.group()))0<l.itemCount()&&0==l.groupIndex()&&(a.push(c.getMinValueAt(this)),h.push(c.getMaxValueAt(this)));else if(l.getMinValueAt&&l.getMaxValueAt)a.push(l.getMinValueAt(this)),h.push(l.getMaxValueAt(this));else if(V1(l))for(s=0,o=l.length;s<o;s++)a.push(l[s]),h.push(l[s]);if(0<(r=a.length)){for(n=0;n<r;n++)u=a[n],d=h[n],isNaN(_)?(isNaN(u)||(_=u),isNaN(d)||(f=d)):isNaN(u)||isNaN(d)||(_=Math.min(u,d,_),f=Math.max(u,d,f));isNaN(t)||(_=Math.min(t,_))}(isNaN(_)||isNaN(f))&&(_=0,f=1)}else _=e,f=i;return{minValue:_,maxValue:f}},_doUpdate:function(t){var e,i,n,s,r=this._sources,o=this._seriesAll=[];if(r)for(i=0,s=r.length;i<s;i++)if((e=r[i])instanceof z7)o.push(e);else for(n=0;n<e.count();n++)o.push(e.getItem(n))}},{NumberSymbols:["k","M","G","T","P","E"]}),w3=I1("CartesianAxis",j5,{init:function(t){this._super(t)},location:W4.NORMAL,reversed:!1,_connectableWith:function(t){return t instanceof z7||t instanceof M0}});Q27.prototype.toString=function(){return this.label};var T6=I1("CategorizedAxis",w3,{init:function(t){this._super(t),this._categoriesDirty=!1,this._categories=null,this._categoryList=[],this._positions=[],this._ends=[],this._unit},data:null,firstIndent:0,lastIndent:0,startIndex:0,displayCount:0,paddingNear:0,paddingFar:0,padding:0,categories:null,padding_:T9,setPadding:function(t){return this.setPaddingNear(t),this.setPaddingFar(t),this},categories_:function(){return this._categories?this._categories.slice():null},setCategories:function(t){this._categories=t&&t.slice(),this._invalidateCategories()},categoryCount:function(){return this._categoryList.length},setData:function(t){return t!==this._data&&(f87(t)?this._data=R4({},T6.DATA_CONFIG,t):t?(this._data=R4({},T6.DATA_CONFIG),this._data.id=t):this._data=null,this._invalidateCategories()),this},visibleCount:function(){return 0<this._displayCount?Math.min(this._displayCount,this._categoryList.length):this._categoryList.length},getCategory:function(t){return this._categoryList[t]},getCategoryAt:function(t,e){var i,n;if(e<=0)return this._categoryList[0];for(i=0,n=this._categoryList.length;i<n-1;i++)if(e>B1(this.getCategoryPosition(i)*t)&&e<=B1((this.getCategoryPosition(i)+this.getCategoryWidth(i))*t))return this._categoryList[i];return this._categoryList[n-1]},getCategoryPosition:function(t){var e=t instanceof d5?t._category.index:t-this._startIndex;return this._positions[e]*this._locationRate},getCategoryWidth:function(t){var e=t instanceof d5?t._category.index:t-this._startIndex;return(this._positions[e+1]-this._positions[e])*this._locationRate},getDisplayPosition:function(t){var e=t instanceof d5?t._category.index:t-this._startIndex;return this._ends[2*e]*this._locationRate},getDisplayWidth:function(t){var e=t instanceof d5?t._category.index:t-this._startIndex;return(this._ends[2*e+1]-this._ends[2*e])*this._locationRate},_styleSheetRegion:function(){return"categorizedAxis"},connectableWith:function(t){this._super(t)},invalidate:function(){this._invalidateCategories()},_doChartDataChanged:function(t){this._invalidateCategories()},_doUpdate:function(t,e){this._super(t,e);var i,n,s,r,o=[],a=0,h=this._sources;if(h&&!(h.length<1)){for(i=0;i<h.length;i++)(n=h[i]).isClusterable()&&n.clusteredAxis()==this&&(a+=n.clusterWidth(),o.push(n));for(i=s=0;i<o.length;i++)r=(n=o[i]).clusterWidth()/a,n.clusterInfo={index:i,position:s,width:r},n instanceof M0&&function(t,e,i){var n,s,r,o,a,h,l,u,d=t.count();switch(t.stackMode()){case N4.NONE:for(o=h=0;o<d;o++)h+=(n=t.getItem(o)).clusterWidth();for(s=e,o=0;o<d;o++)r=(n=t.getItem(o)).clusterWidth()/h,r*=i,n.clusterInfo={index:o,position:s,width:r},s+=r;break;case N4.OVERLAPPED:for(l={},o=0;o<d;o++)(u=l[(n=t.getItem(o)).zindex()])?u.push(n):l[n.zindex()]=u=[n];for(var c in l)if(1==(u=l[c]).length)s=e,u[0].clusterInfo={index:0,position:s,width:i};else{for(a=h=0;a<u.length;a++)h+=(n=u[a]).clusterWidth();for(s=e,a=0;a<u.length;a++)r=(n=u[a]).clusterWidth()/h,r*=i,n.clusterInfo={index:a,position:s,width:r},s+=r}break;case N4.FILL:case N4.NORMAL:default:for(s=e,o=0;o<d;o++)(n=t.getItem(o)).clusterInfo={index:o,position:s,width:i}}}(n,s,r),s+=r;this.invalidate()}},_doRefreshTicks:function(t,e){function l(t,e){var i,n;for(i=0,n=e.length;i<n;i++)if(t==e[i].label)return i;return-1}function r(t,e){var i,n,s,r,o,a,h=t.labelField();if(h)for(i=t.itemCount(),n=e.slice(),s=0;s<i;s++)(a=l(o=(r=t.getItem(s)).getProp(h),n))<0?e.push(r._category=new Q27(o)):(r._category=n[a],n.splice(a,1))}function o(t,e){var i,n,s,r,o=Math.min(t.itemCount(),e.length),a=t.labelField();if(a)for(i=e.slice(),n=0;n<o;n++)0<=(r=l((s=t.getItem(n)).getProp(a),i))?(s._category=i[r],i.splice(r,1)):s._category=null;else for(n=0;n<o;n++)t.getItem(n)._category=e[n]}function a(t,e){var i,n,s=t.count();for(i=0;i<s;i++)(n=t.getItem(i))instanceof z7?r(n,e):n instanceof M0&&a(n,e)}function h(t,e){var i,n,s=t.count();for(i=0;i<s;i++)(n=t.getItem(i))instanceof z7?o(n,e):n instanceof M0&&h(n,e)}if(this._categoriesDirty){var i,n,s,u,d=this._categoryList=[],c=this.categories(),_=this._sources,f=_.length;if(e3(c)&&0<(n=c.length)){for(i=0;i<n;i++)s=new Q27(c[i]),d.push(s),s.index=i;for(i=0;i<f;i++)(u=_[i])instanceof z7?o(u,d):u instanceof M0&&h(u,d)}else{for(i=0;i<f;i++)(u=_[i])instanceof z7?r(u,d):u instanceof M0&&a(u,d);for(i=d.length;i--;)d[i].index=i}this._positions=this.calcPositions(),this._ends=this.calcEnds(this._positions),this._categoriesDirty=!1}},calcPositions:function(){var t,e,i,n,s=this.visibleCount(),r=this._categoryList,o=new Array(s+1),a=this.firstIndent(),h=this.lastIndent(),l=a+h;if(0<s){for(n=t=0;n<s;n++)t+=r[n].width;for(e=t+l,this._unit=i=1/t*(t/e),o[0]=a/e,n=1;n<s;n++)o[n]=o[n-1]+i*r[n-1].width;o[s]=(e-h)/e}return o},calcEnds:function(t){var e,i,n,s=t.length-1,r=[];for(e=0;e<s;e++)i=t[e+1]-t[e],n=this._categoryList[e].paddingNear,r[2*e]=t[e]+i*n+this._paddingNear*this._unit,n=this._categoryList[e].paddingFar,r[2*e+1]=t[e+1]-i*n-this._paddingFar*this._unit;return r},getTick:function(t){return this._categoryList[t]},getTickList:function(){return this._categoryList.concat()},getTickNumber:function(){return this._categoryList.length},getTickPosition:function(t){return this._positions[t-this._startIndex]},getGridPosition:function(t){return this._positions[t-this._startIndex]},_invalidateCategories:function(){this._categoriesDirty||(this._categoriesDirty=!0,this.invalidate())}},{DATA_CONFIG:{id:null}}),k47=[1,2,2.5,5,10];P17.Default=new P17;var k5=I1("LinearAxis",w3,{init:function(t){this._super(t),this._cacledCount=0,this._calcedMin=NaN,this._calcedMax=NaN,this._calcedInterval=NaN,this._tickList=[]},baseMode:z57.BOTTOM,baseValue:0,minValue:NaN,maxValue:NaN,fitInterval:!0,maxPadding:.05,minPadding:.05,tickCount:0,tickIntervalWidth:70,ticks:null,measurer:P17.Default,setBaseValue:function(t){return(t=parseFloat(t))!=this._baseValue&&(this._baseValue=t,this._changed()),this},calcedBaseValue:function(){return isNaN(this._baseValue)?this._calcedMin:this._baseValue},measuredMinimum:function(){return this._calcedMin},measuredMaximum:function(){return this._calcedMax},getPositionOf:function(t){return(t-this._calcedMin)/(this._calcedMax-this._calcedMin)*this._locationRate},getValueAt:function(t){return this._calcedMin+(this._calcedMax-this._calcedMin)*t},isValid:function(){return this._calcedMax>this._calcedMin},_styleSheetRegion:function(){return"linearAxis"},isContinuous:function(){return!0},_doRefreshTicks:function(t,e){var i,n,s,r,o,a,h,l;this._tickList=this.$_parseTicks(),this._tickList?this._calcedInterval=NaN:(i=this._calculateRange(this.baseValue(),this.minValue(),this.maxValue()),this._calcedMin=i.minValue,this._calcedMax=i.maxValue,this._calcedCount=this._tickCount,this._calcedCount<=0&&(this._calcedCount=B1(e/this.tickIntervalWidth())),n=this.measurer(),this._tickList=n.createTicks(this._calcedMin,this._calcedMax,this._calcedCount),this._calcedInterval=n.interval,s=n.magnitude,r=this._tickList.length,o=this._tickList[0],a=this._tickList[r-1],h=Number(this.maxPadding()),(l=a==this._calcedMax||this.fitInterval())||(a=this._tickList[r-1]=this._calcedMax),0<h&&(h*=a-o,l?a===this._calcedMax&&this._tickList.push(a+h):this._tickList[r-1]+=h,h=N87(this._tickList[r-1],s-1),this._tickList[r-1]=h)),this._calcedMin=this._tickList[0],this._calcedMax=this._tickList[this._tickList.length-1]},getTickList:function(){return this._tickList.slice()},getTickNumber:function(){return this._tickList.length},getTick:function(t){return this._tickList[t]},getTickPosition:function(t){return this.getPositionOf(this._tickList[t])},$_parseTicks:function(){var t,e,i,n,s,r=null,o=this.ticks();if(!e3(o)&&o&&(o=(t=String(o).trim())&&t.split(",")),o){for(s=[],i=0,e=o.length;i<e;i++)n=Number(String(o[i]).trim()),isNaN(n)||s.push(n);if(e=(o=0<s.length?(s.sort(function(t,e){return t-e}),s):[]).length,!isNaN(this._minValue)&&(0==e||this._minValue<o[0])&&o.unshift(this._minValue),e=o.length,!isNaN(this._maxValue)&&(0==e||this._maxValue>o[0])&&o.push(this._maxValue),e=o.length,!isNaN(this._baseValue)&&0<e&&(this._baseValue<o[0]?o.unshift(this._baseValue):this._baseValue>o[e-1]&&o.push(this._baseValue)),2<=(e=o.length))for(r=[],i=0;i<e;i++)r.push(o[i])}return this._calcedCount=r?r.length:0,r}}),U5=I1("RadarAxis",T6,{init:function(t){this._super(t),this._ticks=[],this._curved=!1},originAngle:3*Math.PI/2,startAngle:0,clockwise:!0,spokeCount:function(){return this.categoryCount()},connectableWith:function(t){return 0===this.sources().length},getTickPoints:function(t,e){var i,n,s,r,o,a,h,l=[],u=this.spokeCount();if(0<u)for(i=Math.min(t.width,t.height)/2,i*=e,n=t.x+t.width/2,s=t.y+t.height/2,r=2*Math.PI/u,a=o=0;a<u;a++)h=this.getPointOf(o,n,s,i),o+=r,l.push(h);return l},getPositionOf:function(t){return 1},getPointOf:function(t,e,i,n){return I3.getEllipsePoint(e,i,n,n,this.startAngle()+t,this.originAngle(),this.clockwise())},_styleSheetRegion:function(){return"polarAxis"}}),M38=I1("LinearPolarAxis",U5,{init:function(t){this._super(t)}}),W38=I1("CategorizedPolarAxis",U5,{init:function(t){this._super(t)}}),x57=I1("PlottingSource",z6,{init:function(t,e,i){this._super(t,i),this._name=e,this._xAxisObj=null,this._yAxisObj=null},name:null,xAxis:null,yAxis:null,zindex:0,clusterWidth:1,xAxisObj:function(){return this._xAxisObj},yAxisObj:function(){return this._yAxisObj},isPolar:function(){return!1},mixableWith:function(t){return!1},disconnectFromAxis:function(){this._xAxisObj=this._yAxisObj=null},connectToAxes:function(t,e){var i,n;if(this.xAxis())for(i=0;i<t.length&&((n=t[i]).name()!=this.xAxis()||!this._connectXAxis(n));i++);if(!this._xAxisObj&&0<t.length&&this._connectXAxis(t[0]),this.yAxis())for(i=0;i<e.length&&((n=e[i]).name()!=this.yAxis()||!this._connectYAxis(n));i++);!this._yAxisObj&&0<e.length&&this._connectYAxis(e[0])},connectToAxis:function(t,e){t&&this.connectXAxis(t),e&&this.connectYAxis(e)},connectableXAxis:function(t){return t instanceof w3},connectableYAxis:function(t){return t instanceof w3},getLegendColor:function(){return this.styles().background()},_connectXAxis:function(t){if(this.connectableXAxis(t))return(this._xAxisObj=t).addSource(this),!0},_connectYAxis:function(t){if(this.connectableYAxis(t))return(this._yAxisObj=t).addSource(this),!0},isClusterable:function(){return!1},clusteredAxis:function(){return null}}),d5=I1("ChartSeriesItem",null,{init:function(t,e){this._super(),this._series=t,this._index=-1,this._data=e,this._styles=null,this._labelStyles=null},visible:!0,data:null,styles:null,labelStyles:null,styles_:function(){return this._series.$_prepareStyles(R7.Default,this),this._styles||this._series._runStyles},setStyles:function(t){var e;t!=this._styles&&t!=(e=this._series._runStyles)&&(t?(this._styles||(this._styles=new o1("chartSeriesItem",null),this._styles.setParent(e,!1)),this._styles.extend(t)):this._styles=null)},labelStyles_:function(){return this._series._label.$_prepareStyles(R7.Default,this),this._labelStyles||this._series._label._runStyles},setLabelStyles:function(t){var e;t!=this._labelStyles&&t!=(e=this._series._label._runStyles)&&(t?(this._labelStyles||(this._labelStyles=new o1("chartSeriesItemLabel",null),this._labelStyles.setParent(e,!1)),this._labelStyles.extend(t)):this._labelStyles=null)},series:function(){return this._series},index:function(){return this._index},displayName:function(){return this._data.toString?this._data.toString():E7(this._data)},getProp:function(t,e){return this._data.hasOwnProperty(t)?this._data[t]:e!==c2?e:this._data},setProp:function(t,e){this._data[t]=e},getDate:function(t){if(this._data.hasOwnProperty(t)){var e=this._data[t];return e instanceof Date||(e=new Date(e),this._data[t]=e),e}return this._data}}),J38=I1("ChartLabel",l57,{init:function(t,e){this._super(t,"chartLabel",e),this._runStyles=new o1(this,"chartLabelRun"),this._runStyles.setParent(this._styles,!1),this._dynamicStyles=new g0,this._itemView=null},getPaletteIndex:function(t){return this._itemView?this._itemView.index():0},dynamicStyles:null,setDynamicStyles:function(t){return t!=this._dynamicStyles&&(this._dynamicStyles.setItems(t),this._changed()),this},$_prepareStyles:function(t,e){var i=this._runStyles;i.clearValues(),t.setItem(e),this._dynamicStyles.applyInternal(t,i)}}),y38=I1("ChartLegendItem",null,{init:function(t,e){this._super(),this._owner=t,this._source=e,this._styles=new o1(t,"legendItem")},styles:null,owner:function(){return this._owner},source:function(){return this._source},setStyles:function(t){t!==this._styles&&this._styles.extend(t)}}),c38=I1("ChartLegend",z6,{init:function(){this._super(),this._items=[],this.setVisible(!1),this._styles.setPaddingTop(2),this._styles.setPaddingBottom(2),this._styles.setPaddingLeft(2),this._styles.setPaddingRight(2)},position:u1(v6,v6.BOTTOM),direction:u1(y17,y17.HORIZONTAL),markerWidth:13,markerHeight:11,itemGap:8,marginLeft:2,marginRight:2,marginTop:2,marginBottom:2,source:null,items:function(){return this._items},findItem:function(t){var e,i,n=this._items;for(e=0,i=n.length;e<i;e++)if(n[e].source==t)return n[e];return null},_doUpdate:function(t,e){this._refreshItems()},_refreshItems:function(){var t,e,i,n,s,r,o=this._source,a=this._items=[];if(o&&(t=o.getLegendItems())&&!((n=t.length)<1)){for(e=this._styles,i=0;i<n;i++)s=t[i],null==(r=this.findItem(s))&&(r=new y38(this,s)),r.styles().setParent(e),a.push(r);this._items=a}}}),z7=I1("ChartSeries",x57,{init:function(t,e){this._super(t,e,"series"),this._synchronizer=new n57(t._synchronizer),this._runStyles=new o1(this,"seriesRun"),this._runStyles.setParent(this._styles,!1),this._dynamicStyles=new g0,this._label=new J38(this,this._styles),this._animations=[],this._filterNode=null,this._group=null,this._groupIndex=-1,this._itemsDirty=!1,this._itemList=null,this._summary=null,this._itemView=null,this._styles.setBackground(U1.LTGRAY),this._styles.setBorder(Z1.GRAY),this._styles.setFontSize(10)},labelChanged:function(t){this._changed()},dynamicStyles:null,label:null,dataDirection:u1(q6,q6.DEFAULT),valueField:"value",filter:null,visibleOnly:!1,itemsLegend:!1,summaryMode:u1(z4,z4.NONE),nanValue:0,caption:null,data:null,items:null,animations:null,overflow:u1(c17,c17.JUSTIFY),itemDisplayOrder:u1(O17,O17.FIRST),setDynamicStyles:function(t){return t!=this._dynamicStyles&&(this._dynamicStyles.setItems(t),this._changed()),this},setLabel:function(t){return t!==this._label&&(this._label.assign(t),this._changed()),this},setItems:function(t){(t=j0(t))!==this._items&&(this._items=t)},setFilter:function(t){t!=this._filter&&(this._filter=t,this._filterNode=t?J4.Default.parse(t,null):null)},group:function(){return this._group},groupIndex:function(){return this._groupIndex},itemCount:function(){return this._itemList?this._itemList.length:0},displayCount:function(){return this.itemCount()},viewsPerItem:function(){return 1},textsPerItem:function(){return 1},isPolar:function(){return!1},displayName:function(){return this._caption||this._name},getItem:function(t){return this._itemList?this._itemList[t]:0},loadItems:function(t){this._items?this._doLoadExplicitItems(this._items):t instanceof w37||t instanceof z47?this._doLoadCellItems(t):t instanceof g2?this._doLoadRowItems(t):t instanceof q1&&this._doLoadGridItems(t);var e=this._summaryMode;return e==z4.AGGREGATE||e==z4.STATISTICAL?this._summary=this._summarize(e==z4.STATISTICAL):this._summary=null,this},setFocused:function(t,e){this._synchronizer.setFocused(t,e)},getPaletteIndex:function(t){return this._itemView?this._itemView.index():0},getValue:function(t){return isNaN(t)?this._nanValue:t},$_prepareStyles:function(t,e){var i=this._runStyles;i.clearValues(),t.setItem(e),this._dynamicStyles.applyInternal(t,i)},$_setItemView:function(t){return this._itemView=t,this._label._itemView=t,this},_isDefaultOrVerticalData:function(){return this._dataDirection==q6.VERTICAL||this._dataDirection==q6.DEFAULT},_createItem:function(t){var e,i,n;if(e3(t)&&0<t.length&&(e=this.fieldList())){for(i={},n=e.length;n--;)i[e[n]]=t[n];t=i}return new d5(this,t)},_createItemFrom:function(t,e,i){var n,s,r,o={};for(n=i.length;n--;)o[s=i[n]]=e.getValue(s);return(r=new d5(this,o))._index=t,r},_getItemProps:function(){return[this.labelField(),this.valueField()]},_doLoadExplicitItems:function(t){var e,i,n;for(this._itemList=[],e=0,i=t.length;e<i;e++)(n=this._createItem(t[e]))._index=e,this._itemList.push(n)},_doLoadCellItems:function(t){var e,i,n,s,r,o,a,h,l,u,d,c,_,f,g=this._dataDirection;if(g==q6.VERTICAL||g==q6.DEFAULT&&t.index().column.stateFor(f4.MERGE_ROOMS))for(r=t.grid(),o=this._getItemProps(),h=(a=t instanceof z47?t.room():null)?a._head:t.index().rowIndex,l=a?a._tail:h,(u=this._filterNode?S7.Default():null)&&u.prepare(r.dataSource(),this._synchronizer),e=this._itemList=[],i=h,idx=0;i<=l;i++)0<=(s=r.getRow(i)).dataIndex()&&(!u||this._filterNode.evaluate(u.setRow(s)))&&(n=this._createItemFrom(idx++,s,o),e.push(n));else if(_=t.value(),f=t.labels(),V1(_))for(e=this._itemList=[],i=0;i<_.length;i++)d=isNaN(_[i])?this._nanValue:_[i],c={label:f[i],value:d},(n=this._createItem(c))._index=i,e.push(n);else this._summary=this._itemList=null},_doLoadRowItems:function(t){var e,i,n,s,r,o,a,h=Q2(t,j2);if(h&&this._isDefaultOrVerticalData())for(e=this._getItemProps(),(i=this._filterNode?S7.Default():null)&&i.prepare(h.dataSource(),this._synchronizer),this._itemList=[],r=s=0,o=(n=h.getDescendants(this._visibleOnly,!0)).length;s<o;s++)0<=(t=n[s]).dataIndex()&&(!i||this._filterNode.evaluate(i.setRow(t)))&&(a=this._createItemFrom(r++,t,e),this._itemList.push(a))},_doLoadGridItems:function(t){var e,i,n,s,r,o,a;if(this._isDefaultOrVerticalData())for(e=this._getItemProps(),(i=this._filterNode?S7.Default():null)&&i.prepare(t.dataSource(),this._synchronizer),this._itemList=[],s=n=0,r=t.rowCount();n<r;n++)0<=(o=t.getRow(n)).dataIndex()&&(!i||this._filterNode.evaluate(i.setRow(o)))&&(a=this._createItemFrom(s++,o,e),this._itemList.push(a))},_summarize:function(t){var e,i,n,s,r,o,a,h,l,u,d,c,_=this.itemCount();if(0<_){for(r=this.valueField(),h=a=NaN,l=t?[]:null,d=u=o=0;u<_;)if(e=(i=this.getItem(u++))?i.getProp(r):NaN,!isNaN(e)){o=a=h=e,t&&l.push(e),d++;break}for(;u<_;u++)e=(i=this.getItem(u))?i.getProp(r):NaN,isNaN(e)||(o+=e,e<a&&(a=e),h<e&&(h=e),t&&l.push(e),d++);if(0<d)if(c={sum:o,min:a,max:h,avg:o/_},t){for(n=0,s=c.avg,u=l.length;u--;)n+=Math.pow(e-s,2);c.varsp=n/_,c.vars=n/(_-1)}else c.varsp=NaN,c.vars=NaN;return c}},collectValues:function(t,e){var i,n,s,r=this.valueField(),o=this.itemCount(),a=[];if(0<o)for(i=0;i<o;i++)s=(n=this.getItem(i++))?n.getProp(r):NaN,a.push(e&&t<s||!e&&s<t?s:t);return a},getLowerValues:function(t){return this.collectValues(t,!1)},getUpperValues:function(t){return this.collectValues(t,!0)},calcMinValue:function(t){if(this._summary)return this._summary.min;var e,i,n,s,r=this.itemCount();if(0<r){for(e=NaN,i=0;i<r;)if(n=(s=this.getItem(i++))?s.getProp(t):NaN,!isNaN(n)){e=n;break}for(;i<r;i++)n=(s=this.getItem(i))?s.getProp(t):NaN,isNaN(n)||(e=Math.min(e,n));return e}return NaN},calcMaxValue:function(t){if(this._summary)return this._summary.max;var e,i,n,s,r=this.itemCount();if(0<r){for(e=NaN,i=0;i<r;)if(n=(s=this.getItem(i++))?s.getProp(t):NaN,!isNaN(n)){e=n;break}for(;i<r;i++)n=(s=this.getItem(i))?s.getProp(t):NaN,isNaN(n)||(e=Math.max(e,n));return e}return NaN}}),M0=I1("ChartSeriesGroup",x57,{init:function(t,e){this._super(t,e),this._series=[]},stackMode:u1(N4,N4.NONE),series:function(){return this._series.concat()},setSeries:function(t){var e,i;if(this._series=[],t instanceof z7)this.addSeries(t),this.invalidate();else{for(e=0,i=t.length;e<i;e++)this.addSeries(t[e]);this.invalidate()}},count:function(){return this._series.length},addSeries:function(t){var e,i;if(t){if(this._series.length<1)return this._series.push(t),!0;for(e=0,i=this._series.length;e<i;e++)if(t===this._series[e]||!this.containableWith(t))return!1;return this._series.push(t),!0}return!1},indexOf:function(t){var e,i;for(e=0,i=this._series.length;e<i;e++)if(this._series[e]===t)return e;return-1},getItem:function(t){if(t<0||t>=this._series.length)throw"Invalid index: "+t;return this._series[t]},seriesByName:function(t){var e,i;for(e=0,i=this._series.length;e<i;e++)if(this._series[e].name()===t)return this._series[e];return null},collectValues:function(t,e){var i,n,s,r,o,a=this._series.length,h=[];for(n=0;n<a;n++)for(i=this._series[n],r=0,o=(s=e?i.getUpperValues(t):i.getLowerValues(t)).length;r<o;r++)r>=h.length?h.push(s[r]):h[r]+=s[r];return h},getLowerValues:function(t){return this.collectValues(t,!1)},getUpperValues:function(t){return this.collectValues(t,!0)},getMinValueAt:function(t){var e,i,n,s,r,o=NaN,a=this._series.length;if(0<a)if(this.stackMode()==N4.NONE||this.stackMode()==N4.OVERLAPPED){for(e=0;e<a;)if((i=this._series[e++]).getMinValueAt&&i.visible()){o=i.getMinValueAt(t);break}for(;e<a;)(i=this._series[e++]).getMinValueAt&&i.visible()&&(o=Math.min(o,i.getMinValueAt(t)))}else for(o=r=t.baseValue(),e=0,s=(n=this.getLowerValues(r)).length;e<s;e++)o=Math.min(n[e],o);return o},getMaxValueAt:function(t){var e,i,n,s,r=NaN,o=this._series.length;if(0<o)if(this.stackMode()==N4.NONE||this.stackMode()==N4.OVERLAPPED){for(e=0;e<o;)if((i=this._series[e++]).getMaxValueAt&&i.visible()){r=i.getMaxValueAt(t);break}for(;e<o;)(i=this._series[e++]).getMaxValueAt&&i.visible()&&(r=Math.max(r,i.getMaxValueAt(t)))}else for(n=t.baseValue(),s=this.getUpperValues(n),r=n,e=0,len=s.length;e<len;e++)r=Math.max(s[e],r);return r},getMinDateAt:function(t){var e,i,n,s,r,o=null,a=this._series.length;if(0<a)if(this.stackMode()==N4.NONE||this.stackMode()==N4.OVERLAPPED){for(e=0;e<a;)if((i=this._series[e++]).getMinDateAt&&i.visible()){o=i.getMinDateAt(t);break}for(;e<a;)(i=this._series[e++]).getMinDateAt&&i.visible()&&(o=C77(o,i.getMinDateAt(t)))}else for(o=r=t.baseValue(),e=0,s=(n=this.getLowerValues(r)).length;e<s;e++)o=C77(n[e],o);return o},getMaxDateAt:function(t){var e,i,n,s,r,o=null,a=this._series.length;if(0<a)if(this.stackMode()==N4.NONE||this.stackMode()==N4.OVERLAPPED){for(e=0;e<a;)if((i=this._series[e++]).getMaxDateAt&&i.visible()){o=i.getMaxDateAt(t);break}for(;e<a;)(i=this._series[e++]).getMaxDateAt&&i.visible()&&(o=Y77(o,i.getMaxDateAt(t)))}else for(o=s=t.baseValue(),e=0,n=(r=this.getUpperValues(s)).length;e<n;e++)o=Y77(r[e],o);return o},loadItems:function(t){var e,i;for(e=0,i=this._series.length;e<i;e++)this._series[e].loadItems(t)}}),L57=I1("CartesianSeries",z7,{init:function(t,e){this._super(t,e)},locationRate:1,xAxisObj:function(){return this.group()?this.group().xAxisObj():this._xAxisObj},yAxisObj:function(){return this.group()?this.group().yAxisObj():this._yAxisObj},mixableWith:function(t){return t instanceof L57},isValueAxis:function(t){return t===this.yAxisObj()}}),H57=I1("CartesianSeriesGroup",M0,{init:function(t,e){this._super(t,e)}}),G57=I1("LabeledValueSeries",L57,{init:function(t,e){this._super(t,e)},labelField:"label",dateField:"date",getMinDate:function(t){var e,i,n,s=null,r=this.itemCount();if(0<r)for(e=0;e<r;e++)i=this.getItem(e),n=this.getDate(i),null==s?s=n:n<s&&(s=n);return s},getMaxDate:function(t){var e,i,n,s=null,r=this.itemCount();if(0<r)for(e=0;e<r;e++)i=this.getItem(e),n=this.getDate(i),null==s?s=n:s<n&&(s=n);return s},displayCount:function(){var t=this.itemCount(),e=this.xAxisObj();return e instanceof T6||(e=this.yAxisObj()),e instanceof T6?e.categoryCount():t},getMinValueAt:function(t){return this.calcMinValue(this.valueField())},getMaxValueAt:function(t){return this.calcMaxValue(this.valueField())},getMinDateAt:function(t){return this.calcMinDate(this.dateField())},getMaxDateAt:function(t){return this.calcMaxDate(this.dateField())},getLabels:function(t){return this.extractLabels(this.labelField())},getDate:function(t){var e=t.getProp(this.dateField());return e instanceof Date||(e=new Date(e),t.setProp(this.dateField(),e)),e}}),O38=I1("ClusterableSeries",G57,{init:function(t,e){this._super(t,e)}}),n6=I1("ColumnSeries",O38,{init:function(t,e){this._super(t,e)},itemWidth:.7,itemShape:null,_createItem:function(t){var e=this._super(t);return e.setProp("shape",this._itemShape),e},isClusterable:function(){return!0},clusteredAxis:function(){return this.xAxisObj()}}),M57=I1("ColumnSeriesGroup",H57,{init:function(t,e){this._super(t,e)},isClusterable:function(){return!0},clusteredAxis:function(){return this.xAxisObj()},containableWith:function(t){return t instanceof n6},mixableWith:function(t){return!0}}),s6=I1("BarSeries",n6,{init:function(t,e){this._super(t,e)},_styleSheetRegion:function(){return"barSeries"},clusteredAxis:function(){return this.yAxisObj()},isValueAxis:function(t){return t===this.xAxisObj()}}),j38=I1("BarSeriesGroup",M57,{init:function(t,e){this._super(t,e)},clusteredAxis:function(){return this.yAxisObj()},containableWith:function(t){return t instanceof s6},mixableWith:function(t){return!0}}),k17=I1("LineSeries",G57,{init:function(t,e){this._super(t,e),this._legendFill=new U1},lineType:p6.STRAIGHT,_styleSheetRegion:function(){return"lineSeries"}}),U47=I1("AreaSeries",k17,{init:function(t,e){this._super(t,e),this._styles.setBackground("#10000000")}}),k38=I1("AreaSeriesGroup",H57,{init:function(t,e){this._super(t,e)},containableWith:function(t){return t instanceof U47},mixableWith:function(t){return!0}}),W57=I1("RadialSeries",z7,{init:function(t,e){this._super(t,e)},startAngle:0,totalAngle:360,radius:.6,innerRadius:0,offsetX:0,offsetY:0,radiusRate:1,labelField:null,setTotalAngle:function(t){this._totalAngle=isNaN(t)?360:Math.max(0,Math.min(360,t))},startAngleRad:function(){return isNaN(this._startAngle)?0:this._startAngle/P77},totalAngleRad:function(){return isNaN(this._totalAngle)?a87:this._totalAngle/P77},labelField_:function(){return this._labelField||"label"},isPolar:function(){return!0},xAxisObj:function(){return this.group()?this.group().xAxisObj():this._xAxisObj},yAxisObj:function(){return this.group()?this.group().yAxisObj():this._yAxisObj},mixableWith:function(t){return t instanceof W57&&t.xAxisObj()==this.yAxisObj()},getItemProp:function(t,e){var i;return"label"==e||"category"==e?(i=this.xAxisObj()).getCategory?i.getCategory(t.index()):t.index():this._super(t,e)},getMinValueAt:function(t){return this.calcMinValue(this.valueField())},getMaxValueAt:function(t){return this.calcMaxValue(this.valueField())},getLabels:function(t){return this.extractLabels(this.labelField())},getItemCaption:function(t){var e=this.xAxisObj();return e&&e.getCategory?e.getCategory(t.index())+","+t.getProp(this._valueField):t.getProp(this._labelField)},connectableXAxis:function(t){return t instanceof U5},connectableYAxis:function(t){return t instanceof w3}}),S9=I1("PieSeries",W57,{init:function(t,e){this._super(t,e)},tickLength:7,labelOffset:7,slicedOffset:10,slicedField:null,slicedAnimating:!0,slicedField_:function(){return this._slicedField||"sliced"},assign:function(t){this._super(t)},_styleSheetRegion:function(){return"pieSeries"},_doGetItemCases:function(t,e){t.getProp(this.slicedField())&&e.push("sliced")},_doUpdate:function(t,e){this._super(t,e)}}),U17=I1("GridChartLoader",null,{init:function(){this._super()},load:function(t,e){var i,n,s,r,o,a,h,l,u,d,c,_;if(t&&t.type&&U17.ChartTypes.hasOwnProperty(i=t.type.trim()))if(n=U17.ChartTypes[i],e=e||new O5,t.styles&&e.setStyles(t.styles),t.plotArea&&e.setPlotArea(t.plotArea),t.legend&&e.setLegend(t.legend),(s=this.$_loadAxes(t.xAxes,n.xAxisType())).length<1&&s.push(this.$_loadAxis({},n.xAxisType())),e.setXAxes(s),(s=this.$_loadAxes(t.yAxes,n.yAxisType())).length<1&&s.push(this.$_loadAxis({},n.yAxisType())),e.setYAxes(s),r=this.$_loadSeriesGroups(e,n,t.seriesGroups),a=this.$_loadSeries(e,n,t.series),r){for(_=a.length,l=0,u=r.length;l<u;l++)for(o=r[l],d=0;d<_;d++)(c=a[d])instanceof z7&&c.source.group==o.name()&&(o.addSeries(c),c._group=o,c._groupIndex=o.count()-1);for(h=[],l=0;l<_;l++)(c=a[l])instanceof z7&&((o=c._group)?h.indexOf(o)<0&&h.push(o):h.push(c));e.setSeries(h)}else e.setSeries(a);return e},$_loadAxis:function(t,e){var i=null,n=t.type||e;switch(n){case"linear":i=new k5;break;case"category":i=new T6;break;case"linearPolar":(i=new M38).setVisible(!1);break;case"categoryPolar":i=new W38;break;default:throw"Invalid axis type: "+n}return i&&i.assign(t),i},$_loadAxes:function(t,e){var i,n,s,r=[],o=Q8(t);if(o)for(i=0,n=o.length;i<n;i++)s=this.$_loadAxis(o[i],e),r.push(s);return r},$_loadSeriesGroups:function(t,e,i){var n,s,r,o,a,h,l=null,u=Q8(i);if(u)for(n=0,s=u.length;n<s;n++)if((r=u[n]).name){if(o=null,a=r.polar,h=r.type&&r.type.toLowerCase(),a)switch(h){case"column":o=new RadialColumnSeriesGroup;break;case"area":o=new RadialAreaSeriesGroup}else if(h)switch(h){case"column":o=new M57;break;case"bar":o=new j38;break;case"area":o=new k38;break;case"barrange":o=new BarRangeSeriesGroup;break;case"columnrange":o=new ColumnRangeSeriesGroup}else o=this._createDefaultSeriesGroup();o&&(o.assign(r),(l=l||[]).push(o))}return l},$_loadSeries:function(t,e,i){var n,s,r,o,a,h=[],l=Q8(i);if(l)for(n=0,s=l.length;n<s;n++)(r=l[n]).type&&(o=U17.ChartTypes[r.type])&&(e=o),(a=e.createDefaultSeries(t))&&(a.assign(r),a.source=r,h.push(a));return h.length<1&&h.push(e.createDefaultSeries(t)),h}},{ChartTypes:{pie:{xAxisType:function(){return"linearPolar"},yAxisType:function(){return"linear"},createDefaultSeries:function(t){return new S9(t)},createDefaultSeriesGroup:function(){return null}},column:{xAxisType:function(){return"category"},yAxisType:function(){return"linear"},createDefaultSeries:function(t){return new n6(t)},createDefaultSeriesGroup:function(){return null}},line:{xAxisType:function(){return"category"},yAxisType:function(){return"linear"},createDefaultSeries:function(t){return new k17(t)},createDefaultSeriesGroup:function(){return null}},area:{xAxisType:function(){return"category"},yAxisType:function(){return"linear"},createDefaultSeries:function(t){return new U47(t)},createDefaultSeriesGroup:function(){return null}},bar:{xAxisType:function(){return"linear"},yAxisType:function(){return"category"},createDefaultSeries:function(t){return new s6(t)},createDefaultSeriesGroup:function(){return null}}}},function(t){t.Default=new t}),$_chartdrawing=0,Y5=I1("GridChartView",W2,{init:function(t,e){this._super(t,"gridChartView"),t&&(t=this.$_svg=new b7(this,e),this.$_svgElt=this.$_svg._svg),this.addChild(this._plotAreaView=new t38(t)),this.addChild(this._leftAxisPanel=new d17(t,"leftAxisPanel",A4.VERTICAL)),this.addChild(this._rightAxisPanel=new d17(t,"rightAxisPanel",A4.VERTICAL)),this.addChild(this._bottomAxisPanel=new d17(t,"bottomAxisPanel",A4.HORIZONTAL)),this.addChild(this._topAxisPanel=new d17(t,"topAxisPanel",A4.HORIZONTAL)),this.addChild(this._legendView=new V38(t)),this._model=null,this._loading=!1,this._layoutNeeded=!1,this._legendRect=new g1,this._axesRects=new S17,this._plotAreaRect=new g1,this._floatings=null},model:function(){return this._model},setModel:function(t){t!==this._model&&(this._model=t,this.invalidateLayout(),this._model&&(this._loading=!0))},isPolar:function(){return this._model.isPolar()},polarSize:function(){return this._model.plotArea().polarSize()},getSeriesView:function(t){return this._plotAreaView.getSeriesView(t)},getAxisViews:function(){function t(t,e){var i,n,s;for(i=0;i<t.length;i++)n=t[i],(s=this._leftAxisPanel.findAxisView(n)||this._bottomAxisPanel.findAxisView(n)||this._rightAxisPanel.findAxisView(n)||this._topAxisPanel.findAxisView(n))&&e.push(s)}var e=[];return t.call(this,this._model.xAxes(),e),t.call(this,this._model.yAxes(),e),e},getAxisViewOf:function(t){return this._leftAxisPanel.findAxisView(t)||this._bottomAxisPane.findAxisView(t)||this._rightAxisPanel.findAxisView(t)||this._topAxisPanel.findAxisView(t)},invalidateLayout:function(){this._layoutNeeded||(this._layoutNeeded=!0)},_doMeasure:function(t,e,i){return new J2(e,i)},_doLayoutContent:function(t){if(l3("## rendering chart: "+ ++$_chartdrawing),this._layoutNeeded){var e=this._model,i=this.getClientRect();e.styles().deflatePaddings(i),this.$_updateModels(e,i),this.$_measureItems(e,i),this.$_layoutItems(e,i)}this._loading&&(this._loading=!1)},_doRefresh:function(){},_doDraw:function(t,e){this._doRender(t,this._drawRect)},_doRender:function(t,e){},_doRenderHtml:function(t){this.$_svg.setBounds(0,0,t.width,t.height),this.$_svg._graphics.clear()},$_updateModels:function(t,e){var i,n,s,r=t.xAxes(),o=t.yAxes(),a=this._plotAreaView.gridView(),h=this._plotAreaView.frontGridView();if(t.$_updateModels(e,!0),a.clearSources(),h.clearSources(),r&&0<(n=r.length))for(i=0;i<n;i++)s=r[i],a.addSource(s),h.addSource(s);if(o&&0<(n=o.length))for(i=0;i<n;i++)s=o[i],a.addSource(s),h.addSource(s)},$_measureItems:function(t,e){var i,n,s=this.grid();if((n=t.legend()).visible())switch((i=this._legendView).setModel(n),size=i.measureI(s,e.width,e.height),size.width+=n.marginLeft()+n.marginRight(),size.height+=n.marginTop()+n.marginBottom(),n.position()){case v6.BOTTOM:this._legendRect.set(e.x+Y1((e.width-size.width)/2),e.bottom()-size.height,size.width,size.height),e.bottomBy(-size.height);break;case v6.TOP:this._legendRect.set(e.x+Y1((e.width-size.width)/2),e.y,size.width,size.height),e.topBy(size.height);break;case v6.RIGHT:this._legendRect.set(e.right()-size.width,e.y,size.width,size.height),e.rightBy(-size.width);break;case v6.LEFT:this._legendRect.set(e.x,e.y,size.width,size.height),e.leftBy(size.width);break;default:this._legendRect.set(e.x,e.bottom()-size.height,size.width,size.height),e.bottomBy(-size.height)}else this._legendRect.setEmpty();if(this._axesRects.clear(),t.isPolar())r=t.getAxes(null,null,!0),this._plotAreaView.polarAxisPanel().setAxes(r),this._plotAreaView.polarAxisPanel().measure(s,e.width,e.height);else{var r=t.getAxes(A4.VERTICAL,W4.NORMAL);axisPanel=this._leftAxisPanel,axisPanel.setAxes(r),r&&0<r.length&&(size=axisPanel.measureI(s,e.width,e.height),this._axesRects.setLeft(e.x,e.y,size.width,e.height),e.leftBy(size.width)),r=t.getAxes(A4.VERTICAL,W4.OPPOSITE),axisPanel=this._rightAxisPanel,axisPanel.setAxes(r),r&&0<r.length&&(size=axisPanel.measureI(s,e.width,e.height),this._axesRects.setRight(e.right()-size.width,e.y,size.width,e.height),e.rightBy(-size.width)),r=t.getAxes(A4.HORIZONTAL,W4.NORMAL),axisPanel=this._bottomAxisPanel,axisPanel.setAxes(r),r&&0<r.length&&(size=axisPanel.measureI(s,e.width,e.height),this._axesRects.setBottom(e.x,e.bottom()-size.height,e.width,size.height),e.bottomBy(-size.height)),r=t.getAxes(A4.HORIZONTAL,W4.OPPOSITE),axisPanel=this._topAxisPanel,axisPanel.setAxes(r),r&&0<r.length&&(size=axisPanel.measureI(s,e.width,e.height),this._axesRects.setTop(e.x,e.y,e.width,size.height),e.topBy(size.height))}t.plotArea()&&!e.isEmpty()?((i=this._plotAreaView).setModel(t.plotArea()),this._plotAreaRect.set(e.x,e.y,e.width,e.height),tr=this._axesRects.left,tr.isEmpty()||(tr.setRight(e.x),tr.setBottom(e.bottom())),tr=this._axesRects.right,tr.isEmpty()||tr.setBottom(e.bottom())):this._plotAreaRect.setEmpty()},$_layoutItems:function(t,e){var i;if((i=this._legendView).setVisible(!this._legendRect.isEmpty()),i.visible()){var n=t.legend();i.setRectI(this._legendRect.inflate(-n.marginLeft(),-n.marginTop(),-n.marginRight(),-n.marginBottom())),i.updateElements()}(i=this._leftAxisPanel).setVisible(!this._axesRects.left.isEmpty()),i.visible()&&(i.setRectI(this._axesRects.left),i.updateElements()),(i=this._rightAxisPanel).setVisible(!this._axesRects.right.isEmpty()),i.visible()&&(i.setRectI(this._axesRects.right),i.updateElements()),(i=this._bottomAxisPanel).setVisible(!this._axesRects.bottom.isEmpty()),i.visible()&&(i.setRectI(this._axesRects.bottom),i.updateElements()),(i=this._plotAreaView).setVisible(!this._plotAreaRect.isEmpty()),i.visible()&&(i.setRectI(this._plotAreaRect),i.updateElements())}}),w7=I1("ChartElement",W2,{init:function(t,e){this._super(t,e)},model:null,renderer:null,chartView:function(){for(var t=this.parent();t;){if(t instanceof Y5)return t;t=t.parent()}return null},chartModel:function(){return this.chartView().model()},renderer_:function(){return this._renderer||this.defaultRenderer()},defaultRenderer:function(){return null},updateElements:function(){this._doUpdateElements.apply(this,arguments)},measureI:function(t,e,i){var n=this._doMeasure(t,e,i);return n.width=B1(n.width),n.height=B1(n.height),n},clip:function(t){this.getClientRect(this._drawRect),this._doClip(t)},_doClip:function(t){t.clipRect(this._clipBounds||this._drawRect)},_doUpdateElements:function(){},_doDraw:function(t,e){this._doRender(t,this._drawRect)},_doRender:function(t,e){var i;this._canDraw()&&!e.isEmpty()&&this.model()&&(i=this.renderer())&&i.render(this,t,e)},_doRenderHtml:function(t){t.isEmpty()||this._doDraw(this.chartView().$_svg,t)},_doDrawSvg:function(t){this.getClientRect(this._drawRect),this._doDraw(t,!1)},_canDraw:function(){return!0}}),d47=I1("ChartTextElement",w7,{init:function(t,e){this._super(t,e||"chartTextView"),this.setMouseEnabled(!1),this._font=null,this._paddingLeft=0,this._paddingRight=0,this._paddingTop=0,this._paddingBottom=0},text:null,setStyles:function(t){this._background=t.background(),this._color=t.color(),this._border=t.border(),this._font=t.font(),this._textShadow=t.textShadow(),this._paddingLeft=t.paddingLeft(),this._paddingRight=t.paddingRight(),this._paddingTop=t.paddingTop(),this._paddingBottom=t.paddingBottom(),this._prefix=t.prefix(),this._suffix=t.suffix()},_doClip:function(t){},_doMeasure:function(t,e,i){var n=this._font,s={width:0,height:0};return s.width=this.container().measureText(n,this._text),s.height=n.size,s.width+=this._paddingLeft+this._paddingRight,s.height+=this._paddingTop+this._paddingBottom,s},_doDraw:function(t){var e,i=this._text;i&&(e=new g1(0,0,this.width(),this.height()),t.drawRectI(this._background,this._border,e),t.drawTextSh(this._font,this._color,this._textShadow,i,B1(e.x+e.width/2),B1(e.y+e.height/2-1),v1.CENTER,"middle"))}}),J57=I1("ChartSeriesItemView",w7,{init:function(t){this._super(t,"seriesItemView"),this._index=-1,this._dataPoint={x:0,y:0},this._dataPoint2={x:0,y:0},this._dataPoint3={x:0,y:0},this.$_childStyles={}},toolTip:function(){var t=this.series().toolTip();return t.setSingleton(this.seriesView().isSingleton()),t},toolTipRuntime:function(){return this.series().getToolTipRuntime(this.model())},series:function(){return this.parent().parent().model()},seriesView:function(){return this.parent().parent()},index:function(){return this._index},setIndex:function(t){this._index=t},state:function(){return this._hovered?"hovered":null},isSingleton:function(){return 1==this.parent().childCount()},setDataPoint:function(t,e,i,n){return this._dataPoint.x=t,this._dataPoint.y=e,this._dataPoint2.x=i,this._dataPoint2.y=n,this},hoveredChanged:function(){this.invalidateLayout()},_doClip:function(t){},_doDraw:function(t,e){this.series().$_setItemView(this),this._super(t,e)},hitTest:function(t,e){var i=this.renderer();return i&&i.containsPoint?i.containsPoint(this,t,e):0<=t&&t<this._width&&0<=e&&e<this._height}}),d38=I1("StackableSeriesItemView",J57,{init:function(t){this._super(t),this._gindex=0},negative:!1,separator:!1}),Y38=I1("ChartSeriesLabelView",d47,{init:function(t,e){this._super(t,"itemLabelView"),this._itemView=null,this._originX=0,this._originY=0},itemView:function(){return this._itemView},setLabel:function(t,e){var i=e;this._prefix&&(i=this._prefix+i),this._suffix&&(i+=this._suffix),this._itemView=t,this.setText(i)},setOrigin:function(t,e){this._originX=t,this._originY=e}}),y57=I1("ChartSeriesTextView",w7,{init:function(t,e){this._super(t,"seriesTextView"),this._seriesView=e,this._textViews=[],this._textViewCount=0},isLayer:function(){return!0},_doDraw:function(t){},_doClip:function(t){},_doUpdateElements:function(){var t,e,i,n=this._seriesView,s=n.model();if(s&&(t=n.renderer())){for(e=s.displayCount()*s.textsPerItem();(i=this.childCount())>e;)this.removeElementAt(i-1);for(;(i=this.childCount())<e;)this._textViews.length<=i&&this._textViews.push(new Y38(this._dom)),this.addElement(this._textViews[i]);return this._textViewCount=e,t.layoutLabels(n,this._textViews,n.getClientRect())}}}),l6=I1("ChartSeriesView",w7,{init:function(t){this._super(t,"seriesView"),this._itemRenderer=null,this._itemLayer=new D4(t,"itemsView"),this.addElement(this._itemLayer),this._separatorView=new o7(t,"separatorLayer"),this._separatorView.setRenderCallback(this.drawSeparators.bind(this)),this._textView=new y57(t,this),this._itemViews=[],this._itemViewCount=0,this._plotView=null,this._mask=null,this._slideMask=null},separatorView:function(){return this._separatorView},textView:function(){return this._textView},itemRenderer:function(){return this._itemRenderer},setItemRenderer:function(t){t!==this._itemRenderer&&(this._itemRenderer=t,this.invalidate())},itemCount:function(){return this._itemViewCount},getItem:function(t){return this._itemViews[t]},plotView:function(){this._plotView},getInterpolation:function(t,e){var i=this.chartView().animations().getInterpolation(this.model(),t);return i?i.rate():e!==c2?e:1},getAnimationAttr:function(t,e){var i=this.chartView().animations().getInterpolation(this.model(),t);return i?i.getAttribute(e):c2},getDataPoints:function(t){var e,i,n,s=null,r=t!==c2?t:this._itemViewCount;if(0<r)for(s=[],e=0;e<r;e++)n={x:(i=view.getItem(e))._dataPoint.x,y:i._dataPoint.y},s.push(n);return s},setItemIndex:function(t,e,i,n,s){this._plotView.setItemIndex(t,e,i,n,s),t._negative=s,t._gindex=n},isLayer:function(){return!0},_doClip:function(t){},_doUpdateElements:function(){var t,e,i,n,s,r,o,a,h,l,u,d=this.model(),c=this.renderer();if(d&&c){for(r=(d.$_view=this).width(),o=this.height(),u=c.canStacked(),n=(h=d.displayCount())*(l=d.viewsPerItem()),list=[];(t=this._itemLayer.childCount())>n;)this._itemLayer.removeElementAt(t-1);for(;(t=this._itemLayer.childCount())<n;)this._itemViews.length<=t&&this._itemViews.push(u?new d38(this._dom):new J57(this._dom)),this._itemLayer.addElement(this._itemViews[t]);switch(this._itemViewCount=n,d.itemDisplayOrder()){case O17.LAST:for(t=h;t--;)list.push(t);break;default:for(t=0;t<h;t++)list.push(t)}for(t=0;t<h;t++)for(i=list[t],e=0;e<l;e++)s=this._itemViews[i*l+e],a=d.getItem(t,!0),s.setModel(a),s.setIndex(t),s.setRenderer(this.itemRenderer());c.layoutItems(this),this._textView.setBounds(0,0,r,o),this._textView.updateElements()}},_doDraw:function(t){var e=this.getClientRect(),i=this.renderer();i&&i.render(this,t,e)},resetSeparators:function(t,e){var i,n,s;if(t||e)for(i=0,n=this.itemCount();i<n;i++)(s=this.getItem(i))._negative?s._separator=s._gindex<e[i]:s._separator=s._gindex<t[i]},drawSeparators:function(t){var e=this.model(),i=this.renderer();e&&i&&i.renderItemSeparators(this,t,new g1(0,0,this.width(),this.height()))}}),c57=I1("ChartGridView",w7,{init:function(t,e,i){this._super(t,e),this._isFront=i,this._sources=[]},isFront:function(){return this._isFront},sources:function(){return this._sources},indexOf:function(t){for(var e=this._sources.length;e--;)if(this._sources[e]===t)return e;return-1},clearSources:function(){this._sources=[]},addSource:function(t){this.indexOf(t)<0&&(this._sources.push(t),this.invalidate())},removeSource:function(t){var e=this.indexOf(t);0<=e&&(this._sources.splice(e,1),this.invalidate())},isLayer:function(){return!0},defaultRenderer:function(){return j57.Default},_doDraw:function(t){for(var e,i=!1,n=this._sources.length;n--;)if(this._sources[n].visible()){i=!0;break}if(i&&(e=this.renderer()))return e.render(this,t,this.clientRect())}}),t38=I1("ChartPlotAreaView",w7,{init:function(t,e){this._super(t,"plotAreaView"),this._owner=e,this._gridView=new c57(t,"gridView"),this.addElement(this._gridView),this._indicatorLayer=new D4(t,"indicatorLayer"),this.addElement(this._indicatorLayer),this._polarAxisPanel=new P38(t),this.addElement(this._polarAxisPanel),this._seriesLayer=new D4(t,"seriesLayer"),this.addElement(this._seriesLayer),this._seriesSeparatorLayer=new D4(t,"seriesSeparatorLayer"),this.addElement(this._seriesSeparatorLayer),this._labelLayer=new D4(t,"labelLayer"),this.addElement(this._labelLayer),this._indicatorViews=[],this._seriesViews=[],this._frontIndicatorLayer=new D4(t,"frontIndicatorLayer"),this.addElement(this._frontIndicatorLayer),this._frontGridView=new c57(t,"frontGridView",!0),this.addElement(this._frontGridView),this._itemIndicies=new x6,this._negativeItemIndicies=new x6},gridView:function(){return this._gridView},frontGridView:function(){return this._frontGridView},polarAxisPanel:function(){return this._polarAxisPanel},polarSize:function(){return this._model.polarSize()},polarAxis:function(){var t=this.parent.model().xAxes();return t&&0<t.length?t[0]:null},getSeriesViews:function(){var t,e,i=[];for(t=this._seriesLayer.childCount();t--;)(e=this._seriesLayer.getChild(t))instanceof l6&&i.push(e);return i},getSeriesView:function(t){var e,i,n;for(e=0,i=this._seriesLayer.childCount();e<i;e++)if((n=this._seriesLayer.getChild(e))instanceof l6&&n.model()===t)return n;return null},isLayer:function(){return!0},defaultRenderer:function(){return ChartPlotAreaRenderer.Default},_doClip:function(t){},_doMeasure:function(t,e,i){var n;return this.model()&&(n=this.renderer())?n.measure(this,e,i):{width:e,height:i}},_doUpdateElements:function(){var t,e,i,n,s,r,o,a,l,u;for(chartView=this.chartView(),chart=chartView.model(),delegate=t47.Default,w=this.width(),h=this.height(),this.refreshSeries(chartView),this.refreshIndicators(chartView),(o=this.polarAxisPanel()).visible()&&(o.setBounds(0,0,w,h),o.updateElements()),(a=this.gridView()).setRenderer(delegate.getGridRenderer(chartView)),a.setBounds(0,0,w,h),a.updateElements(),(a=this.frontGridView()).setRenderer(delegate.getGridRenderer(chartView)),a.setBounds(0,0,w,h),a.updateElements(),s=0,r=(i=this._indicatorLayer).childCount();s<r;s++)u=(l=i.getChild(s)).model(),l.setRenderer(delegate.getAxisIndicatorRenderer(u)),l.setBounds(0,0,w,h),l.updateElements(l._axisView);for(s=0,r=(i=this._frontIndicatorLayer).childCount();s<r;s++)u=(l=i.getChild(s)).model(),l.setRenderer(delegate.getAxisIndicatorRenderer(u)),l.setBounds(0,0,w,h),l.updateElements(l._axisView);for(s=0,r=(i=this._seriesLayer).childCount();s<r;s++)(n=i.getChild(s))instanceof l6&&(t=n.model(),n._plotView=this,n.setRenderer(delegate.getSeriesRenderer(t)),n.setItemRenderer(delegate.getSeriesItemRenderer(t)),n.setBounds(0,0,w,h),n.updateElements());for(s=0,r=i.childCount();s<r;s++)(n=i.getChild(s))instanceof l6&&(e=n.model().group(),n.resetSeparators(this._itemIndicies.get(e),this._negativeItemIndicies.get(e)))},_doDraw:function(t){var e=this.chartModel().plotArea().styles(),i=e.background(),n=e.border();(i||n)&&t.drawRect(i,n,this.clientRect())},refreshSeries:function(t){function e(t,e,i){var n,s,r=null;for(n=0,s=e.length;n<s;n++)if(e[n]instanceof l6&&e[n].model()===i){r=e[n],e.splice(n,1);break}return r||(r=new l6(t)).setModel(i),r}function i(t,e){return t.zindex()-e.zindex()}var n=t.model();if(n){var s,r,o,a,h,l,u,d,c=this._seriesViews,_=this._seriesLayer;for(s=_.childCount()-1;0<=s;s--)(a=_.getChild(s))instanceof l6&&(_.removeElement(a),c.push(a));for(s=(_=this._labelLayer).childCount()-1;0<=s;s--)(h=_.getChild(s))instanceof y57&&_.removeElement(h);for(s=(_=this._seriesSeparatorLayer).childCount()-1;0<=s;s--)h=_.getChild(s),_.removeElement(h);for(_=this._seriesLayer,s=0,o=(l=n.$_getSeries().sort(i)).length;s<o;s++)if((d=l[s])instanceof z7)a=e(this._dom,c,d),_.addElement(a),this._seriesSeparatorLayer.addElement(a.separatorView()),this._labelLayer.addElement(a.textView());else for(u=d.series().sort(i),r=0;r<u.length;r++)a=e(this._dom,c,u[r]),_.addElement(a),this._seriesSeparatorLayer.addElement(a.separatorView()),this._labelLayer.addElement(a.textView())}},refreshIndicators:function(r){if(r.model()){var t,e,i,n,s,o,a,h,l,u,d=this._indicatorLayer;for(t=d.childCount()-1;0<=t;t--)a=d.getChild(t),d.removeElement(a),this._indicatorViews.push(a);for(t=(d=this._frontIndicatorLayer).childCount()-1;0<=t;t--)a=d.getChild(t),d.removeElement(a),this._indicatorViews.push(a);for(t=0,i=(u=r.getAxisViews()).length;t<i;t++)if(h=(s=u[t]).model().indicators())for(e=0,n=h.length;e<n;e++)l=h[e],(o=function(t,e){var i,n,s=null;for(i=0,n=t.length;i<n;i++)if(t[i].model()===e){s=t[i],t.splice(i,1);break}return s||(s=new E38(r._dom)).setModel(e),s}(this._indicatorViews,l))._axisView=s,l.front()?this._frontIndicatorLayer.addElement(o):this._indicatorLayer.addElement(o)}},setItemIndex:function(t,e,i,n,s){var r,o=s?this._negativeItemIndicies:this._itemIndicies,a=o.get(i);a||(a=[],o.set(i,a)),((r=a[e])===c2||r<n)&&(a[e]=n)}}),R38=I1("ChartAxisTicksView",w7,{init:function(t,e){this._super(t,"chartAxisTicksView"),this._axisView=e,this._tickViews=[],this._tickCount=0},axisView:function(){return this._axisView},tickCount:function(){return this._tickCount},tickViews:function(){return this._tickViews},_doClip:function(t){},_prepareTicks:function(){for(var t,e,i,n,s=this._axisView,r=s.model(),o=r.labelCallback(),a=s.renderer(),h=r.tickStyles(),l=r.getTickNumber();(t=this.childCount())>l;)this.removeElementAt(t-1);for(;(t=this.childCount())<l;)this._tickViews.length<=t&&this._tickViews.push(a.createTickView(this._dom)),this.addElement(this._tickViews[t]);for(this._tickCount=l,i=r instanceof k5&&r.useNumberSymbols()?m18.Default:null,t=0;t<l;t++)(e=this._tickViews[t]).setStyles(h),n=r.getTick(t),o&&(n=o(r,t,n)),e.setTick(n,i),e.measure(1e4,1e4)}}),w38=I1("ChartAxisTitleView",w7,{init:function(t,e){this._super(t,"axisTitleView"),this._axisView=e},orientation:function(){return this._axisView.model().orientation()},location:function(){return this._axisView.model().location()},_doMeasure:function(t,e,i){return this._renderer.measure(this,e,i)}}),E38=I1("AxisIndicatorView",w7,{init:function(t){this._super(t,"axisIndicatorView"),this._axisView=null,this.addElement(this._textView=new d47(t,"axisIndicatorText"))},axisView:function(){return this._axisView},textView:function(){return this._textView},axis:function(){return this._axisView.model()},_doClip:function(){},_doUpdateElements:function(t){this._axisView=t},canDraw:function(){return!0}}),Y47=I1("ChartAxisLabelView",d47,{init:function(t,e){this._super(t,e||"axisLabelView"),this._measuredWidth=NaN,this._measuredHeight=NaN},setTick:function(t){this._tick=t,this.setText(String(t))},_doMeasure:function(t,e,i){var n=this._super(t,e,i);return this._measuredWidth=n.width,this._measuredHeight=n.height,n}}),K38=I1("ChartNumericAxisLabelView",Y47,{init:function(t){this._super(t,"numericAxisLabelView")},setTick:function(t,e){var i=e?e.getText(t):String(t);this._tick=t,this.setText(i)}}),N38=I1("ChartAxisView",w7,{init:function(t){this._super(t,"axisView"),this._titleView=new w38(t,this),this.addElement(this._titleView),this._ticksView=new R38(t,this),this.addElement(this._ticksView),this._titleSize=0,this._measuredTicks=null,this._focusView=null},titleRenderer:null,titleView:function(){return this._titleView},titleRenderer:function(){return this._titleRenderer?this._titleRenderer:S38.Default},isVertical:function(){return this.model().orientation()==A4.VERTICAL},isNear:function(){return this.model().location()==W4.NORMAL},showFocus:function(t,e,i){var n=this.model().styles().findSub("tick").findState("crossed");this._focusView||(this._focusView=new Y47(this._dom),this.addElement(this._focusView)),this._focusView.setVisible(!0),this._focusView.updateStyles(n),this._doUpdateFocus(t||this.model().getSeriesAt(0),this._focusView,e,i)},hideFocus:function(){this._focusView&&this._focusView.setVisible(!1)},isLayer:function(){return!0},_doClip:function(t){},_doMeasure:function(t,e,i){var n,s,r,o,a,h,l=this.model(),u=this.renderer();return l&&u?(s=(n=this.isVertical())?0:e,r=n?i:0,this._titleSize=0,(a=l.title())&&i0(a.caption())&&((h=this.titleView()).setModel(a),h.setRenderer(this.titleRenderer()),o=h.measure(t,e,i),this.isVertical()?this._titleSize=s=o.width:this._titleSize=r=o.height),o=u.measure(this,e,i),n?s+=o.width:r+=o.height,{width:s,height:r}):{width:30,height:30}},_doUpdateElements:function(){var t=this.titleView();t.setVisible(0<this._titleSize),t.visible()&&(this.isVertical()?this.isNear()?t.setBoundsI(0,0,this._titleSize,this.height()):t.setBoundsI(this.width()-this._titleSize,0,this._titleSize,this.height()):t.setBoundsI(0,this.height()-this._titleSize,this.width(),this._titleSize))},_doUpdateFocus:function(t,e,i,n){var s;t&&e&&(s=this.renderer())&&s.locateFocusView(this,e,this.clientRect(),i,n)},_doDraw:function(t){this._super(t)}}),O57=I1("ChartAxisPanel",w7,{init:function(t,e){this._super(t,e),this._axisViews=[]},setAxes:function(t){var e,i,n,s;if(this.clear(),(this._axisCount=0)<(i=t?t.length:0))for(e=0;e<i;e++)(n=t[e])&&n.visible()&&(this._axisViews.length<=this._axisCount&&this._axisViews.push(new N38(this._dom)),(s=this._axisViews[this._axisCount]).setModel(t[e]),this.addElement(s),this._axisCount++)},axisCount:function(){return this._axisCount},getAxisView:function(t){if(t<0||t>=this._axisCount)throw"Invalid axis index: "+t;return this._axisViews[t]},findAxisView:function(t){var e,i;for(e=0,i=this._axisCount;e<i;e++)if(this._axisViews[e].model()===t)return this._axisViews[e];return null},isLayer:function(){return!0},_doClip:function(t){}}),d17=I1("OrthogonalAxisPanel",O57,{init:function(t,e,i){this._super(t,e),this._orientation=i||A4.HORIZONTAL,this._axisSizes=[]},orientation:function(){return this._orientation},isVertical:function(){return this.orientation()==A4.VERTICAL},_doMeasure:function(t,e,i){var n,s,r,o,a,h,l,u,d={width:e,height:i},c=this.isVertical();if(c&&(d.width=0),c||(d.height=0),this._axisSizes=[],0<(s=this.axisCount()))for(n=0;n<s;n++)o=(r=this.getAxisView(n)).model(),a=t47.Default.getAxisRenderer(o),r.setRenderer(a),h=r.measure(t,e,i),c?(l=h.width,this._axisSizes.push(l),d.width+=l):(u=h.height,this._axisSizes.push(u),d.height+=u);return d},_doUpdateElements:function(){var t,e,i,n,s,r,o=this.axisCount();if(this.isVertical())for(t=this.height(),i=e=0;i<o;i++)(n=this.getAxisView(i)).setBounds(e,0,this._axisSizes[i],t),n.model().setSize&&n.model().setSize(t),e+=this._axisSizes[i];else for(s=this.width(),i=r=0;i<o;i++)(n=this.getAxisView(i)).setBounds(0,r,s,this._axisSizes[i]),r+=this._axisSizes[i];for(i=0;i<o;i++)(n=this.getAxisView(i)).updateElements()},_doDraw:function(t){}}),P38=I1("PolarAxisPanel",O57,{init:function(t,e,i){this._super(t,"polarAxisPanel")},_doUpdateElements:function(){var t,e,i,n,s,r,o,a=this._parent,h=this.width(),l=this.height(),u=a.polarSize();for(s=0,r=this.axisCount();s<r;s++)(o=this.getAxisView(s)).visible()&&(t=t47.Default.getAxisRenderer(o.model()),o.setRenderer(t),o.model()instanceof U5?o.setBounds(0,0,h,l):(e=h/2,n=(i=l/2)*u,o.setBounds(e-100,i-n,100,n)),o.updateElements())}}),Z38=I1("ChartLegendItemView",w7,{init:function(t){this._super(t,"legendItemView"),this.addElement(this._markerView=new i38(t))},setMarkerRenderer:function(t){this._markerView.setRenderer(t)},_doMeasure:function(t,e,i){var n,s,r,o,a=this.model(),h=this.renderer();return a&&h?(n=a.owner(),a.styles(),this._markerView.setModel(a),r=(s=this._markerView.measure(t,n.markerWidth(),n.markerHeight())).width,o=s.height,h&&((s=h.measure(this,e,i)).width+=5,s.height=Math.max(o,s.height)),s.marker={width:r,height:o},s):{width:e,height:i,markerWidth:0}},_doUpdateElements:function(t){var e=t.width,i=t.height;this._markerView.setBounds(0,(this.height()-i)/2,e,i)},_doDraw:function(t){var e,i,n=this.model(),s=this.renderer();n&&s&&(this.model().styles(),e=this._markerView.width()+5,i=new g1(e,0,this.width()-e,this.height()),s.render(this,t,i,Text))}}),i38=I1("ChartLegendMarkerView",w7,{init:function(t){this._super(t,"legendMarkerView")},_doMeasure:function(t,e,i){var n=this.model(),s=this.renderer();return n&&s?(n.styles(),s.measure(this,e,i)):{width:e,height:i}},_doDraw:function(t){var e,i=this.model(),n=this.renderer();i&&n&&(i.styles(),e=this.clientRect(),n.render(this,t,e))}}),V38=I1("ChartLegendView",w7,{init:function(t){this._super(t,"legendView"),this._itemRenderer=null,this._itemViews=[],this._itemElements=[],this._itemBounds=[],this._markerWidth=0},itemRenderer:function(){return this._itemRenderer?this._itemRenderer:this.defaultItemRenderer()},setItemRenderer:function(t){t!==this._itemRenderer&&(this._itemRenderer=t,this.invalidate())},defaultRenderer:function(){return b68.Default},defaultItemRenderer:function(){return R57.Default},_doMeasure:function(t,e,i){t=this.grid();for(var n,s,r,o,a,h,l,u,d,c,_,f=this.model(),g=f.styles(),m=f.items(),p=m?m.length:0;this._itemElements.length>p;)r=this.removeElement(this._itemElements.pop()),this._itemViews.push(r);for(;this._itemElements.length<p;)r=0<this._itemViews.length?this._itemViews.pop():new Z38(this._dom),this._itemElements.push(r),this.addElement(r),this._itemBounds.push(new g1);if(this._markerWidth=0,(this._markerHeight=0)<p){for(n=0;n<p;n++)s=m[n],(r=this._itemElements[n]).setModel(s),r.setRenderer(R57.Default),r.setMarkerRenderer(A68.Default),a=r.measure(t,e,i),this._markerWidth=Math.max(this._markerWidth,a.marker.width),this._markerHeight=Math.max(this._markerHeight,a.marker.height),(o=this._itemBounds[n]).width=a.width,o.height=a.height;if(h=g.borderWidth(),l=g.paddingLeft()+h,u=g.paddingTop()+h,d=0,c=this._markerHeight,_=f.itemGap(),f.direction()==y17.VERTICAL){for(n=0;n<p;n++)(o=this._itemBounds[n]).x=l,o.y=u,o.width+=this._markerWidth,d=Math.max(d,o.width),c+=o.height,u+=o.height+_;for(c+=_*(p-1),n=0;n<p;n++)this._itemBounds[n].width=d}else{for(n=0;n<p;n++)(o=this._itemBounds[n]).x=l,o.y=u,o.width+=this._markerWidth,d+=o.width,c=Math.max(c,o.height),l+=o.width+_;for(d+=_*(p-1),n=0;n<p;n++)this._itemBounds[n].height=c}return{width:d+g.paddingHorz()+2*g.borderWidth(),height:c+g.paddingVert()+2*g.borderWidth()}}return{width:200,height:13+g.paddingVert()}},_doUpdateElements:function(){var t,e,i;for(t=0,e=this._itemElements.length;t<e;t++)(i=this._itemElements[t]).setRect(this._itemBounds[t]),i.updateElements({width:this._markerWidth,height:this._markerHeight})}}),t47=I1("GridChartDelegate",null,{init:function(){this._super(),this._axisRenderers={},this._axisIndicatorRenderers={},this._seriesRenderers={},this._seriesItemRenderers={},this._polarGridRenderer=null,this._gridRenderer=null},getAxisRenderer:function(t){var e=t.constructor,i=this._axisRenderers[e.prototype.$name];return i||(i=t instanceof k5?new B38:t instanceof U5?new T38:new v38)&&(this._axisRenderers[e.prototype.$name]=i),i},getAxisIndicatorRenderer:function(t){var e=t.constructor,i=this._axisIndicatorRenderers[e.prototype.$name];return i||(t instanceof e57?i=new a38:t instanceof o57&&(i=new q38),i&&(this._axisIndicatorRenderers[e.prototype.$name]=i)),i},getSeriesRenderer:function(t){var e=t.constructor,i=this._seriesRenderers[e.prototype.$name];return i||(t instanceof s6?i=new f38:t instanceof n6?i=new U57:t instanceof S9?i=new h38:t instanceof U47?i=new r38:t instanceof k17&&(i=new d57),i&&(this._seriesRenderers[e.prototype.$name]=i)),i},getSeriesItemRenderer:function(t){var e=t.constructor,i=this._seriesItemRenderers[e.prototype.$name];return i||(t instanceof s6?i=new u38:t instanceof n6?i=new s38:t instanceof S9?i=new X38:t instanceof k17&&(i=new g38),i&&(this._seriesItemRenderers[e.prototype.$name]=i)),i},getGridRenderer:function(t){return t.isPolar()?null:this._gridRenderer||(this._gridRenderer=new j57)}},null,function(t){t.Default=new t}),f6=I1("ChartObjectRenderer",null,{init:function(t){this._super(),this._initProps(t)},measure:function(t,e,i){return{width:e,height:i}},render:function(t,e,i){}}),j57=I1("ChartGridRenderer",f6,{init:function(t){this._super(t)},render:function(t,e,i){t.isFront()?this.renderFront(t,e,i):this.renderBack(t,e,i)},renderBack:function(t,e,i){var n,s,r,o,a,h,l,u,d,c,_,f,g,m=t.sources(),p=i.width,w=i.height;for(l=0;l<m.length;l++)if((n=m[l]).isValueAxis()&&(s=n.grid()).visible()&&(r=s.styles(),1<(o=n.getTickNumber()+1)))for(a=n.reversed(),h=n.orientation()==A4.VERTICAL,_=a?(f=i.y,i.right()):(f=i.bottom(),i.x),u=1;u<o;u++)!n.isContinuous()||n.calcedBaseValue()!=n.measuredMinimum()&&n.getTick(u)==n.calcedBaseValue()||(g=r.line())&&(h?(c=f-(a?-1:1)*B1(n.getGridPosition(u)*w),e.drawLineI(g,i.x,c,i.right(),c)):(d=_+(a?-1:1)*B1(n.getGridPosition(u)*p),e.drawLineI(g,d,i.y,d,i.bottom())))},renderFront:function(t,e,i){var n,s,r,o,a,h,l,u,d,c,_,f=t.sources(),g=i.bottom(),m=i.x;for(n=0;n<f.length;n++)if((r=f[n])instanceof k5&&(_=r.frontGrid()).visible()&&((l=_.baseStyles().line())&&(u=r.orientation()==A4.VERTICAL,o=r.getTickNumber(),d=!1,(c=r.calcedBaseValue())!=r.measuredMinimum()&&1<o))){for(s=1;s<o;s++)if(r.getTick(s)==c){u?(h=g-B1(r.getGridPosition(s)*i.height),e.drawLineI(l,i.x,h,i.right(),h)):(a=m+B1(r.getGridPosition(s)*i.width),e.drawLineI(l,a,i.y,a,i.bottom())),d=!0;break}d||(u?(h=g-B1(r.getPositionOf(c)*i.height),e.drawLineI(l,i.x,h,i.right(),h)):(a=m+B1(r.getPositionOf(c)*i.width),e.drawLineI(l,a,i.y,a,i.bottom())))}}}),R47=I1("ChartAxisRenderer",f6,{init:function(t){this._super(t)},createTickView:function(t){return new Y47(t)},measure:function(t,e,i){var n,s,r={width:e,height:i},o=t.model(),a=t._ticksView;return t.container(),t._measuredTicks=o.getTickList(),a._prepareTicks(),sz=this._doMeasureTicksView(o,a,e,i),o.orientation()===A4.HORIZONTAL?(r.height=0,o.location(),W4.NORMAL,r.height+=0,s=sz.height,r.height+=6+s):(n=sz.width,n+=0,o.location(),W4.NORMAL,n+=0,n+=6,r.width=n),r},locateFocusView:function(t,e,i,n,s){e&&e.setBounds(0,0,100,20)},_doMeasureTicksView:function(t,e,i){},_doUpdateTicksView:function(t){}}),S38=I1("ChartAxisTitleRenderer",f6,{init:function(t){this._super(t)},measure:function(t,e,i){var n={width:e,height:i},s=t.model(),r=s.styles(),o=s.caption()?r.fontSize()+2:0;return t.orientation()===A4.VERTICAL?(o+=r.spaceHorz(),n.width=o):(o+=r.spaceVert(),n.height=o),n},render:function(t,e,i){var n,s=t.model(),r=s.styles(),o=r.font(),a=r.background(),h=s.caption(),l=i.clone();a&&e.drawRectI(a,null,l),r.deflateSpaces(l),t.orientation()==A4.VERTICAL?(n=t.location()==W4.OPPOSITE?Math.PI/2:3*Math.PI/2,e.drawTextRectA(o,r.color(),h,l,n)):e.drawTextRect(o,r.color(),h,l,r.textAlignment(),r.lineAlignment())}},null,function(t){t.Default=new t}),k57=I1("AxisIndicatorRenderer",f6,{init:function(){this._super()},measure:function(t,e,i){},render:function(t,e,i){var n=t.axisView().model();n.getPositionOf?this._renderContinuous(t,n,e,i):n instanceof T6&&this._renderCategorized(t,n,e,i)},_renderContinuous:function(t,e,i,n){},_renderCategorized:function(t,e,i,n){}}),a38=I1("AxisIndicatorLineRenderer",k57,{init:function(){this._super()},_renderContinuous:function(t,e,i,n){var s=t.model(),r=s.getValue(e);if(!isNaN(r)){var o,a,h,l=t.textView(),u=s.label(),d=u.offsetX(),c=u.offsetY(),_=s.styles().line(),f=u.getText();if(l.setVisible(f),l.visible()&&(l.setText(f),l.setStyles(u.styles()),h=l.measureI(1e5,1e5)),e.isVertical()){if(a=n.bottom()-(n.y+e.getPositionOf(r)*n.height)-1,_&&i.drawLineI(_,n.x,a,n.right(),a),l.visible()){switch(u.position()){case s2.FAR:o=n.right()-h.width-d;break;case s2.CENTER:o=n.x+(n.width-h.width)/2+d;break;case s2.NEAR:case s2.DEFAULT:default:o=n.x+d}switch(u.verticalAlign()){case g4.BOTTOM:a+=c;break;case g4.MIDDLE:a-=h.height/2+c;break;case g4.TOP:case g4.DEFAULT:default:a-=h.height+c}l.setBoundsI(o,a,h.width,h.height)}}else if(o=n.x+(n.x+e.getPositionOf(r)*n.width),_&&i.drawLineI(_,o,n.y,o,n.bottom()),l.visible()){switch(u.position()){case s2.CENTER:a=n.y+(n.height-h.height)/2-c;break;case s2.FAR:a=n.y+c;break;case s2.NEAR:case s2.DEFAULT:default:a=n.bottom()-h.height-1-c}switch(u.horizontalAlign()){case H7.LEFT:o-=h.width+d;break;case H7.CENTER:o-=h.width/2-d;break;case H7.RIGHT:case H7.DEFAULT:default:o+=d}l.setBoundsI(o,a,h.width,h.height)}}},_renderCategorized:function(t,e,i,n){}}),q38=I1("AxisIndicatorBandRenderer",k57,{init:function(t){this._super(t)},_renderContinuous:function(t,e,i,n){var s,r,o,a,h,l,u,d=t.textView(),c=t.model(),_=c.label(),f=_.offsetX(),g=_.offsetY(),m=c.styles(),p=c.getEndValue(),w=c.getStartValue(),v=n.height,C=n.width,I=(c.getValue(),_.getText()),R=m.background();if(d.setVisible(I),d.visible()&&(d.setText(I),d.setStyles(_.styles()),sz=d.measureI(1e5,1e5)),e.isVertical()){if(r=(s=n.bottom())-e.getPositionOf(Math.min(w,p))*v,o=s-e.getPositionOf(Math.max(w,p))*v,R&&i.drawBounds(R,null,n.x,r,C,o-r),(u=m.borderTop())&&i.drawHLineI(u,Y1(o),n.x,n.right()),(u=m.borderBottom())&&i.drawHLineI(u,Y1(r),n.x,n.right()),d.visible()){switch(_.position()){case s2.FAR:h=n.right()-sz.width-f;break;case s2.CENTER:h=n.x+(n.width-sz.width)/2+f;break;case s2.NEAR:case s2.DEFAULT:default:h=n.x+f}switch(_.verticalAlign()){case g4.BOTTOM:r-=sz.height+g;break;case g4.TOP:r=o+g;break;case g4.DEFAULT:case g4.MIDDLE:r=o+(r-o-sz.height)/2-g}d.setBoundsI(h,r,sz.width,sz.height)}}else if(h=(a=n.x)+e.getPositionOf(Math.min(w,p))*C,l=a+e.getPositionOf(Math.max(w,p))*C,R&&i.drawBounds(R,null,h,n.y,l-h,v),(u=m.borderLeft())&&i.drawVLineI(u,Y1(h),n.y,n.bottom()),(u=m.borderRight())&&i.drawVLineI(u,Y1(l),n.y,n.bottom()),d.visible()){switch(_.position()){case s2.FAR:r=n.y+g;break;case s2.CENTER:r=n.y+(n.height-sz.height)/2+g;break;case s2.NEAR:case s2.DEFAULT:default:r=n.bottom()-sz.height-g}switch(_.horizontalAlign()){case H7.LEFT:h+=f;break;case H7.RIGHT:h=l-sz.width-f;break;case H7.DEFAULT:case H7.CENTER:h+=(l-h-sz.width)/2+f}d.setBoundsI(h,r,sz.width,sz.height)}},_renderCategorized:function(t,e,i,n){}}),v38=I1("CategorizedAxisRenderer",R47,{init:function(t){this._super(t)},render:function(t,e,i){var n,s,r,o,a,h,l,u,d,c,_=t.model(),f=(_.reversed(),_.styles()),g=_.tickStyles(),m=_.tickLength(),p=t._measuredTicks,w=(Math.max(1,_.labelInterval()),t._ticksView),v=p?p.length:0;if(0<v){if(l=i.width,u=i.height,d=f.line(),c=g.line(),g.font(),_.orientation()===A4.HORIZONTAL)if(_.location()===W4.BETWEEN);else if(_.location()===W4.OPPOSITE){if(s=i.bottom(),d&&e.drawLineI(d,i.x,s,i.right(),s),c)for(e.drawLineI(c,i.x,s,i.x,s-m),o=0;o<v;o++)n=i.x+B1(_.getTickPosition(o+1)*l),e.drawLineI(c,n,s,n,s-m);s-=m+1,w.setBounds(i.x,s,i.width,i.height-s)}else{if(s=i.y,d&&e.drawLineI(d,i.x,s,i.right(),s),c)for(r=s+m,n=i.x+B1(_.getTickPosition(0)*l),e.drawLineI(c,n,s,n,r),o=0;o<v;o++)(n=i.x+B1(_.getTickPosition(o+1)*l))>=i.x&&n<=i.right()&&e.drawLineI(c,n,s,n,r);s+=m+1,w.setBounds(i.x,s,i.width,i.height-s)}else if(_.location()===W4.OPPOSITE){if(a=i.x,h=i.bottom(),d&&e.drawLineI(d,a,i.y,a,h+1),c)for(e.drawLineI(c,a,i.y,a+m,i.y),o=0;o<v;o++)s=i.y+B1((_.getDisplayPosition(o)+_.getDisplayWidth(o))*u),e.drawLineI(c,a,s,a+m,s);l=m+1,w.setBounds(i.x+l,i.y,i.width-l,i.height)}else{if(a=i.right(),h=i.bottom(),d&&e.drawLineI(d,i.right(),i.y,i.right(),h+1),n=i.right(),c)for(e.drawLineI(c,a,i.y,a-m,i.y),o=0;o<v;o++)(s=i.y+B1((_.getDisplayPosition(o)+_.getDisplayWidth(o))*u))>=i.y&&s<=i.bottom()&&e.drawLineI(c,n,s,n-m,s);w.setBounds(0,0,i.width-m-1,i.height)}this._doUpdateTicksView(_,w)}},_doMeasureTicksView:function(t,e,i,n){var s,r,o,a,h,l={width:i,height:n},u=e._tickViews;if(u&&0<(s=u.length))if(t.orientation()===A4.HORIZONTAL)if(t.location()===W4.OPPOSITE);else{for(r=h=0;r<s;r++)o=u[r],h=Math.max(h,o._measuredHeight);l.height=h}else if(t.location()===W4.OPPOSITE);else{for(r=a=0;r<s;r++)o=u[r],a=Math.max(a,o._measuredWidth);l.width=a}return l},_doUpdateTicksView:function(t,e){var i,n,s,r,o=e.width(),a=e.height(),h=e._tickViews,l=e.tickCount(),u=Math.max(1,t.labelInterval()),d=t.reversed();if(t.orientation()===A4.HORIZONTAL)if(t.location()===W4.OPPOSITE);else for(i=0;i<l;i+=u)n=h[i],s=(t.getDisplayPosition(i)+t.getDisplayWidth(i)/2)*o,n.setBounds(s-n._measuredWidth/2,0,n._measuredWidth,n._measuredHeight);else if(t.location()===W4.OPPOSITE)for(i=0;i<l;i+=u)n=h[i],r=t.getDisplayPosition(i)+t.getDisplayWidth(i)/2,d||(r=1-r),r*=a,n.setBounds(0,r-n._measuredHeight/2,n._measuredWidth,n._measuredHeight);else for(i=0;i<l;i+=u)n=h[i],r=t.getDisplayPosition(i)+t.getDisplayWidth(i)/2,d||(r=1-r),r*=a,n.setBounds(o-n._measuredWidth,r-n._measuredHeight/2,n._measuredWidth,n._measuredHeight)},locateFocusView:function(t,e,i,n,s){if(e){var r,o,a,h=t.model(),l=h.styles().findSub("tick");e.updateStyles(l,h,null,"crossed"),a=e.$_styles.tickLength(),h.orientation()===A4.HORIZONTAL?h.location()===W4.OPPOSITE||(r=String(h.getCategoryAt(i.width,n)),e.setText(r),o=e.measure(i.width,i.height),e.setBounds(n-o.width/2,i.y+a+1,o.width,o.height)):(h.location(),W4.OPPOSITE)}}}),B38=I1("LinearAxisRenderer",R47,{init:function(t){this._super(t)},render:function(t,e,i){var n,s,r,o,a,h,l,u=i.height,d=i.width,c=t.model(),_=c.isValid(),f=c.styles(),g=c.tickStyles(),m=g.line(),p=(g.font(),c.tickLength()),w=c.getTickList(),v=t._ticksView,C=w?w.length:0;if(0<C){if(c.orientation()===A4.VERTICAL){if(c.location()===W4.OPPOSITE){if(h=i.bottom(),a=i.x,(o=f.line())&&e.drawLineI(o,a,h,a,i.y),_){if(m)for(n=0;n<C;n++)l=w[n],r=h-B1(c.getPositionOf(l)*u),e.drawLineI(m,a,r,a+p,r);d=p+1,v.setBounds(a+d,i.y,i.width-d,i.height)}}else if(h=i.bottom(),a=i.right(),(o=f.line())&&e.drawLineI(o,a,h,a,i.y),_){if(m)for(n=0;n<C;n++)l=w[n],r=h-B1(c.getPositionOf(l)*u),e.drawLineI(m,a,r,a-p,r);v.setBounds(0,r,i.width-p-1,i.height)}}else if(c.location()===W4.OPPOSITE);else if(c.reversed()){if(a=i.right(),h=i.y,(o=f.line())&&e.drawLineI(o,i.x,h,a,h),_){if(m)for(n=0;n<C;n++)l=w[n],s=a-B1(c.getPositionOf(l)*d),e.drawLineI(m,s,h,s,h+p);v.setBounds(i.x,p+1,i.width,i.height-p-1)}}else if(a=i.x,h=i.y,(o=f.line())&&e.drawLineI(o,a,h,i.right(),h),_){if(m)for(n=0;n<C;n++)l=w[n],s=a+B1(c.getPositionOf(l)*d),e.drawLineI(m,s,h,s,h+p);v.setBounds(i.x,p+1,i.width,i.height-p-1)}this._doUpdateTicksView(c,v)}},createTickView:function(t){return new K38(t)},_doMeasureTicksView:function(t,e,i,n){var s,r,o,a,h,l={width:i,height:n},u=e._tickViews;if(u&&0<(s=u.length))if(t.orientation()===A4.VERTICAL){for(r=a=0;r<s;r++)o=u[r],a=Math.max(a,o._measuredWidth);l.width=a}else{for(r=h=0;r<s;r++)o=u[r],h=Math.max(h,o._measuredHeight);l.height=h}return l},_doUpdateTicksView:function(t,e){if(t.isValid()){var i,n,s,r,o=e.bottom(),a=e.width(),h=e.height(),l=e._tickViews,u=e.tickCount(),d=Math.max(1,t.labelInterval());if(t.orientation()===A4.VERTICAL)if(t.location()===W4.OPPOSITE)for(i=0;i<u;i+=d)n=l[i],r=o-t.getPositionOf(n._tick)*h,n.setBounds(0,r-n._measuredHeight/2,n._measuredWidth,n._measuredHeight);else for(i=0;i<u;i+=d)n=l[i],r=o-t.getPositionOf(n._tick)*h,n.setBounds(a-n._measuredWidth,r-n._measuredHeight/2,n._measuredWidth,n._measuredHeight);else if(t.location()===W4.OPPOSITE);else if(t.reversed())for(i=0;i<u;i+=d)n=l[i],s=a-t.getPositionOf(n._tick)*a,n.setBounds(s-n._measuredWidth/2,0,n._measuredWidth,n._measuredHeight);else for(i=0;i<u;i+=d)n=l[i],s=t.getPositionOf(n._tick)*a,n.setBounds(s-n._measuredWidth/2,0,n._measuredWidth,n._measuredHeight)}},locateFocusView:function(t,e,i,n,s){if(e){var r,o,a,h,l,u=t.model(),d=u.styles().findSub("tick");e.updateStyles(d,u,null,"crossed"),h=e.$_styles.tickLength(),l=e.$_styles.numberFormatter(),u.orientation()===A4.VERTICAL?(r=u.getValueAt(1-s/i.height),o=l?l.format(r):r,e.setText(o),a=e.measure(i.width,i.height),u.location()===W4.OPPOSITE?e.setBounds(i.x+h+1,s-a.height/2,a.width,a.height):e.setBounds(i.right()-h-1-a.width,s-a.height/2,a.width,a.height)):(u.location(),W4.OPPOSITE)}}}),T38=I1("PolarAxisRenderer",R47,{init:function(t){this._super(t)},measure:function(t,e,i){return{width:e,height:i}},render:function(t,e,i){var n,s,r,o,a,h,l,u,d,c,_,f,g=t.model(),m=g.styles(),p=t.chartView().polarSize();for(h=i.x+i.width/2,l=i.y+i.height/2,r=Math.min(i.width,i.height)*p,s=g.getTickPoints(i,p),(n=m.border())&&(g._curved?e.drawCircle(null,n,h,l,r/2):e.drawPolygon(null,n,s)),r=(r+m.offset())*p/r,s=g.getTickPoints(i,r),ticks=g.getTickList(),a=s.length,o=0;o<a;o++)u=g.getTick(o),d=s[o].x,c=s[o].y,_=T2.CENTER,f=N7.MIDDLE,Math.abs(d-h)<=4?f=c<l?N7.BOTTOM:N7.TOP:_=d<h?T2.RIGHT:T2.LEFT,e.drawText(m.font(),m.textFill(),u,d,c,_,f)}}),w47=I1("ChartSeriesRenderer",null,{init:function(t){this._super(t)},canStacked:function(){return!1},measure:function(t,e,i){return this._doMeasure(t,e,i)},layoutItems:function(t){if(this._checkAxes(t)){var e,i,n,s,r=[];for(e=0,i=t.itemCount();e<i;e++)(n=t.getItem(e))&&r.push(n);s=new g1(0,0,t.width(),t.height()),this._doLayoutItems(t,r,s)}},render:function(t,e,i){this._doRender(t,e,i)},renderItemSeparators:function(t,e,i){this._doRenderItemSeparators(t,e,i)},renderText:function(t,e,i){this.animating(t)||this._doRenderText(t,e,i)},layoutLabels:function(t,e,i){if(this._checkAxes(t)&&e)if(this.animating(t))for(var n=e.length;n--;)e[n].setVisible(!1);else this._doLayoutLabels(t,e,i)},drawLegend:function(t,e,i){return!1},_checkAxes:function(t){var e=t.model();return e&&e.xAxisObj()&&e.yAxisObj()},_doMeasure:function(t,e,i){return{width:e,height:i}},_doRender:function(t,e,i){},_doRenderItemSeparators:function(t,e,i){},_doRenderText:function(t,e,i){},_doLayoutLabels:function(t,e,i){},_doLayoutItems:function(t,e,i){},getInterpolation:function(t,e){var i=t.chartView().animations().getInterpolation(t.model(),e);return i?i.rate():1},animating:function(t){return!1}}),Y17=I1("ChartSeriesItemRenderer",null,{init:function(t){this._super(t)},seriesView:function(t){do{if(t instanceof l6)return t;t=t.parent()}while(t);return null},measure:function(t,e,i){return this._doMaesure(model,e,i)},render:function(t,e,i){this._doRender(t,e,i)},getInterpolation:function(t,e){var i=t.chartView().animations().getInterpolation(this.seriesView(t).model(),e);return i?i.rate():1},isAnimating:function(t){return t.chartView().animations().isAnimating(this.seriesView(t).model())}}),U57=I1("ColumnSeriesRenderer",w47,{init:function(t){this._super(t)},canStacked:function(){return!0},_doRender:function(t,e,i){},_doRenderItemSeparators:function(t,e,i){},_getDefaultAlign:function(t){return t==s2.CENTER?g4.MIDDLE:g4.TOP},_layoutLabel:function(t,e,i,n,s,r,o){return t.layoutVert2(e,i,n,s,r,o,this._getDefaultAlign)},_labelAxis:function(t){return t.yAxisObj()},_doLayoutLabels:function(t,e,i){var n=t.itemCount();if(!(n<1)){var s,r,o,a,h,l,u,d=t.model(),c=d.label(),_=this._labelAxis(d).calcedBaseValue(),f=d.valueField(),g=Y57.Default;if(c.visible())for(s=0;s<n;s++)o=(r=t.getItem(s)).model(),(a=e[s]).setVisible(null!=o),a.visible()&&(a.setStyles(o.labelStyles()),a.$_model=c,l=(h=d.getValue(o.getProp(f)))<_?s2.NEAR:s2.FAR,u=this._layoutLabel(g,d,i,r,a,String(h),l),a.setRect(u));else for(s=0;s<n;s++)e[s].setVisible(!1)}},_doLayoutItems:function(t,e,i){var n=t.itemCount();if(!(n<1)){var s,r,o,a,h,l,u,d,c,_,f,g,m,p,w,v,C,I,R,y,x,E=t.model(),b=E.xAxisObj(),S=E.yAxisObj(),T=S.isValid(),D=b.visibleCount?b.visibleCount():0,k=E.valueField(),A=E.group(),$=A&&A.stackMode(),V=E.clusterInfo,L=i.height,B=i.width,O=S.calcedBaseValue(),N=i.bottom(),P=S.getPositionOf(O),M=E.locationRate(),F=E.itemWidth();for(R=0;R<n;R++)if(x=(y=e[R]).model(),y.setVisible(x&&x.visible()&&x._category&&x._category.index<D),y.visible()){if(o=E.getValue(x.getProp(k)),c=O,h=b.getDisplayWidth(x),_=b.getDisplayPosition(x)+h*(V?V.position:0),l=h*(V?V.width:1),null==A);else if($==N4.NONE||$==N4.OVERLAPPED);else if($==N4.NORMAL){for(C=o<O,s=I=0;s<E.groupIndex();s++)(r=A.getItem(s))instanceof n6&&0<=((a=r.getItem(R).getProp(r.valueField()))-O)*(o-O)&&(c+=a,I++);o+=c,t.setItemIndex(y,R,A,I,C)}else{for(w=0,s=0;s<A.count();s++)(r=A.getItem(s))instanceof n6&&(a=r.getItem(R).getProp(r.valueField()),w+=Math.abs(a));for(v=(S.measuredMaximum()-O)/(O<=o?w:0),C=o<O,s=I=0;s<E.groupIndex();s++)(r=A.getItem(s))instanceof n6&&0<=((a=r.getItem(R).getProp(r.valueField()))-O)*(o-O)&&(c+=a,I++);o=(o+c)*v,c*=v,t.setItemIndex(y,R,A,I,C)}f=(d=i.x+1)+(f=_+=l/2)*B,_=d+(_-=(l*=1*F)/2)*B,l*=B,p=T?(u=S.getPositionOf(c),g=S.getPositionOf(o),y._reversed=O<=o?(p=P,O<c&&(p=P+(u-P)*M),g=m=N-g*L,m=(p=N-p*L)-(p-m)*M,!1):(m=P,c<O&&(m=P+(u-P)*M),g=p=N-g*L,p=(m=N-m*L+1)+(p-m)*M,!0),_=B1(_-=0),g=B1(g),f=B1(f),m=B1(m),p=B1(p),Math.abs(p-m)+1):(m=N,0),l=B1(l),y.setDataPoint(f,g),y.setBounds(_,m,l,p)}}}}),s38=I1("ColumnSeriesItemRenderer",Y17,{init:function(t){this._super(t)},_doRender:function(t,e,i){var n=t.model(),s=n.styles(),r=n.getProp("shape"),o=s.border(),a=s.background();if(a||o)switch(r){case"triangle":e.drawPolygonArray(a,o,[i.x,i.bottom()-1,i.x+i.width/2,i.y,i.right()-1,i.bottom()-1]);break;default:a&&e.drawRectI(a,null,i),o&&(t._reversed?e.drawLinesI(o,i.x,i.y,i.x,i.bottom()-1,i.right()-1,i.bottom()-1,i.right()-1,i.x):e.drawLinesI(o,i.x,i.bottom()-1,i.x,i.y,i.right()-1,i.y,i.right()-1,i.bottom()-1))}}}),f38=I1("BarSeriesRenderer",U57,{init:function(t){this._super(t)},_doRenderItemSeparators:function(t,e,i){},_getDefaultAlign:function(t){return t==s2.CENTER?H7.CENTER:H7.RIGHT},_layoutLabel:function(t,e,i,n,s,r,o){return t.layoutHorz2(e,i,n,s,r,o,this._getDefaultAlign)},_labelAxis:function(t){return t.xAxisObj()},_doLayoutItems:function(t,e,i){var n=t.itemCount();if(!(n<1)){var s,r,o,a,h,l,u,d,c,_,f,g,m,p,w,v,C,I,R,y=t.model(),x=y.yAxisObj(),E=x.visibleCount?x.visibleCount():0,b=x.reversed(),S=(x.isOppositeOf(y),y.xAxisObj()),T=S.isValid(),D=S.reversed(),k=(S.isOppositeOf(y),y.valueField()),A=y.group(),$=A&&A.stackMode(),V=y.clusterInfo,L=i.height,B=i.width,O=S.calcedBaseValue(),N=D?i.right():i.x,P=S.getPositionOf(O),M=O,F=y.itemWidth(),H=y.locationRate();for(C=0;C<n;C++)if(R=(I=e[C]).model(),I.setVisible(R&&R.visible()&&R._category&&R._category.index<E),I.visible()){if(g=y.getValue(R.getProp(k)),M=O,p=x.getDisplayWidth(R),l=x.getDisplayPosition(R)+p*(V?V.position:0),w=p*(V?V.width:1),null==A);else if($==N4.NONE||$==N4.OVERLAPPED);else if($==N4.NORMAL){for(s=g<O,_=r=0;_<y.groupIndex();_++)(f=A.getItem(_))instanceof s6&&0<=((m=f.getItem(C).getProp(f.valueField()))-O)*(g-O)&&(M+=m,r++);g+=M,t.setItemIndex(I,C,A,r,s)}else{for(d=0,_=0;_<A.count();_++)(f=A.getItem(_))instanceof s6&&(m=f.getItem(C).getProp(f.valueField()),d+=Math.abs(m));for(c=(S.measuredMaximum()-O)/(O<=g?d:0),s=g<O,_=r=0;_<y.groupIndex();_++)(f=A.getItem(_))instanceof s6&&0<=((m=f.getItem(C).getProp(f.valueField()))-O)*(g-O)&&(M+=m,r++);g=(g+M)*c,M*=c,t.setItemIndex(I,C,A,r,s)}u=l+=w/2,u=b?i.y+u*L:i.bottom()-u*L,w*=F,l=b?(l-=w/2,i.x+l*L):(l+=w/2,i.bottom()-l*L),w*=L,T?(v=S.getPositionOf(M),o=S.getPositionOf(g),I._reversed=O<=g?(a=P,O<M&&(a=P+(v-P)*H),h=a+(o-a)*H,!1):(h=P,M<O&&(h=P-(P-v)*H),a=h-(h-o)*H,!0),o=B1(o*B),a=B1(a*B),h=B1(h*B),l=B1(l),u=B1(u),w=B1(w),D?(o=N-o,a=N-a,h=N-h):(o+=N,a+=N,h+=N)):(a=N,h=0),g=Math.abs(h-a)+1,D?(I.setBounds(a-g+1,l,g,w),I.setDataPoint(o-g+1,u)):(I.setBounds(a,l,g,w),I.setDataPoint(o,u))}}}}),u38=I1("BarSeriesItemRenderer",Y17,{init:function(t){this._super(t)},_doRender:function(t,e,i){var n=t.model(),s=n.styles(),r=n.getProp("shape"),o=s.background(),a=s.border();if(o||a)switch(r){case"triangle":e.drawPolygonArray(o,a,[i.x,i.y,i.right()-1,i.y+i.height/2,i.x,i.bottom()-1]);break;default:o&&e.drawRectI(o,null,i),a&&(t._reversed?e.drawLinesI(a,i.right()-1,i.y,i.x,i.y,i.x,i.bottom()-1,i.right()-1,i.bottom()-1):e.drawLinesI(a,i.x,i.y,i.right()-1,i.y,i.right()-1,i.bottom()-1,i.x,i.bottom()-1))}}}),d57=I1("LineSeriesRenderer",w47,{init:function(t){this._super(t)},_doRender:function(t,e,i){var n=t.itemCount();if(1<n){var s,r,o,a,h,l=t.model(),u=l.styles().line();if(u)for(r=(s=l.lineType())==p6.STEPPED,o=0;o<n;){for(;o<n&&!(a=t.getItem(o)).visible();o++);for(pts=[];o<n&&(a=t.getItem(o)).visible();o++)pts.push(h={x:a.x()+a.width()/2,y:a.y()+a.height()/2}),r&&o<n-1&&(a=t.getItem(o+1)).visible()&&pts.push({x:a.x()+a.width()/2,y:h.y});1<pts.length&&(s==p6.CURVED?e.drawCurve(u,pts):e.drawLines(u,pts))}}},_getDefaultAlign:function(t){return t==s2.CENTER?g4.MIDDLE:g4.TOP},_doLayoutLabels:function(t,e,i){var n,s,r,o,a,h,l,u=t.model(),d=u.label(),c=d.styles(),_=u.valueField(),f=d.visible();for(lm=Y57.Default,n=0,s=t.itemCount();n<s;n++)o=(r=t.getItem(n)).model(),(a=e[n]).setVisible(null!=o&&f),a.visible()&&(a.$_model=d,a.setStyles(c),h=o.getProp(_),l=lm.layoutVert2(u,i,r,a,String(h),s2.FAR,this._getDefaultAlign),a.setRect(l))},_doLayoutItems:function(t,e,i){var n=t.itemCount();if(!(n<1)){var s,r,o,a,h,l,u,d,c,_=t.model(),f=_.xAxisObj(),g=_.yAxisObj(),m=f instanceof k5?g:f,p=g instanceof k5?g:f,w=_.labelField(),v=_.valueField(),C=m.visibleCount?m.visibleCount():0,I=i.height,R=i.width,y=i.bottom(),x=_.locationRate();for(a=0;a<n;a++)l=(h=e[a]).model(),h.setVisible(l&&l.visible()&&l._category&&l._category.index<C),h.visible()&&(c=d=(u=l.styles().shapeSize())?u.getDimension(9):9,o=_.getValue(l.getProp(v)),m==_.xAxisObj()?(s=m.getCategoryPosition?(m.getDisplayPosition(l)+m.getDisplayWidth(l)/2)*R:m.getPositionOf(l.getProp(w))*R,r=y-p.getPositionOf(o)*I*x):(s=p.getPositionOf(o)*R*x,m.getCategoryPosition?(r=(m.getDisplayPosition(l)+m.getDisplayWidth(l)/2)*I,r+=i.y):(r=m.getPositionOf(l.getProp(w))*I,r=i.bottom()-r)),h.setDataPoint(s,r),h.setBounds(s-d/2,r-c/2,1*d,1*c))}},drawLegend:function(t,e,i){var n=t.model().styles(),s=n.line(),r=n.shapeName(),o=k0.getShape(this,r);return e.drawHLineI(s,i.y+i.height/2,i.x,i.right()),i.x+=(i.width-7)/2,i.width=7,i.y+=(i.height-7)/2,i.height=7,o&&o.draw(e,i,n.shapeColor(),n.shapeBorder(),n.shapeRotate()),!0}}),g38=I1("LineSeriesItemRenderer",Y17,{init:function(t){this._super(t),this._ellipse=null,this._polygon=null},_doRender:function(t,e,i){var n,s,r,o;t.visible()&&(n=t.model()).visible()&&(s=n.styles(),(r=k0.getShape(this,s.shapeName()))&&(r.draw(e,i,s.shapeColor(),s.shapeBorder(),s.shapeRotate()),k0.getShape(this,s.shapeInnerName())&&(o=(1-s.shapeInnerSize())/2,i.inflate(-i.width*o,-i.height*o),r.draw(e,i,s.shapeInnerColor(),null,s.shapeInnerRotate()))))}}),r38=I1("AreaSeriesRenderer",d57,{init:function(t){this._super(t)},_doRender:function(t,e,i){var n,s,r,o,a,h,l,u,d,c,_,f,g,m,p,w=t.chartView(),v=t.itemCount();if(1<v)for(s=(n=t.model()).group(),r=n.styles(),h=l=0;h<v;){for(;h<v&&(itemView=t.getItem(h),!itemView.visible());h++);for(o=[];h<v&&(itemView=t.getItem(h),itemView.visible());h++)o.push({x:itemView._dataPoint.x,y:itemView._dataPoint.y});if(a=null,u=n.groupIndex(),s&&s.stackMode()!=N4.NONE&&0<u){for(_=s.getItem(u-1),(d=w.getSeriesView(_)).$_styles,c=d.itemCount();l<c&&(itemView=d.getItem(l),!itemView.visible());l++);for(a=[];l<c&&(itemView=d.getItem(l),itemView.visible());l++)a.push({x:itemView._dataPoint.x,y:itemView._dataPoint.y})}f=r.background(),g=r.line(),a&&0<a.length?_.lineType()===p6.CURVED?(f&&(_.lineType()===p6.CURVED?e.drawCurvedRange(f,null,o,a):e.drawCurvedStraightRange(f,null,o,a)),g&&e.drawCurve(g,o)):(f&&(_.lineType()===p6.CURVED?e.drawStraightCurvedRange(f,null,o,a):e.drawRange(f,null,o,a)),g&&e.drawLines(g,o)):o&&0<o.length&&(m={x:o[0].x,y:i.bottom()},p={x:o[o.length-1].x,y:i.bottom()},n.lineType()===p6.CURVED?(f&&e.drawCurvedRange(f,null,o,[m,p]),g&&e.drawCurve(g,o)):(f&&(o.unshift(m),o.push(p),e.drawPolygon(f,null,o),o.shift(),o.pop()),g&&e.drawLines(g,o)))}},_doRenderText:function(t,e,i){}}),h38=I1("PieSeriesRenderer",w47,{init:function(t){this._super(t)},_checkAxes:function(t){var e=t.model();return e&&e.xAxisObj()},_doRender:function(t,e,i){if(!this.animating(t)){var n,s,r,o,a,h,l,u,d=t.model(),c=d.label();if(d.tickLength(),c.visible()&&0<(n=t.itemCount()))for(i.x,i.width,s=0;s<n;s++)(r=t.getItem(s)).model(),o=d.labelOffset(),(a=Z1.GRAY)&&0<=o&&(h=r._dataPoint,l=r._dataPoint2,u=r._dataPoint3,e.drawQuadratic(a,h.x,h.y,l.x,l.y,u.x,u.y))}},_doRenderItemSeparators:function(t,e,i){},_doLayoutLabels:function(t,e,i){var n,s,r,o,a,h,l,u,d,c,_,f,g,m,p,w,v,C,I,R=t.model(),y=R.label(),x=R.xAxisObj(),E=R.labelField(),b=R.valueField(),S=R.slicedField(),T=R.startAngleRad(),D=(R.styles(),Math.min(i.width,i.height)*R.radius()*R.radiusRate()),k=D/2,A=i.x+(i.width-D)/2+i.width/2*R.offsetX()+k,$=i.y+(i.height-D)/2+i.height/2*R.offsetY()+k,V=t.itemCount(),L=R.tickLength();if(y.visible()){for(n=0;n<V;n++)s=(r=t.getItem(n)).model(),o=e[n],f=s.getProp(S,!1),o.setStyles(s.labelStyles()),o.setVisible(null!=s),m=R.slicedOffset(),p=R.labelOffset(),font=o._font,g=(D+2*p)/2,(h=s.getProp(E,null)||(x?x.getCategory(n):null))&&(h+=", "),h+=s.getProp(b),o.setLabel(r,h),a=o.measure(0,0),c=A,_=$,f&&(c=(l=I3.getArcPoint(A,$,m,m,s.startAngle,s.angle,T,!0)).x,_=l.y),l=I3.getArcPoint(c,_,k,k,s.startAngle,s.angle,T,!0),u=I3.getArcPoint(c,_,g,g,s.startAngle,s.angle,T,!0),r.setDataPoint(l.x,l.y,u.x,u.y),d=u.x,0<p?u.x>=A?(d+=L,r._x1=d):(d-=L,r._x1=d,d-=a.width):u.x>=A?r._x1=d:(r._x1=d,d-=a.width),o.setBoundsI(d,u.y-a.height/2,a.width,a.height);for(C=[],I=[],n=v=w=0;n<V;n++)(r=(o=e[n]).itemView())._dataPoint2.x<=A?(C.push(o),w++):(I.push(o),v++);0<w&&(1<w&&C.sort(this.sortLabels),t57.Default.arrange(t,i,C,w,g)),0<v&&(1<v&&I.sort(this.sortLabels),t57.Default.arrange(t,i,I,v,g))}},sortLabels:function(t,e){return t.y()-e.y()},_doLayoutItems:function(t,e,i){if(e&&!(e.length<1)){var n,s,r,o,a,h,l,u=t.model(),d=u.radius(),c=u.innerRadius(),_=(u.styles(),u.valueField()),f=u.slicedField(),g=t.itemCount(),m=0,p=u.startAngleRad(),w=u.totalAngleRad(),v=u.radiusRate(),C=Math.min(i.width,i.height)*u.radius()*v,I=i.x+(i.width-C)/2+i.width/2*u.offsetX(),R=i.y+(i.height-C)/2+i.height/2*u.offsetY(),y=(u.xAxisObj(),0*Math.PI/360),x=null,E=!1;if(!(w<=0)){for(a=0;a<g;a++)h=(l=e[a]).model(),m+=Number(h.getProp(_));for(a=0;a<g;a++)(h=(l=e[a]).model()).radius=d,h.innerRadius=c,n=h.getProp(f,!1),s=u.slicedOffset(),r=u.getValue(h.getProp(_))*w/m,h.startAngle=y,h.angle=r,n?this.animating(t)?isNaN(1)?l.setBounds(I,R,C,C):(o=I3.getArcPoint(I,R,1*s,1*s,h.startAngle,h.angle,p,!0),l.setBounds(o.x,o.y,C,C)):(o=I3.getArcPoint(I,R,s,s,h.startAngle,h.angle,p,!0),l.setBounds(o.x,o.y,C,C)):l.setBounds(I,R,C,C),y+=r,x&&(x.separator=!E&&!n),x=h,E=n;n=(h=(l=e[0]).model()).getProp(f,!1),x&&(x.separator=!E&&!n)}}}}),X38=I1("PieSeriesItemRenderer",Y17,{init:function(t){this._super(t)},containsPoint:function(t,e,i){if(t._dom)return!1;if(this.$_g){var n=this.$_g,s=t.clientRect(),r=t.series().startAngleRad(),o=t.model(),a=s.width/2,h=s.x+a,l=o.startAngle,u=o.angle;if(0<o.innerRadius){var d=a*o.innerRadius;n.drawArcSector2(U1.Null,null,h,h,d,d,a,a,l,u,r)}else n.drawArcSector(U1.Null,null,h,h,a,a,l,u,r);return n.containsPoint(e,i)}return!1},_doRender:function(t,e,i){this.$_g=e;var n,s,r,o,a,h=t.series(),l=t.model(),u=l.styles(),d=h.startAngleRad(),c=u.background(),_=u.border();(c||_)&&(n=i.width/2,s=i.x+n,r=1*l.startAngle,o=1*l.angle,0<l.innerRadius?(a=n*l.innerRadius,e.drawArcSector2(c,_,s,s,a,a,n,n,r,o,d)):e.drawArcSector(c,_,s,s,n,n,r,o,d))}}),Y57=I1("CartesianSeriesLabelLayout",null,{init:function(){this._super(),this._rect=new g1},layoutVert2:function(t,e,i,n,s,r,o,a,h){var l,u,d,c,_,f,g,m,p,w,v=n.$_model,C=i.height(),I=i.y(),R=I+C,y=this._rect;switch(a!==c2&&(I+=C*a,h!==c2?R+=C*h:R=I),u=i._dataPoint.x,n.setLabel(i,s),l=n.measure(0,0),c=y.width=l.width,_=y.height=l.height,f=v.position(),m=v.verticalAlign(),g=v.horizontalAlign(),f===s2.DEFAULT&&r&&(f=r!==c2&&r?r:s2.CENTER),m===g4.DEFAULT&&o&&(m=o(f)),p=v.offsetX(),w=v.offsetY(),f){case s2.FAR:d=I;break;case s2.NEAR:d=R;break;case s2.CENTER:default:d=I+i.height()/2}switch(m){case g4.TOP:d-=_+w;break;case g4.BOTTOM:d+=w;break;default:d-=_/2+w}switch(y.y=d,y.y<0||y.bottom()>e.height&&t.overflow()==c17.JUSTIFY&&(y.y=e.height-_),g){case H7.LEFT:u-=c+p;break;case H7.RIGHT:u+=p;break;default:u-=c/2+p}return y.x=u,y.x+=e.x,y.y+=e.y,y},layoutHorz2:function(t,e,i,n,s,r,o,a){var h,l,u,d,c,_,f,g,m,p,w,v,C=n.$_model,I=i.width(),R=this._rect;switch(n.$_styles,c=a?(d=i.x()+I,i.x()):(d=i.x(),i.x()+I),u=i._dataPoint.y,n.setLabel(i,s),h=n.measure(1e4,1e4),_=R.width=h.width,f=R.height=h.height,g=C.position(),p=C.verticalAlign(),m=C.horizontalAlign(),g==s2.DEFAULT&&(g=r!==c2&&r?r:s2.CENTER),m===H7.DEFAULT&&o&&(m=o(g)),w=C.offsetX()*(a?-1:1),v=C.offsetY(),g){case s2.FAR:l=c;break;case s2.NEAR:l=d;break;case s2.CENTER:default:l=Math.min(d,c)+I/2}switch(m){case H7.RIGHT:l+=w;break;case H7.LEFT:l-=_+w;break;default:l-=_/2+w}switch(R.x=l,R.x<0?t.overflow()==c17.JUSTIFY&&(R.x=Math.max(0,d)):(R.right(),e.width),p){case g4.TOP:u-=f+v;break;case g4.BOTTOM:u+=v;break;default:u-=f/2+v}return R.y=u,R.x+=e.x,R.y+=e.y,R}},null,function(t){t.Default=new t}),t57=I1("PieSeriesLabelArranger",null,{init:function(t){this._super(t)},arrange:function(t,e,i,n,s,r){if(!(n<=0)){var o,a,h=e.x+e.width/2,l=e.y+e.height/2,u=t.model().tickLength(),d=i[0],c=(d.x(),d.width(),d.y()+d.height()+2);for(o=1;o<n;o++){if((a=(d=i[o]).y())<c){var _=l-(c+d.height()/2),f=Math.asin(Math.max(-1,Math.min(1,_/s))),g=Math.cos(f)*s,m=c-a;d.setY(d.y()+m),d.x()<h?d.setX(h-g-d.width()-u):d.setX(h+g+u)}c=d.y()+d.height()+2,d.x(),d.width()}for(o=0;o<n;o++){var p=(d=i[o]).itemView();p._dataPoint3.y=d.y()+d.height()/2,r&&(p._dataPoint2.y=p._dataPoint3.y),d.x()<h?(p._dataPoint3.x=d.x()+d.width()+2,r&&(p._dataPoint2.x=p._dataPoint3.x+u)):(p._dataPoint3.x=d.x()-2,r&&(p._dataPoint2.x=p._dataPoint3.x-u))}}}},null,function(t){t.Default=new t}),R57=I1("ChartLegendItemRenderer",f6,{init:function(t){this._super(t)},measure:function(t,e,i){var n=t.model(),s=n.styles(),r=n.source(),o=s.font(),a=r.displayName();return{width:t.container().measureText(o,a)+2,height:o.size+1}},render:function(t,e,i){var n=new g1(i.x,i.y,i.width,i.height),s=t.model(),r=s.styles(),o=s.source().displayName(),a=r.font(),h=r.background();h&&e.drawRectI(h,null,n),(h=r.color())&&e.drawText(a,h,o,n.x,n.y+n.height/2,T2.LEFT,N7.MIDDLE)}},null,function(t){t.Default=new t}),A68=I1("ChartLegendMarkerRenderer",f6,{init:function(t){this._super(t)},measure:function(t,e,i){var n=t.model();return this._doMeasureSource(n.source(),e,i)},render:function(t,e,i){var n,s=t.model(),r=s.styles(),o=r.border(),a=r.background();(o||a)&&e.drawRectI(a,o,i),n=i.clone(),this._doDrawSource(s.source(),e,n)},_doMeasureSource:function(t,e,i){return{width:e,height:i}},_doDrawSource:function(t,e,i){var n,s=t.$_view;s&&!s.renderer().drawLegend(s,e,i)&&(t.styles(),null,(n=t.getLegendColor())&&e.drawRectI(n,null,i))}},null,function(t){t.Default=new t}),b68=I1("ChartLegendRenderer",f6,{init:function(t){this._super(t)},measure:function(t,e,i,n){},render:function(t,e,i){var n,s=t.model().styles(),r=s.background(),o=s.border();(r||o)&&(o&&(n=o.width(),i.x+=Y1(n/2),i.y+=Y1(n/2),i.width-=Y1(n/2)+Y1((n+1)/2),i.height-=Y1(n/2)+Y1((n+1)/2)),e.drawRectI(r,o,i))}},null,function(t){t.Default=new t}),E47=I1("GroupChartItem",Y28,{init:function(t,e){this._super(t,e)},async:!1,chart:null,setChart:function(t){t!==this._chart&&(this._chart=t,this._changed())},$_type:function(){return"chart"},createRow:function(t){return new K47(t)},createRowView:function(t){return new w57(t)}}),K47=I1("GroupChartRow",M3,{init:function(t){this._super(t),this._chart=t.chart()}}),w57=I1("GroupChartRowElement",c3,{init:function(t,e){this._super(t,e||"groupChartRowView")},_doUpdateElement:function(t){this._super(t);var e=this.item().model().chart();e?(this._chartView||(this._chartView=new Y5(this._dom,this.container()),this.addChild(this._chartView)),this._chart||(this._chart=new O5(this.grid()).loadChart(e),this._chartView.setModel(this._chart)),this._chart.setItemSource(this.item().parent()),this._styles=t):this._chartView&&(this.removeChild(this._chartView),this._chartView=null,this._chart=null)},_doMeasure:function(t,e,i){return{width:e,height:this.item().model().minHeight()}},_doLayoutContent:function(t){if(this._chartView){var e=this.getClientRect(this._drawRect);this._styles.deflatePaddings(e),this._chartView.setRectI(this._drawRect),this._chartView.layoutContent(t)}this._styles=null}}),m68=I1("GridChartItem",r48,{init:function(t,e){this._super(t,e)},async:!1,chart:null,setChart:function(t){t!==this._chart&&(this._chart=t,this._changed())},$_type:function(){return"chart"},createItemView:function(t){return new D68(t)}}),D68=I1("GridChartItemElement",R78,{init:function(t,e){this._super(t,"gridChartItemView",e)},_doLayoutItem:function(t,e){this.$_prepareChart(),this.$_layoutChart(t,e)},_doRender:function(t,e){e=this._drawRect;var i=this._model.styles();t.drawRectI(i.background(),null,e),W2.drawStyledBorders(t,e,i)},_doRenderHtml:function(t){var e=this._css,i=(t=this._drawRect,this._model.styles());this.getClientRect(t),e.background=i.background().css(),W2.drawStyledHtmlBorders(e,i)},$_prepareChart:function(){var t=this.grid(),e=this.model(),i=e.chart();i?(this._chartView||(this._chartView=new Y5(this._dom,this.container()),this.addChild(this._chartView)),this._chart||(this._chart=new O5(t).loadChart(i),this._chartView.setModel(this._chart)),this._chart.setItemSource(t),this._styles=e.styles()):this._chartView&&(this.removeChild(this._chartView),this._chartView=null,this._chart=null)},$_layoutChart:function(t,e){this._chartView&&(this._styles.deflatePaddings(e),this._chartView.setRectI(this._drawRect),this._chartView.layoutContent(t)),this._styles=null}}),a9=I1("ExcelIndex",P1,{init:function(t,e){this._super(t,e)},getRow:function(t){return this.$_row}},{tempExcel:function(t,e){var i=a9.$_xlstemp;return i.$_row=t,i.rowIndex=t.index(),i.column=e,i}},function(t){t.$_xlstemp=new t}),Q68=I1("ColumnArray",null,{init:function(t,e){this._super(),this._grid=t,this._headerRows=[],this._dataRows=[],this._footerRows=[],this._groupFooterRows=[],this._summaryRows=[],this.$_parse(t,e)},grid:function(){return this._grid},colCount:function(){return this._headerRows.length&&this._headerRows[0].length},headerRowCount:function(){return this._headerRows.length},dataRowCount:function(){return this._dataRows.length},footerRowCount:function(){return this._footerRows.length},groupFooterRowCount:function(){return this._groupFooterRows.length},summaryRowCount:function(){return this._summaryRows.length},getHeader:function(t,e){return this._headerRows[t][e]},getItem:function(t,e){return this._dataRows[t][e]},setItem:function(t,e,i){this._dataRows[t][e]=i},getFooter:function(t,e){return this._footerRows[t][e]},getGroupFooter:function(t,e){return this._groupFooterRows[t][e]},getSummary:function(t,e){return this._summaryRows[t][e]},$_parse:function(t,e){var i,n,s=1,r=1,o=1,a=1,h=1,l=t.visibleColumnCount();if(!e)for(i=0;i<l;i++)(n=t.getVisibleColumn(i))instanceof O1&&(s=Math.max(s,n.calcHeaderLevels(!0)),r=Math.max(r,n.calcDataLevels(!0)),o=Math.max(o,n.calcFooterLevels(!0)),a=Math.max(a,n.calcGroupFooterLevels(!0)),h=Math.max(h,n.calcHeaderSummaryLevels(!0)));try{for(i=0;i<s;i++)this._headerRows.push([]);for(i=0;i<r;i++)this._dataRows.push([]);for(i=0;i<o;i++)this._footerRows.push([]);for(i=0;i<a;i++)this._groupFooterRows.push([]);for(i=0;i<h;i++)this._summaryRows.push([]);this.$_parseRows(t,"h",this._headerRows,e),this.$_parseRows(t,"d",this._dataRows,e),this.$_parseRows(t,"f",this._footerRows,e),this.$_parseRows(t,"g",this._groupFooterRows,e),this.$_parseRows(t,"s",this._summaryRows,e)}finally{e||t.$_calcGroupLevels()}},$_parseRows:function(t,e,i,n){var s,r,o,a,h,l,u,d=t.visibleColumnCount();if(!(d<1)){switch(o=i.length,h=a=0,l=null,u=t.getVisibleColumn(0).parent(),e){case"f":l=u.$_footerSpanned?u.$_footerSpans:null;break;case"g":l=u.$_groupFooterSpanned?u.$_groupFooterSpans:null;break;case"s":l=u.$_summarySpanned?u.$_summarySpans:null}if(l&&!n)for(s=0;s<d;){for(a=(u=l[s++])instanceof O1?u.calcHorz():1;s<d&&(r=l[s])===u;s++)a+=r instanceof O1?r.calcHorz():1;if(u instanceof O1)switch(e){case"h":this.$_addHeaderGroup(h,0,a,o,u,i);break;case"f":this.$_addFooterGroup(h,0,a,o,u,i);break;case"g":this.$_addGroupFooterGroup(h,0,a,o,u,i);break;case"s":this.$_addSummaryGroup(h,0,a,o,u,i);break;default:this.$_addDataGroup(h,0,a,o,u,i)}else this.$_addColumn(h,0,a,o,u,i);h+=a}else for(s=0;s<d;s++){if((u=t.getVisibleColumn(s))instanceof O1)if(n){var c=u.getLeafColumns(!0);a=c.length;for(var _=0;_<a;_++)this.$_addColumn(h+_,0,1,1,c[_],i)}else switch(a=u.calcHorz(),e){case"h":this.$_addHeaderGroup(h,0,a,o,u,i);break;case"f":this.$_addFooterGroup(h,0,a,o,u,i);break;case"g":this.$_addGroupFooterGroup(h,0,a,o,u,i);break;case"s":this.$_addSummaryGroup(h,0,a,o,u,i);break;default:this.$_addDataGroup(h,0,a,o,u,i)}else a=1,this.$_addColumn(h,0,a,o,u,i);h+=a}}},$_addColumn:function(t,e,i,n,s,r){var o,a,h;for(o=0;o<n;o++)for(a=0;a<i;a++)(h=new w87(s)).colIndex=a,h.colSpan=i,h.rowIndex=o,h.rowSpan=n,r[e+o][t+a]=h},$_addHeaderGroup:function(t,e,i,n,s,r){var o,a,h,l,u=s.visibleCount(),d=s.$_headerColumn;if(d)d instanceof O1?this.$_addHeaderGroup(t,e,i,n,s.$_headerColumn,r):this.$_addColumn(t,e,i,n,s.$_headerColumn,r);else if(s.childHeadersVisible())if(s.header().visible()&&(this.$_addColumn(t,e,i,1,s.header(),r),e++,n--),s.vertical())for(o=0;o<u;o++)(a=s.getVisibleItem(o))instanceof O1?(h=o<u-1?a.calcHeaderLevels():n,this.$_addHeaderGroup(t,e,i,h,a,r),e+=h,n-=h):o<u-1?(this.$_addColumn(t,e,i,1,a,r),e++,n--):this.$_addColumn(t,e,i,n,a,r);else for(o=0;o<u;o++)(a=s.getVisibleItem(o))instanceof O1?(l=o<u-1?a.calcHorz():i,this.$_addHeaderGroup(t,e,l,n,a,r),t+=l,i-=l):o<u-1?(this.$_addColumn(t,e,1,n,a,r),t++,i--):this.$_addColumn(t,e,i,n,a,r);else 0<n&&this.$_addColumn(t,e,i,n,s,r)},$_addDataGroup:function(t,e,i,n,s,r){var o,a,h,l,u=s.visibleCount();if(u<1)this.$_addColumn(t,e,i,n,s,r);else if(s.vertical())for(o=0;o<u;o++)(a=s.getVisibleItem(o))instanceof O1?(h=o<u-1?a.calcDataLevels():n,this.$_addDataGroup(t,e,i,h,a,r),e+=h,n-=h):o<u-1?(this.$_addColumn(t,e,i,1,a,r),e++,n--):this.$_addColumn(t,e,i,n,a,r);else for(o=0;o<u;o++)(a=s.getVisibleItem(o))instanceof O1?(l=o<u-1?a.calcHorz():i,this.$_addDataGroup(t,e,l,n,a,r),t+=l,i-=l):o<u-1?(this.$_addColumn(t,e,1,n,a,r),t++,i--):this.$_addColumn(t,e,i,n,a,r)},$$_addFooterGroup:function(t,e,i,n,s,r,o){var a,h,l,u,d,c,_=r.visibleCount();if(_<1)this.$_addColumn(e,i,n,s,r,o);else{switch(t){case"f":h=r.$_footerColumn;break;case"g":h=r.$_groupFooterColumn;break;case"s":h=r.$_summaryColumn}if(h)h instanceof O1?this.$_addFooterGroup(e,i,n,s,h,o):this.$_addColumn(e,i,n,s,h,o);else{switch(t){case"f":a=r.childFootersVisible();break;case"g":a=r.childGroupFootersVisible();break;case"s":a=r.childSummariesVisible()}if(a){switch(t){case"f":l=r.$_footerSpanned?r.$_footerSpans:null;break;case"g":l=r.$_groupFooterSpanned?r.$_groupFooterSpans:null;break;case"s":l=r.$_summarySpanned?r.$_summarySpans:null}if(r.vertical())if(l)for(a=0;a<_;)if(h=r.getVisibleItem(a++),a==_)h instanceof O1?this.$$_addFooterGroup(t,e,i,n,s,h,o):this.$_addColumn(e,i,n,s,h,o);else{for(d=h instanceof O1?h.footerLevel():1;a<_&&(u=l[a])===h;a++)a==_-1?d=s:d+=(u=r.getVisibleItem(a))instanceof O1?u.footerLevel():1;h instanceof O1?this.$$_addFooterGroup(t,e,i,n,d,h,o):this.$_addColumn(e,i,n,d,h,o),s-=d,i+=d}else for(a=0;a<_;a++)(h=r.getVisibleItem(a))instanceof O1?(d=a<_-1?h.footerLevel():s,this.$$_addFooterGroup(t,e,i,n,d,h,o),i+=d,s-=d):a<_-1?(this.$_addColumn(e,i,n,1,h,o),i++,s--):this.$_addColumn(e,i,n,s,h,o);else if(l)for(a=0;a<_;)if(u=r.getVisibleItem(a),h=l[a++],a==_)h instanceof O1?this.$$_addFooterGroup(t,e,i,n,s,h,o):this.$_addColumn(e,i,n,s,h,o);else{for(c=u instanceof O1?u.calcHorz():1;a<_&&(u=l[a])===h;a++)u=r.getVisibleItem(a),a==_-1?c=n:c+=u instanceof O1?u.calcHorz():1;h instanceof O1?this.$$_addFooterGroup(t,e,i,c,s,h,o):this.$_addColumn(e,i,c,s,h,o),n-=c,e+=c}else for(a=0;a<_;a++)(h=r.getVisibleItem(a))instanceof O1?(c=a<_-1?h.calcHorz():n,this.$$_addFooterGroup(t,e,i,c,s,h,o),e+=c,n-=c):a<_-1?(this.$_addColumn(e,i,1,s,h,o),e++,n--):this.$_addColumn(e,i,n,s,h,o)}else this.$_addColumn(e,i,n,s,r,o)}}},$_addFooterGroup:function(t,e,i,n,s,r){this.$$_addFooterGroup("f",t,e,i,n,s,r)},$_addGroupFooterGroup:function(t,e,i,n,s,r){this.$$_addFooterGroup("g",t,e,i,n,s,r)},$_addSummaryGroup:function(t,e,i,n,s,r){this.$$_addFooterGroup("s",t,e,i,n,s,r)}}),t5="default",N47="hidden",P47="visible",E57="default",F68="rowIndex",p68="dataIndex",K57=7,N57=I1("GridExportOptions",null,{init:function(t){C4.init.call(this),this._datetimeWriter=null,this._textFormatter=null,t&&this.assign(t)},target:"remote",legacy:!1,noSave:!1,url:void 0,fileName:null,linear:!1,allItems:!0,rowIndicator:t5,header:t5,footer:t5,indicatorValue:E57,indenting:!0,checkNumber:!1,datetimeFormat:void 0,nullDateText:"",datetimeCallback:null,numberFormat:void 0,numberCallback:null,booleanFormat:null,booleanCallback:null,textFormat:void 0,textCallback:null,objectCallback:null,separateRows:!1,lookupDisplay:!1,cachedStyle:!0,applyDynamicStyles:!1,styledText:!1,async:!1,title:void 0,showProgress:!0,modal:!1,cancelable:!0,onStart:null,onFinished:null,onProgress:null,setFileName:function(t){(t=i0(t))&&t.indexOf(".")<0&&(t+=".xlsx"),this._fileName=t},setDatetimeFormat:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t)},setBooleanFormat:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._booleanFormatter=t?new v3(t):null)},setNumberFormat:function(t){t!=this._numberFormat&&(this._numberFormat=t)},setTextFormat:function(t){t!=this._textFormat&&(this._textFormat=t,this._textFormatter=t?new f77(t):null)},isIndicatorVisible:function(t){if(t)switch(this._rowIndicator){case P47:return!0;case N47:return!1;case t5:default:return t.rowIndicator().visible()}return!1},isHeaderVisible:function(t){if(t)switch(this._header){case P47:return!0;case N47:return!1;case t5:default:return t.header().visible()}return!1},isFooterVisible:function(t){if(t)switch(this._footer){case P47:return!0;case N47:return!1;case t5:default:return t.footer().visible()}return!1},isIndicatorDataRow:function(t){if(t)switch(this._indicatorValue){case F68:return!1;case p68:return!0;case E57:default:return t.rowIndicator().displayValue()==z5.DATA_INDEX}return!1}}),z68=h6("DataLudi.ExportCanceled","Exporting canceled."),P57=I1("GridExcelExporter",null,{init:function(){this._super()},export:function(t,e,i){if(t){e=e instanceof N57?e:new N57(e);var n={grid:t,book:new g18(e.legacy()),options:e,indicator:e.isIndicatorVisible(t)?t.rowIndicator():null,header:e.isHeaderVisible(t)?t.header():null,summary:e.isHeaderVisible(t)&&t.header().summary().visible()?t.header().summary():null,footer:e.isFooterVisible(t)?t.footer():null,colArr:new Q68(t,e.linear()),numberFormatId:0,dateFormatId:14,columnStyles:{},columnWrapStyles:{},allItems:null,indicatorHead:"No",indicatorFoot:"",rowGrouped:!1,rowLevels:0,indents:0,indentWidth:3,indentHeadStyle:void 0,indentSummaryStyle:void 0,indentFootStyle:void 0,columnMerged:!1,mergeHeads:{}};if(this._runStyles=new o1,this._seriesCell=new R6,this._dataCell=new l4,this._current=0,this._canceled=!1,this._state="ready",this._curRow=0,this._curCol=0,"$$testing"!=i&&n.options.async()){this.$_exportAsync(n);var s=this;return{state:function(){return s._state},cancel:function(){s.cancel()}}}return this.$_export(n,i)}},$_export:function(t,e){var i,n,s,r=t.grid,o=t.options;for(s in r instanceof r4?(o.allItems()&&(t.allItems=r.getAllRows()),this.$_buildTreeBook(t)):(o.allItems()&&r.rowGrouped()&&(t.allItems=r.getAllRows()),this.$_buildBook(t)),n=[],i=t.book.createParts())n.push({key:s,body:i[s]});return"$$testing"==e?n:this.$_buildZip(n,t)},$_asyncZip:function(t){var e,i=t.book.createParts(),n=[];for(e in i)n.push({key:e,body:i[e]});this._monitor(t,"createParts"),N5(function(){this.$_buildZip(n,t)}.bind(this))},$_exportAsync:function(t){var e=t.grid,i=t.options;this._echo=F0(),this._elapsed=0,this._canceled=!1,this._state="running",this._doStart(t);try{t.allItems=i.allItems()?e.getAllRows():e.getRows(),e instanceof r4?this.$_buildTreeBookAsync(t,this.$_asyncZip):this.$_buildBookAsync(t,this.$_asyncZip)}catch(e){this._doFinished(t,e)}},$_getCanceler:function(t){if(t.options.cancelable()){var e=this;return function(){e.cancel()}}},_doStart:function(t){var e=t.grid,i=t.options,n=i._onStart;n&&n(e),i.showProgress()&&e.showProgress(a17(i.title(),E2._default.exporting),i.modal(),this.$_getCanceler(t))},_doFinished:function(t,e){var i=t.grid,n=t.options._onFinished;this._state=e?"failed":"completed",i.closeProgress(),n&&n(i,e,q4()-this._echo)},_doProgress:function(t,e,i,n){var s=t.grid,r=t.options,o=r._onProgress;o&&o(t.grid,e,i,n),r.showProgress()&&s.setProgress(0,100,e,n+" in "+i.toLocaleString()+" ms")},cancel:function(){this._canceled&&"failied"==this._state||"completed"==this._state?grid.closeProgress():this._canceled=!0},$_throwCancel:function(){throw new z68("Exporting canceled")},_monitor:function(t,e){var i;if(!this._canceled)return this._elapsed,i=this._elapsed=q4()-this._echo,this._current.toFixed(2),this._doProgress(t,this._current,i,e),!0;this.$_throwCancel()},$_buildBook:function(t){var e=t.grid,i=t.book;t.rowGrouped=e.rowGrouped(),t.rowGrouped&&!e.rowGroup().mergeMode()&&(t.rowLevels+=e.rowGroupLevels()),i.setCachedStyle(t.options.cachedStyle()),this.$_prepareFormats(t),this.$_prepareStyles(t),this.$_buildColumns(t),t.header&&this.$_buildHeader(t),t.summary&&this.$_buildSummary(t),this.$_buildItems(t),t.footer&&this.$_buildFooter(t)},$_buildBookAsync:function(n,t){var e=n.book,i=n.grid,s=this,r=[{label:"prepareFormats",length:1,func:this.$_prepareFormats,param1:n},{label:"prepareStyles",length:1,func:this.$_prepareStyles,param1:n},{label:"buildColumns",length:1,func:this.$_buildColumns,param1:n},{label:"buildHeader",length:1,func:n.header?this.$_buildHeader:null,param1:n},{label:"buildSummary",length:1,func:n.summary?this.$_buildSummary:null,param1:n},{label:"buildItems",length:0,func:this.$_buildItemsAsync,param1:n,param2:74,param3:t}];n.rowGrouped=i.rowGrouped(),n.rowGrouped&&!i.rowGroup().mergeMode()&&(n.rowLevels+=i.rowGroupLevels()),e.setCachedStyle(n.options.cachedStyle()),function t(e){var i=r[e];try{i.func&&(i.func.call(s,i.param1,i.param2,i.param3),0<i.length&&(s._current+=i.length,s._monitor(n,i.label))),e+1<r.length&&N5(t,0,e+1)}catch(e){s._doFinished(n,e)}}(0)},$_buildTreeBook:function(t){t.rowLevels=t.grid.getLevels(),t.book.setCachedStyle(t.options.cachedStyle()),this.$_prepareFormats(t),this.$_prepareStyles(t),this.$_buildColumns(t),t.header&&this.$_buildTreeHeader(t),t.summary&&this.$_buildTreeSummary(t),this.$_buildTreeItems(t),t.footer&&this.$_buildTreeFooter(t)},$_buildTreeBookAsync:function(n,t){var e=n.book,s=(n.grid,this),r=[{label:"prepareFormats",length:1,func:this.$_prepareFormats,param1:n},{label:"prepareStyles",length:1,func:this.$_prepareStyles,param1:n},{label:"buildColumns",length:1,func:this.$_buildColumns,param1:n},{label:"buildTreeHeader",length:1,func:n.header?this.$_buildTreeHeader:null,param1:n},{label:"buildTreeSummary",length:1,func:n.summary?this.$_buildTreeSummary:null,param1:n},{label:"buildItems",length:0,func:this.$_buildTreeItemsAsync,param1:n,param2:74,param3:t}];n.rowLevels=n.grid.getLevels(),e.setCachedStyle(n.options.cachedStyle()),function t(e){try{var i=r[e];i.func&&(i.func.call(s,i.param1,i.param2,i.param3),0<i.length&&(s._current+=i.length,s._monitor(n,i.label))),e+1<r.length&&N5(t,0,e+1)}catch(e){s._doFinished(n,e)}}(0)},$_prepareFormats:function(t){var e,i=t.options,n=t.book;"number"==typeof(e=i.numberFormat())||0<Y1(e)?t.numberFormatId=Y1(e):e&&(t.numberFormatId=n.addNumberFormat(e)),"number"==typeof(e=i.datetimeFormat())||0<Y1(e)?t.dateFormatId=Y1(e):e&&(t.dateFormatId=n.addNumberFormat(e))},$_createStyles:function(t,e,i,n){var s,r,o,a,h;if(i=!(2<arguments.length)||i,n=!(3<arguments.length)||n,s=new V5,(r=e.background()||U1.WHITE)instanceof T3)switch(s.gradient="linear",s.color=r._colors[0].toColorHex(),s.color2=r._colors[1].toColorHex(),s.tint=1-r._colors[0]._a,r._angle){case 180:s.degree="0";break;case 90:s.degree="90";break;case 0:s.degree="180";break;case 270:s.degree="270"}else s.patternType="solid",s.color=r._color.toColorHex(),s.tint=1-r._color._a;switch(s=t.addFill(s),o=null,i&&((o=new H6).right=e.borderRight(),o.bottom=e.borderBottom(),o.left=e.borderLeft(),o.top=e.borderTop(),o=t.addBorder(o)),a=null,n&&((a=new K5).name=e.fontName(),a.size=72*e.fontSize()/96,a.color=e.color()._color.toColorHex(),a.bold=e.fontBold(),a.italic=e.fontItalic(),a=t.addFont(a)),(h=new t4).fill=s,o&&(h.border=o),a&&(h.font=a),e.textAlignment()){case v1.CENTER:h.horzAlign=t4.ALIGN_CENTER;break;case v1.FAR:h.horzAlign=t4.ALIGN_FAR;break;default:h.horzAlign=t4.ALIGN_NEAR}switch(e.lineAlignment()){case v1.CENTER:h.vertAlign=t4.VALIGN_CENTER;break;case v1.FAR:h.vertAlign=t4.VALIGN_FAR;break;default:h.vertAlign=t4.VALIGN_NEAR}return h},$_addStyle:function(t,e,i){i=!(2<arguments.length)||i;var n=this.$_createStyles(t,e,i);return t.addStyle(n)},$_addStyleWithColumn:function(t,e,i,n){var s=t.book,r=this.$_createStyles(s,i);if(e instanceof L2||e instanceof h7){var o=e.excelFormat();switch(e.valueType()){case a1.TEXT:break;case a1.NUMBER:r.formatId=o?s.addNumberFormat(o):t.numberFormatId;break;case a1.DATETIME:r.formatId=o?s.addNumberFormat(o):t.dateFormatId}}return void 0!==n&&(r.wrapText=n),s.addStyle(r)},$_prepareStyles:function(t){var e,i,n,s,r,o,a,h,l=t.colArr,u=!1,d=l.colCount(),c=t.columnStyles,_=t.columnWrapStyles,f=t.grid,g=(f.dataSource(),t.options),m=t.book;for(e=0,i=l.dataRowCount();e<i;e++)for(n=0;n<d;n++)0==(s=l.getItem(e,n)).colIndex&&0==s.rowIndex&&(r=s.column)&&!c[r.$_hash]&&(o=this.$_addStyleWithColumn(t,r,r.styles()),c[r.$_hash]=o,g.applyDynamicStyles()&&(o.$_dynamicStyles=r.$_hasDynamicStyles()),o=this.$_addStyleWithColumn(t,r,r.styles(),!0),_[r.$_hash]=o,g.separateRows()||(a=r.stateFor(f4.MERGE_ROOMS))&&(a.refresh(0,f.rowCount()-1),u=!0));t.columnMerged=u,f instanceof A0&&f.rowGrouped()?(h=f.rowGroup(),t.rowGroupHeadStyle=this.$_addStyle(m,h.headStyles()),t.headerBarStyle=this.$_addStyle(m,h.headerBarStyles(),!1),t.groupBarStyle=this.$_addStyle(m,h.headerStyles(),!1),t.rowGroupHeaderStyle=this.$_addStyle(m,h.headerStyles(),!1),t.rowGroupFooterStyles={}):f instanceof r4&&(t.rowFooterStyles={})},$_buildColumns:function(t){var e,i,n,s,r=t.grid,o=t.options,a=t.book,h=t.colArr,l=1,u=[];if(a.setStylePivot(),t.indicator&&(t.indicatorStyle=this.$_addStyle(a,t.indicator.styles()),(i=new B17).index=l++,i.width=x3(Math.max(r.rowIndicator().minWidth(),r.rowIndicatorView().width())/K57),u.push(i)),o.indenting()&&(t.rowGrouped&&!t.columnMerged?t.indents=t.rowLevels-1:r instanceof r4&&(t.indents=t.rowLevels-1),t.indents)){for(e=0;e<t.indents;e++)(i=new B17).width=Math.max(t.indentWidth,1),i.index=l++,u.push(i);t.indentHeadStyle=this.$_addStyle(a,r.header().styles()),t.indentSummaryStyle=this.$_addStyle(a,r.header().summary().styles()),t.indentFootStyle=this.$_addStyle(a,r.footer().styles())}for(s=h.colCount(),e=0;e<s;e++)n=h.getItem(0,e).column,(i=new B17).index=l++,i.width=x3(n.displayWidth()/K57),u.push(i);t.book.sheet().setColumns(u)},$_buildHeader:function(t){var e,i,n,s,r,o,a,h,l,u=this._curRow,d=this._curCol,c=t.grid,_=t.book,f=_.sheet(),g=t.colArr,m=g.colCount(),p=g.headerRowCount(),w=t.indents;if(_.setStylePivot(),t.indicator){if(i=this.$_addStyle(_,c.header().head().styles()),f.addText(u,d,t.indicatorHead,i),1<p){for(e=1;e<p;e++)f.addBlank(u+e,d,i);f.addMerge(u,d,p,1)}d++}if(0<w){for(s=0;s<w;s++){for(e=0;e<p;e++)f.addBlank(e+u,s+d,t.indentHeadStyle);f.addMerge(u,s+d,p,1)}d+=w}for(e=0;e<p;e++)for(n=u+e,s=0;s<m;s++)a=(o=g.getHeader(e,s)).column,h=s+d,0<o.colIndex||0<o.rowIndex?f.addBlank(n,h,i):(l=a instanceof o5?a:a.header(),i=this.$_addStyle(_,l.styles()),r=l.displayText(),i=this.$_checkTextEs(r,i),f.addText(n,h,r,i),(1<o.rowSpan||1<o.colSpan)&&f.addMerge(n,h,o.rowSpan,o.colSpan));return this._curRow+=p,p},$_buildSummary:function(t){var e,i,n,s,r,o,a,h,l,u,d=this._curRow,c=this._curCol,_=t.grid,f=t.book,g=f.sheet(),m=t.colArr,p=m.colCount(),w=m.summaryRowCount(),v=t.indents;if(f.setStylePivot(),t.indicator){if(i=this.$_addStyle(f,_.header().summary().head().styles()),g.addText(d,c,_.header().summary().head().text(),i),1<w){for(e=1;e<w;e++)g.addBlank(d+e,c,i);g.addMerge(d,c,w,1)}c++}if(0<v){for(n=0;n<v;n++){for(e=0;e<w;e++)g.addBlank(e+d,n+c,t.indentSummaryStyle);g.addMerge(d,n+c,w,1)}c+=v}for(e=0;e<w;e++)for(s=d+e,n=0;n<p;n++)o=(r=m.getSummary(e,n)).column,a=n+c,0<r.colIndex||0<r.rowIndex?g.addBlank(s,a,i):(h=o.header().summary(),u=(l=_.header().summary().getCell(new P1(null,o))).value(),i=this.$_addStyle(f,h.styles()),isNaN(u)?g.addText(s,a,l.displayText()||"",i):g.addNumber(s,a,u,i),(1<r.rowSpan||1<r.colSpan)&&g.addMerge(s,a,r.rowSpan,r.colSpan));return t.rowGrouped&&g.setRowLevel(s,1),this._curRow+=w,w},$_buildFooter:function(t){var e,i,n,s,r,o,a,h,l,u,d=this._curRow,c=this._curCol,_=t.grid,f=t.book,g=f.sheet(),m=t.colArr,p=m.colCount(),w=m.footerRowCount(),v=t.indents;if(f.setStylePivot(),t.indicator){if(i=this.$_addStyle(f,_.footer().head().styles()),g.addText(d,c,_.footer().head().text(),i),1<w){for(e=1;e<w;e++)g.addBlank(d+e,c,i);g.addMerge(d,c,w,1)}c++}if(0<v){for(n=0;n<v;n++){for(e=0;e<w;e++)g.addBlank(e+d,n+c,t.indentFootStyle);g.addMerge(d,n+c,w,1)}c+=v}for(e=0;e<w;e++)for(s=d+e,n=0;n<p;n++)o=(r=m.getFooter(e,n)).column,a=n+c,0<r.colIndex||0<r.rowIndex?g.addBlank(s,a,i):(h=o.footer(),u=(l=_.footer().getCell(new P1(null,o))).value(),i=this.$_addStyle(f,h.styles()),isNaN(u)?(u=l.displayText()||"",$_linereg.test(u)&&(i.wrapText=!0),g.addText(s,a,u,i)):g.addNumber(s,a,u,i),(1<r.rowSpan||1<r.colSpan)&&g.addMerge(s,a,r.rowSpan,r.colSpan));return t.rowGrouped&&g.setRowLevel(s,1),this._curRow+=w,w},$_buildIndicatorCell:function(t,e,i,n,s){var r,o=t.grid,a=t.book,h=a.sheet(),l=this.$_addStyle(a,o.rowIndicator().styles());if(h.addNumber(i,n,e,l),1<s){for(r=1;r<s;r++)h.addBlank(i+r,n,l);h.addMerge(i,n,s,1)}return 1},$_checkTextEs:function(t,e,i,n){return $_linereg.test(t)&&(e.dynamic||!n?e.wrapText||(0<e.$_ref?((e=e.clone()).wrapText=!0,e=i.book.addStyle(e)):e.wrapText=!0):e=i.columnWrapStyles[n.$_hash]),e},$_addCell:function(t,e,i,n,s,r,o,a,h){var l,u=t.grid.body(),d=s.valueType();if(d==a1.OBJECT){if(l=r,a._objectCallback&&(r=a._objectCallback(n,s,r)),r===l&&(r=s._keyFn?s._keyFn(s.$_field,r):l0.extractJson(r,s._keyPath,!0)),s instanceof L2||s instanceof h7){var c=s.excelFormat();"number"==typeof r?h.formatId=c?book.addNumberFormat(c):t.numberFormatId:r instanceof Date&&(h.formatId=c?book.addNumberFormat(c):t.dateFormatId)}}else d==a1.TEXT&&a._checkNumber&&(l=Number(r),isNaN(l)||(r=l));d==a1.NUMBER||Z17(r)?isNaN(r)?o.addText(e,i,"",h):a._numberCallback?"number"==typeof(r=a._numberCallback(n,s,r))?o.addNumber(e,i,r,h):o.addText(e,i,r,h):o.addNumber(e,i,r,h):d==a1.DATETIME||i5(r)?r?a._datetimeCallback?(r=a._datetimeCallback(n,s,r))instanceof Date?o.addDate(e,i,r,h):o.addText(e,i,r,h):o.addDate(e,i,r,h):a._nullText?o.addText(e,i,a._nullText,h):o.addText(e,i,"",h):d==a1.DATETIME||Q3(r)?a._booleanCallback?"boolean"==typeof(r=a._booleanCallback(n,s,r))?o.addBool(e,i,r,h):o.addText(e,i,r,h):a._booleanFormatter?(r=a._booleanFormatter.formatValue(r),o.addText(e,i,r,h)):o.addBool(e,i,r,h):d==a1.TEXT||S4(r)?(h=(a._lookupDisplay&&(s.labelField()||s.lookupDisplay())?r=u.getCellSimple(a9.tempExcel(n,s)).getTextFromItem(n):a._textCallback?r=a._textCallback(n,s,r):a._textFormatter&&(r=a._textFormatter.format(r)),this.$_checkTextEs(r,h,t,s)),o.addText(e,i,r,h)):o.addText(e,i,"",h)},$_getStyledText:function(t,e,i,n,s){var r,o,a,h,l,u,d;return t.styledText()&&(n=n||s.getCell(a9.tempExcel(e,i)),o=i._displayCallback,h=(a=n.styles()).prefix(),l=a.suffix(),void 0!==(r=(o?(this._dataCell._index.set(e.index(),i),this._dataCell._doPrepareValue(n)):(u=this._dataCell,d=n.styles(),u._index.set(e.index(),i),u.setNumberFormat(d.numberFormat()),u.setDatetimeFormat(d.datetimeFormat()),u.setBooleanFormat(d.booleanFormat()),u.setTextFormat(d.textFormat()),u._doPrepareValue(n)),this._dataCell.text()))&&(h||l)&&(r=r||"")&&(h&&(r=h+r),l&&(r+=l))),r},$_buildValueCell:function(t,e,i,n,s){var r,o,a,h,l,u,d,c,_=t.grid.body(),f=t.options,g=t.book.sheet(),m=t.columnStyles[s.$_hash];f.applyDynamicStyles()&&(m.$_dynamicStyles||_.$_hasDynamicStyles(n,s)||(h=_.rowRangeStyles().getRow(n.index())))&&(a=(r=_.getCell(a9.tempExcel(n,s))).styles(),h&&((l=a.background())||(l=h.background()),l&&a.setBackground(l),(l=a.borderBottom())||(l=h.borderBottom()),l&&a.setBorderBottom(l)),(m=this.$_addStyleWithColumn(t,s,a)).dynamic=!0),s._blankWhenExport?g.addText(e,i,"",m):s instanceof L2?0<=(d=s.dataIndex())?void 0!==(u=this.$_getStyledText(f,n,s,r,_))?(m=this.$_checkTextEs(u,m,t,s),g.addText(e,i,u,m)):(o=n.getValue(d),this.$_addCell(t,e,i,n,s,o,g,f,m)):g.addBlank(e,i,m):s instanceof Q7?(c=this._seriesCell.getValue(s,n))?(u=R6.getText(c),m=this.$_checkTextEs(u,m,t,s),g.addText(e,i,u,m)):g.addBlank(e,i,m):s instanceof h7?void 0!==(u=this.$_getStyledText(f,n,s,r,_))?(m=this.$_checkTextEs(u,m,t,s),g.addText(e,i,u,m)):void 0!==(o=s.getValue(n))?this.$_addCell(t,e,i,n,s,o,g,f,m):g.addBlank(e,i,m):s instanceof D6&&(u=s.text(),m=this.$_checkTextEs(u,m,t,s),g.addText(e,i,u,m))},$_buildRow:function(t,e,i,n,s){var r,o,a,h,l,u,d,c,_,f,g,m,p,w=t.grid,v=t.book.sheet(),C=t.colArr,I=C.dataRowCount(),R=C.colCount(),y=t.columnStyles,x=w.layoutManager(),E=t.columnMerged,b=t.mergeHeads,S=w.rowGroup(),T=t.indents;for(t.indicator&&(n+=this.$_buildIndicatorCell(t,s,i,n,I)),o=0;o<I;o++){for(a=i+o,h=n,r=0;r<T;r++)h++;for(r=0;r<R;r++)l=r+h,c=y[(d=(u=C.getItem(o,r)).column).$_hash],0<u.colIndex||0<u.rowIndex?v.addBlank(a,l,c):(_=u.rowSpan,f=u.colSpan,g=!1,E&&(m=a9.tempExcel(e,d),(p=x.getMergedCell(m))?g=(p.isHead(m)&&0==o?(this.$_buildValueCell(t,a,l,e,d),b[d.$_hash]=a):(v.addBlank(a,l,c),p.isTail(m)&&(_=a-b[d.$_hash]+I,v.addMerge(b[d.$_hash],l,_,1))),!0):t.allItems&&!e.visible()&&(X2.isHeader(S.expandedAdornments())||e!=e.parent().firstLeaf()?w.isGroupedColumn(d)&&w.mergedRowGrouped()&&(X2.isFooter(S.expandedAdornments())||e!=e.parent().lastLeaf()||(_=a-b[d.$_hash]+I,v.addMerge(b[d.$_hash],l,_,1)),g=!0):(this.$_buildValueCell(t,a,l,e,d),b[d.$_hash]=a,g=!0))),g||(this.$_buildValueCell(t,a,l,e,d),(1<_||1<f)&&v.addMerge(a,l,_,f)));t.rowGrouped&&v.setRowLevel(a,e.level())}return I},$_buildGroupRow:function(t,e,i,n,s){var r,o,a=t.grid,h=t.book.sheet(),l=t.colArr.colCount();for(e.level(),t.indicator&&(n+=this.$_buildIndicatorCell(t,s,i,n,1)),0<t.indents&&(n+=e.level()-1),r=a.rowGroup().getHeaderText(e),h.addText(i,n,r,t.rowGroupHeaderStyle),0<t.indents&&(l+=t.indents-(e.level()-1)),o=1;o<l;o++)h.addBlank(i,o+n,t.rowGroupHeaderStyle);return h.addMerge(i,n,1,l),h.setRowLevel(i,e.level()),1},$_buildGroupFooter:function(t,e,i,n,s){var r,o,a,h,l,u,d,c,_=t.grid,f=(_.rowGroup(),t.book),g=f.sheet(),m=t.colArr,p=m.groupFooterRowCount(),w=m.colCount(),v=_.rowGroup().footerStyles(),C=t.rowGroupFooterStyles,I=t.indents,R=e.level();for(_.layoutManager(),t.indicator&&(n+=this.$_buildIndicatorCell(t,s,i,n,p)),u=0;u<p;u++){if(d=i+u,c=n,0<I){for((l=C[(h=(a=m.getGroupFooter(u,0)).column).$_hash])||(this._runStyles.clearValues(),this._runStyles.extend(h.groupFooter().styles()),this._runStyles.setParent(v),l=this.$_addStyle(f,this._runStyles),C[h.$_hash]=l),r=0;r<R-2;r++)c++;for(;r<I;r++)g.addBlank(d,c,l),c++}for(r=0;r<w;r++){if(o=r+c,(l=C[(h=(a=m.getGroupFooter(u,r)).column).$_hash])||(this._runStyles.clearValues(),this._runStyles.extend(h.groupFooter().styles()),this._runStyles.setParent(v),l=this.$_addStyle(f,this._runStyles),C[h.$_hash]=l),0<a.colIndex||0<a.rowIndex)g.addBlank(d,o,l);else{var y=w6.getValue(e,h);isNaN(y)?(y=S4(y)?y:h.groupFooter().text(),g.addText(d,o,y,l)):g.addNumber(d,o,y,l),(1<a.rowSpan||1<a.colSpan)&&g.addMerge(d,o,a.rowSpan,a.colSpan)}t.rowGrouped&&g.setRowLevel(d,e.level())}}return p},$_buildMergedGroupHeader:function(t,e,i,n,s){var r,o,a,h,l=t.grid,u=t.book.sheet(),d=t.colArr,c=d.colCount(),_=e.level();for(t.indicator&&(n+=this.$_buildIndicatorCell(t,s,i,n,1)),t.columnMerged&&(r=_-1,o=d.getItem(0,r).column,this.$_buildValueCell(t,i,n+r,e.firstLeaf(),o),t.mergeHeads[o.$_hash]=i),a=l.rowGroup().getHeaderText(e),h=n+_,u.addText(i,h++,a,t.rowGroupHeaderStyle);h<c+n;h++)u.addBlank(i,h,t.rowGroupHeaderStyle);return u.addMerge(i,_+n,1,c-_),1},$_buildMergedGroupFooter:function(t,e,i,n,s){var r,o,a,h,l,u,d,c=t.grid,_=(c.rowGroup(),t.book),f=_.sheet(),g=t.colArr,m=g.dataRowCount(),p=g.colCount(),w=c.rowGroup().footerStyles(),v=t.rowGroupFooterStyles,C=t.columnStyles,I=(t.options.isIndicatorDataRow(c),e.level()-1);for(c.layoutManager(),t.indicator&&(n+=this.$_buildIndicatorCell(t,s,i,n,m)),o=0;o<I;o++)if(h=C[(a=g.getItem(0,o).column).$_hash],t.allItems||e.parent().expanded())for(r=0;r<m;r++)f.addBlank(i+r,n+o,h);else for(r=0;r<m;r++)this.$_buildValueCell(t,i+r,n+o,e.parent().firstLeaf(),a);for(t.columnMerged&&(t.allItems||e.parent().expanded())&&(r=t.mergeHeads[a.$_hash],f.addMerge(r,n+I-1,i+m-r,1)),r=0;r<m;r++)for(l=i+r,o=I;o<p;o++){if(u=o+n,(h=v[(a=(d=g.getItem(r,o)).column).$_hash])||(this._runStyles.clearValues(),this._runStyles.extend(a.footer().styles()),this._runStyles.setParent(w),h=this.$_addStyle(_,this._runStyles),v[a.$_hash]=h),0<d.colIndex||0<d.rowIndex)f.addBlank(l,u,h);else{var R=w6.getValue(e,a);isNaN(R)?(R=S4(R)?R:a.groupFooter().text(),f.addText(l,u,R,h)):f.addNumber(l,u,R,h),(1<d.rowSpan||1<d.colSpan)&&f.addMerge(l,u,d.rowSpan,d.colSpan)}t.rowGrouped&&f.setRowLevel(l,I)}return m},$_buildGroupChartRow:function(t,e,i,n,s){t.grid;var r,o,a=t.book.sheet(),h=t.colArr.colCount();for(e.level(),t.indicator&&(n+=this.$_buildIndicatorCell(t,s,i,n,1)),0<t.indents&&(n+=e.level()-1),r=e.displayText(),a.addText(i,n,r,null),0<t.indents&&(h+=t.indents-(e.level()-1)),o=1;o<h;o++)a.addBlank(i,o+n,null);return a.addMerge(i,n,1,h),a.setRowLevel(i,e.level()),1},$_buildItem:function(t,e,i,n,s){var r=0,o=t.grid,a=t.allItems,h=a?a[n]:o.getRow(n);if(h instanceof v4)r=this.$_buildRow(t,h,e,i,(s?h.dataIndex():n)+1);else if(h instanceof U6)r=this.$_buildGroupRow(t,h,e,i,n+1);else if(h instanceof P0)r=this.$_buildMergedGroupHeader(t,h,e,i,n+1);else if(h instanceof o0)r=this.$_buildMergedGroupFooter(t,h,e,i,n+1);else if(h instanceof m7)r=this.$_buildGroupFooter(t,h,e,i,n+1);else if(!(h instanceof K47))throw"Unkonw item type";return r},$_buildItems:function(t){var e,i=this._curRow,n=this._curCol,s=t.grid,r=t.options.isIndicatorDataRow(s),o=t.allItems,a=o?o.length:s.rowCount(),h=i;for(t.book.setStylePivot(),e=0;e<a;e++)h+=this.$_buildItem(t,h,n,e,r);return(this._curRow=h)-i},$_buildItemsAsync:function(o,a,h){var l=this,t=this._curRow,u=this._curCol,e=o.grid,d=o.options.isIndicatorDataRow(e),i=o.allItems,c=i?i.length:e.rowCount();this._monitor(o,"buildItems[0]"),0<c&&function t(e,i,n){var s,r=Math.min(i+n,c);try{for(s=i;s<r;s++)e+=l.$_buildItem(o,e,u,s,d);l._curRow=e,l._current+=a*(r-i)/c,l._monitor(o,"buildItems["+s+"]"),s<c?N5(function(){t(e,s,200)}):(o.footer&&l.$_buildFooter(o),l._monitor(o,"buildFooter"),h.call(l,o))}catch(t){l._doFinished(o,t)}}(t,0,200)},$_buildTreeHeader:function(t){return this.$_buildHeader(t)},$_buildTreeSummary:function(t){this.$_buildSummary(t)},$_buildTreeFooter:function(t){var e=this._curRow,i=this.$_buildFooter(t);return t.book.sheet().setRowLevel(e,1),i},$_buildTreeRow:function(t,e,i,n,s){t.grid;var r,o,a,h,l,u,d,c,_,f=t.book.sheet(),g=t.colArr,m=g.dataRowCount(),p=g.colCount(),w=t.columnStyles,v=t.indents,C=e.level();for(t.indicator&&(n+=this.$_buildIndicatorCell(t,s,i,n,m)),o=0;o<m;o++){if(a=i+o,h=0<v?n+C-1:n,d=w[(u=(l=g.getItem(o,0)).column).$_hash],c=0<v?v-C+1:0,0<l.colIndex||0<l.rowIndex)for(f.addBlank(a,h,d),r=0;r<c;r++)f.addBlank(a,1+r+h,d);else{for(this.$_buildValueCell(t,a,h,e,u),r=0;r<c;r++)f.addBlank(a,1+r+h,d);f.addMerge(a,h,l.rowSpan,l.colSpan+c)}for(h=0<v?n+v:n,r=1;r<p;r++)_=r+h,d=w[(u=(l=g.getItem(o,r)).column).$_hash],0<l.colIndex||0<l.rowIndex?f.addBlank(a,_,d):(this.$_buildValueCell(t,a,_,e,u),(1<l.rowSpan||1<l.colSpan)&&f.addMerge(a,_,l.rowSpan,l.colSpan));f.setRowLevel(i,e.level())}return m},$_buildTreeRowFooter:function(t,e,i,n,s){var r,o,a,h,l,u,d,c,_,f=t.grid,g=t.book,m=g.sheet(),p=t.colArr,w=p.groupFooterRowCount(),v=p.colCount(),C=f.treeOptions().footerStyles(),I=t.rowFooterStyles,R=t.indents,y=e.level();for(f.layoutManager(),g.setStylePivot(),t.indicator&&(n+=this.$_buildIndicatorCell(t,s,i,n,w)),u=0;u<w;u++){if(d=i+u,c=n,0<R){for((l=I[(h=(a=p.getGroupFooter(u,0)).column).$_hash])||(this._runStyles.clearValues(),this._runStyles.extend(h.groupFooter().styles()),this._runStyles.setParent(C),l=this.$_addStyle(g,this._runStyles),I[h.$_hash]=l),r=0;r<y-2;r++)c++;for(;r<R;r++)m.addBlank(d,c,l),c++}for(r=0;r<v;r++)o=r+c,(l=I[(h=(a=p.getGroupFooter(u,r)).column).$_hash])||(this._runStyles.clearValues(),this._runStyles.extend(h.groupFooter().styles()),this._runStyles.setParent(C),l=this.$_addStyle(g,this._runStyles),I[h.$_hash]=l),0<a.colIndex||0<a.rowIndex?m.addBlank(d,o,l):(_=w6.getValue(e,h),isNaN(_)?(_=S4(_)?_:h.groupFooter().text(),m.addText(d,o,_,l)):m.addNumber(d,o,_,l),(1<a.rowSpan||1<a.colSpan)&&m.addMerge(d,o,a.rowSpan,a.colSpan)),m.setRowLevel(d,e.level())}return w},$_buildTreeItem:function(t,e,i,n,s){var r=0,o=t.grid,a=t.allItems,h=a?a[n]:o.getRow(n);if(h instanceof Z2)r=this.$_buildTreeRow(t,h,e,i,(s?h.dataIndex():n)+1);else if(h instanceof q9)r=this.$_buildTreeRowFooter(t,h,e,i,(s?h.dataIndex():n)+1);else if(!(h instanceof K47))throw"Unkonw tree item type";return r},$_buildTreeItems:function(t){var e,i=this._curRow,n=this._curCol,s=t.grid,r=t.options.isIndicatorDataRow(s),o=t.allItems,a=o?o.length:s.rowCount(),h=i;for(t.book.setStylePivot(),e=0;e<a;e++)h+=this.$_buildTreeItem(t,h,n,e,r);return(this._curRow=h)-i},$_buildTreeItemsAsync:function(o,a,h){var l=this,t=this._curRow,u=this._curCol,e=o.grid,d=o.options.isIndicatorDataRow(e),i=o.allItems,c=i?i.length:e.rowCount();this._monitor(o,"buildItems[0]"),0<c&&function t(e,i,n){var s,r=Math.min(i+n,c);try{for(s=i;s<r;s++)e+=l.$_buildTreeItem(o,e,u,s,d);l._curRow=e,l._current+=a*(r-i)/c,l._monitor(o,"buildItems["+s+"]"),s<c?N5(function(){t(e,s,100)}):(o.footer&&l.$_buildTreeFooter(o),l._monitor(o,"buildFooter"),h.call(l,o))}catch(t){l._doFinished(o,t)}}(t,0,100)},$_buildZip:function(t,e){var i,n,s,r,o,a,h,l,u=e.options,d=u.async(),c=u.fileName()||"dataludi.xlsx",_="local"==u.target();if(!JSZip.support.blob&&_)return this._doFinished(e),O0(o="not supported on this browser"),I7(o),!1;for(navigator.userAgent.toLowerCase().indexOf("chrome"),i=new JSZip,n=0;n<t.length;n++)s=(s=t[n].body).replace(/xmlns=""/g,""),i.file(t[n].key,s);if(d)if(h=(a=this)._current,l=100-h-2,i.generateAsync)(_?i.generateAsync({type:"blob",compression:"DEFLATE"},function(t){a._current=h+l*t.percent/100,a._monitor(e,"zipping["+t.percent.toFixed(0)+"]")}).then(function(t){u6(t,c),a._current+=2,a._monitor(e,"save to "+c),a._doFinished(e)}):i.generateAsync({type:"base64",compression:"DEFLATE"},function(t){a._current=h+l*t.percent/100,a._monitor(e,"zipping["+t.percent.toFixed(0)+"]")}).then(function(t){n8(u.url(),c,t),a._current+=2,a._monitor(e,"save to "+c),a._doFinished(e)})).catch(function(t){a._doFinished(e,t)});else if(_){if(r=i.generate({type:"blob",compression:"DEFLATE"}),u.noSave())return r;u6(r,c),this._doFinished(e)}else{if(r=i.generate({type:"base64",compression:"DEFLATE"}),u.noSave())return r;n8(u.url(),c,r),this._doFinished(e)}else if(i.generateAsync)_?i.generateAsync({type:"blob",compression:"DEFLATE"}).then(function(t){u6(t,c)}):i.generateAsync({type:"base64",compression:"DEFLATE"}).then(function(t){n8(u.url(),c,t)});else if(_){if(r=i.generate({type:"blob",compression:"DEFLATE"}),u.noSave())return r;u6(r,c)}else{if(r=i.generate({type:"base64",compression:"DEFLATE"}),u.noSave())return r;n8(u.url(),c,r)}return!0}}),i4=A2("TreeSummaryScope",{DESCENDTANT:"descendant",ALL:"all",CHILD:"child",PARENT_CHILD:"parentChild",GROUP:"group",LEAF:"leaf"}),I98=I1("TreeDataTag",E8,{init:function(){this._super()},addRow:function(t,e){},addRows:function(t,e){},insertRows:function(t){}}),n68=I1("TreeDataTagCollection",i07,{init:function(t){this._super(),this._owner=t,this._items=null,this._tag=null},addRow:function(t,e){if(this._tag)this._tag.addRow(t,e);else if(this._tags){var i,n=this._tags;for(i=n.length-1;0<=i;i--)n[i].addRow(t,e)}},addRows:function(t,e){if(this._tag)this._tag.addRows(t,e);else if(this._tags){var i,n=this._tags;for(i=n.length-1;0<=i;i--)n[i].addRows(t,e)}},insertRows:function(t){if(this._tag)this._tag.insertRows(t);else if(this._tags){var e,i=this._tags;for(e=i.length-1;0<=e;e--)i[e].insertRows(t)}}}),Z47=I1("TreeDataSource",null,{init:function(t,e){C4.init.call(this,t,e),this._provider=t,this._rootRow=e,this._rows=null,this._rowCount=0},provider:function(){return this._provider},rootRow:function(){return this._rootRow},insertedRows:function(){return this._rows},insertedCount:function(){return this._rowCount},_prepareLoad:function(t){this._rowCount=0,this._rows=[]},_objectToArray:function(t,e){for(var i=new Array(s),n=0,s=e.fieldCount();n<s;n++){var r=e.getFieldName(n);t.hasOwnProperty(r)&&(i[n]=t[r])}return i},_createRow:function(t,e){return this._provider._doCreateRow(t,e)},_rowAdded:function(t,e){this._rowCount++,e.parent()===t&&this._rows.push(e)},_insertRow:function(t,e,i,n,s){var r=this._createRow(n);return e.$$_insertChild(null,i,r,!s),this._rowAdded(t,r),r},_addRow:function(t,e,i){var n=this._createRow(i);return e.$$_insertChild(null,e.count(),n,!0),this._rowAdded(t,n),n}}),i47=I1("ArrayTreeSource",Z47,{init:function(t,e){i47.Base.init.call(this,t,e),this.checkParentProc=null},load:function(t,e,i,n,s,r){return this._loadData(e,t,i,n,s,r)},_loadData:function(t,e,i,n,s,r){var o,a,h,l;if(this._prepareLoad(e),!t||t.length<1)return this._rowCount;for(a=[],i>=(o=this.provider()).fieldCount()&&(i=-1),h=0,l=t.length;h<l;h++)a[h]=h,V1(t[h])||(t[h]=this._objectToArray(t[h],o));s&&0<=i&&this.$_sortRows(a,t,i,0,l-1),o.beginUpdate();try{r instanceof w17?r.prepare(o.filterRuntime().prepare(o)):r=null,this.$_buildTree(e||this.rootRow(),a,t,i,n,r)}finally{o.endUpdate(!1)}return this.insertedCount()},$_sortRows:function(t,s,r,e,i){function n(t,e){var i=s[t][r],n=s[e][r];return i==n?0:i<n?-1:1}var o,a,h,l;do{h=t[B1(((o=e)+(a=i))/2)];do{for(;!(n(h,t[o])<=0);)o++;for(;!(0<=n(h,t[a]));)a--;o<=a&&(o!=a&&(l=t[o],t[o]=t[a],t[a]=l),o++,a--)}while(o<=a);e<a&&this.$_sortRows(t,s,r,e,a),e=o}while(e<i)},$_buildTree:function(r,t,e,o,a,i){function n(t,e,i,n){var s=t._createRow(n,c);return!a&&0<=o&&(s.$$_tree=n[o]),i.$$_insertChild(null,i.count(),s,!0),t._rowAdded(e,s),s}function s(t,e,i){var n=e[o];if(n)for(;t!=r;){var s=a?t.getValue(o):t.$$_tree;if(i){if(i(s,n))return t}else if(0==n.indexOf(s))return t;t=t.parent()}return r}var h,l,u,d,c=a?-1:o,_=0;if(i){for(;_<t.length;)if(h=e[t[_++]],u=s(r,h),i.select(_,u,u.count(),h)){l=n(this,r,u,h);break}}else h=e[t[_]],u=s(r,h),l=n(this,r,u,h),_++;if(t.length>_)for(d=t.length;_<d;_++)!(u=s(l,h=e[t[_]]))||i&&!i.select(_,u,u.count(),h)||(l=n(this,r,u,h));0<=o&&r.visitAll(function(t){delete t.$$_tree})}}),V47=I1("JsonTreeSource",Z47,{init:function(t,e){V47.Base.init.call(this,t,e)},load:function(t,e,i,n,s,r,o,a){return this._loadData(i,t,e,n,s,r,o,a)},_loadData:function(t,e,i,n,s,r,o,a){if(this._prepareLoad(e),"string"==typeof t&&(t=JSON.parse(t)),t){var h=l0.extractJson(t,n);if(h&&0<h.length){var l=this.provider();l.beginUpdate();try{a instanceof w17?a.prepare(l.filterRuntime().prepare(l)):a=null,this.$_buildTree(l,e||this.rootRow(),i,h,s,r,o,a)}finally{this.provider().endUpdate(!1)}}}return this._rowCount},$_buildTree:function(t,p,e,i,w,n,v,C){var s=t.fields(),r=t.getFieldNames(),o=s.length,I=new Array(o);if(n)for(var a=0;a<o;a++)I[a]=s[a].dataType()==a1.NUMBER;!function t(e,i,n,s,r){for(var o=r.length,a=0,h=0,l=s.length;h<l;h++){for(var u=s[h],d=new Array(o),c=0;c<o;c++){var _=r[c];if(u.hasOwnProperty(_)){var f=u[_];f&&I[c]&&0<f.length&&(f=f.replace($_currencyreg,"")),d[c]=f}}if(!C||C.select(h,p,n+a,d)){var g=e._insertRow(p,i,n+a,d,v);if(a++,u.hasOwnProperty(w)){var m=u[w];V1(m)&&0<m.length&&t(e,g,0,m,r)}}}}(this,p,e,i,r)}}),S47=I1("XmlTreeSource",Z47,{init:function(t,e){S47.Base.init.call(this,t,e)},load:function(t,e,i,n,s,r,o,a,h){return this._loadData(i,t,e,n,s,r,o,a,h)},_loadData:function(t,e,i,n,s,r,o,a,h){if(this._prepareLoad(e),t){var l="string"==typeof t?r9(t):t;if(l&&l.documentElement){var u=l0.extractXml(l.documentElement,n);if(u&&0<u.length){var d=this.provider();d.beginUpdate();try{a instanceof w17?a.prepare(d.filterRuntime().prepare(d)):a=null,this.$_buildTree(d,e||this.rootRow(),i,u,s,n,r,o,a)}finally{this.provider().endUpdate(!1)}}}}return this._rowCount},$_buildTree:function(t,m,e,i,p,w,n,v,C){var s,r=t.fields(),I=t.getFieldNames(),R=r.length,y=new Array(R);if(n)for(s=0;s<R;s++)y[s]=r[s].dataType()==a1.NUMBER;!function t(e,i,n,s,r){var o,a,h,l,u,d,c,_,f,g=0;for(o=0,a=s.length;o<a;o++){for(h=s[o],l=R0.xmlToRow(h,r,I),u=0;u<R;u++)(d=l[u])&&y[u]&&0<d.length&&(d=d.replace($_currencyreg,"")),l[u]=d;C&&!C.select(o,m,n+g,l)||(c=e._insertRow(m,i,n+g,l,v),g++,p&&(_=l0.extractXml(h,p))&&0<_.length&&(h=_[0]),(f=l0.extractXml(h,w))&&0<f.length&&t(e,c,0,f,r))}}(this,m,e,i,r)}}),l68=I1("TreeDataActionGroup",S07,{init:function(t,e){this._super(t,e)},clearRows:function(){return this.add(new Z57(this.ds))},setRows:function(t,e,i,n,s){return this.add(new i57(this.ds,t,e,i,n,s))},setXmlRows:function(t,e,i,n,s){return this.add(new V57(this.ds,t,e,i,n,s))},setJsonRows:function(t,e,i,n,s){return this.add(new S57(this.ds,t,e,i,n,s))},insertDataRows:function(t,e,i,n,s,r,o){return this.add(new v47(this.ds,t,e,i,n,s,r,o))},appendDataRows:function(t,e,i,n,s,r){var o=t?t.count():this.ds._rootRow.count();return this.add(new v47(this.ds,t,o,e,i,n,s,r))},insertXmlRows:function(t,e,i,n,s,r,o){return this.add(new B47(this.ds,t,e,i,n,s,r,o))},appendXmlRows:function(t,e,i,n,s,r){var o=t?t.count():this.ds._rootRow.count();return this.add(new B47(this.ds,t,o,e,i,n,s,r))},insertJsonRows:function(t,e,i,n,s,r,o){return this.add(new T47(this.ds,t,e,i,n,s,r,o))},appendJsonRows:function(t,e,i,n,s,r){var o=t?t.count():this.ds._rootRow.count();return this.add(new T47(this.ds,t,o,e,i,n,s,r))},setValue:function(t,e,i){return this.add(new t17(this.ds,t,e,i,!0,!0,!1))},setValueEx:function(t,e,i,n,s,r){return this.add(new t17(this.ds,t,e,i,n,s,r))},updateRow:function(t,e,i,n,s,r){return this.add(new a57(this.ds,t,e,i,n,s,r))},insertRow:function(t,e,i,n,s){return this.add(new a47(this.ds,t,e,i,n,s))},addRow:function(t,e,i,n){var s=this.ds,r=null==t?s._rootRow:s.$_getRow(t);return r&&this.add(new a47(s,r,r.count(),e,i,n))},insertRows:function(t,e,i,n,s){return this.add(new q47(this.ds,t,e,i,n,s))},addRows:function(t,e,i,n){var s=this.ds,r=null==t?s._rootRow:s.$_getRow(t);return r&&this.add(new q47(s,r,r.count(),e,i,n))},deleteRow:function(t){return this.add(new s47(this.ds,t))},deleteRows:function(t){return this.add(new q57(this.ds,t))},setRowState:function(t,e,i){return this.add(new v57(this.ds,t,e,i))},setRowStates:function(t,e,i,n){return this.add(new B57(this.ds,t,e,i,n))},clearRowStates:function(t,e,i){return this.add(new T57(this.ds,t,e,i))},restoreUpdatedStates:function(t){return this.add(new s57(this.ds,t))},restoreUpdatedRows:function(t){return this.add(new f57(this.ds,t))},setRowTag:function(t,e){return this.add(new u57(this.ds,t,e))},setRowTags:function(t,e){return this.add(new g57(this.ds,t,e))},unsetRowTags:function(t,e){return t=t&&0<t.length?t:null,e=e&&0<e.length?e:null,t||e?this.add(new r57(this.ds,t,e)):this.add(new R17(this.ds))},clearRowTags:function(){return this.add(new R17(this.ds))}}),Z57=I1("TreeDataClearRowsCommand",K2,{init:function(t){this._super(t)},_doUndo:function(t,e){t.$_restoreAll(this,e,!0)},_doPostUndo:function(t){t._fireRefresh(this),t._fireRowCountChanged(this)},_doKeep:function(t,e){return t.$_saveAll(this,{},!1)},_doRun:function(t,e){if(0<t.rowCount()&&t.isDeletable())return e&&(t.$_saveAll(this,e,!0),this._setReady()),t.$_clearRows(),!e&&this._doPostRun(t),!0;this.throwEmpty()},_doPostRun:function(t){var e=t.$_cmd(this);t._fireRefresh(e),t._fireRowCountChanged(e)},_doRedo:function(t,e){return t.$_restoreAll(this,e,!1),!0},_doPostRedo:function(t){t._fireRefresh(this),t._fireRowCountChanged(this)}}),i57=I1("TreeDataSetRowsCommand",K2,{init:function(t,e,i,n,s,r){this._super(t),this.rows=e,this.treeField=i,this.useTreeField=n,this.needSorting=s,this.filter=r},_doUndo:function(t,e,i){var n=t.rowCount();t.$_clearRows(),t.$_restoreAll(this,e,!0),i.cnt=n},_doPostUndo:function(t,e){t._fireRefresh(this),0<e.cnt&&t._fireRowCountChanged(this)},_doKeep:function(t,e){return t.$_saveAll(this,{},!1)},_doRun:function(t,e){var i,n,s=this.rows,r=this.treeField,o=this.useTreeField,a=this.needSorting,h=this.filter;if(!t.isAppendable())return this.throwEmpty(0);if(0<t.rowCount()&&!t.isDeletable())return this.throwEmpty(0);t.refreshFieldFormats(),e&&(t.$_saveAll(this,e,!0),this._setReady()),t.beginUpdate();try{t.$_clearRows(),s&&0<s.length&&((i=new i47(t,t._rootRow)).checkParentProc=t.checkParentProc,n=i.load(null,s,r,o,a,h),t._checkSum(n))}finally{t.endUpdate(!1)}return t.setDataInited(!0),t._tags.setRows(),!e&&this._doPostRun(t),t.rowCount()},_doPostRun:function(t){var e=t.$_cmd(this);t._fireRefresh(e),t._fireRowCountChanged(e)},_doRedo:function(t,e){t.$_restoreAll(this,e,!0),t._tags.setRows()},_doPostRedo:function(t){t._fireRefresh(this),t._fireRowCountChanged(this)}}),V57=I1("TreeDataSetXmlRowsCommand",K2,{init:function(t,e,i,n,s,r){this._super(t),this.rows=e,this.rowsProp=i,this.childRowsProp=n,this.currency=s,this.filter=r},_doUndo:function(t,e,i){var n=t.rowCount();t.$_clearRows(),t.$_restoreAll(this,e,!0),i.cnt=n},_doPostUndo:function(t,e){t._fireRefresh(this),0<e.cnt&&t._fireRowCountChanged(this)},_doKeep:function(t,e){return t.$_saveAll(this,{},!1)},_doRun:function(t,e){var i,n=this.rows,s=this.rowsProp,r=this.childRowsProp,o=this.currency,a=this.filter;if(!t.isAppendable())return this.throwEmpty(0);if(0<t.rowCount()&&!t.isDeletable())return this.throwEmpty(0);t.refreshFieldFormats(),e&&(t.$_saveAll(this,e,!0),this._setReady()),t.beginUpdate();try{t.$_clearRows(),n&&(i=new S47(t,t._rootRow).load(null,0,n,s,r,o,a),t._checkSum(i))}finally{t.endUpdate(!1)}return t.setDataInited(!0),t._tags.setRows(),!e&&this._doPostRun(t),t.rowCount()},_doPostRun:function(t){var e=t.$_cmd(this);t._fireRefresh(e),t._fireRowCountChanged(e)},_doRedo:function(t,e){t.$_restoreAll(this,e,!0),t._tags.setRows()},_doPostRedo:function(t){t._fireRefresh(this),t._fireRowCountChanged(this)}}),S57=I1("TreeDataSetJsonRowsCommand",K2,{init:function(t,e,i,n,s,r){this._super(t),this.rows=e,this.rowsProp=i,this.childRowsProp=n,this.currency=s,this.filter=r},_doUndo:function(t,e,i){var n=t.rowCount();t.$_clearRows(),t.$_restoreAll(this,e,!0),i.cnt=n},_doPostUndo:function(t,e){t._fireRefresh(this),0<e.cnt&&t._fireRowCountChanged(this)},_doKeep:function(t,e){return t.$_saveAll(this,{},!1)},_doRun:function(t,e){var i,n=this.rows,s=this.rowsProp,r=this.childRowsProp,o=this.currency,a=this.filter;if(!t.isAppendable())return this.throwEmpty(0);if(0<t.rowCount()&&!t.isDeletable())return this.throwEmpty(0);t.refreshFieldFormats(),e&&(t.$_saveAll(this,e,!0),this._setReady()),t.beginUpdate();try{t.$_clearRows(),n&&(i=new V47(t,t._rootRow).load(null,0,n,s,r,o,a),t._checkSum(i))}finally{t.endUpdate(!1)}return t.setDataInited(!0),t._tags.setRows(),!e&&this._doPostRun(t),t.rowCount()},_doPostRun:function(t){var e=t.$_cmd(this);t._fireRefresh(e),t._fireRowCountChanged(e)},_doRedo:function(t,e){t.$_restoreAll(this,e,!0),t._tags.setRows()},_doPostRedo:function(t){t._fireRefresh(this),t._fireRowCountChanged(this)}}),t17=I1("TreeDataSetValueCommand",K2,{init:function(t,e,i,n,s,r,o){this._super(t),this.row=e,this.field=i,this.newValue=n,this.checkDiff=s,this.strictDiff=r,this.noEvent=o},$_updating:function(){return!0},_doUndo:function(t,e){var i=this.row;this.field,i._values=e.values,i._state=e.state,i._orgValues=e.orgValues},_doPostUndo:function(t){t._valueChanged(this,this.row,this.field)},_doKeep:function(t,e){var i=this.row,n={};return n.values=i._values.concat(),n.state=i._state,n.orgVals=i._orgValues,n},_doRun:function(t,e){var i=this.row,n=this.field,s=this.newValue;return this.row=i=t.$_getRow(i),i&&i.$_setValue(n,s,!1,this.checkDiff,this.strictDiff,this.noEvent,e,t.$_cmd(this))?(!e&&this._doPostRun(t),!0):this.throwEmpty(!1)},_doPostRun:function(t){if(!this.noEvent){var e=t.$_cmd(this);t._valueChanged(e,this.row,this.field)}},_doRedo:function(t,e){var i=this.row;this.field,i._values=e.values,i._state=e.state,i._orgValues=e.orgVals},_doPostRedo:function(t){t._valueChanged(this,this.row,this.field)}}),a57=I1("TreeDataUpdateRowCommand",K2,{init:function(t,e,i,n,s,r,o){this._super(t),this.row=e,this.values=i,this.checkDiff=n,this.strictDiff=s,this.checkEmpty=r,this.noState=o},$_updating:function(){return!0},_doUndo:function(t,e){var i=this.row;i._values=e.values,i._state=e.state,i._orgValues=e.orgValues,t._tags.$_restoreRow(this,i)},_doPostUndo:function(t){t._rowUpdated(this,this.row)},_doKeep:function(t,e){var i=this.row,n={};return n.values=i._values.concat(),n.state=i._state,n.orgValues=i._orgValues,n},_doRun:function(t,e){var i=this.row,n=this.values,s=this.checkDiff,r=this.strictDiff,o=this.checkEmpty,a=this.noState;return this.row=i=t.$_getRow(i),i&&i.$_update(n,s,r,o,!1,!a,e,t.$_cmd(this))?(e&&t._tags.$_saveRow(this,i),!e&&this._doPostRun(t),!0):this.throwEmpty(!1)},_doPostRun:function(t){var e=t.$_cmd(this);t._rowUpdated(e,this.row)},_doRedo:function(t,e){var i=this.row;t._tags.$_saveRow(this,i),i._values=e.values,i._state=e.state,i._orgValues=e.orgVals},_doPostRedo:function(t){t._rowUpdated(this,this.row)}}),a47=I1("TreeDataInsertRowCommand",K2,{init:function(t,e,i,n,s,r){this._super(t),this.parent=e,this.index=i,this.values=n,this.noState=s,this.field=void 0===r?-1:r},_doUndo:function(t,e){var i=this.parent,n=this.index,s=this.child;i.$$_removeChild(s,n)},_doPostUndo:function(t){t._rowRemoved(this,this.child)},_doKeep:function(t,e){return this.Empty()},_doRun:function(t,e){var i=t.$_cmd(this),n=this.parent,s=this.index,r=this.values,o=this.noState;if(this.parent=n=null==n?t._rootRow:t.$_getRow(n),!n)return this.throwEmpty(null);if(s<0||s>n.count())throw new RangeError("'index' is invalid: "+s);t._fireRowCreating(i,n,s,r);var a=this.child=t.createRow(r,this.field);return a&&t._rowAdding(i,n,s,a,this.field)?(this._setReady(),n.$$_insertChild(i,s,a,o),!e&&this._doPostRun(t),t.setDataInited(!0),a):this.throwEmpty(null)},_doPostRun:function(t){var e=t.$_cmd(this);t._rowAdded(e,this.index,this.child,this.field)},_doRedo:function(t,e){var i=this.parent,n=this.index,s=this.child,r=this.noState;return i.$$_insertChild(this,n,s,r),s},_doPostRedo:function(t){t._rowAdded(this,this.index,this.child,this.field)}}),q47=I1("TreeDataInsertRowsCommand",K2,{init:function(t,e,i,n,s,r){this._super(t),this.parent=e,this.index=i,this.rows=n,this.rowEvents=s,this.noState=r},_doUndo:function(t,e,i){var n=this.parent,s=this.index;n.$_removeChildren(s,e.rows),i.rows=e.rows},_doPostUndo:function(t,e){t._rowsRemoved(this,e.rows)},_doKeep:function(t,e){return{children:e.rows.slice()}},_doRun:function(t,e,i){var n,s,r,o,a,h=t.$_cmd(this),l=this.parent,u=this.index,d=this.rows,c=this.rowEvents&&!e,_=this.noState;if(this.parent=l=null==l?t._rootRow:t.$_getRow(l),!l)return this.throwEmpty(null);if(u<0||u>l.count())throw new RangeError("'index' is invalid: "+u);for(e&&(e.rows=[]),t._fireRowsCreating(h,l,u,d),n=[],s=0,r=d.length;s<r;s++)o=d[s],(a=t.createRow(o))&&n.push(a);return 0<n.length&&0<(d=l._insertChildren(u,n,c,_,e,h)).length?(i.rows=d,!e&&this._doPostRun(t,i),t.setDataInited(!0),d):this.throwEmpty(null)},_doPostRun:function(t,e){var i=t.$_cmd(this);t._rowsAdded(i,this.parent,this.index,e.rows,this.rowEvents)},_doRedo:function(t,e,i){var n,s=this.parent,r=this.index,o=this.noState;n=s.$_insertChildren(this,r,e.children,o),i.rows=n},_doPostRedo:function(t,e){t._rowsAdded(this,this.parent,this.index,e.rows)}}),v47=I1("TreeDataInsertDataRowsCommand",K2,{init:function(t,e,i,n,s,r,o,a){this._super(t),this.parent=e,this.index=i,this.rows=n,this.treeField=s,this.useTreeField=r,this.needSorting=o,this.filter=a},_doUndo:function(t,e,i){var n=this.parent,s=this.index;n.$_removeChildren(s,e.rows),i.rows=e.rows},_doPostUndo:function(t,e){t._rowsRemoved(this,e.rows)},_doKeep:function(t,e){return{children:e.rows.slice()}},_doRun:function(t,e,i){var n,s,r=this.parent,o=this.index,a=this.rows,h=this.treeField,l=this.useTreeField,u=this.needSorting,d=this.filter;if(!(r=null==r?t._rootRow:t.$_getRow(r)))return this.throwEmpty(null);if(o<0||o>r.count())throw new RangeError("'index' is invalid: "+o);if(a){t.refreshFieldFormats(),(n=new i47(t,t._rootRow)).checkParentProc=t.checkParentProc;try{if(s=new t._rowClass,n._loadData(a,s,h,l,u,d),a=s.children(),s._children=null,a&&0<a.length&&(this.parent=r=r||this._rootRow,0<(a=r._insertChildren(o,a,!1,!1,e,t.$_cmd(this))).length))return i.rows=a,!e&&this._doPostRun(t,i),t.setDataInited(!0),a}finally{n=null}}return this.throwEmpty(null)},_doPostRun:function(t,e){var i=t.$_cmd(this);t._rowsAdded(i,this.parent,this.index,e.rows)},_doRedo:function(t,e,i){var n=this.parent,s=this.index;i.rows=n.$_insertChildren(this,s,e.children,!1)},_doPostRedo:function(t,e){t._rowsAdded(this,this.parent,this.index,e.rows)}}),B47=I1("TreeDataInsertXmlRowsCommand",K2,{init:function(t,e,i,n,s,r,o,a){this._super(t),this.parent=e,this.index=i,this.rows=n,this.rowsProp=s,this.childRowsProp=r,this.currency=o,this.filter=a},_doUndo:function(t,e,i){var n=this.parent,s=this.index;n.$_removeChildren(s,e.rows),i.rows=e.rows},_doPostUndo:function(t,e){t._rowsRemoved(this,e.rows)},_doKeep:function(t,e){return{children:e.rows.slice()}},_doRun:function(t,e,i){var n,s,r,o=this.parent,a=this.index,h=this.rows,l=this.rowsProp,u=this.childRowsProp,d=this.currency,c=this.filter;if(!(o=null==o?t._rootRow:t.$_getRow(o)))return this.throwEmpty(null);if(a<0||a>o.count())throw new RangeError("'index' is invalid: "+a);if(h){t.refreshFieldFormats(),n=new S47(t,t._rootRow);try{if(s=new t._rowClass,n._loadData(h,s,0,l,u,d,!0,c,e),r=s.children(),root_children=null,r&&0<r.length&&(this.parent=o=o||this._rootRow,0<(h=o._insertChildren(a,r,!1,!1,e,t.$_cmd(this))).length))return i.rows=h,!e&&this._doPostRun(t,i),t.setDataInited(!0),h}finally{n=null}}return this.throwEmpty(null)},_doPostRun:function(t,e){var i=t.$_cmd(this);t._rowsAdded(i,this.parent,this.index,e.rows)},_doRedo:function(t,e,i){var n=this.parent,s=this.index;i.rows=n.$_insertChildren(this,s,e.children,!1)},_doPostRedo:function(t,e){t._rowsAdded(this,this.parent,this.index,e.rows)}}),T47=I1("TreeDataInsertJsonRowsCommand",K2,{init:function(t,e,i,n,s,r,o,a){this._super(t),this.parent=e,this.index=i,this.rows=n,this.rowsProp=s,this.childRowsProp=r,this.currency=o,this.filter=a},_doUndo:function(t,e,i){var n=this.parent,s=this.index;n.$_removeChildren(s,e.rows),i.rows=e.rows},_doPostUndo:function(t,e){t._rowsRemoved(this,e.rows)},_doKeep:function(t,e){return{children:e.rows.slice()}},_doRun:function(t,e,i){var n,s,r=this.parent,o=this.index,a=this.rows,h=this.rowsProp,l=this.childRowsProp,u=this.currency,d=this.filter;if(!(r=null==r?t._rootRow:t.$_getRow(r)))return this.throwEmpty(null);if(o<0||o>r.count())throw new RangeError("'index' is invalid: "+o);if(a){t.refreshFieldFormats(),n=new V47(t,t._rootRow);try{if(root=new t._rowClass,n._loadData(a,root,0,h,l,u,!0,d),s=root.children(),root_children=null,s&&0<s.length&&(this.parent=r=r||this._rootRow,0<(s=r._insertChildren(o,s,!1,!1,e,t.$_cmd(this))).length))return i.rows=s,!e&&this._doPostRun(t,i),t.setDataInited(!0),s}finally{n=null}}return this.throwEmpty(null)},_doPostRun:function(t,e){var i=t.$_cmd(this);t._rowsAdded(i,this.parent,this.index,e.rows)},_doRedo:function(t,e,i){var n=this.parent,s=this.index;i.rows=n.$_insertChildren(this,s,e.children,!1)},_doPostRedo:function(t,e){t._rowsAdded(this,this.parent,this.index,e.rows)}}),s47=I1("TreeDataDeleteRowCommand",K2,{init:function(t,e){this._super(t),this.row=e},_doUndo:function(t,e,i){t=this.ds;var n,s,r,o,a,h,l,u=this.row;if(s=e.parent,r=e.index,o=e.state,a=e.states,t.softDelete()&&t.checkStates()){for(h=[u],u._changeRowState(this,o,!1,!0),n=a.children.length;n--;)(l=a.children[n])._changeRowState(this,a.states[n],!1),h.push(l);t._tags.$_restoreRow(this,u),i.states=h}else s.$_insertChild(this,r,u,!0,!0),t._tags.$_restoreRow(this,u,!0),i.parent=s,i.index=r},_doPostUndo:function(t,e){e.states?t._statesChanged(this,e.states):t._rowAdded(this,e.index,this.row)},_doKeep:function(t,e){var i,n,s,r,o={},a=e.states.children;if(e.states.states,t.softDelete()&&t.checkStates())for(s=o.rows=[],r=o.states=[],s.push(this.row),r.push(this.row._state),i=a.length;i--;)s.push(n=a[i]),r.push(n._state);return o},_doRun:function(t,e,i){var n,s,r,o=this.row;return this.row=o=t.$_getRow(o),o&&o.dataSet()===t&&(this.parent=s=o.parent(),s&&t._rowRemoving(this,o)&&((r=e||{}).parent=s,r.index=s._children.indexOf(o),r.state=o.rowState(),r.states=n={children:[],states:[]},this._setReady(),t._tags.$_saveRow(this,o,!0),s._removeChild(o,!1,n,t.$_cmd(this))))?(t.softDelete()&&t.checkStates()&&(i.states=r.states.children.concat(o)),!e&&this._doPostRun(t,i),!0):this.throwEmpty(!1)},_doPostRun:function(t,e){var i=t.$_cmd(this);e.states?t._statesChanged(i,e.states):t._rowRemoved(i,this.row)},_doRedo:function(t,e,i){var n,s,r,o=this.row;if(r=e.states){for(n=(s=e.rows).length;n--;)s[n]._changeRowState(this,r[n],!1);i.rows=s}else this.parent._removeChild(o,!1,r,t.$_cmd(this));t._tags.$_saveRow(this,o,!0)},_doPostRedo:function(t,e){e.rows?t._statesChanged(this,e.rows):t._rowRemoved(this,this.row)}}),q57=I1("TreeDataDeleteRowsCommand",K2,{init:function(t,e){this._super(t),this.rows=e},_doUndo:function(t,e,i){var n,s,r,o,a,h;if(parents=e.parents,n=e.rows,s=e.ids,r=e.states.children,o=e.states.states,n&&0<n.length){for(a=0;a<n.length;a++)h=n[a],parents[a].$$_insertChild(this,s[a],h,!0);t._tags.$_restoreRows(this,n,!0),i.rows=n}if(r&&0<r.length){for(a=r.length;a--;)(h=r[a])._changeRowState(this,o[a],!1,!0);t._tags.$_restoreRows(this,r,!0),i.states=r}},_doPostUndo:function(t,e){e.rows&&t._rowsInserted(this,e.rows),e.states&&t._statesChanged(this,e.states)},_doKeep:function(t,e){var i,n,s={};if(e.rows&&0<e.rows.length&&(s.rows=e.rows),e.states.children&&0<(n=e.states.children.length))for(s.stateRows=e.states.children,s.states=new Array(n),i=0;i<n;i++)s.states[i]=s.stateRows[i]._state;return s},_doRun:function(t,e,i){var n,s,r=e||{},o=this.rows;if(!o||o.length<1)return this.throwEmpty(0);for(n=o.length;n--;)o[n]=t.$_getRow(o[n]);return(o=t.arrangeRows(o)).length<1||!t._rowsRemoving(this,o)?this.throwEmpty(0):(this.rows=o.slice(),r.states={children:[],states:[]},this._setReady(),s=t.$_removeRows(this,o,r,this),i.rows=r.rows,i.states=r.states.children,!e&&this._doPostRun(t,i),s)},_doPostRun:function(t,e){var i=t.$_cmd(this);e.states&&t._statesChanged(i,e.states),e.rows&&t._rowsRemoved(i,e.rows)},_doRedo:function(t,e,i){var n,s=e.rows,r=e.stateRows,o=e.states;if(s&&t.$_removeRows(this,s,null,this),r)for(n=r.length;n--;)r[n]._changeRowState(this,o[n],!1);i.rows=s,i.states=r},_doPostRedo:function(t,e){e.states&&t._statesChanged(this,e.states),e.rows&&t._rowsRemoved(this,e.rows)}}),v57=I1("TreeDataSetRowStateCommand",K2,{init:function(t,e,i,n){this._super(t),this.row=e,this.newState=i,this.force=n},_doUndo:function(t,e){var i=this.row,n=e.state;i._changeRowState(this,n,!1,!0)},_doPostUndo:function(t){t._stateChanged(this,this.row)},_doKeep:function(t,e){return this.Empty()},_doRun:function(t,e){var i=this.row,n=this.newState,s=this.force;return this.row=i=t.$_getRow(i),i&&(e&&(e.state=i.rowState()),this._setReady(),i._changeRowState(this,n,!1,s))?(!e&&this._doPostRun(t),!0):this.throwEmpty(!1)},_doPostRun:function(t){var e=t.$_cmd(this);t._stateChanged(e,this.row)},_doRedo:function(t,e){this.row._changeRowState(this,this.newState,!1,!0)},_doPostRedo:function(t){t._stateChanged(this,this.row)}}),B57=I1("TreeDataSetRowStatesCommand",K2,{init:function(t,e,i,n,s){this._super(t),this.rows=e,this.newState=i,this.force=n,this.rowEvents=s},_doUndo:function(t,e,i){var n,s,r,o;for(o=e.rows,r=e.states,n=o.length;n--;)(s=o[n])&&s._changeRowState(this,r[n],!1);i.rows=o},_doPostUndo:function(t,e){t._statesChanged(this,e.rows)},_doKeep:function(t,e){var i,n,s=e.rows.length,r={},o=r.rows=new Array(s),a=r.states=new Array(s);for(i=0;i<s;i++)o[i]=n=e.rows[i],a[i]=n._state;return r},_doRun:function(t,e,i){var n,s,r,o,a,h,l,u=this.rows,d=this.newState,c=this.force,_=this.rowEvents&&!e;if(!t._checkStates&&!c)return this.throwEmpty(!1);for(e&&(h=(e=this.save={}).states=[],n=e.rows=[],this._setReady()),a=_?null:[],s=0,r=u.length;s<r;s++)u[s]=o=t.$_getRow(u[s]),o&&(l=o.rowState(),o._changeRowState(this,d,_)&&(!_&&a.push(o),e&&(n.push(o),h.push(l))));return a&&0<a.length?(i.rows=a,!e&&this._doPostRun(t,i),!0):this.throwEmpty(!1)},_doPostRun:function(t,e){var i=t.$_cmd(this);t._statesChanged(i,e.rows)},_doRedo:function(t,e,i){var n,s,r,o=e.states,a=e.rows;for(n=0,s=a.length;n<s;n++)(r=a[n])&&r._changeRowState(this,o[n]);i.rows=a},_doPostRedo:function(t,e){t._statesChanged(this,e.rows)}}),T57=I1("TreeDataClearRowStatesCommand",K2,{init:function(t,e,i,n){this._super(t),this.states=e,this.deleteRows=i,this.rowEvents=n},_doUndo:function(t,e,i){var n,s,r,o,a,h;if(n=e.deletes,parents=e.parents,s=e.rows,r=e.states,n){for(o=n.length;o--;)h=parents[o],a=n[o],h.$$_insertChild(this,ids[o],a);i.deletes=n}if(0<s.length){for(o=s.length;o--;)(a=s[o])._changeRowState(this,r[o],!1);i.rows=s}},_doPostUndo:function(t,e){e.rows&&0<e.rows.length&&t._statesChanged(this,e.rows),e.deletes&&0<e.deletes.length&&t._rowsInserted(this,e.deletes)},_doKeep:function(t,e){return{}},_doRun:function(t,e){var i=this.states,n=this.deleteRows,s=this.rowEvents&&!e;return this._setReady(),t._rootRow.$_clearRowStates(t.$_cmd(this),i,n,s,!0,e)?(s||!e&&this._doPostRun(t),!0):this.throwEmpty(!1)},_doPostRun:function(t){var e=t.$_cmd(this);t._fireStatesCleared(e)},_doRedo:function(t,e){var i=this.states,n=this.deleteRows;t._rootRow.$_clearRowStates(this,i,n,!1,!0)},_doPostRedo:function(t){t._fireStatesCleared(this)}}),s57=I1("TreeDataRestoreUpdatedStatesCommand",K2,{init:function(t,e){this._super(t),this.rows=e},_doUndo:function(t,e,i){var n;if(V1(e.rows)){for(n=e.rows.length;n--;)e.rows[n]._changeRowState(this,j1.UPDATED,!1),e.rows[n]._orgValues=e.orgs[n];i.rows=e.rows}else e.rows._orgValues=e.orgs,e.rows._changeRowState(this,j1.UPDATED,!1,!0),i.row=e.rows},_doPostUndo:function(t,e){e.rows?t._statesChanged(this,e.rows):e.row&&t._stateChanged(this,e.row)},_doKeep:function(t,e){var i={};return i.rows=V1(e.rows)?e.rows.concat():e.rows,i},_doRun:function(t,e,i){var n,s,r,o=this.rows;if(s=[],e&&(vals=[]),this._setReady(),null==o)t._rootRow.$_restoreState(!0,s,vals);else if(V1(o))for(var a=o.length;a--;)o[a]=n=t.$_getRow(o[a]),n&&(e&&(r=n._orgValues),n.$_restoreState(!1)&&(s.push(n),e&&vals.push(r)));else(n=o)&&(n=t.$_getRow(n))&&(e&&(r=n._orgValues),n.$_restoreState(!1)&&(s.push(n),e&&vals.push(r)));return 1==(i.list=s).length?(e&&(e.rows=s[0],e.orgs=vals[0]),!e&&this._doPostRun(t,i),!0):1<s.length?(e&&(e.rows=s,e.orgs=vals),!e&&this._doPostRun(t,i),!0):this.throwEmpty(!1)},_doPostRun:function(t,e){var i=t.$_cmd(this),n=e.list;1==n.length?t._stateChanged(i,n[0]):1<n.length&&t._statesChanged(i,n)},_doRedo:function(t,e,i){var n,s=e.rows;if(V1(s)){for(n=s.length;n--;)s[n]._state=j1.NONE,delete s[n]._orgValues;i.rows=s}else e.rows._state=j1.NONE,delete e.rows._orgValues,i.row=s},_doPostRedo:function(t,e){e.rows?t._statesChanged(this,e.rows):t._stateChanged(this,e.row)}}),f57=I1("TreeDataRestoreUpdatedRowsCommand",K2,{init:function(t,e){this._super(t),this.rows=e},_doUndo:function(t,e,i){var n,s,r,o,a;for(n=e.rows,s=e.vals,r=e.orgs,o=n.length;o--;)(a=n[o])._values=s[o],a._orgValues=r[o],a._changeRowState(this,j1.UPDATED,!1);i.rows=n},_doPostUndo:function(t,e){t._rowsUpdated(this,e.rows)},_doKeep:function(t,e){var i,n=e.rows,s=e.vals,r={};for(r.rows=n&&n.concat(),r.vals=[],i=0;i<n.length;i--)r.vals.push(s[i].concat());return r},_doRun:function(t,e,i){var n,s,r,o,a=this.rows;if(e&&(n=e.vals=[],s=e.orgs=[],this._setReady()),o=[],null==a)t._rootRow.$_restoreRow(!0,o,n,s);else if(V1(a))for(var h=a.length;h--;)a[h]=r=t.$_getRow(a[h]),r&&r.$_restoreRow(!1,o,n,s);else(r=a)&&(r=t.$_getRow(r))&&r.$_restoreRow(!1,o,n,s);if(!(0<o.length))return this.throwEmpty(!1);e&&(e.rows=o.concat()),i.list=o,!e&&this._doPostRun(t,i)},_doPostRun:function(t,e){var i=t.$_cmd(this);t._statesChanged(i,e.list)},_doRedo:function(t,e,i){var n,s,r,o=e.rows,a=e.vals;for(r=[],n=0;n<o.length;n++)(s=o[n])._values=a[n],delete s._orgValues,s._state=j1.NONE,r.push(s);i.list=r},_doPostRedo:function(t,e){t._statesChanged(this,e.list)}}),u57=I1("TreeDataSetRowTagCommand",K2,{init:function(t,e,i){this._super(t),this.row=e,this.tag=i},_doUndo:function(t,e){this.row._tag=e.tag},_doPostUndo:function(t){t._fireTagChanged(this,this.row)},_doKeep:function(t,e){return this.Empty()},_doRun:function(t,e){var i,n=this.row,s=this.tag;return(n=this.row=t.$_getRow(n))&&s!==(i=n._tag)?(e&&(e.tag=i),this._setReady(),n._tag=s,!e&&this._doPostRun(t),!0):this.throwEmpty(!1)},_doPostRun:function(t){var e=t.$_cmd(this);t._fireTagChanged(e,this.row)},_doRedo:function(t,e){var i=this.row,n=this.tag;i._tag=n},_doPostRedo:function(t){t._fireTagChanged(this,this.row)}}),g57=I1("TreeDataSetRowTagsCommand",K2,{init:function(t,e,i){this._super(t),this.rows=e,this.tag=i},_doUndo:function(t,e,i){var n,s=e.rows,r=e.tags;for(n=s.length;n--;)s[n]._tag=r[n];i.rows=s},_doPostUndo:function(t,e){t._fireTagsChanged(this,e.rows)},_doKeep:function(t,e){return{rows:e.rows}},_doRun:function(t,e,n){var s,r=[],o=this.rows,a=this.tag;if(e&&(e.rows=[],e.tags=[],this._setReady()),null==o&&0<(cnt=t.rowCount()))t._rootRow.visitAll(function(t){a!==t._tag&&(e&&e.tags.push(t._tag),t._tag=a,r.push(t))});else if(o&&0<(cnt=o.length))for(i=0;i<cnt;i++)(s=t.$_getRow(o[i]))&&a!==s._tag&&(e&&e.tags.push(s._tag),s._tag=a,r.push(s));return 0<r.length?(e&&(e.rows=r),n.list=r,!e&&this._doPostRun(t,n),r.length):this.throwEmpty(!1)},_doPostRun:function(t,e){var i=t.$_cmd(this);t._fireTagsChanged(i,e.list)},_doRedo:function(t,e,i){var n,s=e.rows;for(n=s.length;n--;)s[n]._tag=this.tag;i.rows=s},_doPostRedo:function(t,e){t._fireTagsChanged(this,e.rows)}}),r57=I1("TreeDataUnsetRowTagsCommand",K2,{init:function(t,e,i){this._super(t),this.rows=e,this.tags=i},_doUndo:function(t,e,i){var n,s=e.rows,r=e.tags;for(n=s.length;n--;)s[n]._tag=r[n];i.rows=s},_doPostUndo:function(t,e){t._fireTagsChanged(this,e.rows)},_doKeep:function(t,e){return{rows:e.rows}},_doRun:function(t,e,n){var s,r,o=[],a=this.rows,h=this.tags;if(e&&(e.tags=[],this._setReady()),a&&h)for(i=0,cnt=a.length;i<cnt;i++)(s=t.$_getRow(a[i]))&&(r=s._tag,0<=h.indexOf(r)&&(e&&e.tags.push(r),s._tag=void 0,o.push(s)));else if(a)for(i=0,cnt=a.length;i<cnt;i++)(s=t.$_getRow(a[i]))&&void 0!==(r=s._tag)&&(e&&e.tags.push(r),s._tag=void 0,o.push(s));else h&&t._rootRow.visitAll(function(t){r=t._tag,0<=h.indexOf(r)&&(e&&e.tags.push(r),t._tag=void 0,o.push(t))});return 0<o.length?(e&&(e.rows=o),n.list=o,!e&&this._doPostRun(t,n),!0):this.throwEmpty(!1)},_doPostRun:function(t,e){var i=t.$_cmd(this);t._fireTagsChanged(i,e.list)},_doRedo:function(t,e,i){var n,s=e.rows;for(n=s.length;n--;)s[n]._tag=void 0;i.rows=s},_doPostRedo:function(t,e){t._fireTagsChanged(this,e.rows)}}),R17=I1("TreeDataClearRowTagsCommand",K2,{init:function(t){this._super(t)},_doUndo:function(t,e,i){var n,s=e.rows,r=e.tags;for(n=s.length;n--;)s[n]._tag=r[n];i.rows=s},_doPostUndo:function(t,e){t._fireTagsChanged(this,e.rows)},_doKeep:function(t,e){return this.Empty()},_doRun:function(t,e){var i,n=[];return e&&(e.rows=[],e.tags=[],this._setReady()),t._rootRow.visitAll(function(t){void 0!==(i=t._tag)&&(e&&e.rows.push(t),n.push(i),t._tag=void 0)}),n.length<1?this.throwEmpty(!1):(e&&(e.tags=n),!e&&this._doPostRun(t),!0)},_doPostRun:function(t){var e=t.$_cmd(this);t._fireTagsCleared(e)},_doRedo:function(t,e){t._rootRow.visitAll(function(t){t._tag=void 0})},_doPostRedo:function(t){t._fireTagsCleared(this)}}),I6=I1("TreeDataFilterRuntime",e4,{init:function(){I6.Base.init.call(this),this._provider=null,this._fieldCount=0,this._no=-1,this._parent=null,this._index=-1,this._values=null},prepare:function(t){return this._provider=t,this._fieldCount=t?t.fieldCount():0,this},setRow:function(t,e,i,n){this._no=t,this._parent=e,this._index=i,this._values=n},isIdentifier:function(t){return t=t.toLowerCase(),I6.IDENTS.hasOwnProperty(t)?I6.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case I6.ID_NO:return this._no;case I6.ID_PARENT:return this._parent.rowId();case I6.ID_INDEX:return this._index}throw new o4("Invalid identifier key: "+t)},evaluateIndexerI:function(t,e){if(e<0||e>=this._fieldCount)throw new o4("Data field index out of bounds:"+e);switch(t){case I6.ID_VALUES:return this._values[e]}throw new o4("Invalid identifier indexer: "+t)},evaluateIndexerS:function(t,e){switch(t){case I6.ID_VALUES:var i=this.$_getField(e);return this._values[i]}throw new o4("Invalid identifier indexer: "+t)},$_getField:function(t){var e=this._provider.getFieldIndex(t);if(e<0||e>=this._fieldCount)throw new o4("Data field is not exits:"+t);return e}},{ID_NO:0,ID_PARENT:1,ID_INDEX:2,ID_VALUES:3},function(t){t.IDENTS={no:t.ID_NO,row:t.ID_ROW,values:t.ID_VALUES}}),w17=I1("TreeDataFilter",null,{init:function(t){this._super(),this._runtime=null,this._exprNode=null,this.setCriteria(t)},criteria:null,setCriteria:function(t){t!=this._criteria&&(this._criteria=t,this._exprNode=t?J4.Default.parse(t):null)},prepare:function(t){this._runtime=t},select:function(t,e,i,n){return!this._exprNode||(this._runtime.setRow(t,e,i,n),this._exprNode.evaluate(this._runtime))}}),W0=I1("TreeDataRow",null,{init:function(t){this._super(),this._rowId=t,this._tag=void 0,this._children=null,this._descendantCount=0},tag:void 0,setTag:function(t){var e=this.dataSet();e&&e.setRowTag(this,t)},rowId:function(){return this._rowId},rowState:function(){return j1.NONE},oldState:function(){return j1.NONE},setRowState:function(t){var e=this.dataSet();e&&e.setRowState(this,t)},dataSet:function(){return null},parent:function(){return null},index:function(){return-1},level:function(){return-1},count:function(){return this._children?this._children.length:0},descendantCount:function(){return this._descendantCount},children:function(){return this._children?this._children.concat():[]},visitAll:function(t){if(t){var e,i,n,s=this._children;if(s&&0<(i=s.length))for(e=0;e<i;e++){if(!1===t(n=s[e],i,e))return!1;if(!1===n.visitAll(t))return!1}}},visit:function(t,e){if(e=void 0===e?0:e,t&&0<=e){var i,n,s,r=this._children;if(r&&0<(n=r.length))for(i=0;i<n;i++){if(!1===t(s=r[i],n,i))return!1;if(0<e&&!1===s.visit(t,e-1))return!1}}},getDescendants:function(t){if(this._children){var e=[];return this.visit(function(t){e.push(t)},0<t?this.level()+t:1e4),e}return null},getAncestors:function(t){var e=null,i=this.parent();if(i)for(e=[];i&&0<=i.rowId()&&(e.push(i),!(0<t&&e.length==t));)i=i.parent();return e},getChild:function(t){if(0<=t){if(!this._children||t>=this._children.length)throw new RangeError("Index is invalid: "+t);return this._children[t]}throw new RangeError("Index is invalid: "+t)},getChildObjects:function(t,e,i,n){var s=this._children;if(s){var r=[],o=n||this.dataSet();if(o){e=e||"rows",!n&&(i=o.$_getEmptyValue(i));for(var a=0,h=s.length;a<h;a++){var l=s[a],u=l.$_getObject(o,i);t&&(u[e]=l.getChildObjects(!0,e,i,o)),r.push(u)}}return r}return null},$_createOutputs:function(t,e,i,n){var s,r,o=t.length;if(0<o)for(i.$_createOutputRows(t,n),s=0;s<o;s++)(r=t[s][e])&&this.$_createOutputs(r,e,i,n)},getChildOutputObjects:function(t,e,i,n){var s=this.dataSet(),r=this.getChildObjects(e,i=i||"rows",n);return s&&(t instanceof u0||(t=new u0(t)),e?this.$_createOutputs(r,i,s,t):s.$_createOutputRows(r,t)),r},findById:function(t){if(this._children){var e,i,n,s=this._children.length;for(e=0;e<s;e++){if((i=this._children[e]).rowId()==t)return i;if(n=i.findById(t))return n}}return null},indexOf:function(t){return this._children?this._children.indexOf(t):-1},$$_insertChild:function(t,e,i,n){this._children=this._children||[],this._children.splice(e,0,i),this._descendantCountChanged(1+i.descendantCount()),this._attach(i),n||i._changeRowState(t,j1.CREATED,!1)},$_insertChild:function(t,e,i,n,s){this.$$_insertChild(t,e,i,n),s||this._doChildAdded(t,e,i)},_insertChild:function(t,e,i,n,s,r,o){if(this.dataSet(),!i)throw new Error("child is null");if(e<0||e>this._children.length)throw new RangeError("Insert index is invalid: "+e);return!(!n&&!this._doChildAdding(t,e,i)||(o&&o._setReady(),this.$_insertChild(t,e,i,s,r),0))},_addChild:function(t,e,i,n){return this._insertChild(t,this.count(),e,i,n)},_insertChildren:function(t,e,i,n,s,r){if(e&&0!=e.length){if(this._children=this._children||[],t<0||t>this._children.length)throw new RangeError("Insert index is invalid: "+t);var o,a,h=this.dataSet(),l=[];if(cnt=e.length,h._rowsAdding(r,this,t,e))if(i)for(o=0;o<cnt;o++)(a=e[o])instanceof W0&&this._doChildAdding(r,t+o,a)&&(this._children.splice(t+o,0,a),this._descendantCountChanged(1+a.descendantCount()),this._attach(a),l.push(a),s&&s.rows.push(a),n||a._changeRowState(r,j1.CREATED,!0),this._doChildAdded(r,t,a));else{for(r&&r._setReady(),o=0;o<cnt;o++)(a=e[o])instanceof W0&&(this._children.splice(t+o,0,a),this._descendantCountChanged(1+a.descendantCount()),this._attach(a),l.push(a));0<l.length&&(s&&(s.rows=l.concat()),h&&(n||h.$_changeRowStates(r,l,j1.CREATED,!0,!0)))}return l}},$_insertChildren:function(t,e,i,n){var s,r,o=this.dataSet(),a=i.length,h=[];for(s=0;s<a;s++)(r=i[s])instanceof W0&&(this._children.splice(e+s,0,r),this._descendantCountChanged(1+r.descendantCount()),this._attach(r),h.push(r));return 0<(len=h.length)&&(n||o.$_changeRowStates(t,h,j1.CREATED,!0,!0)),h},$$_removeChild:function(t,e){this._children.splice(e,1),this._descendantCountChanged(-1-t.descendantCount()),this._detach(t)},_removeChild:function(t,e,i,n){var s=this.dataSet();if(t&&this._children){var r=this._children.indexOf(t);if(0<=r){if((s=this.dataSet()).softDelete()&&s.checkStates())switch(n&&n._setReady(),t.rowState()){case j1.CREATED:s.deleteCreated()?this.$$_removeChild(t,r):(t._changeRowState(n,j1.CREATE_AND_DELETED,!1),t.$_setChildrenDeleted(j1.CREATE_AND_DELETED,i));break;case j1.DELETED:case j1.CREATE_AND_DELETED:break;default:t._changeRowState(n,j1.DELETED,!1),t.$_setChildrenDeleted(j1.DELETED,i)}else this.$$_removeChild(t,r);return!0}}return!1},$_removeChildren:function(t,e){this.dataSet();var i,n,s=0,r=e.length;for(this._children.splice(t,r),i=0;i<r;i++)s+=1+(n=e[i]).descendantCount(),this._detach(n);this._descendantCountChanged(-s)},$$_clearChildren:function(){this._children&&0<this._children.length&&this._children.splice(0,this._children.length)},_setChildren:function(t){var e,i=-this._descendantCount;if(this.$$_clearChildren(),t&&0<(e=t.length)){this._children||(this._children=[]);for(var n=0;n<e;n++){var s=t[n];this._children.push(s),i+=1+s.descendantCount(),this._attach(s)}}this._descendantCountChanged(i)},findChildren:function(t,e,i,n,s,r){var o,a,h,l,u,d,c=this.dataSet();if(!c||!t||t.length<1||!e||e.length<t.length)return null;if(s=s||[],r=isNaN(r)||r<=0?Q0:r,s.length<r){for(l=[],u=[],d=[],h=t.length,o=0;o<h;o++)0<=(a="string"==typeof t[o]?c.getFieldIndexEx(t[o]):Number(t[o]))&&a<c.fieldCount()&&l.indexOf(a)<0&&(l.push(a),u.push(c.getField(a)),d.push(e[o]));this.$_findChildren(u,l,d,i,n,s,r)}return s},$_findChildren:function(t,e,i,n,s,r,o){var a,h,l,u,d=t.length,c=this.count();for(a=0;a<c&&r.length<o;a++){for(l=this._children[a],u=!0,h=0;h<d;h++){if(s&&!t[h].equalValues(i[h],l.getValue(e[h]))){u=!1;break}if(!s&&!t[h].sameValues(i[h],l.getValue(e[h]))){u=!1;break}}u&&r.push(l)}if(n)for(a=0;a<c&&r.length<o;a++)this._children[a].$_findChildren(t,e,i,!0,s,r,o);return null},isAncestorOf:function(t){if(t&&t!==this){for(var e=t.parent();e&&e!==this;)e=e.parent();return e===this}return!1},_descendantCountChanged:function(t){this._descendantCount+=t;var e=this.parent();e&&e._descendantCountChanged(t)},$_clearRowStates:function(t,e,i,n,s,r){var o,a,h,l,u,d,c=this.dataSet();if(c){if(o=[],a=i?[]:null,this.$_collectStateRows(e,o,a),h=o.length,l=a?a.length:0,0==h&&0==l)return!1;if(r){if(r.deletes=a,r.parents=[],r.ids=[],r.rows=o,r.states=[],a)for(u=0,d=a.length;u<d;u++)r.parents.push(delets[u].parent()),r.ids.push(delets[u].index());for(u=0,d=o.length;u<d;u++)r.states.push(o[u].rowState())}if(n&&!s)for(u=0,d=o.length;u<d;u++)o[u]._changeRowState(t,j1.NONE,!0);else h&&c.$_changeRowStates(t,o,j1.NONE,!1,s);return l&&c.deleteRows(a),!0}},$_collectStateRows:function(t,e,i){for(var n=0,s=this.count();n<s;n++){var r=this.getChild(n),o=r.rowState();(!t||0<=t.indexOf(o))&&(!i||o!=j1.DELETED&&o!=j1.CREATE_AND_DELETED?(o!=j1.NONE&&e.push(r),r.$_collectStateRows(t,e,i)):i.push(r))}},$_clearOrgValues:function(){for(var t=this.count();t--;)this.getChild(t).$_clearOrgValues()},$_restoreState:function(t,e,i){if(t)for(var n=this.count();n--;)this.getChild(n).$_restoreState(!0,e,i);return!1},$_restoreRow:function(t,e,i,n){if(t)for(var s=this.count();s--;)this.getChild(s).$_restoreRow(!0,e,i,n);return!1},toTreeString:function(){for(var t=this.rowId(),e=new Array(this.level()+1).join("  "),i=0;i<this.count();i++)t+="\n"+e+this.getChild(i).toTreeString();return t},_attach:function(t){y4()},_deatach:function(t){y4()},$_fieldInserted:function(t,e){},_checkFieldIndex:function(t){this.dataSet()._checkFieldIndex(t)},_doChildAdding:function(t,e,i){var n=this.dataSet();return!n||n._rowAdding(t,this,e,i)},_doChildAdded:function(t,e,i){var n=this.dataSet();n&&n._rowAdded(t,e,i)},_doCleared:function(t,e){var i=this.dataSet();i&&i._rowCleared(t,this,e)}}),h57=I1("TreeDataRowImpl",W0,{init:function(t,e,i,n,s){if(this._super(e),this._parent=null,this._values=null,this._orgValues=null,this._state=j1.NONE,t&&i){var r,o=t.fieldCount(),a=Math.min(i.length,o),h=this._values=new Array(o);if("number"==typeof n&&0<=n){for(r=0;r<n;r++)h[r]=t.getField(r).loadValue(i[r]);for(r=n;r<a;r++)h[r]=t.getField(r).loadValue(i[r+1])}else for(r=0;r<a;r++)h[r]=t.getField(r).loadValue(i[r]);t._derivedFieldCount&&t.$_deriveValues(this._rowId,h,0<=s?s:-1)}},dataSet:function(){return this._parent?this._parent.dataSet():null},parent:function(){return this._parent},index:function(){return this._parent?this._parent.indexOf(this):-1},level:function(){return this._parent?this._parent.level()+1:0},values:function(){return this._values?this._values.concat():[]},rowState:function(){return this._state},oldState:function(){return this._oldState||j1.NONE},$_fieldInserted:function(t,e){this._values&&this._values.length>t&&this._values.splice(t,0,void 0)},_changeRowState:function(t,e,i,n){var s=this.dataSet();if(s&&(n||s.checkStates())&&e!=this._state){var r=this._oldState=this._state;return(this._state=e)==j1.UPDATED&&s._needOrgValues?this._orgValues=this._values.concat():r==j1.updated&&this._orgValues&&(this._orgValues=null),i&&s._stateChanged(t,this),!0}return!1},$_setChildrenDeleted:function(t,i){this.visitAll(function(t){var e=t.rowState();switch(e){case j1.CREATED:i&&(i.children.push(t),i.states.push(e)),t._changeRowState(null,j1.CREATE_AND_DELETED,!1);break;case j1.DELETED:case j1.CREATE_AND_DELETED:break;default:i&&(i.children.push(t),i.states.push(e)),t._changeRowState(null,j1.DELETED,!1)}})},getValue:function(t){if(this._values){var e=this.dataSet();if(e){if("string"==typeof t){var i=t;(t=e.getFieldIndex(i))<0&&(t=Number(i))}return e._checkFieldIndex(t),this._values[t]}}},$_setValue:function(t,e,i,n,s,r,o,a){var h,l,u,d,c,_,f=this.dataSet();if(f){if(j1.isDeleted(this._state))return!1;if("string"==typeof t&&(h=t,(t=f.getFieldIndex(h))<0&&(t=parseInt(h))),this._checkFieldIndex(t),!(l=f._fields[t])._updatable&&(state==j1.NONE||state==j1.UPDATED))return!1;if(u=this._values){if(d=l.readValue(e),n)if(s){if(l.equalValues(d,u[t]))return!1}else if(l.sameValues(d,u[t]))return!1;if(f.refreshFieldFormats(),f._valueChanging(a,this,t,d))return _=f.checkStates()&&(this._state==j1.NONE||!this._state),o&&(o.values=u.concat(),o.state=this._state,o.rowTag=this._rowTag,o.orgValues=this._orgValues,a&&a._setReady()),!i&&_&&f._needOrgValues&&(c=o?o.values:u.concat()),u[t]=d,f._derivedFieldCount&&f.$_deriveValues(this._rowId,u,t),!i&&_?(f._needOrgValues&&(this._orgValues=c),this._state=j1.UPDATED,!r&&f._stateChanged(a,this)):f._needAutoRestore&&this.$$_restoreState(f)&&!r&&f._stateChanged(a,this),!0}return!1}},getValues:function(){return this._values.slice()},$_getObject:function(t,e){var i,n,s,r,o,a,h,l={};for(o=t._fields,a=t._fieldNames,r=this._values,n=a.length,i=0;i<n;i++)s=r[i],l[h=a[i]]=s===c2?e!==c2?e.hasOwnProperty(h)?e[h]:e:o[i]._emptyValue:s;return l},getObject:function(t){var e=this.dataSet();return e?this.$_getObject(e,e.$_getEmptyValue(t)):null},_getObject:function(){var t,e,i,n,s={},r=this.dataSet();if(r)for(n=r._fieldNames,i=this._values,e=n.length,t=0;t<e;t++)s[n[t]]=i[t];return s},copyToObject:function(t){var e=this.dataSet();if(e)for(var i=e.fieldCount(),n=0;n<i;n++)t[e.getFieldName(n)]=this._values[n]},$_getProps:function(t,e,i){var n,s,r,o,a,h,l={};for(a=t._fields,h=this._values,n=e.length;n--;)s=e[n],0<=(r=t.getFieldIndex(s))&&(o=h[r],l[s]=o===c2?i!==c2?i.hasOwnProperty(s)?i[s]:i:a[r]._emptyValue:o);return l},getProps:function(t,e){var i=this.dataSet();return i?this.$_getProps(i,t,i.$_getEmptyValue(e)):null},_getProps:function(t){var e,i,n,s,r={},o=this.dataSet();if(o)for(s=this._values,e=t.length;e--;)i=t[e],0<=(n=o.getFieldIndex(i))&&(r[i]=s[n]);return r},$_update:function(t,e,i,n,s,r,o,a){var h=this.dataSet();if(h){if(!s&&j1.isDeleted(this._state))return!1;if(h.refreshFieldFormats(),t&&(s||h._rowUpdating(a,this,t)))return a&&a._setReady(),V1(t)?this._internalUpdate(a,t,e,i,n,r,o):this._internalUpdateObject(a,t,e,i,n,r,o)}return!1},_attach:function(t){t._parent=this},_detach:function(t){t._parent===this&&(t._parent=null)},$_clearOrgValues:function(){this._orgValues&&(this._orgValues.length=0,this._orgValues=null),this._super()},$_restoreState:function(t,e,i){var n=this._orgValues,s=this.$$_restoreState(this.dataSet());return s&&e&&(e.push(this),i.push(n)),this._super(t,e,i),s},$_restoreRow:function(t,e,i,n){var s=!1;if(this._state===j1.UPDATED){var r=this._orgValues;if(r){var o=this.dataSet(),a=this._values;i&&i.push(a);for(var h=0,l=Math.min(r.length,o.fieldCount());h<l;h++)a[h]=r[h];o._derivedFieldCount&&o.$_deriveValues(this._rowId,a,-1),this._state=j1.NONE,e&&e.push(this),n&&n.push(r),delete this._orgValues,s=!0}}return this._super(!0,e,i,n),s},$$_restoreState:function(t){if(this._state==j1.UPDATED&&this._orgValues){var e,i,n,s,r=this._orgValues,o=this._values,a=(t=this.dataSet()).strictRestore();for(e=0,i=t.fieldCount();e<i;e++)if(n=o.length>e?o[e]:c2,s=r.length>e?r[e]:c2,a){if(!t.getField(e).equalValues(n,s))return!1}else if(!t.getField(e).sameValues(n,s))return!1;return this._state=j1.NONE,delete this._orgValues,!0}return!1},_internalUpdate:function(t,e,i,n,s,r,o){var a=this.dataSet();if(a){var h,l,u,d,c,_=Math.min(a.fieldCount(),e.length),f=this._state,g=f==j1.CREATED||f==j1.CREATE_AND_DELETED,m=a.checkStates()&&(f==j1.NONE||!f),p=!1;for(o&&(o.values=this._values.concat(),o.state=f,o.orgValues=this._orgValues&&this._orgValues.concat()),m&&a._needOrgValues&&(c=o?o.values:this._values.concat()),h=0;h<_;h++)((l=a.getField(h))._updatable||g)&&(u=e[h],s&&void 0===u||(u=l.readValue(u),(d=!i)||(d=n?!l.equalValues(u,this._values[l._index]):!l.sameValues(u,this._values[l._index])),d&&(this._values[h]=u,p=!0)));if(p)return a._derivedFieldCount&&a.$_deriveValues(this._rowId,this._values,-1),m?(c&&(this._orgValues=c),this._state=j1.UPDATED,r&&a._stateChanged(t,this)):a._needAutoRestore&&f==j1.UPDATED&&this.$$_restoreState(a)&&r&&a._stateChanged(t,this),!0}return!1},_internalUpdateObject:function(t,e,i,n,s,r,o){var a=this.dataSet();if(a){var h,l,u,d=a.fieldCount(),c=this._state,_=c==j1.CREATED||c==j1.CREATE_AND_DELETED,f=a.checkStates()&&(c==j1.NONE||!c),g=!1;o&&(o.values=this._values.concat(),o.state=c,o.orgValues=this._orgValues&&this._orgValues.concat()),f&&a._needOrgValues&&(u=o?o.values:this._values.concat());for(var m=0;m<d;m++)if((h=a.getField(m))._updatable||_){var p=h.fieldName(m);if(e.hasOwnProperty(p)){var w=e[p];s&&void 0===w||(w=h.readValue(w),(l=!i)||(l=n?!h.equalValues(w,this._values[h._index]):!h.sameValues(w,this._values[h._index])),l&&(this._values[m]=w,g=!0))}}if(g)return a._derivedFieldCount&&a.$_deriveValues(this._rowId,this._values,-1),f?(u&&(this._orgValues=u),this._state=j1.UPDATED,r&&a._stateChanged(t,this)):a._needAutoRestore&&c==j1.UPDATED&&this.$$_restoreState(a)&&r&&a._stateChanged(t,this),!0}return!1}}),X57=I1("RootTreeDataRow",W0,{init:function(t){this._super(),this._dataSet=t},dataSet:function(){return this._dataSet},rowId:function(){return-1},parent:function(){return null},level:function(){return 0},index:function(){return 0},values:function(){return null},rowState:function(){return j1.NONE},_changeRowState:function(t,e){return!1},getValue:function(t){return c2},_setValue:function(t,e,i){},getObject:function(){return null},_update:function(t,e,i,n,s){return!1},_updateStrict:function(t,e,i,n,s){return!1},_attach:function(t){t._parent=this},_detach:function(t){t._parent===this&&(t._parent=null)},getObject:function(){return{}}}),H4=I1("TreeDataSet",i2,{init:function(t,e){this._super(t,e),this._rowClass=h57,this._rootRow=this._createRootRow(),this._rowMap=[],this._tags=new n68(this),this._tagLock=!1,this._filterRuntime=new R27,this._needOrgValues=!1,this._needAutoRestore=!1,this._nextRowId=0,this.checkParentProc=null},onCleared:E1,onRowCreating:E1,onRowAdding:E1,onRowAdded:E1,onRowsCreating:E1,onRowsAdding:E1,onRowsAdded:E1,onRowsInserted:E1,onRowDeleting:E1,onRowDeleted:E1,onRowsDeleting:E1,onRowsDeleted:E1,onRowUpdating:E1,onRowUpdated:E1,onRowsUpdated:E1,onValueChanging:E1,onValueChanged:E1,onChanged:E1,onStateChanged:E1,onStatesChanged:E1,onTagChanged:E1,onTagsChanged:E1,filterRuntime:function(){return this._filterRuntime},rootRow:function(){return this._rootRow},needOrgValues:function(){return this._needOrgValues},needRestore:function(){return this._needAutoRestore},addTag:function(t){this._tags.add(t)},removeTag:function(t){this._tags.remove(t)},setRows:function(t,e,i,n,s){var r=new i57(this,t,e,i,n,s);return this.undoable()?this.execute(r):r.execute({})},setXmlRows:function(t,e,i,n,s){var r=new V57(this,t,e,i,n,s);return this.undoable()?this.execute(r):r.execute({})},setJsonRows:function(t,e,i,n,s){var r=new S57(this,t,e,i,n,s);return this.undoable()?this.execute(r):r.execute({})},appendDataRows:function(t,e,i,n,s,r){return this.insertDataRows(t,t?t.count():this._rootRow.count(),e,i,n,s,r)},insertDataRows:function(t,e,i,n,s,r,o){var a=new v47(this,t,e,i,n,s,r,o);return this.undoable()?this.execute(a):a.execute({})},appendXmlRows:function(t,e,i,n,s,r){return this.insertXmlRows(t,t?t.count():this._rootRow.count(),e,i,n,s,r)},insertXmlRows:function(t,e,i,n,s,r,o){var a=new B47(this,t,e,i,n,s,r,o);return this.undoable()?this.execute(a):a.execute({})},appendJsonRows:function(t,e,i,n,s,r){return this.insertJsonRows(t,t?t.count():this._rootRow.count(),e,i,n,s,r)},insertJsonRows:function(t,e,i,n,s,r,o){var a=new T47(this,t,e,i,n,s,r,o);return this.undoable()?this.execute(a):a.execute({})},addRow:function(t,e,i,n){var s=null==t?this._rootRow:this.$_getRow(t);return s&&this.insertRow(s,s.count(),e,i,n)},insertRow:function(t,e,i,n,s){var r=new a47(this,t,e,i,n,s);return this.undoable()?this.execute(r):r.execute({})},addRows:function(t,e,i,n){var s=null==t?this._rootRow:this.$_getRow(t);return s&&this.insertRows(s,s.count(),e,i,n)},insertRows:function(t,e,i,n,s){var r=new q47(this,t,e,i,n,s);return this.undoable()?this.execute(r):r.execute({})},clearRows:function(){var t=new Z57(this);return this.undoable()?this.execute(t):t.execute({})},deleteRow:function(t){var e=new s47(this,t);return this.undoable()?this.execute(e):e.execute({})},deleteRows:function(t){if(t&&0<t.length){var e=1==t.length?new s47(this,t[0]):new q57(this,t);return this.undoable()?this.execute(e):e.execute({})}},updateRow:function(t,e,i,n,s,r){var o=new a57(this,t,e,i,n,s,r);return this.undoable()?this.execute(o):o.execute({})},setValue:function(t,e,i){var n=new t17(this,t,e,i,!0,!0,!1);return this.undoable()?this.execute(n):n.execute({})},setValueEx:function(t,e,i,n,s,r){var o=new t17(this,t,e,i,n,s,r);return this.undoable()?this.execute(o):o.execute({})},setRowTag:function(t,e){var i=new u57(this,t,e);return this.undoable()?this.execute(i):i.execute({})},setRowTags:function(t,e){var i=new g57(this,t,e);return this.undoable()?this.execute(i):i.execute({})},unsetRowTags:function(t,e){var i;return t=t&&0<t.length?t:null,e=e&&0<e.length?e:null,i=t||e?new r57(this,t,e):new R17(this),this.undoable()?this.execute(i):i.execute({})},clearRowTags:function(){var t=new R17(this);return this.undoable()?this.execute(t):t.execute({})},setRowState:function(t,e,i){var n=new v57(this,t,e,i);return this.undoable()?this.execute(n):n.execute({})},setRowStates:function(t,e,i,n){var s=new B57(this,t,e,i,n);return this.undoable()?this.execute(s):s.execute({})},clearRowStates:function(t,e,i){var n=new T57(this,t,e,i);return this.undoable()?this.execute(n):n.execute({})},getRowState:function(t){return(t=this.$_getRow(t))?t._state:j1.NONE},createRow:function(t,e){return this.refreshFieldFormats(),this._doCreateRow(t,void 0,e)},_doCreateRow:function(t,e,i){var n=null;if(V1(t))n=new this._rowClass(this,this._nextRowId++,t,e,i);else if(t){var s=new Array(this.fieldCount());for(var r in t){var o=this.getFieldIndex(r);0<=o&&(s[o]=t[r])}n=new this._rowClass(this,this._nextRowId++,s,e,i)}return n},$_removeRows:function(t,e,i,n){var s,r,o,a,h=0;if(this._softDelete&&this._checkStates)for(s=e.length-1;0<=s;s--){switch(a=!1,o=(r=e[s]).rowState()){case j1.CREATED:this.deleteCreated()||(a=r._changeRowState(t,j1.CREATE_AND_DELETED,!1),r.$_setChildrenDeleted(j1.CREATE_AND_DELETED,i.states),e.splice(s,1));break;case j1.DELETED:case j1.CREATE_AND_DELETED:e.splice(s,1);break;default:a=r._changeRowState(t,j1.DELETED,!0),r.$_setChildrenDeleted(j1.DELETED,i.states),e.splice(s,1)}a&&i&&(i.states.children.push(r),i.states.states.push(o))}if(0<e.length){if(i){for(i.ids=[],i.parents=[],e.sort(function(t,e){return t.index()-e.index()}),s=0;s<e.length;s++)i.ids.push(e[s].index()),i.parents.push(e[s].parent());this._tags.$_saveRows(n,e,!0)}for(s=e.length-1;0<=s;s--)r=e[s],p=r.parent(),h+=1+r.descendantCount(),p.$$_removeChild(r,p._children.indexOf(r));i&&(i.rows=e)}return h},$_changeRowStates:function(e,t,i,n,s){var r,o,a,h=[];for(r=0,o=t.length;r<o;r++)(a=this.$_getRow(t[r]))&&a._changeRowState(e,i,!1)&&h.push(a),n&&a.visitAll(function(t){t._changeRowState(e,i,!1)&&h.push(t)});0<h.length&&!s&&this._fireStatesChanged(e,h)},$_getRow:function(t){return"number"==typeof t&&(t=this.rowById(t)),t instanceof W0?t:null},getValue:function(t,e){if(t=this.$_getRow(t))return t.getValue(e)},visitAll:function(t,e){this.visitAllRows(t,e)},visitAllRows:function(t,e){0<=e?this._rootRow.visit(t,e):this._rootRow.visitAll(t)},getAllRows:function(){var e=[];return this._rootRow.visitAll(function(t){e.push(t)}),e},getRow:function(t,e){var i=null==t?this._rootRow:this.$_getRow(t);return i?i.getChild(e):null},getChildCount:function(t){var e=null==t?this._rootRow:this.$_getRow(t);return e?e.count():0},getChild:function(t,e){var i=null==t?this._rootRow:this.$_getRow(t);return i?i.getChild(e):0},getChildren:function(t){var e=null==t?this._rootRow:this.$_getRow(t);return e?e.children():null},getDescendantCount:function(t){var e=null==t?this._rootRow:this.$_getRow(t);return e?e.descendantCount():0},getDescendants:function(t,e){e=1<arguments.length?e:0;var i=null==t?this._rootRow:this.$_getRow(t);if(i){if(e<=0)return i.getDescendants();if(e>i.level()){var n=[];return i.visit(function(t){n.push(t)},e-i.level()),n}}return null},arrangeRows:function(s){var t,e={};for(s.sort(function(t,e){return t.level()-e.level()}),i=s.length;i--;)e[(t=s[i])._rowId]||!t.parent()||1<s[i].level()&&!function(t,e){for(var n=i-1;0<=n;n--)if(s[n].isAncestorOf(t))return!1;return!0}(s[i])?s.splice(i,1):e[t._rowId]=t;return s},getJsonRows:function(t,e,i){if(p=null==t?this._rootRow:this.$_getRow(t),p){e=e&&(e+"").trim()||"rows",i=Y1(i),i=isNaN(i)||i<=0?1e9:i;var n=p.$$$_obj=p.getObject();0<p.count()&&(n[e]=[],p.visit(function(t){t.$$$_obj=t.getObject(),0<t.count()&&(t.$$$_obj[e]=[]),t._parent.$$$_obj[e].push(t.$$$_obj)},i-1),p.visit(function(t){delete t.$$_obj},i-1));var s=n[e];return delete p.$$$_obj,s}return null},hasData:function(t){return t instanceof W0||null!=this.rowById(t)},rowById:function(t){var e=this._rowMap[t];return e||(e=this._findRowById(t))&&(this._rowMap[t]=e),e},getRowById:function(t){return this.rowById(t)},getRowsByIds:function(t){var e=[];if(t)for(var i=0,n=t.length;i<n;i++)e.push(this.rowById(t[i]));return e},getNextRowId:function(){return this._nextRowId++},getRowProps:function(t,e,i){if(t=this.$_getRow(t))return t.getProps(e,i)},_getRowProps:function(t,e){if(t=this.$_getRow(t))return t._getProps(e)},getRowObject:function(t,e){if(t=this.$_getRow(t))return t.getObject(e)},_getRowObject:function(t){if(t=this.$_getRow(t))return t._getObject()},getOutputObject:function(t,e,i){e=this.getRowObject(e,i);return this.$_createOutputRows([e],t,e),e},getRowObjects:function(t,e,i){var n,s,r,o=[];for(e=this.$_getEmptyValue(e),n=0,s=t.length;n<s;n++)(r=this.$_getRow(t[n]))?o.push(r.$_getObject(this,e)):i&&o.push(null);return o},getOutputObjects:function(t,e,i){var n=this.getRowObjects(e,i);return this.$_createOutputRows(n,t,e),n},getRowsProps:function(t,e,i,n){var s,r,o,a=[];for(i=this.$_getEmptyValue(i),s=0,r=t.length;s<r;s++)(o=this.$_getRow(t[s]))?a.push(o.$_getProps(this,e,i)):n&&a.push(null);return a},exportToJson:function(t,e,i,n){return this._rootRow.getChildOutputObjects(t,e,i,n)},getRowTag:function(t){if(t=this.$_getRow(t))return t._tag},getRowsByTag:function(e){var i=[];return e&&this._rootRow.visitAll(function(t){t._tag===e&&i.push(t)}),i},getRowsByTags:function(e){var i=[];return e&&e.length&&this._rootRow.visitAll(function(t){0<=e.indexOf(t._tag)&&i.push(t)}),i},getStateRows:function(e){var i=[];return this._rootRow.visitAll(function(t){t.rowState()==e&&i.push(t)}),i},getAllStateRows:function(){var e={created:[],updated:[],deleted:[],createAndDeleted:[]};return this._rootRow.visitAll(function(t){switch(t.rowState()){case j1.CREATED:e.created.push(t);break;case j1.UPDATED:e.updated.push(t);break;case j1.DELETED:e.deleted.push(t);break;case j1.CREATE_AND_DELETED:e.createAndDeleted.push(t)}}),e},getRowStateCount:function(e){var i=0;return this._rootRow.visitAll(function(t){0<=e.indexOf(t.rowState())&&i++}),i},restoreUpdatedStates:function(t){var e=new s57(this,t);return this.undoable()?this.execute(e):e.execute({})},restoreUpdatedRows:function(t){var e=new f57(this,t);return this.undoable()?this.execute(e):e.execute({})},toTreeString:function(){return this._rootRow.toTreeString()},createActionGroup:function(t){return new l68(this,t)},rowCount:function(){return this._rootRow._descendantCount},immediateUpdate:function(){return!0},$_internalInsertField:function(t,e){return 0<(t=this._super(t,e))&&this._rootRow&&this._rootRow.$_fieldInserted(t,e),t},$_internalClearFields:function(){H4.Base.$_internalClearFields.call(this),this._rootRow&&this.$_clearRows()},findRow:function(t,e,i){var n=this.findRows(t,e,!0,i,1);return 0<n.length?n[0]:null},findRows:function(t,e,i,n){var s=[];return t&&0<t.length&&e&&e.length>=t.length&&this._rootRow.findChildren(t,e,!0,i,s,n),s},getOptions:function(){R4(this._super(),{})},_doCheckStatesChanged:function(){this.$_resetOrgValues()},_doRestoreModeChanged:function(t,e){this.$_resetOrgValues()},_doGetDistinctValues:function(t,e){var i,n,s,r,o,a=[];if(e<0&&(e=this._rootRow.descendantCount()),0<e)for(this.getField(t).dataType(),a1.NUMBER,i=this.getDescendants(this._rootRow,0),n=this.getComparer(t).bind(this),this.$_sortRows(i,t,n.bind(this),0,i.length-1),a.push(i[0]._values[t]),s=1,r=i.length;s<r&&!(n(t,i[s-1],i[s])<0&&(o=i[s]._values[t],a.push(o),a.length>=e));s++);return a},hasData:function(t){return this.rowById(t)},equalValues:function(t,e,i){if(e===i)return!0;var n=this._fields[t],s=e.getValue(t),r=i.getValue(t);return n.equalValues(s,r)},sameValues:function(t,e,i){if(e===i)return!0;var n=this._fields[t],s=e.getValue(t),r=i.getValue(t);return n.sameValues(s,r)},compareValues:function(t,e,i){if(e===i)return 0;var n=e.getValue(t),s=i.getValue(t);return null===n?null===s?0:-1:null===s?1:s<n?1:n<s?-1:0},compareValues:function(t,e,i){if(e===i)return 0;var n=e.getValue(t),s=i.getValue(t);return null==n?null==s?0:-1:void 0===n||null===s?1:s<n?1:n<s?-1:0},compareNumbers:function(t,e,i){if(e===i)return 0;var n=e.getValue(t),s=i.getValue(t);return isNaN(n)?isNaN(s)?0:-1:isNaN(s)?1:s<n?1:n<s?-1:0},compareDates:function(t,e,i){if(e===i)return 0;var n=e.getValue(t),s=i.getValue(t);return n instanceof Date?s instanceof Date?s<n?1:n<s?-1:0:1:s instanceof Date?-1:0},compareBools:function(t,e,i){if(e===i)return 0;var n=e.getValue(t),s=i.getValue(t);return void 0===n||void 0===s?n===s?0:void 0===n?-1:1:n&&!s?1:!n&&s?-1:0},compareObjs:function(t,e,i){if(e===i)return 0;var n=e.getValue(t),s=i.getValue(t);if(!n)return s?-1:0;if(!s)return 1;var r=this.getField(t);return cb=r._compareCallback||r.$_compareObjs,cb(n,s)},$_summarizeChildren:function(t,e){var i,n,s,r=e.field,o=t.count();for(i=0;i<o;i++)s=(n=t.getChild(i)).getValue(r),isNaN(s)||(e.sum+=s,s<e.min&&(e.min=s),s>e.max&&(e.max=s)),this.$_summarizeChildren(n,e)},$_summarizeVars:function(t,e){var i,n,s,r=e.field,o=e.avg,a=t.count(),h=0;for(i=0;i<a;i++)s=(n=t.getChild(i)).getValue(r),isNaN(s)||(h+=Math.pow(s-o,2)),h+=this.$_summarizeVars(n,e);return h},aggregate:function(t,e){if(null==t)return!1;t.clear();var i=this.rowCount();if(i<1)return!1;if(t.count=i,t.sum=0,t.min=Number.MAX_VALUE,t.max=Number.MIN_VALUE,this.$_summarizeChildren(this._rootRow,t),t.avg=t.sum/t.count,e){var n=this.$_summarizeVars(this._rootRow,t);t.varsp=n/t.count,t.vars=n/(t.count-1)}return this._fields[t.field]._dataType===a1.DATETIME&&(t.min=new Date(t.min),t.max=new Date(t.max)),!0},aggregateRange:function(t,e,i){if(null==t||null==e)return!1;t.clear();var n=e.length;if(n<1)return!1;var s,r,o=0,a=t.field,h=0,l=NaN,u=NaN;for(s=0;s<n;)if(r=this.$_getRow(e[s++]).getValue(a),!isNaN(r)){h=l=u=r,o++;break}for(;s<n;)r=this.$_getRow(e[s++]).getValue(a),isNaN(r)||(h+=r,r<l&&(l=r),u<r&&(u=r),o++);if(t.count=n,0<o){if(t.sum=h,t.min=l,t.max=u,t.avg=h/n,i)if(1<n){var d=0,c=t.avg;for(s=0;s<n;s++)r=e[s++].getValue(a),isNaN(r)||(d+=Math.pow(r-c,2));t.varsp=d/n,t.vars=d/(n-1)}else t.varsp=0,t.vars=0;this._fields[t.field]._dataType===a1.DATETIME&&(t.min=new Date(t.min),t.max=new Date(t.max))}return!0},_createRootRow:function(){return new X57(this)},$_maxRowId:function(){return this._nextRowId},$_resetOrgValues:function(){this._needOrgValues=this._checkStates&&this._restoreMode!=f3.NONE,this._needAutoRestore=this._needOrgValues&&this._restoreMode==f3.AUTO,this._rootRow.$_clearOrgValues()},_findRowById:function(t){return this._rootRow.findById(t)},_checkSum:function(t){if(t!=this.rowCount())throw new Error("Invalid row count: "+t+" <> "+this.rowCount())},$_saveAll:function(t,e,i){return(e=e||{}).nextRowId=this._nextRowId,e.children=this._rootRow._children&&this._rootRow._children.concat(),e.rowMap=this._rowMap,e.deletedCount=this._deletedCount,e._descendantCount=this._descendantCount,this._tags.$_saveRows(t,i2.ALL_ROWS,i),e},$_restoreAll:function(t,e,i){this._nextRowId=e.nextRowId,this._rootRow._setChildren(e.children),this._rowMap=e.rowMap,this._deletedCount=e.deletedCount,this._descendantCount=e._descendantCount,this._tags.$_restoreRows(t,i2.ALL_ROWS,i)},$_clearRows:function(){var t=this._rootRow;t._children&&0<t._children.length&&(t._children.splice(0,t._children.length),t._descendantCountChanged(-t._descendantCount),t._doCleared(null,!0)),this._rowMap=[],this._resetIdWhenClear&&(this._nextRowId=0),this._tags.clearRows(),this._checkSum(0)},_doRecalcAll:function(){var e=this,t=this.rowCount();return 0<t&&this._rootRow.visitAll(function(t){e.$_deriveValues(t._rowId,t._values,-1)}),t},_doRecalcRows:function(t){var e,i,n,s=0;for(e=0,i=t.length;e<i;e++)(n=this.$_getRow(t[e]))&&(this.$_deriveValues(n._rowId,n._values,-1),s++);return s},_doRecalcRow:function(t){return(t=this.$_getRow(t))?(this.$_deriveValues(t._rowId,t._values,-1),1):0},_summarizeChildren:function(t,e){var i,n,s,r=e.field,o=t.count();for(i=0;i<o;i++)s=(n=t.getChild(i)).getValue(r),isNaN(s)||(e.sum+=s,s<e.min&&(e.min=s),s>e.max&&(e.max=s)),this.summarizeChildren(n,e)},_summarizeVars:function(t,e){var i,n,s,r=e.field,o=e.avg,a=t.count(),h=0;for(i=0;i<a;i++)s=(n=t.getChild(i)).getValue(r),isNaN(s)||(h+=Math.pow(s-o,2)),h+=summarizeChildren(n,e);return h},_summarize:function(t,e){if(null==t)return!1;if(t.clear(),this.rowCount()<1)return!1;if(t.count=0,t.sum=0,t.min=Number.MIN_VALUE,t.max=Number.MAX_VALUE,this._summarizeChildren(this._rootRow,t),t.avg=t.sum/t.count,e){var i=this._summarizeVars(this._rootRow,t);t.vars=i/t.count}return!0},summarizeRange:function(t,e,i){return!1},_stateChanged:function(t,e){this._fireStateChanged(t,e)},_statesChanged:function(t,e){this._fireStatesChanged(t,e)},_valueChanging:function(t,e,i,n){return this._fireValueChanging(t,e,i,n)},_valueChanged:function(t,e,i){this._tagLock||this._tags.setValue(e,i),this._fireValueChanged(t,e,i)},_rowAdding:function(t,e,i,n,s){return this._fireRowAdding(t,e,i,n,s)},_rowAdded:function(t,e,i,n){this._tagLock||this._tags.addRow(e,i,n),this._fireRowAdded(t,e,i,n),this._fireRowCountChanged(t)},_rowsAdding:function(t,e,i,n){return this._fireRowsAdding(t,e,i,n)},_rowsAdded:function(t,e,i,n,s){s||this._tagLock||this._tags.addRows(i,n),this._fireRowsAdded(t,e,i,n,s),!s&&this._fireRowCountChanged(t)},_rowsInserted:function(t,e){this._tagLock||this._tags.insertRows(e),this._fireRowsInserted(t,e),this._fireRowCountChanged(t)},_rowRemoving:function(t,e){return this._fireRowDeleting(t,e)},_rowRemoved:function(t,e){this._tagLock||this._tags.removeRow(e),this._fireRowDeleted(t,e),this._fireRowCountChanged(t)},_rowsRemoving:function(t,e){return this._fireRowsDeleting(t,e)},_rowsRemoved:function(t,e){this._tagLock||this._tags.removeRows(e),this._fireRowsDeleted(t,e),this._fireRowCountChanged(t)},_rowCleared:function(t,e,i){if(e){var n=e.children();this._tags.removeRows(n),i||(this._fireRowsDeleted(t,n),this._fireRowCountChanged(t))}},_rowUpdating:function(t,e,i){return this._fireRowUpdating(t,e,i)},_rowUpdated:function(t,e){this._tags.updateRow(e),this._fireRowUpdated(t,e)},_rowsUpdated:function(t,e){this._tags.updateRows(e),this._fireRowsUpdated(t,row)},_fireRowCreating:function(t,e,i,n){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(H4.ROW_CREATING,e,i,n),this.onRowCreating&&this.onRowCreating(this,e,i,n))},_fireRowAdding:function(t,e,i,n,s){if(this._eventLock<=0){this.$$_cmd=t;var r=this.fireConfirmEvent(H4.ROW_ADDING,e,i,n);return r&&this.onRowAdding&&(r=!1!==this.onRowAdding(this,e,i,n,s)),r}return!0},_fireRowAdded:function(t,e,i,n){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(H4.ROW_ADDED,e,i),this.onRowAdded&&(!this._onStack||this._eventable)&&this.onRowAdded(this,e,i,n),this.$$_cmd=t,this.fireEvent(i2.DATA_CHANGED),this.onDataChanged&&this.onDataChanged(this))},_fireRowsCreating:function(t,e,i,n){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(H4.ROWS_CREATING,e,i,n),this.onRowsCreating&&this.onRowsCreating(this,e,i,n))},_fireRowsAdding:function(t,e,i,n){if(this._eventLock<=0){this.$$_cmd=t;var s=this.fireConfirmEvent(H4.ROWS_ADDING,e,i,n);return s&&this.onRowsAdding&&(s=!1!==this.onRowsAdding(this,e,i,n)),s}return!0},_fireRowsAdded:function(t,e,i,n,s){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(H4.ROWS_ADDED,e,i,n,s),this.onRowsAdded&&(!this._onStack||this._eventable)&&this.onRowsAdded(this,e,i,n,s),this.$$_cmd=t,this.fireEvent(i2.DATA_CHANGED),this.onDataChanged&&this.onDataChanged(this))},_fireRowsInserted:function(t,e){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(H4.ROWS_INSERTED,e),this.onRowsInserted&&(!this._onStack||this._eventable)&&this.onRowsInserted(this,e),this.$$_cmd=t,this.fireEvent(i2.DATA_CHANGED),this.onDataChanged&&this.onDataChanged(this))},_fireRowDeleting:function(t,e){if(this._eventLock<=0){this.$$_cmd=t;var i=this.fireConfirmEvent(H4.ROW_DELETING,e);return i&&this.onRowDeleting&&(i=!1!==this.onRowDeleting(this,e)),i}return!0},_fireRowDeleted:function(t,e){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(H4.ROW_DELETED,e),this.onRowDeleted&&(!this._onStack||this._eventable)&&this.onRowDeleted(this,e),this.$$_cmd=t,this.fireEvent(i2.DATA_CHANGED),this.onDataChanged&&this.onDataChanged(this))},_fireRowsDeleting:function(t,e){if(this._eventLock<=0){this.$$_cmd=t;var i=this.fireConfirmEvent(H4.ROWS_DELETING,e);return i&&this.onRowsDeleting&&(i=!1!==this.onRowsDeleting(this,e)),i}return!0},_fireRowsDeleted:function(t,e){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(H4.ROWS_DELETED,e),this.onRowsDeleted&&(!this._onStack||this._eventable)&&this.onRowsDeleted(this,e),this.$$_cmd=t,this.fireEvent(i2.DATA_CHANGED),this.onDataChanged&&this.onDataChanged(this))},_fireRowUpdating:function(t,e,i){if(this._eventLock<=0){this.$$_cmd=t;var n=this.fireConfirmEvent(H4.ROW_UPDATING,e,i);return n&&this.onRowUpdating&&(n=!1!==this.onRowUpdating(this,e,i)),n}return!0},_fireRowUpdated:function(t,e){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(H4.ROW_UPDATED,e),this.onRowUpdated&&(!this._onStack||this._eventable)&&this.onRowUpdated(this,e),this.$$_cmd=t,this.fireEvent(i2.DATA_CHANGED),this.onDataChanged&&this.onDataChanged(this))},_fireRowsUpdated:function(t,e){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(H4.ROWS_UPDATED,e),this.onRowsUpdated&&(!this._onStack||this._eventable)&&this.onRowsUpdated(this,e),this.$$_cmd=t,this.fireEvent(i2.DATA_CHANGED),this.onDataChanged&&this.onDataChanged(this))},_fireValueChanging:function(t,e,i,n){if(this._eventLock<=0){this.$$_cmd=t;var s=this.fireConfirmEvent(H4.VALUE_CHNAGING,e,i,n);return s&&this.onValueChanging&&(s=!1!==this.onValueChanging(this,e,i,n)),s}return!0},_fireValueChanged:function(t,e,i){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(H4.VALUE_CHNAGED,e,i),this.onValueChanged&&this.onValueChanged(this,e,i)||this.onRowUpdated&&(!this._onStack||this._eventable)&&this.onRowUpdated(this,e,i),this.$$_cmd=t,this.fireEvent(i2.DATA_CHANGED),this.onDataChanged&&this.onDataChanged(this))},_fireStateChanged:function(t,e){if(this._eventLock<=0){var i=t&&t.$_updating();this.$$_cmd=t,this.fireEvent(H4.STATE_CHANGED,e,i),this.onStateChanged&&(!this._onStack||this._eventable)&&this.onStateChanged(this,e,i)}},_fireStatesChanged:function(t,e){if(this._eventLock<=0){var i=t&&t.$_updating();this.$$_cmd=t,this.fireEvent(H4.STATES_CHANGED,e,i),this.onStatesChanged&&(!this._onStack||this._eventable)&&this.onStatesChanged(this,e,i)}},_fireTagChanged:function(t,e){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(H4.TAG_CHANGED,e),this.onTagChanged&&(!this._onStack||this._eventable)&&this.onTagChanged(this,e))},_fireTagsChanged:function(t,e){this._eventLock<=0&&(this.$$_cmd=t,this.fireEvent(H4.TAGS_CHANGED,e),this.onTagsChanged&&(!this._onStack||this._eventable)&&this.onTagsChanged(this,e))}},null,function(t){t.ROW_COUNT_CHANGED="onTreeDataSetRowCountChanged",t.ROW_CREATING="onTreeDataSetRowCreating",t.ROW_ADDING="onTreeDataSetRowAdding",t.ROW_ADDED="onTreeDataSetRowAdded",t.ROWS_CREATING="onTreeDataSetRowsCreating",t.ROWS_ADDING="onTreeDataSetRowsAdding",t.ROWS_ADDED="onTreeDataSetRowsAdded",t.ROWS_INSERTED="onTreeDataSetRowsInserted",t.ROW_DELETING="onTreeDataSetRowDeleting",t.ROW_DELETED="onTreeDataSetRowDeleted",t.ROWS_DELETING="onTreeDataSetRowsDeleting",t.ROWS_DELETED="onTreeDataSetRowsDeleted",t.ROW_UPDATING="onTreeDataSetRowUpdating",t.ROW_UPDATED="onTreeDataSetRowUpdated",t.ROWS_UPDATED="onTreeDataSetRowsUpdated",t.VALUE_CHANGING="onTreeDataSetValueChanging",t.VALUE_CHNAGED="onTreeDataSetValueChanged",t.STATE_CHANGED="onTreeDataSetStateChanged",t.STATES_CHANGED="onTreeDataSetStatesChanged",t.TAG_CHANGED="onTreeDataSetTagChanged",t.TAGS_CHANGED="onTreeDataSetTagsChanged"}),f47=I1("TreeDataLoader",null,{init:function(t){C4.init.call(this),this._provider=t,this._filter=null},load:function(t,e,i){if(i=new K17(i),this.$_checkEmpty(e,i))return 0;this.$_prepareLoad(i),t=t&&t.toLowerCase();try{switch(t){case"json":return this.$_loadJson(e,i,this._filter);case"xml":return this.$_loadXml(e,i,this._filter);case"csv":return this.$_loadCsv(e,i,this._filter)}}finally{var n=p4(i.callback);n&&n(this._provider)}return 0},$_loadJson:function(t,e,i){var n;if(t)switch(e.fillMode){case n4.APPEND:return n=this._provider.rowById(e.parentId),this._provider.appendJsonRows(n,t,e.rows,e.childRows,e.currency,i);case n4.INSERT:return n=this._provider.rowById(e.parentId),this._provider.insertJsonRows(n,e.fillPos,t,e.rows,e.childRows,e.currency,i);case n4.UPDATE:break;case n4.SET:default:return this._provider.setJsonRows(t,e.rows,e.childRows,e.currency,i)}return 0},$_loadXml:function(t,e,i){if(t){var n,s=e.rows||"row";switch(e.fillMode){case n4.APPEND:return n=this._provider.rowById(e.parentId),this._provider.appendXmlRows(n,t,s,e.childRows,e.currency,i);case n4.INSERT:return n=this._provider.rowById(e.parentId),this._provider.insertXmlRows(n,e.fillPos,t,s,e.childRows,e.currency,i);case n4.UPDATE:break;case n4.SET:default:return this._provider.setXmlRows(t,s,e.childRows,e.currency,i)}}return 0},$_loadCsv:function(t,e,i){var n,s=e.start,r=e.count,o=e.quoted,a=e.trim,h=e.currency,l=e.delimiter,u=e.treeField,d=e.useTreeField,c=e.needSorting,_=!d&&0<=u&&u<this._provider.fieldCount()?u:-1,f=R0.csvToArray(this._provider,t,s,r,o,a,l,h,_);if(f&&0<f.length){switch(e.fillMode){case n4.APPEND:return n=this._provider.rowById(e.parentId),this._provider.appendDataRows(n,f,u,d,c,i);case n4.INSERT:return n=this._provider.rowById(e.parentId),this._provider.insertDataRows(n,e.fillPos,f,u,d,c,i);case n4.UPDATE:break;case n4.SET:default:return this._provider.setRows(f,u,d,c,i)}return f.length}return 0},$_fillEmpty:function(t){t.fillMode===n4.SET&&this._provider.setRows(null)},$_checkEmpty:function(t,e){return!t&&(this.$_fillEmpty(e),!0)},$_prepareLoad:function(t){t.filter&&(this._filter=new w17(t.filter))}}),Z2=I1("TreeRow",j2,{init:function(t){this._super(),this._dataRow=t,this._footer=null},iconHeight:0,iconWidth:0,iconIndex:void 0,hasChildren:void 0,dataRow:function(){return this._dataRow},setIconIndex:function(t){if(t!=this._iconIndex){this._iconIndex=t;var e=this.provider();e&&e.$_iconIndexChanged(this)}},setHasChildren:function(t){if(t!=this._hasChildren){this._hasChildren=t;var e=this.provider();e&&e.$_hasChildrenChanged(this)}},headerCount:function(){return this._customHeaders?this._customHeaders.length:0},dataIndexOf:function(t){return this.indexOf(t)-this.headerCount()},dataIndex:function(){return this._dataRow.rowId()},dataId:function(){return this._dataRow.rowId()},dataTag:function(){return this._dataRow.tag()},dataState:function(){return this._dataRow.rowState()},leaf:function(){return 0==this.count()},isLeaf:function(){return 0==this.count()},footer:function(){return this._footer},editable:function(){return!0},isEditable:function(){return!0},isEditing:function(){return!1},summaryMode:function(){return z4.AGGREGATE},setExpanded:function(t){var e=this.provider();e&&t!=this.expanded()&&(t?e.expand(this,!1,!1):e.collapse(this))},resizable:function(){return!0},isResizable:function(){return!0},canEdit:function(){return!0},getValue:function(t){return this._dataRow.getValue(t)},setValue:function(t,e){var i=this._dataRow&&this._dataRow.dataSet();i&&i.setValue(this._dataRow,t,e)},getRowObject:function(){return this._dataRow._getObject()},getRowProps:function(t){return this._dataRow._getProps(t)},setRowProps:function(t,e,i,n){this.provider(),this._dataRow.$_update(t,e,i,n)},setItem:function(t,e){this._super(t,e),e._addChildren(t.children()),t.clear()},_collectSummaryRows:function(t,e,i){var n,s,r;switch(i=i||this.provider().rowSummaryScope()){case i4.DESCENDTANT:case i4.ALL:t.visitRows(!1,!0,function(t){e.push(t.dataIndex())}),i==i4.ALL&&e.push(t.dataIndex());break;case i4.CHILD:case i4.PARENT_CHILD:for(n=0,s=t.count();n<s;n++)0<=(r=t.getItem(n).dataIndex())&&e.push(r);i==i4.PARENT_CHILD&&e.push(t.dataIndex());break;case i4.GROUP:t.visitRows(!1,!0,function(t){0<t.count()&&e.push(t.dataIndex())});break;case i4.LEAF:t.visitRows(!1,!0,function(t){0==t.count()&&e.push(t.dataIndex())})}},$_saveChecked:function(e,i,t,n){this._super(e,i,t,n),this.visitAll(function(t){t.$_saveChecked(e,i,t.dataIndex(),n)})},$_restoreChecked:function(e,i,t,n){this._super(e,i,t,n),this.visitAll(function(t){t.$_restoreChecked(e,i,t.dataIndex(),n)})},$_dataKey:function(){return this._dataRow},$_createFooter:function(){return this._footer||(this._footer=new q9),this._footer},exchange:function(t,e){this._exchangeItems(t,e)}}),I68=I1("TreeTempRow",Z2,{init:function(t,e){this._super(t),this.$_childIndex=e},childIndex:function(){return this.$_childIndex}});Z2.$_tempTreeItem=new I68,Z2.getTemp=function(t,e){return Z2.$_tempTreeItem._dataRow=t,Z2.$_tempTreeItem.$_childIndex=e,Z2.$_tempTreeItem};var q9=I1("TreeRowFooter",m7,{init:function(){this._super()}}),u47=I1("RootTreeRow",Z2,{init:function(t){this._super(null),this._provider=t},id:function(){return NaN},provider:function(){return this._provider},level:function(){return 0},expanded:function(){return!0},setExpanded:function(t){},leaf:function(){return!1},isLeaf:function(){return!1},visible:function(){return!0},isVisible:function(){return!0},dataSource:function(){return this._provider.dataSource()},makeVisible:function(){},dataIndexOf:function(t){return this.indexOf(t)}}),G7=I1("TreeItemProvider",F37,{init:function(){this._super(!0),this._maxItemCount=0,this._sorter=new P97,this._visibleItems=new H87(this),this._itemMap=[],this._expMap=[],this._extents=[],this._dataCount=0,this._rowCount=0,this._summaryMap=null,this._summarizedMap={},this._saveExps=null},passiveFiltering:!1,dataRoot:null,customRowProvider:null,setPassiveFiltering:function(t){t!=this._passiveFiltering&&(this._passiveFiltering=t,this._doApplyFilters(!0,!0))},setDataRoot:function(t){t instanceof W0&&!(t.level()<=0)||(t=null),t!==this._dataRoot&&(this._dataRoot=t,this._saveAndRefresh())},descendantCount:function(){return this._rootRow.descendantCount()},descendantRowCount:function(){return this._rootRow.descendantRowCount()},$_setFooterCallback:function(t){this._footerCallback=t},$_iconIndexChanged:function(t){this._fireItemChanged(t)},$_hasChildrenChanged:function(t){this._fireItemChanged(t)},$_fireCountEvents:function(t,e,i){this._fireDataCountChanged(t,this.descendantCount()),this._fireRowCountChanged(e,this.descendantRowCount()),this._fireCountChanged(i,this.rowCount())},onDataSetDisposed:function(t){var e=this.rowCount(),i=this.descendantRowCount(),n=this.descendantCount();this.$_clearItems(!0),this.$_resetSummary(),this._fireReset(),this.setDataSource(null),this.$_fireCountEvents(n,i,e)},onDataSetReset:function(t){var e,i,n=this._dataCount,s=(t=this._dataSource,this.rowCount()),r=this.descendantRowCount(),o=this.descendantCount();t.$$_cmd&&(e=t.rowCount()<n,i=t.rowCount()>n),e&&(this.onSaveRows(t.$$_cmd),this.$_saveExpanded(this._saveExps=[],this._rootRow)),this._sortingDirty=!0,this.$_clearItems(!0),this.$_resetSummary(),this.$_buildTree(),this.$_refreshExtents(),i&&this.onRestoreRows(t.$$_cmd),this._fireReset(),this.$_fireCountEvents(o,r,s)},onDataSetRefresh:function(t){var e=this.rowCount(),i=this.descendantRowCount(),n=this.descendantCount();this._sortingDirty=!0,this._saveAndRefresh(-1,!0),this.$_refreshExtents(),this.$_fireCountEvents(n,i,e)},onDataSetCleared:function(t){var e=this.rowCount(),i=this.descendantRowCount(),n=this.descendantCount();this._sortingDirty=!0,this.refreshItems(!0),this.$_fireCountEvents(n,i,e)},onDataSetCalculated:function(t){this._fireDataCalculated(t)},onDataSetCommandStackChanged:function(t,e,i){this._fireUndoStateChanged(e,i)},onTreeDataSetRowCountChanged:function(t,e){},onTreeDataSetRowAdding:function(t,e,i){return!0},onTreeDataSetRowAdded:function(t,e,i){var n=this._itemMap[i.parent().rowId()],s=this.rowCount(),r=this.descendantRowCount(),o=this.descendantCount();if(this._sortingDirty=!0,this.$_needFilter()||this.$_needSort())t.$$_cmd?this._saveAndRefresh(i):this._saveAndRefresh();else{var a=this.$_internalAddItem(n,n.headerCount()+e,i);a&&(this._incDescendants(n,1,0),this.$_buildItems(a),this.$_clearSummary(),t.$$_cmd&&this.onRestoreRow(t.$$_cmd,a,i.rowId()),n.expanded()&&n.visible()?this._expandItem(n,!0,!1,0,!1):this._fireItemChanged(n))}this.$_fireCountEvents(o,r,s)},onTreeDataSetRowsAdded:function(t,e,i,n,s){if(!s){var r,o,a,h,l,u,d=this.rowCount(),c=this.descendantRowCount(),_=this.descendantCount();if(this._sortingDirty=!0,this.$_needFilter()||this.$_needSort())t.$$_cmd?this._saveAndRefresh(n):this._saveAndRefresh();else{if(t.$$_cmd&&(u=[]),(l=e?this._itemMap[e.rowId()]:this._rootRow)&&n&&0<(h=n.length)){for(i+=l.headerCount(),r=0;r<h;r++)o=n[r],(a=this.$_internalAddItem(l,i+r,o))&&(this._incDescendants(l,1,0),u&&u.push(a),this.$_buildItems(a));this.$_clearSummary(),l.expanded()&&l.visible()?this._expandItem(l,!0,!1,0,!1):this._fireItemChanged(l)}u&&this.onRestoreRows(t.$$_cmd,u)}this.$_fireCountEvents(_,c,d)}},onTreeDataSetRowsInserted:function(t,e){var i,n,s,r,o,a=this.rowCount(),h=this.descendantRowCount(),l=this.descendantCount();if(this._sortingDirty=!0,this.$_needFilter()||this.$_needSort())t.$$_cmd?this._saveAndRefresh(e):this._saveAndRefresh();else{for(t.$$_cmd&&(list=[]),i=0;i<e.length;i++)(s=(s=(n=e[i]).parent())?this._itemMap[s.rowId()]:this._rootRow)&&(r=n.index()+s.headerCount(),(o=this.$_internalAddItem(s,r,n))&&(this._incDescendants(s,1,0),list&&list.push(o),this.$_buildItems(o),this.$_clearSummary(),s.expanded()&&s.visible()?this._expandItem(s,!0,!1,0,!1):this._fireItemChanged(s)));list&&this.onRestoreRows(t.$$_cmd,list)}this.$_fireCountEvents(l,h,a)},onTreeDataSetRowDeleting:function(t,e){return!0},onTreeDataSetRowDeleted:function(t,e){var i,n,s,r,o=e.rowId(),a=this._itemMap[o];a&&(i=this.rowCount(),n=this.descendantRowCount(),s=this.descendantCount(),r=a.parent(),t.$$_cmd&&this.onSaveRow(t.$$_cmd,a,o),this._sortingDirty=!0,this.$_needFilter()||this.$_needSort()?this._saveAndRefresh():(this.$_internalRemoveItem(a),this._incDescendants(r,-a._descendantCount-1,0),this.$_clearSummary(),r.expanded()&&r.visible()&&(this._visibleItems.remove(a),this._fireRefresh())),this.$_fireCountEvents(s,n,i))},onTreeDataSetRowsDeleting:function(t,e){return!0},onTreeDataSetRowsDeleted:function(t,e){var i,n,s,r,o,a,h,l=!1,u=[];for(i=0,n=e.length;i<n;i++)(s=this._itemMap[e[i].rowId()])&&u.push(s);if(0<(n=u.length)){if(t.$$_cmd&&this.onSaveRows(t.$$_cmd,u),o=this.rowCount(),a=this.descendantRowCount(),h=this.descendantCount(),this._sortingDirty=!0,this.$_needFilter()||this.$_needSort())this._saveAndRefresh(),l=!0;else for(i=0;i<n;i++)(s=u[i])&&(r=s.parent(),this.$_internalRemoveItem(s),this._incDescendants(r,-s._descendantCount-1,0),this.$_clearSummary(),r.expanded()&&r.visible()&&(this._visibleItems.remove(s),l=!0));l&&this._fireRefresh(),this.$_fireCountEvents(h,a,o)}},onTreeDataSetRowUpdating:function(t,e){return!0},onTreeDataSetRowUpdated:function(t,e){var i,n,s,r,o=this.$_needFilter();((i=this._itemMap[e.rowId()])||o)&&(this._sortingDirty=!0,(o=o||this.$_needSort())?(n=this.rowCount(),s=this.descendantRowCount(),r=this.descendantCount(),o=!0,this._saveAndRefresh()):this.$_clearSummary(),i||(i=this._itemMap[e.rowId()]),this._fireItemUpdated(i),o&&this.$_fireCountEvents(r,s,n))},onTreeDataSetRowsUpdated:function(t,e){var i=this.rowCount(),n=this.descendantRowCount(),s=this.descendantCount();this._sortingDirty=!0,this._saveAndRefresh(),this.$_fireCountEvents(s,n,i)},onTreeDataSetValueChanging:function(t,e,i){return!0},onTreeDataSetValueChanged:function(t,e,i){var n,s,r,o,a=this.$_needFilter();((n=this._itemMap[e.rowId()])||a)&&(this._sortingDirty=!0,(a=a||this.$_needSort())?(s=this.rowCount(),r=this.descendantRowCount(),o=this.descendantCount(),a=!0,this._saveAndRefresh()):this.$_clearSummary(),n||(n=this._itemMap[e.rowId()]),this._fireItemUpdated(n),a&&this.$_fireCountEvents(o,r,s))},onTreeDataSetStateChanged:function(t,e,i){if(!i){var n,s,r,o=this.$_needFilter()&&this._dataStateFiltering,a=this._itemMap[e.rowId()];(a||o)&&(n=this.rowCount(),s=this.descendantRowCount(),r=this.descendantCount(),this.$_needFilter()?this._saveAndRefresh():this.$_internalRowStateChanged(a),a||(a=this._itemMap[e.rowId()]),this.$_fireCountEvents(r,s,n))}},onTreeDataSetStatesChanged:function(t,e,i){if(!i){var n,s,r,o,a,h=this.rowCount(),l=this.descendantRowCount(),u=this.descendantCount();if(len=e.length,this.$_needFilter()&&this._dataStateFiltering)this._saveAndRefresh();else if(1==len)s=e[0],n=this._itemMap[s.rowId()],this.$_internalRowStateChanged(n);else if(0<len){if(r=!1,this._hideDeleted)for(o=0;o<len;o++)(n=this._itemMap[e[o].rowId()])&&(j1.isDeleted(n.dataState())?(a=n.parent(),this.$_internalRemoveItem(n),a.expanded()&&a.visible()&&this._visibleItems.remove(n),r=!0):j1.isDeleted(n.dataRow().oldState())&&(r=!0));r&&this.$_clearSummary(),this._fireRefresh()}this.$_fireCountEvents(u,l,h)}},onDataSetStatesCleared:function(t){var e=this.rowCount(),i=this.descendantRowCount(),n=this.descendantCount();this._saveAndRefresh(),this._fireRowStatesCleared(),this.$_fireCountEvents(n,i,e)},onTreeDataSetTagChanged:function(t,e){var i,n,s,r,o=this._itemMap[e.rowId()];i=this._dataTagFiltering&&this.$_needFilter(),o&&(i&&(n=this.rowCount(),s=this.descendantRowCount(),r=this.descendantCount(),this._saveAndRefresh()),o||(o=this._itemMap[e.rowId()]),this._fireRowTagChanged(o),i&&this.$_fireCountEvents(r,s,n))},onTreeDataSetTagsChanged:function(t,e){var i,n,s,r=this._dataTagFiltering&&this.$_needFilter();r&&(i=this.rowCount(),n=this.descendantRowCount(),s=this.descendantCount(),this._saveAndRefresh()),this._fireRowTagsChanged(this.getRowsOfDataRows(e)),r&&this.$_fireCountEvents(s,n,i)},onDataSetTagsCleared:function(t){var e,i,n,s=this._dataTagFiltering&&this.$_needFilter();s&&(e=this.rowCount(),i=this.descendantRowCount(),n=this.descendantCount(),this._saveAndRefresh()),this._fireRowTagsCleared(),s&&this.$_fireCountEvents(n,i,e)},dataSource:function(){return this._dataSource},setDataSource:function(t){if(t!==this._dataSource){var e=this.rowCount(),i=this.descendantRowCount(),n=this.descendantCount();this.$_clearItems(),this.$_resetSummary(),this._dataSource&&this._dataSource.removeListener(this),this._dataSource=Q2(t,H4),this._dataSource&&(this.$_buildTree(),this._dataSource.addListener(this)),this._fireReset(),this.$_fireCountEvents(n,i,e)}},rowCount:function(){return this._visibleItems.count()},dataRowCount:function(){return this._rowCount},getItem:function(t){return 0<=t&&t<this._visibleItems.count()?this._visibleItems.getItem(t):null},getRowOfDataRow:function(t){return t instanceof W0?this._itemMap[t.rowId()]:this._itemMap[t]},getRowsOfDataRows:function(t,e){var i,n,s,r,o=this._itemMap;if(V1(t))for(i=[],n=0,s=t.length;n<s;n++)(r=(r=t[n])instanceof W0?o[r.rowId()]:o[r])&&(e||0<=r.index())&&i.push(r);return i},refreshItems:function(t){this.$_clearItems(t),this.$_buildTree(),this._fireRefresh()},$_refreshItems:function(){this.$_clearItems(),this.$_buildTree()},_saveAndRefresh:function(t,e){var i,n=this._dataSource,s=this._dataCount,r=n?n.rowCount():0,o=[];if(-1==t&&n.$$_cmd&&r<s&&(this.onSaveRows(n.$$_cmd),this.$_saveExpanded(this._saveExps=[],this._rootRow)),0<r&&this.$_saveExpanded(o,this._rootRow),this.$_clearItems(e),this.$_buildTree(o),-1==t)n.$$_cmd&&n.rowCount()>s&&this.onRestoreRows(n.$$_cmd);else if(V1(t)){for(i=t.length;i--;)t[i]=this.getRowOfDataRow(t[i]);this.onRestoreRows(n.$$_cmd,t)}else t&&this.onRestoreRow(n.$$_cmd,this.getRowOfDataRow(t),t.rowId());this._fireRefresh()},getIndexOfRow:function(t){var e=this._itemMap[t];return e&&e.visible()?e.index():-1},getItemOfRow:function(t,e){var i=this._itemMap[t];return i&&(e||0<=i.index())?i:null},fixedCount:function(){return 0},setFixed:function(t,e,i){},maxItemCount:function(){return this._maxItemCount},setMaxItemCount:function(t){if(t=Math.max(0,parseInt(t)),!isNaN(t)&&t!=this._maxItemCount){var e=this.rowCount(),i=this.descendantRowCount(),n=this.descendantCount();this._maxItemCount=t,this._saveAndRefresh(),this.$_fireCountEvents(n,i,e)}},findItem:function(t,e,i,n,s){var r,o,a,h,l,u,d,c,_,f,g=this._visibleItems,m=this.dataSource();if(!m)return-1;if(rows=this.rowCount(),rows<1)return-1;if((r=Math.min(t.length,e.length))<1)return-1;for(o=[],a=0;a<r;a++)o.push(m.getField(t[a]).dataType()==a1.TEXT);for(d=!i||void 0===i.allFields||i.allFields,c=i&&i.textMatch,_=i&&i.caseSensitive,f=i&&i.partialMatch,n=Math.max(0,n),s=Math.min(rows-1,s),a=n;a<=s;a++){if(l=0<=(h=g.getItem(a)).dataIndex())for(u=0;u<r;u++){if((l=c||o[u]?$$_compareTextValue(e[u],h.getValue(t[u]),_,f):e[u]==h.getValue(t[u]))&&!d)return a;if(!l&&d)break}if(l)return a}return-1},findCell:function(t,e,i,n,s,r){var o,a,h,l,u,d,c,_,f,g,m=this._visibleItems,p=this.dataSource();if(!p)return null;if((o=this.rowCount())<1)return null;for(h=i&&i.textMatch,l=i&&i.caseSensitive,u=i&&i.partialMatch,d=t.length,n=Math.max(0,n),s=Math.min(o-1,s),r=Math.max(0,r),a=[],c=0;c<d;c++)a.push(p.getField(t[c]).dataType()==a1.TEXT);for(r>=t.length&&(n++,r=0),c=n;c<=s;c++)if(0<=(_=m.getItem(c)).dataIndex())for(g=n<c?0:r;g<d;g++)if(f=t[g],h||a[g]?$$_compareTextValue(e,_.getValue(f),l,u):e==_.getValue(f))return{rowIndex:c,fieldIndex:f,fieldName:p.getFieldName(f),searchFieldIndex:g};return null},expandWhenGrouping:!0,footerWhenExpanded:!0,setFooterWhenExpanded:function(t){t!=this._footerWhenExpanded&&(this._footerWhenExpanded=t,this.$_resetVisibleItems(),this._resetItemIndices(),this._fireRefresh())},footerWhenCollapsed:!0,setFooterWhenCollapsed:function(t){t!=this._footerWhenCollapsed&&(this._footerWhenCollapsed=t,this.$_resetVisibleItems(),this._resetItemIndices(),this._fireRefresh())},summaryScope:i4.DESCENDANT,setSummaryScope:function(){value!=this._summaryScope&&(this._summaryScope=value,this.$_clearSummary(),this._fireRefresh())},rowSummaryScope:i4.DESCENDANT,setRowSummaryScope:function(){value!=this._rowSummaryScope&&(this._rowSummaryScope=value,this.$_clearGroupSummary(),this._fireRefresh())},setSummaryScopes:function(t,e){var i=t!=this._summaryScope;(i||e!=this._rowSummaryScope)&&(this._summaryScope=t,this._rowSummaryScope=e,i?this.$_clearSummary():this.$_clearGroupSummary(),this._fireRefresh())},summaryMode:"aggregate",setSummaryMode:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_clearSummary(),this._fireRefresh())},groupSummaryMode:"aggregate",setGroupSummaryMode:function(t){t!=this._groupSummaryMode&&(this._groupSummaryMode=t,this.$_clearGroupSummary(),this._fireRefresh())},getNextDataRow:function(t){return this._visibleItems.getNextData(t)},$_visitChildren:function(t,e,i){var n,s,r,o=t._children;if(o&&0<(s=o.length))for(n=0;n<s;n++){if(r=o[n],!1===e(o[n]))return!1;if((!i||t.expanded())&&!1===this.$_visitChildren(r,e,i))return!1}},visitAll:function(t,e){if(t)return e?this._super(t):this.$_visitChildren(this._rootRow,t,e)},insertItem:function(t,e,i,n){var s,r,o,a=this._visibleItems;if(t.collapsed()&&a.expand(t,!1),s=a.indexOf(t.getItem(i)),n){for(t.insert(i+1,e),r=a.count(),o=t.level()+1;++s<r&&!(a.getItem(s).level()<=o););a.insert(e,s)}else t.insert(i,e),a.insert(e,s)},appendItem:function(t,e){var i,n,s,r=this._visibleItems;for(t.collapsed()&&r.expand(t,!1),i=0<t.count()?r.indexOf(t.getItem(t.count()-1)):r.indexOf(t),n=r.count(),s=t.level();++i<n&&!(r.getItem(i).level()<=s););t.add(e),r.insert(e,i)},removeItem:function(t){this._visibleItems.remove(t),t.parent().remove(t)},$_calcLevel:function(t,e,i){var n,s,r,o=e;for(n=0,s=t.count();n<s;n++)(r=t.getItem(n))&&(o=Math.max(o,e+1),r instanceof j2&&(!i||r.expanded())&&(o=Math.max(o,this.$_calcLevel(r,e+1,i))));return o},getLevels:function(t){return this.$_calcLevel(this._rootRow,0,t)},$_setExpanded:function(t,e,i){var n,s,r;if(this._setExpanded(t,!0),this._expMap[t._dataRow.rowId()]=!0,t.setHasChildren(!1),e)for(r=t.count(),n=0;n<r;n++)(s=t.getItem(n))instanceof Z2&&(s.expanded()||s.level()<i)&&this.$_setExpanded(s,!0,i)},_expandItem:function(t,e,i,n,s){if(t&&t.visible()&&(e||!t.expanded())){if(s&&!this._fireExpanding(t))return;this._visibleItems.collapse(t),this._visibleItems.expand(t,i,n),this._resetItemIndices(t===this._rootRow?0:t.index()),this.$_setExpanded(t,i,0<n?t.level()+n:1e6);try{this._fireRefresh()}finally{s&&this._fireExpanded(t)}}},expand:function(t,e,i){if(!this._editing){var n=this.rowCount();this._expandItem(t,i,e,0,!0),this._fireCountChanged(n,this.rowCount())}},expandAll:function(t){if(!this._editing){var e=this.rowCount();this._expandItem(this._rootRow,!0,!0,0<t?t+1:0,!0),this._fireCountChanged(e,this.rowCount())}},$_setCollapsed:function(t,e){var i,n,s;if(this._setExpanded(t,!1),this._expMap[t._dataRow.rowId()]=!1,e)for(s=t.count(),i=0;i<s;i++)(n=t.getItem(i))instanceof Z2&&this.$_setCollapsed(n,!0)},_collapseItem:function(t,e,i,n){if(t&&t.visible()&&(e||t.expanded())){if(n&&!this._fireCollapsing(t))return;this._visibleItems.collapse(t),this.$_setCollapsed(t,i),t==this._rootRow&&this._visibleItems.expand(this._rootRow,!1),this._resetItemIndices(t===this._rootRow?0:t.index());try{this._fireRefresh()}finally{n&&this._fireCollapsed(t)}}},collapse:function(t,e){if(!this._editing){var i=this.rowCount();this._collapseItem(t,!1,e,!0),this._fireCountChanged(i,this.rowCount())}},collapseAll:function(){if(!this._editing){var t=this.rowCount();this._collapseItem(this._rootRow,!0,!0,!0),this._fireCountChanged(t,this.rowCount())}},reveal:function(t){if(t){if(!t.visible()){for(var e=t.parent();e.parent()!=this._rootRow;)e=e.parent();this._expandItem(e,!0,!0,t.level()-e.level(),!0)}return t.visible()}},$_saveExpanded:function(t,e){var i,n,s=e.count();for(i=0;i<s;i++)(n=Q2(e.getItem(i),Z2))&&n.expanded()&&(t[n.dataId()]=!0,this.$_saveExpanded(t,n))},$_saveExtents:function(e,t){t.visitAll(function(t){e[t.dataId()]=t._viewExts})},orderBy:function(t,e,i,n){var s,r,o,a;if(n=!(3<arguments.length)||n,this._fireSorting(t,e,i)){for(this._sortFields=[],this._sortDirections=[],this._sortCases=[],s=t?t.length:0,r=e?e.length:0,o=i?i.length:0,a=0;a<s;a++)this._sortFields.push(t[a]),a<r?this._sortDirections.push(e[a]):0<r?this._sortDirections.push(e[r-1]):this._sortDirections.push(M4.ASCENDING),a<o?this._sortCases.push(i[a]):0<o?this._sortCases.push(i[o-1]):this._sortCases.push(g7.SENSITIVE);this._explicitSort=!0,this.$_refreshItems();try{n&&this._fireRefresh()}finally{this._fireSorted()}}},_doApplyFilters:function(t,e){var i=this.rowCount(),n=this.descendantRowCount(),s=this.descendantCount();this.$_refreshItems();try{t&&this._fireRefresh()}finally{e||this._fireFiltered()}this.$_fireCountEvents(s,n,i)},_doApplyRowFilter:function(){this._doApplyFilters(!0)},_createRootRow:function(){return this._rootRow=new u47(this),this._setExpanded(this._rootRow,!0),this._rootRow},$_collectItems:function(t,e){var i,n,s;for(i=0,n=t.count();i<n;i++)s=t.getChild(i),e.push(s),s instanceof Z2&&this.$_collectItems(s,e);return e},getAllItems:function(){return this.$_collectItems(this._rootRow,[])},getTopItems:function(){return this._rootRow.children()},getLeafItems:function(t,e){return this._rootRow.getLeaves(t,e)},getNumber:function(t){var e=this.$_getSummary(t);return e?e.count:this._rowCount},getSum:function(t){var e=this.$_getSummary(t);return e?e.sum:NaN},getMax:function(t){var e=this.$_getSummary(t);return e?e.max:NaN},getMin:function(t){var e=this.$_getSummary(t);return e?e.min:NaN},getAvg:function(t){var e=this.$_getSummary(t);return e?e.avg:NaN},getVar:function(t){var e=this.$_getSummary(t);return e?e.vars:NaN},getVarp:function(t){var e=this.$_getSummary(t);return e?e.varsp:NaN},getStdev:function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.vars):NaN},getStdevp:function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.varsp):NaN},getSummarized:function(t){return this._summarizedMap[t.$_hash]},setSummarized:function(t,e){return this._summarizedMap[t.$_hash]=e},_doGetDistinctValues:function(i,t){var n=this._dataSource.$_getComparer(t),e=this._rootRow.getDescendants(!1,!0);return e?(e.sort(function(t,e){return n(i,t.dataRow(),e.dataRow())}),e):[]},_hideDeletedChanged:function(){this._saveAndRefresh()},$_refreshExtents:function(){var n=this._extents=[],s=this._expMap=[];this._rootRow.visitAll(function(t){var e,i=t._dataRow;i&&(e=i.rowId(),s[e]=t.expanded(),n[e]=t._viewExts)})},$_checkSelected:function(t){var e,i,n,s;for(e=0,i=t.count();e<i;e++)n=t.getChild(e),(s=Z2.getTemp(n,e))._parent=t,s.$_childIndex=e,n.$_selected=this.$_selectItem(s),this.$_checkSelected(n),n.$_selected&&(t.$_selected=!0)},$_internalAddItem:function(t,e,i){var n;return this._hideDeleted&&j1.isDeleted(i.rowState())?null:((n=Z2.getTemp(i,e))._parent=t,n.$_childIndex=e,this._passiveFiltering&&i.$_selected||!this._passiveFiltering&&this.$_selectItem(n)?(n=new Z2(i),t.insert(e,n),this._rowCount++,this._itemMap[i.rowId()]=n):null)},$_internalRemoveItem:function(t){t&&(t.parent().remove(t),this._rowCount--,this._itemMap[t._dataRow.rowId()]=void 0)},$_internalRowStateChanged:function(t){if(t&&t.visible())if(this._hideDeleted&&(j1.isDeleted(t.dataState())||j1.isDeleted(t.dataRow().oldState()))){var e=t.parent();this.$_internalRemoveItem(t),this.$_clearSummary(),e.expanded()&&e.visible()&&(this._visibleItems.remove(t),this._fireRefresh())}else this._fireItemChanged(t)},_setItem:function(t,e){this._visibleItems.setItem(t.index(),e),this._resetItemIndex(t.index())},$_resetVisibleItems:function(){this._visibleItems._clearAndInit(this.fixedCount()),this._visibleItems.expand(this._rootRow,!1),this._setExpanded(this._rootRow,!0),this._resetItemIndices(0)},$_clearItems:function(t){this._visibleItems.clear(),this._rootRow.clear(),this._itemMap=[],this._rowCount=0,t&&(this._expMap=[],this._extents=[])},$_selectItem:function(t){return this.$_select(t,this._activeRowFilter)},$_buildItem:function(t,e,i,n,s,r,o){var a,h,l,u=this.$_internalAddItem(t,i,e);if(u)return this.$_checkCount&&this.$_buildCount--,a=0,(n[h=e.rowId()]||s&&s[h]||r&&r[h])&&this._setExpanded(u,!0),0<e.count()&&((l=u._customHeaders=this._customRowProvider.getCustomHeaderRows(u))&&(u.addAll(l),a+=l.length),this.$_buildItems(u,s,r),(l=u._customFooters=this._customRowProvider.getCustomFooterRows(u))&&(u.addAll(l),a+=l.length),o&&o(u)&&(u.add(u.$_createFooter()),a++)),this._incDescendants(t,1,a),u},$_buildItems:function(t,e,i,n){var s,r,o,a,h=this._expMap,l=this._footerCallback,u=t.dataRow(),d=t.count();if(this._passiveFiltering&&(u.$_selected=!1,this.$_checkSelected(u)),n instanceof W0)this.$_buildItem(t,n,d,h,e,i,l);else for(s=0,r=u.count();s<r&&!(this.$_checkCount&&this.$_buildCount<=0);s++)o=u.getChild(s),this.$_buildItem(t,o,d+s,h,e,i,l);a=this._extents,t.visitAll(function(t){var e=t._dataRow;if(e){var i=e.rowId();a[i]&&(t._viewExts=a[i])}})},$_sortItem:function(t){var e,i,n=t.count();if(1<n){for(e=0,i=n-1;e<i&&!(t.getItem(e)instanceof Z2);)e++;for(;e<i&&!(t.getItem(i)instanceof Z2);)i--;if(i==e)return;this.$_sort(t,0,e,i)}for(e=0;e<n;e++){var s=t.getItem(e);s instanceof Z2&&this.$_sortItem(s)}},$_sort:function(t,e,i,n){var s,r,o,a=this._sortFields[e],h=this._sortDirections[e],l=this._dataSource,u=this._sortCases[e]==g7.INSENSITIVE;if(this._sorter.run(t,a,h,u,i,n,e+1==this._sortFields.length),s=l.getField(a).dataType()==a1.TEXT&&u?l.equalTexts.bind(l):l.equalValues.bind(l),e+1<this._sortFields.length){for(o=r=i;r<n;)r++,s(a,t.getItem(r).dataRow(),t.getItem(r-1).dataRow())||(this.$_sort(t,e+1,o,r-1),o=r);o<n&&this.$_sort(t,e+1,o,n)}},$_buildTree:function(t){var e=this._dataSource;e&&(this._filtered=this.$_checkFiltered()||0<this.maxItemCount(),this.$_prepareFilters(e),this._sorted=this.$_checkSorted(),this._dataCount=e.rowCount(),this._rootRow._dataRow=e.rootRow(),this._rootRow._descendantCount=0,this._itemMap[this._rootRow._dataRow.rowId()]=this._rootRow,this.$_checkCount=0<this._maxItemCount,this.$_buildCount=this._maxItemCount,this.$_buildItems(this._rootRow,t,this._saveExps,this._dataRoot),this.$_checkCount=!1,this._saveExps=[],this.$_clearSummary(),this._sorted&&1<this._rootRow.count()&&this.$_sortItem(this._rootRow),this._sortingDirty=!1,this.$_resetVisibleItems())},$_resetSummary:function(){this._summaryMap=[],this._summarizedMap={},this._rootRow._clearSummary()},$_resetGroupSummary:function(){this._rootRow._clearSummary()},$_clearSummary:function(){if(this._summaryMap)for(var t=this._summaryMap.length;t--;)this._summaryMap[t]&&this._summaryMap[t].clear();this._summarizedMap={},this._rootRow._clearSummary()},$_clearGroupSummary:function(){this._rootRow._clearSummary()},$_getSummary:function(t){var e,i=this._summaryMap[t];return i||(e=this.dataSource())&&e.canSummarize(t)&&(i=new b0(t),this._summaryMap[t]=i),i&&0==i.count&&0<this.rowCount()&&this.$_summarize(i),i},$_summarize:function(t){var e,i,n,s,r,o=this.dataSource(),a=this._rootRow;if(o){switch(this.summaryScope()){case i4.DESCENDTANT:case i4.ALL:if(!this._filtered)return t.count=o.rowCount(),void o.aggregate(t,this._summaryMode==z4.STATISTICAL);e=a.getDescendants(!1,!0);break;case i4.CHILD:case i4.PARENT_CHILD:for(e=[],s=a.count();s--;)e.push(a.getChild(s));break;case i4.GROUP:e=[],a.visitRows(!1,!0,function(t){0<t.count()&&e.push(t)});break;case i4.LEAF:e=[],a.visitRows(!1,!0,function(t){0==t.count()&&e.push(t)})}for(n=[],i=e.length,s=0;s<i;s++)(r=e[s])instanceof Z2&&n.push(r.dataRow());t.count=n.length,o.aggregateRange(t,n,this._summaryMode==z4.STATISTICAL)}},_fireItemChanged:function(t){this._eventLock<=0&&this.fireEvent(G7.ITEM_CHANGED,t)},_fireExpanding:function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(G7.EXPANDING,t)},_fireExpanded:function(t){this._eventLock<=0&&this.fireEvent(G7.EXPANDED,t)},_fireCollapsing:function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(G7.COLLAPSING,t)},_fireCollapsed:function(t){this._eventLock<=0&&this.fireEvent(G7.COLLAPSED,t)}});G7.ITEM_CHANGED="onTreeItemProviderItemChanged",G7.EXPANDING="onTreeItemProviderExpanding",G7.EXPANDED="onTreeItemProviderExpanded",G7.COLLAPSING="onTreeItemProviderCollapsing",G7.COLLAPSED="onTreeItemProviderCollapsed";var A97=I1("TreeEditItem",Z2,{init:function(t,e,i){this._super(e?e.dataRow():null),this._provider=t,this._item=e,this._state=i,this._values=[],this._started=!1,this._checkDiff=!1,this._strictDiff=!1},values:function(){return this._values.concat()},setValues:function(t){var e,i,n,s,r,o=this.dataSource(),a=o.fieldCount();if(V1(arr))for(a=Math.min(a,t.length),e=0;e<a;e++)n=o.getField(e),s=this._values[e],r=n.readValue(arr[e]),this._values[e]=r,this._started&&parent&&!n.equalValues(s,r)&&this._provider._editItemCellUpdated(this,e,s,r);else if(t)for(e=0;e<a;e++)i=o.getFieldName(e),t.hasOwnProperty(i)&&(n=o.getField(e),s=this._values[e],r=n.readValue(t[i]),this._values[e]=r,this._started&&parent&&!n.equalValues(s,r)&&this._provider._editItemCellUpdated(this,e,s,r))},setDiffs:function(t,e){this._checkDiff=t,this._strictDiff=e},beginEdit:function(t,e){this._started=!0,this.setDiffs(t,e)},setEditValue:function(t,e,i){var n,s,r=this.dataSource();if(t<0&&t>=r.fieldCount())throw new RangeError("field index is out of bounds: "+t);n=r.getField(t),s=this._values[t],e=n.readValue(e),this._values[t]=e,!i&&r.updateDerivedValues(this._dataRow,this._values,t),this._started&&this.parent()&&!n.equalValues(s,e)&&this._provider._editItemCellUpdated(this,t,s,e)},isValueEdited:function(t){var e;return T1.isInserting(this._state)||!(e=this.dataSource()).getField(t).equalValues(e.getValue(this._item.dataIndex(),t),this._values[t])},isEditing:function(){return!0},dataIndex:function(){return this._dataRow?this._dataRow.rowId():-1},dataId:function(){return this._dataRow?this._dataRow.rowId():-1},dataSource:function(){return this._provider.dataSource()},rowState:function(){return this._state},dataState:function(){return this._item?this._item.dataState():j1.NONE},iconIndex:function(){return this._item?this._super():-1},hasChildren:function(){return!!this._item&&this._super()},dataRow:function(){return this._item?this._super():-1},expanded:function(){return!!this._item&&this._item.expanded()},getValue:function(t){var e=this.dataSource();if((t=e.getFieldIndexEx(t))<0&&t>=e.fieldCount())throw new RangeError("field index is out of bounds: "+t);return this._values[t]},setValue:function(t,e,i){var n,s,r,o=this.dataSource();if((t=o.getFieldIndexEx(t))<0&&t>=o.fieldCount())throw new RangeError("field index is out of bounds: "+t);n=o.getField(t),s=this._values[t],e=n.readValue(e),(r=!this._checkDiff)||(r=this._strictDiff?!n.equalValues(s,e):!n.sameValues(s,e)),r&&(this._values[t]=e,!i&&o.updateDerivedValues(this.dataIndex(),this._values,t),this.parent()&&this._provider._editItemCellUpdated(this,t,s,e))},getRowData:function(){return this._values.concat()},getRowObject:function(){var t=this.dataSource();if(t){for(var e={},i=0,n=t.fieldCount();i<n;i++)e[t.getFieldName(i)]=this._values[i];return e}return null},copyToObject:function(t){var e=this.dataSource();if(e)for(var i=0,n=e.fieldCount();i<n;i++)t[e.getFieldName(i)]=this._values[i]}}),C6=I1("TreeGridRowProvider",k2,{init:function(t){this._super(null,t);var e=this._items=new G7;e.onSaveRow=function(t,e,i){this.fireEvent(C6.SAVE_ROW,t,e,i)}.bind(this),e.onSaveRows=function(t,e){this.fireEvent(C6.SAVE_ROWS,t,e)}.bind(this),e.onRestoreRow=function(t,e,i){this.fireEvent(C6.RESTORE_ROW,t,e,i)}.bind(this),e.onRestoreRows=function(t,e){this.fireEvent(C6.RESTORE_ROWS,t,e)}.bind(this),this.setSource(e),this._summarizer=new w07(e),this._editingItem=null,this._appending=!1,this._insertAfter=!1,this._insertIndex=-1},onRowProviderFilterAdd:function(t,e,i){},onRowProviderFilterRemove:function(t,e,i){},onRowProviderFilterClear:function(t,e){},onRowProviderFilterClearAll:function(t){},onRowProviderFiltered:function(t){},onRowProviderSorting:function(t,e,i){return this._fireSorting(e,i)},onRowProviderSorted:function(t){this._fireSorted()},pageSorting:!1,pageFiltering:!1,dataRoot:function(){return this._items.dataRoot()},setDataRoot:function(t){this._items.setDataRoot(t)},sortMode:function(){return this._items.sortMode()},setSortMode:function(t){this._items.setSortMode(t)},filterMode:function(){return this._items.filterMode()},setFilterMode:function(t){this._items.setFilterMode(t)},passiveFiltering:function(){return this._items.passiveFiltering()},setPassiveFiltering:function(t){this._items.setPassiveFiltering(t)},setCustomRowProvider:function(t){this._items.setCustomRowProvider(t)},setAggregateMode:function(t){this._items.setAggregateMode(t)},setSummaryMode:function(t){this._items.setSummaryMode(t)},setGroupSummaryMode:function(t){this._items.setGroupSummaryMode(t)},summarizer:function(){return this._summarizer},dataStateFiltering:function(){return this._items.dataStateFiltering()},setDataStateFiltering:function(t){return this._items.setDataStateFiltering(t)},dataTagFiltering:function(){return this._items.dataTagFiltering()},setDataTagFiltering:function(t){return this._items.setDataTagFiltering(t)},sortFirst:function(){return this._items.sortFirst()},setSortFirst:function(t){return this._items.setSortFirst(t)},isSorted:function(){return this._items.isSorted()},isFiltered:function(){return this._items.isFiltered()},setSummaryScopes:function(t,e){this._items.setSummaryScopes(t,e)},clearSummary:function(){this._items.$_clearSummary()},resetCustomGroupItems:function(t){this._items&&this._items._saveAndRefresh()},setFooterCallback:function(t){this._items&&this._items.$_setFooterCallback(t)},requestRefresh:function(){this._items._saveAndRefresh()},getLevels:function(t){return this._items.getLevels(t)},canSorting:function(t,e,i){return!this.isEditing()},orderBy:function(t,e,i){this.canSorting(t,e,i)&&this._items.orderBy(t,e,i)},getSortFieldCount:function(){return this._items.length},getSortFields:function(){return this._items.getSortFields()},getSortDirections:function(){return this._items.getSortDirections()},getSortCases:function(){return this._items.getSortCases()},canFiltering:function(){return!this.isEditing()},addFilter:function(t,e){this.canFiltering()&&this._items.addFilter(t,e)},removeFilter:function(t,e){this.canFiltering()&&this._items.removeFilter(t,e)},clearFilters:function(t){this.canFiltering()&&this._items.clearFilters(t)},clearAllFilters:function(){this.canFiltering()&&this._items.clearAllFilters()},beginFiltering:function(){this.canFiltering()&&this._items.beginFilter()},endFiltering:function(){this.canFiltering()&&this._items.endFilter()},visitAll:function(t,e){return this._items.visitAll(t,e)},expand:function(t,e,i){this._items.expand(t,e,i)},collapse:function(t,e){this._items.collapse(t,e)},expandAll:function(t){this._items.expandAll(t)},collapseAll:function(){this._items.collapseAll()},reveal:function(t){return this._items.reveal(t)},getRowOfDataRow:function(t){return this._items.getRowOfDataRow(t)},getRowsOfDataRows:function(t,e){return this._items.getRowsOfDataRows(t,e)},getNextDataRow:function(t){return this._items.getNextDataRow(t)},descendantCount:function(){return this._items._rootRow.descendantCount()},descendantRowCount:function(){return this._items._rootRow.descendantRowCount()},getDescendantRows:function(t,e){var i=this.isEditing()?function(t){return t===this._editingItem?t._item:t}.bind(this):null;return this._items._rootRow.getDescendants(t,e,i)},visitRows:function(t,e,i){return this._items._rootRow.visitRows(t,e,i)},hideDeleted:function(){return this._items.hideDeleted},setHideDeleted:function(t){this._items.setHideDeleted(t)},getAllItems:function(){return this._items.getAllItems()},getTopItems:function(){return this._items.getTopItems()},getLeafItems:function(t,e){return this._items.getLeafItems(t,e)},getItem:function(t){return this._items.getItem(t)},getItemOfRow:function(t,e){var i=this._items.getItemOfRow(t,e);return i&&(e||i.visible())?i:null},getDistinctValues:function(t,e,i){return this._items.getDistinctValues(t,e,i)},findItem:function(t,e,i,n,s){return this._items.findItem(t,e,i,n,s)},findCell:function(t,e,i,n,s,r){return this._items.findCell(t,e,i,n,s,r)},hasCellStyle:function(){return this._items.hasCellstyle()},setCellStyle:function(t,e,i){this._items.setCellStyle(t,e,i)},setCellStyles:function(t,e,i){this._items.setCellStyles(t,e,i)},removeCellStyle:function(t){this._items.removeCellStyle(t)},clearCellStyles:function(){this._items.clearCellStyles()},getCellStyle:function(t,e){return this._items.getCellStyle(t,e)},currentDataRow:function(){var t=this._currentIndex,e=0<=t&&t<this.rowCount()?this.getItem(t):null;return e instanceof Z2?e.dataRow():null},canAppend:function(){return this._super()},canInsert:function(t){return!!t},canDelete:function(t,e){return!!t},$_replaceItem:function(t,e){t.parent().setItem(t,e),this._items._setItem(t,e)},_doEditingStarted:function(t){this._items.$_setEditing(!0)},_doEditingFinished:function(t){this._items.$_setEditing(!1)},_doBeginUpdate:function(t){return this._editingItem=this._createEditItem(t,T1.UPDATING,null),this.$_replaceItem(t,this._editingItem),this._editingItem},_doBeginAppend:function(t){var e=this.source()._rootRow;return this._appending=!0,this._editingItem=this._createEditItem(null,T1.APPENDING,t),this._items.appendItem(e,this._editingItem),this._editingItem},_doBeginInsert:function(t,e,i,n){var s;return n?(this._appending=!0,t.setExpanded(!0),this._editingItem=this._createEditItem(null,T1.INSERTING,e),this._items.appendItem(s=t,this._editingItem)):(s=t.parent(),this._appending=!1,this._insertAfter=i,this._insertIndex=s.indexOf(t),this._editingItem=this._createEditItem(t,T1.INSERTING,e),this._items.insertItem(s,this._editingItem,this._insertIndex,this._insertAfter)),this._editingItem},_doCompleteUpdate:function(t,e){var i,n=!1,s=this.dataSource();if(s){i=this._editingItem.dataRow(),this.$_replaceItem(this._editingItem,t);try{n=0<=e?s.setValue(i,e,this._editingItem.values()[e]):s.updateRow(i,this._editingItem.values())}catch(e){throw this.$_replaceItem(t,this._editingItem),e}n?this._copyExtents(this._editingItem,t):this.$_replaceItem(t,this._editingItem)}return n},_doCompleteInsert:function(t,e){var i,n,s,r,o,a,h=this.dataSource();if(h){s=(n=this._editingItem.parent()).dataRow(),r=this._editingItem.values(),o=n.dataIndexOf(this._editingItem),this._items.removeItem(this._editingItem);try{i=this.isAppending()?h.addRow(s,r,!1,e):h.insertRow(s,o,r,!1,e)}catch(t){throw this._appending?this._items.appendItem(n,this._editingItem):this._items.insertItem(n,this._editingItem,this._insertIndex,this._insertAfter),t}i?(a=n.itemOfRow(i.rowId()),this._copyExtents(this._editingItem,a)):this._appending?this._items.appendItem(n,this._editingItem):this._items.insertItem(n,this._editingItem,this._insertIndex,this._insertAfter)}return i},_doCancelEdit:function(t,e){t==T1.UPDATING?(this.$_replaceItem(this._editingItem,e),this._copyExtents(this._editingItem,e)):t!=T1.INSERTING&&t!=T1.APPENDING||this._editingItem.parent()&&this._items.removeItem(this._editingItem),this._super(t,e)},_doCommitEdit:function(t,e){t==T1.UPDATING||T1.INSERTING,this._super(t,e)},remove:function(t){if(t instanceof Z2){var e=t.dataRow();e&&this.dataSource().deleteRow(e)}},removeAll:function(t){if(t&&0<t.length){var e,i,n,s=[];for(e=0,i=t.length;e<i;e++)(n=this._items.getItem(t[e]))instanceof Z2&&s.push(n.dataRow());this.dataSource().deleteRows(s)}},getRemovableRows:function(t){if(0<t.length){var e,i,n,s=[];for(e=0,i=t.length;e<i;e++)(n=this._items.getItem(t[e]))instanceof Z2&&s.push(n.dataRow());return s}},removeRows:function(t){t&&this.dataSource().deleteRows(t)},dataSource:function(){return this._items.dataSource()},setDataSource:function(t){this._items.setDataSource(t)},rootRow:function(){return this._items._rootRow},_createEditItem:function(t,e,i){var n=this.dataSource();if(!n)return null;var s,r=null,o=n.fieldCount();switch(e){case T1.UPDATING:for(r=new A97(this,t,e),s=0;s<o;s++)r.setEditValue(s,t.getValue(s),!0);this._copyExtents(t,r);break;case T1.INSERTING:case T1.APPENDING:if(r=new A97(this,null,e),i){for(s=0;s<o;s++)i.length>s&&r.setEditValue(s,i[s],!0);n.updateDerivedValues(r._dataRow,r._values,-1)}}return r},onTreeItemProviderItemChanged:function(t,e){this._eventLock<=0&&this.fireEvent(G7.ITEM_CHANGED,e)},onTreeItemProviderExpanding:function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(G7.EXPANDING,e)},onTreeItemProviderExpanded:function(t,e){this._eventLock<=0&&this.fireEvent(G7.EXPANDED,e)},onTreeItemProviderCollapsing:function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(G7.COLLAPSING,e)},onTreeItemProviderCollapsed:function(t,e){this._eventLock<=0&&this.fireEvent(G7.COLLAPSED,e)},onRowProviderDataCountChanged:function(t,e,i){this._fireDataCountChanged(e,i)},onRowProviderRowCountChanged:function(t,e,i){this._fireRowCountChanged(e,i)},onRowProviderFilterAdded:function(t,e,i){this._fireFilterAdded(e,i)},onRowProviderFilterRemoved:function(t,e,i){this._fireFilterRemoved(e,i)},onRowProviderFilterCleared:function(t,e){this._fireFilterCleared(e)},onRowProviderFilterAllCleared:function(t){this._fireFilterAllCleared()},onRowProviderFiltering:function(t){return this._fireFiltering(z2.FILTERING)},onRowProviderFiltered:function(t){this._fireFiltered(z2.FILTERED)},onRowProviderSorting:function(t,e,i){return this._fireSorting(e,i)},onRowProviderSorted:function(t){this._fireSorted()}},{SAVE_ROW:"onTreeGridRowProviderSaveRow",SAVE_ROWS:"onTreeGridRowProviderSaveRows",RESTORE_ROW:"onTreeGridRowProviderRestoreRow",RESTORE_ROWS:"onTreeGridRowProviderRestoreRows"}),C68=I1("TreeOptions",H5,{init:function(t){this._super(t),this._headerItems=new S8(t),this._footerItems=new S8(t),this._expanderStyles=new o1(this,"treeExpanderStyles"),this._footerStyles=new o1(this,"treeFooterStyles"),this._indentStyles=new o1(this,"treeIndentStyles"),this._allFooters=!1},iconField:null,iconCallback:null,childrenCallback:null,footerLevels:null,footerDisplayCallback:null,headerItems:null,footerItems:null,line:null,expanderStyles:null,footerStyles:null,indentStyles:null,linesVisible:!0,expanderWidth:17,checkBoxVisible:!1,checkBoxSize:17,iconList:null,iconWidth:0,iconHeight:0,rowSummaryMode:u1(z4,z4.AGGREGATE),summaryScope:u1(i4,i4.DESCENDTANT),rowSummaryScope:u1(i4,i4.DESCENDTANT),setIconField:function(t){t!=this._iconField&&(this._iconField=t,this._refreshOwner())},setIconCallback:function(t){t!=this._iconCallback&&(this._iconCallback=t,this._refreshOwner())},setChildrenCallback:function(t){t!=this._childrenCallback&&(this._childrenCallback=t,this._refreshOwner())},setFooterLevels:function(t){var e="string"==typeof t&&"*"===t.trim(),i=e?null:j0(t);e==this._allFooters&&i==this._footerLevels||(this._footerLevels=e?(this._allFooters=!0,null):(this._allFooters=!1,i),this._grid.refreshTreeItems())},setFooterDisplayCallback:function(t){(t=p4(t))!=this._footerDisplayCallback&&(this._footerDisplayCallback=t,this._grid.refreshTreeItems())},getFooterDisplayCallback:function(){var n=this;return function(t){var e=n._footerDisplayCallback;if(e)return e(t);if(n._allFooters)return!0;var i=n._footerLevels;return i&&0<=i.indexOf(t.level())}},setHeaderItems:function(t){t!==this._headerItems&&(this._headerItems.assign(t),this._grid.refreshTreeItems())},setFooterItems:function(t){t!==this._footerItems&&(this._footerItems.assign(t),this._grid.refreshTreeItems())},line_:function(){return this._grid.styles().line()},setLine:function(t){this._grid.styles().setLine(t)},setExpanderStyles:function(t){t!==this._expanderStyles&&(this._expanderStyles.extend(t),this._refreshOwner())},setFooterStyles:function(t){t!==this._footerStyles&&(this._footerStyles.extend(t),this._refreshOwner())},setLineStyles:function(t){t!==this._indentStyles&&(this._indentStyles.extend(t),this._refreshOwner())},setLinesVisible:function(t){t!=this._linesVisible&&(this._linesVisible=t,this._refreshOwner())},setExpanderWidth:function(t){t!=this._expanderWidth&&(this._expanderWidth=t,this._refreshOwner())},setCheckBoxVisible:function(t){t!=this._checkBoxVisible&&(this._checkBoxVisible=t,this._refreshOwner())},setCheckBoxSize:function(t){(t=Math.max(0,t))!=this._checkBoxSize&&(this._checkBoxSize=t,this._refreshOwner())},setIconList:function(t){t!=this._iconList&&(this._iconList=t,this._refreshOwner())},setIconWidth:function(t){(t=Math.max(0,t))!=this._iconWidth&&(this._iconWidth=t,this._refreshOwner())},setIconHeight:function(t){(t=Math.max(0,t))!=this._iconHeight&&(this._iconHeight=t,this._refreshOwner())},setRowSummaryMode:function(t){return t!=this._rowSummaryMode&&(this._rowSummaryMode=t,this._grid.$_groupSummaryModeChanged()),this},setSummaryScope:function(t){t!=this._summaryScope&&(this._summaryScope=t,this._grid.$_summaryScopeChanged())},setRowSummaryScope:function(t){t!=this._rowSummaryScope&&(this._rowSummaryScope=t,this._grid.$_summaryScopeChanged())}}),o68=I1("TreeItemExpanderCell",Q4,{init:function(t){this._super(t,"treeItemExpanderCell")},displayText:function(){return null},value:function(){return null}}),e68=I1("TreeItemIndentCell",Q4,{init:function(t){this._super(t,"treeItemIndentCell")}}),x68=I1("TreeItemFooterCell",Q4,{init:function(t){this._super(t,"treeItemFooterCell"),this._value=NaN,this._error=null,this._errorDetail=null},calculate:function(){this._value=NaN,this._error=null;try{this._value=w6.$_getValue(this._index.getRow(this._grid),this._index.dataColumn())}catch(t){this._error=t,this._errorDetail=t,r6(t)}},displayText:function(){var t,e,i;return this._error?Q4.ERROR:(t=this._value,!(e=isNaN(t)?"string"==typeof t?t:null:String(t))&&(i=this.index().valueColumn())&&(e=i.groupFooter().text()),e)},value:function(){return this._value},error:function(){return this._error},errorDetail:function(){return this._errorDetail}}),b97=I1("TreeSelectionTool",e47,{init:function(t){this._super(t)},_doKeyDown:function(t,e,i){var n,s=this.grid(),r=s.isEditing(),o=i&&0<s.selections().count(),a=this.focused().clone();if(a&&(n=a.getRow(s))&&!n.isEditing()&&function(t){var e=t.isFirstColumn();if(!e){var i=t.column;e=i instanceof t2&&O1.isLeft(i)}return e}(a))switch(t){case i1.RIGHT:if(!r&&!o&&n instanceof j2&&n.collapsed()&&e)return n.setExpanded(!0),!0;break;case i1.LEFT:if(!r&&!o){if(!n.leaf()&&!n.collapsed())return n.setExpanded(!1),!0;if(!(n.parent()instanceof u47))return a.setRow(n.parent()),this.setFocused(a,!0),!0}break;case i1.DOWN:if(!r&&(e||i)&&n&&n.index()==s.rowCount()-1&&s.insert(i,e))return!0}return this._super(t,e,i)},_doColumnHeaderClicked:function(t){this._super(t),this.grid().$_sortColumnByUser(t)},_doElementClicked:function(t){if(this._super(t),t instanceof F97){var e=this.grid();if(e.editOptions().checkable()){var i=t.item();i&&e.isCheckable(i)&&e.setChecked(i,!e.isChecked(i),e.checkBar().exclusive())}}},_doHandleClicked:function(t){if(t instanceof g47){var e=t.cellView().row();e&&e.setExpanded(!e.expanded())}else this._super(t)}}),g47=I1("TreeExpandHandle",X3,{init:function(t,e){this._super(t,e,"treeItemExpandHandle"),this._figureBackground=U1.BLACK,this.setClickable(!0)},expanded:!1,shapeSize:9,shapeColor:null,shapeName:null,fill:null,_doDraw:function(t){var e=this._shapeSize,i=new g1(0,0,this.width(),this.height());this._expanded?"itriangle"==this._shapeName?$$_drawItriangle(t,i,e,this._shapeColor):"triangle"==this._shapeName?$$_drawRightTriangle(t,i,e,this._shapeColor):$$_drawMinusBox(t,i,e,this._shapeColor):"itriangle"==this._shapeName||"triangle"==this._shapeName?$$_drawTriangleRight(t,i,e,this._shapeColor):$$_drawPlusBox(t,i,e,this._shapeColor)},_doDrawHtml:function(){this._doDraw(this.$_getGraphics(!0))}}),m97=12,D97=m97-2,r47=new Z1(4290493371),h47=new U1(4294967295),X47=new U1(4293848814),Q97=new U1(4282664004),F97=I1("TreeCheckElement",o7,{init:function(t){this._super(t,"treeCheckView"),this.setClickable(!0)},item:null,checkable:!0,checked:!1,exclusive:!1,_doDraw:function(t){var e=new g1(0,0,this.width(),this.height());t.drawRectI(null,null,e);var i=m97,n=D97,s=B1(e.x+(e.width-n)/2),r=B1(e.y+(e.height-n)/2);if(this._exclusive){var o=n/2;t.drawCircle(this._checkable?h47:X47,r47,s+o,r+o,o),this._checked&&t.drawCircle(Q97,null,s+o,r+o,o/2)}else t.drawBoundsI(this._checkable?h47:X47,r47,s,r,n,n),this._checked&&$$_drawCheckMark(t,Q97,e,i*=.9)},_doDrawHtml:function(){var t=new g1(0,0,this.width(),this.height()),e=this._checkable?h47:X47;this._css.background=e?e.css():"";var i=this._checkElement;i||((i=this._checkElement=document.createElement("input")).type="checkbox",i.style.position="absolute",i.style.padding="0px",i.style.margin="0px",this._dom.appendChild(i));var n=f17(i);i.checked=this.checked(),i.style.left=t.x+(t.width-n.width)/2+"px",i.style.top=t.y+(t.height-n.height)/2+"px"},propertyChanged:function(t,e){this.invalidate()}}),L68=I1("TreeExpanderElement",m4,{init:function(t,e){this._super(t,e),this._handle=new g47(t,this),this.addElement(this._handle),this._checkView=new F97(t,this),this.addElement(this._checkView),this._iconView=new x28(t,"treeIconView"),this._iconView.setMouseEnabled(!1),this.addElement(this._iconView),this._line=null,this._expanderWidth=0,this._dataCell=null},setHandleWidth:function(t){this._handle.setWidth(t)},setShowCheck:function(t){this._checkView.setVisible(t)},setCheckSize:function(t){this._checkView.setWidth(t)},setIconWidth:function(t){this._iconView.setWidth(t)},setExpanderWidth:function(t){this._expanderWidth=t},setExclusive:function(t){this._checkView.setExclusive(t)},getAdapter:function(t){return t==l4?this._dataCell:this._super(t)},_doUpdateContent:function(t){this._super(t);var e=this.grid(),i=this.index().getRow(e);this._checkView.visible()&&(this._checkView.setItem(i),this._checkView.setCheckable(e.isCheckable(i)),this._checkView.setChecked(e.isChecked(i))),this._iconView.setImage(e.getTreeIcon(i)),i.setIconHeight(this._iconView.iconHeight()),i.setIconWidth(this._iconView.iconWidth()),this._handle.setVisible(e.getHasChildren(i)),this._handle.setExpanded(i.expanded());var n=t.styles();this._handle.setFill(null),this._handle.setShapeColor(n.shapeColor()),this._handle.setShapeName(n.shapeName()),this._handle.setShapeSize(n.shapeSize()?n.shapeSize().getDimension(this._handle.width()):9)},_doLayoutContent:function(t){var e,i=this.grid(),n=this.index().getRow(i),s=i.treeOptions().expanderStyles(),r=this._checkView.visible()?this._checkView.width():0,o=this._handle.width()*(n.level()-1)+s.paddingLeft(),a=this.borderTopWidth(),h=this.height()-a-this.borderBottomWidth();e=this._handle.width(),this.lineAlignment(),this._handle.setBoundsI(o,a+(h-e)/2,this._handle.width(),e),0<r&&(e=r,this._checkView.setBoundsI(o+this._handle.width()+(this._handle.width()-r)/2,a+(h-e)/2,r,e));var l=this._iconView.width();0<l?(this._iconView.setVisible(!0),e=this._iconView.iconHeight(),this._iconView.setBoundsI(o+this._handle.width()+this._handle.width()/2+r-l/2,a+(h-e)/2,l,e)):this._iconView.setVisible(!1)},_doRender:function(t,e){var i=this.background();i&&t.drawRectI(i,null,e);var n=this.borderBottomWidth(),s=this.borderRightWidth();n&&(n=B1((n+1)/2),t.drawLineI(this._borderBottom,e.x,e.bottom()-n,e.right(),e.bottom()-n)),this.width()<=this._expanderWidth&&s&&(s=B1((s+1)/2),t.drawLineI(this._borderRight,e.right()-s,e.y,e.right()-s,e.bottom()))},_doRenderHtml:function(t){this._doRender(this.$_getGraphics(!0,null,this._handle._dom),t)},canHovering:function(){return!1},_setDataCell:function(t){this._dataCell=t}}),p97=I1("TreeItemElement",N6,{init:function(t){this._super(t),this.setName("treeItemView"),this._expander=new L68(t,"treeExpanderView"),this.addElement(this._expander)},_clearChildren:function(){this._super(),this.addElement(this._expander)},_prepareCells:function(t){this._super(t),this.$_prepareExpander(t)},_layoutCells:function(t){this._super(t),this.$_layoutExpander(t)},$_prepareExpander:function(t){var e,i,n=this._expander;0<this.childCount()&&(0==t.firstCol()||this.fixed())?(e=this.grid().getExpanderCell(this.rowIndex()),i=this._getFirstCell(t),n._setDataCell(i),n.setVisible(!0),n.updateCell(e)):n.setVisible(!1)},$_layoutExpander:function(t){var e,i,n,s,r,o,a,h,l,u,d,c,_;this._expander.visible()&&(i=(e=this.grid()).checkBar(),n=this.item(),s=e.treeOptions(),r=this._getFirstCell(t),o=n.level(),a=s.expanderWidth(),h=s.checkBoxVisible()?s.checkBoxSize():0,l=s.iconWidth(),u=this._expander,l<=0&&(d=e.getTreeIcon(n))&&(l=d.width),c=a*o+(a+l)/2+h+s.expanderStyles().paddingHorz(),_=r.width(),r.setWidth(_-c),r.setX(r.x()+c),r.layoutTreeContent(t),u.setHandleWidth(a),u.setShowCheck(0<h),u.setExclusive(i.exclusive()&&i.exclusiveDisplay()),u.setCheckSize(h),u.setIconWidth(l),u.setExpanderWidth(c),u.setBounds(0,0,Math.min(c,_),this.height()),u.setIndex(P1.temp(this._item.index(),null)),u.layoutContent(t))}}),z97=I1("TreeItemIndentElement",m4,{init:function(t){this._super(t,"treeItemIndentView")},_getModel:function(t,e){return t.getFooterCell(e)},_doRender:function(t,e){var i=this.background();i&&t.drawRectI(i,null,e);var n=this.borderBottomWidth(),s=this.borderRightWidth();n&&(n=B1((n+1)/2),t.drawLineI(this._borderBottom,e.x,e.bottom()-n,e.right(),e.bottom()-n)),s&&(s=B1((s+1)/2),t.drawLineI(this._borderRight,e.right()-s,e.y,e.right()-s,e.bottom()))},_doRenderHtml:function(t){this._doRender(this.$_getGraphics(!0),t)},canHovering:function(){return!1}}),n97=I1("TreeItemFooterGroupCellElement",Y7,{init:function(t,e){this._super(t,"treeItemFooterView")},_getModel:function(t,e){return t.getFooterCell(e)},_createGroupCellView:function(){return new n97(this._dom)}}),l97=I1("TreeItemFooterElement",x5,{init:function(t,e){this._super(t,"treeItemFooterView"),this._fixed=e,this._cells={},this.addElement(this._indentView=new z97(t))},fixed:!1,background:null,borderBottom:null,getCell:function(t){if(t){var e=t.root(),i=this._cells[e.$_hash];if(i&&i.visible())return e!=t&&(i=i.findCell(t)),i}return null},_doUpdateElement:function(t){this.setBackground(t.background()),this.setBorderBottom(t.borderBottom()),this.$_wBottom=this._borderBottom?this._borderBottom.width():0},_doMesasure:function(t,e,i){return{width:e,height:i}},_doLayoutContent:function(t){this.$_prepareCells(t),this.$_layoutCells(t)},_doDraw:function(t){},_doDrawHtml:function(t){},$_createCellView:function(t,e,i){var n=P1.temp(e,i),s=t.getFooterCell(n),r=this._cells[i.$_hash];return r instanceof m4||(r=i instanceof O1?new n97(this._dom):new b6(this._dom),this._cells[i.$_hash]=r,this.addElement(r)),r.setVisible(!0),r.updateCell(s),r},$_prepareCells:function(t){var e,i,n=this.grid(),s=this._item.index(),r=t.fixedColCount(),o=this._fixed?0:t.firstCol(),a=this._fixed?r-1:t.lastCol();for(n.columnLayoutChanged()&&(this.clear(),this._cells={}),this.hideAll(),e=o;e<=a;e++)i=t.getColumn(e),this.$_createCellView(n,s,i)},$_layoutCells:function(t){var e,i,n,s,r,o,a,h,l,u=this.grid(),d=this._item.index(),c=u.leftPos(),_=this._fixed,f=t.fixedColCount(),g=this._cells,m=_?0:t.firstCol(),p=_?f-1:t.lastCol(),w=t.getColumn(m),v=w&&(w=w.parent()).$_groupFooterSpanned?w.$_groupFooterSpans:null,C=this.height();if(v)for(e=m;e<=p;){for(o=t.columnBounds(e),i=t.getColumn(e),n=v[e++],s=this.$_createCellView(u,d,n),i!==n&&(r=g[i.$_hash])&&r.setVisible(!1);e<=p&&(i=v[e])===n;e++)o.width+=t.getColumnBounds(e).width,(i=t.getColumn(e))!==n&&(r=g[i.$_hash])&&r.setVisible(!1);_||(o.x-=c),o.height=C,s.setRect(o),s.layoutContent(t)}else for(e=m;e<=p;e++)s=g[t.getColumn(e).$_hash],o=t.columnBounds(e),_||(o.x-=c),o.height=C,s.setRect(o),s.layoutContent(t);(0==m||_)&&(a=u.treeOptions(),h=this.item().level(),l=a.expanderWidth()*h+0+a.iconWidth()+a.expanderStyles().paddingHorz(),f&&_&&(c=0),(s=g[t.getColumn(m).$_hash]).setX(l-c),s.setWidth(s.width()-l),s instanceof O7?s.layoutTreeContent(t):s.layoutContent(t),(s=this._indentView).setBounds(0,0,l-c,C),s.setVisible(!0),s.updateCell(u.getIndentCell(P1.temp(this._item.index(),null))))}}),H68=I1("TreeLinesElement",D4,{init:function(t,e){this._super(t,"treeLinesView"),this._tree=e,this._startIndex=-1,this._endIndex=-1,this._levelWidth=20,this._handleWidth=9,this._handleHeight=9,this._stroke=Z1.LTGRAY,this._options=null},setLevelWidth:function(t){t!=this._levelWidth&&(this._levelWidth=t,this.invalidate())},setHandleWidth:function(t){t!=this._handleWidth&&(this._handleWidth=t,this.invalidate())},setHandleHeight:function(t){t!=this._handleHeight&&(this._handleHeight=t,this.invalidate())},setStroke:function(t){t!=this._stroke&&(this._stroke=t,this.invalidate())},setRange:function(t,e,i){this._options=t.treeOptions(),e==this._startIndex&&i==this._endIndex||(this._startIndex=e,this._endIndex=i,this.invalidate())},$_findLevelItem:function(t,e,i){var n,s;for(n=i;n<=this._endIndex;n++)if((s=t.getRow(n))&&s.level()==e)return s;return null},$_drawVertLine:function(t,e,i,n){var s,r,o=this._tree.layoutManager(),a=o.topIndex(),h=n*this._levelWidth+this._levelWidth/2,l=0,u=this.height();e&&(s=o.itemBounds(e.index()-a),r=e instanceof Z2&&this._tree.getHasChildren(e)?this._handleHeight:0,l=s.y+s.height/2+r/2),i&&(s=o.itemBounds(i.index()-a),r=i instanceof Z2&&this._tree.getHasChildren(i)?this._handleHeight:0,u=s.y+s.height/2-r/2),h=B1(h),t.drawVLineI(this._stroke,h,Y1(l),Y1(u))},$_drawChildLine:function(t,e,i){var n,s,r,o=this._tree.layoutManager(),a=o.topIndex(),h=e.level()*this._levelWidth+this._levelWidth/2,l=this.height();s=o.itemBounds(e.index()-a),n=this._options.checkBoxVisible()?s.y+s.height/2+D97/2:e instanceof Z2&&0<e.iconHeight()?s.y+s.height/2+e.iconHeight()/2:s.bottom()-s.height/4,i&&(s=o.itemBounds(i.index()-a),r=i instanceof Z2&&this._tree.getHasChildren(i)?this._handleHeight:0,l=s.y+s.height/2-r/2),h=B1(h),t.drawVLineI(this._stroke,h,Y1(n),Y1(l))},$_drawHorzLine:function(t,e){var i,n,s=this._tree.layoutManager(),r=s.topIndex(),o=e.parent().level()*this._levelWidth+this._levelWidth/2,a=e.level()*this._levelWidth+this._levelWidth/2;this._tree.treeOptions(),e instanceof Z2?(a-=this._levelWidth/2,this._tree.getHasChildren(e)&&(o+=this._handleWidth/2)):(this._tree.treeOptions(),a-=this._levelWidth/2),i=s.itemBounds(e.index()-r),n=B1(i.y+i.height/2),t.drawHLineI(this._stroke,n,Y1(o),Y1(a))},_doDraw:function(t){var e,i,n,s,r,o,a=this._tree;if(a.layoutManager(),a.topIndex(),!this._dom&&t.clipBounds(0,0,this.width(),this.height()),!(!a||this._startIndex<0||this._endIndex<0||this._startIndex>this._endIndex)){for(n=null,e=this._startIndex;e<=this._endIndex&&!(n=a.getRow(e));e++);if(n){if(1<(s=n.level())||0<n.childIndex()){for(i=0;i<s;i++)(o=(r=n.getAncestor(i)).last())&&o.index()>=e&&(o=this.$_findLevelItem(a,i+1,e),this.$_drawVertLine(t,null,o,r.level()));0<n.childIndex()&&this.$_drawVertLine(t,null,n,n.parent().level())}for(;e<=this._endIndex;e++)r=(n=a.getRow(e)).parent(),(i=n.childIndex())<r.count()-1&&((o=r.getItem(i+1))&&o.index()>this._endIndex&&(o=null),this.$_drawVertLine(t,n,o,r.level())),(r=n)instanceof j2&&r.expanded()&&0<r.count()&&((o=r.getItem(0)).index()>this._endIndex&&(o=null),this.$_drawChildLine(t,n,o)),this.$_drawHorzLine(t,n)}}},_doDrawHtml:function(){var t=this._svg;t||(t=this._svg=new b7(null,this.container()),this._dom.appendChild(t._svg)),this._doDraw(t.getGraphics(!0,new g1(0,0,this.width(),this.height())))}}),I97=I1("TreeBodyElement",X27,{init:function(t,e,i){this._super(t,e,i)}}),G68=I1("TreeRowGroupElement",Q47,{init:function(t){this._super(t,"treeRowGroupLayer"),this._footers=[],this._footerBuff=[],this._fixedFooterBuff=[],this._footerViews=[],this._fixedFooterViews=[],this._customHeaders=[],this._customHeaderBuff=[],this._customHeaderViews=[],this._customFooters=[],this._customFooterBuff=[],this._customFooterViews=[],this.setWidth(101),this.setHeight(101),this.setClickable(!1)},clearBody:function(){this._footers=[],this._customHeaders=[],this._customFooters=[]},addFooter:function(t){this._footers.push(t)},addCustomHeader:function(t){this._customHeaders.push(t)},addCustomFooter:function(t){this._customFooters.push(t)},getFooterView:function(t,e){for(var i=e?this._fixedFooterViews:this._footerViews,n=i.length;n--;)if(i[n].item()===t)return i[n]},getGroupRowView:function(t){for(var e=this._customHeaderViews,i=e.length;i--;)if(e[i].item()===t)return e[i];for(i=(e=this._customFooterViews).length;i--;)if(e[i].item()===t)return e[i]},isLayer:function(){return!0},_doMeasure:function(t,e,i){return new J2(e,i)},_doLayoutContent:function(t){var e=this.grid();this.$_layoutFooters(e,t),this.$_layoutCustomHeaders(e,t),this.$_layoutCustomFooters(e,t)},_doDraw:function(t){var e=this.getClientRect(this._drawRect);e.width--,e.height--},_doDrawHtml:function(t){},$_layoutFooters:function(t,e){var i,n,s,r,o,a,h,l,u=this.width(),d=0<e.fixedColCount(),c=e.fixedWidth(),_=t.treeOptions().footerStyles(),f=t.topIndex();for(i=this._footerViews.length,n=0;n<i;n++)this._footerViews[n].recycling=!1;for(;i<this._footers.length;)s=this.$_borrowFooterView(this._footers[i]),this.addElement(s),this._footerViews.push(s),i++;for(;i>this._footers.length;)i--,this.$_removeFooterView(this._footerViews[i]),this._footerViews.pop();for(n=0;n<i;n++)r=this._footers[n],(s=this._footerViews[n])._fixed=!1,o=s.item()!==r,s.updateElement(r,_),h=c,(a=e.itemBounds(r.index()-f)).setLeft(h),a.width=u-c,s.setRect(a),!o&&s.recycling||s.layoutContent(e);if(d){for(i=this._fixedFooterViews.length,n=0;n<i;n++)this._fixedFooterViews[n].recycling=!1;for(;i<this._footers.length;)s=this.$_borrowFixedFooterView(this._footers[i]),this.addElement(s),this._fixedFooterViews.push(s),i++;for(;i>this._footers.length;)i--,this.$_removeFixedFooterView(this._fixedFooterViews[i]),this._fixedFooterViews.pop();for(l=t.body().fixedColumnBarWidth(),n=0;n<i;n++)r=this._footers[n],(s=this._fixedFooterViews[n])._fixed=!0,o=s.item()!==r,s.updateElement(r,_),h=0,(a=e.itemBounds(r.index()-f)).setLeft(h),a.width=c-l,s.setRect(a),!o&&s.recycling||s.layoutContent(e)}},$_removeFooterView:function(t){var e=this.getChildIndex(t);0<=e&&(this.removeChildAt(e),t.validate(!0),this._footerBuff.push(t))},$_removeFixedFooterView:function(t){var e=this.getChildIndex(t);0<=e&&(this.removeChildAt(e),t.validate(!0),this._fixedFooterBuff.push(t))},$_borrowFooterView:function(t){var e;return(e=0<this._footerBuff.length?this._footerBuff.pop():this.grid().delegate().borrowItemView(t,!1)).recycling=!1,e},$_borrowFixedFooterView:function(t){var e;return(e=0<this._fixedFooterBuff.length?this._fixedFooterBuff.pop():this.grid().delegate().borrowItemView(t,!0)).recycling=!1,e},$_layoutCustomHeaders:function(t,e){var i,n,s,r,o,a,h,l=t.treeOptions(),u=t.leftPos(),d=(e.fixedColCount(),this._customHeaderViews.length);for(i=0;i<d;i++)this._customHeaderViews[i].recycling=!1;for(;d<this._customHeaders.length;)n=this.$_borrowCustomHeaderView(this._customHeaders[d++]),this.addElement(n),this._customHeaderViews.push(n);for(;d>this._customHeaders.length;)this.$_removeCustomHeaderView(this._customHeaderViews[--d]),this._customHeaderViews.pop();for(i=0;i<d;i++)s=this._customHeaders[i],n=this._customHeaderViews[i],r=s.parent().level()+1,o=l.expanderWidth()*r+0+l.iconWidth()+l.expanderStyles().paddingHorz(),a=n.item()!==s,n.updateElement(s,s.model().styles()),(h=e.itemBounds(s.index()-t.topIndex())).x-=u,n.setWidth(h.width),n.setRect(h),!a&&n.recycling||(n._indentWidth=o,n.layoutContent(e))},$_borrowCustomHeaderView:function(t){var e;return(e=0<this._customHeaderBuff.length?this._customHeaderBuff.pop():t.model().createRowView(this._dom)).recycling=!1,e},$_removeCustomHeaderView:function(t){var e=this.getChildIndex(t);0<=e&&(this.removeChildAt(e),t.validate(!0),this._customHeaderBuff.push(t))},$_layoutCustomFooters:function(t,e){var i,n,s,r,o,a,h,l=t.treeOptions(),u=t.leftPos(),d=(e.fixedColCount(),this._customFooterViews.length);for(i=0;i<d;i++)this._customFooterViews[i].recycling=!1;for(;d<this._customFooters.length;)r=this.$_borrowCustomFooterView(this._customFooters[d++]),this.addElement(r),this._customFooterViews.push(r);for(;d>this._customFooters.length;)this.$_removeCustomFooterView(this._customFooterViews[--d]),this._customFooterViews.pop();for(i=0;i<d;i++)s=this._customFooters[i],r=this._customFooterViews[i],o=s.parent().level()+1,a=l.expanderWidth()*o+0+l.iconWidth()+l.expanderStyles().paddingHorz(),h=r.item()!==s,r.updateElement(s,s.model().styles()),(n=e.itemBounds(s.index()-t.topIndex())).x-=u,r.setWidth(n.width),r.setRect(n),!h&&r.recycling||(r._indentWidth=a,r.layoutContent(e))},$_borrowCustomFooterView:function(t){var e;return(e=0<this._customFooterBuff.length?this._customFooterBuff.pop():t.model().createRowView(this._dom)).recycling=!1,e},$_removeCustomFooterView:function(t){var e=this.getChildIndex(t);0<=e&&(this.removeChildAt(e),t.validate(!0),this._customFooterBuff.push(t))}}),C97=I1("TreeComponent",H47,{init:function(t,e,i){this._super(t,e,i)},treeView:function(){return this._gridView},_createGridView:function(t,e,i){return new r4(t,e,i)},_createDefaultTool:function(){return $_mobileEnabled&&D0()?this._super():new b97(this)}}),r4=I1("TreeView",q1,{init:function(t,e,i){this._super(t,e,i),this._focusedRow=-1,this._expanderCell=new o68(this),this._indentCell=new e68(this),this._footerCell=new x68(this),this._footerRuntime=new Y3,this._runStyles=new o1(this,"treeViewRuntimeStyles",null,!1),this.panel().setVisible(!1),this.groupPanel().setVisible(!1),this.setRowSource(this._createItemSource()),this._treeOptions.headerItems().registerType("chart",e97),this._treeOptions.footerItems().registerType("chart",e97),this._iconField=null,this._iconCallback=null,this._childrenCallback=null},customGroupItemChanged:function(t){this._items&&this._items.resetCustomGroupItems(t)},getCustomHeaderRows:function(t,e){return this._treeOptions._headerItems.getRows(t,e)},getCustomFooterRows:function(t,e){return this._treeOptions._footerItems.getRows(t,e)},onRowChanged:E1,onExpanding:E1,onExpaned:E1,onCollapsing:E1,onCollapsed:E1,treeOptions:{value:function(){return new C68(this)},set:function(t){return t!==this._treeOptions&&this._treeOptions.assign(t),this}},dataRoot:null,dataRoot_:function(){return this._items.dataRoot()},setDataRoot:function(t){return this._items.setDataRoot(t),this},treeGroupView:function(){return this._treeGroupView},treeLinesView:function(){return this._treeLinesView},rootRow:function(){return this._items.rootRow()},getLevels:function(t){return this._items.getLevels(t)},refreshTreeItems:function(){this._items.requestRefresh()},getExpanderCell:function(t){return this._expanderCell.setStyles(this._treeOptions.expanderStyles()),this._expanderCell.setIndex(P1.temp(t)),this._expanderCell},getFooterCell:function(t){var e=Q2(t.column,t2);return this._runStyles.clearValues(),e&&this._runStyles.extend(e.groupFooter().styles()),this._runStyles.setParent(this._treeOptions._footerStyles,!1),this._footerCell.setStyles(this._runStyles),this._footerCell.setIndex(t),this._footerCell.calculate(),this._footerCell},getIndentCell:function(t){return this._indentCell.setStyles(this._treeOptions.indentStyles()),this._indentCell.setIndex(P1.temp(t)),this._indentCell},expand:function(t,e,i){this._items.expand(t,e,i)},collapse:function(t,e){this._items.collapse(t,e)},expandRows:function(t,e,i){},collapseRows:function(t,e,i){},expandAll:function(t){t=0<arguments.length?t:0,this._items.expandAll(t)},collapseAll:function(){this._items.collapseAll()},getIconIndex:function(t){var e=t.iconIndex();return void 0===e&&(void 0!==this._iconField?e=t.dataRow().getValue(this._iconField):this._iconCallback&&(e=this._iconCallback(t))),e},getTreeIcon:function(t){var e=this._treeIcons;if(e){var i=this.getIconIndex(t);return e.getImage(i)}return null},getHasChildren:function(t){var e=0<t.count();return e||void 0===(e=t.hasChildren())&&this._childrenCallback&&(e=this._childrenCallback(t)),e},$_checkChildren:function(t,e,i,n,s,r,o){var a,h,l;for(a=0,h=t.count();a<h;a++)l=t.getItem(a),s&&!this.isCheckable(l)||l.$_setChecked(this,e)&&(o&&this._fireRowChecked(l,e),r.push(l)),!i||!l.expanded()&&n||this.$_checkChildren(l,e,!0,n,s,r,o)},checkChildren:function(t,e,i,n,s,r){var o=[];return t=t||this._items.rootRow(),this.$_checkChildren(t,e,i,n,s,o,r),0<o.length&&(this.refreshView(),this._fireRowsChecked(o,e)),o},getRowOfDataRow:function(t){return this._items.getRowOfDataRow(t)},getRowsOfDataRows:function(t,e){return this._items.getRowsOfDataRows(t,e)},getDataRowsOfRows:function(t){var e,i,n,s;if(t){for(e=[],i=0,n=t.length;i<n;i++)(s=t[i])instanceof Z2?s=s.dataRow():(s=this.getRow(s))instanceof Z2&&(s=s.dataRow()),s&&e.push(s);return e}return null},getCheckedDataRows:function(){var t,e,i=[],n=this.getCheckedRows(),s=n.length;for(t=0;t<s;t++)(e=n[t].dataRow())&&i.push(e);return i},getSelectedDataRows:function(t){var e,i,n,s=this.selections(),r=[],o=this.dataSource();if(o){for(e=0,i=s.count();e<i;e++)(n=s.getItem(e)).style()!=b2.ROWS&&n.style()!=b2.BLOCK||(r=r.concat(n.getDataIndices()));for(e=0,i=r.length;e<i;e++)r[e]=o.rowById(r[e]);t&&1<s.count()&&(r.sort(function(t,e){return t.rowId()-e.rowId()}),p87(r))}return r},visitAllRows:function(t){this._items.visitAll(t)},createCellStyleMap:function(){return new j68},setRowSource:function(t){if(t!=this.rowSource()){this._super(t);var e=this._treeOptions;(this._items=t)instanceof C6&&(t.setCustomRowProvider(this),t.setSummaryMode(this.displayOptions().summaryMode()),t.setGroupSummaryMode(this.rowGroup().summaryMode()),t.setSummaryScopes(e.summaryScope(),e.rowSummaryScope()),t.setFooterCallback(e.getFooterDisplayCallback()))}},setOptions:function(t){t&&t.tree&&this._treeOptions.assign(t.tree),this._super(t)},heightMeasurer:function(){return this._heightMeasurer||A77.Default},_createHeightMeasurer:function(t){return"fixed"==t?new M68:null},_addGroupView:function(){var t=this._dom;this._treeGroupView=new G68(t),this.addElement(this._treeGroupView),this._treeLinesView=new H68(t,this),this.addElement(this._treeLinesView)},addMasks:function(){},_createBodyView:function(t,e,i){return new I97(t,e,i)},_createDelegate:function(){return new o97(this)},_createLayoutManager:function(){return new W68(this)},_createDataTagManager:function(){return new y68(this)},canShowGroupFooters:function(){return!0},_doCanInsert:function(t,e,i){return t instanceof Z2||(t=this._items.getNextDataRow(t)),t instanceof Z2&&(0<t.count()||!i||0==t.level()||this.editOptions().appendable())},getSummarizer:function(){return this._items.summarizer()},onImageListImageLoaded:function(t,e){this._super(t,e),t===this._treeIcons&&(this.refreshView(),this._treeLinesView.invalidate())},onImageLoaded:function(t){this._super(t)},_doSummaryModeChanged:function(){this._items.setSummaryMode(this.displayOptions().summaryMode())},_doGroupSummaryModeChanged:function(){this._items.setGroupSummaryMode(this.treeOptions().rowSummaryMode())},initStyles:function(){this._super();var t=this.defaultStyles();this._treeOptions.footerStyles().setParent(t),this._treeOptions.expanderStyles().setParent(t),this._treeOptions.indentStyles().setParent(t);var e=o2.Default;this._treeOptions.footerStyles().setSysDefault(e.treeFooter()),this._treeOptions.expanderStyles().setSysDefault(e.treeExpander()),this._treeOptions.indentStyles().setSysDefault(e.treeIndent())},$_doLayout:function(t){var e=this._treeOptions,i=this.dataSource();this._treeIcons=this.getImageList(e.iconList()),this._iconCallback=e.iconCallback(),this._iconField=e.iconField()&&!this._iconCallback&&i?i.getFieldIndexEx(e.iconField(),!0):void 0,this._childrenCallback=e.childrenCallback(),null!=this.$_reqFoucsedRow&&(this.setFocusedDataRow(this.$_reqFoucsedRow),this.$_reqFoucsedRow=void 0);var n=this._super(t),s=this._styles.line();return e.linesVisible()&&s?(this._treeLinesView.setVisible(!0),this._treeLinesView.setStroke(s),this._treeLinesView.invalidate()):this._treeLinesView.setVisible(!1),n},assignImageList:function(t){this._super(t),this.treeOptions().iconImages()==t.name()&&(this.treeOptions._icons=t)},refreshView:function(){this._super(),this._treeLinesView&&this._treeLinesView.invalidate()},updatePastedRow:function(t,e,i){var n,s=this.dataSource();s&&t instanceof Z2&&(n=t.dataRow(),t&&s.updateRow(n,e,!1,!1,i))},updatePastedCell:function(t,e,i){var n,s=this.dataSource();s&&t instanceof Z2&&(n=t.dataRow())&&s.setValue(n,e,i)},appendPastedRow:function(t){var e,i=this.dataSource();i&&(e=i.createRow(t,-1,!1),i.rootRow().addChild(e))},clearStyles:function(t){this._super(t),t&&(treeOptions.expanderStyles().clearValues(),treeOptions.footerStyles().clearValues())},getFocusedCellView:function(t){var e,i,n=this._super(t);return n||(e=t.isFixedCol(this),(i=t.getRow(this))instanceof q9?n=this._treeGroupView.getFooterView(i,e):i instanceof M3&&(n=this._treeGroupView.getGroupRowView(i))),n},_doRevealRow:function(t){return this._items.reveal(t)},_createItemSource:function(){return new C6(!0)},$_getVisibleAncestor:function(t){var e=this._items.getItemOfRow(t);if(e){for(;e&&!e.visible();)e=e.parent();return e}return null},$_summaryScopeChanged:function(){var t=this.treeOptions();this._items.setSummaryScopes(t.summaryScope(),t.rowSummaryScope())},fireRowChanged:function(t){this.onRowChanged&&this.onRowChanged(this,t),this.fireEvent(r4.ITEM_CHANGED,t)},fireExpanding:function(t){return(!this.onExpanding||!1!==this.onExpanding(this,t))&&this.fireConfirmEvent(r4.EXPANDING,t)},fireExpanded:function(t){this.onExpanded&&this.onExpanded(this,t),this.fireEvent(r4.EXPANDED,t)},fireCollapsing:function(t){return(!this.onCollapsing||!1!==this.onCollapsing(this,t))&&this.fireConfirmEvent(r4.COLLAPSING,t)},fireCollapsed:function(t){this.onCollapsed&&this.onCollapsed(this,t),this.fireEvent(r4.COLLAPSED,t)},onTreeItemProviderItemChanged:function(t,e){this._treeLinesView.invalidate(),this.invalidateLayout(),this.fireRowChanged(e)},onTreeItemProviderExpanding:function(t,e){return this._focusedRow=this.$_focusedIndex()?this.$_focusedIndex().dataRow:-1,this.editController().isEditing()&&!this._items.isEditing()&&this.editController().cancelEditor(!0),!this.editController().isEditing()&&!this._items.isEditing()&&this.fireExpanding(e)},onTreeItemProviderExpanded:function(t,e){if(0<=this._focusedRow){var i=this.focusedIndex(),n=this.$_getVisibleAncestor(this._focusedRow);i._itemIndex=n?n.index():-1,this.setFocusedIndex(i,!1,!0)}this.fireExpanded(e)},onTreeItemProviderCollapsing:function(t,e){return this._focusedRow=this.$_focusedIndex()?this.$_focusedIndex().dataRow:-1,this.editController().isEditing()&&!this._items.isEditing()&&this.editController().cancelEditor(!0),!this.editController().isEditing()&&!this._items.isEditing()&&this.fireCollapsing(e)},onTreeItemProviderCollapsed:function(t,e){if(0<=this._focusedRow){var i=this.focusedIndex(),n=this.$_getVisibleAncestor(this._focusedRow);i._itemIndex=n?n.index():-1,this.setFocusedIndex(i,!1,!0)}this.fireCollapsed(e)},$$_uncheckAll:function(){this.checkAll(!1)},onTreeGridRowProviderSaveRow:function(t,e,i,n){i.$_saveChecked(e,this,n,this.checkBar().exclusive())},onTreeGridRowProviderSaveRows:function(t,e,i){var n,s,r,o=this.checkBar().exclusive();if(i)for(n=0,s=i.length;n<s;n++)i[n].$_saveChecked(e,this,i[n].dataIndex(),o);else for(n=0,s=this.rowCount();n<s;n++)(r=this.getRow(n))instanceof Z2&&r.$_saveChecked(e,this,r.dataIndex(),o)},onTreeGridRowProviderRestoreRow:function(t,e,i,n){i.$_restoreChecked(e,this,n,this.$$_uncheckAll),this.$_reqFoucsedRow=n},onTreeGridRowProviderRestoreRows:function(t,e,i){var n,s;if(i){if(0<i.length){for(n=0,s=i.length;n<s;n++)i[n].$_restoreChecked(e,this,i[n].dataIndex(),this.$$_uncheckAll);this.$_reqFoucsedRow=i[0].dataIndex()}}else for(n=0,s=this.rowCount();n<s;n++)r=this.getRow(n),r instanceof Z2&&r.$_restoreChecked(e,this,r.dataIndex(),this.$$_uncheckAll),this.$_reqFoucsedRow=r.dataIndex()}});r4.ROW_CHANGED="onTreeViewRowChanged",r4.EXPANDING="onTreeViewExpanding",r4.EXPANDED="onTreeViewExpanded",r4.COLLAPSING="onTreeViewCollapsing",r4.COLLAPSED="onTreeViewCollapsed";var o97=I1("TreeGridDelegate",l47,{init:function(t){this._super(t),this._rowViewClass=p97,this._rowViews=[],this._footerViews=[],this._groupItemViews={}},borrowItemView:function(t,e){var i,n,s;if(t instanceof Z2)return 0==this._rowViews.length&&this._rowViews.push(new this._rowViewClass(this._dom)),i=this._rowViews.length-1,(n=this._rowViews[i]).setFixed(e),this._rowViews.pop(),n;if(t instanceof q9)return 0==this._footerViews.length&&this._footerViews.push(new l97(this._dom)),i=this._footerViews.length-1,(s=this._footerViews[i]).setFixed(e),this._footerViews.pop(),s;if(t instanceof M3){var r=t.model().constructor.prototype.$name;return view=this._groupItemViews[r],view||(this._groupItemViews[r]=view=t.model().createRowView(this._dom)),view}return null},returnItemView:function(t){if(t instanceof this._rowViewClass)this._rowViews.push(t);else if(t instanceof l97)this._footerViews.push(t);else if(t instanceof c3){var e=t.item().model().constructor.prototype.$name;this._groupItemViews[e]=t}}}),A77=I1("TreeSimpleHeightsMeasurer",t9,{init:function(){this._super()},treeFooterHeight:function(){return this._treeFooterHeight},calculate:function(t,e,i,n,s,r){this._super(t,e,i,n,s,null),this._treeFooterHeight=this.$_calcTreeFooterHeight(t,t.getGroupFooterLevel())},$_calcTreeFooterHeight:function(t,e){var i=0;return i<=0&&(i=e*this.$_calcLine(t.treeOptions().footerStyles())),i}});A77.Default=new A77;var M68=I1("TreeFixedHeightsMeasurer",Q67,{init:function(){this._super()},treeFooterHeight:function(){return this._treeFooterHeight},calculate:function(t,e,i,n,s,r){this._super(t,e,i,n,summar,null),this._treeFooterHeight=this.$_calcTreeFooterHeight(t,t.getGroupFooterLevel())},$_calcTreeFooterHeight:function(t,e){var i=0;return i<=0&&(i=e*this.$_calcLine(t.treeOptions().footerStyles())),i}}),W68=I1("TreeGridLayoutManager",F17,{init:function(t){this._super(t)},_layoutItems:function(t,e){var i,n,s,r=this._grid,o=r.bodyView(),a=r.fixedBodyView(),h=r.treeGroupView(),l=0<this._fixedCols;for(o.clearItems(),a.clearItems(),h.clearBody(),i=0;i<this._fixedItemCount;i++)(n=this._items.getItem(i))instanceof m7?h.addFooter(n):(n.$_state=n.dataState(),n.$_checked=n.$_isChecked(r),o.addItem(n),l&&a.addItem(n));for(s=this._topIndex+this._fixedRows,i=0;i<this._itemCount;i++)(n=this._items.getItem(i+s))instanceof m7?h.addFooter(n):n instanceof M3?n.model().isHeader()?h.addCustomHeader(n):h.addCustomFooter(n):(n.$_state=n.dataState(),n.$_checked=n.$_isChecked(r),o.addItem(n),l&&a.addItem(n));o.layoutContent(this),l&&a.layoutContent(this)},$_getItemHeight:function(t,e,i){var n,s,r,o=this._items.getItem(i);return o instanceof q9?(n=this._heightMeasurer.treeFooterHeight(),(s=e.borrowItemView(o,!1)).updateElement(o,t.treeOptions().footerStyles()),r=s.measure(t,1e4,n),e.returnItemView(s),r.height):this._super(t,e,i)},_doMeasure:function(t,e,i){this._super(t,e,i)},_doLayout:function(t){this._super(t);var e,i,n=this.grid();(e=n.treeGroupView())&&((i=this._bodyBounds.clone()).setLeft(this._fixedBounds.x),e.setRect(i),e.layoutContent(this)),(e=n.treeLinesView())&&(i=0<this.fixedColCount()?this.fixedBounds():this.bodyBounds(),0<this.columnCount()?i.width=Math.max(0,this.columnRect(0).width):i.width=0,e.setRect(i),e.setLevelWidth(n.treeOptions().expanderWidth()),e.setRange(n,this.topIndex(),Math.min(n.rowCount(),this.topIndex()+this.itemCount())-1))}}),J68=I1("TreeRowSource",C6,{init:function(){this._super(!0)}}),y68=I1("TreeDataTagManager",K67,{init:function(t){this._super(t)},_createSeriesTag:function(t){return new c68(t)},_createCalculatedTag:function(t){return new O68(t)},connect:function(e){this._dataSource=e,this._lm=this._grid.layoutManager(),this._anis=this._grid._animations,this._visitTags(function(t){t.connect(e)})},disconnect:function(){this._dataSource=void 0,this._visitTags(function(t){t.disconnect()})},clearRows:function(){this._visitTags(function(t){t.clearRows()}),this._anis.clear()},setRows:function(){this._visitTags(function(t){t.setRows()}),this._grid.requestLoadAnimation(!0)},addRow:function(e,i){this._visitTags(function(t){t.addRow(e,i)})},addRows:function(e,i){this._visitTags(function(t){t.addRows(e,i)})},insertRows:function(e){this._visitTags(function(t){t.insertRows(e)})},removeRow:function(e){this._visitTags(function(t){t.removeRow(e)})},removeRows:function(e){this._visitTags(function(t){t.removeRows(e)})},updateRow:function(e){this._visitTags(function(t){t.updateRow(e)}),this._anis.requestUpdate(this._lm,e.rowId(),-1)},setValue:function(e,i){this._visitTags(function(t){t.setValue(e,i)}),this._anis.requestUpdate(this._lm,e.rowId(),i)}}),c68=I1("TreeSeriesValueTag",N67,{init:function(t){this._super(t),this._rows={}},clearValues:function(){this._rows={}},getValues:function(t){var e=this._rows[t];return void 0===e&&(e=this.$_calculate(t),this._rows[t]=e),e},connect:function(t){this._dataSource=t,this._rows={}},disconnect:function(){this._dataSource=void 0,this._rows=void 0},clearRows:function(){this._rows={}},setRows:function(){this._rows={}},addRow:function(t,e){},addRows:function(t,e){},insertRows:function(t){},removeRow:function(t){delete this._rows[t.rowId()]},removeRows:function(t){for(var e=t.length;e--;)delete this._rows[t[e].rowId()]},updateRow:function(t){delete this._rows[t.rowId()]},setValue:function(t,e){delete this._rows[t.rowId()]}}),O68=I1("TreeCalcluatedValueTag",P67,{init:function(t){this._super(t),this._values={}},clearValues:function(){this._values={}},hasValue:function(t){return this._values.hasOwnProperty(t)},_isGrouped:function(t){return!1},connect:function(t){this._values={},this.requestAll()},disconnect:function(){this._values=void 0},clearRows:function(){this._values={}},setRows:function(){this._values={},this.requestAll()},addRow:function(t,e){this.requestRow(e)},addRows:function(t,e){this.requestRow(e[0])},insertRows:function(t){this.requestRow(t[0])},removeRow:function(t){this.requestRow(t)},removeRows:function(t){this.requestRow(t[0])},updateRow:function(t){this.requestRow(t)},setValue:function(t,e){this.requestRow(t)},saveRow:function(t,e){},restoreRow:function(t,e,i){this._values.length>e&&(this._values[e]=void 0)},saveRows:function(t,e){},restoreRows:function(t,e,i){}}),j68=I1("TreeCellStyleMap",J37,{init:function(){this._super()},connect:function(t){this._ds=t},disconnect:function(){this._ds=null},clearRows:function(){this._styleMap={}},setRows:function(){},addRow:function(t,e){},addRows:function(t,e){},insertRows:function(t){},removeRow:function(t){var e,i;if(t&&(e=t.getDescendants())){for(i=e.length;i--;)delete this._styleMap[e[i].rowId()];delete this._styleMap[t.rowId()]}},removeRows:function(t){for(var e=t.length;e--;)this.removeRow(t[e])},updateRow:function(t){},setValue:function(t,e){},_initMap:function(){this._styleMap={}},_maxRowIndex:function(t){return t.$_maxRowId()},isEmpty:function(){return m27(this._styleMap)},_saveRow:function(e,t){var i=t.rowId(),n=this.$_hash+"_"+i,s=this._styleMap[i];e.set(n,s),t.visit(function(t){this._saveRow(e,t)}.bind(this))},_restoreRow:function(e,t){var i=t.rowId(),n=this.$_hash+"_"+i,s=e.get(n);e.unset(n),this._styleMap[i]=s,t.visit(function(t){this._restoreRow(e,t)}.bind(this))},saveRow:function(t,e,i){i&&this._saveRow(t,e)},restoreRow:function(t,e,i){i&&this._restoreRow(t,e)},saveRows:function(e,t,i){if(i)if(t===i2.ALL_ROWS)this._ds.visitAllRows(function(t){this._saveRow(e,t)}.bind(this),0);else for(var n=t.length;n--;)this._saveRow(e,t[n])},restoreRows:function(e,t,i){if(i)if(t===i2.ALL_ROWS)this._ds.visitAllRows(function(t){this._restoreRow(e,t)}.bind(this),0);else for(var n=t.length;n--;)this._restoreRow(e,t[n])}}),e97=I1("TreeChartItem",E47,{init:function(t,e){this._super(t,e)},createRowView:function(t){return new k68(t)}}),k68=I1("TreeChartRowElement",w57,{init:function(t){this._super(t,"treeChartRowView"),this.addElement(this._indentView=new z97(t))},_doLayoutContent:function(t){if(this._chartView){var e=this.getClientRect(this._drawRect);this._styles.deflatePaddings(e),e.x+=this._indentWidth,e.width-=this._indentWidth,this._chartView.setRectI(e),this._chartView.layoutContent(t);var i=this.grid(),n=this._indentView;n.setBounds(0,0,this._indentWidth,this.height()),n.setVisible(!0),n.updateCell(i.getIndentCell(P1.temp(this._item.index(),null)))}else this._indentView.setVisible(!1);this._styles=null}}),C98=E2.getLocale(null),b77="### DATALUDI GRID MODULE LOADED in "+q4()+" ms. (v "+w77+")";return{getVersion:D87,setRootContext:r97,setAssetRoot:d87,setDebug:L97,isDebug:function(){return $_debug},setLogging:U77,setTrace:U77,_log:H97,_dlog:l3,_check:q77,abort:I87,_createError:h6,AbortError:q0,AssertError:R5,_assert:x8,_throwDebugError:r6,_getEnumNames:t97,_getEnumValues:O97,getClipboardText:i17,setClipboardText:I8,setMobile:$$_setMobile,$_isMobile:function(){return $_mobileEnabled&&D0()},$_setMobileEnabled:function(t){$_mobileEnabled=t},_isMac:B4,getTimer:F0,setLanguage:s17,setLang:s17,setLocale:E97,resetLanguage:L87,setMaxPrecision:j97,setMaxDigits:M87,parseXml:r9,parseXmlList:y97,parseCsv:$_parseCSV,capitalize:D8,uncapitalize:R87,extend:R4,isObject:I4,asObject:x97,isProperty:K7.isProperty,getPropertyNames:K7.getPropertyNames,saveToFile:u6,saveTextToFile:w97,loadTextFile:Y87,defineClass:I1,defineEnum:A2,formatNumber:W7.formatNumber,sigma:q87,setMobileThresholds:Y97,Keys:i1,setTextVerticalOffset:W87,Dictionary:x6,Dimensoion:W3,Dom:w1,SummaryMode:z4,ValueType:a1,DataField:F9,DataRowState:j1,DataRestoreMode:f3,DataFillMode:n4,FieldSummary:b0,RowIndicatorValue:z5,ScrollBarIndent:c6,ScrollButtonLocation:p0,GridScrollTool:B67,IconLocation:n2,ImageDisplay:e7,HeaderItemLocation:e2,SubTextLocation:s4,SortMode:O6,SortDirection:M4,SortCase:g7,SortStyle:P7,ImeMode:D9,SelectionMode:G3,SelectionStyle:b2,SelectionDisplay:t8,SummaryMode:z4,ValidationLevel:K4,ValidationMode:r3,ButtonVisibility:c7,CellButton:Y0,TextWrap:D7,FillGradient:y6,SolidBrush:U1,SolidPen:Z1,ShapeDrawing:k0,ColumnCalcRange:H3,ColumnCalcBounds:Y27,RowGroupDisplayMode:k6,RowGroupAdornments:X2,FilterMode:j6,GridRowState:T1,RowHoverMaskExtent:T0,TextDecoration:w28,DateTimeScale:Z4,TextCase:H8,DragTracker:c27,ScrollBar:T27,ScrollBarElement:y5,ScrollEventType:Y4,ScrollThumbTracker:a67,DataSet:i2,GridDataSet:x4,DataLoader:V8,GridRowSource:r08,GridComponent:H47,GridBase:q1,GridView:A0,GridHeader:q27,GridFooter:v27,RowIndicator:B27,CheckBar:v8,RowGroupPanel:a27,GridBody:B8,CellIndex:P1,ColumnFooter:f27,ColumnHeader:o5,ColumnGroupHeader:u27,ColumnGroup:O1,GroupRow:j2,GroupFooter:m7,GridColumn:k4,GridRow:g2,ValueColumn:t2,DataColumn:L2,DataRow:v4,SeriesColumn:Q7,CalculatedColumn:h7,LabelColumn:D6,ColumnFilter:E0,ColumnLayout:x0,GridStyles:o1,DynamicStyleImpl:V27,DynamicStyleCollection:g0,GridStyleSheet:o2,SelectionManager:L7,BlockSelection:C17,RowSelection:w9,ColumnSelection:E9,DropDownSortStyle:Z6,DropDownPosition:L0,ColumnGroupLayout:d0,DataCellRenderer:t7,TextCellRenderer:S6,BarCellRenderer:b3,CheckCellRenderer:f67,IconCellRenderer:a6,ImageCellRenderer:g67,ShapeCellRenderer:u67,ToastOptions:I5,DisplayOptions:X37,EditOptions:A67,OperateOptions:b67,CellStyleManager:l5,GridFitStyle:t0,ListItemDisplay:u3,GridDelegate:l47,GridSelectionTool:e47,Cursor:U0,HandleVisibility:n0,SortOrderVisibility:b9,TextInputCase:z0,CircleGaugeCellRenderer:Q57,LinearGaugeCellRenderer:D57,Code128CellRenderer:p57,Code39CellRenderer:F57,TreeDataSet:H4,TreeDataRow:W0,TreeDataRowImpl:h57,RootTreeDataRow:X57,TreeRow:Z2,TreeRowSource:J68,TreeComponent:C97,TreeView:r4,TreeGridDelegate:o97,TreeSelectionTool:b97,TreeSummaryScope:i4,GaugeValueLocation:F6,GaugeLabelLocation:m3,GaugeBodyShape:c47,GaugeRangeCollection:O47,GaugeScale:W17,LinearGauge:b57,CircleGauge:m57,ChartDataDirection:q6,ChartDataSyncMode:Z0,ChartItemPosition:v6,ChartItemDisplayOrder:O17,ChartStackMode:N4,ChartAxisOrientation:A4,ChartAxisLocation:W4,NumericAxisBase:z57,ChartLineType:p6,ChartLabelPosition:s2,ChartLegendDirection:y17,ChartHorizontalAlign:H7,ChartVerticalAlign:g4,createGridDataSet:J87,createGridView:G97,createTreeDataSet:R97,createTreeView:Z97,createIndex:Z87,throwValidationError:f97,loadCsvData:N97,loadJsonData:T97,loadXmlData:F87,exportToExcel:j87,MaskEditor:o07,EventAware:a2,$_DataSet:i2,$_RowProvider:z2,$_DefaultRowProvider:N27,$_TreeRowProvider:G7,RowFilterRuntime:V7,RowProvider:z2,ColumnSummaryRuntime:H17,UIComponent:W27,UIElement:o7,LayerElement:D4,VisualTool:F5,Progress:X18,PopupMenu:E4,PopupMenuManager:J6,GridBase:q1,ColumnHeader:o5,BooleanConverter:l7,DateTimeReader:B7,DateTimeWriter:M7,DecimalFormatter:W7,SeriesCell:R6,ExpressionParser:J4,ExpressionSyntaxError:e27,ExpressionRuntime:e4,DataRowExpressionRuntime:u4,GridExcelExporter:P57,StylesArchiver:M37,Rectangle:g1,Size:J2,PercentSize:V4,Alignment:v1,TextAlign:T2,GridCell:Q4,RowGroup:u37,$_RowGroupElement:Q47,CellElement:m4,RowElement:x5,GroupRowElement:c3,DataRowElement:N6,TextCellEditor:P6,TreeGridRowProvider:C6,TreeItemElement:p97,TreeBodyElement:I97,HeaderElement:f8,FooterElement:Z37,$_CheckBarElement:V37,GridLayoutManager:F17,GridChart:O5,GridChartView:Y5,ChartElement:w7,ChartSeries:z7,EllipseShape:J07,PolygonShape:M07,SvgSprite:b7,IntProp:U4,toStr:E7,trim:i0,isObject:I4,isDate:i5,isEmpty:I77,isArray:V1,isChrome:o3,EnumProp:u1,DLCallback:E1,createFill:X4,createStroke:h4,createFont:D77,invalidFieldIndex:B2,ImageList:z8,isGridEditor:function(t){return t&&t.$$_grideditor}}}(this),dataludi=DataLudi;
var DLReport=function(t){function P(t){return t?t.css():null}function e(t){return t=parseInt(t),isNaN(t)?0:t}function n(){for(var t=arguments.length,e=0;e<t;e++){var i=arguments[e];if(!isNaN(i))return i}}function l(t){return"string"==typeof t}function i(t,e){if(e){var i=e.$DOMAIN={};for(var s in e){var r=e[s];"string"==typeof r&&(i[r]=s)}return e.$ENUM=t,Object.freeze?Object.freeze(e):e}}function s(t,e,i){return t&&e?i?t.toLowerCase()==e.toLowerCase():t==e:!t&&!e}var r,N=function(t,e){this._size=t,this._fixed=e},a=(t||window,t&&t.document||document,"0.7.4.2592"),E=(Math.floor,Math.floor),M=(Math.round,Math.ceil,Math.abs,!1),o=new DataLudi.SolidPen(1627324416).css(),F=new DataLudi.SolidPen(1073742079).css(),W=DataLudi.isChrome,A=DataLudi.getTimer,d=DataLudi.toStr,u=DataLudi.trim,_=DataLudi.isObject,g=DataLudi.isDate,c=DataLudi.isEmpty,p=DataLudi.isArray,m=DataLudi.getTimer,f=DataLudi.IntProp,v=DataLudi.EnumProp,b=DataLudi.defineClass,x=(DataLudi.createFill,DataLudi.createStroke),S=(DataLudi.createFont,DataLudi.invalidFieldIndex),I=DataLudi.DateTimeWriter,B=DataLudi.Dom,C=DataLudi.EventAware,V=DataLudi.ExpressionParser,H=(DataLudi.ColumnSummaryRuntime,DataLudi.ExpressionRuntime),D=(DataLudi.DataRowExpressionRuntime,DataLudi.UIElement),R=DataLudi.SolidPen,L=DataLudi.FillGradient,T=DataLudi.SolidBrush,$=DataLudi.IconLocation,z=DataLudi.GridComponent,k=DataLudi.LayerElement,G=DataLudi.RowFilterRuntime,O=DataLudi.RowProvider,U=DataLudi.GridBase,X=DataLudi.GridView,Y=(DataLudi.TreeView,DataLudi.VisualTool),K=DataLudi.GridStyles,J=DataLudi.Rectangle,q=(DataLudi.PercentSize,DataLudi.Alignment),Q=(DataLudi.GridFitStyle,DataLudi.RowGroup),Z=DataLudi.HeaderElement,tt=DataLudi.FooterElement,et=DataLudi.DataRow,it=DataLudi.GridLayoutManager,st=DataLudi.ShapeDrawing,rt=DataLudi.EllipseShape,nt=DataLudi.PolygonShape,at=DataLudi.SvgSprite,ht=DataLudi.DecimalFormatter,ot=(DataLudi.GridDataSet,DataLudi.GridChart),lt=DataLudi.GridChartView,dt=DataLudi.DynamicStyleCollection,ut=DataLudi.GaugeValueLocation,_t=DataLudi.GaugeLabelLocation,gt=DataLudi.GaugeBodyShape,ct=(DataLudi.GaugeRangeCollection,DataLudi.GaugeScale,DataLudi.LinearGauge),pt=DataLudi.CircleGauge,mt=(DataLudi.BulletGraph,function(){var e=O.prototype.init;O.prototype.init=function(t){e.call(this,t),this._rowFilterRuntime=new(b("PrintRowFilterRuntime",G,{isIdentifier:function(t){return"checked"==t?99:this._super(t)},evaluateIdentifier:function(t){return 99==t?G.$_isChecked(this._row):this._super(t)}}))};var s=U.prototype._sortRows;U.prototype._sortRows=function(t,e,i){this.$_sortRows={fields:t,directions:e,textCases:i},s.call(this,t,e,i)};var r=X.prototype.groupBy;X.prototype.groupBy=function(t,e,i){this.$_groupBy={fields:t,sorting:e,direction:i},r.call(this,t,e,i)};var i=Q.prototype.setFooterItems;Q.prototype.setFooterItems=function(t){this.$_footerItemsSource=t,i.call(this,t)},Z.prototype.$p_setIndent=function(t){if(0!=t){var e=this.grid().layoutManager(),i=e.fixedColCount(),s=this.fixed()?0:e.firstCol(),r=this.fixed()?i-1:e.lastCol(),n=this._cells[e.getColumn(s).$_hash];n.setWidth(n.width()+t),n.layoutContent(e);for(var a=s+1;a<=r;a++)(n=this._cells[e.getColumn(a).$_hash]).setX(n.x()+t),n.layoutContent(e);this.setWidth(this.width()+t)}},tt.prototype.$p_setIndent=function(t){};var n=it.prototype._doMeasure;it.prototype._doMeasure=function(){n.apply(this,arguments);var t=this._grid;t.$_footerItemsHeight&&(this._footerItemsBounds.height=t.$_footerItemsHeight),t.$_headerItemsHeight&&(this._headerItemsBounds.height=t.$_headerItemsHeight)};var t=dt.prototype;t.applyInternal=t.applyInternalNormal}(),i("PaperOrientation",{PORTRAIT:"portrait",LANDSCAPE:"landscape"})),ft=i("PageColumnLayout",{DOWN_THEN_ACROSS:"downThenAcross",ACROSS_THEN_DOWN:"acrossThenDown"}),wt=i("ItemAnchorAlign",{CENTER:"center",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom"}),yt=i("",{DEFAULT:"default",CARD:"card"}),vt=i("GroupFillMode",{NONE:"none",NORMAL:"normal",ALL:"all"}),bt=i("BoxDiagonal",{DEFAULT:"default",OPPOSITE:"opposite",BOTH:"both"});N.prototype={constructor:N,clone:function(){return new N(this._size,this._fixed)},fixed:function(){return this._fixed},size:function(){return this._size},getSize:function(t,e){return this._fixed?this._size:t*this._size/(e||100)},getSizeI:function(t,e){return Math.floor(this._fixed?this._size:t*this._size/(e||100))}},N.HTMLDPI=96,N.MMTOIN=.0393701,N.CMTOIN=.393701,N.Empty=new N(0,!0),N.$_cmap={in:function(t){return t*N.HTMLDPI},cm:function(t){return t*N.CMTOIN*N.HTMLDPI},mm:function(t){return t*N.MMTOIN*N.HTMLDPI},px:function(t){return t}},N.createFrom=function(t){if(null==t)return t;if(t instanceof N)return new N(t._size,t._fixed);if("number"==typeof t)return new N(t,!0);if("string"==typeof t){var e=t.trim(),i=e.length;if(0<i){if(!isNaN(e))return new N(Number(e),!0);var s=0,r=!0;if(1<i){var n=e[i-1];"%"==n?(r=!1,(e=e.substr(0,i-1).trim())&&(s=parseFloat(e))):2<i&&(n=e.substr(i-2,2),(e=e.substr(0,i-2).trim())&&(s=N.$_cmap[n](e)))}if(!isNaN(s))return new N(s,r)}}else if(!isNaN(t))return new N(Number(t),!0);return null},N.createArray=function(t){var e,i,s=null;if(l(t)&&(t=t.split(",")),p(t))for(e=(s=new Array(t.length)).length;e--;)i=t[e],s[e]=N.createFrom(i);else if(_(t)){for(var r in s=[],t){var n=r.split(",");for(e=0;e<n.length;e++){var a=n[e];if(0<(i=a.indexOf("-"))){var h=a.substr(i+1);if(a=a.substr(0,i),a=parseInt(a),h=parseInt(h),!isNaN(a)&&!isNaN(h)){i=a,a=Math.min(a,h),h=Math.max(i,h),i=N.createFrom(t[r]);for(var o=a;o<=h;o++)s[o]=i}}else a=parseInt(a),isNaN(a)||(s[a]=N.createFrom(t[r]))}}s.length<1&&(s=null)}return s},N.equals=function(t,e){return t instanceof N&&e instanceof N&&t._size===e.size&&t._fixed===e._fixed},N.getFixed=function(t){return t&&t._fixed?t._size:0},N.getFixedI=function(t){return t&&t._fixed?Math.floor(t._size):0},N.getSize=function(t,e,i){return t?t._fixed?t._size:e*t._size/(i||100):0},N.getSizeI=function(t,e){return dim?Math.floor(dim._fixed?dim._size:t*dim._size/(e||100)):0},b("PrintLinesMap",null,{init:function(t){this._super()}});var xt=K.STYLE_LAST,St=b("PrintStyles",K,{init:function(t,e,i){this._super(t,e,i,!1)},shapeScaleX:r,shapeScaleX_:function(){return this.searchStyles(St.SHAPE_SCALE_X)._shapeScaleX},setShapeScaleX:function(t){t!==r?this._values[St.SHAPE_SCALE_X]&&t===this._shapeScaleX||(this._shapeScaleX=parseFloat(t),this._values[St.SHAPE_SCALE_X]=!0,this._fireEvents&&this.changed(St.SHAPE_SCALE_X)):this._values[St.SHAPE_SCALE_X]&&(delete this._shapeScaleX,this._values[St.SHAPE_SCALE_X]=!1,this._fireEvents&&this.changed(St.SHAPE_SCALE_X))},shapeScaleY:r,setShapeScaleY:function(t){t!==r?this._values[St.SHAPE_SCALE_Y]&&t===this._shapeScaleY||(this._shapeScaleY=parseFloat(t),this._values[St.SHAPE_SCALE_Y]=!0,this._fireEvents&&this.changed(St.SHAPE_SCALE_Y)):this._values[St.SHAPE_SCALE_Y]&&(delete this._shapeScaleY,this._values[St.SHAPE_SCALE_Y]=!1,this._fireEvents&&this.changed(St.SHAPE_SCALE_Y))},backgroundImage:r,setBackgroundImage:function(t){t!==r?this._values[St.BACKGROUND_IMAGE]&&t===this._backgroundImage||(this._backgroundImage=t,this._values[St.BACKGROUND_IMAGE]=!0,this._fireEvents&&this.changed(St.BACKGROUND_IMAGE)):this._values[St.BACKGROUND_IMAGE]&&(delete this._backgroundImage,this._values[St.BACKGROUND_IMAGE]=!1,this._fireEvents&&this.changed(St.BACKGROUND_IMAGE))},backgroundAlpha:r,setBackgroundAlpha:function(t){t!==r?this._values[St.BACKGROUND_ALPHA]&&t===this._backgroundAlpha||(this._backgroundAlpha=parseFloat(t),this._values[St.BACKGROUND_ALPHA]=!0,this._fireEvents&&this.changed(St.BACKGROUND_ALPHA)):this._values[St.BACKGROUND_ALPHA]&&(delete this._backgroundAlpha,this._values[St.BACKGROUND_ALPHA]=!1,this._fireEvents&&this.changed(St.BACKGROUND_ALPHA))},setRef:function(t){this._ref=t},getBackgroundAlpha:function(){var t=this.backgroundAlpha();return isNaN(t)?1:t},searchStyles:function(t){if(this._values[t])return this;var e=this._ref;if(e&&e._values[t])return e;for(e=this._parent;e;){if(e._values[t])return e;e=e._parent}if(this._sysDefault&&this._sysDefault._values[t])return this._sysDefault;for(e=this._parent;e;){if(e._sysDefault&&e._sysDefault._values[t])return e._sysDefault;e=e._parent}return K.Default},extend:function(t,e){e=!(1<arguments.length)||e,this._super(t,e),this.beginUpdate();try{if(t instanceof St){var i=t._values;i[St.SHAPE_SCALE_X]&&this.setShapeScaleX(t._shapeScaleX),i[St.SHAPE_SCALE_Y]&&this.setShapeScaleX(t._shapeScaleY),i[St.BACKGROUND_IMAGE]&&this.setBackgroundImage(t._backgroundImage),i[St.BACKGROUND_ALPHA]&&this.setBackgroundAlpha(t._backgroundAlpha)}else _(t)||l(t)}finally{this.endUpdate(e)}}},{SHAPE_SCALE_X:xt+1,SHAPE_SCALE_Y:xt+2,BACKGROUND_IMAGE:xt+3,BACKGROUND_ALPHA:xt+4},function(t){K.$_extendPropMap({shapeScaleX:"setShapeScaleX",shapeScaleY:"setShapeScaleY",backgroundImage:"setBackgroundImage",backgroundAlpha:"setBackgroundAlpha"}),K.$_extendNameMap({shapeScaleX:t.SHAPE_SCALE_X,shapeScaleY:t.SHAPE_SCALE_Y,backgroundImage:t.BACKGROUND_IMAGE,backgroundAlpha:t.BACKGROUND_ALPHA}),t.DefaultStyleSheet={body:{cell:{}}}}),It=b("PrintStyleSheet",C,{init:function(t,e){this._super(),this._name=t,this._report=new St(this,"report"),this._printHeader=new St(this,"printHeader"),this._printFooter=new St(this,"printFooter"),this._reportHeader=new St(this,"reportHeader"),this._reportFooter=new St(this,"reportFooter"),this._label=new St(this,"label"),this._table=new St(this,"table"),this._tableItem=new St(this,"tableItem"),this._list=new St(this,"list"),this._listItem=new St(this,"listItem"),this._vbox=new St(this,"vbox"),this._vboxItem=new St(this,"vboxItem"),this._hbox=new St(this,"hbox"),this._hboxItem=new St(this,"hboxItem"),e&&this.load(e)},name:null,report:null,printHeader:null,printFooter:null,reportHeader:null,reportFooter:null,label:null,table:null,tableItem:null,list:null,listItem:null,vbox:null,vboxItem:null,hbox:null,hboxItem:null,setReport:function(t){t!==this._report&&this._report.extend(t)},setPrintHeader:function(t){t!==this._printHeader&&this._printHeader.extend(t)},setPrintFooter:function(t){t!==this._printFooter&&this._printFooter.extend(t)},setReportHeader:function(t){t!==this._reportHeader&&this._reportHeader.extend(t)},setReportFooter:function(t){t!==this._reportFooter&&this._reportFooter.extend(t)},setLabel:function(t){t!==this._label&&this._label.extend(t)},setTable:function(t){t!==this._table&&this._table.extend(t)},setTableItem:function(t){t!==this._tableItems&&this._tableItem.extend(t)},setList:function(t){t!==this._list&&this._list.extend(t)},setListItem:function(t){t!==this._listItems&&this._listItem.extend(t)},setVbox:function(t){t!==this._vbox&&this._vbox.extend(t)},setHbox:function(t){t!==this._hbox&&this._hbox.extend(t)},load:function(t){var e;(e=t.report)&&this.setReport(e),(e=t.printHeader)&&this.setPrintHeader(e),(e=t.printFooter)&&this.setPrintFooter(e),(e=t.reportHeader)&&this.setReportHeader(e),(e=t.reportFooter)&&this.setReportFooter(e),(e=t.label)&&this.setLabel(e),(e=t.table)&&(this.setReport(e),e.item&&this.setTableItem(e.item)),(e=t.list)&&(this.setList(e),e.item&&this.setListItem(e.item)),(e=t.vbox)&&(this.setVbox(e),e.item&&this.setVboxItem(e.item)),(e=t.hbox)&&(this.setHbox(e),e.item&&this.setHboxItem(e.item))}},{},function(t){t.Default=new t("DefaultStyles",{report:{fontName:"Tahoma",line:null,datetimeFormat:"yyyy.MM.dd",textWrap:"explicit",shapeLocation:"left",shapeSize:"100%",shapeScaleX:1,shapeScaleY:1,shapeRotate:0,backgroundAlpha:1},printHeader:{},printFooter:{},reportHeader:{},reportFooter:{},label:{},table:{item:{}},list:{item:{}},vbox:{},hbox:{}})}),Ct=b("PrintStylesMap",null,{init:function(t){this._super(t),this._owner=t,this._map={}},load:function(t,e){for(var i in e&&(this._map={}),t)this._map[i]=new St(this._owner,i,t[i])},getStyles:function(t){return this._map[t]}}),Vt=b("ReportDataSet",C,{init:function(){this._super()},keyFields:null}),Ht=(b("ReportArrayDataSet",Vt,{init:function(){this._super()},getIterator:function(t){}}),b("ReportGridDataSet",Vt,{init:function(){this._super()},getIterator:function(t){}}),b("ReportData",null,{init:function(t,e){this._super(),this._id=t,this._load(e)},id:function(){return this._id},initialize:function(){},dispose:function(){},setGrid:function(t){this._grid=t},setPage:function(t){},setRow:function(t){},getValue:function(t){},getIterator:function(t){},_load:function(t){}},{parsePath:function(t){var e=d(t);e&&(e=e.trim());var i=e.split(".");if(i&&1<i.length){var s={};return s.id=i[0],(s.path=i).splice(0,1),s}return null},parseValue:function(t,e){for(var i=t[e[0]],s=1;s<e.length;s++)i=i[e[s]];return i}})),Dt=b("ReportDataProvider",null,{init:function(){this._super(),this.$_init()},load:function(t){if(this.$_init(),p(t))for(var e=0;e<t.length;e++)this.addData(this.$_loadData(t[e]));else t&&this.addData(this.$_loadData(t))},addData:function(t){t instanceof Ht&&t.id()&&(this._dataMap[t.id()]=t)},removeData:function(t){var e=this._dataMap[t];e&&(delete this._dataMap[t],e.dispose())},initialzie:function(){var t=this._dataMap;for(var e in t)t[e].initialzie()},dispose:function(){var t=this._dataMap;for(var e in t)t[e].dispose()},setGrid:function(t){var e=this._dataMap;for(var i in e)e[i].setGrid(t)},setPage:function(t){var e=this._dataMap;for(var i in e)e[i].setPage(t)},setRow:function(t){var e=this._dataMap;for(var i in e)e[i].setRow(t)},getValue:function(t,e){var i=this._dataMap[t];return i&&i.getValue(e)},$_init:function(){this._dataMap={$grid:new Pt,$report:new Rt,$row:new Tt}},$_loadData:function(t){if(t&&t.id)if(t.dataSet);else if(p(t.value));else if(_(t.value))return new Lt(t.id,t.value);return null}}),Pt=b("ReportGridData",Ht,{init:function(t,e){this._super(t,e)},initialize:function(){},dispose:function(){},_load:function(t){},getValue:function(t){var e=t[0];if(e)switch(e){case"sum":case"min":return 0}}}),Rt=b("ReportPageData",Ht,{init:function(t,e){this._super(t,e),this._page=-1},initialize:function(){},setPage:function(t){this._page=t},dispose:function(){},_load:function(t){},getValue:function(t){var e=t[0];if(e)switch(e){case"date":return new Date;case"pageno":return this.page+1}}}),Lt=b("ReportJsonData",Ht,{init:function(t,e){this._super(t,e)},initialize:function(){},setPage:function(t){},dispose:function(){},_load:function(t){this._value=t},getValue:function(t){return Ht.parseValue(this._value,t)}}),Tt=(b("ReportJsonArrayData",Ht,{init:function(t,e){this._super(t,e)},initialize:function(){},setPage:function(t){},dispose:function(){},_load:function(t){this._values=t},getValue:function(t){if(this._values&&0<this._values.length)return Ht.parseValue(this._values[0])},getIterator:function(t){var e=this._values,i=e?e.length:0;if(0<i){var s=0;return{hasNext:function(){return s<i},getNextValue:function(t){return Ht.parseValue(e[s++],t)}}}}}),b("ReportRowData",Ht,{init:function(t,e){this._super(t,e)},initialize:function(){},dispose:function(){},_load:function(t){},setRow:function(t){this._rowView=t,this._row=t.item()},getValue:function(t){var e=this._row;if(e){var i=t[0];if("column"==i){if(i=t[1]){var s=this._grid.columnByName(i);if(s){var r,n=this._rowView.getCell(s);if(i=n.text())(r=n.prefix())&&(i=r+i),(r=n.suffix())&&(i+=r);return i}}}else if(i)return e.getValue(i)}}})),Et=b("PrintItem",null,{init:function(){this._super(),this._parent=null,this._index=-1,this._styles=new St(this,"printItem",!1)},stylesChanged:function(){this._changed()},id:null,data:null,field:null,anchor:null,align:v(wt,wt.CENTER),offsetX:0,offsetY:0,floating:!1,left:void 0,top:void 0,right:void 0,bottom:void 0,width:void 0,height:void 0,minWidth:void 0,maxWidth:void 0,minHeight:void 0,maxHeight:void 0,col:0,row:0,colSpan:1,rowSpan:1,zindex:f(0),pageBreak:!1,header:null,footer:null,styles:null,styleName:null,headerCollapsible:!1,footerCollapsible:!1,setData:function(t){t!=this._data&&(this._data=t,this.$_parseDataPath(t))},setStyles:function(t){t!==this._styles&&this._styles.extend(t)},setLeft:function(t){this._left=N.createFrom(t)},setTop:function(t){this._top=N.createFrom(t)},setRight:function(t){this._right=N.createFrom(t)},setBottom:function(t){this._bottom=N.createFrom(t)},setWidth:function(t){this._width=N.createFrom(t)},setHeight:function(t){this._height=N.createFrom(t)},setMinWidth:function(t){this._minWidth=N.createFrom(t)},setMaxWidth:function(t){this._maxWidth=N.createFrom(t)},setMinHeight:function(t){this._minHeight=N.createFrom(t)},setMaxHeight:function(t){this._maxHeight=N.createFrom(t)},setCol:function(t){t=parseInt(t),this._col=isNaN(t)?1:Math.max(0,t)},setRow:function(t){t=parseInt(t),this._row=isNaN(t)?1:Math.max(0,t)},setColSpan:function(t){t=parseInt(t),this._colSpan=isNaN(t)?1:Math.max(1,t)},setRowSpan:function(t){t=parseInt(t),this._rowSpan=isNaN(t)?1:Math.max(1,t)},parent:function(){return this._parent},itemContainer:function(){return this._parent instanceof kt?this._parent:this._parent?this._parent.itemContainer():null},owner:function(){var t=this._parent instanceof kt?this._parent:this._parent?this._parent.itemContainer():null;return t&&t._owner},dataProvider:function(){var t=this.owner();return t?t.dataProvider():null},index:function(){return this._index},isLinker:function(){return!1},col_:function(){var t=parseInt(this._col);return isNaN(t)?-1:t},row_:function(){var t=parseInt(this._row);return isNaN(t)?-1:t},setHeader:function(t){t!==this._header&&(t?(this._header=new Ft,this._header.assign(t),this._header._parent=this._parent):this._header=null)},setFooter:function(t){t!==this._footer&&(t?(this._footer=new Ft,this._footer.assign(t),this._footer._parent=this._parent):this._footer=null)},prepareStyles:function(){var t=this._styles,e=this.styleName();if(e){var i=this.owner().getStyles(e);i&&t.setRef(i)}return t},displayText:function(){return null},getAncestors:function(){for(var t=[],e=this._parent;e;)t.push(e),e=e._parent;return t.reverse()},hasPageValue:function(){return this._pageNo||this._pageTotal},getValue:function(){if(this._dataId){var t=this.dataProvider();if(t)return t.getValue(this._dataId,this._dataPath)}},getValueIterator:function(){var t=this.getValue();return t&&t.hasNext&&t.getValue&&t},propertyChanged:function(){this._changed()},_styleRegion:function(){return null},$_attached:function(){},$_addItem:function(t){var e=this.owner();if(e&&t&&t.type){var i=e.delegate().getItem(t.type);return i&&(i._parent=this,i.assign(t),this._pageTotal=this._pageTotal||i.hasPageValue()),i}return null},$_parseDataPath:function(t){(t=d(t))&&(t=t.trim());var e=t?t.split("."):null;e&&e[0]?(this._dataId=e[0],1<e.length?(e.splice(0,1),"$report"==this._dataId&&(this._pageNo="pageno"==e[0],this._pageTotal="pages"==e[0]||"pagetotal"==e[0]),this._dataPath=e):this._dataPath=void 0):this._dataId=this._pageNo=this._pageTotal=void 0},_changed:function(){var t=this.itemContainer();t&&t._changed(this)}}),Mt=b("PrintTextItem",Et,{init:function(){this._super()}}),Ft=b("PrintLabelItem",Mt,{init:function(){this._super()},text:null,assignSimple:function(t){this.setText(t)},displayText:function(){var t=this.getValue();return null!=t?t:this._text||""}}),Wt=(b("PrintValueItem",Et,{init:function(){this._super(),this._datetimeFormat=I.Default.format(),this._datetimeWriter=I.Default},value:null,designValue:null,setValue:function(t){t!=this._value&&(this._value=t,this._pageTotal=s(t,"pages")||s(t,"pagetotal"),this._pageNo=s(t,"pageno"))},setDateTimeFormat:function(t){t!=this._datetimeFormat&&((this._datetimeFormat=t)&&(this._datetimeWriter=new I(t)),this._datetimeWriter=I.Default)},hasPageValue:function(){return this._pageTotal||this._pageNo},resetPageValue:function(t,e){},displayText:function(t,e){var i=this._styles,s=this._value&&this._value.toLowerCase(),r="";if(e){var n=t.getValue(s);if(null!=n)switch(s){case"date":this.setDateTimeFormat(i.datetimeFormat()),r+=this._datetimeWriter.getText(n);break;case"pages":case"pagetotal":case"pageno":default:r+=d(n)}}else r+=this._designValue||"#"+s;return r}}),b("PrintSummaryItem",Mt,{init:function(){this._super(),this._datetimeFormat=I.Default.format(),this._datetimeWriter=I.Default,this._exprNode=null,this._value=NaN},expression:"",valueTarget:null,designValue:"",setExpression:function(t){return(t=u(t))!=this._expression&&(this._expression=t,this._exprNode=t?V.Default.parse(t):void 0,this._changed()),this},setValueTarget:function(t){return t!==this._valueTarget&&(this._valueTarget=t,this._changed()),this},getSummary:function(t,e){return e||c(this._designValue)||isNaN(this._designValue)?this._exprNode?this._value=this._exprNode.evaluate(t):this._value=this.getValue():this._value=this._designValue,this._value}})),At=b("PrintImageItem",Et,{init:function(){this._super()},imageWidth:f(32),imageHeight:f(32),url:null,setImageWidth:function(t){(t=Math.max(0,e(t)))!=this._imageWidth&&(this._imageWidth=t)},setImageHeight:function(t){(t=Math.max(0,e(t)))!=this._imageHeight&&(this._imageHeight=t)}}),Bt=b("PrintLineItem",Et,{init:function(){this._super(),this.setHeaderCollapsible(!0),this.setFooterCollapsible(!0),this._styles.setSysDefault(new St(null,"lineDefault",{line:"#555"}),!1)}}),Nt=b("PrintHLineItem",Bt,{init:function(){this._super(),this.setLeft(0),this.setRight(0)}}),$t=(b("PrintVLineItem",Bt,{init:function(){this._super()}}),b("PrintShapeItem",Et,{init:function(){this._super(),this.$_resetShape()},imageUrl:null,width:NaN,height:NaN,shapeName:"rectangle",setShapeName:function(t){t!=this._shapeName&&(this._shapeName=t,this.$_resetShape())},shape:function(){return this._shape},$_resetShape:function(){var t=null,e=this._shapeName;e&&("null"==(e=e.toLowerCase())?t=NullShape.Default:"ellipse"==e?t=this._ellipse||(this._ellipse=new rt):(t=this._polygon||(this._polygon=new nt)).setShape(e)),this._shape=t}})),zt=b("PrintGroupItem",Et,{init:function(){this._super(),this._itemStyles=new St(this,"groupItem"),this._items=[],this._pageTotal=!1},cellWidths:null,cellHeights:null,fillWidth:v(vt,vt.NORMAL),fillHeight:v(vt,vt.NORMAL),items:null,itemStyles:null,itemLeft:void 0,itemRight:void 0,itemTop:void 0,itemBottom:void 0,setCellWidths:function(t){t!=this._cellWidths&&(this._cellWidths=N.createArray(t))},setCellHeights:function(t){t!=this._cellHeights&&(this._cellHeights=N.createArray(t))},setItems:function(t){if(t!==this._items){var e,i,s,r,n=this._delegate();if(this._items=[],this._pageTotal=!1,p(t))for(i=0,s=t.length;i<s;i++)"string"==typeof(r=t[i])?this.$_internalAddItem(this._createItem(n,"label").setText(r)):r&&(e=this._createItem(n,r.type))&&(this.$_internalAddItem(e),e.assign(r),e._index=i,this._pageTotal=this._pageTotal||e.hasPageValue());else"string"==typeof t?this.$_internalAddItem(this._createItem(n,"label").setText(t))._index=0:t&&(e=this._createItem(n,t.type))&&(this.$_internalAddItem(e),e.assign(r),e._index=0,this._pageTotal=e.hasPageValue());this._changed()}},setItemStyles:function(t){t!==this._itemStyles&&this._itemStyles.extend(t)},setItemLeft:function(t){this._itemLeft=N.createFrom(t)},setItemTop:function(t){this._itemTop=N.createFrom(t)},setItemRight:function(t){this._itemRight=N.createFrom(t)},setItemBottom:function(t){this._itemBottom=N.createFrom(t)},count:function(){return this._items.length},isFillWidth:function(){return this._fillWidth==vt.NORMAL||this._fillWidth==vt.ALL},isFillHeight:function(){return this._fillHeight==vt.NORMAL||this._fillHeight==vt.ALL},ordered:function(){return!1},indexOf:function(t){return this._items.indexOf(t)},getItem:function(t){return this._items[t]},getOrderedItems:function(){var t=this._items.slice();return t.sort(function(t,e){var i=t.zindex(),s=e.zindex();return isNaN(i)?-1:isNaN(i)?1:i-s}),t},addItem:function(t){t&&this._items.indexOf(t)<0&&(this.$_internalAddItem(t),this._changed())},removeItem:function(t){var e=this._items.indexOf(t);0<=e&&(this._items.splice(e,1),this._parent=null,this._changed())},$_attached:function(){this._itemStyles.setParent(this._styles._root,!1)},hasPageValue:function(){return this._pageTotal},_delegate:function(){return this.owner().delegate()},_createItem:function(t,e){return t.getItem(e)},$_internalAddItem:function(t,e){return this._items.push(t),t._parent=this,t.styles().setParent(e||this._itemStyles,!1),t.styles()._root=this._styles._root,t.$_attached(),t}}),kt=b("PrintItemContainer",C,{init:function(t,e){this._super(),this._name=t,this._owner=e,this._items=[],this._styles=new St(this,"itemContainer"),this._styles.setParent(e.styles(),!1),this._pageTotal=!1},stylesChanged:function(){this._changed()},width:void 0,height:void 0,minWidth:void 0,maxWidth:void 0,minHeight:void 0,maxHeight:void 0,items:null,styles:null,setWidth:function(t){this._width=N.createFrom(t)},setHeight:function(t){this._height=N.createFrom(t)},setMinWidth:function(t){this._minWidth=N.createFrom(t)},setMaxWidth:function(t){this._maxWidth=N.createFrom(t)},setMinHeight:function(t){this._minHeight=N.createFrom(t)},setMaxHeight:function(t){this._maxHeight=N.createFrom(t)},setItems:function(t){if(t!==this._items){var e,i=this._owner.delegate();if(this._items=[],this._pageTotal=!1,p(t))for(var s=0,r=t.length;s<r;s++){var n=t[s];n&&(e=i.getItem(n.type))&&(this.$_internalAddItem(e),e.assign(n),this._pageTotal=this._pageTotal||e.hasPageValue())}else t&&(e=i.getItem(n.type))&&(this.$_internalAddItem(e),e.assign(n),this._pageTotal=e.hasPageValue());this._changed()}},setStyles:function(t){this._styles.extend(t)},name:function(){return this._name},owner:function(){return this._owner},count:function(){return this._items.length},isDirty:function(){return this._dirty},clear:function(){this._dirty&&(this._doClear(),this._dirty=!1)},indexOf:function(t){return this._items.indexOf(t)},getItem:function(t){return this._items[t]},addItem:function(t){t&&this._items.indexOf(t)<0&&(this.$_internalAddItem(t),this._changed())},removeItem:function(t){var e=this._items.indexOf(t);0<=e&&(this._items.splice(e,1),this._parent=null,this._changed())},propertyChanged:function(){this._changed()},hasPageValue:function(){return this._pageTotal},_styleRegion:function(){return null},$_internalAddItem:function(t){this._items.push(t),t._parent=this,t._styles.setParent(t._styles._root=this._styles._parent,!1),t.$_attached()},_changed:function(t){this._dirty=!0,this.fireEvent(kt.CHANGED)},_doClear:function(){this._width=this._height=this._minWidth=this._minHeight=this._maxWidth=this._maxHeight=void 0,this._items=null,this._styles.clearValues(),this._pageTotal=!1}});kt.CHANGED="onPrintItemContainerChanged";var Gt=b("PrintItemBand",kt,{init:function(t,e){this._super(t,e)}}),Ot=b("PrintReportHeader",Gt,{init:function(t){this._super("reportHeader",t),this.addItem(new Ft({text:"Report Title"}))}}),Ut=b("PrintPageTitle",Gt,{init:function(t){this._super("pageHeader",t)}}),Xt=b("PrintPageHeader",Gt,{init:function(t){this._super("pageHeader",t)}}),Yt=b("PrintPageFooter",Gt,{init:function(t){this._super("pageFooter",t)}}),Kt=b("PrintReportFooter",Gt,{init:function(t){this._super("reportFooter",t)}}),jt=b("PrintPage",null,{init:function(t){this._super(),this._styles=new St(this,"page"),this._styles.setParent(t&&t.styles(),!1)},stylesChanged:function(){},styles:null,setStyles:function(t){t!==this._styles&&this._styles.extend(t)},clear:function(){this._styles.clearValues()}}),Jt=b("PrintGrid",null,{init:function(t){this._super(),this._card=new Be(t)},visible:!0,pageLayout:v(yt,yt.DEFAULT),pageColumns:1,columnLayout:v(ft,ft.DOWN_THEN_ACROSS),columnGap:10,startRow:0,rowCount:0,rowFilter:null,columns:null,ignoreFixedStyles:!1,pageFill:!1,card:null,setPageColumns:function(t){t=parseInt(t),isNaN(t)||t==this._pageColumns||(this._pageColumns=Math.max(1,Math.min(2,t)))},setCard:function(t){t!==this._card&&(this._card.clear(),this._card.assign(t))},clear:function(){this._layout=yt.DEFAULT,this._pagecolumns=1,this._columnLayout=ft.DOWN_THEN_ACROSS,this._card.clear()}}),qt=b("GridReport",C,{init:function(t){this._super(),this._owner=t,this._styles=new St(this,"report"),this._stylesMap=new Ct(this),this._page=new jt(this),this._reportHeader=new Ot(this),this._reportFooter=new Kt(this),this._pageHeader=new Xt(this),this._pageFooter=new Yt(this),this._pageTitle=new Ut(this),this._printGrid=new Jt(this),this._preBands=null,this._postBands=null,this._grid=null,this.setTheme(It.Default)},styleMap:null,styles:null,page:null,reportHeader:null,reportFooter:null,pageHeader:null,pageFooter:null,pageTitle:null,printGrid:null,grid:null,styleMap_:function(){return this._stylesMap},setStyleMap:function(t){this._stylesMap.load(t)},setStyles:function(t){return t!==this._styles&&this._styles.extend(t),this},setTheme:function(t){t!==this._theme&&(this._theme=t,this._styles.setSysDefault(t.report(),!1))},setReport:function(t){return t!=this._report&&(this._report.clear(),this._report.assign(t)),this},setPage:function(t){return t!=this._page&&(this._page.clear(),this._page.assign(t)),this},setReportHeader:function(t){return t!==this._reportHeader&&(this._reportHeader.clear(),this._reportHeader.assign(t)),this},setReportFooter:function(t){return t!=this._reportFooter&&(this._reportFooter.clear(),this._reportFooter.assign(t)),this},setPageHeader:function(t){return t!=this._pageHeader&&(this._pageHeader.clear(),this._pageHeader.assign(t)),this},setPageFooter:function(t){return t!=this._pageFooter&&(this._pageFooter.clear(),this._pageFooter.assign(t)),this},setPageTitle:function(t){return t!=this._pageTitle&&(this._pageTitle.clear(),this._pageTitle.assign(t)),this},setPrintGrid:function(t){return t!==this._printGrid&&(this._printGrid.clear(),this._printGrid.assign(t)),this},setGrid:function(t){return t!=this._grid&&(this._grid=JSON.parse(JSON.stringify(t)),this._grid&&this._grid.print&&this.setPrintGrid(this._grid.print)),this},delegate:function(){return this._owner&&this._owner.delegate()},dataProvider:function(){return this._owner&&this._owner.dataProvider()},ownerGrid:function(){return this._owner&&this._owner.gridView()},load:function(t){t.styleMap&&this._stylesMap.load(t.styleMap),t.styles&&this.setStyles(t.styles),t.page&&this.setPage(t.page),t.reportHeader&&this.setReportHeader(t.reportHeader),t.reportFooter&&this.setReportFooter(t.reportFooter),t.pageHeader&&this.setPageHeader(t.pageHeader),t.pageFooter&&this.setPageFooter(t.pageFooter),t.pageTitle&&this.setPageTitle(t.pageTitle),t.grid&&this.setGrid(t.grid)},getStyles:function(t){return this._stylesMap.getStyles(t)}}),Qt=b("PrintOptions",null,{init:function(){this._super(),this.$_resetSize()},debugPrint:!1,htmlDpi:96,paperOrientation:v(mt,mt.PORTRAIT),paperWidth:N.createFrom("210mm"),paperHeight:N.createFrom("297mm"),paperMarginLeft:N.createFrom("12mm"),paperMarginRight:N.createFrom("12mm"),paperMarginTop:N.createFrom("15mm"),paperMarginBottom:N.createFrom("15mm"),previewUrl:"./previewer.html",previewWidth:1e3,previewHeight:640,previewTitle:"Print Previewer",imageLoadTime:1e3,htmlDpi_:function(){return N.HTMLDPI},setHtmlDpi:function(t){(t=Math.max(1,t))!=N.HTMLDPI&&(N.HTMLDPI=t,this.$_resetSize())},setPaperOrientation:function(t){t!==this._paperOrientation&&(this._paperOrientation=t,this.$_resetSize())},setPaperWidth:function(t){t!==this._paperWidth&&(this._paperWidth=N.createFrom(t),this.$_resetSize())},setPaperHeight:function(t){t!=this._paperHeight&&(this._paperHeight=N.createFrom(t),this.$_resetSize())},setPaperMarginLeft:function(t){t!=this._paperMarginLeft&&(this._paperMarginLeft=N.createFrom(t),this.$_resetSize())},setPaperMarginRight:function(t){t!=this._paperMarginRight&&(this._paperMarginRight=N.createFrom(t),this.$_resetSize())},setPaperMarginTop:function(t){t!=this._paperMarginTop&&(this._paperMarginTop=N.createFrom(t),this.$_resetSize())},setPaperMarginBottom:function(t){t!=this._paperMarginBottom&&(this._paperMarginBottom=N.createFrom(t),this.$_resetSize())},pageWidth:function(){return this._pageWidth},pageHeight:function(){return this._pageHeight},paperScreenWidth:function(){return this._paperScreenWidth},paperScreenHeight:function(){return this._paperScreenHeight},$_resetSize:function(){var t=this._paperWidth.getSize(),e=this._paperHeight.getSize(),i=this._paperMarginLeft.getSize(),s=this._paperMarginRight.getSize(),r=this._paperMarginTop.getSize(),n=this._paperMarginBottom.getSize();this._paperOrientation===mt.LANDSCAPE?(this._pageWidth=e-i-s,this._pageHeight=t-r-n):(this._pageWidth=t-i-s,this._pageHeight=e-r-n),this._pageWidth=Math.floor(Math.max(16,this._pageWidth)),this._pageHeight=Math.floor(Math.max(16,this._pageHeight)),this._paperScreenWidth=Math.floor(Math.max(16,t)),this._paperScreenHeight=Math.floor(Math.max(16,e))}}),Zt=b("PrintDelegate",null,{init:function(t){this._super(),this._container=t,this._modelMap={label:Ft,image:At,hline:Nt,shape:$t,summary:Wt,canvas:ve,list:Re,hbox:Se,vbox:Ie,dbox:Ce,tile:We,linearGauge:Ge,circleGauge:Oe,chart:Ue},this._viewMap={PrintLabelItem:he,PrintSummaryItem:oe,PrintShapeItem:ue,PrintImageItem:le,PrintHLineItem:de,PrintCanvas:be,PrintList:Te,DefaultCardItem:Te,PrintHBox:He,PrintVBox:De,PrintDBox:Pe,PrintTile:Ae,PrintLinearGaugeItem:ke,PrintCircleGaugeItem:ke,PrintChartItem:Xe}},getItem:function(t){var e=null;switch(t){case void 0:case null:case"":e=new Ft;break;default:var i=this._modelMap[t];if(!i)throw new Error("Unknown item type: "+t);e=new i}return e},getItemView:function(t,e){if(t instanceof Et){var i=this._viewMap[t.className()];if(i)return new i(this._container.$_dom,t)}return null}}),te=b("PrintItemBandLayout",null,{init:function(t){this._super(),this._containerView=t},measure:function(t,e){var i,s,r,n,a=this._containerView,h=a.model(),o=h.styles(),l=t,d=0;if(h instanceof Gt){for(i=0,s=h.count();i<s;i++)r=h.getItem(i),n=a.getItemView(r)._measuredHeight,n+=N.getFixedI(r.top())+N.getFixedI(r.bottom()),d=Math.max(n,d);d+=o.paddingVert()}return{width:l,height:d}},layout:function(t){var e,i,s,r,n,a,h,o,l,d,u,_,g=this._containerView.model().styles().deflatePaddings(t),c=this._containerView,p=c instanceof ne?c.itemViewCount():c.childCount(),m=c instanceof ne?c.getItemViewAt:c.getChild;for(e=0;e<p;e++)s=(i=m.call(c,e)).model(),r=g.x,n=g.y,a=i.calcLayoutWidth(g.width),h=i.calcLayoutHeight(g.height),o=s.left(),l=s.right(),o&&l?(r+=_=o.getSize(g.width),a=g.width-l.getSize(g.width)-_):o?r+=o.getSize(g.width):l?r=g.right()-a-l.getSize(g.width):r+=(g.width-a)/2,d=s.top(),u=s.bottom(),d&&u?(n+=_=d.getSize(g.height),h=g.height-u.getSize(g.height)-_):d?n+=d.getSize(g.height):u?n=g.bottom()-h-u.getSize(g.height):n+=(g.height-h)/2,i.setBoundsI(r,n,Math.max(0,a),Math.max(0,h)),i.layoutItems()}}),ee=b("PrintCanvasLayout",te,{init:function(t){this._super(),this._containerView=t},measure:function(t,e){var i,s,r,n,a,h,o=this._containerView,l=o.model(),d=l.styles(),u=0,_=0;if(l instanceof ve){for(i=0,s=l.count();i<s;i++)r=l.getItem(i),a=(n=o.getItemView(r))._measuredHeight,h=n._measuredWidth,a+=N.getFixedI(r.top())+N.getFixedI(r.bottom()),u=Math.max(a,u),h+=N.getFixedI(r.left())+N.getFixedI(r.right()),_=Math.max(h,_);u+=d.paddingVert(),_+=d.paddingHorz()}return{width:_,height:u}}}),ie=(b("PrintRowGroup",null,{init:function(){this._super()},expression:null,showHeader:!1,showFooter:!1}),b("PrintValueRuntime",null,{init:function(t){this._super(),this._container=t},totalPage:0,currPage:0,getValue:function(t){var e=t?t.trim():null;if(e)switch(e.toLowerCase()){case"date":return new Date;case"pageno":return this._currPage+1;case"pagetotal":return this._totalPage}return e}})),se=b("PrintSummaryExpressionRuntime",H,{init:function(){this._super(),this._dataMap={},this._dataList=[],this._paths={}},setGrid:function(t){this._grid=t,this._dataSource=t.dataSource(),this._fieldCount=this._dataSource?this._dataSource.fieldCount():0,this._summarizer=this._dataSource&&t.getSummarizer()},setReportData:function(t){this._reportData=t},isIdentifier:function(t){var e=t.toLowerCase();return se.IDENTS.hasOwnProperty(e)?se.IDENTS[e]:(this._dataMap[t]||(this._dataMap[t]=!0,this._dataList.push(t)),se.ID_DATA+this._dataList.length-1)},evaluateIndexerI:function(t,e){if(this._summarizer){switch((e<0||e>=this._fieldCount)&&S(e),t){case se.ID_SUM:return this._summarizer.getSum(e);case se.ID_COUNT:return this._summarizer.getCount(e);case se.ID_MAX:return this._summarizer.getMax(e);case se.ID_MIN:return this._summarizer.getMin(e);case se.ID_AVG:return this._summarizer.getAvg(e);case se.ID_VAR:return this._summarizer.getVar(e);case se.ID_VARP:return this._summarizer.getVarp(e);case se.ID_STDEV:return this._summarizer.getStdev(e);case se.ID_STDEVP:return this._summarizer.getStdevp(e)}return this._super(idKey,e)}switch(t){case se.ID_SUM:case se.ID_COUNT:return 0;case se.ID_MAX:case se.ID_MIN:case se.ID_AVG:case se.ID_VAR:case se.ID_VARP:case se.ID_STDEV:case se.ID_STDEVP:return NaN}},evaluateIndexerS:function(t,e){if(t>=se.ID_DATA){var i=this._paths[e];return i||(i=this._paths[e]=e.split(".")),this._reportData.getValue(this._dataList[se.ID_DATA-t],i)}if(this._summarizer){var s=this._dataSource.getFieldIndex(e);switch((s<0||s>=this._fieldCount)&&S(e),t){case se.ID_SUM:return this._summarizer.getSum(s);case se.ID_COUNT:return this._summarizer.getCount(s);case se.ID_MAX:return this._summarizer.getMax(s);case se.ID_MIN:return this._summarizer.getMin(s);case se.ID_AVG:return this._summarizer.getAvg(s);case se.ID_VAR:return this._summarizer.getVar(s);case se.ID_VARP:return this._summarizer.getVarp(s);case se.ID_STDEV:return this._summarizer.getStdev(s);case se.ID_STDEVP:return this._summarizer.getStdevp(s)}return this._super(idKey,e)}switch(t){case se.ID_SUM:case se.ID_COUNT:return 0;case se.ID_MAX:case se.ID_MIN:case se.ID_AVG:case se.ID_VAR:case se.ID_VARP:case se.ID_STDEV:case se.ID_STDEVP:return NaN}}},{ID_COUNT:0,ID_SUM:1,ID_MAX:2,ID_MIN:3,ID_AVG:4,ID_VAR:5,ID_VARP:6,ID_STDEV:7,ID_STDEVP:8,ID_DATA:100},function(t){t.IDENTS={count:t.ID_COUNT,sum:t.ID_SUM,max:t.ID_MAX,min:t.ID_MIN,avg:t.ID_AVG,var:t.ID_VAR,varp:t.ID_VARP,stdev:t.ID_STDEV,stdevp:t.ID_STDEVP}}),re=b("PrintElement",D,{init:function(t,e,i,s){this._super(t,e),this._dom.$name=e||this.className(),this._back=document.createElement("span"),this._dom.appendChild(this._back);var r=this._back.style;r.boxSizing="border-box",r.position="absolute",r.padding="0px",r.margin="0px",r["-webkit-print-color-adjust"]="exact",this._drawRect=new J,this._model=i,this._printing=s,this._measuredWidth=NaN,this._measuredHeight=NaN,this._explicitWidth=NaN,this._explicitHeight=NaN,this._borderLeftWidth=0,this._borderTopWidth=0,this._borderRightWidth=0,this._borderBottomWidth=0},model:null,border:null,borderLeft:null,borderTop:null,borderRight:null,borderBottom:null,borderHorz:function(){return this._borderLeftWidth+this._borderRightWidth},borderVert:function(){return this._borderTopWidth+this._borderBottomWidth},printing:function(){return this._printing},designTime:function(){return!this._printing},itemContainer:function(){for(var t=this.parent();t&&!(t instanceof ne);)t=t.parent();return t},_getElementStyles:function(t){return t.styles&&t.styles()},prepareElement:function(t){var e=this._getElementStyles(t);e&&!this.isLayer()&&(this.setBorder(e.border()),this.setBorderLeft(e.borderLeft()),this.setBorderTop(e.borderTop()),this.setBorderRight(e.borderRight()),this.setBorderBottom(e.borderBottom()),this._border?this._borderLeftWidth=this._borderRightWidth=this._borderTopWidth=this._borderBottomWidth=this._border.width():(this._borderLeftWidth=this._borderLeft?this._borderLeft.width():0,this._borderRightWidth=this._borderRight?this._borderRight.width():0,this._borderTopWidth=this._borderTop?this._borderTop.width():0,this._borderBottomWidth=this._borderBottom?this._borderBottom.width():0),this._doUpdateStyles(t,e)),this._doPrepareElement(t)},_getHintSize:function(t,e,i){var s;return s=i?i.getSize(t):t,e&&(s=Math.min(e.getSize(t),s)),s},measure:function(t,e,i){var s=this.model();this.prepareElement(s);var r,n,a,h,o,l=s.styles();return r=s.width(),n=s.height(),a=s.maxWidth(),h=s.maxHeight(),o=this._doMeasure(this._getHintSize(t,a,r),this._getHintSize(e,h,n),i)||{width:0,height:0},r&&r.fixed()?o.width=this._explicitWidth=r.size():(this._explicitWidth=NaN,o.width+=this._borderLeftWidth+this._borderRightWidth+l.marginHorz()),n&&n.fixed()?o.height=this._explicitHeight=n.size():(this._explicitHeight=NaN,o.height+=this._borderTopWidth+this._borderBottomWidth+l.marginVert()),(r=s.maxWidth())&&r.fixed()&&(o.width=Math.min(o.width,r.size())),(r=s.minWidth())&&r.fixed()&&(o.width=Math.max(o.width,r.size())),(r=s.maxHeight())&&r.fixed()&&(o.height=Math.min(o.height,r.size())),(r=s.minHeight())&&r.fixed()&&(o.height=Math.max(o.height,r.size())),this._measuredWidth=o.width,this._measuredHeight=o.height,o},measure2:function(t,e,i){var s=this.model();this.prepareElement(s);var r=this._doMeasure(t,e,i)||{width:0,height:0};return r.width+=this._borderLeftWidth+this._borderRightWidth+styles.marginHorz(),r.height+=this._borderTopWidth+this._borderBottomWidth+styles.marginVert(),this._measuredWidth=r.width,this._measuredHeight=r.height,r},layoutItems:function(t){var e=this.model().styles(),i=this.getClientRect();e.deflateMargins(i),i.x+=this._borderLeftWidth,i.y+=this._borderTopWidth,i.width-=this._borderLeftWidth+this._borderRightWidth,i.height-=this._borderTopWidth+this._borderBottomWidth,this._doLayoutItems(t,i)},refresh:function(){this._doRefresh()},clip:function(t){this.getClientRect(this._drawRect),t.clipRect(this._drawRect)},calcLayoutWidth:function(t){var e,i,s=this.model();return i=(e=s.width())?e.getSize(t):this._measuredWidth,(e=s.maxWidth())&&(i=Math.min(i,e.getSize(t))),(e=s.minWidth())&&(i=Math.max(i,e.getSize(t))),i},calcLayoutHeight:function(t){var e,i,s=this.model();return i=(e=s.height())?e.getSize(t):this._measuredHeight,(e=s.maxHeight())&&(i=Math.min(i,e.getSize(t))),(e=s.minHeight())&&(i=Math.max(i,e.getSize(t))),i},_doDraw:function(t,e){var i=this._drawRect.clone().shrink(1,1);e&&t.drawRectI(T.WHITE,null,this._drawRect),this._doRender(t,this._drawRect),this._doDrawBorders(t,i,this._printing)},_doDrawHtml:function(){var t=this._drawRect;this.getClientRect(t),this._doDrawHtmlBack(this._back,t),this._doDrawHtmlBorders(t),this._doRenderHtml(t)},_createItemView:function(t,e,i){return t.getItemView(e,this._printing)},$_getGraphics:function(t,e,i){var s=this._svg;return s||(s=this._svg=new at(null,this.container()),i?this._dom.insertBefore(s._svg,i):this._dom.appendChild(s._svg)),s._svg.style.visibility="visible",s.getGraphics(t,e)},$_getBackGraphics:function(t,e){var i=this._backSvg;return i||(i=this._backSvg=new at(null,this.container()),this._back.appendChild(i._svg)),i._svg.style.visibility="visible",i.getGraphics(t,e)},$_prepareSpan:function(){return this._span||(this._span=document.createElement("span"),this._span.style.position="absolute",this._span.style.display="inline-block",this._dom.appendChild(this._span)),this._span.style.visibility="visible",this._span},_getTextAlign:function(t){switch(t){case q.FAR:return"right";case q.NEAR:return"left";default:return"center"}},_getLineAlign:function(t){switch(t){case q.FAR:return"bottom";case q.NEAR:return"top";default:return"middle"}},_calcTextRect:function(t,e,i,s,r,n,a,h,o,l){if(this._dom){var d=this.container().$_textMeasurer;return B.calcTextBounds(d,e,i,s,r,n,a,h,o,l)}switch(l){case TextWrap.EXPLICIT:return t.getExplicitTextRect(e,i,s,r,n,a,h,o);case TextWrap.NORMAL:return t.getWrapTextRect(e,i,s,r,n,a,h,o);default:return t.getTextRect(e,i,s,r,n,a,h,o)}},_doUpdateStyles:function(t,e){},_doPrepareElement:function(t){},_doMeasure:function(t,e,i){return new Size(t,e)},_doLayoutItems:function(t,e){},_doDrawBorders:function(t,e,i){},_doRefresh:function(){},_doRender:function(t,e){},_doDrawHtmlBack:function(t,e){var i,s;if(this.model&&(i=this.model())&&i.styles&&(s=i.styles())){var r,n;M&&(this._debug||(this._debug=document.createElement("div"),this._dom.appendChild(this._debug),(r=this._debug.style).boxSizing="border-box",r.position="absolute",r.padding="0px",r.margin="0px",r["-webkit-print-color-adjust"]="exact"),(r=this._debug.style).left=e.x+"px",r.top=e.y+"px",r.width=e.width+"px",r.height=e.height+"px",r.border=o),n=s.background(),s.deflateMargins(e),(r=this._back.style).left=e.x+"px",r.top=e.y+"px",r.width=e.width+"px",r.height=e.height+"px",r.background=n?n.css():"transparent",r.opacity=s.getBackgroundAlpha();var a=s.backgroundImage();a&&(r.backgroundImage="url("+a+")",r.backgroundRepeat="no-repeat")}},_doDrawHtmlBorders:function(t){var e=this._back.style,i=this._border;i?(e.border=this._border.css(),t.inflate(-i.width(),-i.width())):((i=this._borderLeft)?(e.borderLeft=i.css(),t.leftBy(i.width())):e.borderLeft="",(i=this._borderRight)?(e.borderRight=i.css(),t.width-=i.width()):e.borderRight="",(i=this._borderTop)?(e.borderTop=i.css(),t.topBy(i.width())):e.borderTop="",(i=this._borderBottom)?(e.borderBottom=i.css(),t.height-=i.width()):e.borderBottom="")},_doRenderHtml:function(t){},_getTextAlign:function(t){switch(t){case q.FAR:return"right";case q.NEAR:return"left";default:return"center"}},$_getTop:function(){return this.model().styles().marginTop()},$_getMiddle:function(){var t=this.model().styles();return t.marginTop()+(this._measuredHeight-t.marginVert())/2},$_getBottom:function(){return this._measuredHeight-this.model().styles().marginBottom()},$_getLeft:function(){return this.model().styles().marginLeft()},$_getCenter:function(){var t=this.model().styles();return t.marginLeft()+(this._measuredWidth-t.marginHorz())/2},$_getRight:function(){return this._measuredWidth-this.model().styles().marginRight()},$_topHeight:function(){var t=this.model().styles();return t.marginTop()+(this._measuredHeight-t.marginVert())/2},$_bottomHeight:function(){var t=this.model().styles();return t.marginBottom()+(this._measuredHeight-t.marginVert())/2},$_leftWidth:function(){var t=this.model().styles();return t.marginLeft()+(this._measuredWidth-t.marginHorz())/2},$_rightWidth:function(){var t=this.model().styles();return t.marginRight()+(this._measuredWidth-t.marginHorz())/2},_layoutChild:function(t,e,i,s,r){var n=t.model(),a=n._parent;a.itemLeft||(a=null);var h,o=this.$_getSize(n.left(),a&&a.itemLeft()),l=this.$_getSize(n.right(),a&&a.itemRight()),d=this.$_getSize(n.top(),a&&a.itemTop()),u=this.$_getSize(n.bottom(),a&&a.itemBottom()),_=n.width(),g=n.height(),c=t._measuredWidth,p=t._measuredHeight;return _&&!_.fixed()&&(c=_.getSize(s)),g&&!g.fixed()&&(p=g.getSize(r)),(h=n.maxWidth())&&(c=Math.min(c,h.getSize(s))),(h=n.minWidth())&&(c=Math.max(c,h.getSize(s))),(h=n.maxHeight())&&(p=Math.min(p,h.getSize(r))),(h=n.minHeight())&&(p=Math.max(p,h.getSize(r))),o&&l?(e+=h=o.getSize(s),c=s-l.getSize(s)-h):o?e+=o.getSize(s):l?e=e+s-c-l.getSize(s):c!=s&&(e+=(s-c)/2),d&&u?(i+=h=d.getSize(r),p=r-u.getSize(r)-h):d?i+=d.getSize(r):u?i=i+r-p-u.getSize(r):p!=r&&(i+=(r-p)/2),t.setBoundsI(e,i,Math.max(0,c),Math.max(0,p)),t.layoutItems(),t},$_getSize:function(t,e){return void 0===t?e:t}},{DESIGN_BORDER:new R(268435456),DESIGN_BORDER_DARK:new R(536870912)}),ne=b("PrintItemContainerElement",re,{init:function(t,e,i,s){this._super(t,e,i,s),this.addElement(this._rootView=new k(t,"rootView")),this.addElement(this._feedbackView=new k(t,"feedbackView"))},itemViewCount:function(){return this._rootView.childCount()},getItemViewAt:function(t){return this._rootView.getChild(t)},addFeedback:function(t){return t&&!this._feedbackView.contains(t)?(this._feedbackView.addElement(t),t):null},removeFeedback:function(t){return this._feedback.removeElement(t)},layoutItems:function(t){var e=this.width(),i=this.height();this._rootView.setBounds(0,0,e,i),this._feedbackView.setBounds(0,0,e,i),this._super(t)},_addItemView:function(t){return this._rootView.addElement(t)},_clearItemViews:function(){this._rootView.clear()},_hideAllItems:function(){this._rootView.hideAll()}}),ae=b("PrintItemElement",re,{init:function(t,e,i,s){this._super(t,e,i,s),this._numberFormatter=null,this._datetimeWriter=null,this._booleanFormatter=null},numberFormat:null,datetimeFormat:null,booleanFormat:null,setNumberFormat:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?new ht(t):null,this.invalidate())},setDatetimeFormat:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?new I(t):null,this.invalidate())},setBooleanFormat:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?new BooleanFormatter(t):null,this.invalidate())},numberFormatter:function(){return this._numberFormatter},booleanFormatter:function(){return this._boolFormatter},datetimeWriter:function(){return this._datetimeWriter||I.Default},resetPageValue:function(t,e){},prepareElement:function(t){t.prepareStyles(),this._super(t)},_getElementStyles:function(t){return t._styles},_doUpdateStyles:function(t,e){this._super(t,e),this.setNumberFormat(e.numberFormat()),this.setDatetimeFormat(e.datetimeFormat()),this.setBooleanFormat(e.booleanFormat())},_doDrawBorders:function(t,e,i){this._printing||t.drawRectI(null,re.DESIGN_BORDER,e)}}),he=b("PrintLabelElement",ae,{init:function(t,e,i){this._super(t,"printLabelView",e,i),this._text=null,this._font=null},_doUpdateStyles:function(t,e){this._super(t,e),this._shape=st.getShape(this,e.shapeName()),this._shape&&(this._shapeLocation=e.shapeLocation(),this._shapeAlignment=e.shapeAlignment(),this._shapeOffset=e.shapeOffset(),this._shapePadding=e.shapePadding(),this._shapeSize=e.shapeSize(),this._shapeScaleX=e.shapeScaleX(),this._shapeScaleY=e.shapeScaleY(),this._shapeColor=e.shapeColor(),this._shapeBorder=e.shapeBorder())},_doMeasure:function(t,e){var i,s,r=this._model,n=r._styles,a=this._text=this._getText(r,n),h=this._shape,o=this._shapeLocation;if(!a||h&&o==$.CENTER?i={width:0,height:0}:(this._font=n.font(),(i=this._calcTextRect(null,this._font,a,0,0,t,e,"left","top",n.textWrap())).height++),h&&(this._shapeSize=s=this.$_getSize(this._shapeSize,E(1*n.fontSize())),!isNaN(s.w))){var l=this._shapeBorder?E((this._shapeBorder.width()+1)/2):0;$.isCenter(o)?(i.width=Math.max(i.width,s.w+l),i.height=Math.max(i.height,s.h+l)):$.isVert(o)?i.height+=s.h+l+this._shapePadding+this._shapeOffset:i.width+=s.w+l+this._shapePadding+this._shapeOffset}return i.width+=n.paddingHorz(),i.height+=n.paddingVert(),i},_doRender:function(t,e){var i=this._model._styles,s=i.background();s&&t.drawRectI(s,null,e),i.deflatePaddings(e),t.drawTextRect(this._font,i.color(),this._text,e,this._getTextAlign(i.textAlignment()),this._getLineAlign(i.lineAlignment()))},_doRenderHtml:function(t){var e=this._model._styles,i=this.$_prepareSpan(),s=this._text,r=e.textAlignment(),n=e.lineAlignment(),a=this._shape;e.deflatePaddings(t);var h=t.x,o=t.y,l=t.width,d=t.height;if(a&&!isNaN(this._shapeSize.w)){var u,_,g,c=h,p=o,m=this._shapeSize.w,f=this._shapeSize.h,w=this._shapeOffset,y=this._shapeAlignment,v=this._shapePadding,b=this._shapeLocation;switch(b){case $.RIGHT:case $.RIGHT_SIDE:switch(c=t.right()-m-w,y){case q.CENTER:p+=(d-f)/2;break;case q.FAR:p+=d-f}if(l-=w+m+v,b===$.RIGHT&&s)switch(r){case q.NEAR:0<(_=l-(u=this._calcTextRect(null,this._font,s,0,0,l,d,"left","top",e.textWrap())).width)&&(c-=_);break;case q.FAR:break;case q.CENTER:u=this._calcTextRect(null,this._font,s,0,0,l,d,"left","top",e.textWrap()),0<(_=E((l-u.width)/2))&&(h=(c-=_)-v-u.width,l=u.width)}break;case $.TOP:case $.TOP_SIDE:switch(p+=w,y){case q.CENTER:c+=(l-m)/2;break;case q.FAR:c+=l-m}if(o+=g=w+f+v,d-=g,b===$.TOP&&s)switch(n){case q.NEAR:break;case q.FAR:0<(g=d-(u=this._calcTextRect(null,this._font,s,0,0,l,d,"left","top",e.textWrap())).height)&&(p+=g);break;case q.CENTER:u=this._calcTextRect(null,this._font,s,0,0,l,d,"left","top",e.textWrap()),0<(g=E((d-u.height)/2))&&(o=(p+=g)+f+v,d=u.height)}break;case $.BOTTOM:case $.BOTTOM_SIDE:switch(p=t.bottom()-f-w,y){case q.CENTER:c+=(l-m)/2;break;case q.FAR:c+=l-m}if(d-=w+f+v,b===$.BOTTOM&&s)switch(n){case q.NEAR:0<(g=d-(u=this._calcTextRect(null,this._font,s,0,0,l,d,"left","top",e.textWrap())).height)&&(p-=g);break;case q.FAR:break;case q.CENTER:u=this._calcTextRect(null,this._font,s,0,0,l,d,"left","top",e.textWrap()),0<(g=E((d-u.height)/2))&&(o=(p-=g)-v-u.height,d=u.height)}break;case $.LEFT:case $.LEFT_SIDE:switch(c+=w,y){case q.CENTER:p+=(d-f)/2;break;case q.FAR:p+=d-f}if(h+=_=w+m+v,l-=_,b===$.LEFT&&s)switch(r){case q.NEAR:break;case q.FAR:0<(_=l-(u=this._calcTextRect(null,this._font,s,0,0,l,d,"left","top",e.textWrap())).width)&&(c+=_);break;case q.CENTER:u=this._calcTextRect(null,this._font,s,0,0,l,d,"left","top",e.textWrap()),0<(_=E((l-u.width)/2))&&(h=(c+=_)+m+v,l=u.width)}break;case $.CENTER:c+=(l-m)/2,p+=(d-f)/2,s=null;break;case $.CENTER_BACK:c+=(l-m)/2,p+=(d-f)/2;break;default:a=null}if(a){(u=u||new J).set(E(c),E(p),E(m),E(f));var x=this.$_getGraphics(!0);a.draw(x,u,this._shapeColor,this._shapeBorder,this._shapeRotate)}}s&&B.renderTextBounds(i,this._font,e.color(),s,h,o,l,d,this._getTextAlign(r),this._getLineAlign(n),e.textWrap())},resetPageValue:function(t,e){var i=this.model();if(i.hasPageValue()){var s=d(i._pageNo?e+1:t);s!=this._text&&(this._resetText=s)}},_getText:function(t,e){if(this._resetText)return this._resetText;var i=t.getValue(),s="";return void 0!==i?"number"==typeof i?s+=this._numberFormatter?this._numberFormatter.format(i):i:g(i)?s+=this._datetimeWriter?this._datetimeWriter.getText(i):i:"boolean"==typeof i?s=this._booleanFormatter?this._booleanFormatter.formatValue(i):i:s+=i:s+=t.displayText(),s&&(s=d(e.prefix())+s+d(e.suffix())),s},$_getSize:function(t,e){var i={w:0,h:0},s=t;return sh=s?(sw=s.getDimension(e),s.getDimension(e)):sw=e,i.w=sw*(isNaN(this._shapeScaleX)?1:this._shapeScaleX),i.h=sh*(isNaN(this._shapeScaleY)?1:this._shapeScaleY),i},$_prepareItemSpan:function(t){this._spans||(this._spans=[]);var e=this._spans[t];return e||(this._spans[t]=e=document.createElement("span"),e.style.position="absolute"),!e.parentNode&&this._dom.appendChild(e),e},_renderTextBoundsEx:function(t,e,i,s,r,n,a,h,o,l,d){if(this._dom)t=t,B.renderTextBounds(t,i,s,e,r,n,a,h,o,l,d);else switch(d){case TextWrap.EXPLICIT:t.drawTextBoundsExplicit(i,s,e,r,n,a,h,o,l);break;case TextWrap.NORMAL:t.drawTextBoundsWrap(i,s,e,r,n,a,h,o,l);break;default:t.drawTextBounds(i,s,e,r,n,a,h,o,l)}},_renderTextBounds2:function(t,e,i,s,r,n,a,h,o,l,d){if(this._dom){var u=this.$_prepareSpan();B.renderTextBounds(u,i,s,e,r,n,a,h,o,l,d)}else switch(d){case TextWrap.EXPLICIT:t.drawTextBoundsExplicit(i,s,e,r,n,a,h,o,l);break;case TextWrap.NORMAL:t.drawTextBoundsWrap(i,s,e,r,n,a,h,o,l);break;default:t.drawTextBounds(i,s,e,r,n,a,h,o,l)}}}),oe=(b("PrintValueElement",he,{init:function(t,e,i){this._super(t,e,i),this._name="printValueView"},_getText:function(t){if(this._resetText)return this._resetText;var e=this.container();return t.displayText(e.valueRuntime(),e.printing())},resetPageValue:function(t,e){var i=this.model();if(i.hasPageValue()){var s=d(i._pageNo?e+1:t);s!=this._text&&(this._resetText=s)}}}),b("PrintValueElement",he,{init:function(t,e,i){this._super(t,e,i),this._name="printValueView"},setNumberFormat:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?new ht(t):null,this.invalidate())},_getText:function(t,e){var i,s=this.container(),r=t.getSummary(s.summaryRuntime(),s.printing()),n=d(e.prefix());isNaN(r)?n+=r:(i=this._numberFormatter)?n+=i.format(r):n+=String(r);return n+d(e.suffix())}})),le=b("PrintImageElement",ae,{init:function(t,e,i){this._super(t,"printImageView",e,i)},_doMeasure:function(t,e){var i=this._model,s=i._styles,r={width:s.paddingHorz(),height:s.paddingVert()};return r.width+=i.imageWidth(),r.height+=i.imageHeight(),r},_doRender:function(t,e){var i=this._model,s=i.styles(),r=this.container().getImage(i.imageUrl()),n=s.background();if(n&&t.drawRectI(n,null,e),s.deflatePaddings(e),r){var a=i.imageWidth()<=0?r.width:i.imageWidth(),h=i.imageHeight()<=0?r.height:i.imageHeight();t.drawImage(r,e.x,e.y,a,h)}},_doRenderHtml:function(t){var e=this._model,i=e.url();if(i){var s,r;e.styles().deflatePaddings(t);var n=this._imageElt;n||(n=this._imageElt=document.createElement("img"),this._dom.appendChild(n)),n.src=i,n.width=s=e.imageWidth()<=0?n.width:e.imageWidth(),n.height=r=e.imageHeight()<=0?n.height:e.imageHeight();var a=n.style;a.position="absolute",a.padding=0,a.margin=0,a.border="",a.left=t.x+(t.width-s)/2+"px",a.top=t.y+(t.height-r)/2+"px",this.container().$_pileImage(n)}}}),de=b("PrintHLineElement",ae,{init:function(t,e,i){this._super(t,"hlineView",e,i),this._dom.appendChild(this._lineElt=B.createElement("div",{position:"absolute",boxSizing:"border-box",padding:0,margin:0}))},_doMeasure:function(t,e){var i=this._model._styles,s=this._line=i.line(),r={width:0,height:s?s.width():0};return r.height+=i.paddingVert(),r},_doRender:function(t,e){},_doRenderHtml:function(t){var e=this._model.styles(),i=this._lineElt;i.style.borderTop=this._line?this._line.css():"",t=e.deflatePaddings(t.clone()),B.setBounds(i,t.x,t.y,t.width,t.height)}}),ue=b("PrintShapeElement",ae,{init:function(t,e,i){this._super(t,"printShapeView",e,i)},_doMeasure:function(t,e){var i=this._model,s=(i._styles,{});return isNaN(i.width)?s.width=16:s.width=i.width,isNaN(i.height)?s.height=16:s.height=i.height,s},_doRender:function(t,e){var i=this._model,s=i.shape();if(s){var r=i._styles;s.draw(t,e,r.shapeColor(),r.shapeBorder(),r.shapeRotate())}},_doRenderHtml:function(t){this._doRender(this.$_getGraphics(!0),t)}}),_e=(b("PrintSvgElement",ae,{init:function(t,e,i){this._super(t,"printSvgView",e,i)},_doMeasure:function(t,e){var i=this._model,s=(i._styles,this.container().getImage(i.imageUrl()),{});return isNaN(i.width)?s.width=16:s.width=i.width,isNaN(i.height)?s.height=16:s.height=i.height,s},_doRender:function(t,e){},_doRenderHtml:function(t){this._doRender(this.$_getGraphics(!0),t)}}),b("PrintCellView",D,{init:function(t){this._super(t,"printCellView"),this._css&&(this._css.overflow="hidden")},_doRender:function(t,e){},_doRenderHtml:function(t){}})),ge=b("PrintGroupElement",ae,{init:function(t,e,i,s){this._super(t,e||"printGroupView",i,s),this._childMap={},this._cellViews=[]},getItemView:function(t){return this._childMap[t.$_hash]},resetPageValue:function(t,e){if(this.model().hasPageValue())for(var i=0,s=this.childCount();i<s;i++)this.getChild(i).getChild(0).resetPageValue(t,e)},_isValidItem:function(t,e){return!!e},_doUpdateStyles:function(t,e){this._super(t,e),this._line=e.line()},_updateChildStyles:function(t,e){},_measureChild:function(t,e,i,s,r,n){e.measure(s,r,n)},_measureChildren:function(t,e,i,s){var r=this.model(),n=this._childMap,a=0;if(this.hideAll(),r instanceof zt)for(var h=this.container().delegate(),o=r.count(),l=r.ordered()?r.getOrderedItems():null,d=0;d<o;d++){var u=l?l[d]:r.getItem(d);if(this._isValidItem(r,u)){var _=n[u.$_hash],g=this._cellViews[d];g||s||(g=new _e(this._dom),this._cellViews[d]=g,this.addElement(g)),_||(_=this._createItemView(h,u,this._printing))&&(n[u.$_hash]=_,s?this.addElement(_):g.addElement(_)),_&&(a++,_.setVisible(!0),this._updateChildStyles(r,u),this._measureChild(d,_,u,t,e,i))}}return a}}),ce=b("PrintItemBandElement",ne,{init:function(t,e,i,s){this._super(t,e,i,s),this._childMap={},this._layout=new te(this),this._layoutNeeded=!!i,i&&i.addListener(this)},getItemView:function(t){return this._childMap[t.$_hash]},invalidateLayout:function(){this.$_invalidateLayout()&&this.container().invalidateLayout()},_doMeasure:function(t,e,i){return(i||this._layoutNeeded)&&this._measureChildren(t,e,i),this._layout.measure(t,e)},_doLayoutItems:function(t,e){(t||this._layoutNeeded)&&(this._layout.layout(e),this._layoutNeeded=!1)},_doRender:function(t,e){var i=this.model(),s=i.styles();if(this._printing);else if(0<i.count()){var r=s.background();r&&t.drawRectI(r,null,e)}else{var n=this._getEmptyText();n&&(e.inflate(-4,-4),t.drawTextRect(null,T.GRAY,n,e,TextAlign.LEFT,TextLayout.TOP),e.inflate(4,4)),t.drawRectI(ce.EMPTY_BACKGROUND,null,e)}},_doRenderHtml:function(t){},_doDrawBorders:function(t,e,i){i||t.drawRectI(null,re.DESIGN_BORDER_DARK,e)},resetPageValue:function(t,e){var i=this.model();if(i.hasPageValue())for(var s=0,r=i.count();s<r;s++){var n=i.getItem(s);this._childMap[n.$_hash].resetPageValue(t,e)}},$_clearViews:function(){this._clearItemViews(),this._childMap={}},$_invalidateLayout:function(){return!this._layoutNeeded&&(this._layoutNeeded=!0)},_getEmptyText:function(){return""},_measureChildren:function(t,e,i){var s=this.model();if(this._hideAllItems(),s instanceof Gt)for(var r=this.container().delegate(),n=0,a=s.count();n<a;n++){var h=s.getItem(n),o=this._childMap[h.$_hash];o||(o=r.getItemView(h,this._printing))&&(this._childMap[h.$_hash]=o,this._addItemView(o)),o&&(o.setVisible(!0),o.measure(t,e,i))}},onPrintItemContainerChanged:function(t){var e=this.container();e&&e.invalidateLayout()}},{EMPTY_BACKGROUND:new T(4293980400)}),pe=b("ReportHeaderElement",ce,{init:function(t,e){this._super(t,"reportHeaderView",e)},_getEmptyText:function(){return"Report title"}}),me=b("ReportFooterElement",ce,{init:function(t,e){this._super(t,"reportFooterView",e),this._background=new T(4293980400)},_getEmptyText:function(){return"Report footer"}}),fe=b("PageHeaderElement",ce,{init:function(t,e){this._super(t,"pageHeaderView",e)},_getEmptyText:function(){return"Page header"}}),we=b("PageFooterElement",ce,{init:function(t,e){this._super(t,"pageFooterView",e)},_getEmptyText:function(){return"Page footer"}}),ye=b("PageTitleElement",ce,{init:function(t,e){this._super(t,"pageTitleView",e)},_getEmptyText:function(){return"Page title"}}),ve=b("PrintCanvas",zt,{init:function(){this._super(),this._styles.setSysDefault(new St(null,"canvasDefault",{padding:0}),!1)},ordered:function(){return!0}}),be=b("PrintCanvasElement",ge,{init:function(t,e,i){this._super(t,"printCanvasView",e,i),this._childMap={},this._layout=new ee(this),this._layoutNeeded=!!e},_doMeasure:function(t,e,i){return(i||this._layoutNeeded)&&this._measureChildren(t,e,i,!0),this._layout.measure(t,e)},_doLayoutItems:function(t,e){(t||this._layoutNeeded)&&(this._layout.layout(e),this._layoutNeeded=!1)},_doRenderHtml:function(t){}}),xe=b("PrintBox",zt,{init:function(){this._super()}}),Se=b("PrintHBox",xe,{init:function(){this._super(),this._styles.setSysDefault(new St(null,"hboxDefault",{padding:0,line:null}),!1)}}),Ie=b("PrintVBox",xe,{init:function(){this._super(),this._styles.setSysDefault(new St(null,"vboxDefault",{padding:0,line:null}),!1)}}),Ce=b("PrintDBox",xe,{init:function(){this._super(),this._styles.setSysDefault(new St(null,"dboxDefault",{padding:0,line:"#555"}),!1)},diagonal:v(bt,bt.DEFAULT)}),Ve=b("PrintBoxElement",ge,{init:function(t,e,i,s){this._super(t,e,i,s)}}),He=b("PrintHBoxElement",Ve,{init:function(t,e,i){this._super(t,"printHBoxView",e,i)},_measureChild:function(t,e,i,s,r,n){var a=i.width();if(!a||!a.fixed()){var h=this.model().cellWidths();h&&(a=h[t])&&a.fixed()&&(s=Math.min(s,a.size()))}this._super(t,e,i,s,r,n)},_doMeasure:function(t,e,i){var s=this.model(),r=s.styles(),n={width:0,height:0},a=this._measureChildren(t,e,i);if(0<a){var h,o,l,d,u,_,g,c=s.cellWidths(),p=this._relWidths=c?[]:null,m=0,f=0,w=0,y=this._points=[f];for(this._relWidthSum=0,h=this._absCount=0;h<a;h++)l=(o=this.getChild(h).getChild(0)).model(),(_=c&&c[h])?_.fixed()?(f+=g=_.size(),w+=g,this._absCount++):(p.push(h),this._relWidthSum+=_.size(),w+=o._measuredWidth):(f+=g=o._measuredWidth,w+=g,f+=g=N.getFixedI(l.left())+N.getFixedI(l.right()),w+=g),y.push(f),d=o._measuredHeight,d+=N.getFixedI(l.top())+N.getFixedI(l.bottom()),m=Math.max(m,d);if(this._line){for(w+=(u=this._line.width())*(a-1),h=1;h<a;h++)y[h]+=h*u;y[a]+=u*a}n.width=w,n.height=m}return n.width+=r.paddingHorz(),n.height+=r.paddingVert(),n},_doLayoutItems:function(t,e){var i=this.childCount();if(i){var s,r,n,a,h,o,l,d,u=this.model(),_=u.styles().deflatePaddings(e.clone()),g=u._cellWidths,c=this._relWidths,p=this._line?this._line.width():0,m=_.width,f=this._points,w=f[i],y=_.x;if(0<(o=m-w)){if(0<this._relWidthSum){for(o+=(n=c.length)*p,a=[],s=1;s<=i;s++)a.push(f[s]-f[s-1]);if(u.isFillWidth()){for(l=o,s=0;s<n-1;s++)d=g[r=c[s]],a[r]=d=o*d.size()/this._relWidthSum,l-=d;a[c[s]]=l}else for(s=0;s<n;s++)d=g[r=c[s]],a[r]=d=d.getSize(o);for(s=0;s<i;s++)f[s+1]=f[s]+a[s]}else if(u.isFillWidth())if(0<this._absCount&&u.fillWidth()!==vt.ALL){if(this._absCount<i){for(a=[],s=1;s<=i;s++)a.push(f[s]-f[s-1]);for(l=o/(i-this._absCount),s=0;s<i;s++)cw=g[s],cw||(a[s]+=l);for(s=0;s<i;s++)f[s+1]=f[s]+a[s]}}else for(l=o/i,s=1;s<i;s++)f[s]=f[s]+l*s;u.isFillWidth()&&(f[i]=_.width)}for(y=f[0],s=0;s<i;s++)cell=this.getChild(s),h=cell.getChild(0),d=E(f[s+1]-y+0-p),cell.setVisible(0<d),cell.visible()&&(cell.setBoundsI(_.x+y,_.y,d,_.height),this._layoutChild(h,0,0,d,_.height)),f[s+1]=y+=d+p;f[i]=Math.min(_.width,f[i])}},_doRenderHtml:function(t){var e=this.childCount();if(1<e){var i=this.model().styles(),s=this._line;if(s)for(var r=new J(0,0,t.width,t.height),n=this.$_getBackGraphics(!0,r),a=s.width(),h=this._points,o=r.y,l=r.bottom(),d=r.x+i.paddingLeft(),u=1;u<e;u++)n.drawVLineI(s,d+h[u]-a,o,l)}}}),De=b("PrintVBoxElement",Ve,{init:function(t,e,i){this._super(t,"printVBoxView",e,i)},_measureChild:function(t,e,i,s,r,n){var a=i.height();if(!a||!a.fixed()){var h=this.model().cellHeights();h&&(a=h[t])&&a.fixed()&&(r=Math.min(r,a.size()))}this._super(t,e,i,s,r,n)},_doMeasure:function(t,e,i){var s=this.model(),r=s.styles(),n={width:0,height:0},a=this._measureChildren(t,e,i);if(0<a){var h,o,l,d,u,_,g,c=s.cellHeights(),p=this._relHeights=c?[]:null,m=0,f=0,w=0,y=this._points=[m];for(this._relHeightSum=0,h=this._absCount=0;h<a;h++)l=(o=this.getChild(h).getChild(0)).model(),(_=c&&c[h])?_.fixed()?(m+=g=_.size(),f+=g,this._absCount++):(p.push(h),this._relHeightSum+=_.size(),f+=o._measuredHeight):(m+=g=o._measuredHeight,f+=g,m+=g=N.getFixedI(l.top())+N.getFixedI(l.bottom()),f+=g),y.push(m),d=o._measuredWidth,d+=N.getFixedI(l.left())+N.getFixedI(l.right()),w=Math.max(w,d);if(this._line){for(f+=(u=this._line.width())*(a-1),h=1;h<a;h++)y[h]+=h*u;y[a]+=u*a}n.width=w,n.height=f}return n.width+=r.paddingHorz(),n.height+=r.paddingVert(),n},_doLayoutItems:function(t,e){var i=this.childCount();if(i){var s,r,n,a,h,o,l,d,u=this.model(),_=u._cellHeights,g=this._relHeights,c=u.styles(),p=this._line?this._line.width():0,m=c.deflatePaddings(e.clone()),f=m.height,w=this._points,y=w[i],v=m.y;if(0<(o=f-y)){if(0<this._relHeightSum){for(n=g.length,a=[],s=1;s<=i;s++)a.push(w[s]-w[s-1]);if(u.isFillHeight()){for(l=o,s=0;s<n-1;s++)d=_[r=g[s]],a[r]=d=o*d.size()/this._relHeightSum,l-=d;a[g[s]]=l}else for(s=0;s<n;s++)d=_[r=g[s]],a[r]=d=d.getSize(o);for(s=0;s<i;s++)w[s+1]=w[s]+a[s]}else if(u.isFillHeight())if(0<this._absCount&&u.fillHeight()!==vt.ALL){if(this._absCount<i){for(a=[],s=1;s<=i;s++)a.push(w[s]-w[s-1]);for(o/=i-this._absCount,s=0;s<i;s++)rh=_[s],rh||(a[s]+=o);for(s=0;s<i;s++)w[s+1]=w[s]+a[s]}}else for(o/=i,s=1;s<i;s++)w[s]=w[s]+o*s;u.isFillHeight()&&(w[i]=m.height)}for(v=w[0],s=0;s<i;s++)cell=this.getChild(s),h=cell.getChild(0),d=E(w[s+1]-w[s]+0-p),cell.setVisible(0<d),cell.visible()&&(cell.setBoundsI(m.x,m.y+v,m.width,d),this._layoutChild(h,0,0,m.width,d)),w[s+1]=v+=d+p;w[i]=Math.min(m.height,w[i])}},_doRenderHtml:function(t){var e=this.childCount();if(1<e){var i=this.model().styles(),s=this._line;if(s)for(var r=new J(0,0,t.width,t.height),n=this.$_getBackGraphics(!0,r),a=s.width(),h=this._points,o=r.x,l=r.right(),d=r.y+i.paddingTop(),u=1;u<e;u++)n.drawHLineI(s,d+h[u]-a,o,l)}}}),Pe=b("PrintDBoxElement",Ve,{init:function(t,e,i){this._super(t,"printDBoxView",e,i)},_measureChild:function(t,e,i,s,r,n){var a=this.model().diagonal()===bt.BOTH?3:2,h=s/a,o=s/a;this._super(t,e,i,h,o,n)},_doMeasure:function(t,e,i){var s=this.model(),r=s.styles(),n={width:0,height:0},a=this._measureChildren(t,e,i);if(0<a){r.line();var h,o,l,d,u,_=0,g=0;for(h=0;h<a;h++)l=(o=this.getChild(h).getChild(0)).model(),u=o._measuredHeight,u+=N.getFixedI(l.top())+N.getFixedI(l.bottom()),_=Math.max(_,u),d=o._measuredWidth,d+=N.getFixedI(l.left())+N.getFixedI(l.right()),g=Math.max(g,d);s.diagonal()===bt.BOTH?(n.width=3*g,n.height=3*_):(n.width=2*g,n.height=2*_),this._itemWidth=g,this._itemHeight=_}return n.width+=r.paddingHorz(),n.height+=r.paddingVert(),n},_doLayoutItems:function(t,e){var i=this.childCount();if(i){var s,r,n,a=this.model(),h=a.styles().deflatePaddings(e.clone()),o=h.x,l=h.y,d=this._itemWidth,u=this._itemHeight;switch(a.diagonal()){case bt.BOTH:for(s=0;s<i;s++)if(n=(r=this.getChild(s)).getChild(0),r.visible()){switch(n.model().index()){case 3:r.setBoundsI(o+d,l+2*u,d,u);break;case 2:r.setBoundsI(o+2*d,l+u,d,u);break;case 1:r.setBoundsI(o+d,l,d,u);break;default:r.setBoundsI(o,l+u,d,u)}this._layoutChild(n,0,0,d,u)}break;case bt.OPPOSITE:for(s=0;s<i;s++)if(n=(r=this.getChild(s)).getChild(0),r.visible()){switch(n.model().index()){case 1:r.setBoundsI(o+d,l+u,d,u);break;default:r.setBoundsI(o,l,d,u)}this._layoutChild(n,0,0,d,u)}break;default:for(s=0;s<i;s++)if(n=(r=this.getChild(s)).getChild(0),r.visible()){switch(n.model().index()){case 1:r.setBoundsI(o+d,l,d,u);break;default:r.setBoundsI(o,l+u,d,u)}this._layoutChild(n,0,0,d,u)}}}},_doRenderHtml:function(t){var e=this.model(),i=e.styles().line();if(i){var s=new J(0,0,t.width,t.height),r=this.$_getBackGraphics(!0,s);switch(e.diagonal()){case bt.BOTH:r.drawLine(i,s.x,s.y,s.right(),s.bottom()),r.drawLine(i,s.right()-1,s.y,s.x,s.bottom());break;case bt.OPPOSITE:r.drawLine(i,s.right()-1,s.y,s.x,s.bottom());break;default:r.drawLine(i,s.x,s.y,s.right(),s.bottom())}}}}),Re=b("PrintList",zt,{init:function(){this._super(),this._headerStyles=new K(this,"listHeaderStyles"),this._footerStyles=new K(this,"listFooterStyles"),this._rowStyles=new K(this,"listRowStyles"),this._row=new Le,this._row.styles().setParent(this._rowStyles,!1),this.setItemLeft(0),this._styles.setSysDefault(new St(null,"listDefault",{}),!1)},title:null,row:null,headerStyles:null,footerStyles:null,rowStyles:null,setTitle:function(t){if(t!==this._title)if(t){var e=this._createItem(this._delegate(),t.type);e&&(this.$_internalAddItem(e,this._styles._root),"string"==typeof t?e.setText(t):e.assign(t),this._pageTotal=this._pageTotal||e.hasPageValue(),e._styles.setSysDefault(new St(null,"listTitleDefault",{fontBold:!0,textAlignment:"near",marginBottom:4}))),this._title=e}else this._title=null},setItemLine:function(t){t!==this._itemLine&&this._itemLine.assign(t)},setHeaderStyles:function(t){t!==this._headerStyles&&this._headerStyles.extend(t)},setFooterStyles:function(t){t!==this._footerStyles&&this._footerStyles.extend(t)},setRowStyles:function(t){t!==this._rowStyles&&this._rowStyles.extend(t)},$_attached:function(){this._super(),this._rowStyles.setParent(this._styles._root,!1),this._headerStyles.setParent(this._styles._root,!1),this._footerStyles.setParent(this._styles._root,!1),this._itemStyles.setParent(this._styles._root,!1)}}),Le=b("PrintListRow",Et,{init:function(){this._super()}}),Te=b("PrintListElement",ge,{init:function(t,e,i){this._super(t,"listView",e,i)},setHeight:function(t){this._super(t)},_createItemView:function(t,e,i){return e===this.model().title()?this._super(t,e,i):new Ee(this._dom,this.model().row(),e,this._printing)},_updateChildStyles:function(t,e){var i=e.header();i&&i.styles().setParent(t._headerStyles,!1);var s=e.footer();s&&s.styles().setParent(t._footerStyles,!1),e.styles().setParent(t.itemStyles(),!1)},_measureChild:function(t,e,i,s,r,n){var a=i.height();if(!a||!a.fixed()){var h=this.model().cellHeights();h&&(a=h[t])&&a.fixed()&&(r=Math.min(r,a.size()))}e.$_cellWidths=this.model().cellWidths(),this._super(t,e,i,s,r,n)},_doMeasure:function(t,e,i){var s=this.model(),r=s.title(),n=s.styles(),a={width:0,height:0},h=this._measureChildren(t,e,i,!0);if(0<h){var o,l,d,u,_,g,c,p=this._titleView,m=NaN,f=NaN,y=NaN,v=0,b=0,x=0,S=s.cellWidths(),I=s.cellHeights(),C=this._relWidths=S?[]:null,V=this._relHeights=I?[]:null;if(this._rowPoints=[0],this._relWidthSum=this._relHeightSum=0,this._absColCount=this._absRowCount=0,r&&!p&&(p=this._titleView=this._createItemView(this.container().delegate(),r,this._printing)),p&&(p.setVisible(!0),this.addElement(p),p.measure(t,e,i)),S)for(d=0;d<3;d++)if(l=S[d])switch(l.fixed()?(w=l.size(),this._absColCount++):(C.push(d),this._relWidthSum+=l.size(),w=0),d){case 0:m=w;break;case 1:f=w;break;case 2:y=w}for(_=u=0,d=0;d<h;d++)g=this.getChild(d),(o=I&&I(d))?o.fixed()?(u+=c=o.size(),_+=c,this._absRowCount++):(V.push(d),this._relHeightSum+=o.size(),u+=g._measuredHeight):(u+=c=g._measuredHeight,_+=c),this._rowPoints.push(u),isNaN(m)&&(v=Math.max(v,g.$_headerWidth())),isNaN(f)&&(b=Math.max(b,g.$_itemWidth())),isNaN(y)&&(x=Math.max(x,g.$_footerWidth()));this._headerWidth=isNaN(m)?v:m,this._itemWidth=isNaN(f)?b:f,this._footerWidth=isNaN(y)?x:y,a.height=_,a.width=this._headerWidth+this._itemWidth+this._footerWidth,p&&(a.width=Math.max(a.width,p._measuredWidth),a.height+=p._measuredHeight)}return a.width+=n.paddingHorz(),a.height+=n.paddingVert(),a},_doLayoutItems:function(t,e){var i,s,r,n,a,h,o,l,d,u,_=this.model(),g=_.styles().deflatePaddings(e),c=g.x,p=g.y,m=_.count(),f=g.width,w=g.height,y=this._headerWidth+this._itemWidth+this._footerWidth,v=this._titleView;if(v&&(this._layoutChild(v,c,p,f,n=v._measuredHeight),p+=n,w-=n),0<(a=f-y)){var b=this._relWidths,x=_.cellWidths();if(0<this._relWidthSum){if(h=b.length,o=[this._headerWidth,this._itemWidth,this._footerWidth],_.isFillWidth()){for(d=a,i=0;i<h-1;i++)j=b[i],r=x[j],o[j]=r=a*r.size()/this._relWidthSum,d-=r;o[b[i]]=d}else for(i=0;i<h;i++)j=b[i],r=x[j],o[j]=r=r.getSize(a);this._headerWidth=o[0],this._itemWidth=o[1],this._footerWidth=o[2]}else if(_.isFillWidth())if(0<this._absColCount&&_.fillWidth()!==vt.ALL){if(this._absColCount<m){for(o=[this._headerWidth,this._itemWidth,this._footerWidth],a/=m-this._absColCount,i=0;i<m;i++)cw=x[i],cw||(o[i]+=a);this._headerWidth=o[0],this._itemWidth=o[1],this._footerWidth=o[2]}}else a/=1+(this._headerWidth?1:0)+(this._footerWidth?1:0),this._headerWidth&&(this._headerWidth+=a),this._itemWidth+=a,this._footerWidth&&(this._footerWidth+=a);_.isFillWidth()&&(this._footerWidth?this._footerWidth=g.width-this._headerWidth-this._itemWidth:this._itemWidth=g.width-this._headerWidth)}var S=this._rowPoints;if(0<(a=w-S[m])){var I=this._relHeights,C=_.cellHeights();if(0<this._relHeightSum){for(h=I.length,l=[],i=1;i<=m;i++)l.push(S[i]-S[i-1]);if(_.isFillHeight()){for(u=a,i=0;i<h-1;i++)j=I[i],n=C[j],l[j]=n=a*n.size()/this._relHeightSum,u-=n;l[I[i]]=u}else for(i=0;i<h;i++)j=I[i],n=C[j],l[j]=n=n.getSize(a);for(i=0;i<m;i++)S[i+1]=E(S[i]+l[i])}else if(_.isFillHeight())if(0<this._absRowCount&&_.fillHeight()!==vt.ALL){if(this._absRowCount<m){for(l=[],i=1;i<=m;i++)l.push(S[i]-S[i-1]);for(a/=m-this._absRowCount,i=0;i<m;i++)rh=C[i],rh||(l[i]+=a);for(i=0;i<m;i++)S[i+1]=E(S[i]+l[i])}}else for(a/=m,i=1;i<m;i++)S[i]=E(S[i]+a*i);_.isFillHeight()&&(S[m]=g.height)}for(i=0;i<m;i++)s=this.getChild(i),r=g.width,n=S[i+1]-S[i],s.setBoundsI(c,p+S[i],r,n),s.$_setWidths(this._headerWidth,this._itemWidth,this._footerWidth),s.layoutItems()},_doRenderHtml:function(t){}}),Ee=b("PrintListRowElement",ae,{init:function(t,e,i,s){this._super(t,"listItemView",e,s),this._item=i,this._css&&(this._css.overflow="hidden")},_doMeasure:function(t,e,i){var s,r,n,a,h,o=this.$_cellWidths,l=this.model().styles(),d={width:0,height:0},u=(this.model(),this._item),_=u.header(),g=u.footer(),c=this._headerCell,p=this._footerCell,m=this._itemCell,f=this.container().delegate();return _&&(c||(c=this._headerCell=new _e(this._dom),this.addElement(c),(s=f.getItemView(_,this._printing))&&c.addElement(s)),s&&(s.setVisible(!0),h=t,o&&(a=o[0])&&a.fixed()&&(h=Math.min(h,a.size())),s.measure(h,e,i),d.width=s._measuredWidth,d.height=s._measuredHeight)),u&&(m||(m=this._itemCell=new _e(this._dom),this.addElement(m),(n=this._itemView=f.getItemView(u,this._printing))&&m.addElement(n)),n&&(n.setVisible(!0),o&&(a=o[1])&&a.fixed()&&(h=Math.min(h,a.size())),n.measure(h,e,i),d.width+=n._measuredWidth,d.height=Math.max(d.height,n._measuredHeight))),g&&(p||(p=this._footerCell=new _e(this._dom),this.addElement(p),(r=f.getItemView(g,this._printing))&&p.addElement(r)),r&&(r.setVisible(!0),o&&(a=o[2])&&a.fixed()&&(h=Math.min(h,a.size())),r.measure(h,e,i),d.width+=r._measuredWidth,d.height=Math.max(d.height,r._measuredHeight))),d.width+=l.paddingHorz(),d.height+=l.paddingVert(),d},_doLayoutItems:function(t,e){var i,s=this.model().styles().deflatePaddings(e.clone()),r=s.height,n=s.x;if((i=this._headerCell)&&(i.setVisible(0<r&&0<this._headerWidth),i.visible()&&(i.setBounds(n,s.y,this._headerWidth,r),this._layoutChild(i.getChild(0),0,0,this._headerWidth,r),n+=this._headerWidth)),(i=this._itemCell)&&(i.setVisible(0<r&&0<this._itemWidth),i.visible())){var a=i.getChild(0).model(),h=this._itemWidth;this._headerCell&&this._headerCell.visible()||(a.headerCollapsible()?(n=s.x,h+=this._headerWidth):n=s.x+this._headerWidth),(!this._footerCell||this._footerWidth<=0)&&a.footerCollapsible()&&(h+=this._footerWidth),i.setBounds(n,s.y,h,r),this._layoutChild(i.getChild(0),0,0,h,r),n+=h}(i=this._footerCell)&&(i.setVisible(0<r&&0<this._footerWidth),i.visible()&&(i.setBounds(n,s.y,this._footerWidth,r),this._layoutChild(i.getChild(0),0,0,this._footerWidth,r)))},$_headerWidth:function(){return this._headerCell?this._headerCell.getChild(0)._measuredWidth:0},$_itemWidth:function(){return this._itemCell?this._itemCell.getChild(0)._measuredWidth:0},$_footerWidth:function(){return this._footerCell?this._footerCell.getChild(0)._measuredWidth:0},$_setWidths:function(t,e,i){this._headerWidth=t,this._itemWidth=e,this._footerWidth=i}}),Me=b("PrintTileMask",null,{init:function(t){this._super(),this._styles=new St(null,"tileMask",!1),t&&this.assign(t),this._styles.setSysDefault(new St(null,"tileMaskDefault",{}),!1)},range:null,styles:null,offset:f(0),zindex:f(0),setRange:function(t){if(t!=this._range&&(this._range=t,this._start=null,this._end=null,"string"==typeof t&&t)){var e,i,s,r=t.split(":"),n=r.length;if(2<=(e=r[0].split(",")).length&&(i=s=this._start=this._end={r:parseInt(e[0]),c:parseInt(e[1])}),1<n&&(e=r[1].split(","),s=this._end={r:parseInt(e[0]),c:parseInt(e[1])}),i!=s){var a=Math.min(i.c,s.c),h=Math.max(i.c,s.c),o=Math.min(i.r,s.r),l=Math.max(i.r,s.r);i.c=Math.max(0,a),i.r=Math.max(0,o),s.c=Math.max(0,h),s.r=Math.max(0,l)}}},setStyles:function(t){t!==this._styles&&this._styles.extend(t)},start:function(){return this._start},end:function(){return this._end},assignSimple:function(t){this.setRange(t)}}),Fe=b("PrintTileMaskElement",re,{init:function(t,e,i){this._super(t,"tileMaskView",e,i)},_doRenderHtml:function(t){var e,i=this.model().styles(),s=(i.border(),i.background()),r=this._back.style;r.background=s?s.css():"",r.border="",(e=i.border())?r.border=e.css():((e=i.borderLeft())?r.borderLeft=e.css():r.borderLeft="",(e=i.borderRight())?r.borderRight=e.css():r.borderRight="",(e=i.borderTop())?r.borderTop=e.css():r.borderTop="",(e=i.borderBottom())?r.borderBottom=e.css():r.borderBottom="")}}),We=b("PrintTile",zt,{init:function(){this._super(),this.setItemLeft(0),this.setItemRight(0),this.setItemTop(0),this.setItemBottom(0),this.setItemStyles({background:"#fff",padding:2}),this._styles.setSysDefault(new St(null,"tileDefault",{padding:0,line:null}),!1)},cols:1,rows:1,rangeMasks:null,setCols:function(t){t=parseInt(t),this._cols=isNaN(t)?1:Math.max(1,t)},setRows:function(t){t=parseInt(t),this._rows=isNaN(t)?1:Math.max(1,t)},setRangeMasks:function(t){if(t!==this._rangeMasks){var e=null;if(p(t)){e=[];for(var i=0;i<Math.min(2,t.length);i++)e.push(new Me(t[i]))}else t&&(e=[new Me(t)]);this._rangeMasks=e}},ordered:function(){return!0}}),Ae=b("PrintTileElement",ge,{init:function(t,e,i){this._super(t,"tileView",e,i),this._maskMap={}},_isValidItem:function(t,e){return e&&e.col()<t.cols()&&e.row()<t.rows()},_measureChild:function(t,e,i,s,r,n){var a=i.width(),h=i.height();if(!a||!a.fixed()){var o=this.model().cellWidths();o&&(a=o[t])&&a.fixed()&&(s=Math.min(s,a.size()))}if(!h||!h.fixed()){var l=this.model().cellHeights();l&&(h=l[t])&&h.fixed()&&(r=Math.min(r,h.size()))}this._super(t,e,i,s,r,n)},_doMeasure:function(t,e,i){var s=this.model(),r=s.styles(),n={width:0,height:0},a=this._measureChildren(t,e,i);if(0<a){var h,o,l,d,u,_,g,c,p,m,f,w,y,v,b,x=s.rows(),S=s.cols(),I=s.cellWidths(),C=s.cellHeights(),V=this._relWidths=I?[]:null,H=this._relHeights=C?[]:null,D=new Array(S),P=new Array(x),R=new Array(S),L=new Array(x),T=this._colPoints=new Array(S+1),E=this._rowPoints=new Array(x+1),M=this._horzLines=new Array(x*S),F=this._vertLines=new Array(x*S),W=this._line?this._line.width():0,A=W,B=W;for(d=x*S;d--;)M[d]=F[d]=1;for(d=0;d<S;d++)R[d]=D[d]=0;for(l=0;l<x;l++)L[l]=P[l]=0;for(this._relWidthSum=this._relHeightSum=0,this._absColCount=this._absRowCount=0,h=0;h<a;h++){if(g=(_=this.getChild(h).getChild(0)).model(),rSpan=g.rowSpan(),cSpan=g.colSpan(),l=g.row(),d=g.col(),c=I&&I[d],p=C&&C[l],1<rSpan)for(o=1;o<rSpan;o++)M[(l+o)*S+d]=0;if(1<cSpan)for(o=1;o<cSpan;o++)F[l*S+d+o]=0;for(u=l+rSpan,w=E[l],y=E[u],(isNaN(y)||0==y)&&(y=E[u]=w),p?void 0===(b=H[l])&&(p.fixed()?(f=b=p.size(),H[l]=b,this._absRowCount++):(H[h]=b=0,f=_._measuredHeight,this._relHeightSum+=p.size())):(b=_._measuredHeight,f=b+=N.getFixedI(g.top())+N.getFixedI(g.bottom())),u=l+rSpan,b/=rSpan,o=0;o<rSpan;o++)P[o+l]=Math.max(P[o+l],b);for(f/=rSpan,o=0;o<rSpan;o++)L[o+l]=Math.max(L[o+l],f);for(c?void 0===(v=V[d])&&(c.fixed()?(m=v=c.size(),V[d]=v,this._absColCount++):(V[d]=v=0,m=_._measuredWidth,this._relWidthSum+=c.size())):(v=_._measuredWidth,m=v+=N.getFixedI(g.left())+N.getFixedI(g.right())),cSpan,v/=cSpan,o=0;o<cSpan;o++)D[o+d]=Math.max(D[o+d],v);for(m/=cSpan,o=0;o<cSpan;o++)R[o+d]=Math.max(R[o+d],m)}for(d=T[0]=0;d<S;d++)T[d+1]=T[d]+D[d];if(0<A)for(d=1;d<T.length;d++)T[d]+=d*A;for(l=E[0]=0;l<x;l++)E[l+1]=E[l]+P[l];if(0<B)for(d=1;d<E.length;d++)E[d]+=d*B;for(d=v=0;d<R.length;d++)v+=R[d]+A;for(l=b=0;l<L.length;l++)b+=L[l]+B;n.width=v,n.height=b}return n.width+=r.paddingHorz(),n.height+=r.paddingVert(),n},_doLayoutItems:function(t,e){var i=this.childCount();if(i){var s=this.model(),r=s.styles().deflatePaddings(e.clone()),n=this._line?this._line.width():0;this.$_layoutCols(s,r,n),this.$_layoutRows(s,r,n);var a,h,o,l,d,u,_,g,c,p,m,f=s.cols(),w=s.rows(),y=r.x,v=r.y,b=this._colPoints,x=this._rowPoints;for(a=0;a<i;a++)d=(l=(o=(h=this.getChild(a)).getChild(0)).model()).row(),p=(_=(u=l.col())+l.colSpan())>f-1?0:u<f-1?n:0,g=b[_]-b[u]-p,m=d+l.rowSpan()>w-1?0:d<w-1?n:0,c=x[d+l.rowSpan()]-x[d]-m,h.setVisible(0<c-m&&0<g-p),h.visible()&&(h.setBounds(y+b[u],v+x[d],g,c),this._layoutChild(o,0,0,g,c));var S=s.rangeMasks();S&&0<S.length&&this.$_layoutRangeMasks(s,S,r)}},_doRenderHtml:function(t){var e=this._colPoints,i=this._rowPoints,s=this._line;if(s&&(1<e.length||1<i.length)){var r,n,a,h,o,l,d,u,_,g,c=this.model(),p=c.styles(),m=this._horzLines,f=this._vertLines,w=p.paddingLeft(),y=p.paddingTop(),v=new J(0,0,t.width,t.height),b=this.$_getBackGraphics(!0,v),x=s.width(),S=(v.right(),v.bottom(),e.length-1),I=i.length-1,C=c.cols(),V=c.rows();for(r=1;r<S;r++)for(a=w+e[r]-x,d=n=0;n<V;){for(;n<V&&0==f[n*C+r];)n++,d++;for(u=d;n<V&&1==f[n*C+r];)n++,u++;_=0==d?v.x:y+i[d],g=u==V?v.bottom():y+i[u],b.drawVLineI(s,a,_,g),d=u}for(r=1;r<I;r++)for(h=y+i[r]-x,o=n=0;n<C;){for(;n<C&&0==m[r*C+n];)n++,o++;for(l=o;n<C&&1==m[r*C+n];)n++,l++;_=0==o?0:w+e[o],g=l==C?v.right():w+e[l],b.drawHLineI(s,h,_,g),o=l}}},$_layoutCols:function(t,e,i){var s,r,n,a,h,o,l,d=this._colPoints,u=d.length-1,_=d[u],g=e.width,c=g-_;if(0<c){var p=t.cellWidths();if(this._relWidths,0<this._relWidthSum){for(s=[],n=1;n<=u;n++)s.push(d[n]-d[n-1]);if(t.isFillWidth()){for(r=c,l=-1,n=0;n<u;n++)(a=p[n])&&!a.fixed()&&(s[n]+=o=c*a.size()/this._relWidthSum,r-=o,l=n);0<=l&&0<r&&(s[l]+=r)}else for(n=0;n<u;n++)(a=p[n])&&!a.fixed()&&(s[n]+=o=a.getSize(c));for(n=0;n<u;n++)d[n+1]=d[n]+s[n]}else if(t.isFillWidth())if(0<this._absColCount&&t.fillWidth()!==vt.ALL){if(this._absColCount<u){for(s=[],n=1;n<=u;n++)s.push(d[n]-d[n-1]);for(c/=u-this._absColCount,n=0;n<u;n++)(a=p[n])||(s[n]+=c);for(n=0;n<u;n++)d[n+1]=d[n]+s[n]}}else for(c/=u,n=1;n<u;n++)d[n]=d[n]+c*n;t.isFillWidth()&&(d[u]=g)}for(h=d[0],n=0;n<u;n++)o=E(d[n+1]-h+0),h=d[n+1]=h+o;d[u]=Math.min(g,d[u])},$_layoutRows:function(t,e,i){var s,r,n,a,h,o,l,d=this._rowPoints,u=d.length-1,_=d[u],g=e.height,c=g-_;if(0<c){var p=t.cellHeights();if(this._relHeights,0<this._relHeightSum){for(s=[],n=1;n<=u;n++)s.push(d[n]-d[n-1]);if(t.isFillHeight()){for(r=c,l=-1,n=0;n<u;n++)(a=p[n])&&!a.fixed()&&(s[n]+=o=c*a.size()/this._relHeightSum,r-=o,l=n);0<=l&&0<r&&(s[l]+=r)}else for(n=0;n<u;n++)(a=p[n])&&!a.fixed()&&(s[n]+=o=a.getSize(c));for(n=0;n<u;n++)d[n+1]=d[n]+s[n]}else if(t.isFillHeight())if(0<this._absRowCount&&t.fillHeight()!==vt.ALL){if(this._absRowCount<u){for(s=[],n=1;n<=u;n++)s.push(d[n]-d[n-1]);for(c/=u-this._absRowCount,n=0;n<u;n++)(a=p[n])||(s[n]+=c);for(n=0;n<u;n++)d[n+1]=d[n]+s[n]}}else for(c/=u,n=1;n<u;n++)d[n]=d[n]+c*n;t.isFillHeight()&&(d[u]=g)}for(h=d[0],n=0;n<u;n++)o=E(d[n+1]-h+1),h=d[n+1]=h+o;d[u]=Math.min(g,d[u])},$_layoutRangeMasks:function(t,e,i){for(var s=t.cols(),r=t.rows(),n=this._maskMap,a=this._colPoints,h=this._rowPoints,o=this.itemContainer(),l=this.boundsBy(o),d=this._line?this._line.width():0,u=0;u<e.length;u++){var _=e[u],g=n[_.$_hash],c=Math.min(s-1,_.start().c),p=Math.min(r-1,_.start().r),m=Math.min(s-1,_.end().c),f=Math.min(r-1,_.end().r),w=l.x+i.x+a[c],y=l.y+i.y+h[p],v=a[m+1]-a[c],b=h[f+1]-h[p];m<=s-1&&(v-=c<s-1?d:0),f<=r-1&&(b-=p<r-1?d:0),g||(o.addFeedback(g=new Fe(this._dom,_,this._printing)),n[_.$_hash]=g);var x=_.offset();0!=x&&(w-=x,y-=x,v+=2*x,b+=2*x),g.setBounds(w,y,v,b)}}}),Be=b("PrintCard",kt,{init:function(t){this._super("printCard",t),this._itemStyles=new St(this,{}),this._itemStyles.setParent(t._styles,!1),this._styles.setSysDefault(new St(null,"cardDefault",{border:"#888",paddingTop:6,paddingBottom:6,paddingLeft:12,paddingRight:12}),!1)},rowGap:f(10),item:null,itemStyles:null,setItem:function(t){var e;t&&((e="list"===t.type?this._item||new Ne(this):this._item=this._owner.delegate().getItem(t.type))._parent=this,e.assign(t))},setItemStyles:function(t){t!==this._itemStyles&&this._itemStyles.extend(t)},_doClear:function(){this._super(),this._rowGap=10,this._item=null,this._itemStyles.clearValues()}}),Ne=b("DefaultCardItem",Re,{init:function(t){this._super(),this._parent=t;var e=this.owner().ownerGrid();e&&this.$_generate(e),this.headerStyles().setSysDefault(new St(null,"cardItemHeader",{fontBold:!0,paddingRight:6})),this.itemStyles().setSysDefault(new St(null,"cardItemItem",{})),this.styles().setSysDefault(new St(null,"cardItem",{line:null})),this.setLeft(0),this.setRight(0),this.setCellWidths(",100%,")},$_generate:function(t){for(var e=t.getDataColumns(),i=[],s=0;s<e.length;s++){var r=e[s],n={header:{left:null,right:0,text:r.header().displayText()+" :"},data:"$row.column."+r.name(),styles:{textWrap:r.styles().textWrap()}};i.push(n)}this.setItems(i)}}),$e=b("PrintCardElement",re,{init:function(t,e,i){this._super(t,"cardView",e,i)},row:null,_getElementStyles:function(t){return t.itemStyles()},_doMeasure:function(t,e,i){var s=this.model(),r=s.item(),n=s.itemStyles(),a=this.container().delegate(),h={width:0,height:0},o=this._itemView;return o||(o=this._itemView=this._createItemView(a,s.item(),this._printing))&&this.addElement(o),o&&(o.setVisible(!0),r.left()&&r.right()&&(t=t-r.right().getSize(t)-r.left().getSize(t)),o.measure(t,e,i)),h.width+=o._measuredWidth+n.paddingHorz(),h.height+=o._measuredHeight+n.paddingVert(),h},_doLayoutItems:function(t,e){var i=this._itemView;if(i){var s=this.model().itemStyles().deflatePaddings(e.clone());this._layoutChild(i,s.x,s.y,s.width,s.height)}},_doRenderHtml:function(t){}}),ze=(b("PrintDataBand",kt,{init:function(t){this._super("dataBand",t)},header:null,footer:null,rowTemplate:null,rowGap:0}),b("PrintDataBandElement",ne,{init:function(t,e,i){this._super(t,"dataBandView",e,i)},hasElements:function(){return!1},getElements:function(t){return null},_doMeasure:function(t,e,i){var s=this.model(),r=s.header(),n=s.footer(),a=this._headerView,h=this._footerView,o=this.container().delegate(),l=s.styles(),d=(this.getValue(),{width:l.paddingHorz(),height:l.paddingVert()});return r&&!a&&(a=this._headerView=this._createItemView(o,r,this._printing)),a&&(a.setVisible(!0),this._updateChildStyles(s,r),a.measure(t,e,i)),n&&h&&(h=this._footerView=this._createItemView(o,n,this._printing)),h&&(h.setVisible(!0),this._updateChildStyles(s,n),h.measure(t,e,i)),s.rowTemplate().styles(),d},_doLayoutItems:function(t,e){}}),b("PrintGaugeItem",Et,{init:function(){this._super(),this._gauge=this._createDrawing()},valueLocation:ut.DEFAULT,labelLocation:_t.DEFAULT,labelOffset:2,ranges:null,scale:null,subScale:null,rangeScale:null,bodyShape:gt.DEFAULT,thickness:5,valueThickness:1,baseValue:void 0,startValue:0,endValue:100,valueLocation_:function(){return this._gauge.valueLocation},setValueLocation:function(t){t!=this._gauge.valueLocation&&(this._gauge.valueLocation=t,this._changed())},labelLocation_:function(){return this._gauge.labelLocation},setLabelLocation:function(t){t!=this._gauge.labelLocation&&(this._gauge.labelLocation=t,this._changed())},labelOffset_:function(){return this._gauge.labelOffset},setLabelLocation:function(t){t!=this._gauge.labelOffset&&(this._gauge.labelOffset=t,this._changed())},gauge:function(){return this._gauge},_createDrawing:function(){}})),ke=b("PrintGaugeElement",ae,{init:function(t,e,i){this._super(t,"printGaugeView",e,i)},_doUpdateStyles:function(t,e){this._super(t,e)},_doPrepareElement:function(t){this._super(t)},_doMeasure:function(t,e){var i=this.model(),s=n(i._minWidth&&i._minWidth.size(),10),r=n(i._minHeight&&i._minHeight.size(),10);return this._gauge=i.gauge(),{width:s,height:r}},_doLayoutItems:function(t,e){},_doRender:function(t,e){var i=this._model,s=i.styles(),r=i.getValue(),n=i.displayText(),a=this._gauge;s.deflatePaddings(e),a.baseFill=s.shapeInactiveColor(),a.valueFill=s.shapeColor(),a.baseBorder=s.shapeBorder(),a.font=s.font(),a.color=s.color(),a.value=r,a.text=n,a.draw(this,t,e)},_doRenderHtml:function(t){this._doRender(this.$_getGraphics(!0),t)}}),Ge=b("PrintLinearGaugeItem",ze,{init:function(){this._super(),this._styles.setSysDefault(new St(null,"linearGuageDefault",{padding:0}),!1)},_createDrawing:function(){return new ct}}),Oe=b("PrintCircleGaugeItem",ze,{init:function(){this._super(),this._styles.setSysDefault(new St(null,"circleGuageDefault",{padding:0}),!1)},_createDrawing:function(){return new pt}}),Ue=b("PrintChartItem",Et,{init:function(){this._super(),this._styles.setSysDefault(new St(null,"chartDefault",{padding:0}),!1)},async:!1,chart:null,setChart:function(t){t!==this._chart&&(this._chart=t,this._changed())}}),Xe=b("PrintChartElement",ae,{init:function(t,e,i){this._super(t,"printChartView",e,i)},_doUpdateStyles:function(t,e){this._super(t,e)},_doPrepareElement:function(t){this._super(t);var e=t.chart();e?(this._chartView||(this._chartView=new lt(this._dom,this.container()),this.addChild(this._chartView)),this._chart||(this._chart=new ot(this.container()).loadChart(e),this._chartView.setModel(this._chart)),this._chart.setItemSource(t),this._styles=t.styles()):this._chartView&&(this.removeChild(this._chartView),this._chartView=null,this._chart=null)},_doMeasure:function(t,e){var i=this._model;return{width:n(i.width(),t),height:n(i._minHeight&&i._minHeight.getSize(),10)}},_doLayoutItems:function(t,e){if(this._chartView){e=this.getClientRect(this._drawRect);this._styles.deflatePaddings(e),this._chartView.setRectI(this._drawRect),this._chartView.layoutContent()}},_doRender:function(t,e){var i=this._model.styles(),s=i.background();s&&t.drawRectI(s,null,e),i.deflatePaddings(e),t.drawTextRect(this._font,i.color(),this._text,e,this._getTextAlign(i.textAlignment()),this._getLineAlign(i.lineAlignment()))},_doRenderHtml:function(t){var e=this._model.styles(),i=this.$_prepareSpan(),s=this._text;e.deflatePaddings(t),B.renderTextBounds(i,this._font,e.color(),s,t.x,t.y,t.width,t.height,this._getTextAlign(e.textAlignment()),this._getLineAlign(e.lineAlignment()),e.textWrap())},resetPageValue:function(t,e){var i=this.model();if(i.hasPageValue()){var s=d(i._pageNo?e+1:t);s!=this._text&&(this._resetText=s)}}}),Ye=b("StaticPageBody",Gt,{init:function(t){this._super("staticBody",t)}}),Ke=(b("StaticPage",C,{init:function(t,e){this._super(t,e),this._pageHeader=new Xt(this),this._pageFooter=new Yt(this),this._body=new Ye(this)},pageHeader:null,pageFooter:null,body:null}),b("StaticPageCollection",C,{init:function(t){this._super(t),this._owner=t},fronts:null,backs:null,pages:null}),b("StaticPageView",ce,{init:function(t,e,i){this._super(t,"staticView",e,i)},_doMeasure:function(t,e,i){return this._super(t,e,i)},_doLayoutItems:function(t,e){this._super(t,e)},_doRenderHtml:function(t){this._super(t)}}),b("PrintConfig",null,{init:function(t){this._super(),this._printContainer=t},load:function(t){var e=this._printContainer;if(e){"string"==typeof t&&(t=JSON.parse(t));var i=t&&t.ViewModel,s=t&&t.PrintModel,r=e.printView(),n=e.options();s&&(s.options&&n.assign(s.options),s.reportTitle&&e.reportTitle().assign(s.reportTitle),s.reportFooter&&e.reportFooter().assign(s.reportFooter),s.pageHeader&&e.pageHeader().assign(s.pageHeader),s.pageFooter&&e.pageFooter().assign(s.pageFooter)),i&&(r.setColumns(i.columns),i.footer&&r.footer().assign(i.footer),i.header&&r.header().assign(i.header)),e.vRuler(),e.hRuler().addRuler({start:0,length:n.pageWidth()})}}})),je=L._mod_,Je=b("PrintContainer",z,{init:function(t,e,i){this._super(t,e,!0),(this._printing=i)||(this._innerBorder=new GridBorderElement(t),this.addElement(this._innerBorder),this.setCrosshair(!0)),this._delegate=this._createDelegate(this),this._valueRuntime=new ie(this),this._summaryRuntime=new se},styles:null,model:null,printOptions:null,rulerWidth:20,designOffset:30,setModel:function(t){return t!==this._model&&this._model.assign(t),this},setPrintOptions:function(t){return t!==this._printOptions&&(this._printOptions.assign(t),M=this._printOptions.debugPrint()),this},setRulerWidth:function(t){return(t=Math.max(t,0))!=this._rulerWidth&&(this._rulerWidth=t,this.invalidateLayout()),this},printing:function(){return this._printing},delegate:function(){return this._delegate},valueRuntime:function(){return this._valueRuntime},summaryRuntime:function(){return this._summaryRuntime},printView:function(){return this._gridView},vRuler:function(){return this._vRuler},hRuler:function(){return this._hRuler},load:function(t){this.setFocusedCellView(null),this.$_clearPrintViews(),new Ke(this).load(t)},getModelOf:function(t){return t instanceof re?t.model():null},getModelOfName:function(t){return _cast(this["_"+t],kt)},getPrintItemView:function(t){if(t instanceof kt)return this["_"+t.name()+"View"];if(t instanceof Et){for(var e=t.getAncestors(),i=this["_"+e[0].name()+"View"],s=1;s<e.length;s++)i=i.getItemView(e[s]);return i.getItemView(t)}return null},canCross:function(t,e){return!this._printing&&(!this._vRuler.visible()||t>=this._vRuler.width())&&(!this._hRuler.visible()||e>=this._hRuler.height())},loadTheme:function(t){if(this._model){if(!(t instanceof It))return;this._model.setTheme(t)}},focusedCell:function(){var t=this._focusedCell;return t&&(t instanceof ae||t instanceof ce)?{type:"printItem",model:t.model()}:this._super()},setFocusedCell:function(t){if(t&&"printItem"==t.type){var e=this.getPrintItemView(t.model);this.setFocusedCellView(e)}else this._super(t)},_createGridView:function(t,e,i){return new Qe(t,e,i,this._printing)},_createBackgroundElements:function(t){this._designPane=new qe(t),this.addElement(this._designPane);var e=this._model=new qt(this);this._printOptions=new Qt,this._pageStyles=e.page().styles(),this._reportHeader=e.reportHeader(),this._reportHeaderView=new pe(t,this._reportHeader,this._printing),this.addElement(this._reportHeaderView),this._reportFooter=e.reportFooter(),this._reportFooterView=new me(t,this._reportFooter,this._printing),this.addElement(this._reportFooterView),this._pageHeader=e.pageHeader(),this._pageHeaderView=new fe(t,this._pageHeader,this._printing),this._pageHeaderView._dom.$name="pageHeaderView",this.addElement(this._pageHeaderView),this._pageTitle=e.pageTitle(),this._pageTitleView=new ye(t,this._pageTitle,this._printing),this._pageTitleView._dom.$name="pageTitleView",this.addElement(this._pageTitleView),this._pageFooter=e.pageFooter(),this._pageFooterView=new we(t,this._pageFooter,this._printing),this._pageFooterView._dom.$name="pageFooterView",this.addElement(this._pageFooterView),this.loadTheme(It.Default)},_createDelegate:function(){return 0<=je.indexOf("report")?new Zt(this):null},_createDefaultTool:function(){return $_mobileEnable&&_isMobile()?new MobileSelectionTool(this):new PrintViewSelectionTool(this)},$_clearPrintViews:function(){this._reportHeaderView.$_clearViews(),this._reportFooterView.$_clearViews(),this._pageHeaderView.$_clearViews(),this._pageFooterView.$_clearViews(),this._pageTitleView.$_clearViews()},invalidateLayout:function(){this._super(),this._reportHeaderView&&(this._reportHeaderView.$_invalidateLayout(),this._reportFooterView.$_invalidateLayout(),this._pageHeaderView.$_invalidateLayout(),this._pageFooterView.$_invalidateLayout(),this._pageTitleView.$_invalidateLayout())},_doLayout:function(t){var e,i=this._gridView,s=t.clone();e=i._styles.border(),this._borderView&&this._borderView.setVisible(e&&0<e.width()),this._borderView&&this._borderView.visible()&&(this._borderView._border=e,this._borderView.setRect(s),this._borderView.invalidate(),s.inflate(-e.width(),-e.width())),this._summaryRuntime.setGrid(i),i.setRect(s),s.x=s.y=0,i._doLayout(s)}}),qe=b("PrintDesignPane",k,{init:function(t){this._super(t,"PrintDesignPane"),this._stroke=new R(4292730333,1,[2,2])},_doDraw:function(t){var e=this.width(),i=this.height();t.drawBoundsI(T.WHITE,null,0,0,e,i);for(var s=20;s<e;)t.drawVLineI(this._stroke,s,0,i),s+=20;for(var r=20;r<i;)t.drawHLineI(this._stroke,r,0,e),r+=20}}),Qe=b("PrintView",X,{init:function(t,e,i,s){this._super(t,e,i),this._productName="DataLudi Print Viewer v1.0",this._scrollBarWidth=0,s&&(this._scrollBarHeight=0),this.panel().setVisible(!1),this.rowIndicator().setVisible(!1),this.rowIndicator().setStateVisible(!1),this.checkBar().setVisible(!1)},load:function(t){this.container().load(t)},isDesignMode:function(){return!this.container().printing()},_updateScrollBars:function(t,e){this._super(t,e)},setFocusedIndex:function(t,e,i){},loadStyles:function(t){this._super(t),this.$_getModelLines(this,t.grid),this.$_getModelLines(this.header(),t.header),this.$_getModelLines(this.footer(),t.footer)},$_getModelLines:function(t,e){e&&(t._lineTop=x(e.lineTop),t._lineLeft=x(e.lineLeft),t._lineBottom=x(e.lineBottom),t._lineRight=x(e.lineRight))}}),Ze=b("PrintPreviewer",Je,{init:function(t,e){this._super(!0,t,!0),this._paging=e,this._dataProvider=new Dt,this._columnHeaderView=null,this._itemViews=null,this._mergeCells=null,this._reportFooterHeight=NaN,this._reportFooterAdded=!1,this._imagePile=[]},dataProvider:null,loadData:function(t){this._dataProvider.load(t)},$_initPageStyles:function(t,e){var i=this._pageStyles;if(!this._pageStyled){var s=this._pageRect=new J(0,0,t,e),r=i.border();this._pageBorderLeft=r||i.borderLeft(),this._pageBorderRight=r||i.borderRight(),this._pageBorderTop=r||i.borderTop(),this._pageBorderBottom=r||i.borderBottom(),this._pageBackground=i.background();var n=i.paddingLeft(),a=i.paddingRight(),h=i.paddingTop(),o=i.paddingBottom();s.leftBy((this._pageBorderLeft?this._pageBorderLeft.width():0)+(n||0)),s.topBy((this._pageBorderTop?this._pageBorderTop.width():0)+(h||0)),s.width-=(this._pageBorderRight?this._pageBorderRight.width():0)+(a||0),s.height-=(this._pageBorderBottom?this._pageBorderBottom.width():0)+(o||0)}},$_setPageStyles:function(t){var e=t.style;e.borderLeft=this._pageBorderLeft?this._pageBorderLeft.css():"",e.borderRight=this._pageBorderRight?this._pageBorderRight.css():"",e.borderTop=this._pageBorderTop?this._pageBorderTop.css():"",e.borderBottom=this._pageBorderBottom?this._pageBorderBottom.css():"",e.background=this._pageBackground?this._pageBackground.css():""},$_pileImage:function(t){this._imagePile.push(t)},$_openPreview:function(){for(var t=this._imagePile,e=t.length;e--;)t[e].complete&&t.splice(e,1);t.length<1||A()-this._imageStarted>=this._printOptions.imageLoadTime?window.print():setTimeout(function(){this.$_openPreview()}.bind(this),10)},preview:function(t,e,i){try{this.$_preview(t,e,i)}finally{this.$_clearGrid(this._gridView)}},$_preview:function(t,e,i){var s=this._gridView,r=this._model,n=this._dataProvider,a=this._printOptions,h=[],o=a.pageWidth(),l=a.pageHeight(),d=a.paperScreenWidth(),u=a.paperScreenHeight(),_=r.printGrid(),g=t&&_.visible(),c=0,p=0;n.setGrid(s),this.$_initPageStyles(o,l);var m=this._pageRect;g&&(this._populating=!0,this._layoutNeeded=!0,this.$_copyGrid(r,t,s),this.$_setGridOptions(s),this.$$_renderHtml(A()),this._populating=!1,p=(c=s.rowGroupLevels())*s.rowGroup().levelIndent(),this._itemViews=this.$_getRowViews(s.bodyView(),s.bandedGroupView())),s.setVisible(!1),this._container.style.height=0;var f,w=this._valueRuntime,y=g&&this._itemViews?this._itemViews.length:0,v={columnMerged:this.$_prepareMergedDataCells(s.mergeView()._cellLayer),pageHeaderVisible:this._pageHeaderView.visible(),pageFooterVisible:this._pageFooterView.visible(),pageTitleVisible:this._pageTitleView.visible(),reportHeaderVisible:this._reportHeaderView.visible(),reportFooterVisible:this._reportFooterView.visible(),gridVisible:g,columnHeaderVisible:g&&(this._columnHeaderView=s.headerView()).visible(),columnFooterVisible:g&&(this._columnFooterView=s.footerView()).visible(),customHeadersVisible:g&&(this._customHeadersView=s.headerItemsView()).visible(),customFootersVisible:g&&(this._customFootersView=s.footerItemsView()).visible(),itemCount:y,pageWidth:m.width,pageHeight:m.height,pageLayout:_.pageLayout(),pageColumns:_.pageColumns(),pageColumnLayout:_.columnLayout(),pageFill:_.pageFill(),columnGap:_.columnGap(),$_columnWidth:_.$_columnWidth,groupLevels:c,groupIndent:p};v.gridInner=v.gridInnerLeft||v.gridInnerRight||v.gridInnerTop||v.gridInnerBottom,g&&(f=this._columnHeaderView,v.columnHeaderVisible&&(f.$p_setIndent(p),this._drawElementHtml(f)),s.bodyView().clear());var b=0,x=0,S=!1;if(v.reportFooterVisible){var I=(f=this._reportFooterView).measure(o,1e4);this._reportFooterHeight=I.height,S=!(this._reportFooterAdded=!1)}else this._reportFooterAdded=!0;w.setTotalPage(888);var C,V=0,H=0;for(this._pageContainer=this._containerDiv;0<y&&b<y||S&&!this._reportFooterAdded||v.columnFooterVisible&&!this._columnFooterAdded||v.customFootersVisible&&!this._customFootersAdded;){this._paging&&(C=B.createElement("div",{position:"relative",boxSizing:"border-box",height:u+"px",width:d+"px",pageBreakAfter:"always",breakAfter:"always",overflow:"hidden",background:"#fff",border:"1px solid #aaa",marginTop:"4px",marginBottom:"4px"}),M&&(C.id="$$_dl_report_print_container"),this._pageContainer.appendChild(C));var D=B.createElement("div",{boxSizing:"border-box",height:l+"px",width:o+"px",overflow:"hidden"});if(this._paging?(D.style.position="absolute",D.style.left=E(a.paperMarginLeft().getSize())+"px",D.style.top=E(a.paperMarginTop().getSize())+"px",C.appendChild(D)):(D.style.position="relative",D.style.pageBreakAfter="always",D.style.breakAfter="always",this._pageContainer.appendChild(D)),M&&(D.id="$$_dl_report_page_container"),D.$$_page=!0,this.$_setPageStyles(D),M){var P=B.createElement("div",{position:"absolute",boxSizing:"border-box",left:m.x+"px",top:m.y+"px",width:m.width+"px",height:m.height+"px",overflow:"hidden"});P.style.border=F,D.appendChild(P)}var R=B.createElement("div",{position:"absolute",boxSizing:"border-box",left:m.x+"px",top:m.y+"px",width:m.width+"px",height:m.height+"px",overflow:"hidden"});if(D.appendChild(R),M&&(D.id="$$_dl_report_page"),n.setPage(x),w.setCurrPage(x),b=this.$_printPage(v,H,x++,b,R,h),H=D.offsetTop+D.offsetHeight,5<y&&V++>2*y)throw new Error("Printing error: too many null loops!")}w.setTotalPage(x);for(var L=h.length;L--;){var T=h[L];(f=T.$view).resetPageValue(x,T.$page),f.measure(T.offsetWidth,T.offsetHeight,!0),f.layoutItems(!0),this._drawElementHtml(f,!0),this.$_cloneElement3(f,T.parentElement,T)}this._pageHeaderView.setVisible(!1),this._pageFooterView.setVisible(!1),i&&i(),e&&(this._imageStarted=A(),W&&this.$_openPreview())},_prepareBorder:function(){},_prepareFeedbackLayer:function(){},_createGridView:function(t,e,i){return new ti(e)},_createDefaultTool:function(){return new ei(this)},_doLayout:function(t){var e=t.clone(),i=this.model().printGrid(),s=this._pageRect.width,r=i.pageColumns();1<r&&(s=(s-(r-1)*i.columnGap())/r,i.$_columnWidth=s),e.width="card"==i.pageLayout()?1e8:s,e.height=2e9,this._summaryRuntime.setReportData(this._dataProvider),this._super(e)},$$_renderHtml:function(){this._populating&&this._super()},$_copyGrid:function(t,e,i){var s,r,n=e.columns(),a=t.printGrid().rowFilter(),h=[];for(s=0;s<n.length;s++)r=n[s].proxy(),h.push(r);i.setColumns(h),i.setDataSource(e.dataSource()),i.setDisplayOptions(e.displayOptions().proxy()),i.setRowGroup(e.rowGroup().proxy()),i.setHeaderItems(e.headerItems().proxy()),i.setFooterItems(e.footerItems().proxy()),i.header().setVisible(e.header().visible()),i.footer().setVisible(e.footer().visible());var o=[];for(s=e.rowCount();s--;)o[e.getRow(s).dataIndex()]=e.isChecked(s);G.$_isChecked=function(t){return o[t.dataIndex()]},e.rowFilter().canFiltering()||a&&i.rowFilter().setExpression(a),i.$_doApplyFilters(),(r=e.$_sortRows)&&i._sortRows(r.fields,r.directions,r.textCases),(r=e.rowGroup().$_footerItemsSource)&&i.rowGroup().setFooterItems(r),(r=e.$_groupBy)&&i.groupBy(r.fields,r.sorting,r.direction),i.$_headerItemsHeight=e.headerItemsView().height(),i.$_footerItemsHeight=e.footerItemsView().height(),i._palettes=e._palettes},$_clearGrid:function(t){t._palettes=null,t.setDataSource(null)},$_setGridOptions:function(t){var e=this._model.grid();if(e){var i;(i=e.footer)&&t.setFooter(i),(i=e.display||e.displayOptions)&&t.setDisplayOptions(i);var s=e.styles;s&&t.loadStyles(s)}},$_getRowViews:function(t,e){var i,s,r,n=t._items,a=t._viewMap,h=[];for(i=0,s=e._headerViews.length;i<s;i++)h.push(e._headerViews[i]);for(i=0,s=e._footerViews.length;i<s;i++)h.push(e._footerViews[i]);for(i=0,s=e._customHeaderViews.length;i<s;i++)h.push(e._customHeaderViews[i]);for(i=0,s=e._customFooterViews.length;i<s;i++)h.push(e._customFooterViews[i]);for(i=0,s=n.length;i<s;i++)r=a[n[i].dataIndex()],h.push(r);return h.sort(function(t,e){return t.y()-e.y()}),h},$_cloneElement:function(t){var e=t._dom.cloneNode(!0);return this._rootElement._dom.appendChild(e),e},$_cloneElement2:function(t,e){var i=t._dom.cloneNode(!0);return e.appendChild(i),i},$_cloneElement3:function(t,e,i){var s=t._dom.cloneNode(!0);e.replaceChild(s,i);var r=s.style,n=i.style;return r.left=n.left,r.top=n.top,r.width=n.width,r.height=n.height,s},$_createVLine:function(t,e,i,s,r){var n=document.createElement("div"),a=n.style;return a.position="absolute",a.boxSizing="border-box",a.padding="0px",a.margin="0px",a.borderTop=r.css(),t.appendChild(n),B.setBounds(n,e,i,s,r.width()),n},$_createElement:function(t,e){var i=document.createElement(e||"div"),s=i.style;return t&&t.appendChild(i),s.position="absolute",s.boxSizing="border-box",s.padding="0px",s.margin="0px",s["-webkit-print-color-adjust"]="exact",i},$_prepareMergedDataCells:function(t){return this._mergeCells=t.getChildren(),!!this._mergeCells&&(this._mergeCells.sort(function(t,e){return t.mergeRoom().headItem()-e.mergeRoom().headItem()}),!0)},$_getMergedDataCells:function(t,e){for(var i,s,r,n,a=this._mergeCells,h=[],o=0,l=a.length;o<l&&((i=a[o]).$idx=o,r=(s=i.mergeRoom()).headItem(),n=s.tailItem(),t<=r&&n<=e?h.push(i):(r<=t&&t<=n||r<=e&&e<=n)&&(i.$$_many=!0,h.push(i)),!(e<r));o++);for(o=h.length;o--;)(i=h[o]).$$_many?i.mergeRoom().tailItem()<=e&&a.splice(i.$idx,1):a.splice(i.$idx,1);return h},$_writeMergedDataCells:function(t,e,i,s,r,n){var a,h,o,l,d,u,_,g,c,p;if(t.pageColumns<=1)for(a=this.$_getMergedDataCells(e,e+i.length-1),h=0,cnt=a.length;h<cnt;h++)d=(l=(o=a[h]).mergeRoom()).headItem(),_=(p=i[Math.max(0,d-e)]).y(),o.setY(_),o.$$_many&&(g=l.tailItem(),c=(p=i[Math.min(i.length-1,g-e)]).bottom()-_,o.setHeight(c),this._drawElementHtml(o,!0)),o.moveDom(),o.$$_many?(elt=this.$_cloneElement(o),r.appendChild(elt)):r.appendChild(o._dom);else if(t.pageColumnLayout==ft.ACROSS_THEN_DOWN){for(a=this.$_getMergedDataCells(e,e+i.length+s.length-1),h=0,cnt=a.length;h<cnt;h++)d=(l=(o=a[h]).mergeRoom()).headItem(),u=l.tailItem(),(p=i[Math.max(0,Math.ceil((d-e)/2))])&&(_=p.y(),o.setY(_),c=(p=i[Math.max(0,Math.min(i.length-1,Math.floor((u-e)/2)))]).bottom()-_,o.setHeight(c),this._drawElementHtml(o,!0),o.moveDom(),elt=this.$_cloneElement(o),r.appendChild(elt));for(h=0,cnt=a.length;h<cnt;h++)d=(l=(o=a[h]).mergeRoom()).headItem(),(u=l.tailItem())<e+1||(p=s[Math.max(0,Math.ceil((d-e-1)/2))])&&(_=p.y(),o.setY(_),c=(p=s[Math.max(0,Math.min(s.length-1,Math.floor((u-e-1)/2)))]).bottom()-_,o.setHeight(c),this._drawElementHtml(o,!0),o.moveDom(),elt=this.$_cloneElement(o),n.appendChild(elt))}else{for(a=this.$_getMergedDataCells(e,e+i.length-1),h=0,cnt=a.length;h<cnt;h++)d=(l=(o=a[h]).mergeRoom()).headItem(),_=(p=i[Math.max(0,d-e)]).y(),o.setY(_),o.$$_many&&(g=l.tailItem(),c=(p=i[Math.min(i.length-1,g-e)]).bottom()-_,o.setHeight(c),this._drawElementHtml(o,!0)),o.moveDom(),o.$$_many?(elt=this.$_cloneElement(o),r.appendChild(elt)):r.appendChild(o._dom);for(e+=i.length,a=this.$_getMergedDataCells(e,e+s.length-1),h=0,cnt=a.length;h<cnt;h++)d=(l=(o=a[h]).mergeRoom()).headItem(),_=(p=s[Math.max(0,d-e)]).y(),o.setY(_),o.$$_many&&(g=l.tailItem(),c=(p=s[Math.min(s.length-1,g-e)]).bottom()-_,o.setHeight(c),this._drawElementHtml(o,!0)),o.moveDom(),o.$$_many?(elt=this.$_cloneElement(o),n.appendChild(elt)):n.appendChild(o._dom)}},$_printPage:function(t,e,i,s,r,n){var a,h,o,l,d,u,_=t.pageWidth,g=t.pageHeight,c=t.groupIndent,p=0,m=g,f=new J(0,0,_,g),w=f.clone();if(t.pageHeaderVisible&&0<(h=(a=this._pageHeaderView).measure(_,1e4,!0)).height&&(a.setWidth(_),a.setHeight(h.height),a.layoutItems(!0),this._drawElementHtml(a),o=this.$_cloneElement2(a,r),B.setBounds(o,f.x,p,f.width,h.height),a.moveDom(),p+=h.height),0==i&&t.reportHeaderVisible&&(a=this._reportHeaderView,r.appendChild(a._dom),0<(h=a.measure(_,1e4,!0)).height&&(a.setBounds(f.x,p,f.width,h.height),a.layoutItems(!0),this._drawElementHtml(a),p+=h.height)),t.pageFooterVisible&&0<(h=(a=this._pageFooterView).measure(_,1e4,!0)).height&&(a.setWidth(_),a.setHeight(h.height),a.layoutItems(!0),this._drawElementHtml(a),(o=this.$_cloneElement2(a,r)).$view=a,o.$page=i,B.setBounds(o,f.x,m-h.height,f.width,h.height),t.pPageFooter=m-h.height,m-=h.height,a.model().hasPageValue()&&n.push(o)),t.customHeadersVisible&&!this._customHeadersAdded){if(l=(a=this._customHeadersView).height(),d=a.width(),!(0<i||l<=m-p))return 0;o=this.$_cloneElement2(a,r),B.setBounds(o,f.x,p,d,l),this._customHeadersAdded=!0,p+=l}t.pageTitleVisible&&0<(h=(a=this._pageTitleView).measure(_,1e4,!0)).height&&(a.setWidth(_),a.setHeight(h.height),a.layoutItems(!0),this._drawElementHtml(a),o=this.$_cloneElement2(a,r),B.setBounds(o,f.x,p,f.width,h.height),a.moveDom(),p+=h.height);var y=p;if(t.gridVisible)switch(t.pageLayout){case"card":u=this.$_printCard(t,r,w,p,m,s);break;default:u=this.$_printGrid(t,r,w,p,m,s)}else t.hGrid=0;if(p+=t.hGrid,!t.columnFooterVisible||this._columnFooterAdded){var v=t.customFootersVisible;v&&!this._customFootersAdded&&(0==t.itemCount||u>=t.itemCount)&&v&&(l=(a=this._customFootersView).height(),d=a.width(),p+l<=m&&(o=this.$_cloneElement2(a,r),B.setBounds(o,w.x,p,d,l),this.$_createVLine(r,w.x,p+l,d,R.GRAY),this._customFootersAdded=!0,p+=l)),v&&!this._customFootersAdded||(0==t.itemCount||u>=t.itemCount)&&t.reportFooterVisible&&(a=this._reportFooterView,0<(l=this._reportFooterHeight)?p+l<=m&&(t.pageFill&&(p=t.pPageFooter?t.pPageFooter-l:m-l),r.appendChild(a._dom),a.setBounds(w.x+c,p,_,l),a.layoutItems(!0),this._reportFooterAdded=!0,this._drawElementHtml(a),t.pageFill&&t.gridElt&&t.pGrid+y<p&&(l=p-t.pGrid-y,t.gridElt.style.height=t.pGrid+l+"px",t.columnFooterElt&&(t.columnFooterElt.style.top=t.yColumnFooter+l+"px")),p+=l):this._reportFooterAdded=!0)}return u},$_printGrid:function(t,e,i,s,r,n){var a,h,o,l,d,u,_,g,c,p,m,f=this._dataProvider,w=this._itemViews,y=t.groupIndent,v=[],b=[],x=t.pageWidth,S=1<t.pageColumns?i.clone():null,I=0,C=0;if(h=1<t.pageColumns?t.$_columnWidth:t.pageWidth,gridElt=this.$_createElement(e),i.y=s,i.height=r-s,i.width=h,s,1<t.pageColumns&&(o=this.$_createElement(e),S.y=i.y,S.height=i.height,S.x=i.x+h+(x-2*h),S.width=h),t.columnHeaderVisible&&n<t.itemCount&&(d=(l=this._columnHeaderView).height(),u=0,g=this.$_cloneElement2(l,gridElt),B.setBounds(g,u,I,h,d),c=[g],I+=d,d,1<t.pageColumns&&(l=this._columnHeaderView,g=this.$_cloneElement2(l,o),B.setBounds(g,u,C,h,d),c.push(g),C+=d)),n<t.itemCount)if(t.pageColumns<=1)for(_=i.height,a=n;a<t.itemCount&&(d=(l=w[a]).height(),!(n<a&&_<I+d));a++)f.setRow(l),p=l.item(),gridElt.appendChild(l._dom),p instanceof et&&l.setX(l.x()+y),l.setY(I),l.moveDom(),v.push(l),I+=d;else if(t.pageColumnLayout==ft.ACROSS_THEN_DOWN)for(_=i.height,a=n;a<t.itemCount&&(d=(l=w[a]).height(),!(n<a&&_<I+d));a++)f.setRow(l),p=l.item(),gridElt.appendChild(l._dom),p instanceof et&&l.setX(l.x()+y),l.setY(I),l.moveDom(),v.push(l),I+=d,a<t.itemCount-1&&(d=(l=w[++a]).height(),f.setRow(l),p=l.item(),o.appendChild(l._dom),p instanceof et&&l.setX(l.x()+y),l.setY(C),l.moveDom(),b.push(l),C+=d);else{for(_=i.height,a=n;a<t.itemCount;a++){if(d=(l=w[a]).height(),n<a&&_<I+d){l=null;break}f.setRow(l),p=l.item(),gridElt.appendChild(l._dom),p instanceof et&&l.setX(l.x()+y),l.setY(I),l.moveDom(),v.push(l),I+=d}for(m=C,j=0,cnt=v.length;j<cnt&&a<t.itemCount;j++,a++)d=(l=w[a]).height(),f.setRow(l),p=l.item(),o.appendChild(l._dom),p instanceof et&&l.setX(l.x()+y),l.setY(C),l.moveDom(),b.push(l),C+=d;if(a==t.itemCount&&C<I){for(;C<I&&1<v.length&&C+(d=(l=v[v.length-1]).height())<=I-d;)o.appendChild(l._dom),v.splice(v.length-1,1),b.splice(0,0,l),C+=d,I-=d;for(_=m,j=0;j<b.length;j++)(l=b[j]).setY(_),l.moveDom(),_+=l.height()}}else a=t.itemCount;t.columnMerged&&t.pageColumns<=2&&this.$_writeMergedDataCells(t,n,v,b,gridElt,o),t.columnFooterVisible&&!this._columnFootersdded&&(d=(l=this._columnFooterView).height(),h=l.width(),u=l.x(),1<t.pageColumns?S.height>=C+d&&(g=this.$_cloneElement2(l,o),B.setBounds(g,u+y,C,h,d),t.columnFooterElt2=g,t.yColumnFooter2=C,this._columnFooterAdded=!0,C+=d,t.pColumnFooter2=C):i.height>=I+d&&(g=this.$_cloneElement2(l,gridElt),B.setBounds(g,u+y,I,h,d),t.columnFooterElt=g,t.yColumnFooter=I,this._columnFooterAdded=!0,I+=d,t.pColumnFooter=I)),i.width,t.pageWidth,h=t.pageWidth,o&&(h=(t.pageWidth-10)/2),B.setBounds(gridElt,i.x,i.y,h,I);var V=this._gridView.styles(),H=gridElt.style,D=V.border();return D?H.border=P(D):(H.borderLeft=P(V.borderLeft()),H.borderRight=P(V.borderRight()),H.borderTop=P(V.borderTop()),H.borderBottom=P(V.borderBottom())),H.overflow="hidden",o&&(u=h+10,B.setBounds(o,u,S.y,h,C),H=o.style,D?H.border=P(D):(H.borderLeft=P(V.borderLeft()),H.borderRight=P(V.borderRight()),H.borderTop=P(V.borderTop()),H.borderBottom=P(V.borderBottom())),H.overflow="hidden"),t.gridElt=I?gridElt:null,t.gridElt2=C?o:null,t.yGrid=i.y,t.pGrid=I,t.yGrid2=C?S.y:0,t.pGrid2=C,t.hGrid=Math.max(C,I),a},$_printCard:function(t,e,i,s,r,n){var a,o,l,d,u,_,g,c,p,m,f=this.dataProvider(),w=this._itemViews,v=this.model().printGrid().card(),b=v.styles(),x=t.columnGap,S=v.rowGap(),I=n,C=0,V=0,H=t.pageColumns;if(l=t.pageWidth,u=this.$_createElement(e),i.y=s,i.height=r-s,i.width=l,b.deflatePaddings(i),v._item||(v._item=new Ne(v)),H<=1)for(d=i.width;I<t.itemCount;){if(f.setRow(w[I]),_=new $e(!0,v,this._printing),this.addElement(_),m=_.measure(d,i.height,!0),n<I&&C+m.height>i.height){this.removeElement(_);break}u.appendChild(_._dom),_.setBounds(V,C,d,m.height),_.layoutItems(),this._drawElementHtml(_),C+=m.height+S,I++}else if(t.pageColumnLayout==ft.ACROSS_THEN_DOWN)for(d=Math.floor((i.width-(H-1)*x)/H);I<t.itemCount;){for(g=[],a=V=h=0;I<t.itemCount&&a<H;a++,I++){if(f.setRow(w[I]),_=new $e(!0,v,this._printing),this.addElement(_),m=_.measure(d,i.height,!0),n<I&&C+m.height>i.height){for(this.removeElement(_),o=g.length;o--;)this.removeElement(g[o]),u.removeChild(g[o]._dom);break}u.appendChild(_._dom),_.setBounds(V,C,d,m.height),_.layoutItems(),this._drawElementHtml(_),h=Math.max(h,m.height),V+=d+x,g.push(_)}if(n<I&&C+m.height>i.height)break;C+=h+S}else{for(d=Math.floor((i.width-(H-1)*x)/H),y=C,c=[];I<t.itemCount;){for(g=[],a=V=h=0;I<t.itemCount&&a<H;a++,I++){if(f.setRow(w[I]),_=new $e(!0,v,this._printing),this.addElement(_),m=_.measure(d,i.height,!0),n<I&&C+m.height>i.height){for(this.removeElement(_),o=g.length;o--;)this.removeElement(g[o]),u.removeChild(g[o]._dom);break}u.appendChild(_._dom),_.setBounds(V,C,d,m.height),_.layoutItems(),h=Math.max(h,m.height),V+=d+x,g.push(_),c.push(_)}if(n<I&&C+m.height>i.height)break;C+=h+S}for(C=y,o=Math.floor((c.length+H-1)/H);1<o;){for(a=0;a<o;a++){for(I=h=0;I<H;I++)(_=c[I*o+a*H+I])&&(h=Math.max(h,_.height()));if(C+h>i.height)break;C+=h+S}if(a==o)break;o--}for(p=[],C=y,a=0;a<o;a++){for(I=V=h=0;I<H;I++)(_=c[I*o+a])&&(_.setBounds(V,C,d,_.height()),this._drawElementHtml(_),h=Math.max(h,_.height()),p.push(_)),V+=d+x;C+=h+S}I=n+Math.min(p.length,o*H)}return t.columnFooterVisible&&!this._columnFooterAdded&&(_=this._columnFooterView,h=_.height(),l=_.width(),V=_.x(),this._columnFooterAdded=!0),B.setBounds(u,i.x,i.y,l,C),b.inflatePaddings(i),t.hGrid=C,I}}),ti=b("PrintPreview",Qe,{init:function(t){this._super(t.$_dom,t,!0)}}),ei=b("PrintPreviewSelectionTool",Y,{init:function(t){this._super(t)},_doActivate:function(){this._super()},_doDeactivate:function(){this._super()},_doMouseDown:function(t,e,i,s,r){},_doMouseMove:function(t,e){},_doMouseUp:function(t,e){},_doMouseOutside:function(){},_doMouseWheel:function(t,e,i,s){},_doKeyDown:function(t,e,i){},_doKeyUp:function(t,e,i){},click:function(t){},dblclick:function(t){},mouseEnter:function(t){},mouseLeave:function(t){},mouseOver:function(t){},layoutChanged:function(){},focusedIndexChanging:function(t){},focusedIndexChanged:function(){},columnHeaderDblClicked:function(t){},dataCellClicked:function(t){},dataCellDblClicked:function(t){},cellButtonClicked:function(t){},editButtonClicked:function(t){}});return console&&console.log&&console.log("#### LOAD DATALUDI REPORT MODULE in "+m()+" ms."),{getVersion:function(){return a},createPrintPreviewer:function(t,e,i){return M=e,new Ze(t,i)},preview:function(t,r,n,a,e){var i=a;i instanceof Qt||(i=(new Qt).assign(i));var s=i.previewWidth(),h=i.previewHeight(),o="toolbar=yes, scrollbars=yes, resizable=yes, left="+(window.screen.availWidth-s)/2+", top="+(window.screen.availHeight-h)/2+", width="+s+", height="+h;!function t(e,i,s){i.preview?i.preview(e,r,n,a,s):setTimeout(function(){t(e,i,s)},0)}(t,window.open(i.previewUrl(),i.previewTitle(),o),e)},setHtmlDpi:function(t){N.HTMLDPI=t||96},setDebugPrint:function(t){M=t},PaperOrientation:mt,GridPageLayout:yt,PageColumnLayout:ft,GroupFillMode:vt,PrintOptions:Qt,GridReport:qt}}(this),dlreport=DLReport;